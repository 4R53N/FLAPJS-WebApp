<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8"/>
    <title id="project-version">Flap.js</title>
		<link rel="stylesheet" href="style.css">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Import Google Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Lato" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Overpass+Mono" rel="stylesheet">
  </head>
  <body style="font-family: 'Lato', 'sans-serif';">
    <script>
      const httpGetAsync = function(url, callback)
      {
        const request = new XMLHttpRequest();
        request.onreadystatechange = function() {
          if (request.readyState == 4 && request.status == 200)
          {
            const data = JSON.parse(request.responseText);
            callback(data);
          }
        };
        request.open("GET", url, true);
        request.send(null);
      };

      const MASTER_URL = "https://api.github.com/repos/JFLAP/JFLAP-WebApp/git/refs/heads/master";
      httpGetAsync(MASTER_URL, (data) => {
        const COMMIT_URL = data["object"]["url"];
        httpGetAsync(COMMIT_URL, (data) => {
          const dateString = data["committer"]["date"];
          const dateData = dateString.substring(2, dateString.length - 1).split("T");
          const date = dateData[0].replace(/-/g, '.');
          const dateTime = dateData[1].replace(/:/g, '.');
          const formattedDate = date + ":" + dateTime;
          document.getElementById("project-version").innerHTML += " (Build " + formattedDate + ")";
        });
      });
    </script>
    <div id="root"></div>

    <!-- Entry point -->
    <noscript>
      You need to enable Javascript to run this app.
    </noscript>

    <script src="./dist/bundle.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
  </body>
</html>
