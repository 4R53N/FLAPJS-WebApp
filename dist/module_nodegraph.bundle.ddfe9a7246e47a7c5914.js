(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{186:function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,(n=[{key:"onPreInputEvent",value:function(e){return!1}},{key:"onInputEvent",value:function(e){return!1}},{key:"onAltInputEvent",value:function(e){return!1}},{key:"onDblInputEvent",value:function(e){return!1}},{key:"onMoveInputEvent",value:function(e){return!1}},{key:"onDragStart",value:function(e){return!1}},{key:"onDragMove",value:function(e){}},{key:"onDragStop",value:function(e){}},{key:"onPostInputEvent",value:function(e){}},{key:"onZoomChange",value:function(e,t,n){return!1}}])&&r(t.prototype,n),o&&r(t,o),e}();t.a=o},193:function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._inputHandlers=[]}var t,n,o;return t=e,(n=[{key:"addInputHandler",value:function(e){return this._inputHandlers.push(e),this}},{key:"removeInputHandler",value:function(e){var t=this._inputHandlers.indexOf(e);return t>=0&&this._inputHandlers.splice(t,1),this}},{key:"clearInputHandlers",value:function(){this._inputHandlers.length=0}},{key:"handleEvent",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var o=!0,i=!1,a=void 0;try{for(var u,l=this._inputHandlers[Symbol.iterator]();!(o=(u=l.next()).done);o=!0){var s=u.value,c=s[e];if("function"==typeof c&&c.apply(s,n))return s}}catch(e){i=!0,a=e}finally{try{o||null==l.return||l.return()}finally{if(i)throw a}}return null}},{key:"getInputHandlers",value:function(){return this._inputHandlers}},{key:"hasInputHandlers",value:function(){return this._inputHandlers.length>0}}])&&r(t.prototype,n),o&&r(t,o),e}();t.a=o},194:function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,(n=[{key:"applyUndo",value:function(e){throw new Error("Undo operation for handler not supported")}},{key:"applyRedo",value:function(e){throw new Error("Redo operation for handler not supported")}}])&&r(t.prototype,n),o&&r(t,o),e}();t.a=o},212:function(e,t,n){"use strict";var r=n(0),o=n.n(r);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),u(this,l(t).call(this,e))}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(t,o.a.Component),n=t,(r=[{key:"render",value:function(){return o.a.createElement("svg",{id:this.props.id,className:this.props.className,style:this.props.style,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},o.a.createElement("path",{d:"M13,6V11H18V7.75L22.25,12L18,16.25V13H13V18H16.25L12,22.25L7.75,18H11V13H6V16.25L1.75,12L6,7.75V11H11V6H7.75L12,1.75L16.25,6H13Z"}))}}])&&a(n.prototype,r),i&&a(n,i),t}();t.a=c},213:function(e,t,n){"use strict";var r=n(0),o=n.n(r);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),u(this,l(t).call(this,e))}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(t,o.a.Component),n=t,(r=[{key:"render",value:function(){return o.a.createElement("svg",{id:this.props.id,className:this.props.className,style:this.props.style,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 26 26"},o.a.createElement("path",{d:"M 11.5 -0.03125 C 9.542969 -0.03125 7.96875 1.59375 7.96875 3.5625 L 7.96875 4 L 4 4 C 3.449219 4 3 4.449219 3 5 L 3 6 L 2 6 L 2 8 L 4 8 L 4 23 C 4 24.644531 5.355469 26 7 26 L 19 26 C 20.644531 26 22 24.644531 22 23 L 22 8 L 24 8 L 24 6 L 23 6 L 23 5 C 23 4.449219 22.550781 4 22 4 L 18.03125 4 L 18.03125 3.5625 C 18.03125 1.59375 16.457031 -0.03125 14.5 -0.03125 Z M 11.5 2.03125 L 14.5 2.03125 C 15.304688 2.03125 15.96875 2.6875 15.96875 3.5625 L 15.96875 4 L 10.03125 4 L 10.03125 3.5625 C 10.03125 2.6875 10.695313 2.03125 11.5 2.03125 Z M 6 8 L 11.125 8 C 11.25 8.011719 11.371094 8.03125 11.5 8.03125 L 14.5 8.03125 C 14.628906 8.03125 14.75 8.011719 14.875 8 L 20 8 L 20 23 C 20 23.5625 19.5625 24 19 24 L 7 24 C 6.4375 24 6 23.5625 6 23 Z M 8 10 L 8 22 L 10 22 L 10 10 Z M 12 10 L 12 22 L 14 22 L 14 10 Z M 16 10 L 16 22 L 18 22 L 18 10 Z "}))}}])&&a(n.prototype,r),i&&a(n,i),t}();t.a=c},214:function(e,t,n){"use strict";var r=n(0),o=n.n(r);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),u(this,l(t).call(this,e))}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(t,o.a.Component),n=t,(r=[{key:"render",value:function(){return o.a.createElement("svg",{id:this.props.id,className:this.props.className,style:this.props.style,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},o.a.createElement("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"}),o.a.createElement("path",{d:"M12 10h-2v2H9v-2H7V9h2V7h1v2h2v1z"}))}}])&&a(n.prototype,r),i&&a(n,i),t}();t.a=c},215:function(e,t,n){"use strict";var r=n(0),o=n.n(r);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),u(this,l(t).call(this,e))}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(t,o.a.Component),n=t,(r=[{key:"render",value:function(){return o.a.createElement("svg",{id:this.props.id,className:this.props.className,style:this.props.style,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},o.a.createElement("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14zM7 9h5v1H7z"}))}}])&&a(n.prototype,r),i&&a(n,i),t}();t.a=c},216:function(e,t,n){"use strict";var r=n(0),o=n.n(r);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),u(this,l(t).call(this,e))}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(t,o.a.Component),n=t,(r=[{key:"render",value:function(){return o.a.createElement("svg",{id:this.props.id,className:this.props.className,style:this.props.style,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},o.a.createElement("path",{d:"M12 8c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm8.94 3c-.46-4.17-3.77-7.48-7.94-7.94V1h-2v2.06C6.83 3.52 3.52 6.83 3.06 11H1v2h2.06c.46 4.17 3.77 7.48 7.94 7.94V23h2v-2.06c4.17-.46 7.48-3.77 7.94-7.94H23v-2h-2.06zM12 19c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7z"}))}}])&&a(n.prototype,r),i&&a(n,i),t}();t.a=c},218:function(e,t,n){"use strict";function r(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;window.confirm(I18N.toString("alert.graph.clear"))&&(e.getCurrentModule().getGraphController().getGraph().clear(),t?e.getUndoManager().captureEvent():(e.getUndoManager().clear(),e.getSession().setProjectName(null)),n&&n())}n.d(t,"a",function(){return r})},220:function(e,t,n){"use strict";var r=n(0),o=n.n(r),i=n(130),a=n.n(i),u=n(193);function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._inputAdapter=t,this._element=n,this._viewportAdapter=r,this._active=!1,this._x=0,this._y=0,this._inputpos={x:0,y:0}}var t,n,r;return t=e,(n=[{key:"setPosition",value:function(e,t){return this._x=e,this._y=t,this}},{key:"beginInput",value:function(){this._active=!0,this._inputpos.x=this._x,this._inputpos.y=this._y}},{key:"getInputEventPosition",value:function(){return this._inputpos}},{key:"changeInputEventPosition",value:function(e,t){this._inputpos.x=e,this._inputpos.y=t}},{key:"endInput",value:function(){this._active=!1}},{key:"isActive",value:function(){return this._active}},{key:"getDistanceSquToInitial",value:function(){var e=this._inputpos,t=e.x-this._x,n=e.y-this._y;return t*t+n*n}},{key:"getElement",value:function(){return this._element}},{key:"getViewportAdapter",value:function(){return this._viewportAdapter}},{key:"getInputAdapter",value:function(){return this._inputAdapter}},{key:"x",get:function(){return this._x}},{key:"y",get:function(){return this._y}}])&&l(t.prototype,n),r&&l(t,r),e}();function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var f=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._element=null,this._offsetX=0,this._offsetY=0,this._nextOffsetX=0,this._nextOffsetY=0,this._offsetDamping=.1,this._scaleFactor=1,this._minScale=1,this._maxScale=1}var t,n,r;return t=e,(n=[{key:"setElement",value:function(e){return this._element=e,this}},{key:"setMinScale",value:function(e){return this._minScale=e,this._scaleFactor<this._minScale&&(this._scaleFactor=this._minScale),this}},{key:"setMaxScale",value:function(e){return this._maxScale=e,this._scaleFactor>this._maxScale&&(this._scaleFactor=this._maxScale),this}},{key:"setOffsetDamping",value:function(e){return this._offsetDamping=e,this}},{key:"update",value:function(){var e=this._nextOffsetX-this._offsetX;this._offsetX+=e*this._offsetDamping;var t=this._nextOffsetY-this._offsetY;this._offsetY+=t*this._offsetDamping}},{key:"transformScreenToView",value:function(e,t){if(!this._element)return{x:e-this._offsetX,y:t-this._offsetY};var n=this._element.getScreenCTM();return{x:(e-n.e)/n.a-this._offsetX,y:(t-n.f)/n.d-this._offsetY}}},{key:"setOffset",value:function(e,t){arguments.length>2&&void 0!==arguments[2]&&arguments[2]?(this._nextOffsetX=this._offsetX=e,this._nextOffsetY=this._offsetY=t):(this._nextOffsetX=e,this._nextOffsetY=t)}},{key:"addOffset",value:function(e,t){arguments.length>2&&void 0!==arguments[2]&&arguments[2]?(this._offsetX+=e,this._offsetY+=t,this._nextOffsetX=this._offsetX,this._nextOffsetY=this._offsetY):(this._nextOffsetX+=e,this._nextOffsetY+=t)}},{key:"setScale",value:function(e){this._scaleFactor=Math.min(this._maxScale,Math.max(this._minScale,e))}},{key:"addScale",value:function(e){this._scaleFactor=Math.min(this._maxScale,Math.max(this._minScale,this._scaleFactor+e))}},{key:"getOffsetX",value:function(){return this._offsetX}},{key:"getOffsetY",value:function(){return this._offsetY}},{key:"getOffsetDamping",value:function(){return this._offsetDamping}},{key:"getScale",value:function(){return this._scaleFactor}},{key:"getMinScale",value:function(){return this._minScale}},{key:"getMaxScale",value:function(){return this._maxScale}},{key:"getElement",value:function(){return this._element}}])&&c(t.prototype,n),r&&c(t,r),e}();function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t,n){return(y="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=v(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var b=600,m=600,_=1/300,w=16,E=324,O=function(e){function t(){var e,n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(e=!(r=v(t).call(this))||"object"!==p(r)&&"function"!=typeof r?g(n):r)._contexts=[],e._activeDragHandler=null,e._element=null,e._cursor={_mousemove:null,_mouseup:null,_touchmove:null,_touchend:null,_timer:null},e._pointer=null,e._viewportAdapter=new f,e._dragging=!1,e._altinput=!1,e._holdInputDelay=b,e._dblInputDelay=m,e._scrollSensitivity=_,e._minTapRadius=16*w,e._draggingRadiusSqu=w+E,e._prevEmptyInput=!1,e._prevEmptyTime=0,e._prevEmptyX=0,e._prevEmptyY=0,e.onContextMenu=e.onContextMenu.bind(g(g(e))),e.onMouseDown=e.onMouseDown.bind(g(g(e))),e.onMouseMove=e.onMouseMove.bind(g(g(e))),e.onTouchStart=e.onTouchStart.bind(g(g(e))),e.onWheel=e.onWheel.bind(g(g(e))),e.onMouseDownThenMove=e.onMouseDownThenMove.bind(g(g(e))),e.onMouseDownThenUp=e.onMouseDownThenUp.bind(g(g(e))),e.onTouchStartThenMove=e.onTouchStartThenMove.bind(g(g(e))),e.onTouchStartThenEnd=e.onTouchStartThenEnd.bind(g(g(e))),e.onDelayedInputDown=e.onDelayedInputDown.bind(g(g(e))),e}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,u["a"]),n=t,(r=[{key:"bindContext",value:function(e){if(!(e instanceof u.a))throw new Error("Cannot bind invalid context - must be an instance of InputContext");return this._contexts.unshift(e),this}},{key:"bindContextAsLast",value:function(e){if(!(e instanceof u.a))throw new Error("Cannot bind invalid context - must be an instance of InputContext");return this._contexts.push(e),this}},{key:"unbindContext",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(e){var t=this._contexts.indexOf(e);return t>=0?(this._contexts.splice(t,1),e):null}return this._contexts.shift()}},{key:"clearContexts",value:function(){this._contexts.length=0}},{key:"hasContexts",value:function(){return this._contexts.length>0}},{key:"getCurrentContext",value:function(){return this._contexts.length>0?this._contexts[this._contexts.length-1]:this}},{key:"initialize",value:function(e){if(!(e instanceof SVGElement))throw new Error("Missing SVG element for input adapter's viewport");if(this._element)throw new Error("Trying to initialize an InputAdapter already initialized");this._viewportAdapter.setElement(this._element=e),this._pointer=new s(this,this._element,this._viewportAdapter),this._element.addEventListener("mousedown",this.onMouseDown),this._element.addEventListener("mousemove",this.onMouseMove),this._element.addEventListener("touchstart",this.onTouchStart),this._element.addEventListener("touchmove",this.onTouchMove),this._element.addEventListener("contextmenu",this.onContextMenu),this._element.addEventListener("wheel",this.onWheel)}},{key:"destroy",value:function(){if(!this._element)throw new Error("Trying to destroy an InputAdapter that is not yet initialized");this._element.removeEventListener("mousedown",this.onMouseDown),this._element.removeEventListener("mousemove",this.onMouseMove),this._element.removeEventListener("touchstart",this.onTouchStart),this._element.removeEventListener("contextmenu",this.onContextMenu),this._element.removeEventListener("wheel",this.onWheel),this._element=null}},{key:"update",value:function(){this._element&&this._viewportAdapter.update()}},{key:"handleEvent",value:function(e){for(var n,r=arguments.length,o=new Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];var a=!0,u=!1,l=void 0;try{for(var s,c=this._contexts[Symbol.iterator]();!(a=(s=c.next()).done);a=!0){var f=s.value,p=f.handleEvent.apply(f,[e].concat(o));if(p)return p}}catch(e){u=!0,l=e}finally{try{a||null==c.return||c.return()}finally{if(u)throw l}}return(n=y(v(t.prototype),"handleEvent",this)).call.apply(n,[this,e].concat(o))}},{key:"onMouseDown",value:function(e){e.stopPropagation(),e.preventDefault();var t=this._cursor;document.activeElement.blur(),this._element.focus(),t._mousemove&&(document.removeEventListener("mousemove",t._mousemove),t._mousemove=null),t._mouseup&&(document.removeEventListener("mouseup",t._mouseup),t._mouseup=null);var n=e.ctrlKey?2:e.button;return this.onInputDown(e.clientX,e.clientY,n)&&(t._mousemove=this.onMouseDownThenMove,t._mouseup=this.onMouseDownThenUp,document.addEventListener("mousemove",t._mousemove),document.addEventListener("mouseup",t._mouseup)),!1}},{key:"onMouseMove",value:function(e){var t=this._viewportAdapter.transformScreenToView(e.clientX,e.clientY),n=this._pointer;n.setPosition(t.x,t.y),this.handleEvent("onMoveInputEvent",n)&&(e.stopPropagation(),e.preventDefault(),this.cancelInputEvent())}},{key:"onMouseDownThenMove",value:function(e){return e.stopPropagation(),e.preventDefault(),this.onInputMove(e.clientX,e.clientY),!1}},{key:"onMouseDownThenUp",value:function(e){e.stopPropagation(),e.preventDefault();var t=this._cursor;return t._mousemove&&(document.removeEventListener("mousemove",t._mousemove),t._mousemove=null),t._mouseup&&(document.removeEventListener("mouseup",t._mouseup),t._mouseup=null),this.onInputUp(e.clientX,e.clientY),!1}},{key:"onTouchStart",value:function(e){if(1==e.changedTouches.length){e.stopPropagation(),e.preventDefault();var t=this._cursor;document.activeElement.blur(),this._element.focus(),t._touchmove&&(document.removeEventListener("touchmove",t._touchmove),t._touchmove=null),t._touchend&&(document.removeEventListener("touchend",t._touchend),t._touchend=null);var n=e.changedTouches[0];return this.onInputDown(n.clientX,n.clientY,0)&&(t._touchmove=this.onTouchStartThenMove,t._touchend=this.onTouchStartThenEnd,document.addEventListener("touchmove",t._touchmove),document.addEventListener("touchend",t._touchend)),!1}}},{key:"onTouchStartThenEnd",value:function(e){e.stopPropagation(),e.preventDefault();var t=this._cursor;t._touchmove&&(document.removeEventListener("touchmove",t._touchmove),t._touchmove=null),t._touchend&&(document.removeEventListener("touchend",t._touchend),t._touchend=null);var n=e.changedTouches[0];return this.onInputUp(n.clientX,n.clientY),!1}},{key:"onTouchStartThenMove",value:function(e){e.stopPropagation(),e.preventDefault();var t=e.changedTouches[0];return this.onInputMove(t.clientX,t.clientY),!1}},{key:"onContextMenu",value:function(e){return e.stopPropagation(),e.preventDefault(),!1}},{key:"onWheel",value:function(e){e.stopPropagation(),e.preventDefault();var t=this._pointer,n=e.deltaY*this._scrollSensitivity,r=this._viewportAdapter.getScale(),o=r+n;return this.handleEvent("onZoomChange",t,o,r)||this._viewportAdapter.setScale(o),!1}},{key:"onInputDown",value:function(e,t,n){var r=this._cursor,o=this._pointer,i=this._viewportAdapter.transformScreenToView(e,t);return o.setPosition(i.x,i.y),this._dragging=!1,this._altinput=2==n,!this.handleEvent("onPreInputEvent",o)&&(o.beginInput(),r._timer=setTimeout(this.onDelayedInputDown,this._holdInputDelay),!0)}},{key:"onDelayedInputDown",value:function(){this._dragging||(this._altinput=!0)}},{key:"onInputMove",value:function(e,t){var n=this._pointer,r=this._viewportAdapter.transformScreenToView(e,t);if(n.setPosition(r.x,r.y),this._dragging)this._activeDragHandler&&this._activeDragHandler.onDragMove(n);else if(n.getDistanceSquToInitial()>this._draggingRadiusSqu){this._dragging=!0;var o=n.getInputEventPosition(),i=this.handleEvent("onDragStart",n,o.x,o.y);i?this._activeDragHandler=i:(this._dragging=!1,this.cancelInputEvent())}}},{key:"onInputUp",value:function(e,t){var n=this._cursor,r=n._timer;r&&(clearTimeout(r),n._timer=null);var o=this._pointer,i=this._viewportAdapter.transformScreenToView(e,t);if(o.setPosition(i.x,i.y),this._dragging)this._activeDragHandler&&(this._activeDragHandler.onDragStop(o),this._activeDragHandler=null);else if(this._altinput)this.handleEvent("onAltInputEvent",o);else if(!this.handleEvent("onInputEvent",o)){var a=e-this._prevEmptyX,u=t-this._prevEmptyY,l=a*a+u*u,s=Date.now()-this._prevEmptyTime;this._prevEmptyInput&&l<this._minTapRadius&&s<this._dblInputDelay?(this.handleEvent("onDblInputEvent",o),this._prevEmptyInput=!1):(this._prevEmptyInput=!0,this._prevEmptyTime=Date.now(),this._prevEmptyX=e,this._prevEmptyY=t)}o.endInput(),this.handleEvent("onPostInputEvent",o)}},{key:"cancelInputEvent",value:function(){var e=this._pointer,t=this._cursor;t._mousemove&&(document.removeEventListener("mousemove",t._mousemove),t._mousemove=null),t._mouseup&&(document.removeEventListener("mouseup",t._mouseup),t._mouseup=null);var n=t._timer;n&&(clearTimeout(n),t._timer=null),e.endInput(),this.handleEvent("onPostInputEvent",e)}},{key:"getContexts",value:function(){return this._contexts}},{key:"getActiveElement",value:function(){return this._element}},{key:"getViewportAdapter",value:function(){return this._viewportAdapter}},{key:"getPointerX",value:function(){return this._pointer?this._pointer.x:0}},{key:"getPointerY",value:function(){return this._pointer?this._pointer.y:0}},{key:"isPointerActive",value:function(){return!!this._pointer&&this._pointer.isActive()}},{key:"isUsingTouch",value:function(){return this._cursor._touchmove||this._cursor._touchend}},{key:"isAltInput",value:function(){return this._altinput}},{key:"isDragging",value:function(){return this._dragging}}])&&h(n.prototype,r),o&&h(n,o),t}(),S=n(186);function k(e){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function x(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function C(e,t){return!t||"object"!==k(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function M(e){return(M=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function P(e,t){return(P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var T=.4,j=.1,I=10,L=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=C(this,M(t).call(this,e)))._ref=o.a.createRef(),n._inputAdapter=new O,n._inputAdapter.getViewportAdapter().setMinScale(j).setMaxScale(I).setOffsetDamping(T),n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P(e,t)}(t,o.a.Component),n=t,(r=[{key:"addInputHandler",value:function(e){if(!(e instanceof S.a))throw new Error("input handler must be an instanceof AbstractInputHandler");return this._inputAdapter.addInputHandler(e),this}},{key:"componentDidMount",value:function(){this._inputAdapter.initialize(this._ref.current)}},{key:"componentWillUnmount",value:function(){this._inputAdapter.destroy()}},{key:"componentDidUpdate",value:function(){this._inputAdapter.update()}},{key:"getSVGTransformString",value:function(){var e=this._inputAdapter.getViewportAdapter();return"translate("+e.getOffsetX()+" "+e.getOffsetY()+")"}},{key:"getSVGViewBoxString",value:function(e){var t=this._inputAdapter.getViewportAdapter(),n=e*Math.max(Number.MIN_VALUE,t.getScale()),r=n/2;return-r+" "+-r+" "+n+" "+n}},{key:"getSVGElement",value:function(){return this._ref.current}},{key:"getInputAdapter",value:function(){return this._inputAdapter}},{key:"render",value:function(){var e=this.getSVGViewBoxString(this.props.viewSize||300),t=this.getSVGTransformString();return o.a.createElement("svg",{ref:this._ref,id:this.props.id,className:a.a.viewport_component+" "+this.props.className,style:this.props.style,viewBox:e},o.a.createElement("g",{transform:t},this.props.children))}}])&&x(n.prototype,r),i&&x(n,i),t}();t.a=L},251:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),i=n(9),a=n(218),u=n(10),l=n(175),s=n.n(l),c=n(220);function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return!t||"object"!==f(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),h(this,y(t).call(this,e))}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(t,o.a.Component),n=t,(r=[{key:"render",value:function(){var e=this.props.visible,t=this.props.fromX||0,n=this.props.fromY||0,r=this.props.toX||t+1,i=this.props.toY||n+1,a=this.props.color||"#000000",u=r-t,l=i-n;return o.a.createElement("g",null,e&&o.a.createElement("rect",{x:Math.min(r,t),y:Math.min(i,n),width:Math.abs(u),height:Math.abs(l),stroke:a,fill:a,fillOpacity:.1}))}}])&&p(n.prototype,r),i&&p(n,i),t}();function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t){return!t||"object"!==g(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var E=function(e){return o.a.createElement(o.a.Fragment,null,o.a.createElement("circle",{cx:e.position.x,cy:e.position.y,r:e.radius,fill:e.color,stroke:e.outline}),o.a.createElement("circle",{cx:e.position.x,cy:e.position.y,r:e.radius+4,fill:"transparent",cursor:"pointer",onMouseOver:e.onMouseOver,onMouseOut:e.onMouseOut,pointerEvents:e.pointerEvents}))},O=function(e){return o.a.createElement("text",{x:e.position.x,y:e.position.y+4,pointerEvents:"none",style:{userSelect:"none",fontSize:"".concat(1-Math.min(Math.max(e.label.length-2,0)/6,.5),"em")},textAnchor:"middle",stroke:e.color},e.label)},S=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),m(this,_(t).call(this,e))}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}(t,o.a.Component),n=t,(r=[{key:"render",value:function(){var e=this.props.position,t=this.props.radius||16,n=this.props.label||"",r=this.props.color||"#FFFFFF",i=this.props.outline||"#000000",a=this.props.onMouseOver,u=this.props.onMouseOut,l=this.props.pointerEvents||"visiblePainted",s=E,c=O;return o.a.createElement("g",null,s&&o.a.createElement(s,{position:e,radius:t,color:r,outline:i,onMouseOver:a?function(e){(e.target.value||(e.target.value={})).type="node",a(e)}:null,onMouseOut:u?function(e){(e.target.value||(e.target.value={})).type="node",u(e)}:null,pointerEvents:l}),c&&o.a.createElement(c,{position:e,label:n,color:i}))}}])&&b(n.prototype,r),i&&b(n,i),t}();function k(e){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function x(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function C(e,t){return!t||"object"!==k(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function M(e){return(M=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function P(e,t){return(P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var T=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),C(this,M(t).call(this,e))}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P(e,t)}(t,o.a.Component),n=t,(r=[{key:"render",value:function(){var e=this.props.node,t=this.props.fill,n=this.props.stroke,r=this.props.onMouseOver,i=this.props.onMouseOut,a=this.props.pointerEvents,u=e.getNodeLabel(),l=e.getNodeSize();return o.a.createElement(o.a.Fragment,null,o.a.createElement(S,{position:e,radius:l,label:u,color:t,outline:n,onMouseOver:r?function(t){(t.target.value||(t.target.value={})).source=e,r(t)}:null,onMouseOut:i?function(t){(t.target.value||(t.target.value={})).source=e,i(t)}:null,pointerEvents:a}))}}])&&x(n.prototype,r),i&&x(n,i),t}();function j(e){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function I(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function L(e,t){return!t||"object"!==j(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function D(e){return(D=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function A(e,t){return(A=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var N=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),L(this,D(t).call(this,e))}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&A(e,t)}(t,o.a.Component),n=t,(r=[{key:"render",value:function(){var e=this.props.inputController,t=this.props.onMouseOver,n=this.props.onMouseOut,r=[],i=!0,a=!1,u=void 0;try{for(var l,s=this.props.nodes[Symbol.iterator]();!(i=(l=s.next()).done);i=!0){var c=l.value;r.push(o.a.createElement(T,{key:c.getGraphElementID(),node:c,onMouseOver:t,onMouseOut:n,pointerEvents:e.hasPointerEvents(c)?"all":"none"}))}}catch(e){a=!0,u=e}finally{try{i||null==s.return||s.return()}finally{if(a)throw u}}return o.a.createElement("g",null,r)}}])&&I(n.prototype,r),i&&I(n,i),t}();function R(e){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function B(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function G(e,t){return!t||"object"!==R(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function H(e){return(H=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function F(e,t){return(F=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var V=Math.PI/6,X=function(e){return o.a.createElement(o.a.Fragment,null,o.a.createElement("path",{d:"M "+(e.position.x-e.length*Math.sin(e.angle-V))+" "+(e.position.y-e.length*Math.cos(e.angle-V))+" L "+e.position.x+" "+e.position.y+" L "+(e.position.x-e.length*Math.sin(e.angle+V))+" "+(e.position.y-e.length*Math.cos(e.angle+V)),stroke:e.color,fill:"none"}),o.a.createElement("circle",{cx:e.position.x,cy:e.position.y,r:e.length/2,fill:"transparent",cursor:"pointer",onMouseOver:e.onMouseOver,onMouseOut:e.onMouseOut,pointerEvents:e.pointerEvents}))},Y=function(e){return o.a.createElement("g",{transform:"translate("+e.position.x+","+e.position.y+") rotate("+180*e.direction/Math.PI+")"},e.labels&&e.labels.length>0&&e.labels.map(function(t,n){var r=e.onMouseOver,i=e.onMouseOut;return o.a.createElement("text",{key:t+"."+n,transform:"translate(0,"+-15*(n+1)+")"+(e.reverse?" scale(-1,-1)":""),alignmentBaseline:"central",style:{userSelect:"none"},textAnchor:"middle",fill:e.color,cursor:"pointer",onMouseOver:r?function(e){(e.target.value||(e.target.value={})).index=n,r(e)}:null,onMouseOut:i?function(e){(e.target.value||(e.target.value={})).index=n,i(e)}:null,pointerEvents:e.pointerEvents},t)}))},z=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),G(this,H(t).call(this,e))}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&F(e,t)}(t,o.a.Component),n=t,(r=[{key:"render",value:function(){var e,t,n=this.props.directed||"undirected",r="forward"===n||"both"===n?this.props.forwardEndpointRenderer||this.props.endpointRenderer||X:null,i="backward"===n||"both"===n?this.props.backwardEndpointRenderer||this.props.endpointRenderer||X:null,a=this.props.labelRenderer||Y,u=this.props.from,l=this.props.to,s=this.props.center,c=this.props.label||"",f=this.props.direction||0,p=this.props.color||"#000000",h=this.props.onMouseOver,y=this.props.onMouseOut,v=this.props.pointerEvents||"visiblePainted",d=!1,g=null,b=u.x-l.x,m=u.y-l.y,_=u.x-s.x,w=u.y-s.y,E=Math.atan2(m,b),O=Math.atan2(w,_);if(Math.abs(E-O)<=.01)t=Math.atan2(s.x-l.x,s.y-l.y)+Math.PI,e=Math.atan2(s.x-u.x,s.y-u.y)+Math.PI,g="L "+l.x+" "+l.y,d=!1;else{var S=(4*s.x-u.x-l.x)/2,k=(4*s.y-u.y-l.y)/2;t=Math.atan2(S-l.x,k-l.y)+Math.PI,e=Math.atan2(S-u.x,k-u.y)+Math.PI,g="Q "+S+" "+k+" "+l.x+" "+l.y,d=k>s.y+4}var x="M ".concat(u.x," ").concat(u.y," ").concat(g);return o.a.createElement("g",null,o.a.createElement("path",{d:x,stroke:p,fill:"none"}),o.a.createElement("path",{d:x,stroke:"transparent",strokeWidth:"".concat(8,"px"),fill:"none",cursor:"pointer",onMouseOver:h?function(e){(e.target.value||(e.target.value={})).type="edge",h(e)}:null,onMouseOut:y?function(e){(e.target.value||(e.target.value={})).type="edge",y(e)}:null,pointerEvents:v}),r&&o.a.createElement(r,{position:l,angle:t,length:10,color:p,onMouseOver:h?function(e){(e.target.value||(e.target.value={})).type="forward-endpoint",h(e)}:null,onMouseOut:y?function(e){(e.target.value||(e.target.value={})).type="forward-endpoint",y(e)}:null,pointerEvents:v}),i&&o.a.createElement(i,{position:u,angle:e,length:10,color:p,onMouseOver:h?function(e){(e.target.value||(e.target.value={})).type="backward-endpoint",h(e)}:null,onMouseOut:y?function(e){(e.target.value||(e.target.value={})).type="backward-endpoint",y(e)}:null,pointerEvents:v}),a&&o.a.createElement(a,{position:s,labels:c.split("\n"),direction:f,reverse:d,color:p,onMouseOver:h?function(e){(e.target.value||(e.target.value={})).type="label",h(e)}:null,onMouseOut:y?function(e){(e.target.value||(e.target.value={})).type="label",y(e)}:null,pointerEvents:v}))}}])&&B(n.prototype,r),i&&B(n,i),t}();function Q(e){return(Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function U(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function q(e,t){return!t||"object"!==Q(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Z(e){return(Z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function W(e,t){return(W=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var K=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),q(this,Z(t).call(this,e))}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&W(e,t)}(t,o.a.Component),n=t,(r=[{key:"render",value:function(){var e=this.props.edge,t=this.props.stroke,n=this.props.onMouseOver,r=this.props.onMouseOut,i=this.props.pointerEvents,a=e.getStartPoint(),u=e.getEndPoint(),l=e.getCenterPoint(),s=e.getEdgeLabel(),c=e.getEdgeDirection();return o.a.createElement(o.a.Fragment,null,o.a.createElement(z,{directed:"forward",from:a,to:u,center:l,label:s,direction:c,color:t,onMouseOver:n?function(t){(t.target.value||(t.target.value={})).source=e,n(t)}:null,onMouseOut:r?function(t){(t.target.value||(t.target.value={})).source=e,r(t)}:null,pointerEvents:i}))}}])&&U(n.prototype,r),i&&U(n,i),t}();function J(e){return(J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ee(e,t){return!t||"object"!==J(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function te(e){return(te=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ne(e,t){return(ne=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var re=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ee(this,te(t).call(this,e))}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ne(e,t)}(t,o.a.Component),n=t,(r=[{key:"render",value:function(){var e=this.props.inputController,t=this.props.onMouseOver,n=this.props.onMouseOut,r=[],i=!0,a=!1,u=void 0;try{for(var l,s=this.props.edges[Symbol.iterator]();!(i=(l=s.next()).done);i=!0){var c=l.value;r.push(o.a.createElement(K,{key:c.getGraphElementID(),edge:c,onMouseOver:t,onMouseOut:n,pointerEvents:e.hasPointerEvents(c)?"all":"none"}))}}catch(e){a=!0,u=e}finally{try{i||null==s.return||s.return()}finally{if(a)throw u}}return o.a.createElement("g",null,r)}}])&&$(n.prototype,r),i&&$(n,i),t}();function oe(e){return(oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ie(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ae(e,t){return!t||"object"!==oe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ue(e){return(ue=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function le(e,t){return(le=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var se=[8,6],ce=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ae(this,ue(t).call(this,e))}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&le(e,t)}(t,o.a.Component),n=t,(r=[{key:"render",value:function(){var e=this.props.center,t=this.props.color||"#CCCCCC",n=this.props.radius||24;return o.a.createElement(o.a.Fragment,null,o.a.createElement("circle",{cx:e.x,cy:e.y,r:n,stroke:t,strokeDashoffset:0,strokeDasharray:se,strokeWidth:3,fill:"none",pointerEvents:"none"}))}}])&&ie(n.prototype,r),i&&ie(n,i),t}();function fe(e){return(fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function he(e,t){return!t||"object"!==fe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ye(e){return(ye=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ve(e,t){return(ve=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var de=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),he(this,ye(t).call(this,e))}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ve(e,t)}(t,o.a.Component),n=t,(r=[{key:"render",value:function(){var e=[],t=this.props.nodes;if(t){var n=!0,r=!1,i=void 0;try{for(var a,u=t[Symbol.iterator]();!(n=(a=u.next()).done);n=!0){var l=a.value;e.push(o.a.createElement(ce,{key:l.getGraphElementID(),center:l,radius:l.getNodeSize()+4}))}}catch(e){r=!0,i=e}finally{try{n||null==u.return||u.return()}finally{if(r)throw i}}}var s=this.props.edges;if(s){var c=!0,f=!1,p=void 0;try{for(var h,y=s[Symbol.iterator]();!(c=(h=y.next()).done);c=!0){var v=h.value;e.push(o.a.createElement(ce,{key:v.getGraphElementID(),center:v.getCenterPoint()}))}}catch(e){f=!0,p=e}finally{try{c||null==y.return||y.return()}finally{if(f)throw p}}}return o.a.createElement("g",null,e)}}])&&pe(n.prototype,r),i&&pe(n,i),t}(),ge=n(193),be=n(186);function me(e){return(me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function we(e,t){return!t||"object"!==me(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ee(e){return(Ee=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Oe(e,t){return(Oe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Se=function(e){function t(e,n,r){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=we(this,Ee(t).call(this)))._inputController=e,o._graphController=n,o._selectionBox=r,o}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Oe(e,t)}(t,be["a"]),n=t,(r=[{key:"onPreInputEvent",value:function(e){var t=this._inputController,n=this._selectionBox;return n.hasSelection()&&(t.isMoveMode()&&n.isTargetInSelection(t.getImmediateTargetSource())||n.clearSelection()),!1}},{key:"onDragStart",value:function(e){var t=this._inputController;if(t.hasActiveTarget())return!1;if(t.isMoveMode())return!1;if(t.hasCurrentTarget())return!1;var n=e.getInputEventPosition();return this._selectionBox.beginSelection(this._graphController.getGraph(),n.x,n.y),!0}},{key:"onDragMove",value:function(e){this._selectionBox.isVisible()&&this._selectionBox.updateSelection(this._graphController.getGraph(),e.x,e.y)}},{key:"onDragStop",value:function(e){this._selectionBox.isVisible()&&this._selectionBox.endSelection(this._graphController.getGraph(),e.x,e.y)}}])&&_e(n.prototype,r),o&&_e(n,o),t}();function ke(e){return(ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ce(e,t){return!t||"object"!==ke(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Me(e){return(Me=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Pe(e,t){return(Pe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Te=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Ce(this,Me(t).call(this)))._inputController=e,n._cachedPosition={x:0,y:0},n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Pe(e,t)}(t,be["a"]),n=t,(r=[{key:"onDragStart",value:function(e){var t=this._inputController;if(t.hasActiveTarget())return!1;if(t.hasCurrentTarget())return!1;if(!t.isMoveMode())return!1;var n=e.getInputEventPosition();return this._cachedPosition.x=n.x,this._cachedPosition.y=n.y,!0}},{key:"onDragMove",value:function(e){var t=e.x-this._cachedPosition.x,n=e.y-this._cachedPosition.y;e.getInputAdapter().getViewportAdapter().addOffset(t,n,!0)}},{key:"onDragStop",value:function(e){}}])&&xe(n.prototype,r),o&&xe(n,o),t}();function je(e){return(je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ie(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Le(e,t){return!t||"object"!==je(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function De(e){return(De=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ae(e,t){return(Ae=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ne=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Le(this,De(t).call(this,e)))._inputContext=new ge.a,n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ae(e,t)}(t,o.a.Component),n=t,(r=[{key:"componentDidMount",value:function(){var e=this.props.viewport,t=this.props.inputController,n=this.props.graphController,r=this.props.selectionBox,o=e.getInputAdapter(),i=this._inputContext;r&&i.addInputHandler(new Se(t,n,r)),t&&i.addInputHandler(new Te(t)),o.bindContextAsLast(i)}},{key:"componentWillUnmount",value:function(){var e=this.props.viewport.getInputAdapter(),t=this._inputContext;t.clearInputHandlers(),e.unbindContext(t)}},{key:"getInputContext",value:function(){return this._inputContext}},{key:"render",value:function(){var e=this.props.inputController,t=this.props.graphController,n=this.props.selectionBox,r=this.props.onMouseOver,i=this.props.onMouseOut,a=t.getGraph(),u=n?n.getBoundingBox():null;return o.a.createElement(o.a.Fragment,null,o.a.createElement(N,{nodes:a.getNodes(),inputController:e,onMouseOver:r,onMouseOut:i}),o.a.createElement(re,{edges:a.getEdges(),inputController:e,onMouseOver:r,onMouseOut:i}),n&&o.a.createElement(o.a.Fragment,null,o.a.createElement(de,{nodes:n.getSelection()}),o.a.createElement(d,{visible:n.isVisible(),fromX:u.fromX,fromY:u.fromY,toX:u.toX,toY:u.toY})))}}])&&Ie(n.prototype,r),i&&Ie(n,i),t}(),Re=n(176),Be=n.n(Re);function Ge(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var He=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._id=t}var t,n,r;return t=e,(n=[{key:"setGraphElementID",value:function(e){return this._id=e,this}},{key:"getCenterPoint",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{x:0,y:0};return e.x=e.y=0,e}},{key:"getGraphElementID",value:function(){return this._id}},{key:"getHashString",value:function(){!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._id}}])&&Ge(t.prototype,n),r&&Ge(t,r),e}();function Fe(e){return(Fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ve(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Xe(e,t){return!t||"object"!==Fe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ye(e,t,n){return(Ye="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ze(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function ze(e){return(ze=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Qe(e,t){return(Qe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ue=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Xe(this,ze(t).call(this,e))).x=r,n.y=o,n._label="",n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Qe(e,t)}(t,He),n=t,(r=[{key:"getCenterPoint",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{x:0,y:0};return e.x=this.x,e.y=this.y,e}},{key:"setNodeLabel",value:function(e){return this._label=e,this}},{key:"getNodeLabel",value:function(){return this._label}},{key:"getNodeSize",value:function(){return 16}},{key:"getHashString",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return e?Ye(ze(t.prototype),"getHashString",this).call(this,e)+":"+Math.floor(this.x)+","+Math.floor(this.y)+"."+this._label:Ye(ze(t.prototype),"getHashString",this).call(this,e)+":"+this._label}}])&&Ve(n.prototype,r),o&&Ve(n,o),t}();function qe(e){return(qe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ze(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function We(e,t){return!t||"object"!==qe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ke(e,t,n){return(Ke="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Je(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Je(e){return(Je=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $e(e,t){return($e=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var et=function(e){function t(e,n){var r,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=We(this,Je(t).call(this,e)))._from=n,r._to=o,r._label="",r}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$e(e,t)}(t,He),n=t,(r=[{key:"setEdgeFrom",value:function(e){if(!e)throw new Error("Source of edge cannot be null");return this._from=e,this}},{key:"setEdgeTo",value:function(e){return this._to=e,this}},{key:"setEdgeLabel",value:function(e){return this._label=e,this}},{key:"getEdgeDirection",value:function(){var e=this._from,t=this._to,n=Math.PI/2,r=0;if(this.isPlaceholder())r=Math.PI/4;else{var o=t.y-e.y,i=t.x-e.x;r=Math.atan2(o,i)}return(r>n||r<-n)&&(r+=Math.PI),r}},{key:"getStartPoint",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{x:0,y:0},t=this._from;return e.x=t.x,e.y=t.y,e}},{key:"getCenterPoint",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{x:0,y:0},t=this._from,n=this._to;if(this.isPlaceholder()){var r=this.getPlaceholderLength()/2;e.x=t.x+r,e.y=t.y+r}else e.x=t.x+(n.x-t.x)/2,e.y=t.y+(n.y-t.y)/2;return e}},{key:"getEndPoint",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{x:0,y:0};if(this.isPlaceholder()){var t=this._from,n=this.getPlaceholderLength();e.x=t.x+n,e.y=t.y+n}else{var r=this._to;e.x=r.x,e.y=r.y}return e}},{key:"getPlaceholderLength",value:function(){return this._from.getNodeSize()}},{key:"isPlaceholder",value:function(){return null===this._to}},{key:"isSelfLoop",value:function(){return this._from===this._to}},{key:"getEdgeLabel",value:function(){return this._label}},{key:"getEdgeFrom",value:function(){return this._from}},{key:"getEdgeTo",value:function(){return this._to}},{key:"getHashString",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=this._from?this._from.getHashString(e):"",r=this._to?this._to.getHashString?this._to.getHashString(e):"0":"";return Ke(Je(t.prototype),"getHashString",this).call(this,e)+":"+n+","+r+"."+this._label}}])&&Ze(n.prototype,r),o&&Ze(n,o),t}();function tt(e){return(tt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function nt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function rt(e){return(rt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ot(e,t){return(ot=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function it(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var at=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=rt(t).call(this,e))||"object"!==tt(o)&&"function"!=typeof o?it(r):o).inputElement=null,n.placeholder="",n.maxLength=524288,n.multiLine=!0,n.formatter=null,n._submitTimeout=null,n._submit=e.submitOnBlur,n._skipBlur=!1,n._skipSelect=!1,n.state={prevValue:"",value:""},n.onChange=n.onChange.bind(it(it(n))),n.onFocus=n.onFocus.bind(it(it(n))),n.onBlur=n.onBlur.bind(it(it(n))),n.onKeyDown=n.onKeyDown.bind(it(it(n))),n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ot(e,t)}(t,o.a.Component),n=t,(r=[{key:"setFormatter",value:function(e){return this.formatter=e,this}},{key:"setPlaceholder",value:function(e){return this.placeholder=e,this}},{key:"onFocus",value:function(e){this._skipSelect&&(this.inputElement.select(),this._skipSelect=!1)}},{key:"onBlur",value:function(e){var t=this;this._submitTimeout||(this._submitTimeout=setTimeout(function(){if(t._submitTimeout=null,!t._skipBlur){var n=t._submit;if(t._submit=t.props.submitOnBlur,document.activeElement!==t.inputElement&&n){var r=t.state.value;t.props.onSubmit&&t.props.onSubmit(r),t.setState({prevValue:r})}else t.setState(function(e,t){return{value:e.prevValue}});t.props.onBlur&&t.props.onBlur(e)}},30))}},{key:"onKeyDown",value:function(e){var t=this;if("Enter"===e.key){if(e.shiftKey&&this.multiLine)return;this._submit=!0,this.inputElement.blur(),e.preventDefault(),e.stopPropagation()}else"Escape"===e.key&&(this.setState(function(e,t){return{value:e.prevValue}},function(){t._submit=!1,t.inputElement.blur()}),e.preventDefault(),e.stopPropagation())}},{key:"onChange",value:function(e){var t=e.target,n=t.selectionStart,r=t.value;this.formatter&&(r=this.formatter(r,this.state.value)),this.setState({value:r},function(){t.selectionEnd=n})}},{key:"focus",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._skipSelect=e,this.inputElement.focus()}},{key:"ignoreBlur",value:function(e){var t=this._skipBlur;return this._skipBlur=e,t!==e}},{key:"appendValue",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=this.state.value;o&&o.length+e.length>this.maxLength||(t=o&&o.length>0?o+n+e:e,r&&this.formatter&&(t=this.formatter(t,this.state.value)),this.setState(function(e,n){return{value:t}}))}},{key:"resetValue",value:function(e){this.setState({prevValue:e,value:e})}},{key:"setValue",value:function(e){var t=e;(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.formatter&&(t=this.formatter(t,this.state.value)),this.setState({value:t})}},{key:"getValue",value:function(){return this.state.value}},{key:"render",value:function(){var e=this,t=this.placeholder,n=this.maxLength,r=this.multiLine,i=this.props.disabled,a=this.state.value;return o.a.createElement("div",{id:this.props.id,className:this.props.className,style:this.props.style},r?o.a.createElement("textarea",{ref:function(t){return e.inputElement=t},type:"text",rows:"1",spellCheck:"false",disabled:i,placeholder:t,maxLength:n,value:a,onChange:this.onChange,onFocus:this.onFocus,onBlur:this.onBlur,onKeyDown:this.onKeyDown}):o.a.createElement("input",{ref:function(t){return e.inputElement=t},type:"text",spellCheck:"false",disabled:i,placeholder:t,maxLength:n,value:a,onChange:this.onChange,onFocus:this.onFocus,onBlur:this.onBlur,onKeyDown:this.onKeyDown}))}}])&&nt(n.prototype,r),i&&nt(n,i),t}();function ut(e){return(ut="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function st(e){return(st=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ct(e,t){return(ct=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ft(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var pt=function(e){function t(e){var n,r,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(i=st(t).call(this,e))||"object"!==ut(i)&&"function"!=typeof i?ft(r):i)._ref=o.a.createRef(),n.inputComponent=null,n.state={open:!1},n._target=null,n._targetCallback=null,n.onInputSubmit=n.onInputSubmit.bind(ft(ft(n))),n.onInputBlur=n.onInputBlur.bind(ft(ft(n))),n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ct(e,t)}(t,o.a.Component),n=t,(r=[{key:"openEditor",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(!(e instanceof He))throw new Error("Can only open editor for GraphElements");if(this._target=e,this._targetOnSubmit=r,this._targetOnCancel=o,e instanceof Ue){var i=this.props.labelFormatter.formatNodeLabel;this.inputComponent.setFormatter(i)}else if(e instanceof et){var a=this.props.labelFormatter.formatEdgeLabel;this.inputComponent.setFormatter(a)}this.setState({open:!0},function(){null!==n&&t.inputComponent.resetValue(n),t.inputComponent.focus()})}},{key:"closeEditor",value:function(){this._target=null,this._targetOnSubmit=null,this._targetOnCancel=null,this.inputComponent.setFormatter(null),this.setState({open:!1})}},{key:"isEditorOpen",value:function(){return this.state.open}},{key:"getTarget",value:function(){return this._target}},{key:"onInputSubmit",value:function(e){this._targetOnSubmit&&(this._targetOnSubmit(this._target,e),this._targetOnCancel=null)}},{key:"onInputBlur",value:function(e){this._targetOnCancel&&(this._targetOnCancel(this._target),this._targetOnSubmit=null),this.closeEditor()}},{key:"render",value:function(){var e=this,t=this.state.open,n=this._target,r=this.props.style||{};if(this.props.viewport){var i=this.props.viewport.getInputAdapter().getViewportAdapter();if(n){var a=n.getCenterPoint(),u=i.getElement(),l=u.getBoundingClientRect(),s=function(e,t,n){var r=e.getScreenCTM();return{x:t*r.a+r.e,y:n*r.d+r.f}}(u,a.x+i.getOffsetX(),a.y+i.getOffsetY()),c=s.x,f=s.y,p=-this._ref.current.offsetWidth/2-l.left,h=-this._ref.current.offsetHeight/2-l.top;r.top=f+h+"px",r.left=c+p+"px"}}return o.a.createElement("div",{ref:this._ref,id:this.props.id,className:Be.a.editor_container+(t?" open ":"")+" "+this.props.className,style:r},o.a.createElement(at,{ref:function(t){return e.inputComponent=t},submitOnBlur:this.props.saveOnExit,onSubmit:this.onInputSubmit,onBlur:this.onInputBlur}),o.a.createElement("div",{className:Be.a.tray_container},this.props.children))}}])&&lt(n.prototype,r),i&&lt(n,i),t}(),ht=n(177),yt=n.n(ht),vt=n(178),dt=n.n(vt),gt=n(213);function bt(e){return(bt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function mt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _t(e){return(_t=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function wt(e,t){return(wt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Et(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var Ot=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=_t(t).call(this,e))||"object"!==bt(o)&&"function"!=typeof o?Et(r):o).ref=null,n.state={active:!1,forceActive:!1},n._doubleTapTimeout=null,n.onMouseEnter=n.onMouseEnter.bind(Et(Et(n))),n.onMouseLeave=n.onMouseLeave.bind(Et(Et(n))),n.onClick=n.onClick.bind(Et(Et(n))),n.onAnyMouseDownNotConsumed=n.onAnyMouseDownNotConsumed.bind(Et(Et(n))),n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&wt(e,t)}(t,o.a.Component),n=t,(r=[{key:"onMouseEnter",value:function(e){var t=this;this.state.forceActive||this.setState({active:!0},function(){var e=t.props.onChange;e&&e(!0)})}},{key:"onMouseLeave",value:function(e){var t=this;this.state.forceActive||this.setState({active:!1},function(){var e=t.props.onChange;e&&e(!1)})}},{key:"onClick",value:function(e){var t=this;e.stopPropagation(),e.preventDefault(),this._doubleTapTimeout?(clearTimeout(this._doubleTapTimeout),this._doubleTapTimeout=null,this.setState({active:!1,forceActive:!1},function(){var e=t.props.onClear;e&&e();var n=t.props.onChange;n&&n(!1)})):this.setState(function(e,n){var r=!e.forceActive;return t._doubleTapTimeout=setTimeout(function(){t._doubleTapTimeout=null},250),r&&document.documentElement.addEventListener("mousedown",t.onAnyMouseDownNotConsumed),{active:r,forceActive:r}},function(){var e=t.props.onChange;e&&e(t.state.active)})}},{key:"onAnyMouseDownNotConsumed",value:function(e){var t=this;this.state.forceActive&&this.ref!==e.target&&(e.stopPropagation(),e.preventDefault(),document.documentElement.removeEventListener("mousedown",this.onAnyMouseDownNotConsumed),this.setState({active:!1,forceActive:!1},function(){var e=t.props.onChange;e&&e(!1)}))}},{key:"render",value:function(){var e=this,t=this.props.visible,n=this.state.active,r=!n&&!t;return o.a.createElement("div",{ref:function(t){return e.ref=t},id:this.props.id,className:dt.a.trash_container+(n?" active ":"")+(r?" hide ":"")+" "+this.props.className,style:this.props.style,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,onClick:this.onClick},o.a.createElement(gt.a,null))}}])&&mt(n.prototype,r),i&&mt(n,i),t}(),St=n(179),kt=n.n(St),xt=n(3),Ct=n(31),Mt=n(212);function Pt(e){return(Pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Tt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function jt(e,t){return!t||"object"!==Pt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function It(e){return(It=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Lt(e,t){return(Lt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Dt=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),jt(this,It(t).call(this,e))}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Lt(e,t)}(t,o.a.Component),n=t,(r=[{key:"render",value:function(){var e=this.props.visible,t=this.props.mode,n=this.props.onChange,r=!e;return o.a.createElement("div",{id:this.props.id,className:kt.a.tray_container+(r?" hide ":"")+" "+this.props.className,style:this.props.style},o.a.createElement(xt.a,{className:kt.a.tray_button+(0===t?" active ":""),onClick:function(){n&&n(0)},title:I18N.toString("cursor.actionmode")},o.a.createElement(Ct.a,null)),o.a.createElement(xt.a,{className:kt.a.tray_button+(1===t?" active ":""),onClick:function(){n&&n(1)},title:I18N.toString("cursor.movemode")},o.a.createElement(Mt.a,null)))}}])&&Tt(n.prototype,r),i&&Tt(n,i),t}();function At(e){return(At="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Nt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Rt(e){return(Rt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Bt(e,t){return(Bt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Gt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var Ht=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=Rt(t).call(this,e))||"object"!==At(o)&&"function"!=typeof o?Gt(r):o).onTrashChange=n.onTrashChange.bind(Gt(Gt(n))),n.onTrashClear=n.onTrashClear.bind(Gt(Gt(n))),n.onModeChange=n.onModeChange.bind(Gt(Gt(n))),n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Bt(e,t)}(t,o.a.Component),n=t,(r=[{key:"onTrashChange",value:function(e){this.props.inputController.setTrashMode(e)}},{key:"onTrashClear",value:function(){this.props.graphController.clearGraph()}},{key:"onModeChange",value:function(e){this.props.inputController.setMoveModeFirst(1===e)}},{key:"render",value:function(){var e=this.props.inputController,t=this.props.graphController,n=this.props.viewport,r=t.getGraph(),i=null;return e&&(i=e.isHandlingInput()?e.isMoveMode()?1:0:e.isMoveModeFirst()?1:0),o.a.createElement("div",{id:this.props.id,className:yt.a.view_container+" "+this.props.className,style:this.props.style},o.a.createElement(Ot,{className:yt.a.view_widget,style:{bottom:0,right:0},visible:!r.isEmpty()&&n&&(!n.getInputAdapter().isUsingTouch()||!n.getInputAdapter().isDragging()),onChange:this.onTrashChange,onClear:this.onTrashClear}),o.a.createElement(Dt,{className:yt.a.view_widget,style:{bottom:0,left:0},visible:e,mode:i,onChange:this.onModeChange}),this.props.children)}}])&&Nt(n.prototype,r),i&&Nt(n,i),t}(),Ft=n(180),Vt=n.n(Ft),Xt=n(181),Yt=n.n(Xt),zt=n(214),Qt=n(215);function Ut(e){return(Ut="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Zt(e){return(Zt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Wt(e,t){return(Wt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Kt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var Jt=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=Zt(t).call(this,e))||"object"!==Ut(o)&&"function"!=typeof o?Kt(r):o).onZoomIn=n.onZoomIn.bind(Kt(Kt(n))),n.onZoomOut=n.onZoomOut.bind(Kt(Kt(n))),n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Wt(e,t)}(t,o.a.Component),n=t,(r=[{key:"onZoomIn",value:function(e){var t=this.props.viewportAdapter,n=.4*-t.getScale();t.addScale(n)}},{key:"onZoomOut",value:function(e){var t=this.props.viewportAdapter,n=.75*t.getScale();t.addScale(n)}},{key:"render",value:function(){var e="x"+(1/(this.props.viewportAdapter.getScale()||1)).toFixed(2);return o.a.createElement("div",{id:this.props.id,className:Yt.a.zoom_container+" "+this.props.className,style:this.props.style},o.a.createElement(xt.a,{className:Yt.a.zoom_button,title:"Zoom In",onClick:this.onZoomIn},o.a.createElement(zt.a,null)),o.a.createElement(xt.a,{className:Yt.a.zoom_button,title:"Zoom Out",onClick:this.onZoomOut},o.a.createElement(Qt.a,null)),o.a.createElement("label",{className:Yt.a.zoom_label},e))}}])&&qt(n.prototype,r),i&&qt(n,i),t}(),$t=n(182),en=n.n($t),tn=n(216);function nn(e){return(nn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function rn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function on(e){return(on=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function an(e,t){return(an=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function un(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var ln=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=on(t).call(this,e))||"object"!==nn(o)&&"function"!=typeof o?un(r):o).onClick=n.onClick.bind(un(un(n))),n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&an(e,t)}(t,o.a.Component),n=t,(r=[{key:"onClick",value:function(e){this.props.viewportAdapter.setOffset(0,0)}},{key:"render",value:function(){var e=this.props.viewportAdapter;return o.a.createElement(xt.a,{id:this.props.id,className:en.a.center_focus_button+" "+this.props.className,style:this.props.style,title:"Center Workspace",disabled:Math.abs(e.getOffsetX())<.1&&Math.abs(e.getOffsetY())<.1,onClick:this.onClick},o.a.createElement(tn.a,null))}}])&&rn(n.prototype,r),i&&rn(n,i),t}();function sn(e){return(sn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function cn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function fn(e,t){return!t||"object"!==sn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function pn(e){return(pn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function hn(e,t){return(hn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var yn=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),fn(this,pn(t).call(this,e))}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&hn(e,t)}(t,o.a.Component),n=t,(r=[{key:"render",value:function(){var e=this.props.viewportAdapter;return o.a.createElement("div",{id:this.props.id,className:Vt.a.navbar_container+" "+this.props.className,style:this.props.style},o.a.createElement(Jt,{className:Vt.a.navbar_widget_container,viewportAdapter:e}),o.a.createElement(ln,{className:Vt.a.navbar_widget,viewportAdapter:e}),this.props.children)}}])&&cn(n.prototype,r),i&&cn(n,i),t}(),vn=n(8);function dn(e){return(dn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function bn(e,t){return!t||"object"!==dn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function mn(e){return(mn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _n(e,t){return(_n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var wn=function(e){function t(e,n,r,o){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(i=bn(this,mn(t).call(this)))._inputController=e,i._graphController=n,i._selectionBox=r,i._labelFormatter=o,i._cachedPosition={x:0,y:0},i}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_n(e,t)}(t,be["a"]),n=t,(r=[{key:"onInputEvent",value:function(e){var t=this._inputController,n=t.getCurrentTargetType();if(t.isTrashMode()){if(t.isMoveMode())return this._graphController.emitGraphEvent("error-node-edit-while-delete"),!1;if("node"===n){var r=t.getCurrentTargetSource(),o=this._graphController;return o.getGraph().deleteNode(r),o.emitGraphEvent("node-delete",{target:r}),!0}}if(!t.isMoveMode()&&"node"===n){var i=t.getCurrentTargetSource(),a=this._graphController;return a.openLabelEditor(i,i.getNodeLabel(),function(e,t,n){n&&a.emitGraphEvent("edge-label-change",{target:i})}),!0}return!1}},{key:"onAltInputEvent",value:function(e){return this.onInputEvent(e)}},{key:"onDblInputEvent",value:function(e){var t=this._inputController;if(t.hasActiveTarget())return!1;if(t.isTrashMode())return!1;if(!t.getCurrentTargetType()){var n=this._graphController,r=n.getGraph().createNode(e.x,e.y);r.setNodeLabel(this._labelFormatter.getDefaultNodeLabel()),n.emitGraphEvent("node-create",{target:r})}}},{key:"onDragStart",value:function(e){var t=this._inputController;if(t.hasActiveTarget())return!1;if(t.isTrashMode())return this._graphController.emitGraphEvent("error-node-edit-while-delete"),!1;var n=t.getCurrentTargetType();if("node"===n){var r=t.getCurrentTargetSource();return this._selectionBox.hasSelection()&&(this._selectionBox.isTargetInSelection(r)?(this._cachedPosition.x=e.x,this._cachedPosition.y=e.y):this._selectionBox.clearSelection()),t.bindActiveTarget(r,n,!1),!0}return!1}},{key:"onDragMove",value:function(e){var t=this._inputController.getActiveTargetSource();if(this._selectionBox.hasSelection()){var n=e.x-this._cachedPosition.x,r=e.y-this._cachedPosition.y,o=!0,i=!1,a=void 0;try{for(var u,l=this._selectionBox.getSelection()[Symbol.iterator]();!(o=(u=l.next()).done);o=!0){var s=u.value;s.x+=n,s.y+=r}}catch(e){i=!0,a=e}finally{try{o||null==l.return||l.return()}finally{if(i)throw a}}this._cachedPosition.x=e.x,this._cachedPosition.y=e.y}else this.moveNodeTo(this._graphController.getGraph(),t,e.x,e.y)}},{key:"onDragStop",value:function(e){var t=this._inputController,n=this._graphController,r=this._selectionBox,o=t.getActiveTargetSource();if(t.unbindActiveTarget(),t.isTrashMode())if(r.hasSelection()){var i=n.getGraph(),a=[],u=!0,l=!1,s=void 0;try{for(var c,f=r.getSelection()[Symbol.iterator]();!(u=(c=f.next()).done);u=!0){var p=c.value;i.deleteNode(p),a.push(p)}}catch(e){l=!0,s=e}finally{try{u||null==f.return||f.return()}finally{if(l)throw s}}n.emitGraphEvent("node-delete-all",{target:a})}else n.getGraph().deleteNode(o),n.emitGraphEvent("node-delete",{target:o});else r.hasSelection()?n.emitGraphEvent("node-move-all",{target:r.getSelection()}):n.emitGraphEvent("node-move",{target:o})}},{key:"moveNodeTo",value:function(e,t,n,r){n=Object(vn.d)(t.x,n,.6),r=Object(vn.d)(t.y,r,.6);var o=t.getNodeSize(),i=!0,a=!1,u=void 0;try{for(var l,s=e.getNodes()[Symbol.iterator]();!(i=(l=s.next()).done);i=!0){var c=l.value;if(t!==c){var f=n-c.x,p=r-c.y,h=Math.atan2(p,f),y=2*o,v=c.x+Math.cos(h)*y-n,d=c.y+Math.sin(h)*y-r;f*f+p*p<o*o*4&&(n+=v,r+=d)}}}catch(e){a=!0,u=e}finally{try{i||null==s.return||s.return()}finally{if(a)throw u}}t.x=n,t.y=r}}])&&gn(n.prototype,r),o&&gn(n,o),t}();function En(e){return(En="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function On(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Sn(e,t){return!t||"object"!==En(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function kn(e){return(kn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function xn(e,t){return(xn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Cn=function(e){function t(e,n,r){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=Sn(this,kn(t).call(this)))._inputController=e,o._graphController=n,o._labelFormatter=r,o._cachedEdgeQuads={radians:0,length:0},o._cachedEdgeTo=null,o._cachedPointer={x:0,y:0},o._newEdge=!1,o}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xn(e,t)}(t,be["a"]),n=t,(r=[{key:"onInputEvent",value:function(e){var t=this._inputController,n=t.getCurrentTargetType();if(t.isTrashMode()){if(t.isMoveMode())return this._graphController.emitGraphEvent("error-edge-edit-while-delete"),!1;if("edge"===n||"forward-endpoint"===n||"label"===n){var r=t.getCurrentTargetSource(),o=this._graphController;return o.getGraph().deleteEdge(r),o.emitGraphEvent("edge-delete",{target:r}),!0}}if(!t.isMoveMode()&&"edge"===n){var i=t.getCurrentTargetSource(),a=this._graphController;return a.openLabelEditor(i,i.getEdgeLabel(),function(e,t,n){n&&a.emitGraphEvent("edge-label-change",{target:i})}),!0}return!1}},{key:"onAltInputEvent",value:function(e){return this.onInputEvent(e)}},{key:"onDragStart",value:function(e){var t=this._inputController;if(t.hasActiveTarget())return!1;if(t.isTrashMode())return this._graphController.emitGraphEvent("error-edge-edit-while-delete"),!1;var n=t.getCurrentTargetType();if(!t.isMoveMode()&&"node"===n){var r=this._graphController.getGraph(),o=t.getCurrentTargetSource();this._cachedEdgeQuads.radians=0,this._cachedEdgeQuads.length=0,this._cachedEdgeTo=null,this._newEdge=!0,this._cachedPointer.x=e.x,this._cachedPointer.y=e.y;var i=r.createEdge(o,this._cachedPointer);return t.bindActiveTarget(i,"forward-endpoint",!1),t.setNodeEventsOnly(!0),!0}if("forward-endpoint"===n){var a=t.getCurrentTargetSource();return this._cachedEdgeQuads.radians=a.getQuadraticRadians(),this._cachedEdgeQuads.length=a.getQuadraticLength(),this._cachedEdgeTo=a.getEdgeTo(),this._newEdge=!1,this._cachedPointer.x=e.x,this._cachedPointer.y=e.y,a.setQuadraticRadians(0),a.setQuadraticLength(0),a.setEdgeTo(this._cachedPointer),t.bindActiveTarget(a,n,!1),t.setNodeEventsOnly(!0),!0}if("edge"===n){var u=t.getCurrentTargetSource();return this._cachedEdgeQuads.radians=u.getQuadraticRadians(),this._cachedEdgeQuads.length=u.getQuadraticLength(),this._cachedEdgeTo=u.getEdgeTo(),this._newEdge=!1,this._cachedPointer.x=e.x,this._cachedPointer.y=e.y,t.bindActiveTarget(u,n,!1),!0}return!1}},{key:"onDragMove",value:function(e){var t=this._inputController,n=t.getActiveTargetSource(),r=t.getActiveTargetType();if("edge"===r)n.setQuadraticByCoords(e.x,e.y);else if("forward-endpoint"===r){if("node"===t.getImmediateTargetType()){var o=t.getImmediateTargetSource();if(n.getEdgeTo()===this._cachedEdgeTo)n.setQuadraticRadians(this._cachedEdgeQuads.radians),n.setQuadraticLength(this._cachedEdgeQuads.length);else if(n.getEdgeFrom()===o){var i=n.getEdgeFrom(),a=i.x-e.x,u=i.y-e.y,l=Math.PI+Math.atan2(u,a);n.setQuadraticRadians(l),n.setEdgeTo(o)}else n.setQuadraticRadians(0),n.setQuadraticLength(0),n.setEdgeTo(o)}else this._cachedPointer.x=Object(vn.d)(this._cachedPointer.x,e.x,.6),this._cachedPointer.y=Object(vn.d)(this._cachedPointer.y,e.y,.6),n.getEdgeTo()!==this._cachedPointer&&(n.setQuadraticRadians(0),n.setQuadraticLength(0),n.setEdgeTo(this._cachedPointer))}}},{key:"onDragStop",value:function(e){var t=this._inputController,n=t.getActiveTargetSource(),r=t.getActiveTargetType(),o=this._newEdge;t.unbindActiveTarget(),"forward-endpoint"===r&&t.setNodeEventsOnly(!1);var i=this._graphController;if(t.isTrashMode())return i.getGraph().deleteEdge(n),void i.emitGraphEvent("edge-delete",{target:n});if("edge"===r)i.emitGraphEvent("edge-quad-change",{target:n});else{var a=n.getEdgeTo();a&&a!==this._cachedPointer?a!==this._cachedEdgeTo&&(n.setEdgeLabel(this._labelFormatter.getDefaultEdgeLabel()),i.openLabelEditor(n,o?null:n.getEdgeLabel(),function(e,t,r){o?i.emitGraphEvent("edge-create",{target:n}):r&&i.emitGraphEvent("edge-to-change",{target:n})})):(n.setEdgeTo(null),o?(n.setEdgeLabel(this._labelFormatter.getDefaultEdgeLabel()),i.emitGraphEvent("edge-create",{target:n})):i.emitGraphEvent("edge-to-change",{target:n}))}}}])&&On(n.prototype,r),o&&On(n,o),t}();function Mn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Pn=!0,Tn=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._trashMode=!1,this._moveMode=Pn,this._nodeOnly=!1,this._moveModeFirst=Pn,this._handlingInput=!1,this._target={source:null,type:null},this._activeTarget={source:null,type:null,input:!0},this._immediateTarget={source:null,type:null},this._inputContext=new ge.a,this._graphController=null,this._selectionBox=null,this._labelFormatter=null,this.onMouseOver=this.onMouseOver.bind(this),this.onMouseOut=this.onMouseOut.bind(this)}var t,n,r;return t=e,(n=[{key:"setGraphController",value:function(e){return this._graphController=e,this}},{key:"setSelectionBox",value:function(e){return this._selectionBox=e,this}},{key:"setLabelFormatter",value:function(e){return this._labelFormatter=e,this}},{key:"setMoveMode",value:function(e){return this._moveMode=e,this}},{key:"setTrashMode",value:function(e){return this._trashMode=e,this}},{key:"setNodeEventsOnly",value:function(e){return this._nodeOnly=e,this}},{key:"setMoveModeFirst",value:function(e){return this._moveModeFirst=e,this}},{key:"initialize",value:function(){var e=this._graphController;if(!e)throw new Error("Must set graph controller before init");var t=this._selectionBox;if(!t)throw new Error("Must set selection box before init");var n=this._labelFormatter;if(!n)throw new Error("Must set label formatter before init");this._inputContext.addInputHandler(this).addInputHandler(new Cn(this,e,n)).addInputHandler(new wn(this,e,t,n))}},{key:"update",value:function(){}},{key:"destroy",value:function(){this._inputContext.clearInputHandlers()}},{key:"onPreInputEvent",value:function(e){return this._handlingInput=!0,this._moveMode=!e.getInputAdapter().isAltInput(),this.updateCurrentTarget(this._immediateTarget.source,this._immediateTarget.type),!1}},{key:"onPostInputEvent",value:function(e){this.updateCurrentTarget(null,null),this._handlingInput=!1}},{key:"onMouseOver",value:function(e){var t=e.target.value;this._immediateTarget.source=t.source,this._immediateTarget.type=t.type,this._immediateTarget.data=t}},{key:"onMouseOut",value:function(e){this._immediateTarget.source=null,this._immediateTarget.type=null,this._immediateTarget.data=null}},{key:"bindActiveTarget",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this._activeTarget.source=e,this._activeTarget.type=t,this._activeTarget.input=n}},{key:"unbindActiveTarget",value:function(){this._activeTarget.source=null,this._activeTarget.type=null,this._activeTarget.input=!1}},{key:"updateCurrentTarget",value:function(e,t){this._target.source=e,this._target.type=t}},{key:"getActiveTargetSource",value:function(){return this._activeTarget.source}},{key:"getActiveTargetType",value:function(){return this._activeTarget.type}},{key:"hasActiveTarget",value:function(){return null!==this._activeTarget.type}},{key:"hasPointerEvents",value:function(e){return this._activeTarget.source===e?this._activeTarget.input:!this._nodeOnly||e instanceof Ue}},{key:"getCurrentTargetSource",value:function(){return this._target.source}},{key:"getCurrentTargetType",value:function(){return this._target.type}},{key:"hasCurrentTarget",value:function(){return null!==this._target.type}},{key:"getImmediateTargetSource",value:function(){return this._immediateTarget.source}},{key:"getImmediateTargetType",value:function(){return this._immediateTarget.type}},{key:"hasImmediateTarget",value:function(){return null!==this._immediateTarget.type}},{key:"isTrashMode",value:function(){return this._trashMode}},{key:"isMoveMode",value:function(){return this._moveModeFirst?this._moveMode:!this._moveMode}},{key:"isNodeEventsOnly",value:function(){return this._nodeOnly}},{key:"isMoveModeFirst",value:function(){return this._moveModeFirst}},{key:"isHandlingInput",value:function(){return this._handlingInput}},{key:"getInputContext",value:function(){return this._inputContext}}])&&Mn(t.prototype,n),r&&Mn(t,r),e}();function jn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var In=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._boundingBox={fromX:0,fromY:0,toX:0,toY:0,visible:!1},this.targets=[]}var t,n,r;return t=e,(n=[{key:"getBoundingBox",value:function(){return this._boundingBox}},{key:"getSelection",value:function(e){if(arguments.length>1&&void 0!==arguments[1]&&arguments[1]){var t=this._boundingBox,n=Math.max(t.toX,t.fromX),r=Math.max(t.toY,t.fromY),o=Math.min(t.toX,t.fromX),i=Math.min(t.toY,t.fromY);this.clearSelection(),function(e,t,n,r,o,i){var a=Math.min(t,r),u=Math.min(n,o),l=Math.max(t,r),s=Math.max(n,o),c=!0,f=!1,p=void 0;try{for(var h,y=e.getNodes()[Symbol.iterator]();!(c=(h=y.next()).done);c=!0){var v=h.value;v.x>=a&&v.x<l&&v.y>=u&&v.y<s&&i.push(v)}}catch(e){f=!0,p=e}finally{try{c||null==y.return||y.return()}finally{if(f)throw p}}}(e,o,i,n,r,this.targets)}return this.targets}},{key:"beginSelection",value:function(e,t,n){var r=this._boundingBox;r.fromX=r.toX=t,r.fromY=r.toY=n,this.clearSelection(),r.visible=!0}},{key:"updateSelection",value:function(e,t,n){var r=this._boundingBox;r.toX=t,r.toY=n,this.getSelection(e,!0)}},{key:"endSelection",value:function(e,t,n){var r=this._boundingBox;r.toX=t,r.toY=n,this.getSelection(e,!0),r.visible=!1}},{key:"isTargetInSelection",value:function(e){return this.targets.includes(e)}},{key:"hasSelection",value:function(){return this.targets.length>0}},{key:"clearSelection",value:function(){this.targets.length=0}},{key:"isVisible",value:function(){return this._boundingBox.visible}}])&&jn(t.prototype,n),r&&jn(t,r),e}();function Ln(e){return(Ln="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Dn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function An(e){return(An=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Nn(e,t){return(Nn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Rn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var Bn=function(e){function t(e){var n,r,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(i=An(t).call(this,e))||"object"!==Ln(i)&&"function"!=typeof i?Rn(r):i)._inputController=new Tn,n._selectionBox=new In,n._viewportComponent=o.a.createRef(),n._labelEditorComponent=o.a.createRef(),n._graphViewComponent=o.a.createRef(),n.onMouseOver=n.onMouseOver.bind(Rn(Rn(n))),n.onMouseOut=n.onMouseOut.bind(Rn(Rn(n))),n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Nn(e,t)}(t,o.a.Component),n=t,(r=[{key:"componentDidMount",value:function(){var e=this._inputController,t=this._selectionBox,n=this.props.graphController,r=n.getLabelFormatter(),o=this.getViewportComponent().getInputAdapter();n.setInputController(e),e.setGraphController(n),e.setSelectionBox(t),e.setLabelFormatter(r),o.bindContext(e.getInputContext()),e.initialize(),n.initialize()}},{key:"componentDidUpdate",value:function(){this._inputController.update(),this.props.graphController.update()}},{key:"componentWillUnmount",value:function(){this.getViewportComponent().getInputAdapter().unbindContext(this._inputController.getInputContext()),this.props.graphController.destroy(),this._selectionBox.clearSelection(),this._inputController.destroy()}},{key:"onMouseOver",value:function(e){this._inputController.onMouseOver(e)}},{key:"onMouseOut",value:function(e){this._inputController.onMouseOut(e)}},{key:"getInputController",value:function(){return this._inputController}},{key:"getSelectionBox",value:function(){return this._selectionBox}},{key:"getViewportComponent",value:function(){return this._viewportComponent.current}},{key:"getLabelEditorComponent",value:function(){return this._labelEditorComponent.current}},{key:"render",value:function(){var e=this,t=this.getViewportComponent(),n=this._inputController,r=this._selectionBox,i=this.props.graphController,a=i.getLabelFormatter();return o.a.createElement(o.a.Fragment,null,o.a.createElement(c.a,{ref:this._viewportComponent,id:this.props.id,className:this.props.className,style:this.props.style},t&&o.a.createElement(o.a.Fragment,null,o.a.createElement(Ne,{ref:this._graphViewComponent,graphController:i,inputController:n,selectionBox:r,viewport:t,onMouseOver:this.onMouseOver,onMouseOut:this.onMouseOut}),this.props.children)),t&&o.a.createElement(o.a.Fragment,null,o.a.createElement(Ht,{graphController:i,inputController:n,viewport:t},o.a.createElement(yn,{style:{right:0},viewportAdapter:t.getInputAdapter().getViewportAdapter()}),this.props.overlay),o.a.createElement(pt,{ref:function(t){e._labelEditorComponent.current=t,i.setLabelEditor(t)},labelFormatter:a,viewport:t,saveOnExit:!0},this.props.labelEditor)))}}])&&Dn(n.prototype,r),i&&Dn(n,i),t}();Bn.propTypes={id:s.a.string,className:s.a.string,style:s.a.object};var Gn=Bn;function Hn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Fn=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ue,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:et;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._nodeClass=t,this._edgeClass=n,this._nodeMapping=new Map,this._edgeMapping=new Map}var t,n,r;return t=e,(n=[{key:"clear",value:function(){this.clearEdges(),this.clearNodes()}},{key:"isEmpty",value:function(){return this._nodeMapping.size<=0&&this._edgeMapping.size<=0}},{key:"getBoundingRect",value:function(){if(this._nodeMapping.size<=0)return{minX:0,minY:0,maxX:1,maxY:1,width:1,height:1};var e=Number.MAX_VALUE,t=Number.MAX_VALUE,n=Number.MIN_VALUE,r=Number.MIN_VALUE,o=0,i=!0,a=!1,u=void 0;try{for(var l,s=this._nodeMapping.values()[Symbol.iterator]();!(i=(l=s.next()).done);i=!0){var c=l.value,f=c.x,p=c.y,h=c.getNodeSize();h>o&&(o=h),e=Math.min(e,f),n=Math.max(n,f),t=Math.min(t,p),r=Math.max(r,p)}}catch(e){a=!0,u=e}finally{try{i||null==s.return||s.return()}finally{if(a)throw u}}e-=o,t-=o,n+=o,r+=o;var y=Number.MAX_VALUE,v=Number.MAX_VALUE,d=Number.MIN_VALUE,g=Number.MIN_VALUE,b={x:0,y:0},m={x:0,y:0},_={x:0,y:0},w=!0,E=!1,O=void 0;try{for(var S,k=this._edgeMapping.values()[Symbol.iterator]();!(w=(S=k.next()).done);w=!0){var x=S.value;x.getStartPoint(b),x.getEndPoint(m),x.getCenterPoint(_);var C=b.x,M=b.y,P=m.x,T=m.y,j=_.x,I=_.y;y=Math.min(y,C,P,j),d=Math.max(d,C,P,j),v=Math.min(v,M,T,I),g=Math.max(g,M,T,I)}}catch(e){E=!0,O=e}finally{try{w||null==k.return||k.return()}finally{if(E)throw O}}var L={minX:Math.min(e,y),minY:Math.min(t,v),maxX:Math.max(n,d),maxY:Math.max(r,g),width:0,height:0};return L.width=L.maxX-L.minX,L.height=L.maxY-L.minY,L}},{key:"getHashCode",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t="",n=!0,r=!1,o=void 0;try{for(var i,a=this._nodeMapping.values()[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){t+=i.value.getHashString(e)+","}}catch(e){r=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}t+="|";var u=!0,l=!1,s=void 0;try{for(var c,f=this._edgeMapping.values()[Symbol.iterator]();!(u=(c=f.next()).done);u=!0){t+=c.value.getHashString(e)+","}}catch(e){l=!0,s=e}finally{try{u||null==f.return||f.return()}finally{if(l)throw s}}return Object(vn.e)(t)}},{key:"createNode",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return this.addNode(new this._nodeClass(n||Object(vn.c)(),e,t))}},{key:"addNode",value:function(e){return e.getGraphElementID()||e.setGraphElementID(Object(vn.c)()),this._nodeMapping.set(e.getGraphElementID(),e),e}},{key:"deleteNode",value:function(e){var t=e.getGraphElementID();if(this._nodeMapping.has(t)){this._nodeMapping.delete(t);var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=this.getEdges()[Symbol.iterator]();!(r=(a=u.next()).done);r=!0){var l=a.value;l.getEdgeFrom()===e?n.push(l):l.getEdgeTo()===e&&l.setEdgeTo(null)}}catch(e){o=!0,i=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}for(var s=0;s<n.length;s++){var c=n[s];this.deleteEdge(c)}}}},{key:"clearNodes",value:function(){this._nodeMapping.clear()}},{key:"getNodeByElementID",value:function(e){return this._nodeMapping.has(e)?this._nodeMapping.get(e):null}},{key:"getNodesByLabel",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=!0,r=!1,o=void 0;try{for(var i,a=this.getNodes()[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var u=i.value;u.getNodeLabel()===e&&t.push(u)}}catch(e){r=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}return t}},{key:"getNodes",value:function(){return Array.from(this._nodeMapping.values())}},{key:"getNodeCount",value:function(){return this._nodeMapping.size}},{key:"getNodeClass",value:function(){return this._nodeClass}},{key:"formatEdge",value:function(e){return e}},{key:"createEdge",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return this.addEdge(new this._edgeClass(n||Object(vn.c)(),e,t))}},{key:"addEdge",value:function(e){return e.getGraphElementID()||e.setGraphElementID(Object(vn.c)()),this._edgeMapping.set(e.getGraphElementID(),e),e}},{key:"deleteEdge",value:function(e){var t=e.getGraphElementID();this._edgeMapping.has(t)&&this._edgeMapping.delete(t)}},{key:"clearEdges",value:function(){this._edgeMapping.clear()}},{key:"getEdgeByElementID",value:function(e){return this._edgeMapping.has(e)?this._edgeMapping.get(e):null}},{key:"getEdgesByLabel",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=!0,r=!1,o=void 0;try{for(var i,a=this.getEdges()[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var u=i.value;u.getEdgeLabel()===e&&t.push(u)}}catch(e){r=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}return t}},{key:"getEdges",value:function(){return Array.from(this._edgeMapping.values())}},{key:"getEdgeCount",value:function(){return this._edgeMapping.size}},{key:"getEdgeClass",value:function(){return this._edgeClass}}])&&Hn(t.prototype,n),r&&Hn(t,r),e}();function Vn(e){return(Vn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Xn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Yn(e,t){return!t||"object"!==Vn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function zn(e,t,n){return(zn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Qn(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Qn(e){return(Qn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Un(e,t){return(Un=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var qn=function(e){function t(e,n){var r,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Yn(this,Qn(t).call(this,e,n,o)))._quad={radians:0,length:o?0:r.getPlaceholderLength(),coords:{x:0,y:0}},r}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Un(e,t)}(t,et),n=t,(r=[{key:"setEdgeTo",value:function(e){var n=this._to;if(e!==n){var r=zn(Qn(t.prototype),"setEdgeTo",this).call(this,e);return e?e===this._from&&(this._quad.length=this._from.getNodeSize()+this.getPlaceholderLength()):this.setQuadraticByCoords(n.x,n.y),r}return zn(Qn(t.prototype),"setEdgeTo",this).call(this,e)}},{key:"setQuadraticRadians",value:function(e){return this._quad.radians=e,this}},{key:"setQuadraticLength",value:function(e){return this._quad.length=e,this}},{key:"setQuadraticByCoords",value:function(e,t){var n=this._from,r=this._to;if(!r){var o=this._from.x-e,i=this._from.y-t,a=-Math.atan2(o,i)-Math.PI/2;return this._quad.radians=a,this}var u=n.x,l=n.y,s=r.x-u,c=r.y-l,f=u+s/2,p=l+c/2,h=Math.atan2(-c,s);s=e-f,c=t-p;var y=Math.PI,v=y/2,d=Math.atan2(c,s)+h,g=Math.sqrt(s*s+c*c);g<0&&(g=0);var b=d- -v,m=d-v,_=y/20;return Math.abs(g)<8?(d=0,g=0):b<_&&b>-_?d=-v:-m<_&&-m>-_&&(d=v),this._quad.radians=d,this._quad.length=g,this}},{key:"getQuadraticLength",value:function(){return this._quad.length}},{key:"getQuadraticRadians",value:function(){return this._quad.radians}},{key:"getQuadratic",value:function(){return this._quad}},{key:"isQuadratic",value:function(){return!this.isPlaceholder()&&0!==this._quad.length}},{key:"getQuadraticAsCoords",value:function(){var e=this._from,t=this._to,n=this._quad.coords;return null==e||null==t?(n.x=0,n.y=0):Object(vn.a)(e.x,e.y,t.x,t.y,this._quad.length,this._quad.radians,n),n}},{key:"getEdgeDirection",value:function(){var e=0;if(this.isQuadratic()){var n=this.getQuadraticAsCoords();e=Math.atan2(n.y,n.x)+Math.PI/2}else e=zn(Qn(t.prototype),"getEdgeDirection",this).call(this);return e}},{key:"getStartPoint",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{x:0,y:0},t=this._from,n=this._to;if(!t)throw new Error("Source of edge cannot be null.");if(!n){var r=this._quad.radians,o=Math.cos(r),i=Math.sin(r),a=t.getNodeSize();return e.x=t.x+o*a,e.y=t.y+i*a,e}if("function"==typeof n.getNodeSize&&this.isQuadratic()){Object(vn.b)(t.x,t.y,n.x,n.y,e);var u=this.getQuadraticAsCoords(),l=e.x+u.x,s=e.y+u.y;return Object(vn.a)(t.x,t.y,l,s,t.getNodeSize(),this.isSelfLoop()?Math.PI/4:0,e),e.x+=t.x,e.y+=t.y,e}return Object(vn.a)(t.x,t.y,n.x,n.y,t.getNodeSize(),0,e),e.x+=t.x,e.y+=t.y,e}},{key:"getCenterPoint",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{x:0,y:0},t=this._from,n=this._to;if(!t)throw new Error("Source of edge cannot be null.");if(!n){var r=Math.cos(this._quad.radians),o=Math.sin(this._quad.radians),i=t.getNodeSize()+this.getPlaceholderLength()/2;return e.x=t.x+r*i,e.y=t.y+o*i,e}if(Object(vn.b)(t.x,t.y,n.x,n.y,e),this.isQuadratic()){var a=this.getQuadraticAsCoords();e.x+=a.x,e.y+=a.y}return e}},{key:"getEndPoint",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{x:0,y:0},t=this._from,n=this._to;if(!t)throw new Error("Source of edge cannot be null.");if(!n){var r=this._quad.radians,o=Math.cos(r),i=Math.sin(r),a=t.getNodeSize()+this.getPlaceholderLength();return e.x=t.x+o*a,e.y=t.y+i*a,e}if("function"!=typeof n.getNodeSize)return n;if(this.isQuadratic()){Object(vn.b)(t.x,t.y,n.x,n.y,e);var u=this.getQuadraticAsCoords(),l=e.x+u.x,s=e.y+u.y;return Object(vn.a)(n.x,n.y,l,s,n.getNodeSize(),this.isSelfLoop()?-Math.PI/4:0,e),e.x+=n.x,e.y+=n.y,e}return Object(vn.a)(n.x,n.y,t.x,t.y,n.getNodeSize(),0,e),e.x+=n.x,e.y+=n.y,e}},{key:"getHashString",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return e?zn(Qn(t.prototype),"getHashString",this).call(this,e)+":"+this._quad.radians+","+this._quad.length:zn(Qn(t.prototype),"getHashString",this).call(this,e)}}])&&Xn(n.prototype,r),o&&Xn(n,o),t}();function Zn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Wn=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"parse",value:function(e){return arguments.length>1&&void 0!==arguments[1]?arguments[1]:null}},{key:"compose",value:function(e){return arguments.length>1&&void 0!==arguments[1]?arguments[1]:null}}])&&Zn(t.prototype,n),r&&Zn(t,r),e}();function Kn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Jn=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.major=t,this.minor=n,this.patch=r}var t,n,r;return t=e,r=[{key:"parse",value:function(t){if("string"!=typeof t)throw new Error("Invalid argument type to parse as SemanticVersion");var n,r,o,i=t.split(".");if(3!=i.length)throw new Error("Invalid format for SemanticVersion");try{n=Number.parseInt(i[0]),r=Number.parseInt(i[1]),o=Number.parseInt(i[2])}catch(e){throw e}return new e(n,r,o)}}],(n=[{key:"canSupportVersion",value:function(e){return this.major==e.major&&(this.minor<e.minor||this.minor==e.minor&&this.patch<=e.patch)}},{key:"toString",value:function(){return this.major+"."+this.minor+"."+this.patch}}])&&Kn(t.prototype,n),r&&Kn(t,r),e}();function $n(e){return($n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function er(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function tr(e,t){return!t||"object"!==$n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function nr(e){return(nr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function rr(e,t){return(rr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var or=Jn.parse("1.0.0"),ir=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),tr(this,nr(t).call(this))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&rr(e,t)}(t,Wn),n=t,(r=[{key:"parse",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if("object"!==$n(e))throw new Error("Unable to parse data of non-object type");var n=Jn.parse(e._version||"0.0.0");if(!n.canSupportVersion(or))throw new Error("Unable to parse data for incompatible version '"+n+"'");var r=e.nodes||[],o=Math.min(r.length||0,e.nodeCount||0),i=e.edges||[],a=Math.min(i.length||0,e.edgeCount||0),u=e.quad||!1;t?t.clear():t=new Fn(Ue,u?qn:et);for(var l=new Map,s=0;s<o;++s){var c=r[s];if(c){var f=t.createNode(c.x||0,c.y||0,c.id);f.setNodeLabel(c.label||""),l.set(s,f)}}for(var p=0;p<a;++p){var h=i[p];if(h){var y=l.get(h.from)||null;if(y){var v=l.get(h.to)||null,d=t.createEdge(y,v,h.id);if(d.setEdgeLabel(h.label||""),d instanceof qn){var g=h.quad||{};d.setQuadraticRadians(g.radians||0),d.setQuadraticLength(g.length||0)}}}}return t}},{key:"compose",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!(e instanceof Fn))throw new Error("Unable to compose target of unknown type");t||(t={});for(var n,r=e.getNodes()||[],o=r.length||0,i=e.getEdges()||[],a=i.length||0,u=new Array(o),l=new Map,s=0;s<o;++s)if(n=r[s]){var c=n.getGraphElementID();l.set(n,s),u[s]={id:c,x:n.x||0,y:n.y||0,label:n.getNodeLabel()||""}}for(var f,p=!1,h=new Array(a),y=0;y<a;++y)if(f=i[y]){var v=f.getGraphElementID(),d=f.getEdgeFrom(),g=f.getEdgeTo(),b=l.has(d)?l.get(d):-1,m=l.has(g)?l.get(g):-1;if(h[y]={id:v,from:b,to:m,label:f.getEdgeLabel()||""},f instanceof qn){var _=f.getQuadratic()||{};p=!0,h[y].quad={radians:_.radians||0,length:_.length||0}}}return t._version="1.0.0",t.nodeCount=o,t.nodes=u,t.edgeCount=a,t.edges=h,t.hasQuad=p,t}}])&&er(n.prototype,r),o&&er(n,o),t}();function ar(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var ur=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"formatLabel",value:function(e,t){arguments.length>2&&void 0!==arguments[2]&&arguments[2];return t}},{key:"getDefaultLabel",value:function(e){return""}},{key:"formatNodeLabel",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e}},{key:"formatEdgeLabel",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e}},{key:"getDefaultNodeLabel",value:function(){return""}},{key:"getDefaultEdgeLabel",value:function(){return""}}])&&ar(t.prototype,n),r&&ar(t,r),e}(),lr=new ur;function sr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var cr=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._graph=t,this._graphChangeHandler=null,this._inputController=null,this._labelEditor=null,this._labelFormatter=null,this._listeners=[]}var t,n,r;return t=e,(n=[{key:"setInputController",value:function(e){return this._inputController=e,this}},{key:"setLabelEditor",value:function(e){return this._labelEditor=e,this}},{key:"setLabelFormatter",value:function(e){return this._labelFormatter=e,this}},{key:"setGraphChangeHandler",value:function(e){return this._graphChangeHandler=e,this}},{key:"addListener",value:function(e){return this._listeners.push(e),this}},{key:"removeListener",value:function(e){var t=this._listeners.indexOf(e);t>=0&&this._listeners.splice(t,1)}},{key:"clearListeners",value:function(){this._listeners.length=0}},{key:"initialize",value:function(){if(!this._inputController)throw new Error("Must set input controller before init")}},{key:"update",value:function(){this._graphChangeHandler&&this._graphChangeHandler.update(this._graph)}},{key:"destroy",value:function(){}},{key:"clearGraph",value:function(){this._graph.clear(),this.emitGraphEvent("graph-clear")}},{key:"onGraphEvent",value:function(e,t){}},{key:"emitGraphEvent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.onGraphEvent(e,t);var n=!0,r=!1,o=void 0;try{for(var i,a=this._listeners[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){i.value.onGraphEvent(this,e,t)}}catch(e){r=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}}},{key:"openLabelEditor",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(this._labelEditor){var r=this._labelEditor,o=t||"";r.openEditor(e,t,function(e,t){var r=!o||o.length>0&&t!==o;e instanceof et?e.setEdgeLabel(t):e instanceof Ue&&e.setNodeLabel(t),n&&n(e,t,r)},function(e){n&&n(e,null,!1)})}else n&&n(e,t,!1)}},{key:"getLabelFormatter",value:function(){return this._labelFormatter||lr}},{key:"getGraph",value:function(){return this._graph}},{key:"getGraphChangeHandler",value:function(){return this._graphChangeHandler}}])&&sr(t.prototype,n),r&&sr(t,r),e}();function fr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var pr=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._cachedGraphHash=0,this._refreshTicks=t,this._elapsedTicks=1/0,this._listeners=[]}var t,n,r;return t=e,(n=[{key:"addListener",value:function(e){if("function"!=typeof e)throw new Error("Cannot add uncallable listener");this._listeners.push(e)}},{key:"removeListener",value:function(e){var t=this._listeners.indexOf(e);return t>=0&&(this._listeners.splice(t,1),!0)}},{key:"clearListeners",value:function(){this._listeners.length=0}},{key:"getListeners",value:function(){return this._listeners}},{key:"reset",value:function(){this._elapsedTicks=0,this._cachedGraphHash=0}},{key:"update",value:function(e){if(++this._elapsedTicks>=this._refreshTicks){this._elapsedTicks=0;var t=e.getHashCode(!1);if(t!==this._cachedGraphHash){this._cachedGraphHash=t;var n=!0,r=!1,o=void 0;try{for(var i,a=this._listeners[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){(0,i.value)(e)}}catch(e){r=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}}}}}])&&fr(t.prototype,n),r&&fr(t,r),e}(),hr=n(194);function yr(e){return(yr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function dr(e,t){return!t||"object"!==yr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function gr(e){return(gr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function br(e,t){return(br=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var mr=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=dr(this,gr(t).call(this)))._graph=e,r._graphParser=n,r._graphData=n.compose(e),r}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&br(e,t)}(t,hr["a"]),n=t,(r=[{key:"applyUndo",value:function(e){var n=e.getPreviousEvent();n instanceof t?n.applyRedo(e):this._graph.clear()}},{key:"applyRedo",value:function(e){this._graphParser.parse(this._graphData,this._graph)}}])&&vr(n.prototype,r),o&&vr(n,o),t}(),_r=n(21);function wr(e){return(wr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Er(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Or(e,t){return!t||"object"!==wr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Sr(e,t,n){return(Sr="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=kr(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function kr(e){return(kr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function xr(e,t){return(xr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Cr=function(e){function t(e,n,r){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=Or(this,kr(t).call(this,n)))._app=e,o.setGraphChangeHandler(new pr),e.getUndoManager().setEventHandlerFactory(function(){return new mr(n,r)}),o}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xr(e,t)}(t,cr),n=t,(r=[{key:"onGraphEvent",value:function(e,n){switch(Sr(kr(t.prototype),"onGraphEvent",this).call(this,e,n),e){case"error-node-edit-while-delete":case"error-edge-edit-while-delete":this._app.getNotificationManager().pushNotification(I18N.toString("message.warning.cannotmodify"),_r.c,"tryCreateWhileTrash",null,!0);break;default:this._app.getUndoManager().captureEvent()}}},{key:"getApp",value:function(){return this._app}}])&&Er(n.prototype,r),o&&Er(n,o),t}();function Mr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Pr=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._app=t,this._graph=new Fn(Ue,qn),this._graphController=new Cr(t,this._graph,new ir)}var t,n,r;return t=e,(n=[{key:"initialize",value:function(e){var t=this;e.getDrawerManager().addPanelClass(function(e){return o.a.createElement(i.a,{id:e.id,className:e.className,style:e.style,title:"Your Average Graph Editor"},o.a.createElement("p",null,"Brought to you with ❤ by the Flap.js team."),o.a.createElement("p",null,"<- Tap on a tab to begin!"))}),e.getRenderManager().addRenderer(u.c,function(e){return o.a.createElement(Gn,{graphController:t._graphController})})}},{key:"update",value:function(e){}},{key:"destroy",value:function(e){}},{key:"clear",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];a.a(e,t,function(){return e.getToolbarComponent().closeBar()})}},{key:"getGraphController",value:function(){return this._graphController}},{key:"getModuleVersion",value:function(){return"0.0.1"}},{key:"getModuleName",value:function(){return"nodegraph"}},{key:"getLocalizedModuleName",value:function(){return"Node Graph"}},{key:"getApp",value:function(){return this._app}}])&&Mr(t.prototype,n),r&&Mr(t,r),e}();t.default=Pr}}]);
//# sourceMappingURL=sourcemap/module_nodegraph.bundle.js.map