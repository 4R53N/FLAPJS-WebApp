(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{168:function(e,t,r){"use strict";r.r(t);var n=r(19),o=r(14),i=r(43),a=r(36),u=r(13),l=r(21),s=r(35),c=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=e.nodes||[],n=Math.min(r.length||0,e.nodeCount||0),o=e.edges||[],i=Math.min(o.length||0,e.edgeCount||0),c=e.quad||!1;t?t.clear():t=new a.a(u.a,c?s.a:l.a);for(var f=new Map,p=0;p<n;++p){var h=r[p];if(h){var y=t.createNode(h.x||0,h.y||0,h.id);y.setNodeLabel(h.label||""),f.set(p,y)}}for(var g=0;g<i;++g){var d=o[g];if(d){var v=f.get(d.from)||null;if(v){var b=f.get(d.to)||null,m=t.createEdge(v,b,d.id);if(m.setEdgeLabel(d.label||""),m instanceof s.a){var E=d.quad||{};m.setQuadratic(E.radians||0,E.length||0)}}}}return t},f=function(e){for(var t=e.getNodes()||[],r=t.length||0,n=e.getEdges()||[],o=n.length||0,i=new Array(r),a=new Map,u=0;u<r;++u){var l=t[u];if(l){var c=l.getGraphElementID();a.set(l,u),i[u]={id:c,x:l.x||0,y:l.y||0,label:l.getNodeLabel()||""}}}for(var f=!1,p=new Array(o),h=0;h<o;++h){var y=n[h];if(y){var g=y.getGraphElementID(),d=y.getQuadratic()||{},v=y.getSourceNode(),b=y.getDestinationNode(),m=a.has(v)?a.get(v):-1,E=a.has(b)?a.get(b):-1;p[h]={id:g,from:m,to:E,label:y.getEdgeLabel()||""},y instanceof s.a&&(f=!0,p[h].quad={radians:d.radians||0,length:d.length||0})}}return{nodeCount:r,nodes:i,edgeCount:o,edges:p,hasQuad:f,_version:"1.0.0"}},p=r(8);function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function g(e,t){return!t||"object"!==h(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var b=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),g(this,d(t).call(this))}var r,n,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(t,o["a"]),r=t,(n=[{key:"fromJSON",value:function(e,t){var r=t.getGraphController().getGraph();"_metadata"in e&&e._metadata;return c(e.graphData,r)}},{key:"toJSON",value:function(e,t){t.getGraphController();var r={};return r._metadata={module:t.getModuleName(),version:"0.3.3:"+t.getModuleVersion(),timestamp:(new Date).toString()},r.graphData=e,r}},{key:"importFromData",value:function(e,t){this.fromJSON(e,t)}},{key:"exportToData",value:function(e){var t=e.getGraphController().getGraph(),r=f(t);return this.toJSON(r,e)}},{key:"importFromFile",value:function(e,t){var r=this;return new Promise(function(n,o){var i=e.name;if(!i.endsWith(r.getFileType()))throw new Error("Trying to import invalid file type for '"+r.getFileType()+"': "+i);var a=new FileReader;a.onload=function(e){var u=t.getGraphController(),l=e.target.result,s=(i.substring(0,i.length-r.getFileType().length-1),u.getGraph());u.emit("userPreImportGraph",s);try{var c=JSON.parse(l);r.fromJSON(c,t),u.emit("userImportGraph",s),n()}catch(e){a.abort(),o(e)}finally{u.emit("userPostImportGraph",s)}},a.onerror=function(e){o(new Error("Unable to import file: "+e.target.error.code))},a.readAsText(e)})}},{key:"exportToFile",value:function(e,t){var r=t.getGraphController().getGraph(),n=f(r),o=this.toJSON(n,t),i=JSON.stringify(o);Object(p.e)(e+"."+this.getFileType(),i)}},{key:"doesSupportData",value:function(){return!0}},{key:"doesSupportFile",value:function(){return!0}},{key:"canImport",value:function(){return!0}},{key:"getTitle",value:function(){return"Save machine to JSON"}},{key:"getLabel",value:function(){return"Save machine to JSON"}},{key:"getFileType",value:function(){return"json"}},{key:"getIconClass",value:function(){return i.a}}])&&y(r.prototype,n),a&&y(r,a),t}(),m=r(45),E=r(3);function w(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var S=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.selectionBox={fromX:0,fromY:0,toX:0,toY:0,visible:!1},this.targets=[],this.target=null,this.targetType="",this.initialTarget=null,this.initialTargetType=""}var t,r,n;return t=e,(r=[{key:"setInitialTarget",value:function(e,t){this.initialTarget=e,this.initialTargetType=t}},{key:"updateTarget",value:function(e,t,r){return(this.target=this.getEdgeByEndPointAt(e,t,r))?this.targetType="endpoint":(this.target=this.getNodeAt(e,t,r))?this.targetType="node":(this.target=this.getEdgeAt(e,t,r))?this.targetType="edge":(this.target=null,this.targetType="none"),this.target}},{key:"clearTarget",value:function(){this.target=null,this.targetType="none"}},{key:"hasTarget",value:function(){return null!=this.target}},{key:"getNodeAt",value:function(e,t,r){var n=!0,o=!1,i=void 0;try{for(var a,u=e.getNodes()[Symbol.iterator]();!(n=(a=u.next()).done);n=!0){var l=a.value,s=t-l.x,c=r-l.y;if(s*s+c*c<E.a.NODE_RADIUS_SQU)return l}}catch(e){o=!0,i=e}finally{try{n||null==u.return||u.return()}finally{if(o)throw i}}return null}},{key:"getEdgeAt",value:function(e,t,r){var n={x:0,y:0},o=!0,i=!1,a=void 0;try{for(var u,l=e.getEdges()[Symbol.iterator]();!(o=(u=l.next()).done);o=!0){var s=u.value;s.getCenterPoint(n);var c=t-n.x,f=r-n.y;if(c*c+f*f<E.a.EDGE_RADIUS_SQU)return s}}catch(e){i=!0,a=e}finally{try{o||null==l.return||l.return()}finally{if(i)throw a}}return null}},{key:"getEdgeByEndPointAt",value:function(e,t,r){var n={x:0,y:0},o=!0,i=!1,a=void 0;try{for(var u,l=e.getEdges()[Symbol.iterator]();!(o=(u=l.next()).done);o=!0){var s=u.value;s.getEndPoint(n);var c=t-n.x,f=r-n.y;if(c*c+f*f<E.a.ENDPOINT_RADIUS_SQU)return s}}catch(e){i=!0,a=e}finally{try{o||null==l.return||l.return()}finally{if(i)throw a}}return null}},{key:"getSelectionBox",value:function(){return this.selectionBox}},{key:"getSelection",value:function(e){if(arguments.length>1&&void 0!==arguments[1]&&arguments[1]){var t=this.selectionBox,r=Math.max(t.toX,t.fromX),n=Math.max(t.toY,t.fromY),o=Math.min(t.toX,t.fromX),i=Math.min(t.toY,t.fromY);this.clearSelection(),function(e,t,r,n,o,i){var a=Math.min(t,n),u=Math.min(r,o),l=Math.max(t,n),s=Math.max(r,o),c=!0,f=!1,p=void 0;try{for(var h,y=e.getNodes()[Symbol.iterator]();!(c=(h=y.next()).done);c=!0){var g=h.value;g.x>=a&&g.x<l&&g.y>=u&&g.y<s&&i.push(g)}}catch(e){f=!0,p=e}finally{try{c||null==y.return||y.return()}finally{if(f)throw p}}}(e,o,i,r,n,this.targets)}return this.targets}},{key:"hasSelection",value:function(){return this.targets.length>0}},{key:"clearSelection",value:function(){this.targets.length=0}},{key:"isTargetInSelection",value:function(e){return this.targets.includes(e||this.target)}},{key:"isTarget",value:function(e){return this.target==e}},{key:"beginSelection",value:function(e,t,r){var n=this.selectionBox;n.fromX=n.toX=t,n.fromY=n.toY=r,this.clearSelection(),n.visible=!0}},{key:"updateSelection",value:function(e,t,r){var n=this.selectionBox;n.toX=t,n.toY=r,this.getSelection(e,!0)}},{key:"endSelection",value:function(e,t,r){var n=this.selectionBox;n.toX=t,n.toY=r,this.getSelection(e,!0),n.visible=!1}},{key:"isSelecting",value:function(){return this.selectionBox.visible}}])&&w(t.prototype,r),n&&w(t,n),e}();function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function P(e,t){return!t||"object"!==O(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function k(e,t,r){return(k="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=T(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function T(e){return(T=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function N(e,t){return(N=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var C=!0,j=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=P(this,T(t).call(this,e,r)))._picker=new S,n._graphController=null,n.prevPointerX=0,n.prevPointerY=0,n.isNewEdge=!1,n.shouldDestroyPointlessEdges=C,n._swapMouseScheme=!0,//!navigator.platform.startsWith("Mac");
n._trashMode=!1,n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&N(e,t)}(t,m["a"]),r=t,(n=[{key:"initialize",value:function(e){k(T(t.prototype),"initialize",this).call(this,e),this._graphController=e.getGraphController()}},{key:"destroy",value:function(e){k(T(t.prototype),"destroy",this).call(this,e)}},{key:"update",value:function(e){var t=this._graphController.getGraph(),r=this._picker,n=this._inputAdapter.getPointerX(),o=this._inputAdapter.getPointerY();n==this.prevPointerX&&o==this.prevPointerY||(this.prevPointerX=n,this.prevPointerY=o,r.updateTarget(t,n,o),r.hasTarget()?document.body.style.cursor="pointer":document.body.style.cursor="auto")}},{key:"onPreInputEvent",value:function(e){var r=this._graphController.getGraph(),n=this.getPicker();n.updateTarget(r,e.x,e.y),n.setInitialTarget(n.target,n.targetType);var o=n.initialTarget,i=n.initialTargetType;return n.hasSelection()&&("node"==i&&n.isTargetInSelection(o)||n.clearSelection()),k(T(t.prototype),"onPreInputEvent",this).call(this,e)}},{key:"onInputEvent",value:function(e){var r=this._graphController,n=e.x,o=e.y,i=r.getGraph(),a=this.getPicker();a.updateTarget(i,n,o);var u=a.initialTarget,l=a.initialTargetType;return this.isTrashMode()?"node"===l?(r.prevX=u.x,r.prevY=u.y,a.hasSelection()?r.deleteSelectedNodes(u):r.deleteTargetNode(u),!0):("edge"===l||"endpoint"===l)&&(r.deleteTargetEdge(u),!0):"node"===l?(r.openLabelEditor(u,n,o),!0):"edge"===l?(r.openLabelEditor(u,n,o),!0):"none"!==l||k(T(t.prototype),"onInputEvent",this).call(this,e)}},{key:"onDblInputEvent",value:function(e){var t=this._graphController,r=e.x,n=e.y;return this.isTrashMode()?(t.emit("tryCreateWhileTrash"),!0):(t.createNode(r,n),!0)}},{key:"onDragStart",value:function(e){var r=this._graphController,n=r.getGraph(),o=this.getPicker(),i=e.x,a=e.y,l=o.initialTarget,c=o.initialTargetType;this.getInputAdapter().getViewport();if(this.isMoveMode()){if(this.isTrashMode())return r.emit("tryCreateWhileTrash"),!1;if(this.isNewEdge=!1,"edge"===c&&l.isPlaceholder())return!1;if("node"===c){if(!(l instanceof u.a))throw new Error("Invalid target "+l+" for type '"+c+"'. Must be an instance of Node.");return r.prevX=l.x,r.prevY=l.y,!0}if("edge"===c){if(!(l instanceof s.a))throw new Error("Invalid target "+l+" for type '"+c+"'. Must be an instance of Edge.");if(l.isPlaceholder())return!1;var f=l.getQuadratic();return r.prevQuad.radians=f.radians,r.prevQuad.length=f.length,!0}if("initial"===c)return this.ghostInitialMarker=e,!0}else{if("node"===c){if(this.isTrashMode())return r.emit("tryCreateWhileTrash"),!1;var p=n.createEdge(l,e);p.setEdgeLabel(r.getGraphLabeler().getDefaultEdgeLabel()),o.setInitialTarget(p,"endpoint"),this.isNewEdge=!0;var h=p.getQuadratic();return r.prevQuad.radians=h.radians,r.prevQuad.length=h.length,!0}if("edge"==c)return!1;if("none"===c)return o.beginSelection(n,i,a),!0}if("endpoint"===c){if(!(l instanceof s.a))throw new Error("Invalid target "+l+" for type '"+c+"'. Must be an instance of Edge.");var y=l.getQuadratic();return r.prevQuad.radians=y.radians,r.prevQuad.length=y.length,r.prevEdgeTo=l.getDestinationNode(),this.isNewEdge=!this.isMoveMode(),!0}return k(T(t.prototype),"onDragStart",this).call(this,e)}},{key:"onDragMove",value:function(e){var r=this._graphController,n=r.getGraph(),o=this.getPicker(),i=e.x,a=e.y,u=o.initialTarget,l=o.initialTargetType;if(this.isMoveMode()){if("node"===l)return o.hasSelection()?r.moveMultipleNodesTo(e,o.getSelection(n),i,a):r.moveNodeTo(e,u,i,a),!0;if("edge"===l)return r.moveEdgeTo(e,u,i,a),!0;if("endpoint"===l)return r.moveEndpointTo(e,u,i,a),!0;if("initial"===l){var s=o.getNodeAt(n,i,a)||e;return this.ghostInitialMarker=s,!0}if("none"!==l)throw new Error("Unknown target type '"+l+"'.")}else{if(this.isNewEdge)return r.moveEndpointTo(e,u,i,a),!0;if(o.isSelecting())return o.updateSelection(n,i,a),!0}return k(T(t.prototype),"onDragMove",this).call(this,e)}},{key:"onDragStop",value:function(e){var r=this._graphController,n=r.getGraph(),o=this.getPicker(),i=e.x,a=e.y;o.updateTarget(n,i,a);var l=o.initialTarget,s=o.initialTargetType;if(this.isMoveMode()||this.isNewEdge){if("node"===s){if(this.isTrashMode())return o.hasSelection()?r.deleteSelectedNodes(l):r.deleteTargetNode(l),!0;if(o.hasSelection()){var c=i-r.prevX,f=a-r.prevY;r.emit("nodeMoveAll",n,o.getSelection(n),c,f)}else r.emit("nodeMove",n,l,i,a,r.prevX,r.prevY);return!0}if("edge"===s)return this.isTrashMode()?r.deleteTargetEdge(l):r.emit("edgeMove",n,l,l.getQuadratic(),r.prevQuad),!0;if(this.isNewEdge||"endpoint"===s){if(this.isTrashMode())return r.deleteTargetEdge(l),!0;if(l.getDestinationNode()instanceof u.a){var p=l;return p!==l?(r.openLabelEditor(p,i,a,p.getEdgeLabel(),!1),n.deleteEdge(l),!0):(this.isNewEdge?r.openLabelEditor(l,i,a,null,!0,function(){r.emit("userPostCreateEdge",n,l)}):r.openLabelEditor(l,i,a),this.isNewEdge?(this.isNewEdge=!1,r.emit("userCreateEdge",n,l)):null!==r.prevEdgeTo&&r.emit("edgeDestination",n,l,l.getDestinationNode(),r.prevEdgeTo,r.prevQuad),!0)}return this.shouldDestroyPointlessEdges?(this.isNewEdge?n.deleteEdge(l):r.deleteTargetEdge(l),!0):(l.changeDestinationNode(null),l.getEdgeLabel().length<=0&&r.openLabelEditor(l,i,a),!0)}if("none"!==s)throw new Error("Unknown target type '"+s+"'.")}else if(o.isSelecting())return o.endSelection(n,i,a),!0;return k(T(t.prototype),"onDragStop",this).call(this,e)}},{key:"onPostInputEvent",value:function(e){var r=this._graphController.getGraph(),n=this.getPicker();return n.clearTarget(),n.updateTarget(r,e.x,e.y),k(T(t.prototype),"onPostInputEvent",this).call(this,e)}},{key:"onZoomChange",value:function(e,r,n){return k(T(t.prototype),"onZoomChange",this).call(this,e,r,n)}},{key:"setTrashMode",value:function(e){this._trashMode=e}},{key:"isTrashMode",value:function(){return this._trashMode}},{key:"setInputScheme",value:function(e){this._swapMouseScheme=!e}},{key:"getInputScheme",value:function(){return this._swapMouseScheme}},{key:"isMoveMode",value:function(){var e=this._inputAdapter.isAltInput();return this._swapMouseScheme?!e:e}},{key:"isDragging",value:function(){return this._inputAdapter.isDragging()}},{key:"isActionMode",value:function(){return this._inputAdapter.isPointerActive()?this.isNewEdge||!this.isMoveMode():!this._swapMouseScheme}},{key:"getPicker",value:function(){return this._picker}}])&&_(r.prototype,n),o&&_(r,o),t}(),x=r(37),M=r(15),D=r(38);function G(e){return(G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function I(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function L(e,t){return!t||"object"!==G(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function A(e){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function R(e,t){return(R=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function X(e){return e||""}var Y=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),L(this,A(t).call(this))}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&R(e,t)}(t,D["a"]),r=t,(n=[{key:"getNodeLabelFormatter",value:function(){return X}},{key:"getEdgeLabelFormatter",value:function(){return X}}])&&I(r.prototype,n),o&&I(r,o),t}();function Q(e){return(Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function F(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function B(e,t){return!t||"object"!==Q(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function U(e,t,r){return(U="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=J(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function J(e){return(J=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function V(e,t){return(V=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var z=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=B(this,J(t).call(this,e,new a.a(u.a,s.a),new Y))).inputController=null,r.machineController=null,r.labelEditorElement=null,r.prevQuad={radians:0,length:0,x:0,y:0},r.prevEdgeTo=null,r.prevX=0,r.prevY=0,r.registerEvent("userCreateNode"),r.registerEvent("userPreCreateNode"),r.registerEvent("userPostCreateNode"),r.registerEvent("userDeleteNodes"),r.registerEvent("userPreDeleteNodes"),r.registerEvent("userPostDeleteNodes"),r.registerEvent("userDeleteEdge"),r.registerEvent("userPreDeleteEdge"),r.registerEvent("userPostDeleteEdge"),r.registerEvent("userCreateEdge"),r.registerEvent("userPostCreateEdge"),r.registerEvent("userRenameNode"),r.registerEvent("userChangeLayout"),r.registerEvent("userPreChangeLayout"),r.registerEvent("userPostChangeLayout"),r.registerEvent("userImportGraph"),r.registerEvent("userPreImportGraph"),r.registerEvent("userPostImportGraph"),r.registerEvent("nodeMove"),r.registerEvent("nodeMoveAll"),r.registerEvent("nodeInitial"),r.registerEvent("edgeDestination"),r.registerEvent("edgeMove"),r.registerEvent("edgeLabel"),r.registerEvent("tryCreateWhileTrash"),r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&V(e,t)}(t,x["a"]),r=t,(n=[{key:"initialize",value:function(e){U(J(t.prototype),"initialize",this).call(this,e),this.inputController=e.getInputController(),this.machineController=e.getMachineController()}},{key:"destroy",value:function(e){U(J(t.prototype),"destroy",this).call(this,e)}},{key:"renameNode",value:function(e,t){var r=e.getNodeLabel(),n=e.getNodeCustom();e.setNodeLabel(t),e.setNodeCustom(!0),this.emit("userRenameNode",this.getGraph(),e,t,r,n)}},{key:"createNode",value:function(e,t){var r=this.getGraphLabeler().getDefaultNodeLabel();void 0===e&&(e=Math.random()*E.a.SPAWN_RADIUS*2-E.a.SPAWN_RADIUS),void 0===t&&(t=Math.random()*E.a.SPAWN_RADIUS*2-E.a.SPAWN_RADIUS),this.emit("userPreCreateNode",this.getGraph(),r,e,t);var n=this.getGraph().createNode(e,t);return n.setNodeLabel(r),this.emit("userCreateNode",this.getGraph(),n),this.emit("userPostCreateNode",this.getGraph(),n),n}},{key:"deleteSelectedNodes",value:function(e){var t=this.inputController.getPicker(),r=t.getSelection(this.getGraph()).slice();this.emit("userPreDeleteNodes",this.getGraph(),e,r,this.prevX,this.prevY);var n=!0,o=!1,i=void 0;try{for(var a,u=r[Symbol.iterator]();!(n=(a=u.next()).done);n=!0){var l=a.value;this.getGraph().deleteNode(l)}}catch(e){o=!0,i=e}finally{try{n||null==u.return||u.return()}finally{if(o)throw i}}t.clearSelection(),this.emit("userDeleteNodes",this.getGraph(),e,r,this.prevX,this.prevY),this.emit("userPostDeleteNodes",this.getGraph(),e,r,this.prevX,this.prevY)}},{key:"deleteTargetNode",value:function(e){this.emit("userPreDeleteNodes",this.getGraph(),e,[e],this.prevX,this.prevY),this.getGraph().deleteNode(e),this.emit("userDeleteNodes",this.getGraph(),e,[e],this.prevX,this.prevY),this.emit("userPostDeleteNodes",this.getGraph(),e,[e],this.prevX,this.prevY)}},{key:"deleteTargetNodes",value:function(e){if(e&&!(e.length<=0)){this.emit("userPreDeleteNodes",this.getGraph(),e[0],e,this.prevX,this.prevY);var t=this.getGraph(),r=!0,n=!1,o=void 0;try{for(var i,a=e[Symbol.iterator]();!(r=(i=a.next()).done);r=!0){var u=i.value;t.deleteNode(u)}}catch(e){n=!0,o=e}finally{try{r||null==a.return||a.return()}finally{if(n)throw o}}this.emit("userDeleteNodes",this.getGraph(),e[0],e,this.prevX,this.prevY),this.emit("userPostDeleteNodes",this.getGraph(),e[0],e,this.prevX,this.prevY)}}},{key:"deleteTargetEdge",value:function(e){this.emit("userPreDeleteEdge",this.getGraph(),e,this.prevEdgeTo,this.prevQuad),this.getGraph().deleteEdge(e),this.emit("userDeleteEdge",this.getGraph(),e,this.prevEdgeTo,this.prevQuad),this.emit("userPostDeleteEdge",this.getGraph(),e,this.prevEdgeTo,this.prevQuad)}},{key:"deleteTargetEdges",value:function(e){if(e&&!(e.length<=0)){var t=!0,r=!1,n=void 0;try{for(var o,i=e[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var a=o.value;this.deleteTargetEdge(a)}}catch(e){r=!0,n=e}finally{try{t||null==i.return||i.return()}finally{if(r)throw n}}}}},{key:"moveNodeTo",value:function(e,t,r,n){var o=!0,i=!1,a=void 0;try{for(var u,l=this.getGraph().getNodes()[Symbol.iterator]();!(o=(u=l.next()).done);o=!0){var s=u.value;if(t!==s){var c=t.getNodeSize(),f=r-s.x,p=n-s.y,h=Math.atan2(p,f),y=2*c,g=s.x+Math.cos(h)*y-r,d=s.y+Math.sin(h)*y-n;f*f+p*p<c*c*4&&(r+=g,n+=d)}}}catch(e){i=!0,a=e}finally{try{o||null==l.return||l.return()}finally{if(i)throw a}}t.x=r,t.y=n}},{key:"moveMultipleNodesTo",value:function(e,t,r,n){var o=e.getInputEventPosition(),i=r-o.x,a=n-o.y,u=!0,l=!1,s=void 0;try{for(var c,f=t[Symbol.iterator]();!(u=(c=f.next()).done);u=!0){var p=c.value;p.x+=i,p.y+=a}}catch(e){l=!0,s=e}finally{try{u||null==f.return||f.return()}finally{if(l)throw s}}e.changeInputEventPosition(r,n)}},{key:"moveEdgeTo",value:function(e,t,r,n){t.setQuadraticByCoords(r,n)}},{key:"moveEndpointTo",value:function(e,t,r,n){var o=this.inputController.getPicker().getNodeAt(this.getGraph(),r,n)||e;if(t.changeDestinationNode(o),t.isSelfLoop()){var i=t.getSourceNode(),a=i.x-r,u=i.y-n,l=Math.atan2(u,a)+Math.PI;t.setQuadratic(l)}else t.setQuadratic(this.prevQuad.radians,this.prevQuad.length)}},{key:"openLabelEditor",value:function(e,t,r){var n=this,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;if(this.labelEditorElement){var u=o||e instanceof l.a?e.getEdgeLabel():e.getNodeLabel();this.labelEditorElement.openEditor(e,o,i,function(){var t=e instanceof l.a?e.getEdgeLabel():e.getNodeLabel();u&&u.length>0&&t!=u&&n.emit(e instanceof l.a?"edgeLabel":"nodeLabel",n.getGraph(),e,t,u),a&&a()})}else a&&a()}},{key:"focusOnNode",value:function(e){this.inputController.getInputAdapter().getViewport().setOffset(-e.x,-e.y)}},{key:"focusOnEdge",value:function(e){var t=e.getCenterPoint();this.inputController.getInputAdapter().getViewport().setOffset(-t.x,-t.y)}},{key:"focusOnNodes",value:function(e){var t=e.length,r=0,n=0,o=!0,i=!1,a=void 0;try{for(var u,l=e[Symbol.iterator]();!(o=(u=l.next()).done);o=!0){var s=u.value;r+=s.x,n+=s.y}}catch(e){i=!0,a=e}finally{try{o||null==l.return||l.return()}finally{if(i)throw a}}this.inputController.getInputAdapter().getViewport().setOffset(-r/t,-n/t)}}])&&F(r.prototype,n),o&&F(r,o),t}();M.a.mixin(z);var W=z,q=r(39),Z=r(40);function H(e){return(H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function K(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function $(e,t){return!t||"object"!==H(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ee(e){return(ee=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function te(e,t){return(te=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var re=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),$(this,ee(t).call(this))}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&te(e,t)}(t,Z["a"]),r=t,(n=[{key:"onGraphChange",value:function(e){}}])&&K(r.prototype,n),o&&K(r,o),t}();function ne(e){return(ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ie(e,t){return!t||"object"!==ne(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ae(e){return(ae=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ue(e,t){return(ue=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var le=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=ie(this,ae(t).call(this,e,new re)))._machineName="",r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ue(e,t)}(t,q["a"]),r=t,(n=[{key:"setMachineName",value:function(e){this._machineName=e}},{key:"getMachineName",value:function(){return this._machineName}}])&&oe(r.prototype,n),o&&oe(r,o),t}(),se=r(0),ce=r.n(se);function fe(e){return(fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function he(e,t){return!t||"object"!==fe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ye(e){return(ye=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ge(e,t){return(ge=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var de=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=he(this,ye(t).call(this,e))).container=null,r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ge(e,t)}(t,ce.a.Component),r=t,(n=[{key:"render",value:function(){var e=this;return ce.a.createElement("div",{className:"panel-container "+this.props.className,id:"about",ref:function(t){return e.container=t},style:this.props.style},ce.a.createElement("div",{className:"panel-title"},ce.a.createElement("h1",null,"Default")),ce.a.createElement("div",{className:"panel-content"},ce.a.createElement("p",null,"Brought to you with ❤ by the Flap.js team."),ce.a.createElement("p",null,"<- Tap on a tab to begin!")),ce.a.createElement("div",{className:"panel-bottom"}))}}])&&pe(r.prototype,n),o&&pe(r,o),t}();r(170);function ve(e){return(ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function be(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function me(e,t){return!t||"object"!==ve(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ee(e){return(Ee=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function we(e,t){return(we=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Se=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),me(this,Ee(t).call(this,e))}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&we(e,t)}(t,ce.a.Component),r=t,(n=[{key:"render",value:function(){var e=this.props.node,t=this.props.fill||"#FFFFFF",r=this.props.stroke||"#000000",n=e.getNodeLabel()||"";return ce.a.createElement("g",{className:"graph-node-container"},ce.a.createElement("circle",{className:"graph-node",cx:e.x,cy:e.y,r:e.getNodeSize(),fill:t,stroke:r}),"//Label",ce.a.createElement("text",{className:"graph-node-label",x:e.x,y:e.y+4,pointerEvents:"none",style:{userSelect:"none",fontSize:1-Math.min(Math.max(n.length-2,0)/6,.5)+"em"},textAnchor:"middle"},n))}}])&&be(r.prototype,n),o&&be(r,o),t}();function Oe(e){return(Oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Pe(e,t){return!t||"object"!==Oe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ke(e){return(ke=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Te(e,t){return(Te=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ne=Math.PI/6,Ce=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Pe(this,ke(t).call(this,e))}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Te(e,t)}(t,ce.a.Component),r=t,(n=[{key:"render",value:function(){var e=this.props.stroke||"#000000",t=this.props.edge,r=t.getStartPoint(),n=t.getEndPoint(),o=t.getCenterPoint(),i=t.getEdgeLabel(),a=(t.getQuadratic(),t.getQuadraticAsCoords()),u=t.getEdgeDirection(),l=a.y>0,s=null,c=0;if(t.isQuadratic()){var f=o.x+a.x,p=o.y+a.y;c=Math.atan2(f-n.x,p-n.y)+Math.PI,s="Q "+f+" "+p+" "+n.x+" "+n.y}else c=Math.atan2(r.x-n.x,r.y-n.y)+Math.PI,s="L "+n.x+" "+n.y;var h=i?i.split("\n"):[],y=o&&o.x||0,g=o&&o.y||0;return ce.a.createElement("g",{className:"graph-edge-container"},"//Draw lines",ce.a.createElement("path",{className:"graph-edge",id:"edge:"+t.getGraphElementID(),d:"M "+r.x+" "+r.y+" "+s+" M "+(n.x-10*Math.sin(c-Ne))+" "+(n.y-10*Math.cos(c-Ne))+" L "+n.x+" "+n.y+" L "+(n.x-10*Math.sin(c+Ne))+" "+(n.y-10*Math.cos(c+Ne)),fill:"none",stroke:e}),ce.a.createElement("g",{transform:"translate("+y+","+g+") rotate("+180*u/Math.PI+")"},h.length>0&&h.map(function(e,t){var r=-15*(t+1);return ce.a.createElement("text",{key:e+"."+t,className:"graph-edge-label",transform:"translate(0, "+r+")"+(l?" scale(-1, -1)":""),alignmentBaseline:"central",pointerEvents:"none",style:{userSelect:"none"},textAnchor:"middle"},e)})))}}])&&_e(r.prototype,n),o&&_e(r,o),t}();function je(e){return(je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Me(e,t){return!t||"object"!==je(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function De(e){return(De=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ge(e,t){return(Ge=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ie=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Me(this,De(t).call(this,e))}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ge(e,t)}(t,ce.a.Component),r=t,(n=[{key:"render",value:function(){var e=this.props.currentModule.getGraphController().getGraph();return ce.a.createElement("g",null,e.getNodes().map(function(e,t){return ce.a.createElement(Se,{key:e.getGraphElementID()||t,node:e})}),e.getEdges().map(function(e,t){return ce.a.createElement(Ce,{key:e.getGraphElementID()||t,edge:e})}))}}])&&xe(r.prototype,n),o&&xe(r,o),t}(),Le=r(41),Ae=r(17);function Re(e){return(Re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Xe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ye(e,t){return!t||"object"!==Re(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Qe(e){return(Qe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Fe(e,t){return(Fe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Be=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Ye(this,Qe(t).call(this,e))}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Fe(e,t)}(t,ce.a.Component),r=t,(n=[{key:"render",value:function(){this.props.parent;var e=this.props.currentModule,t=e.getGraphController(),r=e.getInputController(),n=t.getGraph(),o=r.getPicker(),i=o.getSelectionBox();return ce.a.createElement("g",null,o.hasSelection()&&o.getSelection(n).map(function(e,t){return ce.a.createElement(Ae.a,{key:e.getGraphElementID(),className:r.isTrashMode()?"highlight-error":"highlight-select",target:e,type:"node"})}),ce.a.createElement(Le.a,{visible:i.visible,fromX:i.fromX,fromY:i.fromY,toX:i.toX,toY:i.toY}),o.hasTarget()&&!o.isTargetInSelection()&&ce.a.createElement(Ae.a,{className:r.isTrashMode()?"highlight-error":"highlight-select",target:o.target,type:o.targetType}))}}])&&Xe(r.prototype,n),o&&Xe(r,o),t}(),Ue=r(42),Je=r(44);function Ve(e){return(Ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ze(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function We(e,t){return!t||"object"!==Ve(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function qe(e){return(qe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ze(e,t){return(Ze=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var He=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),We(this,qe(t).call(this,e))}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ze(e,t)}(t,ce.a.Component),r=t,(n=[{key:"render",value:function(){var e=this.props.parent,t=this.props.currentModule,r=this.props.screen,n=t.getInputController(),o=t.getGraphController(),i=t.getMachineController(),a=t.getLabelEditor();return ce.a.createElement("span",null,a&&ce.a.createElement(a,{ref:function(e){return o.labelEditorElement=e},inputController:n,graphController:o,machineController:i,screen:r}),ce.a.createElement("span",null,ce.a.createElement("div",{className:"anchor-bottom-left",style:{width:"100%"}},ce.a.createElement(Je.a,{inputController:n,graphController:o})),ce.a.createElement("div",{className:"anchor-bottom-right"},ce.a.createElement(Ue.a,{inputController:n,viewport:e}))))}}])&&ze(r.prototype,n),o&&ze(r,o),t}(),Ke=(r(171),r(9)),$e=r(22);function et(e){return(et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function rt(e){return(rt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function nt(e,t){return(nt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ot(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}Ke.a;var it=function(e){function t(e){var r,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(r=!(o=rt(t).call(this,e))||"object"!==et(o)&&"function"!=typeof o?ot(n):o).parentElement=null,r.inputElement=null,r._timer=null,r._prevValue="",r.state={target:null,callback:null},r.onContextMenu=r.onContextMenu.bind(ot(ot(r))),r.onFormat=r.onFormat.bind(ot(ot(r))),r.onSubmit=r.onSubmit.bind(ot(ot(r))),r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&nt(e,t)}(t,ce.a.Component),r=t,(n=[{key:"openEditor",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(!this.inputElement||!this.parentElement)throw new Error("Trying to open editor that has not yet mounted");this.setState(function(t,r){return{target:e,callback:o}});var i=e instanceof l.a?e.getEdgeLabel():e.getNodeLabel();this.inputElement.resetValue(i,function(){r&&t.inputElement.setValue(r),t._prevValue=i,t.parentElement.focus(),t.inputElement.focus(n)})}},{key:"closeEditor",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.inputElement||!this.parentElement)throw new Error("Trying to open editor that has not yet mounted");var t=this.state.target;if(null!==t){if(e){var r=this.inputElement.value;t instanceof l.a?t.setEdgeLabel(r):t.setNodeLabel(r)}else{(t instanceof l.a?t.getEdgeLabel():t.getNodeLabel())||(t instanceof l.a?t.setEdgeLabel(null):t.setNodeLabel(null),t instanceof l.a?this.props.graphController.getGraph().deleteEdge(t):this.props.graphController.getGraph().deleteNode(t))}this.setState({target:null}),this.state.callback&&this.state.callback()}this.inputElement.blur()}},{key:"hasFocus",value:function(){return this.inputElement.hasFocus()}},{key:"isEditorOpen",value:function(){return null!==this.state.target}},{key:"onContextMenu",value:function(e){e.preventDefault(),e.stopPropagation()}},{key:"appendSymbol",value:function(e){this.inputElement.appendValue(e,Ke.b),this.inputElement.focus(!1)}},{key:"onSubmit",value:function(e,t){e!=t||this.closeEditor(!1)}},{key:"onFormat",value:function(e){return this.props.graphController.getGraphLabeler().getEdgeLabelFormatter().call(null,e)}},{key:"render",value:function(){var e=this,t=this.props.inputController.getInputAdapter().getViewport(),r=(this.props.graphController,this.props.machineController,this.props.screen),n={visibility:"hidden"},o=this.state.target;if(o){n.visibility="visible";var i=o instanceof l.a?o.getCenterPoint():o,a=function(e,t,r){var n=e.getScreenCTM();return{x:t*n.a+n.e,y:r*n.d+n.f}}(r,i.x+t.getOffsetX(),i.y+t.getOffsetY()),u=a.x,s=a.y+-64+-36,c=-this.parentElement.offsetWidth/2,f=-this.parentElement.offsetHeight/2;n.top=s+f+"px",n.left=u+c+"px"}return ce.a.createElement("div",{className:"bubble",id:"label-editor",ref:function(t){return e.parentElement=t},tabIndex:"0",style:n,onContextMenu:this.onContextMenu,onFocus:function(t){clearTimeout(e._timer)},onBlur:function(t){e._timer=setTimeout(function(){return e.closeEditor(!0)},10)}},ce.a.createElement($e.a,{className:"label-editor-input",ref:function(t){return e.inputElement=t},formatter:this.onFormat,onSubmit:this.onSubmit,captureOnExit:"none",multiline:!0}))}}])&&tt(r.prototype,n),o&&tt(r,o),t}();function at(e){return(at="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ut(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function lt(e,t,r){return(lt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=st(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function st(e){return(st=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ct(e,t){return(ct=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ft(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var pt=[de],ht=[new b],yt=function(e){function t(e){var r,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,r=!(o=st(t).call(this,e))||"object"!==at(o)&&"function"!=typeof o?ft(n):o;var i=e.getInputAdapter();return r._inputController=new j(ft(ft(r)),i),r._graphController=new W(ft(ft(r))),r._machineController=new le(ft(ft(r))),r}var r,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ct(e,t)}(t,n["b"]),r=t,(o=[{key:"getLabelEditor",value:function(){return it}},{key:"initialize",value:function(e){lt(st(t.prototype),"initialize",this).call(this,e)}},{key:"destroy",value:function(e){lt(st(t.prototype),"destroy",this).call(this,e)}},{key:"update",value:function(e){lt(st(t.prototype),"update",this).call(this,e)}},{key:"getRenderer",value:function(e){switch(e){case"graph":return Ie;case"graphoverlay":return Be;case"viewport":return He}return null}},{key:"getInputController",value:function(){return this._inputController}},{key:"getGraphController",value:function(){return this._graphController}},{key:"getMachineController",value:function(){return this._machineController}},{key:"getGraphExporters",value:function(){return ht}},{key:"getModuleVersion",value:function(){return"0.0.1"}},{key:"getModulePanels",value:function(){return pt}},{key:"getModuleName",value:function(){return"default"}},{key:"getLocalizedModuleName",value:function(){return"Default"}}])&&ut(r.prototype,o),i&&ut(r,i),t}();t.default=yt}}]);
//# sourceMappingURL=sourcemap/module_default.bundle.js.map