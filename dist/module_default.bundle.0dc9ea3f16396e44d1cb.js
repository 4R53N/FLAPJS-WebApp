(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{159:function(e,t,r){"use strict";r.r(t);var n=r(16),o=r(13),i=r(38),a=r(32),l=r(18),u=r(19),s=r(31),c=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=e.nodes||[],n=Math.min(r.length||0,e.nodeCount||0),o=e.edges||[],i=Math.min(o.length||0,e.edgeCount||0),c=e.quad||!1;t?t.clear():t=new a.a(l.a,c?s.a:u.a);for(var f=new Map,p=0;p<n;++p){var h=r[p];if(h){var y=t.createNode(h.x||0,h.y||0,h.id);y.setNodeLabel(h.label||""),f.set(p,y)}}for(var g=0;g<i;++g){var d=o[g];if(d){var v=f.get(d.from)||null;if(v){var b=f.get(d.to)||null,m=t.createEdge(v,b,d.id);if(m.setEdgeLabel(d.label||""),m instanceof s.a){var E=d.quad||{};m.setQuadratic(E.radians||0,E.length||0)}}}}return t},f=function(e){for(var t=e.getNodes()||[],r=t.length||0,n=e.getEdges()||[],o=n.length||0,i=new Array(r),a=new Map,l=0;l<r;++l){var u=t[l];if(u){var c=u.getGraphElementID();a.set(u,l),i[l]={id:c,x:u.x||0,y:u.y||0,label:u.getNodeLabel()||""}}}for(var f=!1,p=new Array(o),h=0;h<o;++h){var y=n[h];if(y){var g=y.getGraphElementID(),d=y.getQuadratic()||{},v=y.getSourceNode(),b=y.getDestinationNode(),m=a.has(v)?a.get(v):-1,E=a.has(b)?a.get(b):-1;p[h]={id:g,from:m,to:E,label:y.getEdgeLabel()||""},y instanceof s.a&&(f=!0,p[h].quad={radians:d.radians||0,length:d.length||0})}}return{nodeCount:r,nodes:i,edgeCount:o,edges:p,hasQuad:f,_version:"1.0.0"}},p=r(11);function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function g(e,t){return!t||"object"!==h(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var b=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),g(this,d(t).call(this))}var r,n,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(t,o["a"]),r=t,(n=[{key:"fromJSON",value:function(e,t){var r=t.getGraphController().getGraph();"_metadata"in e&&e._metadata;return c(e.graphData,r)}},{key:"toJSON",value:function(e,t){t.getGraphController();var r={};return r._metadata={module:t.getModuleName(),version:"0.3.2:"+t.getModuleVersion(),timestamp:(new Date).toString()},r.graphData=e,r}},{key:"importFromData",value:function(e,t){this.fromJSON(e,t)}},{key:"exportToData",value:function(e){var t=e.getGraphController().getGraph(),r=f(t);return this.toJSON(r,e)}},{key:"importFromFile",value:function(e,t){var r=this;return new Promise(function(n,o){var i=e.name;if(!i.endsWith(r.getFileType()))throw new Error("Trying to import invalid file type for '"+r.getFileType()+"': "+i);var a=new FileReader;a.onload=function(e){var l=t.getGraphController(),u=e.target.result,s=(i.substring(0,i.length-r.getFileType().length-1),l.getGraph());l.emit("userPreImportGraph",s);try{var c=JSON.parse(u);r.fromJSON(c,t),l.emit("userImportGraph",s),n()}catch(e){a.abort(),o(e)}finally{l.emit("userPostImportGraph",s)}},a.onerror=function(e){o(new Error("Unable to import file: "+e.target.error.code))},a.readAsText(e)})}},{key:"exportToFile",value:function(e,t){var r=t.getGraphController().getGraph(),n=f(r),o=this.toJSON(n,t),i=JSON.stringify(o);Object(p.b)(e+"."+this.getFileType(),i)}},{key:"doesSupportData",value:function(){return!0}},{key:"doesSupportFile",value:function(){return!0}},{key:"canImport",value:function(){return!0}},{key:"getTitle",value:function(){return"Save machine to JSON"}},{key:"getLabel",value:function(){return"Save machine to JSON"}},{key:"getFileType",value:function(){return"json"}},{key:"getIconClass",value:function(){return i.a}}])&&y(r.prototype,n),a&&y(r,a),t}(),m=r(39),E=r(1);function w(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var S=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.selectionBox={fromX:0,fromY:0,toX:0,toY:0,visible:!1},this.targets=[],this.target=null,this.targetType="",this.initialTarget=null,this.initialTargetType=""}var t,r,n;return t=e,(r=[{key:"setInitialTarget",value:function(e,t){this.initialTarget=e,this.initialTargetType=t}},{key:"updateTarget",value:function(e,t,r){return(this.target=this.getEdgeByEndPointAt(e,t,r))?this.targetType="endpoint":(this.target=this.getNodeAt(e,t,r))?this.targetType="node":(this.target=this.getEdgeAt(e,t,r))?this.targetType="edge":(this.target=null,this.targetType="none"),this.target}},{key:"clearTarget",value:function(){this.target=null,this.targetType="none"}},{key:"hasTarget",value:function(){return null!=this.target}},{key:"getNodeAt",value:function(e,t,r){var n=!0,o=!1,i=void 0;try{for(var a,l=e.getNodes()[Symbol.iterator]();!(n=(a=l.next()).done);n=!0){var u=a.value,s=t-u.x,c=r-u.y;if(s*s+c*c<E.a.NODE_RADIUS_SQU)return u}}catch(e){o=!0,i=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw i}}return null}},{key:"getEdgeAt",value:function(e,t,r){var n={x:0,y:0},o=!0,i=!1,a=void 0;try{for(var l,u=e.getEdges()[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var s=l.value;s.getCenterPoint(n);var c=t-n.x,f=r-n.y;if(c*c+f*f<E.a.EDGE_RADIUS_SQU)return s}}catch(e){i=!0,a=e}finally{try{o||null==u.return||u.return()}finally{if(i)throw a}}return null}},{key:"getEdgeByEndPointAt",value:function(e,t,r){var n={x:0,y:0},o=!0,i=!1,a=void 0;try{for(var l,u=e.getEdges()[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var s=l.value;s.getEndPoint(n);var c=t-n.x,f=r-n.y;if(c*c+f*f<E.a.ENDPOINT_RADIUS_SQU)return s}}catch(e){i=!0,a=e}finally{try{o||null==u.return||u.return()}finally{if(i)throw a}}return null}},{key:"getSelectionBox",value:function(){return this.selectionBox}},{key:"getSelection",value:function(e){if(arguments.length>1&&void 0!==arguments[1]&&arguments[1]){var t=this.selectionBox,r=Math.max(t.toX,t.fromX),n=Math.max(t.toY,t.fromY),o=Math.min(t.toX,t.fromX),i=Math.min(t.toY,t.fromY);this.clearSelection(),function(e,t,r,n,o,i){var a=Math.min(t,n),l=Math.min(r,o),u=Math.max(t,n),s=Math.max(r,o),c=!0,f=!1,p=void 0;try{for(var h,y=e.getNodes()[Symbol.iterator]();!(c=(h=y.next()).done);c=!0){var g=h.value;g.x>=a&&g.x<u&&g.y>=l&&g.y<s&&i.push(g)}}catch(e){f=!0,p=e}finally{try{c||null==y.return||y.return()}finally{if(f)throw p}}}(e,o,i,r,n,this.targets)}return this.targets}},{key:"hasSelection",value:function(){return this.targets.length>0}},{key:"clearSelection",value:function(){this.targets.length=0}},{key:"isTargetInSelection",value:function(e){return this.targets.includes(e||this.target)}},{key:"isTarget",value:function(e){return this.target==e}},{key:"beginSelection",value:function(e,t,r){var n=this.selectionBox;n.fromX=n.toX=t,n.fromY=n.toY=r,this.clearSelection(),n.visible=!0}},{key:"updateSelection",value:function(e,t,r){var n=this.selectionBox;n.toX=t,n.toY=r,this.getSelection(e,!0)}},{key:"endSelection",value:function(e,t,r){var n=this.selectionBox;n.toX=t,n.toY=r,this.getSelection(e,!0),n.visible=!1}},{key:"isSelecting",value:function(){return this.selectionBox.visible}}])&&w(t.prototype,r),n&&w(t,n),e}();function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function P(e,t){return!t||"object"!==O(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function k(e,t,r){return(k="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=T(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function T(e){return(T=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function N(e,t){return(N=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var C=!0,x=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=P(this,T(t).call(this,e,r)))._picker=new S,n._graphController=null,n.prevPointerX=0,n.prevPointerY=0,n.isNewEdge=!1,n.shouldDestroyPointlessEdges=C,n._swapMouseScheme=!0,//!navigator.platform.startsWith("Mac");
n._trashMode=!1,n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&N(e,t)}(t,m["a"]),r=t,(n=[{key:"initialize",value:function(e){k(T(t.prototype),"initialize",this).call(this,e),this._graphController=e.getGraphController()}},{key:"destroy",value:function(e){k(T(t.prototype),"destroy",this).call(this,e)}},{key:"update",value:function(e){var t=this._graphController.getGraph(),r=this._picker,n=this._inputAdapter.getPointerX(),o=this._inputAdapter.getPointerY();n==this.prevPointerX&&o==this.prevPointerY||(this.prevPointerX=n,this.prevPointerY=o,r.updateTarget(t,n,o),r.hasTarget()?document.body.style.cursor="pointer":document.body.style.cursor="auto")}},{key:"onPreInputEvent",value:function(e){var r=this._graphController.getGraph(),n=this.getPicker();n.updateTarget(r,e.x,e.y),n.setInitialTarget(n.target,n.targetType);var o=n.initialTarget,i=n.initialTargetType;return n.hasSelection()&&("node"==i&&n.isTargetInSelection(o)||n.clearSelection()),k(T(t.prototype),"onPreInputEvent",this).call(this,e)}},{key:"onInputEvent",value:function(e){var r=this._graphController,n=e.x,o=e.y,i=r.getGraph(),a=this.getPicker();a.updateTarget(i,n,o);var l=a.initialTarget,u=a.initialTargetType;return this.isTrashMode()?"node"===u?(r.prevX=l.x,r.prevY=l.y,a.hasSelection()?r.deleteSelectedNodes(l):r.deleteTargetNode(l),!0):("edge"===u||"endpoint"===u)&&(r.deleteTargetEdge(l),!0):"node"===u?(r.openLabelEditor(l,n,o),!0):"edge"===u?(r.openLabelEditor(l,n,o),!0):"none"!==u||k(T(t.prototype),"onInputEvent",this).call(this,e)}},{key:"onDblInputEvent",value:function(e){var t=this._graphController,r=e.x,n=e.y;return this.isTrashMode()?(t.emit("tryCreateWhileTrash"),!0):(t.createNode(r,n),!0)}},{key:"onDragStart",value:function(e){var r=this._graphController,n=r.getGraph(),o=this.getPicker(),i=e.x,a=e.y,u=o.initialTarget,c=o.initialTargetType;this.getInputAdapter().getViewport();if(this.isMoveMode()){if(this.isTrashMode())return r.emit("tryCreateWhileTrash"),!1;if(this.isNewEdge=!1,"edge"===c&&u.isPlaceholder())return!1;if("node"===c){if(!(u instanceof l.a))throw new Error("Invalid target "+u+" for type '"+c+"'. Must be an instance of Node.");return r.prevX=u.x,r.prevY=u.y,!0}if("edge"===c){if(!(u instanceof s.a))throw new Error("Invalid target "+u+" for type '"+c+"'. Must be an instance of Edge.");if(u.isPlaceholder())return!1;var f=u.getQuadratic();return r.prevQuad.radians=f.radians,r.prevQuad.length=f.length,!0}if("initial"===c)return this.ghostInitialMarker=e,!0}else{if("node"===c){if(this.isTrashMode())return r.emit("tryCreateWhileTrash"),!1;var p=n.createEdge(u,e);p.setEdgeLabel(r.getGraphLabeler().getDefaultEdgeLabel()),o.setInitialTarget(p,"endpoint"),this.isNewEdge=!0;var h=p.getQuadratic();return r.prevQuad.radians=h.radians,r.prevQuad.length=h.length,!0}if("edge"==c)return!1;if("none"===c)return o.beginSelection(n,i,a),!0}if("endpoint"===c){if(!(u instanceof s.a))throw new Error("Invalid target "+u+" for type '"+c+"'. Must be an instance of Edge.");var y=u.getQuadratic();return r.prevQuad.radians=y.radians,r.prevQuad.length=y.length,r.prevEdgeTo=u.getDestinationNode(),this.isNewEdge=!this.isMoveMode(),!0}return k(T(t.prototype),"onDragStart",this).call(this,e)}},{key:"onDragMove",value:function(e){var r=this._graphController,n=r.getGraph(),o=this.getPicker(),i=e.x,a=e.y,l=o.initialTarget,u=o.initialTargetType;if(this.isMoveMode()){if("node"===u)return o.hasSelection()?r.moveMultipleNodesTo(e,o.getSelection(n),i,a):r.moveNodeTo(e,l,i,a),!0;if("edge"===u)return r.moveEdgeTo(e,l,i,a),!0;if("endpoint"===u)return r.moveEndpointTo(e,l,i,a),!0;if("initial"===u){var s=o.getNodeAt(n,i,a)||e;return this.ghostInitialMarker=s,!0}if("none"!==u)throw new Error("Unknown target type '"+u+"'.")}else{if(this.isNewEdge)return r.moveEndpointTo(e,l,i,a),!0;if(o.isSelecting())return o.updateSelection(n,i,a),!0}return k(T(t.prototype),"onDragMove",this).call(this,e)}},{key:"onDragStop",value:function(e){var r=this._graphController,n=r.getGraph(),o=this.getPicker(),i=e.x,a=e.y;o.updateTarget(n,i,a);var u=o.initialTarget,s=o.initialTargetType;if(this.isMoveMode()||this.isNewEdge){if("node"===s){if(this.isTrashMode())return o.hasSelection()?r.deleteSelectedNodes(u):r.deleteTargetNode(u),!0;if(o.hasSelection()){var c=i-r.prevX,f=a-r.prevY;r.emit("nodeMoveAll",n,o.getSelection(n),c,f)}else r.emit("nodeMove",n,u,i,a,r.prevX,r.prevY);return!0}if("edge"===s)return this.isTrashMode()?r.deleteTargetEdge(u):r.emit("edgeMove",n,u,u.getQuadratic(),r.prevQuad),!0;if(this.isNewEdge||"endpoint"===s){if(this.isTrashMode())return r.deleteTargetEdge(u),!0;if(u.getDestinationNode()instanceof l.a){var p=u;return p!==u?(r.openLabelEditor(p,i,a,p.getEdgeLabel(),!1),n.deleteEdge(u),!0):(this.isNewEdge?r.openLabelEditor(u,i,a,null,!0,function(){r.emit("userPostCreateEdge",n,u)}):r.openLabelEditor(u,i,a),this.isNewEdge?(this.isNewEdge=!1,r.emit("userCreateEdge",n,u)):null!==r.prevEdgeTo&&r.emit("edgeDestination",n,u,u.getDestinationNode(),r.prevEdgeTo,r.prevQuad),!0)}return this.shouldDestroyPointlessEdges?(this.isNewEdge?n.deleteEdge(u):r.deleteTargetEdge(u),!0):(u.changeDestinationNode(null),u.getEdgeLabel().length<=0&&r.openLabelEditor(u,i,a),!0)}if("none"!==s)throw new Error("Unknown target type '"+s+"'.")}else if(o.isSelecting())return o.endSelection(n,i,a),!0;return k(T(t.prototype),"onDragStop",this).call(this,e)}},{key:"onPostInputEvent",value:function(e){var r=this._graphController.getGraph(),n=this.getPicker();return n.clearTarget(),n.updateTarget(r,e.x,e.y),k(T(t.prototype),"onPostInputEvent",this).call(this,e)}},{key:"onZoomChange",value:function(e,r,n){return k(T(t.prototype),"onZoomChange",this).call(this,e,r,n)}},{key:"setTrashMode",value:function(e){this._trashMode=e}},{key:"isTrashMode",value:function(){return this._trashMode}},{key:"setInputScheme",value:function(e){this._swapMouseScheme=!e}},{key:"getInputScheme",value:function(){return this._swapMouseScheme}},{key:"isMoveMode",value:function(){var e=this._inputAdapter.isAltInput();return this._swapMouseScheme?!e:e}},{key:"isDragging",value:function(){return this._inputAdapter.isDragging()}},{key:"isActionMode",value:function(e){return this._inputAdapter.isPointerActive()?e.isNewEdge||!this.isMoveMode():!this._swapMouseScheme}},{key:"getPicker",value:function(){return this._picker}}])&&_(r.prototype,n),o&&_(r,o),t}(),j=r(33),M=r(14),D=r(34);function G(e){return(G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function I(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function L(e,t){return!t||"object"!==G(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function A(e){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function R(e,t){return(R=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function X(e){return e||""}var Y=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),L(this,A(t).call(this))}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&R(e,t)}(t,D["a"]),r=t,(n=[{key:"getNodeLabelFormatter",value:function(){return X}},{key:"getEdgeLabelFormatter",value:function(){return X}}])&&I(r.prototype,n),o&&I(r,o),t}();function Q(e){return(Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function F(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function B(e,t){return!t||"object"!==Q(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function U(e,t,r){return(U="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=J(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function J(e){return(J=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function V(e,t){return(V=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var z=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=B(this,J(t).call(this,e,new a.a(l.a,s.a),new Y))).inputController=null,r.machineController=null,r.labelEditorElement=null,r.prevQuad={radians:0,length:0,x:0,y:0},r.prevEdgeTo=null,r.prevX=0,r.prevY=0,r.registerEvent("userCreateNode"),r.registerEvent("userPreCreateNode"),r.registerEvent("userPostCreateNode"),r.registerEvent("userDeleteNodes"),r.registerEvent("userPreDeleteNodes"),r.registerEvent("userPostDeleteNodes"),r.registerEvent("userDeleteEdge"),r.registerEvent("userPreDeleteEdge"),r.registerEvent("userPostDeleteEdge"),r.registerEvent("userCreateEdge"),r.registerEvent("userPostCreateEdge"),r.registerEvent("userRenameNode"),r.registerEvent("userChangeLayout"),r.registerEvent("userPreChangeLayout"),r.registerEvent("userPostChangeLayout"),r.registerEvent("userImportGraph"),r.registerEvent("userPreImportGraph"),r.registerEvent("userPostImportGraph"),r.registerEvent("nodeMove"),r.registerEvent("nodeMoveAll"),r.registerEvent("nodeInitial"),r.registerEvent("edgeDestination"),r.registerEvent("edgeMove"),r.registerEvent("edgeLabel"),r.registerEvent("tryCreateWhileTrash"),r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&V(e,t)}(t,j["a"]),r=t,(n=[{key:"initialize",value:function(e){U(J(t.prototype),"initialize",this).call(this,e),this.inputController=e.getInputController(),this.machineController=e.getMachineController()}},{key:"destroy",value:function(e){U(J(t.prototype),"destroy",this).call(this,e)}},{key:"renameNode",value:function(e,t){var r=e.getNodeLabel(),n=e.getNodeCustom();e.setNodeLabel(t),e.setNodeCustom(!0),this.emit("userRenameNode",this.getGraph(),e,t,r,n)}},{key:"createNode",value:function(e,t){var r=this.getGraphLabeler().getDefaultNodeLabel();void 0===e&&(e=Math.random()*E.a.SPAWN_RADIUS*2-E.a.SPAWN_RADIUS),void 0===t&&(t=Math.random()*E.a.SPAWN_RADIUS*2-E.a.SPAWN_RADIUS),this.emit("userPreCreateNode",this.getGraph(),r,e,t);var n=this.getGraph().createNode(e,t);return n.setNodeLabel(r),this.emit("userCreateNode",this.getGraph(),n),this.emit("userPostCreateNode",this.getGraph(),n),n}},{key:"deleteSelectedNodes",value:function(e){var t=this.inputController.getPicker(),r=t.getSelection(this.getGraph()).slice();this.emit("userPreDeleteNodes",this.getGraph(),e,r,this.prevX,this.prevY);var n=!0,o=!1,i=void 0;try{for(var a,l=r[Symbol.iterator]();!(n=(a=l.next()).done);n=!0){var u=a.value;this.getGraph().deleteNode(u)}}catch(e){o=!0,i=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw i}}t.clearSelection(),this.emit("userDeleteNodes",this.getGraph(),e,r,this.prevX,this.prevY),this.emit("userPostDeleteNodes",this.getGraph(),e,r,this.prevX,this.prevY)}},{key:"deleteTargetNode",value:function(e){this.emit("userPreDeleteNodes",this.getGraph(),e,[e],this.prevX,this.prevY),this.getGraph().deleteNode(e),this.emit("userDeleteNodes",this.getGraph(),e,[e],this.prevX,this.prevY),this.emit("userPostDeleteNodes",this.getGraph(),e,[e],this.prevX,this.prevY)}},{key:"deleteTargetNodes",value:function(e){if(e&&!(e.length<=0)){this.emit("userPreDeleteNodes",this.getGraph(),e[0],e,this.prevX,this.prevY);var t=this.getGraph(),r=!0,n=!1,o=void 0;try{for(var i,a=e[Symbol.iterator]();!(r=(i=a.next()).done);r=!0){var l=i.value;t.deleteNode(l)}}catch(e){n=!0,o=e}finally{try{r||null==a.return||a.return()}finally{if(n)throw o}}this.emit("userDeleteNodes",this.getGraph(),e[0],e,this.prevX,this.prevY),this.emit("userPostDeleteNodes",this.getGraph(),e[0],e,this.prevX,this.prevY)}}},{key:"deleteTargetEdge",value:function(e){this.emit("userPreDeleteEdge",this.getGraph(),e,this.prevEdgeTo,this.prevQuad),this.getGraph().deleteEdge(e),this.emit("userDeleteEdge",this.getGraph(),e,this.prevEdgeTo,this.prevQuad),this.emit("userPostDeleteEdge",this.getGraph(),e,this.prevEdgeTo,this.prevQuad)}},{key:"deleteTargetEdges",value:function(e){if(e&&!(e.length<=0)){var t=!0,r=!1,n=void 0;try{for(var o,i=e[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var a=o.value;this.deleteTargetEdge(a)}}catch(e){r=!0,n=e}finally{try{t||null==i.return||i.return()}finally{if(r)throw n}}}}},{key:"moveNodeTo",value:function(e,t,r,n){var o=!0,i=!1,a=void 0;try{for(var l,u=this.getGraph().getNodes()[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var s=l.value;if(t!==s){var c=t.getNodeSize(),f=r-s.x,p=n-s.y,h=Math.atan2(p,f),y=2*c,g=s.x+Math.cos(h)*y-r,d=s.y+Math.sin(h)*y-n;f*f+p*p<c*c*4&&(r+=g,n+=d)}}}catch(e){i=!0,a=e}finally{try{o||null==u.return||u.return()}finally{if(i)throw a}}t.x=r,t.y=n}},{key:"moveMultipleNodesTo",value:function(e,t,r,n){var o=e.getInputEventPosition(),i=r-o.x,a=n-o.y,l=!0,u=!1,s=void 0;try{for(var c,f=t[Symbol.iterator]();!(l=(c=f.next()).done);l=!0){var p=c.value;p.x+=i,p.y+=a}}catch(e){u=!0,s=e}finally{try{l||null==f.return||f.return()}finally{if(u)throw s}}e.changeInputEventPosition(r,n)}},{key:"moveEdgeTo",value:function(e,t,r,n){t.setQuadraticByCoords(r,n)}},{key:"moveEndpointTo",value:function(e,t,r,n){var o=this.inputController.getPicker().getNodeAt(this.getGraph(),r,n)||e;if(t.changeDestinationNode(o),t.isSelfLoop()){var i=t.getSourceNode(),a=i.x-r,l=i.y-n,u=Math.atan2(l,a)+Math.PI;t.setQuadratic(u)}else t.setQuadratic(this.prevQuad.radians,this.prevQuad.length)}},{key:"openLabelEditor",value:function(e,t,r){var n=this,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;if(this.labelEditorElement){var l=o||e instanceof u.a?e.getEdgeLabel():e.getNodeLabel();this.labelEditorElement.openEditor(e,o,i,function(){var t=e instanceof u.a?e.getEdgeLabel():e.getNodeLabel();l&&l.length>0&&t!=l&&n.emit(e instanceof u.a?"edgeLabel":"nodeLabel",n.getGraph(),e,t,l),a&&a()})}else a&&a()}},{key:"focusOnNode",value:function(e){this.inputController.getInputAdapter().getViewport().setOffset(-e.x,-e.y)}},{key:"focusOnEdge",value:function(e){var t=e.getCenterPoint();this.inputController.getInputAdapter().getViewport().setOffset(-t.x,-t.y)}},{key:"focusOnNodes",value:function(e){var t=e.length,r=0,n=0,o=!0,i=!1,a=void 0;try{for(var l,u=e[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var s=l.value;r+=s.x,n+=s.y}}catch(e){i=!0,a=e}finally{try{o||null==u.return||u.return()}finally{if(i)throw a}}this.inputController.getInputAdapter().getViewport().setOffset(-r/t,-n/t)}}])&&F(r.prototype,n),o&&F(r,o),t}();M.a.mixin(z);var W=z,q=r(35);function Z(e){return(Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function H(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function K(e,t){return!t||"object"!==Z(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function $(e){return($=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ee(e,t){return(ee=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var te=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=K(this,$(t).call(this,e)))._machineName="",r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ee(e,t)}(t,q["a"]),r=t,(n=[{key:"setMachineName",value:function(e){this._machineName=e}},{key:"getMachineName",value:function(){return this._machineName}}])&&H(r.prototype,n),o&&H(r,o),t}(),re=r(0),ne=r.n(re);function oe(e){return(oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ie(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ae(e,t){return!t||"object"!==oe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function le(e){return(le=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ue(e,t){return(ue=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var se=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=ae(this,le(t).call(this,e))).container=null,r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ue(e,t)}(t,ne.a.Component),r=t,(n=[{key:"render",value:function(){var e=this;return ne.a.createElement("div",{className:"panel-container "+this.props.className,id:"about",ref:function(t){return e.container=t},style:this.props.style},ne.a.createElement("div",{className:"panel-title"},ne.a.createElement("h1",null,"Default")),ne.a.createElement("div",{className:"panel-content"},ne.a.createElement("p",null,"Brought to you with ❤ by the Flap.js team."),ne.a.createElement("p",null,"<- Tap on a tab to begin!")),ne.a.createElement("div",{className:"panel-bottom"}))}}])&&ie(r.prototype,n),o&&ie(r,o),t}();r(161);function ce(e){return(ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function pe(e,t){return!t||"object"!==ce(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function he(e){return(he=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ye(e,t){return(ye=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ge=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),pe(this,he(t).call(this,e))}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ye(e,t)}(t,ne.a.Component),r=t,(n=[{key:"render",value:function(){var e=this.props.node,t=this.props.fill||"#FFFFFF",r=this.props.stroke||"#000000",n=e.getNodeLabel()||"";return ne.a.createElement("g",{className:"graph-node-container"},ne.a.createElement("circle",{className:"graph-node",cx:e.x,cy:e.y,r:e.getNodeSize(),fill:t,stroke:r}),"//Label",ne.a.createElement("text",{className:"graph-node-label",x:e.x,y:e.y+4,pointerEvents:"none",style:{userSelect:"none",fontSize:1-Math.min(Math.max(n.length-2,0)/6,.5)+"em"},textAnchor:"middle"},n))}}])&&fe(r.prototype,n),o&&fe(r,o),t}();function de(e){return(de="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ve(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function be(e,t){return!t||"object"!==de(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function me(e){return(me=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ee(e,t){return(Ee=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var we=Math.PI/6,Se=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),be(this,me(t).call(this,e))}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ee(e,t)}(t,ne.a.Component),r=t,(n=[{key:"render",value:function(){var e=this.props.stroke||"#000000",t=this.props.edge,r=t.getStartPoint(),n=t.getEndPoint(),o=t.getCenterPoint(),i=t.getEdgeLabel(),a=(t.getQuadratic(),t.getQuadraticAsCoords()),l=t.getEdgeDirection(),u=a.y>0,s=null,c=0;if(t.isQuadratic()){var f=o.x+a.x,p=o.y+a.y;c=Math.atan2(f-n.x,p-n.y)+Math.PI,s="Q "+f+" "+p+" "+n.x+" "+n.y}else c=Math.atan2(r.x-n.x,r.y-n.y)+Math.PI,s="L "+n.x+" "+n.y;var h=i?i.split("\n"):[],y=o&&o.x||0,g=o&&o.y||0;return ne.a.createElement("g",{className:"graph-edge-container"},"//Draw lines",ne.a.createElement("path",{className:"graph-edge",id:"edge:"+t.getGraphElementID(),d:"M "+r.x+" "+r.y+" "+s+" M "+(n.x-10*Math.sin(c-we))+" "+(n.y-10*Math.cos(c-we))+" L "+n.x+" "+n.y+" L "+(n.x-10*Math.sin(c+we))+" "+(n.y-10*Math.cos(c+we)),fill:"none",stroke:e}),ne.a.createElement("g",{transform:"translate("+y+","+g+") rotate("+180*l/Math.PI+")"},h.length>0&&h.map(function(e,t){var r=-15*(t+1);return ne.a.createElement("text",{key:e+"."+t,className:"graph-edge-label",transform:"translate(0, "+r+")"+(u?" scale(-1, -1)":""),alignmentBaseline:"central",pointerEvents:"none",style:{userSelect:"none"},textAnchor:"middle"},e)})))}}])&&ve(r.prototype,n),o&&ve(r,o),t}();function Oe(e){return(Oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Pe(e,t){return!t||"object"!==Oe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ke(e){return(ke=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Te(e,t){return(Te=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ne=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Pe(this,ke(t).call(this,e))}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Te(e,t)}(t,ne.a.Component),r=t,(n=[{key:"render",value:function(){var e=this.props.currentModule.getGraphController().getGraph();return ne.a.createElement("g",null,e.getNodes().map(function(e,t){return ne.a.createElement(ge,{key:e.getGraphElementID()||t,node:e})}),e.getEdges().map(function(e,t){return ne.a.createElement(Se,{key:e.getGraphElementID()||t,edge:e})}))}}])&&_e(r.prototype,n),o&&_e(r,o),t}(),Ce=r(36),xe=r(12);function je(e){return(je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Me(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function De(e,t){return!t||"object"!==je(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ge(e){return(Ge=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ie(e,t){return(Ie=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Le=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),De(this,Ge(t).call(this,e))}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ie(e,t)}(t,ne.a.Component),r=t,(n=[{key:"render",value:function(){this.props.parent;var e=this.props.currentModule,t=e.getGraphController(),r=e.getInputController(),n=t.getGraph(),o=r.getPicker(),i=o.getSelectionBox();return ne.a.createElement("g",null,o.hasSelection()&&o.getSelection(n).map(function(e,t){return ne.a.createElement(xe.a,{key:e.getGraphElementID(),className:r.isTrashMode()?"highlight-error":"highlight-select",target:e,type:"node"})}),ne.a.createElement(Ce.a,{visible:i.visible,fromX:i.fromX,fromY:i.fromY,toX:i.toX,toY:i.toY}),o.hasTarget()&&!o.isTargetInSelection()&&ne.a.createElement(xe.a,{className:r.isTrashMode()?"highlight-error":"highlight-select",target:o.target,type:o.targetType}))}}])&&Me(r.prototype,n),o&&Me(r,o),t}(),Ae=r(37),Re=r(40);function Xe(e){return(Xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ye(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Qe(e,t){return!t||"object"!==Xe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Fe(e){return(Fe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Be(e,t){return(Be=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ue=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Qe(this,Fe(t).call(this,e))}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Be(e,t)}(t,ne.a.Component),r=t,(n=[{key:"render",value:function(){var e=this.props.parent,t=this.props.currentModule,r=this.props.screen,n=t.getInputController(),o=t.getGraphController(),i=t.getMachineController(),a=t.getLabelEditor();return ne.a.createElement("span",null,a&&ne.a.createElement(a,{ref:function(e){return o.labelEditorElement=e},inputController:n,graphController:o,machineController:i,screen:r}),ne.a.createElement("span",null,ne.a.createElement("div",{className:"anchor-bottom-left",style:{width:"100%"}},ne.a.createElement(Re.a,{inputController:n,graphController:o})),ne.a.createElement("div",{className:"anchor-bottom-right"},ne.a.createElement(Ae.a,{inputController:n,viewport:e}))))}}])&&Ye(r.prototype,n),o&&Ye(r,o),t}(),Je=(r(162),r(7)),Ve=r(20);function ze(e){return(ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function We(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function qe(e){return(qe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ze(e,t){return(Ze=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function He(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}Je.a;var Ke=function(e){function t(e){var r,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(r=!(o=qe(t).call(this,e))||"object"!==ze(o)&&"function"!=typeof o?He(n):o).parentElement=null,r.inputElement=null,r._timer=null,r._prevValue="",r.state={target:null,callback:null},r.onContextMenu=r.onContextMenu.bind(He(He(r))),r.onFormat=r.onFormat.bind(He(He(r))),r.onSubmit=r.onSubmit.bind(He(He(r))),r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ze(e,t)}(t,ne.a.Component),r=t,(n=[{key:"openEditor",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(!this.inputElement||!this.parentElement)throw new Error("Trying to open editor that has not yet mounted");this.setState(function(t,r){return{target:e,callback:o}});var i=e instanceof u.a?e.getEdgeLabel():e.getNodeLabel();this.inputElement.resetValue(i,function(){r&&t.inputElement.setValue(r),t._prevValue=i,t.parentElement.focus(),t.inputElement.focus(n)})}},{key:"closeEditor",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.inputElement||!this.parentElement)throw new Error("Trying to open editor that has not yet mounted");var t=this.state.target;if(null!==t){if(e){var r=this.inputElement.value;t instanceof u.a?t.setEdgeLabel(r):t.setNodeLabel(r)}else{(t instanceof u.a?t.getEdgeLabel():t.getNodeLabel())||(t instanceof u.a?t.setEdgeLabel(null):t.setNodeLabel(null),t instanceof u.a?this.props.graphController.getGraph().deleteEdge(t):this.props.graphController.getGraph().deleteNode(t))}this.setState({target:null}),this.state.callback&&this.state.callback()}this.inputElement.blur()}},{key:"hasFocus",value:function(){return this.inputElement.hasFocus()}},{key:"isEditorOpen",value:function(){return null!==this.state.target}},{key:"onContextMenu",value:function(e){e.preventDefault(),e.stopPropagation()}},{key:"appendSymbol",value:function(e){this.inputElement.appendValue(e,Je.b),this.inputElement.focus(!1)}},{key:"onSubmit",value:function(e,t){e!=t||this.closeEditor(!1)}},{key:"onFormat",value:function(e){return this.props.graphController.getGraphLabeler().getEdgeLabelFormatter().call(null,e)}},{key:"render",value:function(){var e=this,t=this.props.inputController.getInputAdapter().getViewport(),r=(this.props.graphController,this.props.machineController,this.props.screen),n={visibility:"hidden"},o=this.state.target;if(o){n.visibility="visible";var i=o instanceof u.a?o.getCenterPoint():o,a=function(e,t,r){var n=e.getScreenCTM();return{x:t*n.a+n.e,y:r*n.d+n.f}}(r,i.x+t.getOffsetX(),i.y+t.getOffsetY()),l=a.x,s=a.y+-64+-36,c=-this.parentElement.offsetWidth/2,f=-this.parentElement.offsetHeight/2;n.top=s+f+"px",n.left=l+c+"px"}return ne.a.createElement("div",{className:"bubble",id:"label-editor",ref:function(t){return e.parentElement=t},tabIndex:"0",style:n,onContextMenu:this.onContextMenu,onFocus:function(t){clearTimeout(e._timer)},onBlur:function(t){e._timer=setTimeout(function(){return e.closeEditor(!0)},10)}},ne.a.createElement(Ve.a,{className:"label-editor-input",ref:function(t){return e.inputElement=t},formatter:this.onFormat,onSubmit:this.onSubmit,captureOnExit:"none",multiline:!0}))}}])&&We(r.prototype,n),o&&We(r,o),t}();function $e(e){return($e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function et(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function tt(e,t,r){return(tt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=rt(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function rt(e){return(rt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function nt(e,t){return(nt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ot(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var it=[se],at=[new b],lt=function(e){function t(e){var r,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,r=!(o=rt(t).call(this,e))||"object"!==$e(o)&&"function"!=typeof o?ot(n):o;var i=e.getInputAdapter();return r._inputController=new x(ot(ot(r)),i),r._graphController=new W(ot(ot(r))),r._machineController=new te(ot(ot(r))),r}var r,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&nt(e,t)}(t,n["b"]),r=t,(o=[{key:"getLabelEditor",value:function(){return Ke}},{key:"initialize",value:function(e){tt(rt(t.prototype),"initialize",this).call(this,e)}},{key:"destroy",value:function(e){tt(rt(t.prototype),"destroy",this).call(this,e)}},{key:"update",value:function(e){tt(rt(t.prototype),"update",this).call(this,e)}},{key:"getRenderer",value:function(e){switch(e){case"graph":return Ne;case"graphoverlay":return Le;case"viewport":return Ue}return null}},{key:"getInputController",value:function(){return this._inputController}},{key:"getGraphController",value:function(){return this._graphController}},{key:"getMachineController",value:function(){return this._machineController}},{key:"getGraphExporters",value:function(){return at}},{key:"getModuleVersion",value:function(){return"0.0.1"}},{key:"getModulePanels",value:function(){return it}},{key:"getModuleName",value:function(){return"default"}},{key:"getLocalizedModuleName",value:function(){return"Default"}}])&&et(r.prototype,o),i&&et(r,i),t}();t.default=lt}}]);
//# sourceMappingURL=sourcemap/module_default.bundle.js.map