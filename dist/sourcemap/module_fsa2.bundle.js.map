{"version":3,"sources":["webpack:///./src/app/modules/fsa2/renderer/FSANodeRenderer.js","webpack:///./src/app/modules/fsa2/renderer/FSAEdgeRenderer.js","webpack:///./src/app/modules/fsa2/renderer/InitialMarkerRenderer.js","webpack:///./src/app/modules/fsa2/renderer/FSAGraphRenderer.js","webpack:///./src/app/modules/fsa2/renderer/FSALabelEditorRenderer.js","webpack:///./src/app/modules/fsa2/components/panels/overview/states/StateListElement.js","webpack:///./src/app/modules/fsa2/components/panels/overview/states/StateListView.js","webpack:///./src/app/modules/fsa2/components/panels/overview/alphabet/AlphabetListElement.js","webpack:///./src/app/modules/fsa2/components/panels/overview/alphabet/AlphabetListView.js","webpack:///./src/app/modules/fsa2/components/panels/overview/transitions/TransitionChartView.js","webpack:///./src/app/modules/fsa2/components/panels/overview/transitions/TransitionTableView.js","webpack:///./src/app/modules/fsa2/components/panels/overview/AutoStateLabelView.js","webpack:///./src/app/modules/fsa2/components/panels/overview/OverviewPanel.js","webpack:///./src/app/modules/fsa2/components/panels/testing/TestItem.js","webpack:///./src/app/modules/fsa2/components/panels/testing/TestListView.js","webpack:///./src/app/modules/fsa2/notifications/TransitionErrorMessage.js","webpack:///./src/app/modules/fsa2/notifications/StateUnreachableWarningMessage.js","webpack:///./src/app/modules/fsa2/notifications/StateMissingTransitionErrorMessage.js","webpack:///./src/app/modules/fsa2/notifications/StateErrorMessage.js","webpack:///./src/app/modules/fsa2/FSAErrorChecker.js","webpack:///./src/app/modules/fsa2/components/panels/testing/TestingPanel.js","webpack:///./src/app/modules/fsa2/notifications/NFAToDFAConversionWarningMessage.js","webpack:///./src/app/modules/fsa2/components/panels/analysis/AnalysisPanel.js","webpack:///./src/app/modules/fsa2/tester/TapeContext.js","webpack:///./src/app/modules/fsa2/tester/StringTester.js","webpack:///./src/app/modules/fsa2/components/views/EditPane.js","webpack:///./src/app/modules/fsa2/components/views/TapePane.js","webpack:///./src/app/experimental/iconset/flat/XMLFileIcon.js","webpack:///./src/app/modules/fsa2/exporter/JFLAPGraphExporter.js","webpack:///./src/app/modules/fsa2/FSAModule.js","webpack:///./src/app/experimental/components/IconButton.js","webpack:///./src/app/experimental/panels/PanelContainer.js","webpack:///./src/app/modules/fsa2/machine/FSA.js","webpack:///./src/app/manager/export/AbstractGraphExporter.js","webpack:///./src/app/experimental/iconset/TinyDownIcon.js","webpack:///./src/app/experimental/iconset/TinyUpIcon.js","webpack:///./src/app/experimental/panels/PanelSection.js","webpack:///./src/app/input/AbstractInputHandler.js","webpack:///./src/app/experimental/UserUtil.js","webpack:///./src/app/manager/RenderManager.js","webpack:///./src/app/experimental/panels/PanelSwitch.js","webpack:///./src/app/experimental/iconset/UploadIcon.js","webpack:///./src/app/experimental/iconset/flat/JSONFileIcon.js","webpack:///./src/app/experimental/iconset/BoxAddIcon.js","webpack:///./src/app/experimental/iconset/RunningManIcon.js","webpack:///./src/app/experimental/components/IconUploadButton.js","webpack:///./src/app/experimental/iconset/DownloadIcon.js","webpack:///./src/app/experimental/iconset/EditPencilIcon.js","webpack:///./src/app/manager/undo/AbstractEventHandler.js","webpack:///./src/app/experimental/components/IconStateButton.js","webpack:///./src/app/experimental/iconset/FullscreenIcon.js","webpack:///./src/app/experimental/iconset/FullscreenExitIcon.js","webpack:///./src/app/experimental/widgets/FullscreenWidget.js","webpack:///./src/app/experimental/iconset/ZoomInIcon.js","webpack:///./src/app/experimental/iconset/ZoomOutIcon.js","webpack:///./src/app/experimental/widgets/ZoomWidget.js","webpack:///./src/app/experimental/iconset/PinpointIcon.js","webpack:///./src/app/experimental/widgets/FocusCenterWidget.js","webpack:///./src/app/experimental/widgets/NavbarWidget.js","webpack:///./src/app/experimental/panels/PanelDivider.js","webpack:///./src/app/manager/hotkey/HotKeyManager.js","webpack:///./src/app/renderer/EdgeRenderer.js","webpack:///./src/app/modules/nodalgraph/NodalGraphImageExporter.js","webpack:///./src/app/modules/nodalgraph/SafeGraphEventHandler.js","webpack:///./src/app/experimental/iconset/PageContentIcon.js","webpack:///./src/app/experimental/iconset/CrossIcon.js","webpack:///./src/app/experimental/iconset/AddIcon.js","webpack:///./src/app/experimental/iconset/SubtractIcon.js","webpack:///./src/app/experimental/iconset/CheckCircleIcon.js","webpack:///./src/app/experimental/iconset/CrossCircleIcon.js","webpack:///./src/app/experimental/iconset/PendingIcon.js","webpack:///./src/app/experimental/panels/PanelCheckbox.js","webpack:///./src/app/graph/GraphNodeSelectionBox.js","webpack:///./src/app/modules/nodalgraph/controller/GraphPicker.js","webpack:///./src/app/modules/nodalgraph/controller/inputhandler/InputHandler.js","webpack:///./src/app/modules/nodalgraph/controller/inputhandler/GraphElementInputHandler.js","webpack:///./src/app/modules/nodalgraph/controller/inputhandler/GraphNodeInputHandler.js","webpack:///./src/app/modules/nodalgraph/controller/inputhandler/GraphInitialInputHandler.js","webpack:///./src/app/modules/nodalgraph/controller/inputhandler/GraphEdgeInputHandler.js","webpack:///./src/app/modules/nodalgraph/controller/inputhandler/GraphEndpointInputHandler.js","webpack:///./src/app/modules/nodalgraph/controller/inputhandler/GraphNodeCreateInputHandler.js","webpack:///./src/app/modules/nodalgraph/controller/InputController.js","webpack:///./src/app/modules/nodalgraph/controller/GraphController.js","webpack:///./src/app/modules/nodalgraph/controller/SelectionBoxInputHandler.js","webpack:///./src/app/modules/nodalgraph/controller/ViewportInputHandler.js","webpack:///./src/app/system/patterninput/PatternInput.js","webpack:///./src/app/manager/labeleditor/LabelEditorView.js","webpack:///./src/app/manager/labeleditor/LabelEditorManager.js","webpack:///./src/app/modules/nodalgraph/manager/NodalGraphInputManager.js","webpack:///./src/app/modules/fsa2/machine/util/ConvertFSA.js","webpack:///./src/app/modules/fsa2/machine/util/SolveFSA.js","webpack:///./src/app/modules/fsa2/machine/util/InvertDFA.js","webpack:///./src/app/modules/fsa2/machine/FSAUtils.js","webpack:///./src/app/modules/nodalgraph/controller/renderer/BoxRenderer.js","webpack:///./src/app/modules/nodalgraph/controller/renderer/HighlightRenderer.js","webpack:///./src/app/modules/nodalgraph/controller/renderer/SelectionBoxRenderer.js","webpack:///./src/app/modules/nodalgraph/controller/renderer/GraphInputRenderer.js","webpack:///./src/app/experimental/iconset/MoveIcon.js","webpack:///./src/app/experimental/widgets/ModeSelectTray.js","webpack:///./src/app/experimental/iconset/TrashCanDetailedIcon.js","webpack:///./src/app/experimental/widgets/TrashCanWidget.js","webpack:///./src/app/modules/fsa2/machine/FSABuilder.js","webpack:///./src/app/modules/fsa2/controller/MachineController.js","webpack:///./src/app/system/patterninput/PatternInputButton.js","webpack:///./src/app/experimental/iconset/TriangleIcon.js","webpack:///./src/app/modules/fsa2/exporter/FSAGraphExporter.js","webpack:///./src/app/experimental/iconset/DownArrowIcon.js","webpack:///./src/app/experimental/widgets/TapeWidget.js"],"names":["FSANodeRenderer","props","_classCallCheck","this","_possibleConstructorReturn","_getPrototypeOf","call","React","Component","node","nodeLabel","getNodeLabel","react_default","a","createElement","className","cx","x","cy","y","r","getNodeSize","fill","stroke","getNodeAccept","pointerEvents","style","userSelect","fontSize","Math","min","max","length","textAnchor","FSAEdgeRenderer","FSAEdgeRenderer_classCallCheck","FSAEdgeRenderer_possibleConstructorReturn","FSAEdgeRenderer_getPrototypeOf","edge","start","getStartPoint","end","getEndPoint","center","getCenterPoint","labels","getEdgeLabel","getEdgeSymbolsFromLabel","edgeDir","getEdgeDirection","EdgeRenderer","directed","DIRECTED_FORWARD","from","to","label","join","direction","color","InitialMarkerRenderer","InitialMarkerRenderer_classCallCheck","InitialMarkerRenderer_possibleConstructorReturn","InitialMarkerRenderer_getPrototypeOf","FSANode","d","FSAGraphRenderer","FSAGraphRenderer_classCallCheck","FSAGraphRenderer_possibleConstructorReturn","FSAGraphRenderer_getPrototypeOf","currentModule","inputController","getInputController","graph","getGraphController","getGraph","isEmpty","Fragment","x1","y1","x2","y2","getNodes","map","e","i","renderer_FSANodeRenderer","key","getGraphElementID","getEdges","renderer_FSAEdgeRenderer","getStartNode","ghostInitialMarker","renderer_InitialMarkerRenderer","RECOMMENDED_SYMBOLS","DEFAULT_SYMBOLS","EMPTY_CHAR","FSALabelEditorRenderer","FSALabelEditorRenderer_classCallCheck","FSALabelEditorRenderer_possibleConstructorReturn","FSALabelEditorRenderer_getPrototypeOf","symbol","labelEditor","parent","inputComponent","PatternInputButton","title","onClick","appendValue","SYMBOL_SEPARATOR","_this","alphabet","getMachineController","getAlphabet","showEdgeTray","getTarget","GraphEdge","showNodeTray","GraphNode","showRecommended","Style","tray_container","tray_used","renderSymbol","tray_default","getNodeCustom","setNodeCustom","setNodeAccept","StateListElement","StateListElement_classCallCheck","StateListElement_getPrototypeOf","state","value","error","onValueChange","bind","StateListElement_assertThisInitialized","onFocus","onBlur","onKeyDown","onKeyUp","target","setState","select","nextLabel","keyCode","preventDefault","stopPropagation","blur","trim","onChange","inputValue","nodeCustom","nodeAccept","displayValue","id","element_container","spellCheck","width","StateListView","StateListView_classCallCheck","StateListView_getPrototypeOf","_prevX","_prevY","onElementAdd","StateListView_assertThisInitialized","onElementFocus","onElementBlur","onElementChange","graphController","createNode","focusOnNode","element","getNodesByLabel","renameNode","applyAutoRename","deleteTargetNode","otherNodes","Error","_this2","nodes","list_container","element_list","TriangleIcon","first_marker","overview_states_StateListElement","IconButton","add_button","BoxAddIcon","AlphabetListElement","AlphabetListElement_classCallCheck","AlphabetListElement_getPrototypeOf","_inputElement","AlphabetListElement_assertThisInitialized","nextSymbol","focus","inputSymbol","displaySymbol","symbolUsed","used","ref","maxLength","AlphabetListView","AlphabetListView_classCallCheck","AlphabetListView_getPrototypeOf","newSymbolComponent","useNewSymbol","AlphabetListView_assertThisInitialized","machineController","machine","getMachineBuilder","getMachine","isSymbol","renameSymbol","createSymbol","deleteSymbol","result","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","next","done","push","overview_alphabet_AlphabetListElement","isUsedSymbol","err","return","_this3","renderAlphabetList","display","TransitionChartView","TransitionChartView_classCallCheck","TransitionChartView_possibleConstructorReturn","TransitionChartView_getPrototypeOf","_cachedMachineHash","_cachedMachineComponents","deterministic","isDeterministic","destinations","doTransition","transitionString","EMPTY_SYMBOL","getStateLabel","string","getStateID","chart_key","chart_value","machineHash","getHashCode","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","getStates","entry","renderTransitionEntry","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","getMachineType","chart_container","fontFamily","renderTransitionTable","SYMBOL_AXIS","TransitionTableView","TransitionTableView_classCallCheck","TransitionTableView_getPrototypeOf","rowAxis","onRowAxisSwitch","TransitionTableView_assertThisInitialized","prev","other","disabled","table_entry","rowComponents","renderTableEntryForSymbolAxis","_iteratorNormalCompletion4","_didIteratorError4","_iteratorError4","_step4","_iterator4","symbols","getTransitionSymbols","_iteratorNormalCompletion5","_didIteratorError5","_iteratorError5","_step5","_iterator5","scope","table_axis_header","_iteratorNormalCompletion6","_didIteratorError6","_iteratorError6","_step6","_iterator6","_iteratorNormalCompletion7","_didIteratorError7","_iteratorError7","_step7","_iterator7","table_container","renderTableAxis","renderTableEntries","AutoStateLabelView","AutoStateLabelView_classCallCheck","AutoStateLabelView_getPrototypeOf","onAutoStatePrefixSubmit","AutoStateLabelView_assertThisInitialized","onAutoStatePrefixFormat","graphLabeler","getGraphLabeler","getDefaultNodeLabelPrefix","setDefaultNodeLabelPrefix","select_container","select_label","FormattedInput","prefix_editor","defaultValue","captureOnExit","formatter","onSubmit","postfix_selector","onMachineTypeChange","OverviewPanel","OverviewPanel_classCallCheck","OverviewPanel_getPrototypeOf","OverviewPanel_assertThisInitialized","onAutoLayoutApply","onAutoLayoutChange","onAutoLabelChange","onSnapToGridChange","newValue","session","getCurrentModule","setDeterministic","applyAutoLayout","setAutoRenameNodes","checked","drawer","machineType","autoRename","shouldAutoRenameNodes","drawerFull","isDrawerFullscreen","PanelContainer","TITLE","machine_type_select","PanelDivider","PanelSection","initial","full","overview_states_StateListView","overview_alphabet_AlphabetListView","getEdgeCount","overview_transitions_TransitionChartView","getNodeCount","overview_transitions_TransitionTableView","panels_overview_AutoStateLabelView","autolayout_button","I18N","toString","PanelSwitch","Object","defineProperty","get","DEFAULT_MODE","TestItem","TestItem_classCallCheck","TestItem_getPrototypeOf","inputElement","status","TestItem_assertThisInitialized","callback","arguments","nextValue","onDelete","onTest","active","placeholder","subtitle","test_item_container","test_button","CheckCircleIcon","CrossCircleIcon","PendingIcon","RunningManIcon","test_input","type","delete_button","SubtractIcon","ACCEPT_FILE_TYPES","TEST_FILENAME","TestListView","TestListView_classCallCheck","TestListView_getPrototypeOf","_testList","_testName","onTestNew","TestListView_assertThisInitialized","onTestUpload","onTestDownload","onTestClose","onTestAdd","onTestDelete","onTestTest","onTestRunAll","onGraphChange","getGraphChangeHandler","addListener","removeListener","resetStatus","fileBlob","reader","FileReader","onload","event","name","tests","split","test","guid","abort","readAsText","testStrings","getValue","downloadText","tester","isTesting","stopTest","nextTest","item","forceImmediate","immediate","itemValue","startTest","then","promise","runTest","_this4","empty","test_container","test_control_tray","test_control_button","PageContentIcon","IconUploadButton","accept","onUpload","UploadIcon","DownloadIcon","CrossIcon","test_list_container","test_list_add","AddIcon","test_list_count","test_list_scroll_container","test_list","testCallback","panels_testing_TestItem","splice","test_list_runall","ARROW","TransitionErrorMessage","TransitionErrorMessage_classCallCheck","TransitionErrorMessage_getPrototypeOf","targetIndex","targetLabel","targets","message","getSourceNode","getDestinationNode","TransitionErrorMessage_assertThisInitialized","buttonValue","targetLength","focusOnEdge","deleteTargetEdges","close","text","StateUnreachableWarningMessage","StateUnreachableWarningMessage_classCallCheck","StateUnreachableWarningMessage_getPrototypeOf","StateUnreachableWarningMessage_assertThisInitialized","deleteTargetNodes","StateMissingTransitionErrorMessage","StateMissingTransitionErrorMessage_classCallCheck","StateMissingTransitionErrorMessage_getPrototypeOf","StateMissingTransitionErrorMessage_assertThisInitialized","StateErrorMessage","StateErrorMessage_classCallCheck","StateErrorMessage_getPrototypeOf","StateErrorMessage_assertThisInitialized","FSAErrorChecker","FSAErrorChecker_classCallCheck","_graphController","_machineController","_showErrorOnChange","onMachineChange","getMachineChangeHandler","machineBuilder","showErrors","enabled","errors","getMachineErrors","warnings","getMachineWarnings","Notifications","clearMessages","addMessage","warning","ERROR_UNREACHABLE_STATE","ERROR_DUPLICATE_STATE","ERROR_INCOMPLETE_TRANSITION","edges","ERROR_DUPLICATE_TRANSITION","ERROR_MISSING_TRANSITION","ERROR_EMPTY_TRANSITION","TestingPanel","TestingPanel_classCallCheck","TestingPanel_getPrototypeOf","stepMode","onStepTestChange","TestingPanel_assertThisInitialized","onAutoErrorCheckChange","app","getApp","_tester","on","_viewport","setCurrentView","_drawer","setDrawerSoloClass","closeDrawer","openDrawer","errorChecker","getErrorChecker","errorCheck","isErrorChecking","setErrorChecking","getStringTester","panel_container","panels_testing_TestListView","NFAToDFAConversionWarningMessage","NFAToDFAConversionWarningMessage_classCallCheck","NFAToDFAConversionWarningMessage_getPrototypeOf","NFAToDFAConversionWarningMessage_assertThisInitialized","convertMachineTo","stateCount","countStates","concat","pow","AnalysisPanel","AnalysisPanel_classCallCheck","AnalysisPanel_getPrototypeOf","optimizeUnreachOption","optimizeRedundOption","onConvertToDFA","AnalysisPanel_assertThisInitialized","onConvertToNFA","onInvertDFA","onOptimizeMachine","unreachableArray","getUnreachableNodes","invertMachine","isChecked","onDeleteAllUnreachable","PanelCheckbox","analysis_button","canOptimize","TapeContext","inputString","infiniteLeft","infiniteRight","TapeContext_classCallCheck","_tapeInput","_left","_right","_index","finish","reset","index","TestTapeContext","StringTester_classCallCheck","StringTester_possibleConstructorReturn","StringTester_getPrototypeOf","getTestString","stepForward","stepBackward","resetPosition","getNodesAtPosition","changePosition","getPosition","StringTester","_testString","_testIndex","_tapeContext","_cachePath","_cachedResult","_resolve","_reject","registerEvent","testString","Promise","reject","emit","resolve","testResult","thenStop","cachedStates","cachedSymbols","isResult","startState","getStartState","doClosureTransition","currentState","prevCache","states","slice","solveFSAByStep","Set","cachedState","getSource","add","nextCache","Array","position","Eventable","mixin","EditPane","EditPane_classCallCheck","EditPane_possibleConstructorReturn","EditPane_getPrototypeOf","viewport","inputActionMode","isActionMode","view_pane","NavbarWidget","view_widget","right","bottom","left","ModeSelectTray","mode","modeIndex","setInputScheme","TrashCanWidget","TapePane","TapePane_classCallCheck","TapePane_possibleConstructorReturn","TapePane_getPrototypeOf","setDisabled","TapeWidget","getTapeContext","Icon","XMLFileIcon_classCallCheck","XMLFileIcon_possibleConstructorReturn","XMLFileIcon_getPrototypeOf","xmlns","height","viewBox","points","JFLAPGraphExporter","JFLAPGraphExporter_classCallCheck","JFLAPGraphExporter_possibleConstructorReturn","JFLAPGraphExporter_getPrototypeOf","AbstractGraphExporter","module","filename","endsWith","getFileType","data","substring","getUndoManager","captureEvent","xmlData","DOMParser","parseFromString","XMLGraphParser","parse","getSession","setProjectName","onerror","code","graphData","objectify","xmlString","XMLSerializer","serializeToString","XMLFileIcon","FSAModule","FSAModule_classCallCheck","_app","_inputManager","NodalGraphInputManager","FSAGraph","FSAGraphLabeler","FSAGraphParser","MachineController","_errorChecker","getExportManager","addExporter","FSAGraphExporter","addExporters","DEFAULT_IMAGE_EXPORTERS","getViewportManager","addViewClass","getDrawerManager","addPanelClass","getHotKeyManager","registerHotKey","CTRL_KEY","console","log","SHIFT_KEY","getRenderManager","addRenderer","RENDER_LAYER_WORKSPACE","fsa2_renderer_FSAGraphRenderer","workspace","GraphInputRenderer","setEventHandlerFactory","SafeGraphEventHandler","getGraphParser","getTooltipManager","addTooltip","initialize","onSessionStart","update","onSessionStop","destroy","UserUtil","getToolbarComponent","closeBar","showButtonLabel","SHOW_LABEL","react__WEBPACK_IMPORTED_MODULE_0___default","icon_button","children","panel_title","panel_content","panel_bottom","State","src","_label","_src","_id","GraphElement","_createClass","Transition","_from","_to","_symbols","includes","getHashString","FSA","_states","Map","_alphabet","_transitions","_finalStates","_customSymbols","_startState","_deterministic","_errors","fsa","clear","entries","_step$value","_slicedToArray","copy","set","isStartState","isFinalState","_step2$value","_step3$value","getSourceState","getDestinationState","foundSymbols","keys","values","transitions","getOutgoingTransitions","_iteratorNormalCompletion8","_didIteratorError8","_iteratorError8","_step8","_iterator8","_iteratorNormalCompletion9","_didIteratorError9","_iteratorError9","_step9","_iterator9","addState","stateID","has","size","delete","_iteratorNormalCompletion10","_didIteratorError10","_iteratorError10","_step10","_iterator10","dst","_iteratorNormalCompletion11","_didIteratorError11","_iteratorError11","_step11","_iterator11","hasState","transitionKey","transition","hasSymbol","addSymbol","_incrSymbolCount","getSymbols","indexOf","_decrSymbolCount","_iteratorNormalCompletion12","_didIteratorError12","_iteratorError12","_step12","_iterator12","symbolCount","isCustomSymbol","newSymbol","_iteratorNormalCompletion13","_didIteratorError13","_iteratorError13","_step13","_iterator13","count","cache","_iteratorNormalCompletion14","_didIteratorError14","_iteratorError14","_step14","_iterator14","_step14$value","_i2","custom","forceNondeterminism","_typeof","fromTransitionKey","_iteratorNormalCompletion15","_didIteratorError15","_iteratorError15","_step15","_iterator15","startsWith","_iteratorNormalCompletion16","_didIteratorError16","_iteratorError16","_step16","_iterator16","toState","_iteratorNormalCompletion17","_didIteratorError17","_iteratorError17","_step17","_iterator17","s","_iteratorNormalCompletion18","_didIteratorError18","_iteratorError18","_step18","_iterator18","_iteratorNormalCompletion19","_didIteratorError19","_iteratorError19","_step19","_iterator19","_iteratorNormalCompletion20","_didIteratorError20","_iteratorError20","_step20","_iterator20","_iteratorNormalCompletion21","_didIteratorError21","_iteratorError21","_step21","_iterator21","_iteratorNormalCompletion22","_didIteratorError22","_iteratorError22","_step22","_iterator22","_iteratorNormalCompletion23","_didIteratorError23","_iteratorError23","_step23","_iterator23","stringHash","getLabel","toUpperCase","TinyUpIcon_classCallCheck","TinyUpIcon_possibleConstructorReturn","TinyUpIcon_getPrototypeOf","PanelSection_classCallCheck","PanelSection_getPrototypeOf","open","PanelSection_assertThisInitialized","isOpen","isDisabled","Children","isFull","section_container","section_header","TinyUpIcon","TinyDownIcon","section_content_container","section_content","AbstractInputHandler","pointer","zoomValue","prevValue","userClearGraph","graphOnly","window","confirm","__webpack_require__","__webpack_exports__","RENDER_LAYER_WORKSPACE_OVERLAY","RENDER_LAYER_VIEWPORT","RENDER_LAYER_VIEWPORT_OVERLAY","RenderManager","_renderMapping","layerID","rendererClass","switch_container","panel_switch","switch_slider","switch_label","htmlFor","onFileUpload","_assertThisInitialized","files","_IconButton_js__WEBPACK_IMPORTED_MODULE_2__","upload_button","upload_input","AbstractEventHandler","undoManager","IconStateButton","prevIndex","nextIndex","child","FullscreenIcon_classCallCheck","FullscreenIcon_possibleConstructorReturn","FullscreenIcon_getPrototypeOf","FullscreenExitIcon_classCallCheck","FullscreenExitIcon_possibleConstructorReturn","FullscreenExitIcon_getPrototypeOf","FullscreenWidget","FullscreenWidget_classCallCheck","FullscreenWidget_possibleConstructorReturn","FullscreenWidget_getPrototypeOf","components_IconStateButton","fullscreen_button","hide","FullscreenIcon","FullscreenExitIcon","ZoomInIcon_classCallCheck","ZoomInIcon_possibleConstructorReturn","ZoomInIcon_getPrototypeOf","ZoomOutIcon_classCallCheck","ZoomOutIcon_possibleConstructorReturn","ZoomOutIcon_getPrototypeOf","ZoomWidget","ZoomWidget_classCallCheck","ZoomWidget_getPrototypeOf","onZoomIn","ZoomWidget_assertThisInitialized","onZoomOut","viewScale","getScale","addScale","toFixed","zoom_container","zoom_button","ZoomInIcon","ZoomOutIcon","zoom_label","PinpointIcon_classCallCheck","PinpointIcon_possibleConstructorReturn","PinpointIcon_getPrototypeOf","FocusCenterWidget","FocusCenterWidget_classCallCheck","FocusCenterWidget_getPrototypeOf","FocusCenterWidget_assertThisInitialized","setOffset","center_focus_button","abs","getOffsetX","getOffsetY","PinpointIcon","NavbarWidget_classCallCheck","NavbarWidget_possibleConstructorReturn","NavbarWidget_getPrototypeOf","getInputAdapter","getViewport","navbar_container","experimental_widgets_FullscreenWidget","navbar_widget","experimental_widgets_ZoomWidget","navbar_widget_container","experimental_widgets_FocusCenterWidget","panel_divider","HotKeyManager","_hotkeys","_cachedEvent","ctrlKey","metaKey","altKey","shiftKey","_prevHotKey","_repeatCount","_enabled","_altHotkey","isArray","ctrlIndex","metaIndex","altIndex","shiftIndex","charKey","ctrl","alt","shift","localizedKeys","unshift","addEventListener","removeEventListener","hotkey","matchesHotKeyEvent","eventCtrl","eventAlt","eventShift","eventKey","flag","repeat","captureKeyEvent","findMatchingHotKey","isKeyUp","SIXTH_PI","PI","DIRECTED_NONE","DefaultEndpointRenderer","sin","angle","cos","DefaultLabelRenderer","transform","str","reverse","alignmentBaseline","fromAngle","toAngle","ForwardEndpointRenderer","forwardEndpointRenderer","endpointRenderer","BackwardEndpointRenderer","backwardEndpointRenderer","EdgeLabelRenderer","labelRenderer","fromPoint","toPoint","centerPoint","reverseLabel","quadLine","dftx","dfty","dfcx","dfcy","ftrad","atan2","fcrad","GraphImageExporter","imageType","FILE_TYPE_PNG","_imageType","offsetX","offsetY","bounds","getBoundingRect","dx","minX","dy","minY","w","EXPORT_PADDING_X","h","EXPORT_PADDING_Y","clone","cloneNode","setAttribute","uiElements","getElementsByClassName","remove","svgElement","getSVGElement","workspaceDim","baseVal","svg","processSVGForExport","downloadImageFromSVG","FILE_TYPE_JPG","FILE_TYPE_SVG","_get","prototype","PNGIcon","JPGIcon","SVGIcon","graphParser","_graphParser","_graphData","prevEvent","getPreviousEvent","applyRedo","checkbox_container","GraphNodeSelectionBox","_boundingBox","fromX","fromY","toX","toY","visible","box","mx","my","lx","ly","clearSelection","getNodesWithin","getSelection","GraphPicker","GraphPicker_classCallCheck","targetType","initialTarget","initialTargetType","updateTarget","hasTarget","document","body","cursor","setInitialTarget","getNodeByInitialMarkerAt","getEdgeByEndPointAt","getNodeAt","getEdgeAt","nodeSize","startNode","offset","EDGE_RADIUS","ENDPOINT_RADIUS","InputHandler","GraphElementInputHandler","GraphElementInputHandler_classCallCheck","_targetType","GraphNodeInputHandler","GraphNodeInputHandler_classCallCheck","GraphNodeInputHandler_possibleConstructorReturn","GraphNodeInputHandler_getPrototypeOf","getPicker","selectionBox","getSelectionBox","isTrashMode","prevX","prevY","hasSelection","deleteSelectedNodes","isMoveMode","openLabelEditor","toggleNode","picker","createEdge","setEdgeLabel","getDefaultEdgeLabel","isNewEdge","edgeQuad","getQuadratic","prevQuad","radians","prevEdgeTo","_snapToGrid","snapSize","_snapSize","round","moveMultipleNodesTo","moveNodeTo","onGraphIntentMoveAllNodes","onGraphIntentMoveNode","GraphInitialInputHandler","GraphInitialInputHandler_classCallCheck","GraphInitialInputHandler_possibleConstructorReturn","GraphInitialInputHandler_getPrototypeOf","prevInitial","setStartNode","onGraphIntentChangeInitial","GraphEdgeInputHandler","GraphEdgeInputHandler_classCallCheck","GraphEdgeInputHandler_possibleConstructorReturn","GraphEdgeInputHandler_getPrototypeOf","deleteTargetEdge","isPlaceholder","targetQuad","moveEdgeTo","onGraphIntentMoveEdge","GraphEndpointInputHandler","GraphEndpointInputHandler_classCallCheck","GraphEndpointInputHandler_possibleConstructorReturn","GraphEndpointInputHandler_getPrototypeOf","moveEndpointTo","formatEdge","deleteEdge","onGraphIntentFinishEdge","onGraphIntentCreateEdge","onGraphIntentChangeDestination","shouldDestroyPointlessEdges","changeDestinationNode","GraphNodeCreateInputHandler","GraphNodeCreateInputHandler_classCallCheck","GraphNodeCreateInputHandler_possibleConstructorReturn","GraphNodeCreateInputHandler_getPrototypeOf","DEFAULT_SHOULD_DESTROY_POINTLESS_EDGE","InputController","inputAdapter","InputController_classCallCheck","InputController_possibleConstructorReturn","InputController_getPrototypeOf","_picker","_selectionBox","_swapMouseScheme","_trashMode","_disabled","_inputHandlers","AbstractInputController","_module","_inputAdapter","getPointerX","getPointerY","updateHoverTarget","updateInitialTarget","isTargetInSelection","handler","isTargetable","onAction","onDblAction","onDragStart","onDragMove","onDragStop","clearTarget","setViewportColor","shouldInputFirst","isAltInput","isDragging","isPointerActive","DEFAULT_AUTO_RENAME","GRAPH_REFRESH_RATE","GraphController","labeler","parser","GraphController_classCallCheck","GraphController_getPrototypeOf","_graphChangeHandler","GraphChangeHandler","setGraphController","GraphController_assertThisInitialized","labelEditorElement","shouldAutoLabel","AbstractGraphController","GraphController_get","_graph","GraphLayout","applyLayout","getModule","_labeler","setNodeLabel","getDefaultNodeLabel","nextQuad","destinationNode","prevDestination","nextInitial","nextX","nextY","targetNodes","enable","random","newNodeLabel","selectedNode","selection","deleteNode","onGraphIntentDeleteNodes","diameter","nextDX","nextDY","pos","getInputEventPosition","changeInputEventPosition","setQuadraticByCoords","isSelfLoop","sourceNode","setQuadratic","getInputManager","getLabelEditorManager","getLabelEditorComponent","prevLabel","openEditor","ax","ay","SelectionBoxInputHandler","SelectionBoxInputHandler_classCallCheck","SelectionBoxInputHandler_possibleConstructorReturn","SelectionBoxInputHandler_getPrototypeOf","_inputController","beginSelection","isSelecting","updateSelection","endSelection","ViewportInputHandler","ViewportInputHandler_classCallCheck","ViewportInputHandler_possibleConstructorReturn","ViewportInputHandler_getPrototypeOf","getAdapter","addOffset","PatternInput","PatternInput_classCallCheck","PatternInput_getPrototypeOf","multiLine","_submitTimeout","_submit","submitOnBlur","_skipBlur","_skipSelect","PatternInput_assertThisInitialized","setTimeout","submit","activeElement","ignore","separator","format","maxlength","multiline","rows","LabelEditorView","LabelEditorView_classCallCheck","LabelEditorView_getPrototypeOf","_target","_targetCallback","onInputSubmit","LabelEditorView_assertThisInitialized","onInputBlur","graphElement","onCancel","_targetOnSubmit","_targetOnCancel","getLabelFormatter","setFormatter","resetValue","closeEditor","isEditorOpen","targetStyle","getElement","parentClientRect","getBoundingClientRect","screenPos","ctm","getScreenCTM","f","transformViewToScreen","offsetWidth","offsetHeight","top","editor_container","patterninput_PatternInput","saveOnExit","LabelEditorManager","LabelEditorManager_classCallCheck","_labelEditorComponent","_labelEditorRenderer","renderer","LabelEditorRenderer","manager_labeleditor_LabelEditorView","nodalGraph","labelEditorRenderer","NodalGraphInputManager_classCallCheck","_labelEditorManager","setLabelEditorRenderer","setLabeler","addInputHandler","_graphLabeler","convertToDFA","dfaData","nfaSource","dfaStateMap","dfaFinalStates","dfaTransitionMap","dfaStartState","dfaTrapState","startStatesByClosure","getDFAStateFromNFAStates","statePowerSet","len","getPowerSetOfStates","nfaStates","expandNFAStatesToDFA","dfaState","dfaTransitionKey","getDFATransitionKeyFromDFAStateAndSymbol","setStartState","finalState","setFinalState","addTransition","fromDFAState","nfaTerminals","fromNFAState","doTerminalTransition","nfaStateKey","nfaState","getNFAStateKeyFromNFAStates","final","dfaStateLabel","MAX_COMPUTATION_STEPS","solveFSA","input","relatedState","counter","nfa","nextStates","cstate","nextState","apply","invertDFA","toBeRejected","getFinalStates","BoxRenderer","HIGHLIGHT_LINE_ARRAY","HighlightRenderer","HighlightRenderer_classCallCheck","HighlightRenderer_possibleConstructorReturn","HighlightRenderer_getPrototypeOf","endpoint","strokeDashoffset","strokeDasharray","strokeWidth","SelectionBoxRenderer","SelectionBoxRenderer_classCallCheck","SelectionBoxRenderer_possibleConstructorReturn","SelectionBoxRenderer_getPrototypeOf","selectionBoundingBox","renderer_HighlightRenderer","renderer_BoxRenderer","GraphInputRenderer_classCallCheck","GraphInputRenderer_possibleConstructorReturn","GraphInputRenderer_getPrototypeOf","renderer_SelectionBoxRenderer","ModeSelectTray_classCallCheck","ModeSelectTray_getPrototypeOf","ModeSelectTray_assertThisInitialized","tray_button","EditPencilIcon","MoveIcon","TrashCanWidget_classCallCheck","TrashCanWidget_getPrototypeOf","forceActive","_doubleTapTimeout","onMouseEnter","TrashCanWidget_assertThisInitialized","onMouseLeave","onAnyMouseDownNotConsumed","setTrashMode","clearTimeout","documentElement","isUsingTouch","trash_container","TrashCanDetailedIcon","FSABuilder","_machine","AbstractMachineBuilder","nodeLabels","nodeOutgoings","edgeSymbols","edgePlaceholders","edgeEmpties","graphNodes","graphEdges","graphStart","srcNode","dstNode","srcState","getStateByID","dstState","edgeLabelSymbols","transitionSymbol","outSymbols","outEdges","sharedStates","unreachables","missingSymbols","_step4$value","edgeMapping","openList","queue","pop","startIndex","nextNodes","nextNode","AbstractMachineController","_machineBuilder","setMachineType","getStateCount","read","stateMap","getTransitions","currentMachineType","setGraphToMachine","changeMachineTo","addCustomSymbol","removeCustomSymbol","prevSymbol","replace","renameCustomSymbol","getCustomSymbols","setCustomSymbol","clearCustomSymbols","_timeout","onMouseDown","onAnyMouseUp","ignoreBlur","newGraph","JSONGraphParser","machineData","machineName","customSymbols","statePrefix","getModuleName","version","process","getModuleVersion","timestamp","Date","getProjectName","fromJSON","toJSON","prevGraphHash","jsonData","JSON","jsonString","stringify","JSONFileIcon","TapeWidget_classCallCheck","TapeWidget_getPrototypeOf","onTapeStepBackward","TapeWidget_assertThisInitialized","onTapeStepForward","onTapeFinish","onTapeReset","onTapeSkipForward","onTapeSkipBackward","onTapeStop","stop","tapeContext","tapeIndex","getCurrentTapeIndex","tape_container","tape_control_tray","isTapeLeftInfinite","DownArrowIcon","opacity","getTapeInput","activeRead","sourceStates","getTapeSourceStatesByIndex","setCurrentTapeIndex","sourceState","isTapeRightInfinite"],"mappings":"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","file":"module_fsa2.bundle.ad2388539f92bde91cd4.js","sourcesContent":["import React from 'react';\n\nclass FSANodeRenderer extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  //Override\n  render()\n  {\n    //TODO: Refer to app.css for comparable colors\n    const node = this.props.node;\n    const nodeLabel = node.getNodeLabel();\n\n    return (\n      <g className=\"graph-node-container\">\n        {/*Outer circle*/}\n        <circle className=\"graph-node\"\n          cx={node.x}\n          cy={node.y}\n          r={node.getNodeSize()}\n\n          fill=\"#FEE781\"\n          stroke=\"#000000\"/>\n\n        {/*Inner circle*/}\n        {node.getNodeAccept() &&\n          <circle className=\"graph-node-inner\"\n            cx={node.x}\n            cy={node.y}\n            r={node.getNodeSize() * 0.75}\n            fill=\"none\"\n\n            stroke=\"#000000\"/>}\n\n        //Label\n        <text className=\"graph-node-label\"\n          x={node.x} y={node.y + 4}\n          pointerEvents=\"none\"\n          style={{\n            userSelect: \"none\",\n            fontSize: (1 - Math.min(Math.max(nodeLabel.length - 2, 0) / 6, 0.5)) + \"em\"\n          }}\n          textAnchor=\"middle\">\n          {nodeLabel}\n        </text>\n      </g>\n    );\n  }\n}\n\nexport default FSANodeRenderer;\n","import React from 'react';\n\nimport EdgeRenderer, {DIRECTED_FORWARD} from 'renderer/EdgeRenderer.js';\n\nconst GRAPH_EDGE_CONTAINER_STYLE_NAME = \"graph-edge-container\";\n\nclass FSAEdgeRenderer extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  //Override\n  render()\n  {\n    const edge = this.props.edge;\n    const stroke = this.props.stroke || \"#000000\";\n    const start = edge.getStartPoint();\n    const end = edge.getEndPoint();\n    const center = edge.getCenterPoint();\n    const label = edge.getEdgeLabel();\n    const labels = edge.getEdgeSymbolsFromLabel();\n    const edgeDir = edge.getEdgeDirection();\n\n    return <g className={GRAPH_EDGE_CONTAINER_STYLE_NAME}>\n      <EdgeRenderer\n        directed={DIRECTED_FORWARD}\n        from={start}\n        to={end}\n        center={center}\n        label={labels.join('\\n')}\n        direction={edgeDir}\n        color={stroke}/>\n    </g>;\n  }\n}\n\nexport default FSAEdgeRenderer;\n","import React from 'react';\n\nimport FSANode from 'modules/fsa/graph/FSANode.js';\n\nconst NODE_RADIUS = 16;\nconst INITIAL_MARKER_OFFSET_X = -(NODE_RADIUS + (NODE_RADIUS / 2));\n\nclass InitialMarkerRenderer extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    const node = this.props.node;\n    //node.x + offset marker back to center if not a node (or is a pointer)\n    const x = node.x + (!(node instanceof FSANode) ? -INITIAL_MARKER_OFFSET_X : 0);\n    const y = node.y;\n    const r = NODE_RADIUS;\n    const d = r * 2;\n    return (\n      <g className=\"graph-initial-container\">\n        <path className=\"graph-initial\" d={\n          \"M\" + (x - r) + \" \" + (y) +\n          \" L\" + (x - d) + \" \" + (y - r) +\n          \" L\" + (x - d) + \" \" + (y + r) +\n          \" Z\"}\n          fill=\"none\"\n\n          stroke=\"#000000\"/>\n      </g>\n    );\n  }\n}\n\nexport default InitialMarkerRenderer;\n","import React from 'react';\nimport './FSAGraphRenderer.css';\n\nimport FSANodeRenderer from './FSANodeRenderer.js';\nimport FSAEdgeRenderer from './FSAEdgeRenderer.js';\nimport InitialMarkerRenderer from './InitialMarkerRenderer.js';\n\nclass FSAGraphRenderer extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  //Override\n  render()\n  {\n    //Inherits props from parent\n    const currentModule = this.props.currentModule;\n    const inputController = currentModule.getInputController();\n    const graphController = currentModule.getGraphController();\n    const graph = graphController.getGraph();\n\n    return (\n      <g>\n        {/* Graph origin crosshair */\n          !graph.isEmpty() &&\n          <>\n            <line className=\"graph-ui\" x1=\"0\" y1=\"-5\" x2=\"0\" y2=\"5\" stroke=\"var(--color-viewport-back-detail)\"/>\n            <line className=\"graph-ui\" x1=\"-5\" y1=\"0\" x2=\"5\" y2=\"0\" stroke=\"var(--color-viewport-back-detail)\"/>\n          </>}\n\n        {graph.getNodes().map((e, i) => <FSANodeRenderer key={e.getGraphElementID() || i} node={e}/>)}\n        {graph.getEdges().map((e, i) => <FSAEdgeRenderer key={e.getGraphElementID() || i} edge={e}/>)}\n\n        {/* Initial marker and ghost */}\n        { graph.getStartNode() && (inputController.ghostInitialMarker == null ?\n          <InitialMarkerRenderer node={graph.getStartNode()}/> :\n          <InitialMarkerRenderer node={inputController.ghostInitialMarker}/>) }\n      </g>\n    );\n  }\n}\n\nexport default FSAGraphRenderer;\n","import React from 'react';\nimport Style from './FSALabelEditorRenderer.css';\n\nimport GraphEdge from 'graph/GraphEdge.js';\nimport GraphNode from 'graph/GraphNode.js';\nimport PatternInputButton from 'system/patterninput/PatternInputButton.js';\nimport { SYMBOL_SEPARATOR, EMPTY_CHAR } from 'modules/fsa/graph/FSAEdge.js';\n\nconst RECOMMENDED_SYMBOLS = [\"0\", \"1\"];\nconst DEFAULT_SYMBOLS = [EMPTY_CHAR];\n\nclass FSALabelEditorRenderer extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  renderSymbol(symbol)\n  {\n    const labelEditor = this.props.parent;\n    if (!labelEditor) return null;\n\n    const inputComponent = labelEditor.inputComponent;\n    return (\n      <PatternInputButton key={symbol} parent={inputComponent} title={symbol}\n        onClick={e=>inputComponent.appendValue(symbol, SYMBOL_SEPARATOR)}/>\n    );\n  }\n\n  //Override\n  render()\n  {\n    const labelEditor = this.props.parent;\n    const currentModule = this.props.currentModule;\n    const machineController = currentModule.getMachineController();\n    const alphabet = machineController.getAlphabet();\n\n    const showEdgeTray = labelEditor && labelEditor.getTarget() instanceof GraphEdge;\n    const showNodeTray = labelEditor && labelEditor.getTarget() instanceof GraphNode;\n    const showDefault = true;\n    const showRecommended = !alphabet || alphabet.length <= 1;\n\n    return (\n      <div className={Style.tray_container}>\n        {showEdgeTray && <span>\n          <span className={Style.tray_used}>\n            {alphabet.map(e => this.renderSymbol(e))}\n          </span>\n          <span className={Style.tray_default}>\n            {showRecommended &&\n              RECOMMENDED_SYMBOLS.map(e => this.renderSymbol(e))}\n            {showDefault &&\n              DEFAULT_SYMBOLS.map(e => this.renderSymbol(e))}\n          </span>\n        </span>}\n        {showNodeTray && <span>\n            <PatternInputButton parent={labelEditor.inputComponent}\n              title={labelEditor.getTarget().getNodeCustom() ? \"Custom\" : \"Auto\"}\n              onClick={() => {labelEditor.getTarget().setNodeCustom(!labelEditor.getTarget().getNodeCustom())}}/>\n            <PatternInputButton parent={labelEditor.inputComponent}\n              title={labelEditor.getTarget().getNodeAccept() ? \"Accept\" : \"Reject\"}\n              onClick={() => {labelEditor.getTarget().setNodeAccept(!labelEditor.getTarget().getNodeAccept())}}/>\n        </span>}\n      </div>\n    );\n  }\n}\n\nexport default FSALabelEditorRenderer;\n","import React from 'react';\nimport Style from './StateListElement.css';\n\nconst SUBMIT_KEY_CODE = \"Enter\";\nconst CANCEL_KEY_CODE = \"Escape\";\n\nclass StateListElement extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.state = {\n      value: null,\n      error: false\n    };\n\n    this.onValueChange = this.onValueChange.bind(this);\n    this.onFocus = this.onFocus.bind(this);\n    this.onBlur = this.onBlur.bind(this);\n    this.onKeyDown = this.onKeyDown.bind(this);\n    this.onKeyUp = this.onKeyUp.bind(this);\n  }\n\n  onFocus(e)\n  {\n    const target = e.target;\n    const node = this.props.node;\n\n    const nodeLabel = node ? node.getNodeLabel() : null;\n    this.setState({\n      value: nodeLabel,\n      error: false\n    }, () => target.select());\n\n    //Call any listening focus\n    if (this.props.onFocus) this.props.onFocus(e, this);\n  }\n\n  onBlur(e)\n  {\n    const nextLabel = this.state.value;\n\n    //Reset to nothing (will use node.getNodeLabel() instead)\n    this.setState({ value: null, error: false });\n\n    //Call any listening blurs\n    if (this.props.onBlur) this.props.onBlur(e, this, nextLabel);\n  }\n\n  onKeyDown(e)\n  {\n    const keyCode = e.key;\n    if (keyCode === SUBMIT_KEY_CODE || keyCode === CANCEL_KEY_CODE)\n    {\n      e.preventDefault();\n      e.stopPropagation();\n    }\n  }\n\n  onKeyUp(e)\n  {\n    const keyCode = e.key;\n    const target = e.target;\n\n    if (keyCode === SUBMIT_KEY_CODE)\n    {\n      target.blur();\n    }\n    else if (keyCode === CANCEL_KEY_CODE)\n    {\n      this.setState({\n        value: null,\n        error: false\n      }, () => target.blur());\n    }\n  }\n\n  onValueChange(e)\n  {\n    let value = e.target.value.trim();\n    let error = false;\n\n    if (this.props.onChange)\n    {\n      try\n      {\n        this.props.onChange(e, this, value);\n      }\n      catch(e)\n      {\n        error = true;\n      }\n    }\n\n    this.setState({\n      value: value,\n      error: error\n    });\n  }\n\n  //Override\n  render()\n  {\n    const node = this.props.node;\n    const inputValue = this.state.value;\n\n    const nodeLabel = node ? node.getNodeLabel() : \"\";\n    const nodeCustom = node ? (node.getNodeCustom() || inputValue !== null && inputValue !== nodeLabel) : false;\n    const nodeAccept = node ? node.getNodeAccept() : false;\n    //Must check for null, not ONLY truthy because value might be empty string.\n    const displayValue = inputValue === null ? nodeLabel : inputValue;\n\n    return (\n      <div id={this.props.id}\n        className={Style.element_container +\n          (nodeCustom ? \" custom \" : \"\") +\n          ((!node.getNodeCustom() && displayValue.length <= 0) ? \" empty \" : \"\") +\n          (inputValue !== null && this.state.error ? \" error \" : \"\") +\n          (nodeAccept ? \" accept \" : \"\") +\n          \" \" + this.props.className}\n        style={this.props.style}>\n        <input\n          spellCheck={false}\n          style={{width: displayValue.length + \"ch\"}}\n          value={displayValue}\n          onChange={this.onValueChange}\n          onFocus={this.onFocus}\n          onBlur={this.onBlur}\n          onKeyDown={this.onKeyDown}\n          onKeyUp={this.onKeyUp}/>\n      </div>\n    );\n  }\n}\n\nexport default StateListElement;\n","import React from 'react';\nimport Style from './StateListView.css';\n\nimport IconButton from 'experimental/components/IconButton.js';\nimport BoxAddIcon from 'experimental/iconset/BoxAddIcon.js';\nimport TriangleIcon from 'experimental/iconset/TriangleIcon.js';\n\nimport StateListElement from './StateListElement.js';\n\nclass StateListView extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this._prevX = 0;\n    this._prevY = 0;\n\n    this.onElementAdd = this.onElementAdd.bind(this);\n    this.onElementFocus = this.onElementFocus.bind(this);\n    this.onElementBlur = this.onElementBlur.bind(this);\n    this.onElementChange = this.onElementChange.bind(this);\n  }\n\n  onElementAdd(e)\n  {\n    const graphController = this.props.graphController;\n    this._prevX += 16;\n    this._prevY += 16;\n    const node = graphController.createNode(this._prevX, this._prevY);\n    graphController.focusOnNode(node);\n  }\n\n  onElementFocus(e, element)\n  {\n    this._prevX = element.props.node.x;\n    this._prevY = element.props.node.y;\n    const graphController = this.props.graphController;\n    graphController.focusOnNode(element.props.node);\n  }\n\n  onElementBlur(e, element, nextLabel)\n  {\n    const node = element.props.node;\n    if (!node) return;\n\n    const graphController = this.props.graphController;\n\n    //The value is already processed, abort\n    if (nextLabel !== null)\n    {\n      const graph = graphController.getGraph();\n      if (nextLabel.length > 0)\n      {\n        const otherNodes = graph.getNodesByLabel(nextLabel);\n        if (otherNodes.length <= 0)\n        {\n          //None other have the same name. Rename it!\n          graphController.renameNode(node, nextLabel);\n        }\n        else\n        {\n          //Found something already named that! Ignore!\n        }\n      }\n      else if (node.getNodeCustom())\n      {\n        //Remove custom naming instead of deleting.\n        node.setNodeCustom(false);\n        graphController.applyAutoRename();\n      }\n      else\n      {\n        //Delete!\n        graphController.deleteTargetNode(node);\n      }\n    }\n  }\n\n  onElementChange(e, element, value)\n  {\n    const graphController = this.props.graphController;\n\n    if (value.length > 0)\n    {\n      const graph = graphController.getGraph();\n      const otherNodes = graph.getNodesByLabel(value);\n\n      //If there are more than 1 nodes by the same name,\n      //OR if the duplicate node found is NOT the same node\n      if (otherNodes.length > 1 || (otherNodes.length === 1 && otherNodes[0] !== element.props.node))\n      {\n        throw new Error(\"Not a valid node label\");\n      }\n    }\n  }\n\n  //Override\n  render()\n  {\n    const graphController = this.props.graphController;\n    const graph = graphController.getGraph();\n    const nodes = graph.getNodes();\n\n    return (\n      <div id={this.props.id}\n        className={Style.list_container}\n        style={this.props.style}>\n        <div className={Style.element_list}>\n          <TriangleIcon className={Style.first_marker}/>\n          {nodes.map(e => <StateListElement key={e.getGraphElementID()}\n              node={e}\n              onFocus={this.onElementFocus}\n              onBlur={this.onElementBlur}\n              onChange={this.onElementChange}/>)}\n        </div>\n        <IconButton className={Style.add_button}\n          title=\"Add State\"\n          onClick={this.onElementAdd}>\n          <BoxAddIcon/>\n        </IconButton>\n      </div>\n    );\n  }\n}\n\nexport default StateListView;\n","import React from 'react';\nimport Style from './AlphabetListElement.css';\n\nconst SUBMIT_KEY_CODE = \"Enter\";\nconst CANCEL_KEY_CODE = \"Escape\";\n\nclass AlphabetListElement extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this._inputElement = null;\n\n    this.state = {\n      value: null,\n      error: false\n    };\n\n    this.onValueChange = this.onValueChange.bind(this);\n    this.onFocus = this.onFocus.bind(this);\n    this.onBlur = this.onBlur.bind(this);\n    this.onKeyDown = this.onKeyDown.bind(this);\n    this.onKeyUp = this.onKeyUp.bind(this);\n  }\n\n  onFocus(e)\n  {\n    const target = e.target;\n    const symbol = this.props.symbol;\n\n    this.setState({\n      value: symbol,\n      error: false\n    }, () => target.select());\n\n    //Call any listening focus\n    if (this.props.onFocus) this.props.onFocus(e, this);\n  }\n\n  onBlur(e)\n  {\n    const nextSymbol = this.state.value;\n\n    //Call any listening blurs\n    if (this.props.onBlur) this.props.onBlur(e, this, nextSymbol);\n\n    //Reset to nothing (will use props.symbol instead)\n    this.setState({ value: null, error: false });\n  }\n\n  onKeyDown(e)\n  {\n    const keyCode = e.key;\n    if (keyCode === SUBMIT_KEY_CODE || keyCode === CANCEL_KEY_CODE)\n    {\n      e.preventDefault();\n      e.stopPropagation();\n    }\n  }\n\n  onKeyUp(e)\n  {\n    const keyCode = e.key;\n    const target = e.target;\n\n    if (keyCode === SUBMIT_KEY_CODE)\n    {\n      target.blur();\n    }\n    else if (keyCode === CANCEL_KEY_CODE)\n    {\n      this.setState({\n        value: null,\n        error: false\n      }, () => target.blur());\n    }\n  }\n\n  onValueChange(e)\n  {\n    let value = e.target.value.trim();\n    let error = false;\n\n    if (this.props.onChange)\n    {\n      try\n      {\n        this.props.onChange(e, this, value);\n      }\n      catch(e)\n      {\n        error = true;\n      }\n    }\n\n    this.setState({\n      value: value,\n      error: error\n    });\n  }\n\n  focus()\n  {\n    this._inputElement.focus();\n  }\n\n  //Override\n  render()\n  {\n    const inputSymbol = this.state.value;\n    const displaySymbol = inputSymbol === null ? this.props.symbol : inputSymbol;\n\n    const symbolUsed = this.props.used || false;\n\n    return (\n      <div id={this.props.id}\n        className={Style.element_container +\n          (displaySymbol !== null && displaySymbol.length <= 0 ? \" empty \" : \"\") +\n          (inputSymbol !== null && this.state.error ? \" error \" : \"\") +\n          (symbolUsed ? \" used \" : \"\") +\n          \" \" + this.props.className}\n        style={this.props.style}>\n        <input ref={ref=>this._inputElement=ref}\n          spellCheck={false}\n          maxLength={1}\n          style={{width: \"1ch\"}}\n          value={displaySymbol}\n          onChange={this.onValueChange}\n          onFocus={this.onFocus}\n          onBlur={this.onBlur}\n          onKeyDown={this.onKeyDown}\n          onKeyUp={this.onKeyUp}/>\n      </div>\n    );\n  }\n}\n\nexport default AlphabetListElement;\n","import React from 'react';\nimport Style from './AlphabetListView.css';\n\nimport IconButton from 'experimental/components/IconButton.js';\nimport BoxAddIcon from 'experimental/iconset/BoxAddIcon.js';\n\nimport AlphabetListElement from './AlphabetListElement.js';\n\nclass AlphabetListView extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.newSymbolComponent = null;\n\n    this.state = {\n      useNewSymbol: false\n    };\n\n    this.onElementAdd = this.onElementAdd.bind(this);\n    this.onElementFocus = this.onElementFocus.bind(this);\n    this.onElementBlur = this.onElementBlur.bind(this);\n    this.onElementChange = this.onElementChange.bind(this);\n  }\n\n  onElementAdd(e)\n  {\n    //Create a new alphabet element...\n    this.setState({useNewSymbol: true}, () => {\n      this.newSymbolComponent.focus();\n    });\n  }\n\n  onElementFocus(e, element)\n  {\n    //Do nothing...\n  }\n\n  onElementBlur(e, element, nextSymbol)\n  {\n    const symbol = element.props.symbol;\n    const machineController = this.props.machineController;\n\n    if (nextSymbol !== null)\n    {\n      const machine = machineController.getMachineBuilder().getMachine();\n      if (nextSymbol.length > 0)\n      {\n        if (!machine.isSymbol(nextSymbol))\n        {\n          if (symbol)\n          {\n            //None other have the same name. Rename it!\n            machineController.renameSymbol(symbol, nextSymbol);\n          }\n          else\n          {\n            //None other have the same name. Create it!\n            machineController.createSymbol(nextSymbol);\n          }\n        }\n        else\n        {\n          //Found something already named that! Ignore!\n        }\n      }\n      else if (symbol)\n      {\n        //Delete!\n        machineController.deleteSymbol(symbol);\n      }\n    }\n\n    //Regardless, just close the \"new\" alphabet element if open.\n    if (this.state.useNewSymbol)\n    {\n      this.setState({ useNewSymbol: false });\n    }\n  }\n\n  onElementChange(e, element, symbol)\n  {\n    const machineController = this.props.machineController;\n\n    if (symbol.length > 0)\n    {\n      //If there are more than 1 symbols by the same name,\n      //OR if the duplicate symbol found is NOT the same symbol\n      const machine = machineController.getMachineBuilder().getMachine();\n      if (machine.isSymbol(symbol) && symbol !== element.props.symbol)\n      {\n        throw new Error(\"Not a valid symbol\");\n      }\n    }\n  }\n\n  renderAlphabetList(machine, alphabet)\n  {\n    const result = [];\n    for(const symbol of alphabet)\n    {\n      if (!symbol) continue;\n\n      result.push(<AlphabetListElement key={symbol}\n        symbol={symbol}\n        used={machine.isUsedSymbol(symbol)}\n        onFocus={this.onElementFocus}\n        onBlur={this.onElementBlur}\n        onChange={this.onElementChange}/>);\n    }\n    return result;\n  }\n\n  //Override\n  render()\n  {\n    const machineController = this.props.machineController;\n    const machine = machineController.getMachineBuilder().getMachine();\n    const alphabet = machine.getAlphabet();\n\n    return (\n      <div id={this.props.id}\n        className={Style.list_container}\n        style={this.props.style}>\n        <div className={Style.element_list}>\n          {this.renderAlphabetList(machine, alphabet)}\n          <AlphabetListElement\n            ref={ref=>this.newSymbolComponent=ref}\n            style={{display: this.state.useNewSymbol ? \"block\" : \"none\"}}\n            symbol={\"\"}\n            onFocus={this.onElementFocus}\n            onBlur={this.onElementBlur}\n            onChange={this.onElementChange}/>\n        </div>\n        <IconButton className={Style.add_button}\n          title=\"Add Symbol\"\n          onClick={this.onElementAdd}>\n          <BoxAddIcon/>\n        </IconButton>\n      </div>\n    );\n  }\n}\n\nexport default AlphabetListView;\n","import React from 'react';\nimport Style from './TransitionChartView.css';\n\nimport { EMPTY_CHAR } from 'modules/fsa/graph/FSAEdge.js';\nimport { EMPTY_SYMBOL } from 'modules/fsa2/machine/FSA.js';\n\nclass TransitionChartView extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    //NOTE: this only works if machine hashing is faster than a re-calculate\n    this._cachedMachineHash = 0;\n    this._cachedMachineComponents = [];\n  }\n\n  //Override\n  componentWillUnmount()\n  {\n    //Reset cached components for re-rendering\n    this._cachedMachineHash = 0;\n    this._cachedMachineComponents.length = 0;\n  }\n\n  renderTransitionEntry(machine, state, symbol)\n  {\n    const deterministic = machine.isDeterministic();\n\n    let destinations = machine.doTransition(state, symbol, true);\n    let transitionString = \"\";\n    let error = false;\n\n    if (destinations.length <= 0)\n    {\n      if (deterministic)\n      {\n        error = true;\n        transitionString = \"-\";\n        if (symbol === EMPTY_SYMBOL)\n        {\n          //Don't show missing empty transitions for DFA's\n          return null;\n        }\n      }\n      else\n      {\n        //Don't show missing transitions for NFA's\n        return null;\n      }\n    }\n    else if (destinations.length === 1)\n    {\n      //Regardless if it's deterministic, it is a valid transition\n      error = false;\n      transitionString = destinations[0].getStateLabel();\n\n      if (!deterministic) transitionString = \"{\" + transitionString + \"}\";\n    }\n    else\n    {\n      //If it's deterministic, it is not valid\n      if (deterministic) error = true;\n\n      let string = \"\";\n      for(const state of destinations)\n      {\n        if (string.length > 0) string += \",\";\n        string += state.getStateLabel();\n      }\n      transitionString = \"{\" + string + \"}\";\n    }\n\n    //Convert empty symbol to the expected char value\n    if (symbol === EMPTY_SYMBOL)\n    {\n      symbol = EMPTY_CHAR;\n\n      //DFA's can't have empty symbols\n      if (deterministic) error = true;\n    }\n\n    return (\n      <tr key={state.getStateID() + \":\" + symbol}>\n        <td className={Style.chart_key + (error ? \" error \" : \"\")}>{\"(\" + state.getStateLabel() + \",\" + symbol + \")\"}</td>\n        <td className={Style.chart_value + (error ? \" error \" : \"\")}>{transitionString}</td>\n      </tr>\n    );\n  }\n\n  renderTransitionTable(machine)\n  {\n    const machineHash = machine.getHashCode();\n    if (machineHash !== this._cachedMachineHash)\n    {\n      this._cachedMachineHash = machineHash;\n    }\n    else\n    {\n      return this._cachedMachineComponents;\n    }\n\n    const result = this._cachedMachineComponents = [];\n    const deterministic = machine.isDeterministic();\n\n    for(const state of machine.getStates())\n    {\n      let entry = null;\n\n      //The empty transitions...\n      entry = this.renderTransitionEntry(machine, state, EMPTY_SYMBOL);\n      if (entry) result.push(entry);\n\n      //The other transitions...\n      for(const symbol of machine.getAlphabet())\n      {\n        entry = this.renderTransitionEntry(machine, state, symbol);\n        if (entry) result.push(entry);\n      }\n    }\n    return result;\n  }\n\n  //Override\n  render()\n  {\n    const machineController = this.props.machineController;\n    const machine = machineController.getMachineBuilder().getMachine();\n    const deterministic = machineController.getMachineType() === 'DFA';\n\n    return (\n      <div id={this.props.id}\n        className={Style.chart_container +\n        \" \" + this.props.className}\n        style={this.props.style}>\n        <table>\n          <tbody>\n            <tr>\n              <th>\n                {\"Q\\u00d7\\u03A3\"}\n              </th>\n              <th>\n                {deterministic ?\n                  <span>{\"Q\"}</span> :\n                  <span>\n                    <span style={{fontFamily: \"cursive\"}}>{\"P\"}</span>\n                    <span>{\"(Q)\"}</span>\n                  </span>}\n              </th>\n            </tr>\n            {this.renderTransitionTable(machine)}\n          </tbody>\n        </table>\n      </div>\n    );\n  }\n}\n\nexport default TransitionChartView;\n","import React from 'react';\nimport Style from './TransitionTableView.css';\n\nimport { EMPTY_CHAR } from 'modules/fsa/graph/FSAEdge.js';\nimport { EMPTY_SYMBOL } from 'modules/fsa2/machine/FSA.js';\n\nconst SYMBOL_AXIS = \"symbols\";\nconst STATE_AXIS = \"states\";\n\nclass TransitionTableView extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.state = {\n      rowAxis: SYMBOL_AXIS\n    };\n\n    this.onRowAxisSwitch = this.onRowAxisSwitch.bind(this);\n  }\n\n  onRowAxisSwitch(e)\n  {\n    this.setState((prev, props) => {\n      return {\n        rowAxis: prev.rowAxis === SYMBOL_AXIS ? STATE_AXIS : SYMBOL_AXIS\n      };\n    });\n  }\n\n  renderTableEntryForSymbolAxis(machine, state, symbol)\n  {\n    const deterministic = machine.isDeterministic();\n    const destinations = machine.doTransition(state, symbol);\n    let transitionString = \"\";\n    let error = false;\n\n    if (destinations.length <= 0)\n    {\n      if (deterministic && symbol !== EMPTY_SYMBOL) error = true;\n      transitionString = \"-\";\n    }\n    else if (destinations.length === 1)\n    {\n      if (deterministic && symbol === EMPTY_SYMBOL) error = true;\n      transitionString = destinations[0].getStateLabel();\n    }\n    else\n    {\n      if (deterministic) error = true;\n      let string = \"\";\n      for(const other of destinations)\n      {\n        if (string.length > 0) string += \",\";\n        string += other.getStateLabel();\n      }\n      transitionString = \"{\" + string + \"}\";\n    }\n\n    const disabled = deterministic && symbol === EMPTY_SYMBOL;\n\n    return (\n      <td key={state.getStateID() + \":\" + symbol}\n        className={Style.table_entry +\n          (error ? \" error \" : \"\") +\n          (disabled ? \" disabled \" : \"\")}>\n        {transitionString}\n      </td>\n    );\n  }\n\n  renderTableEntries(machine, rowAxis)\n  {\n    const deterministic = machine.isDeterministic();\n\n    const result = [];\n    for(const state of machine.getStates())\n    {\n      const rowComponents = [];\n      switch(rowAxis)\n      {\n        case SYMBOL_AXIS:\n          for(const symbol of machine.getAlphabet())\n          {\n            rowComponents.push(this.renderTableEntryForSymbolAxis(machine, state, symbol));\n          }\n          rowComponents.push(this.renderTableEntryForSymbolAxis(machine, state, EMPTY_SYMBOL));\n        break;\n        case STATE_AXIS:\n          for(const other of machine.getStates())\n          {\n            const symbols = machine.getTransitionSymbols(state, other);\n            let string = \"\";\n            if (symbols)\n            {\n              for(const symbol of symbols)\n              {\n                if (string.length > 0) string += \"\\n\";\n                if (symbol === EMPTY_SYMBOL) string += EMPTY_CHAR;\n                else string += symbol;\n              }\n            }\n            else\n            {\n              string = \"-\";\n            }\n            rowComponents.push(\n              <td key={state.getStateID() + \":\" + other.getStateID()}>\n                {string}\n              </td>\n            );\n          }\n        break;\n        default:\n          throw new Error(\"Unknown row axis type \\'\" + rowAxis + \"\\'\");\n      }\n      result.push(\n        <tr key={state.getStateID()}>\n          <th scope=\"row\" className={Style.table_axis_header + \" row\"}>\n            {state.getStateLabel()}\n          </th>\n          {rowComponents}\n        </tr>\n      );\n    }\n    return result;\n  }\n\n  renderTableAxis(machine, rowAxis)\n  {\n    let result = [];\n    switch(rowAxis)\n    {\n      case SYMBOL_AXIS:\n        for(const symbol of machine.getAlphabet())\n        {\n          result.push(\n            <th key={symbol} scope=\"col\" className={Style.table_axis_header + \" col\"}>\n              {symbol}\n            </th>\n          );\n        }\n        const disabled = machine.isDeterministic();\n        result.push(\n          <th key={EMPTY_SYMBOL} scope=\"col\"\n            className={Style.table_axis_header +\n              (disabled ? \" disabled \" : \"\") +\n              \" col\"}>\n            {EMPTY_CHAR}\n          </th>\n        );\n        return result;\n      case STATE_AXIS:\n        for(const state of machine.getStates())\n        {\n          result.push(\n            <th key={state.getStateID()} scope=\"col\" className={Style.table_axis_header + \" col\"}>\n              {state.getStateLabel()}\n            </th>\n          );\n        }\n        return result;\n      default:\n        throw new Error(\"Unknown row axis type \\'\" + rowAxis + \"\\'\");\n    }\n  }\n\n  //Override\n  render()\n  {\n    const rowAxis = this.state.rowAxis;\n    const machineController = this.props.machineController;\n    const machine = machineController.getMachineBuilder().getMachine();\n\n    return (\n      <div id={this.props.id}\n        className={Style.table_container +\n          \" \" + this.props.className}\n        style={this.props.style}>\n        <table>\n          <tbody>\n            <tr>\n              <th>\n                <button onClick={this.onRowAxisSwitch}>\n                  {rowAxis === SYMBOL_AXIS ? \"Q/\\u03A3\" : \"Q/Q\"}\n                </button>\n              </th>\n              {this.renderTableAxis(machine, rowAxis)}\n            </tr>\n            {this.renderTableEntries(machine, rowAxis)}\n          </tbody>\n        </table>\n      </div>\n    );\n  }\n}\n\nexport default TransitionTableView;\n","import React from 'react';\nimport Style from './AutoStateLabelView.css';\n\nimport FormattedInput from 'system/formattedinput/FormattedInput.js';\n\nclass AutoStateLabelView extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.onAutoStatePrefixSubmit = this.onAutoStatePrefixSubmit.bind(this);\n    this.onAutoStatePrefixFormat = this.onAutoStatePrefixFormat.bind(this);\n  }\n\n  onAutoStatePrefixSubmit(next, prev)\n  {\n    const graphController = this.props.graphController;\n    const graphLabeler = graphController.getGraphLabeler();\n\n    const prefix = graphLabeler.getDefaultNodeLabelPrefix();\n    if (prefix != next)\n    {\n      graphLabeler.setDefaultNodeLabelPrefix(next);\n      graphController.applyAutoRename();\n    }\n  }\n\n  onAutoStatePrefixFormat(value)\n  {\n    return value && value.length > 0 ? value :\n      this.props.graphController.getGraphLabeler().getDefaultNodeLabelPrefix();\n  }\n\n  //Override\n  render()\n  {\n    const graphController = this.props.graphController;\n\n    return (\n      <div id={this.props.id}\n        className={Style.select_container +\n          \" \" + this.props.className}\n        style={this.props.style}>\n        <label className={Style.select_label}>\n          State Labels\n        </label>\n        <FormattedInput\n          className={Style.prefix_editor}\n          defaultValue={graphController.getGraphLabeler().getDefaultNodeLabelPrefix()}\n          captureOnExit=\"save\"\n          formatter={this.onAutoStatePrefixFormat}\n          onSubmit={this.onAutoStatePrefixSubmit}/>\n        <select className={Style.postfix_selector}\n          onChange={this.onMachineTypeChange}\n          disabled={true}>\n          <option>0-9</option>\n          <option>a-z</option>\n          <option>A-Z</option>\n        </select>\n      </div>\n    );\n  }\n}\n\nexport default AutoStateLabelView;\n","import React from 'react';\nimport Style from './OverviewPanel.css';\n\nimport PanelContainer from 'experimental/panels/PanelContainer.js';\nimport PanelSection from 'experimental/panels/PanelSection.js';\nimport PanelDivider from 'experimental/panels/PanelDivider.js';\nimport PanelSwitch from 'experimental/panels/PanelSwitch.js';\n\nimport StateListView from './states/StateListView.js';\nimport AlphabetListView from './alphabet/AlphabetListView.js';\nimport TransitionChartView from './transitions/TransitionChartView.js';\nimport TransitionTableView from './transitions/TransitionTableView.js';\nimport AutoStateLabelView from './AutoStateLabelView.js';\n\nconst MACHINE_TYPE_DFA = \"DFA\";\nconst MACHINE_TYPE_NFA = \"NFA\";\n\nclass OverviewPanel extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.onMachineTypeChange = this.onMachineTypeChange.bind(this);\n    this.onAutoLayoutApply = this.onAutoLayoutApply.bind(this);\n    this.onAutoLayoutChange = this.onAutoLayoutChange.bind(this);\n    this.onAutoLabelChange = this.onAutoLabelChange.bind(this);\n    this.onSnapToGridChange = this.onSnapToGridChange.bind(this);\n  }\n\n  onMachineTypeChange(e)\n  {\n    const newValue = e.target.value;\n\n    const session = this.props.session;\n    const currentModule = session.getCurrentModule();\n    const machineController = currentModule.getMachineController();\n    const machine = machineController.getMachineBuilder().getMachine();\n\n    switch(newValue)\n    {\n      case MACHINE_TYPE_DFA:\n        machine.setDeterministic(true);\n        break;\n      case MACHINE_TYPE_NFA:\n        machine.setDeterministic(false);\n        break;\n      default:\n        throw new Error(\"Unknown machine type \\'\" + newValue + \"\\'\");\n    }\n  }\n\n  onAutoLayoutApply(e)\n  {\n    const currentModule = this.props.session.getCurrentModule();\n    const graphController = currentModule.getGraphController();\n    graphController.applyAutoLayout();\n  }\n\n  onAutoLayoutChange(e)\n  {\n    //TODO: Not yet implemented...\n  }\n\n  onAutoLabelChange(e)\n  {\n    const currentModule = this.props.session.getCurrentModule();\n    const graphController = currentModule.getGraphController();\n    graphController.setAutoRenameNodes(e.target.checked);\n  }\n\n  onSnapToGridChange(e)\n  {\n    //TODO: Not yet implemented...\n  }\n\n  //Override\n  render()\n  {\n    const drawer = this.props.drawer;\n    const session = this.props.session;\n    const currentModule = session.getCurrentModule();\n    const graphController = currentModule.getGraphController();\n    const machineController = currentModule.getMachineController();\n    const machineType = machineController.getMachineBuilder().getMachine().isDeterministic() ? MACHINE_TYPE_DFA : MACHINE_TYPE_NFA;\n    const autoRename = graphController.shouldAutoRenameNodes();\n\n    const drawerFull = drawer.isDrawerFullscreen();\n\n    return (\n      <PanelContainer id={this.props.id}\n        className={this.props.className}\n        style={this.props.style}\n        title={OverviewPanel.TITLE}>\n\n        <select className={Style.machine_type_select}\n          value={machineType}\n          onChange={this.onMachineTypeChange}>\n          <option>{MACHINE_TYPE_DFA}</option>\n          <option>{MACHINE_TYPE_NFA}</option>\n        </select>\n\n        <PanelDivider/>\n\n        <PanelSection title={\"States\"} initial={true} full={drawerFull}>\n          <StateListView graphController={graphController}/>\n        </PanelSection>\n        <PanelSection title={\"Alphabet\"} initial={true} full={drawerFull}>\n          <AlphabetListView machineController={machineController}/>\n        </PanelSection>\n\n        <PanelDivider/>\n\n        <PanelSection title={\"Transition Chart\"} full={drawerFull} disabled={graphController.getGraph().getEdgeCount() <= 0}>\n          <TransitionChartView machineController={machineController}/>\n        </PanelSection>\n        <PanelSection title={\"Transition Table\"} full={drawerFull} disabled={graphController.getGraph().getNodeCount() <= 0}>\n          <TransitionTableView machineController={machineController}/>\n        </PanelSection>\n\n        <PanelDivider/>\n\n        <AutoStateLabelView graphController={graphController}/>\n\n        <button className={Style.autolayout_button} onClick={this.onAutoLayoutApply} disabled={graphController.getGraph().isEmpty()}>\n          {I18N.toString(\"action.overview.autolayout\")}\n        </button>\n\n        <PanelDivider/>\n\n        <PanelSwitch id={\"overview-auto-label\"}\n          checked={autoRename}\n          title={\"Auto rename nodes\"}\n          onChange={this.onAutoLabelChange}/>\n        <PanelSwitch id={\"overview-auto-layout\"}\n          checked={false}\n          title={\"Auto layout nodes\"}\n          disabled={true}\n          onChange={this.onAutoLayoutChange}/>\n        <PanelSwitch id={\"overview-snap-grid\"}\n          checked={false}\n          title={\"Snap-to-grid\"}\n          disabled={true}\n          onChange={this.onSnapToGridChange}/>\n\n      </PanelContainer>\n    );\n  }\n}\nObject.defineProperty(OverviewPanel, 'TITLE', {\n  get: function() { return I18N.toString(\"component.overview.title\"); }\n});\n\nexport default OverviewPanel;\n","import React from 'react';\nimport Style from './TestItem.css';\n\nimport IconButton from 'experimental/components/IconButton.js';\nimport SubtractIcon from 'experimental/iconset/SubtractIcon.js';\nimport CheckCircleIcon from 'experimental/iconset/CheckCircleIcon.js';\nimport CrossCircleIcon from 'experimental/iconset/CrossCircleIcon.js';\nimport PendingIcon from 'experimental/iconset/PendingIcon.js';\nimport RunningManIcon from 'experimental/iconset/RunningManIcon.js';\nimport WalkingManIcon from 'experimental/iconset/WalkingManIcon.js';\n\nexport const DEFAULT_MODE = \"default\";\nexport const SUCCESS_MODE = \"success\";\nexport const FAILURE_MODE = \"failure\";\nexport const WORKING_MODE = \"working\";\n\nclass TestItem extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.inputElement = null;\n\n    this.state = {\n      value: this.props.defaultValue || \"\",\n      status: DEFAULT_MODE\n    };\n\n    this.onChange = this.onChange.bind(this);\n  }\n\n  focus()\n  {\n    if (this.inputElement)\n    {\n      this.inputElement.focus();\n    }\n  }\n\n  setValue(value, callback=null)\n  {\n    if (this.state.value !== value)\n    {\n      this.setState({value: value}, callback);\n    }\n    else if (callback)\n    {\n      callback();\n    }\n  }\n\n  setStatus(status, callback=null)\n  {\n    if (this.state.status !== status)\n    {\n      this.setState({status: status}, callback);\n    }\n    else if (callback)\n    {\n      callback();\n    }\n  }\n\n  resetStatus(callback=null)\n  {\n    if (this.state.status !== DEFAULT_MODE)\n    {\n      this.setState({status: DEFAULT_MODE}, callback);\n    }\n    else if (callback)\n    {\n      callback();\n    }\n  }\n\n  getValue()\n  {\n    return this.state.value;\n  }\n\n  getStatus()\n  {\n    return this.state.status;\n  }\n\n  onChange(e)\n  {\n    const nextValue = e.target.value;\n    if (this.state.value !== nextValue)\n    {\n      this.setState({value: nextValue, status: DEFAULT_MODE});\n    }\n  }\n\n  //Override\n  render()\n  {\n    const onDelete = this.props.onDelete;\n    const showDelete = true;\n\n    const onTest = this.props.onTest;\n    const showTest = true;\n\n    const active = this.props.active;\n    const subtitle = this.props.subtitle;\n    const placeholder = this.props.placeholder;\n    const status = this.state.status;\n\n    return (\n      <div id={this.props.id}\n        className={Style.test_item_container +\n          (active ? \" active \" : \"\") +\n          \" \" + status +\n          \" \" + this.props.className}\n        style={this.props.style}>\n        {showTest &&\n          <IconButton className={Style.test_button}\n            title={\"Test\"}\n            disabled={!onTest}\n            onClick={(e) => onTest(e, this)}>\n            {status === SUCCESS_MODE ?\n              <CheckCircleIcon/> :\n              status === FAILURE_MODE ?\n              <CrossCircleIcon/> :\n              status === WORKING_MODE ?\n              <PendingIcon/> :\n              <RunningManIcon/>}\n          </IconButton>}\n        <div className={Style.test_input}>\n          <input ref={ref=>this.inputElement=ref} type=\"text\"\n            placeholder={placeholder}\n            value={this.state.value}\n            onChange={this.onChange}/>\n          <label>{this.props.subtitle}</label>\n        </div>\n        {showDelete &&\n          <IconButton className={Style.delete_button}\n            title={\"Delete\"}\n            disabled={!onDelete}\n            onClick={(e) => onDelete(e, this)}>\n            <SubtractIcon/>\n          </IconButton>}\n      </div>\n    );\n  }\n}\n\nexport default TestItem;\n","import React from 'react';\nimport Style from './TestListView.css';\n\nimport { guid } from 'util/MathHelper.js';\nimport { downloadText } from 'util/Downloader.js';\n\nimport IconButton from 'experimental/components/IconButton.js';\nimport IconUploadButton from 'experimental/components/IconUploadButton.js';\n\nimport PageContentIcon from 'experimental/iconset/PageContentIcon.js';\nimport UploadIcon from 'experimental/iconset/UploadIcon.js';\nimport DownloadIcon from 'experimental/iconset/DownloadIcon.js';\nimport CrossIcon from 'experimental/iconset/CrossIcon.js';\nimport AddIcon from 'experimental/iconset/AddIcon.js';\nimport RunningManIcon from 'experimental/iconset/RunningManIcon.js';\nimport WalkingManIcon from 'experimental/iconset/WalkingManIcon.js';\n\nimport TestItem, {SUCCESS_MODE, FAILURE_MODE, WORKING_MODE, DEFAULT_MODE} from './TestItem.js';\n\nimport GraphChangeHandler from 'experimental/GraphChangeHandler.js';\n\nconst ACCEPT_FILE_TYPES = ['.txt'];\nconst TEST_FILENAME = \"test.txt\";\nconst TEST_REFRESH_TICKS = 30;\n\nclass TestListView extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this._testList = [];\n    this._testName = TEST_FILENAME;\n\n    this.onTestNew = this.onTestNew.bind(this);\n    this.onTestUpload = this.onTestUpload.bind(this);\n    this.onTestDownload = this.onTestDownload.bind(this);\n    this.onTestClose = this.onTestClose.bind(this);\n    this.onTestAdd = this.onTestAdd.bind(this);\n    this.onTestDelete = this.onTestDelete.bind(this);\n    this.onTestTest = this.onTestTest.bind(this);\n    this.onTestRunAll = this.onTestRunAll.bind(this);\n    this.onGraphChange = this.onGraphChange.bind(this);\n  }\n\n  //Override\n  componentDidMount()\n  {\n    this.props.graphController.getGraphChangeHandler().addListener(this.onGraphChange);\n  }\n\n  //Override\n  componentWillUnmount()\n  {\n    this.props.graphController.getGraphChangeHandler().removeListener(this.onGraphChange);\n  }\n\n  onGraphChange(graph)\n  {\n    for(const test of this._testList)\n    {\n      test.ref.resetStatus();\n    }\n  }\n\n  onTestNew(e)\n  {\n    if (!this.isEmpty())\n    {\n      this.onTestClose(e);\n    }\n\n    this.onTestAdd(e);\n  }\n\n  onTestUpload(fileBlob)\n  {\n    const reader = new FileReader();\n    reader.onload = (event) => {\n      try\n      {\n        this._testName = fileBlob.name;\n        this._testList.length = 0;\n\n        const tests = event.target.result.split(\"\\n\");\n        for(let test of tests)\n        {\n          test = test.trim();\n          if (test.length > 0)\n          {\n            this._testList.push({\n              id: guid(),\n              defaultValue: test,\n              ref: null\n            });\n          }\n        }\n\n        //Make sure an element exists, at least\n        if (this._testList.length <= 0)\n        {\n          this.onTestAdd(null);\n        }\n      }\n      catch(e)\n      {\n        reader.abort();\n      }\n    };\n    reader.readAsText(fileBlob);\n  }\n\n  onTestDownload(e)\n  {\n    const testStrings = [];\n    for(const test of this._testList)\n    {\n      const ref = test.ref;\n      if (ref)\n      {\n        testStrings.push(ref.getValue());\n      }\n    }\n\n    downloadText(this._testName, testStrings.join('\\n'));\n  }\n\n  onTestClose(e)\n  {\n    const tester = this.props.tester;\n    if (tester.isTesting())\n    {\n      tester.stopTest();\n    }\n\n    this._testList.length = 0;\n  }\n\n  onTestAdd(e)\n  {\n    this._testList.push({\n      id: guid(),\n      defaultValue: \"\",\n      ref: null\n    });\n  }\n\n  onTestRunAll(e)\n  {\n    const tester = this.props.tester;\n    let i = 0;\n\n    const nextTest = () => {\n      const test = this._testList[i];\n      this.onTestTest(null, test.ref, true, () => {\n        ++i;\n        if (i < this._testList.length)\n        {\n          nextTest();\n        }\n      });\n    }\n    nextTest();\n  }\n\n  onTestDelete(e, item)\n  {\n    //Already handled in render()\n  }\n\n  onTestTest(e, item, forceImmediate=false, callback=null)\n  {\n    const immediate = forceImmediate || this.props.immediate;\n    const tester = this.props.tester;\n    const itemValue = item.getValue();\n\n    item.setState({status: WORKING_MODE});\n\n    const graphController = this.props.graphController;\n    const machineController = this.props.machineController;\n    tester.startTest(itemValue, graphController, machineController).then((result) => {\n      item.setState({status: result ? SUCCESS_MODE : FAILURE_MODE});\n    }, (err) => {\n      //It didn't work out :(\n      item.setState({status: DEFAULT_MODE});\n    });\n\n    if (immediate)\n    {\n      const promise = tester.runTest(graphController, machineController, true);\n      if (callback)\n      {\n        promise.then(callback);\n      }\n    }\n  }\n\n  isEmpty()\n  {\n    return this._testList.length <= 0;\n  }\n  \n  //Override\n  render()\n  {\n    const immediate = this.props.immediate;\n    const tester = this.props.tester;\n\n    const graphController = this.props.graphController;\n    const machineController = this.props.machineController;\n\n    const empty = this.isEmpty();\n    const disabled = tester && tester.isTesting();\n\n    return (\n      <div id={this.props.id}\n        className={Style.test_container +\n          \" \" + this.props.className}\n        style={this.props.style}>\n        <div className={Style.test_control_tray}>\n          <IconButton className={Style.test_control_button}\n            title={I18N.toString(\"action.testing.new\")}\n            onClick={this.onTestNew}>\n            <PageContentIcon/>\n          </IconButton>\n          <IconUploadButton className={Style.test_control_button}\n            title={I18N.toString(\"action.testing.import\")}\n            accept={ACCEPT_FILE_TYPES.join(\",\")}\n            onUpload={this.onTestUpload}>\n            <UploadIcon/>\n          </IconUploadButton>\n          <IconButton className={Style.test_control_button}\n            title={I18N.toString(\"action.testing.save\")}\n            disabled={empty}\n            onClick={this.onTestDownload}>\n            <DownloadIcon/>\n          </IconButton>\n          <IconButton className={Style.test_control_button}\n            title={I18N.toString(\"action.testing.clear\")}\n            disabled={empty}\n            onClick={this.onTestClose}>\n            <CrossIcon/>\n          </IconButton>\n        </div>\n        <div className={Style.test_list_container +\n          (empty ? \" empty \" : \"\") +\n          (disabled ? \" disabled \": \"\")}>\n          <IconButton className={Style.test_list_add}\n            title={\"Add\"} onClick={this.onTestAdd}>\n            <AddIcon/>\n            <span className={Style.test_list_count}>\n              {!empty ? \"\" + this._testList.length : \"\"}\n            </span>\n          </IconButton>\n          <div className={Style.test_list_scroll_container}>\n            <div className={Style.test_list}>\n              {this._testList.map((e, i) => {\n                const id = e.id;\n                const defaultValue = e['defaultValue'] || \"\";\n                let testCallback = this.onTestTest;\n                if (!tester || graphController.getGraph().isEmpty())\n                {\n                  testCallback = null;\n                }\n                return <TestItem key={id} ref={ref=>e.ref=ref}\n                  defaultValue={defaultValue}\n                  onTest={testCallback}\n                  onDelete={(e, item) => {\n                    this._testList.splice(i, 1);\n                    this.onTestDelete(e, item);\n                  }}/>\n              })}\n            </div>\n          </div>\n          <IconButton className={Style.test_list_runall}\n            title={\"Run All\"} onClick={this.onTestRunAll}>\n            <RunningManIcon/>\n          </IconButton>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default TestListView;\n","import React from 'react';\nimport GraphNode from 'graph/GraphNode.js';\n\nconst ARROW = '\\u2192';\n\nclass TransitionErrorMessage extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.targetIndex = 0;\n    this.targetLabel = \"\";\n    const targets = props.message.value.targets;\n    for(const target of targets)\n    {\n      if (this.targetLabel.length > 0)\n      {\n        this.targetLabel += \", \";\n      }\n      this.targetLabel += \"(\" + target.getSourceNode().getNodeLabel() + \", \" +\n        target.getEdgeLabel() + \") \" +\n        ARROW + \" \" + (target.getDestinationNode() instanceof GraphNode ? target.getDestinationNode().getNodeLabel() : \"null\");\n    }\n\n    this.onClick = this.onClick.bind(this);\n  }\n\n  onClick(e)\n  {\n    const graphController = this.props.graphController;\n    const machineController = this.props.machineController;\n    const buttonValue = e.target.value;\n    const message = this.props.message;\n    switch(buttonValue)\n    {\n      case \"locate\":\n      {\n        const targets = message.value.targets;\n        const targetLength = targets.length;\n        if (targetLength > 0 && this.targetIndex < targetLength)\n        {\n          //Locate the target edge\n          const target = targets[this.targetIndex++];\n          if (this.targetIndex >= targetLength) this.targetIndex = 0;\n\n          //Move pointer to target\n          graphController.focusOnEdge(target);\n        }\n      }\n      break;\n      case \"deleteall\":\n      {\n        const targets = message.value.targets;\n        //Delete all target edges\n        graphController.deleteTargetEdges(targets);\n\n        //Exit the message\n        message.close();\n      }\n      break;\n      default:\n        throw new Error(\"Unknown button value for message\");\n    }\n  }\n\n  //Override\n  render()\n  {\n    return <div>\n      <p>{this.props.message.value.text + \": \" + this.targetLabel}</p>\n      <button value=\"locate\" onClick={this.onClick}>{I18N.toString(\"message.action.locate\")}</button>\n      <button value=\"deleteall\" onClick={this.onClick}>{I18N.toString(\"message.action.deleteall\")}</button>\n    </div>;\n  }\n}\n\nexport default TransitionErrorMessage;\n","import React from 'react';\n\nclass StateUnreachableWarningMessage extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.targetIndex = 0;\n    this.targetLabel = \"\";\n    const targets = props.message.value;\n    for(const target of targets)\n    {\n      if (this.targetLabel.length > 0)\n      {\n        this.targetLabel += \", \";\n      }\n      this.targetLabel += target.getNodeLabel();\n    }\n\n    this.onClick = this.onClick.bind(this);\n  }\n\n  onClick(e)\n  {\n    const graphController = this.props.graphController;\n    const machineController = this.props.machineController;\n    const buttonValue = e.target.value;\n    const message = this.props.message;\n    switch(buttonValue)\n    {\n      case \"locate\":\n      {\n        //Locate the target node\n        const target = message.value[this.targetIndex++];\n        if (this.targetIndex >= message.value.length)\n        {\n          this.targetIndex = 0;\n        }\n\n        //Move pointer to target\n        graphController.focusOnNode(target);\n      }\n      break;\n      case \"deleteall\":\n      {\n        const targets = message.value;\n        //Delete all target nodes\n        graphController.deleteTargetNodes(targets);\n\n        //Sort the nodes after deleting if enabled...\n        graphController.applyAutoRename();\n\n        //Exit the message\n        message.close();\n      }\n      break;\n      default:\n        throw new Error(\"Unknown button value for message\");\n    }\n  }\n\n  //Override\n  render()\n  {\n    return <div>\n      <p>{I18N.toString(\"message.warning.unreachable\") + \": \" + this.targetLabel}</p>\n      <button value=\"locate\" onClick={this.onClick}>{I18N.toString(\"message.action.locate\")}</button>\n      <button value=\"deleteall\" onClick={this.onClick}>{I18N.toString(\"message.action.deleteall\")}</button>\n    </div>;\n  }\n}\n\nexport default StateUnreachableWarningMessage;\n","import React from 'react';\n\nclass StateMissingTransitionErrorMessage extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.targetIndex = 0;\n    this.targetLabel = \"\";\n    const targets = props.message.value.targets;\n    for(const target of targets)\n    {\n      if (this.targetLabel.length > 0)\n      {\n        this.targetLabel += \", \";\n      }\n      this.targetLabel += target.getNodeLabel();\n    }\n    this.targetLabel += \" for \" + props.message.value.symbol;\n\n    this.onClick = this.onClick.bind(this);\n  }\n\n  onClick(e)\n  {\n    const graphController = this.props.graphController;\n    const machineController = this.props.machineController;\n    const buttonValue = e.target.value;\n    const message = this.props.message;\n    switch(buttonValue)\n    {\n      case \"locate\":\n      {\n        const targets = message.value.targets;\n        const targetLength = targets.length;\n        if (targetLength > 0 && this.targetIndex < targetLength)\n        {\n          //Locate the target edge\n          const target = targets[this.targetIndex++];\n          if (this.targetIndex >= targetLength) this.targetIndex = 0;\n\n          //Move pointer to target\n          graphController.focusOnNode(target);\n        }\n      }\n      break;\n      default:\n        throw new Error(\"Unknown button value for message\");\n    }\n  }\n\n  //Override\n  render()\n  {\n    return <div>\n      <p>{I18N.toString(\"message.error.missing\") + \": \" + this.targetLabel}</p>\n      <button value=\"locate\" onClick={this.onClick}>{I18N.toString(\"message.action.locate\")}</button>\n    </div>;\n  }\n}\n\nexport default StateMissingTransitionErrorMessage;\n","import React from 'react';\n\nclass StateErrorMessage extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.targetIndex = 0;\n    this.targetLabel = \"\";\n    const targets = props.message.value.targets;\n    for(const target of targets)\n    {\n      if (this.targetLabel.length > 0)\n      {\n        this.targetLabel += \", \";\n      }\n      this.targetLabel += target.getNodeLabel();\n    }\n\n    this.onClick = this.onClick.bind(this);\n  }\n\n  onClick(e)\n  {\n    const graphController = this.props.graphController;\n    const machineController = this.props.machineController;\n    const buttonValue = e.target.value;\n    const message = this.props.message;\n    switch(buttonValue)\n    {\n      case \"locate\":\n      {\n        const targets = message.value.targets;\n        const targetLength = targets.length;\n        if (targetLength > 0 && this.targetIndex < targetLength)\n        {\n          //Locate the target edge\n          const target = targets[this.targetIndex++];\n          if (this.targetIndex >= targetLength) this.targetIndex = 0;\n\n          //Move pointer to target\n          graphController.focusOnNode(target);\n        }\n      }\n      break;\n      case \"deleteall\":\n      {\n        const targets = message.value.targets;\n        //Delete all target nodes\n        graphController.deleteTargetNodes(targets);\n\n        //Sort the nodes after deleting if enabled...\n        graphController.applyAutoRename();\n\n        //Exit the message\n        message.close();\n      }\n      break;\n      default:\n        throw new Error(\"Unknown button value for message\");\n    }\n  }\n\n  //Override\n  render()\n  {\n    const message = this.props.message;\n    return <div>\n      <p>{message.value.text + \": \" + this.targetLabel}</p>\n      <button value=\"locate\" onClick={this.onClick}>{I18N.toString(\"message.action.locate\")}</button>\n      <button value=\"deleteall\" onClick={this.onClick}>{I18N.toString(\"message.action.deleteall\")}</button>\n    </div>;\n  }\n}\n\nexport default StateErrorMessage;\n","import Notifications from 'system/notification/Notifications.js';\nimport TransitionErrorMessage from './notifications/TransitionErrorMessage.js';\nimport StateUnreachableWarningMessage from './notifications/StateUnreachableWarningMessage.js';\nimport StateMissingTransitionErrorMessage from './notifications/StateMissingTransitionErrorMessage.js';\nimport StateErrorMessage from './notifications/StateErrorMessage.js';\n\nimport { ERROR_UNREACHABLE_STATE,\n  ERROR_DUPLICATE_STATE,\n  ERROR_INCOMPLETE_TRANSITION,\n  ERROR_DUPLICATE_TRANSITION,\n  ERROR_MISSING_TRANSITION,\n  ERROR_EMPTY_TRANSITION } from './machine/FSABuilder.js';\n\nexport const ERROR_MESSAGE_TAG = \"fsa_build_error\";\n\nclass FSAErrorChecker\n{\n  constructor(graphController, machineController)\n  {\n    this._graphController = graphController;\n    this._machineController = machineController;\n    this._showErrorOnChange = false;\n\n    this.onMachineChange = this.onMachineChange.bind(this);\n\n    machineController.getMachineBuilder().getMachineChangeHandler().addListener(this.onMachineChange);\n  }\n\n  onMachineChange(machineBuilder)\n  {\n    if (this._showErrorOnChange)\n    {\n      this.showErrors();\n    }\n  }\n\n  setErrorChecking(enabled)\n  {\n    this._showErrorOnChange = enabled;\n  }\n\n  isErrorChecking()\n  {\n    return this._showErrorOnChange;\n  }\n\n  showErrors()\n  {\n    const props = {graphController: this._graphController, machineController: this._machineController};\n    const machineBuilder = this._machineController.getMachineBuilder();\n    const errors = machineBuilder.getMachineErrors();\n    const warnings = machineBuilder.getMachineWarnings();\n\n    Notifications.clearMessages(ERROR_MESSAGE_TAG);\n    if (errors.length <= 0 && warnings.length <= 0)\n    {\n      Notifications.addMessage(I18N.toString(\"message.error.none\"), \"success\", ERROR_MESSAGE_TAG, null, null, false);\n    }\n    else\n    {\n      for(const warning of warnings)\n      {\n        switch(warning.name)\n        {\n          case ERROR_UNREACHABLE_STATE:\n            Notifications.addMessage(warning.nodes,\n              \"warning\", ERROR_MESSAGE_TAG, StateUnreachableWarningMessage, props, false);\n          break;\n        }\n      }\n\n      for(const error of errors)\n      {\n        switch(error.name)\n        {\n          case ERROR_DUPLICATE_STATE:\n            Notifications.addMessage({\n              text: \"Found duplicate nodes of similar names\",\n              targets: error.nodes},\n              \"error\", ERROR_MESSAGE_TAG, StateErrorMessage, props, false);\n          break;\n          case ERROR_INCOMPLETE_TRANSITION:\n            Notifications.addMessage({\n              text: I18N.toString(\"message.error.incomplete\"),\n              targets: error.edges\n            }, \"error\", ERROR_MESSAGE_TAG, TransitionErrorMessage, props, false);\n          break;\n          case ERROR_DUPLICATE_TRANSITION:\n            Notifications.addMessage({\n              text: I18N.toString(\"message.error.dupe\"),\n              targets: error.edges},\n              \"error\", ERROR_MESSAGE_TAG, TransitionErrorMessage, props, false);\n          break;\n          case ERROR_MISSING_TRANSITION:\n            Notifications.addMessage({\n              targets: [error.node],\n              symbol: error.symbols\n            }, \"error\", ERROR_MESSAGE_TAG, StateMissingTransitionErrorMessage, props, false);\n          break;\n          case ERROR_EMPTY_TRANSITION:\n            Notifications.addMessage({\n              text: I18N.toString(\"message.error.empty\"),\n              targets: error.edges},\n              \"error\", ERROR_MESSAGE_TAG, TransitionErrorMessage, props, false);\n          break;\n        }\n      }\n    }\n  }\n}\n\nexport default FSAErrorChecker;\n","import React from 'react';\nimport Style from './TestingPanel.css';\n\nimport PanelContainer from 'experimental/panels/PanelContainer.js';\nimport PanelSwitch from 'experimental/panels/PanelSwitch.js';\n\nimport TestListView from './TestListView.js';\n\nimport Notifications from 'system/notification/Notifications.js';\nimport {ERROR_MESSAGE_TAG} from 'modules/fsa2/FSAErrorChecker.js';\n\nclass TestingPanel extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n    \n    this.state = {\n      stepMode: false\n    };\n\n    this.onStepTestChange = this.onStepTestChange.bind(this);\n    this.onAutoErrorCheckChange = this.onAutoErrorCheckChange.bind(this);\n  }\n\n  //Override\n  componentDidMount()\n  {\n    //TODO: This should be in modules...\n    const session = this.props.session;\n    const app = session.getApp();\n    const currentModule = session.getCurrentModule();\n    const tester = currentModule._tester;\n    tester.on(\"startTest\", (tester) => {\n      app._viewport.setCurrentView(1);\n      app._drawer.setDrawerSoloClass(TestingPanel);\n      app._drawer.closeDrawer();\n    });\n    tester.on(\"stopTest\", (tester) => {\n      app._viewport.setCurrentView(0);\n      app._drawer.setDrawerSoloClass(null);\n      app._drawer.openDrawer();\n    });\n  }\n\n  onStepTestChange(e)\n  {\n    this.setState((prev, props) => {\n      return {stepMode: !prev.stepMode};\n    });\n  }\n\n  onAutoErrorCheckChange(e)\n  {\n    const currentModule = this.props.session.getCurrentModule();\n    const errorChecker = currentModule.getErrorChecker();\n    const errorCheck = errorChecker.isErrorChecking();\n    errorChecker.setErrorChecking(!errorCheck);\n    if (errorCheck)\n    {\n      //Turning it off\n      Notifications.clearMessages(ERROR_MESSAGE_TAG);\n    }\n  }\n\n  //Override\n  render()\n  {\n    const session = this.props.session;\n    const app = session.getApp();\n    const currentModule = session.getCurrentModule();\n    const graphController = currentModule.getGraphController();\n    const machineController = currentModule.getMachineController();\n    const tester = currentModule.getStringTester();\n    const errorChecker = currentModule.getErrorChecker();\n\n    const stepMode = this.state.stepMode;\n    const errorCheck = errorChecker.isErrorChecking();\n\n    return (\n      <PanelContainer id={this.props.id}\n        className={Style.panel_container +\n          \" \" + this.props.className}\n        style={this.props.style}\n        title={TestingPanel.TITLE}>\n\n        <TestListView tester={tester} graphController={graphController} machineController={machineController} immediate={!stepMode}/>\n        <PanelSwitch id={\"testing-step-test\"} checked={stepMode} onChange={this.onStepTestChange} title={\"Step testing\"}/>\n        <PanelSwitch id={\"testing-error-check\"} checked={errorCheck} onChange={this.onAutoErrorCheckChange} title={\"Auto error checking\"}/>\n\n      </PanelContainer>\n    );\n  }\n}\nObject.defineProperty(TestingPanel, 'TITLE', {\n  get: function() { return I18N.toString(\"component.testing.title\"); }\n});\n\nexport default TestingPanel;\n","import React from 'react';\n\nclass NFAToDFAConversionWarningMessage extends React.Component\n{\n    constructor(props)\n    {\n        super(props);\n        this.onClick = this.onClick.bind(this);\n    }\n\n    onClick(e)\n    {\n        const message = this.props.message;\n        const buttonValue = e.target.value;\n\n        switch(buttonValue)\n        {\n            case \"convert\":\n                {//FIXME: FSABUILDER: convertMachineTo needs to change?\n                    const machineController = this.props.machineController;\n                    machineController.convertMachineTo(\"DFA\");\n                    message.close();\n                }\n            break;\n            default:\n              throw new Error(\"Unknown button value for message\");\n        }\n    }\n\n    render()\n    {\n        const machineController = this.props.machineController;\n        const stateCount = machineController.countStates();\n\n        return <div>\n          <p>{I18N.toString(\"message.warning.convertNFAToDFA\")}</p>\n          <p>{`${stateCount} states -> ${Math.pow(2, stateCount)} states`}</p>\n          <button value=\"convert\" onClick={this.onClick}>{I18N.toString(\"message.action.convert\")}</button>\n        </div>;\n    }\n}\n\nexport default NFAToDFAConversionWarningMessage;\n","import React from 'react';\nimport Style from './AnalysisPanel.css';\n\nimport PanelContainer from 'experimental/panels/PanelContainer.js';\nimport PanelSection from 'experimental/panels/PanelSection.js';\nimport PanelCheckbox from 'experimental/panels/PanelCheckbox.js';\n\nimport Notifications from 'system/notification/Notifications.js';\nimport NFAToDFAConversionWarningMessage from 'modules/fsa2/notifications/NFAToDFAConversionWarningMessage.js';\n\nconst MACHINE_CONVERSION_MESSAGE_TAG = \"machine-convert\";\n\nclass AnalysisPanel extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.optimizeUnreachOption = null;\n    this.optimizeRedundOption = null;\n\n    this.onConvertToDFA = this.onConvertToDFA.bind(this);\n    this.onConvertToNFA = this.onConvertToNFA.bind(this);\n    this.onInvertDFA = this.onInvertDFA.bind(this);\n\n    this.onOptimizeMachine = this.onOptimizeMachine.bind(this);\n  }\n\n  onDeleteAllUnreachable(e)\n  {\n    const session = this.props.session;\n    const currentModule = session.getCurrentModule();\n    const graphController = currentModule.getGraphController();\n    const machineController = currentModule.getMachineController();\n    const unreachableArray = machineController.getUnreachableNodes();\n    graphController.deleteTargetNodes(unreachableArray);\n  }\n\n  onConvertToDFA(e)\n  {\n    const session = this.props.session;\n    const currentModule = session.getCurrentModule();\n    const graphController = currentModule.getGraphController();\n    const machineController = currentModule.getMachineController();\n    const props = {graphController: graphController, machineController: machineController};\n\n    //Will do: machineController.convertMachineTo(\"DFA\");\n    Notifications.addMessage(I18N.toString(\"message.warning.convertNFAToDFA\"),\n      \"warning\", MACHINE_CONVERSION_MESSAGE_TAG, NFAToDFAConversionWarningMessage, props);\n  }\n\n  onConvertToNFA(e)\n  {\n    const session = this.props.session;\nconst currentModule = session.getCurrentModule();\n    const machineController = currentModule.getMachineController();\n    machineController.convertMachineTo(\"NFA\");\n  }\n\n  onInvertDFA(e)\n  {\n    const session = this.props.session;\nconst currentModule = session.getCurrentModule();\n    const machineController = currentModule.getMachineController();\n    machineController.invertMachine();\n  }\n\n  onOptimizeMachine(e)\n  {\n    if (this.optimizeUnreachOption.isChecked())\n    {\n      this.onDeleteAllUnreachable(e);\n    }\n  }\n\n  canOptimize()\n  {\n    return (this.optimizeRedundOption && this.optimizeRedundOption.isChecked()) ||\n    (this.optimizeUnreachOption && this.optimizeUnreachOption.isChecked());\n  }\n\n  //Override\n  render()\n  {\n    const session = this.props.session;\n    const currentModule = session.getCurrentModule();\n    const graphController = currentModule.getGraphController();\n    const machineController = currentModule.getMachineController();\n\n    return (\n      <PanelContainer id={this.props.id}\n        className={this.props.className}\n        style={this.props.style}\n        title={AnalysisPanel.TITLE}>\n        <PanelSection title={\"Optimizations\"} initial={true}>\n          <PanelCheckbox ref={ref=>this.optimizeUnreachOption=ref}\n            id=\"opt-unreach\" title=\"Unreachables\" value=\"unreach\"/>\n          <PanelCheckbox ref={ref=>this.optimizeRedundOption=ref} disabled={true}\n            id=\"opt-redund\" title=\"Redundant States\" value=\"redund\"/>\n          <button className={Style.analysis_button} onClick={this.onOptimizeMachine} disabled={!this.canOptimize()}>Optimize</button>\n          {\n            machineController.getMachineType() == \"DFA\" ?\n              <button className={Style.analysis_button} onClick={this.onConvertToNFA}>\n                {I18N.toString(\"action.overview.convertnfa\")}\n              </button>\n            : machineController.getMachineType() == \"NFA\" ?\n              <button className={Style.analysis_button} onClick={this.onConvertToDFA}>\n                {I18N.toString(\"action.overview.convertdfa\")}\n              </button>\n            : null\n          }\n        </PanelSection>\n        <PanelSection title={\"Related Machines\"}>\n          {machineController.getMachineType() === \"DFA\" &&\n            <button className={Style.analysis_button} onClick={this.onInvertDFA}>\n              {\"Flip all accept states\"}\n            </button>}\n        </PanelSection>\n      </PanelContainer>\n    );\n  }\n}\nObject.defineProperty(AnalysisPanel, 'TITLE', {\n  get: function() { return I18N.toString(\"component.analysis.title\"); }\n});\n\nexport default AnalysisPanel;\n","class TapeContext\n{\n  constructor(inputString, infiniteLeft=false, infiniteRight=false)\n  {\n    this._tapeInput = inputString ? inputString.split('') : [];\n    this._left = infiniteLeft;\n    this._right = infiniteRight;\n\n    this._index = 0;\n  }\n\n  stepForward()\n  {\n    ++this._index;\n  }\n\n  stepBackward()\n  {\n    --this._index;\n  }\n\n  finish()\n  {\n    this._index = (this._tapeInput.length * 2);\n  }\n\n  reset()\n  {\n    this._index = -1;\n  }\n\n  stop()\n  {\n    this.finish();\n    this.reset();\n  }\n\n  changeTapeSymbol(index, symbol=\"\")\n  {\n    this._tapeInput[index] = symbol;\n  }\n\n  getTapeSourceStatesByIndex(index)\n  {\n    return null;\n  }\n\n  getTapeSymbolByIndex(index)\n  {\n    if (index < 0 || index >= this._tapeInput.length) return \"\";\n    return this._tapeInput[index] || \"\";\n  }\n\n  isTapeLeftInfinite()\n  {\n    return this._left;\n  }\n\n  isTapeRightInfinite()\n  {\n    return this._right;\n  }\n\n  setCurrentTapeIndex(index)\n  {\n    this._index = index;\n  }\n\n  getCurrentTapeIndex()\n  {\n    return this._index;\n  }\n\n  getTapeInput()\n  {\n    return this._tapeInput;\n  }\n}\n\nexport default TapeContext;\n","import Eventable from 'util/Eventable.js';\n\nimport { solveFSAByStep } from 'modules/fsa2/machine/FSAUtils.js';\n\nimport TapeContext from './TapeContext.js';\n\nclass TestTapeContext extends TapeContext\n{\n  constructor(tester, graphController, machineController)\n  {\n    super(tester.getTestString(), false, true);\n\n    this._tester = tester;\n    this._graphController = graphController;\n    this._machineController = machineController;\n  }\n\n  //Override\n  stepForward()\n  {\n    const graphController = this._graphController;\n    const machineController = this._machineController;\n    this._tester.stepForward(graphController, machineController);\n  }\n\n  //Override\n  stepBackward()\n  {\n    const graphController = this._graphController;\n    const machineController = this._machineController;\n    this._tester.stepBackward(graphController, machineController);\n  }\n\n  //Override\n  reset()\n  {\n    this._tester.resetPosition();\n  }\n\n  //Override\n  finish()\n  {\n    const graphController = this._graphController;\n    const machineController = this._machineController;\n    this._tester.runTest(graphController, machineController, false);\n  }\n\n  //Override\n  stop()\n  {\n    this._tester.stopTest();\n  }\n\n  //Override\n  changeTapeSymbol(index, symbol=\"\")\n  {\n    throw new Error(\"Operation not yet supported\");\n  }\n\n  //Override\n  getTapeSourceStatesByIndex(index)\n  {\n    if (index < 0 || index >= this._tapeInput.length) return null;\n    return this._tester.getNodesAtPosition(index);\n  }\n\n  //Override\n  getTapeSymbolByIndex(index)\n  {\n    if (index < 0 || index >= this._tapeInput.length) return [];\n    return this._tapeInput[index] || \"\";\n  }\n\n  //Override\n  setCurrentTapeIndex(index)\n  {\n    this._tester.changePosition(index);\n  }\n\n  //Override\n  getCurrentTapeIndex()\n  {\n    return this._tester.getPosition();\n  }\n}\n\nclass StringTester\n{\n  constructor()\n  {\n    this._testString = null;\n    this._testIndex = -1;\n\n    this._tapeContext = null;\n\n    //For nfa solver use\n    this._cachePath = [];\n    this._cachedResult = null;\n    this._resolve = null;\n    this._reject = null;\n\n    this.registerEvent(\"startTest\");\n    this.registerEvent(\"stepTest\");\n    this.registerEvent(\"stopTest\");\n  }\n\n  //TODO: a hack to get current targets.\n  get targets()\n  {\n    if (this._cachePath.length <= 0) return [];\n    const cache = this._cachePath[this._cachePath.length - 1];\n    return cache.targets;\n  }\n\n  startTest(testString, graphController, machineController)\n  {\n    if (!testString) testString = \"\";\n    if (this._tapeContext) throw new Error(\"Unable to start an already running test\");\n\n    const graph = graphController.getGraph();\n    if (graph.isEmpty()) return Promise.reject();\n\n    this._testString = testString;\n    this._testIndex = -1;\n    this._cachePath.length = 0;\n    this._cachedResult = null;\n    this._tapeContext = new TestTapeContext(this, graphController, machineController);\n\n    this.emit(\"startTest\", this);\n\n    return new Promise((resolve, reject) => {\n      this._resolve = resolve;\n      this._reject = reject;\n    });\n  }\n\n  stopTest()\n  {\n    if (!this._tapeContext) throw new Error(\"Unable to stop null test\");\n\n    this.emit(\"stopTest\", this);\n\n    if (!this._resolve) throw new Error(\"Must call startTest() before anything else\");\n    if (!this._reject) throw new Error(\"Must call startTest() before anything else\");\n\n    let testResult = null;\n    if (this._cachePath.length >= this._testString.length)\n    {\n      testResult = this._cachedResult;\n      this._resolve(testResult);\n    }\n    else\n    {\n      testResult = null;\n      this._reject();\n    }\n\n    this._testString = null;\n    this._testIndex = -1;\n    this._cachePath.length = 0;\n    this._cachedResult = null;\n    this._tapeContext = null;\n\n    return Promise.resolve(testResult);\n  }\n\n  runTest(graphController, machineController, thenStop=false)\n  {\n    if (!this._tapeContext) throw new Error(\"Unable to run null test\");\n\n    return new Promise((resolve, reject) => {\n      let result = false;\n      do\n      {\n        result = this.stepForward(graphController, machineController, !thenStop);\n      }\n      while (result);\n\n      resolve(this._cachedResult);\n    }).then((result) => {\n      if (thenStop) return this.stopTest();\n      else return result;\n    });\n  }\n\n  stepForward(graphController, machineController, cacheStep=true)\n  {\n    const machine = machineController.getMachineBuilder().getMachine();\n\n    if (this._testIndex >= this._testString.length) return false;\n    ++this._testIndex;\n\n    if (this._cachePath.length <= this._testIndex)\n    {\n      //Calculate current step...\n      let cachedStates, cachedSymbols = null;\n      const isResult = this._testIndex === this._testString.length;\n\n      //Initialize first step...\n      if (this._testIndex <= 0)\n      {\n        cachedStates = [];\n        cachedSymbols = [];\n\n        const startState = machine.getStartState();\n        for (const currentState of machine.doClosureTransition(startState))\n        {\n          cachedStates.push({state: currentState, index: 0});\n        }\n      }\n      else\n      {\n        const prevCache = this._cachePath[this._testIndex - 1];\n        cachedStates = prevCache.states.slice();\n        cachedSymbols = prevCache.symbols.slice();\n\n        //Do the remaining steps...\n        const nextSymbol = this._testString[this._testIndex - 1];\n        solveFSAByStep(machine, nextSymbol, cachedStates, cachedSymbols);\n      }\n\n      //Do one last step for result...\n      if (isResult)\n      {\n        this._cachedResult = solveFSAByStep(machine, null, cachedStates, cachedSymbols);\n      }\n\n      //Store current step...\n      const targets = new Set();\n      for(const cachedState of cachedStates)\n      {\n        const node = cachedState.state.getSource();\n\n        //Couldn't find the node that was solved for this step...\n        if (!node) throw new Error(\"Could not find node \\'\" + cachedState.state + \"\\'\");\n\n        targets.add(node);\n      }\n      const nextCache = {\n        targets: Array.from(targets),\n        states: cachedStates,\n        symbols: cachedSymbols\n      };\n      this._cachePath.push(nextCache);\n    }\n    else\n    {\n      //Go forward a previously calculated step...by doing nothing...\n    }\n\n    this.emit(\"stepTest\");\n    return true;\n  }\n\n  stepBackward(graphController, machineController)\n  {\n    if (this._testIndex <= 0) return false;\n    --this._testIndex;\n\n    //Go back a step...by doing nothing...\n    this.emit(\"stepTest\");\n    return true;\n  }\n\n  isTesting()\n  {\n    return this._testString !== null;\n  }\n\n  changePosition(position)\n  {\n    if (position >= this._cachePath.length)\n    {\n      this._testIndex = this._cachePath.length - 1;\n    }\n    else\n    {\n      if (position < 0)\n      {\n        this._testIndex = 0;\n      }\n      else if (position >= this._testString.length)\n      {\n        this._testIndex = this._testString.length - 1;\n      }\n      else\n      {\n        this._testIndex = position;\n      }\n    }\n  }\n\n  resetPosition()\n  {\n    this._testIndex = -1;\n  }\n\n  getPosition()\n  {\n    return this._testIndex;\n  }\n\n  isComputedPosition(position)\n  {\n    return this._cachePath.length > position;\n  }\n\n  getCurrentNodes()\n  {\n    if (this._testIndex >= 0 && this._testIndex < this._cachePath.length)\n    {\n      return this._cachePath[this._testIndex];\n    }\n    else\n    {\n      return null;\n    }\n  }\n\n  getNodesAtPosition(position)\n  {\n    if (position >= 0 && position < this._cachePath.length)\n    {\n      return this._cachePath[position].targets;\n    }\n    else\n    {\n      return null;\n    }\n  }\n\n  getTestString()\n  {\n    return this._testString;\n  }\n\n  getTapeContext()\n  {\n    return this._tapeContext;\n  }\n}\nEventable.mixin(StringTester);\n\nexport default StringTester;\n","import React from 'react';\nimport Style from 'experimental/viewport/ViewportView.css';\n\nimport ModeSelectTray from 'experimental/widgets/ModeSelectTray.js';\nimport TrashCanWidget from 'experimental/widgets/TrashCanWidget.js';\nimport NavbarWidget from 'experimental/widgets/NavbarWidget.js';\n\nclass EditPane extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  //Override\n  render()\n  {\n    const session = this.props.session;\n    const currentModule = session.getCurrentModule();\n    const app = session.getApp();\n\n    const viewport = this.props.viewport;\n    const inputController = currentModule.getInputController();\n    const graphController = currentModule.getGraphController();\n    const inputActionMode = inputController.isActionMode();\n\n    return (\n      <div id={this.props.id}\n        className={Style.view_pane +\n          \" \" + this.props.className}\n        style={this.props.style}>\n        <NavbarWidget className={Style.view_widget} style={{right: 0}}\n          app={app}/>\n        <div className={Style.view_widget} style={{bottom: 0, left: 0}}>\n          <ModeSelectTray mode={inputActionMode ? 0 : 1} onChange={modeIndex => inputController.setInputScheme(modeIndex === 0)}/>\n        </div>\n        <div className={Style.view_widget} style={{bottom: 0, right: 0}}>\n          <TrashCanWidget app={app} inputController={inputController} graphController={graphController}/>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default EditPane;\n","import React from 'react';\nimport Style from 'experimental/viewport/ViewportView.css';\n\nimport TapeWidget from 'experimental/widgets/TapeWidget.js';\nimport NavbarWidget from 'experimental/widgets/NavbarWidget.js';\n\nclass TapePane extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  //Override\n  componentDidMount()\n  {\n    const session = this.props.session;\n    const currentModule = session.getCurrentModule();\n    const inputController = currentModule.getInputController();\n\n    inputController.setDisabled(true);\n  }\n\n  //Override\n  componentWillUnmount()\n  {\n    const session = this.props.session;\n    const currentModule = session.getCurrentModule();\n    const inputController = currentModule.getInputController();\n\n    inputController.setDisabled(false);\n  }\n\n  //Override\n  render()\n  {\n    const session = this.props.session;\n    const currentModule = session.getCurrentModule();\n    const app = session.getApp();\n\n    const viewport = this.props.viewport;\n    const tester = currentModule._tester;\n    const inputController = currentModule.getInputController();\n    const graphController = currentModule.getGraphController();\n    const machineController = currentModule.getMachineController();\n\n    return (\n      <div id={this.props.id}\n        className={Style.view_pane +\n          \" \" + this.props.className}\n        style={this.props.style}>\n        <NavbarWidget className={Style.view_widget} style={{right: 0}}\n          app={app}/>\n        <div className={Style.view_widget} style={{bottom: 0}}>\n          <TapeWidget value={tester ? tester.getTapeContext() : null}/>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default TapePane;\n","import React from 'react';\n\nclass Icon extends React.Component\n{\n  constructor(props) { super(props); }\n\n  //Override\n  render()\n  {\n    return (\n      <svg id={this.props.id} className={this.props.className} style={this.props.style}\n      xmlns=\"http://www.w3.org/2000/svg\"\n      width=\"24\" height=\"24\" viewBox=\"0 0 56 56\">\n        <path fill=\"#E9E9E0\" d=\"M36.985,0H7.963C7.155,0,6.5,0.655,6.5,1.926V55c0,0.345,0.655,1,1.463,1h40.074 c0.808,0,1.463-0.655,1.463-1V12.978c0-0.696-0.093-0.92-0.257-1.085L37.607,0.257C37.442,0.093,37.218,0,36.985,0z\"/>\n        <polygon fill=\"#D9D7CA\" points=\"37.5,0.151 37.5,12 49.349,12 \t\"/>\n        <path fill=\"#F29C1F\" d=\"M48.037,56H7.963C7.155,56,6.5,55.345,6.5,54.537V39h43v15.537C49.5,55.345,48.845,56,48.037,56z\"/>\n        <path fill=\"#FFFFFF\" d=\"M19.379,48.105L21.936,53h-1.9l-1.6-3.801h-0.137L16.576,53h-1.9l2.557-4.895l-2.721-5.182h1.873 l1.777,4.102h0.137l1.928-4.102H22.1L19.379,48.105z\"/>\n        <path fill=\"#FFFFFF\" d=\"M31.998,42.924h1.668V53h-1.668v-6.932l-2.256,5.605h-1.449l-2.27-5.605V53h-1.668V42.924h1.668 l2.994,6.891L31.998,42.924z\"/>\n        <path fill=\"#FFFFFF\" d=\"M37.863,42.924v8.832h4.635V53h-6.303V42.924H37.863z\"/>\n        <path fill=\"#F29C1F\" d=\"M15.5,24c-0.256,0-0.512-0.098-0.707-0.293c-0.391-0.391-0.391-1.023,0-1.414l6-6 c0.391-0.391,1.023-0.391,1.414,0s0.391,1.023,0,1.414l-6,6C16.012,23.902,15.756,24,15.5,24z\"/>\n        <path fill=\"#F29C1F\" d=\"M21.5,30c-0.256,0-0.512-0.098-0.707-0.293l-6-6c-0.391-0.391-0.391-1.023,0-1.414 s1.023-0.391,1.414,0l6,6c0.391,0.391,0.391,1.023,0,1.414C22.012,29.902,21.756,30,21.5,30z\"/>\n        <path fill=\"#F29C1F\" d=\"M33.5,30c-0.256,0-0.512-0.098-0.707-0.293c-0.391-0.391-0.391-1.023,0-1.414l6-6 c0.391-0.391,1.023-0.391,1.414,0s0.391,1.023,0,1.414l-6,6C34.012,29.902,33.756,30,33.5,30z\"/>\n        <path fill=\"#F29C1F\" d=\"M39.5,24c-0.256,0-0.512-0.098-0.707-0.293l-6-6c-0.391-0.391-0.391-1.023,0-1.414 s1.023-0.391,1.414,0l6,6c0.391,0.391,0.391,1.023,0,1.414C40.012,23.902,39.756,24,39.5,24z\"/>\n        <path fill=\"#F29C1F\" d=\"M24.5,32c-0.11,0-0.223-0.019-0.333-0.058c-0.521-0.184-0.794-0.755-0.61-1.276l6-17 c0.185-0.521,0.753-0.795,1.276-0.61c0.521,0.184,0.794,0.755,0.61,1.276l-6,17C25.298,31.744,24.912,32,24.5,32z\"/>\n      </svg>\n    );\n  }\n}\nexport default Icon;\n","import AbstractGraphExporter from 'manager/export/AbstractGraphExporter.js';\n\nimport XMLFileIcon from 'experimental/iconset/flat/XMLFileIcon.js';\nimport { XML as XMLGraphParser } from 'modules/fsa/graph/FSAGraphParser.js';\nimport { downloadText } from 'util/Downloader.js';\n\nclass JFLAPGraphExporter extends AbstractGraphExporter\n{\n  constructor() { super(); }\n\n  //Override\n  importFromFile(fileBlob, module)\n  {\n    return new Promise((resolve, reject) => {\n      const filename = fileBlob.name;\n      if (!filename.endsWith(this.getFileType()))\n      {\n        throw new Error(\"Trying to import invalid file type for \\'\" + this.getFileType() + \"\\': \" + filename);\n      }\n\n      const reader = new FileReader();\n      reader.onload = e => {\n        const graphController = module.getGraphController();\n        const machineController = module.getMachineController();\n        const data = e.target.result;\n        const name = filename.substring(0, filename.length - this.getFileType().length - 1);\n        const graph = graphController.getGraph();\n\n        //TODO: this should not be here, this should exist somewhere in graphController\n        module.getApp().getUndoManager().captureEvent();\n\n        try\n        {\n          const xmlData = new DOMParser().parseFromString(data, \"text/xml\");\n          XMLGraphParser.parse(xmlData, graph);\n\n          //graphController.emit(\"userImportGraph\", graph);\n\n          module.getApp().getSession().setProjectName(name);\n\n          resolve();\n        }\n        catch (e)\n        {\n          reader.abort();\n          reject(e);\n        }\n        finally\n        {\n          module.getApp().getUndoManager().captureEvent();\n        }\n      };\n\n      reader.onerror = e => {\n        reject(new Error(\"Unable to import file: \" + e.target.error.code));\n      }\n\n      reader.readAsText(fileBlob);\n    });\n  }\n\n  //Override\n  exportToFile(filename, module)\n  {\n    const graph = module.getGraphController().getGraph();\n    const graphData = XMLGraphParser.objectify(graph);\n    const xmlString = new XMLSerializer().serializeToString(graphData);\n    downloadText(filename + '.' + this.getFileType(), xmlString);\n  }\n\n  //Override\n  doesSupportFile()\n  {\n    return true;\n  }\n\n  //Override\n  canImport(module)\n  {\n    return true;\n  }\n\n  //Override\n  getTitle()\n  {\n    return I18N.toString(\"file.export.jff.hint\");\n  }\n\n  //Override\n  getLabel()\n  {\n    return I18N.toString(\"file.export.jff\");\n  }\n\n  //Override\n  getFileType()\n  {\n    return \"jff\";\n  }\n\n  //Override\n  getIconClass()\n  {\n    return XMLFileIcon;\n  }\n}\n\nexport default JFLAPGraphExporter;\n","import React from 'react';\nimport PanelContainer from 'experimental/panels/PanelContainer.js';\n\nimport NodalGraphInputManager from 'modules/nodalgraph/manager/NodalGraphInputManager.js';\nimport MachineController from './controller/MachineController.js';\n\nimport FSAGraph from 'modules/fsa/graph/FSAGraph.js';\nimport FSAGraphLabeler from 'modules/fsa/graph/FSAGraphLabeler.js';\nimport * as FSAGraphParser from 'modules/fsa/graph/FSAGraphParser.js';\n\nimport FSAGraphRenderer from './renderer/FSAGraphRenderer.js';\nimport FSALabelEditorRenderer from './renderer/FSALabelEditorRenderer.js';\nimport GraphInputRenderer from 'modules/nodalgraph/controller/renderer/GraphInputRenderer.js';\n\nimport OverviewPanel from './components/panels/overview/OverviewPanel.js';\nimport TestingPanel from './components/panels/testing/TestingPanel.js';\nimport AnalysisPanel from './components/panels/analysis/AnalysisPanel.js';\n\nimport StringTester from './tester/StringTester.js';\nimport FSAErrorChecker from './FSAErrorChecker.js';\n\nimport EditPane from './components/views/EditPane.js';\nimport TapePane from './components/views/TapePane.js';\nimport {CTRL_KEY, ALT_KEY, SHIFT_KEY} from 'manager/hotkey/HotKeyManager.js';\nimport {RENDER_LAYER_WORKSPACE} from 'manager/RenderManager.js';\n\nimport FSAGraphExporter from './exporter/FSAGraphExporter.js';\nimport JFLAPGraphExporter from './exporter/JFLAPGraphExporter.js';\nimport {DEFAULT_IMAGE_EXPORTERS} from 'modules/nodalgraph/NodalGraphImageExporter.js';\nimport SafeGraphEventHandler from 'modules/nodalgraph/SafeGraphEventHandler.js';\n\nimport * as UserUtil from 'experimental/UserUtil.js';\n\nconst MODULE_NAME = \"fsa2\";\nconst MODULE_VERSION = \"0.0.1\";\n\nclass FSAModule\n{\n  constructor(app)\n  {\n    this._app = app;\n\n    this._inputManager = new NodalGraphInputManager(this,\n      new FSAGraph(),\n      new FSAGraphLabeler(),\n      FSAGraphParser,\n      FSALabelEditorRenderer);\n    this._machineController = new MachineController(this);\n\n    this._errorChecker = new FSAErrorChecker(\n      this._inputManager.getGraphController(),\n      this._machineController);\n    this._tester = new StringTester();\n  }\n\n  //Override\n  initialize(app)\n  {\n    //TODO: These should have a pre/post handlers...\n    app.getExportManager()\n      .addExporter(new FSAGraphExporter())\n      .addExporter(new JFLAPGraphExporter())\n      .addExporters(DEFAULT_IMAGE_EXPORTERS);\n\n    app.getViewportManager()\n      .addViewClass(EditPane)\n      .addViewClass(TapePane);\n\n    app.getDrawerManager()\n      .addPanelClass(props => (\n        <PanelContainer id={props.id}\n          className={props.className}\n          style={props.style}\n          title={\"Finite State Automata\"}>\n          <p>{\"Brought to you with \\u2764 by the Flap.js team.\"}</p>\n          <p>{\"<- Tap on a tab to begin!\"}</p>\n        </PanelContainer>\n      ))\n      .addPanelClass(OverviewPanel)\n      .addPanelClass(TestingPanel)\n      .addPanelClass(AnalysisPanel);\n\n    app.getHotKeyManager()\n      .registerHotKey(\"Export to PNG\", [CTRL_KEY, 'KeyP'], () => {console.log(\"Export!\")})\n      .registerHotKey(\"Save as JSON\", [CTRL_KEY, 'KeyS'], () => {console.log(\"Save!\")})\n      .registerHotKey(\"New\", [CTRL_KEY, 'KeyN'], () => {console.log(\"New!\")})\n      .registerHotKey(\"Undo\", [CTRL_KEY, 'KeyZ'], () => {console.log(\"Undo!\")})\n      .registerHotKey(\"Redo\", [CTRL_KEY, SHIFT_KEY, 'KeyZ'], () => {console.log(\"Redo!\")});\n\n    app.getRenderManager()\n      .addRenderer(RENDER_LAYER_WORKSPACE, props => (\n        <>\n          {/* Graph objects */\n            <FSAGraphRenderer currentModule={this} parent={props.workspace}/>}\n        </>\n      ))\n      .addRenderer(RENDER_LAYER_WORKSPACE, props => (\n        <GraphInputRenderer currentModule={this}/>\n      ));\n\n    app.getUndoManager()\n      .setEventHandlerFactory((...args) => {\n        return new SafeGraphEventHandler(this._inputManager.getGraphController(), this._inputManager.getGraphParser());\n      });\n\n    app.getTooltipManager()\n      .addTooltip(I18N.toString(\"message.workspace.empty\"))\n      .addTooltip(\"If you need help, try the \\'?\\' at the top.\")\n      .addTooltip(\"Or you can choose to do nothing.\")\n      .addTooltip(\"I can't do anything about that.\")\n      .addTooltip(\"You really should consider doing something though, for the sake of both of us.\")\n      .addTooltip(\"Of course, it is your free will.\")\n      .addTooltip(\"You do you.\")\n      .addTooltip(\"Please do something.\")\n      .addTooltip(\"I need my job.\")\n      .addTooltip(I18N.toString(\"message.workspace.empty\"));\n\n    const machineController = this.getMachineController();\n    machineController.initialize(this);\n\n    this._inputManager.onSessionStart(app.getSession());\n  }\n\n  //Override\n  update(app)\n  {\n    this._inputManager.update(this);\n\n    const machineController = this.getMachineController();\n    machineController.update(this);\n  }\n\n  //Override\n  destroy(app)\n  {\n    this._inputManager.onSessionStop(app.getSession());\n\n    const machineController = this.getMachineController();\n    machineController.destroy(this);\n  }\n\n  //Override\n  clear(app)\n  {\n    UserUtil.userClearGraph(app, false, () => app.getToolbarComponent().closeBar());\n  }\n\n  getInputManager() { return this._inputManager; }\n\n  getInputController() { return this._inputManager.getInputController(); }\n  getMachineController() { return this._machineController; }\n  getGraphController() { return this._inputManager.getGraphController(); }\n\n  getErrorChecker() { return this._errorChecker; }\n  getStringTester() { return this._tester; }\n\n  //Override\n  getModuleVersion() { return MODULE_VERSION; }\n  //Override\n  getModuleName() { return MODULE_NAME; }\n  //Override\n  getLocalizedModuleName() { return this._machineController.getMachineType(); }\n  getApp() { return this._app; }\n}\n\nexport default FSAModule;\n","import React from 'react';\nimport Style from './IconButton.css';\n\nclass IconButton extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  //Override\n  render()\n  {\n    const title = this.props.title;\n    const showButtonLabel = IconButton.SHOW_LABEL && title;\n\n    return (\n      <button id={this.props.id}\n        className={Style.icon_button +\n          (showButtonLabel ? \" hint \" : \"\") +\n          \" \" + this.props.className}\n        style={this.props.style}\n        title={title}\n        disabled={this.props.disabled}\n        onClick={this.props.onClick}>\n        {this.props.children}\n        <label>{title}</label>\n      </button>\n    );\n  }\n}\nIconButton.SHOW_LABEL = false;\n\nexport default IconButton;\n","import React from 'react';\nimport Style from './PanelContainer.css';\n\nclass PanelContainer extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n  \n  //Override\n  render()\n  {\n    const title = this.props.title;\n\n    return (\n      <div id={this.props.id}\n        className={Style.panel_container +\n          \" \" + this.props.className}\n        style={this.props.style}>\n        <div className={Style.panel_title}>\n          <h1>{title}</h1>\n        </div>\n        <div className={Style.panel_content}>\n          {this.props.children}\n        </div>\n        <div className={Style.panel_bottom}>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default PanelContainer;\n","import GraphElement from 'graph/GraphElement.js';\nimport { guid, stringHash } from 'util/MathHelper.js';\n\nconst FROM_STATE_INDEX = 0;\nconst SYMBOL_INDEX = 1;\nconst TO_STATE_INDEX = 2;\n\nexport const EMPTY_SYMBOL = '&empty';\n\nexport class State\n{\n  constructor(label=\"\", src=null)\n  {\n    this._label = label;\n\n    this._src = src;\n    this._id = src instanceof GraphElement ? src.getGraphElementID() : guid();\n  }\n\n  copy()\n  {\n    const result = new State();\n    result._label = this._label;\n    result._src = this._src;\n    result._id = this._id;\n    return result;\n  }\n\n  getStateLabel() { return this._label; }\n\n  getStateID() { return this._id; }\n  getSource() { return this._src; }\n\n  getHashString()\n  {\n    return this._id;\n  }\n}\n\nexport class Transition\n{\n  constructor(from, to, symbols=[])\n  {\n    this._from = from;\n    this._to = to;\n    this._symbols = symbols;\n  }\n\n  copy()\n  {\n    const result = new Transition();\n    result._from = this._from;\n    result._to = this._to;\n    result._symbols = this._symbols.slice();\n    return result;\n  }\n\n  getSourceState() { return this._from; }\n  getDestinationState() { return this._to; }\n\n  addSymbol(symbol) { this._symbols.push(symbol); }\n  hasSymbol(symbol) { return this._symbols.includes(symbol); }\n  getSymbols() { return this._symbols; }\n\n  getHashString()\n  {\n    return this._from.getHashString() + \":\" + this._symbols.join(\",\") + \":\" + this._to.getHashString();\n  }\n}\n\nclass FSA\n{\n  constructor(deterministic=false)\n  {\n    //state id -> state\n    this._states = new Map();\n    //symbol -> symbol use counter\n    this._alphabet = new Map();\n    //transition key (from + to) -> transition object\n    this._transitions = new Map();\n    this._finalStates = new Set();\n    this._customSymbols = new Set();\n    this._startState = null;\n\n    this._deterministic = deterministic;\n    this._errors = [];\n  }\n\n  /**\n   * Performs a shallow copy of the 2 machines. Any changes to a state will be\n   * reflected in both. However, changes to transitions, alphabet, and final\n   * states will not propagate.\n   */\n  copy(fsa)\n  {\n    //You are already yourself, don't copy nothing.\n    if (fsa === this) return;\n\n    //Make room for the copy...\n    this.clear();\n\n    //Copy state\n    for(const [key, value] of fsa._states.entries())\n    {\n      const result = value.copy();\n      this._states.set(key, result);\n\n      //Copy start state\n      if (fsa.isStartState(value))\n      {\n        this._startState = result;\n      }\n      //Copy final states\n      if (fsa.isFinalState(value))\n      {\n        this._finalStates.add(result);\n      }\n    }\n    //Copy alphabet\n    for(const [key, value] of fsa._alphabet.entries())\n    {\n      this._alphabet.set(key, value);\n    }\n    //Copy transitions\n    for(const [key, value] of fsa._transitions.entries())\n    {\n      const result = value.copy();\n      result._from = this._states.get(value.getSourceState().getStateID());\n      result._to = this._states.get(value.getDestinationState().getStateID());\n      this._transitions.set(key, result);\n    }\n    //Copy custom symbols\n    for(const symbol of fsa._customSymbols)\n    {\n      this._customSymbols.add(symbol);\n    }\n\n    //Copy determinism\n    this._deterministic = fsa._deterministic;\n\n    //Copy errors\n    for(const error of fsa._errors)\n    {\n    //WARNING: if the error's store state objects, they need to be redirected to the copies\n      this._errors.push(error);\n    }\n  }\n\n  clear()\n  {\n    this._states.clear();\n    this._alphabet.clear();\n    this._transitions.clear();\n    this._finalStates.clear();\n    this._customSymbols.clear();\n    this._startState = null;\n\n    this._errors.length = 0;\n  }\n\n  setDeterministic(deterministic) { this._deterministic = deterministic; }\n  isDeterministic() { return this._deterministic; }\n\n  validate()\n  {\n    //Reset errors\n    this._errors.length = 0;\n\n    if (this._deterministic)\n    {\n      const foundSymbols = new Map();\n      for(const key of this._alphabet.keys())\n      {\n        foundSymbols.set(key, false);\n      }\n\n      for(const state of this._states.values())\n      {\n        //Get all outgoing transitions\n        const transitions = this.getOutgoingTransitions(state);\n        for(const transition of transitions)\n        {\n          const symbol = transition[SYMBOL_INDEX];\n\n          //We don't need to worry about empty symbols cause this is a DFA\n          //So just assume every symbol is a valid one\n          if (!foundSymbols.get(symbol))\n          {\n            foundSymbols.set(symbol, true);\n          }\n          else\n          {\n            //Found duplicate\n            this._errors.push(\"duplicate symbol: \" + symbol);\n            return false;\n          }\n        }\n\n        //Reset foundSymbols for next state\n        for(const key of foundSymbols.keys())\n        {\n          if (!foundSymbols.get(key))\n          {\n            //Found missing symbol for state\n            this._errors.push(\"missing symbol: \" + key);\n            return false;\n          }\n\n          //Reset found symbol\n          foundSymbols.set(key, false);\n        }\n      }\n\n      //No errors found\n      this._errors.length = 0;\n      return true;\n    }\n    else\n    {\n      //It is a valid NFA already\n      this._errors.length = 0;\n      return true;\n    }\n  }\n  isValid() { return this._errors.length == 0; }\n  getErrors() { return this._errors; }\n\n  createState(label=\"\")\n  {\n    return this.addState(new State(label));\n  }\n\n  addState(state)\n  {\n    const stateID = state.getStateID();\n    if (this._states.has(stateID)) throw new Error(\"Already added state with id \\'\" + stateID + \"\\'\");\n    //Make state as new start state if no other states exist...\n    if (this._states.size <= 0) this._startState = state;\n    //Add to state set\n    this._states.set(stateID, state);\n    return state;\n  }\n\n  removeState(state)\n  {\n    const stateID = state.getStateID();\n    if (!this._states.has(stateID)) return false;\n    this._states.delete(stateID);\n\n    //Deleted the start state, so must pick another one...\n    if (this._startState === state)\n    {\n      if (this._states.size <= 0)\n      {\n        //If no more states to choose from, don't choose anything\n        this._startState = null;\n      }\n      else\n      {\n        //Choose an arbitrary start state\n        this._startState = this._states.values().next().value;\n      }\n    }\n\n    return true;\n  }\n\n  hasStateWithLabel(label)\n  {\n    for(const state of this._states.values())\n    {\n      if (state.getStateLabel() == label)\n      {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  getStatesByLabel(label, dst=[])\n  {\n    for(const state of this._states.values())\n    {\n      if (state.getStateLabel() == label)\n      {\n        dst.push(state);\n      }\n    }\n    return dst;\n  }\n\n  getStateByID(id)\n  {\n    return this._states.get(id);\n  }\n\n  hasState(state) { return this._states.has(state.getStateID()); }\n\n  getStates() { return this._states.values(); }\n\n  getStateCount() { return this._states.size; }\n\n  addTransition(from, to, symbol)\n  {\n    if (!this.hasState(from)) throw new Error(\"Trying to add a transition to unknown state with label \\'\" + state.getStateLabel() + \"\\'\");\n    if (!this.hasState(to)) throw new Error(\"Trying to add a transition to unknown state with label \\'\" + state.getStateLabel() + \"\\'\");\n    if (!symbol) throw new Error(\"Cannot add transition for null symbol - use the empty symbol instead\");\n\n    const transitionKey = from.getStateID() + \"->\" + to.getStateID();\n    if (this._transitions.has(transitionKey))\n    {\n      const transition = this._transitions.get(transitionKey);\n      if (!transition.hasSymbol(symbol))\n      {\n        transition.addSymbol(symbol);\n      }\n      else\n      {\n        //Didn't add anything...\n        return false;\n      }\n    }\n    else\n    {\n      this._transitions.set(transitionKey, new Transition(from, to, [symbol]));\n    }\n\n    //Add to alphabet...\n    this._incrSymbolCount(symbol);\n    return true;\n  }\n\n  removeTransition(from, to, symbol=null)\n  {\n    const transitionKey = from.getStateID() + \"->\" + to.getStateID();\n    if (!this._transitions.has(transitionKey)) return false;\n\n    const transition = this._transitions.get(transitionKey);\n    const symbols = transition.getSymbols();\n\n    //If deleting a specific symbol...\n    if (symbol)\n    {\n      const index = symbols.indexOf(symbol);\n      if (index >= 0)\n      {\n        //Update symbol counts...\n        this._decrSymbolCount(symbol);\n\n        symbols.splice(index, 1);\n        if (symbols.length <= 0) this._transitions.delete(transitionKey);\n        return true;\n      }\n      else\n      {\n        return false;\n      }\n    }\n    //If deleting a all associated symbols...\n    else\n    {\n      //Update symbol counts...\n      for(const symbol of symbols)\n      {\n        this._decrSymbolCount(symbol);\n      }\n\n      //Remove transition\n      this._transitions.delete(transitionKey);\n      return true;\n    }\n  }\n\n  hasTransition(from, to, symbol=null)\n  {\n    const transitionKey = from.getStateID() + \"->\" + to.getStateID();\n    if (!this._transitions.has(transitionKey)) return false;\n    //Not checking for specific symbols...\n    if (!symbol) return true;\n\n    //Find the symbol...\n    return this._transitions.get(transitionKey).hasSymbol(symbol);\n  }\n\n  getTransitionSymbols(from, to)\n  {\n    const transitionKey = from.getStateID() + \"->\" + to.getStateID();\n    if (!this._transitions.has(transitionKey)) return null;\n    return this._transitions.get(transitionKey).getSymbols();\n  }\n\n  getTransitions() { return this._transitions.values(); }\n\n  _incrSymbolCount(symbol)\n  {\n    //Don't add empty symbol to the alphabet\n    if (symbol === EMPTY_SYMBOL) return;\n\n    const symbolCount = this._alphabet.get(symbol) || 0;\n    this._alphabet.set(symbol, symbolCount + 1);\n  }\n\n  _decrSymbolCount(symbol)\n  {\n    if (!this._alphabet.has(symbol)) throw new Error(\"Unable to find valid transition symbol in alphabet\");\n\n    //Empty symbol is not in the alphabet\n    if (symbol === EMPTY_SYMBOL) return;\n\n    const symbolCount = this._alphabet.get(symbol);\n    //Delete the symbol, since it is no longer used...\n    if (symbolCount <= 1)\n    {\n      if (!this.isCustomSymbol(symbol))\n      {\n        //Regular symbols are removed if unused...\n        this._alphabet.delete(symbol);\n      }\n      else\n      {\n        //Custom symbols stay in the alphabet, even if unused...\n        this._alphabet.set(symbol, 0);\n      }\n    }\n    else\n    {\n      //Still being used by someone...\n      this._alphabet.set(symbol, symbolCount - 1);\n    }\n  }\n\n  changeSymbol(symbol, newSymbol)\n  {\n    if (symbol === EMPTY_SYMBOL) throw new Error(\"Cannot change the empty symbol\");\n    if (newSymbol === EMPTY_SYMBOL) throw new Error(\"Cannot change to the empty symbol\");\n    if (this._alphabet.has(newSymbol)) throw new Error(\"Cannot change symbol to another existing symbol\");\n\n    for(const transition of this._transitions.values())\n    {\n      const symbols = transition.getSymbols();\n      const index = symbols.indexOf(symbol);\n\n      //Change the symbol from the transition\n      if (index >= 0)\n      {\n        symbols[index] = newSymbol;\n      }\n    }\n\n    //Exchange symbol counts...\n    const count = this._alphabet.get(symbol);\n    this._alphabet.set(newSymbol, count);\n    this._alphabet.delete(symbol);\n\n    //Check if custom symbol...\n    if (this._customSymbols.has(symbol))\n    {\n      this._customSymbols.delete(symbol);\n      this._customSymbols.add(newSymbol);\n    }\n  }\n\n  removeSymbol(symbol)\n  {\n    const cache = [];\n    for(const [key, transition] of this._transitions.entries())\n    {\n      const symbols = transition.getSymbols();\n      const index = symbols.indexOf(symbol);\n\n      //Delete the symbol from the transition\n      if (index >= 0)\n      {\n        symbols.splice(index, 1);\n\n        //If no more symbols, make sure to delete it from the map later...\n        if (symbols.length <= 0)\n        {\n          cache.push(key);\n        }\n      }\n    }\n\n    //Delete any transitions that have no more symbols...\n    for(const transitionKey of cache)\n    {\n      this._transitions.delete(transitionKey);\n    }\n\n    //Remove from alphabet if possible...\n    if (symbol !== EMPTY_SYMBOL)\n    {\n      if (this._customSymbols.has(symbol))\n      {\n        this._alphabet.set(symbol, 0);\n      }\n      else\n      {\n        this._alphabet.delete(symbol);\n      }\n    }\n  }\n\n  setCustomSymbol(symbol, custom=true)\n  {\n    if (symbol === EMPTY_SYMBOL) throw new Error(\"Cannot change the empty symbol as a custom symbol\");\n\n    if (custom)\n    {\n      if (!this._customSymbols.has(symbol))\n      {\n        this._customSymbols.add(symbol);\n\n        //Add symbol to alphabet if missing...\n        if (!this._alphabet.has(symbol)) this._alphabet.set(symbol, 0);\n      }\n    }\n    else\n    {\n      if (this._customSymbols.has(symbol))\n      {\n        this._customSymbols.delete(symbol);\n\n        //If symbol is unused, delete it\n        if (this._alphabet.has(symbol) && this._alphabet.get(symbol) <= 0) this._alphabet.delete(symbol)\n      }\n    }\n  }\n\n  isCustomSymbol(symbol)\n  {\n    return this._customSymbols.has(symbol);\n  }\n\n  getCustomSymbols()\n  {\n    return this._customSymbols;\n  }\n\n  clearCustomSymbols()\n  {\n    this._customSymbols.clear();\n  }\n\n  isUsedSymbol(symbol)\n  {\n    return this._alphabet.has(symbol) && this._alphabet.get(symbol) > 0;\n  }\n\n  isSymbol(symbol)\n  {\n    return this._alphabet.has(symbol);\n  }\n\n  getAlphabet()\n  {\n    return this._alphabet.keys();\n  }\n\n  setStartState(state)\n  {\n    const stateID = state.getStateID();\n    if (!this._states.has(stateID))\n    {\n      //Add it to the state set\n      this._states.set(stateID, state);\n    }\n    this._startState = state;\n  }\n  isStartState(state) { return this._startState === state; }\n  getStartState() { return this._startState; }\n\n  setFinalState(state, final=true)\n  {\n    //Make final\n    if (final)\n    {\n      //If missing from state set, add it in...\n      if (!this._states.has(state.getStateID()))\n      {\n        this.addState(state);\n      }\n\n      this._finalStates.add(state);\n    }\n    else\n    {\n      //If missing from state set, it would be effectively the same thing as\n      //calling addState(state). So due to ambiguity, don't do it.\n      if (!this._states.has(state.getStateID())) throw new Error(\"Trying to change final for missing state \\'\" + state.getStateLabel() + \"\\'\");\n\n      this._finalStates.delete(state);\n    }\n  }\n  isFinalState(state) { return this._finalStates.has(state); }\n  getFinalStates() { return this._finalStates; }\n\n  doTransition(state, symbol, forceNondeterminism=false, dst=[])\n  {\n    if (!state) return dst;\n    if (!(state instanceof State)) throw new Error(\"Invalid state instance type \\'\" + (typeof state) + \"\\'\");\n    if (!this._states.has(state.getStateID())) throw new Error(\"Unable to find source state with id \\'\" + state.getStateID() + \"\\'\");\n\n    if (!symbol) symbol = EMPTY_SYMBOL;\n\n    const fromTransitionKey = state.getStateID() + \"->\";\n    for(const key of this._transitions.keys())\n    {\n      if (key.startsWith(fromTransitionKey))\n      {\n        const transition = this._transitions.get(key);\n        if (transition.hasSymbol(symbol))\n        {\n          dst.push(transition.getDestinationState());\n\n          //There will only ever be 1 transition for deterministic machines\n          if (!forceNondeterminism && this._deterministic) return dst;\n        }\n      }\n    }\n    return dst;\n  }\n\n  doTerminalTransition(state, symbol, dst=[])\n  {\n    if (!state) return dst;\n    if (!this._states.has(state.getStateID())) throw new Error(\"Unable to find source state with id \\'\" + state.getStateID() + \"\\'\");\n\n    if (!symbol) symbol = EMPTY_SYMBOL;\n\n    const fromTransitionKey = state.getStateID() + \"->\";\n    for(const key of this._transitions.keys())\n    {\n      if (key.startsWith(fromTransitionKey))\n      {\n        const transition = this._transitions.get(key);\n        if (transition.hasSymbol(symbol))\n        {\n          const toState = transition.getDestinationState();\n          const result = this.doClosureTransition(toState);\n          for(const s of result)\n          {\n            if (!dst.includes(s)) dst.push(s);\n          }\n        }\n      }\n    }\n\n    return dst;\n  }\n\n  doClosureTransition(state, dst=[])\n  {\n    if (!state) return dst;\n\n    dst.push(state);\n    for(let i = 0; i < dst.length; ++i)\n    {\n      const transitions = this.getOutgoingTransitions(dst[i]);\n      for(const transition of transitions)\n      {\n        if (transition[SYMBOL_INDEX] === EMPTY_SYMBOL)\n        {\n          const toState = transition[TO_STATE_INDEX];\n          if (!dst.includes(toState))\n          {\n            dst.push(toState);\n          }\n        }\n      }\n    }\n    return dst;\n  }\n\n  getOutgoingTransitions(state, dst=[])\n  {\n    if (!state) return dst;\n    if (!this._states.has(state.getStateID())) throw new Error(\"Unable to find source state with id \\'\" + state.getStateID() + \"\\'\");\n\n    const fromTransitionKey = state.getStateID() + \"->\";\n    for(const key of this._transitions.keys())\n    {\n      if (key.startsWith(fromTransitionKey))\n      {\n        const transition = this._transitions.get(key);\n        const symbols = transition.getSymbols();\n        for(const symbol of symbols)\n        {\n          dst.push([state, symbol, transition.getDestinationState()]);\n        }\n      }\n    }\n\n    return dst;\n  }\n\n  getHashCode()\n  {\n    let string = \"\";\n    for(const state of this._states.values())\n    {\n      string += state.getHashString() + \",\";\n    }\n    string += \"|\";\n    for(const transition of this._transitions.values())\n    {\n      string += transition.getHashString() + \",\";\n    }\n    string += \"|\";\n    for(const state of this._finalStates)\n    {\n      string += state.getHashString();\n    }\n    string += \"|\";\n    string += this._startState ? this._startState.getHashString() : \"\";\n    string += \"|\";\n    string += this._deterministic ? \"d\" : \"n\";\n    return stringHash(string);\n  }\n}\n\nexport default FSA;\n","class AbstractGraphExporter\n{\n  constructor() {}\n\n  importFromData(data, module)\n  {\n    throw new Error(\"Unsupported import for type \\'\" + this.getFileType() + \"\\'\");\n  }\n\n  exportToData(module)\n  {\n    throw new Error(\"Unsupported export for type \\'\" + this.getFileType() + \"\\'\");\n  }\n\n  doesSupportData()\n  {\n    return false;\n  }\n\n  importFromFile(fileBlob, module)\n  {\n    throw new Error(\"Unsupported import for type \\'\" + this.getFileType() + \"\\'\");\n  }\n\n  exportToFile(filename, module)\n  {\n    throw new Error(\"Unsupported export for type \\'\" + this.getFileType() + \"\\'\");\n  }\n\n  doesSupportFile()\n  {\n    return false;\n  }\n\n  canImport(module)\n  {\n    return false;\n  }\n\n  canExport(module)\n  {\n    return true;\n  }\n\n  getTitle()\n  {\n    return this.getLabel();\n  }\n\n  getIconClass()\n  {\n    return null;\n  }\n\n  getLabel()\n  {\n    return \"Export as \" + this.getFileType().toUpperCase();\n  }\n\n  getFileType()\n  {\n    throw new Error(\"Unknown file type for exporter\");\n  }\n}\n\nexport default AbstractGraphExporter;\n","import React from 'react';\n\nclass Icon extends React.Component\n{\n  constructor(props) { super(props); }\n\n  //Override\n  render()\n  {\n    return (\n      <svg id={this.props.id} className={this.props.className} style={this.props.style}\n      xmlns=\"http://www.w3.org/2000/svg\"\n      width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n        <path d=\"M7 10l5 5 5-5z\"/>\n      </svg>\n    );\n  }\n}\nexport default Icon;\n","import React from 'react';\n\nclass Icon extends React.Component\n{\n  constructor(props) { super(props); }\n\n  //Override\n  render()\n  {\n    return (\n      <svg id={this.props.id} className={this.props.className} style={this.props.style}\n      xmlns=\"http://www.w3.org/2000/svg\"\n      width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n        <path d=\"M7 14l5-5 5 5z\"/>\n      </svg>\n    );\n  }\n}\nexport default Icon;\n","import React from 'react';\nimport Style from './PanelSection.css';\n\nimport IconButton from 'experimental/components/IconButton.js';\nimport TinyDownIcon from 'experimental/iconset/TinyDownIcon.js';\nimport TinyUpIcon from 'experimental/iconset/TinyUpIcon.js';\n\nclass PanelSection extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.state = {\n      open: props.initial || false\n    };\n\n    this.onClick = this.onClick.bind(this);\n  }\n\n  onClick(e)\n  {\n    this.setState((prev, props) => {\n      return {open: !prev.open};\n    })\n  }\n\n  //Override\n  componentDidUpdate()\n  {\n    if (this.state.open && this.props.disabled)\n    {\n      this.setState({open: false});\n    }\n  }\n\n  //Override\n  render()\n  {\n    const isOpen = this.state.open;\n    const isDisabled = this.props.disabled || React.Children.count(this.props.children) <= 0;\n    const isFull = this.props.full;\n    const title = this.props.title;\n    return (\n      <section id={this.props.id}\n        className={Style.section_container +\n          \" \" + this.props.className}\n        style={this.props.style}>\n        <IconButton className={Style.section_header}\n          title={title}\n          disabled={isDisabled}\n          onClick={this.onClick}>\n          {!isOpen ? <TinyDownIcon/> : <TinyUpIcon/>}\n        </IconButton>\n        <div className={Style.section_content_container +\n          (isOpen ? \" open \" : \"\") +\n          (isFull ? \" full \" : \"\")}>\n          <div className={Style.section_content}>\n            {this.props.children}\n          </div>\n        </div>\n      </section>\n    );\n  }\n}\n\nexport default PanelSection;\n","/**\n * Used by InputAdapter to handle input event logic.\n */\nclass AbstractInputHandler\n{\n  constructor() {}\n\n  /**\n   * Called by InputAdapter before an InputEvent begins.\n   * Returns true if the event should be consumed. If consumed, the event will\n   * not begin.\n   */\n  onPreInputEvent(pointer) { return false; }\n\n  /**\n   * Called by InputAdapter when an InputEvent resolves and is not an Alt input.\n   * To handle events for Alt inputs, refer to onAltInputEvent().\n   * Returns true if the event should be consumed. If consumed, the event will\n   * not propagate to other trigger other events.\n   */\n  onInputEvent(pointer) { return false; }\n\n  /**\n   * Called by InputAdapter when an InputEvent resolves and is an Alt input.\n   * To handle events for non-Alt inputs, refer to onInputEvent().\n   * Returns true if the event should be consumed. If consumed, the event will\n   * not propagate to other trigger other events.\n   */\n  onAltInputEvent(pointer) { return false; }\n\n  /**\n   * Called by InputAdapter when a DblInputEvent resolves. The input is\n   * assumed by a non-Alt input, since only non-Alt inputs can trigger this\n   * event.\n   * Returns true if the event should be consumed. If consumed, the event will\n   * not propagate to other trigger other events.\n   */\n  onDblInputEvent(pointer) { return false; }\n\n  /**\n   * Called by InputAdapter when input movess. The input is called before drag\n   * logic.\n   * Returns true if the event should be consumed. If consumed, the event will\n   * not propagate to other trigger other events (i.e. dragging events).\n   */\n  onMoveInputEvent(pointer) { return false; }\n\n  /**\n   * Called by InputAdapter before a drag begins. The input could be either\n   * an Alt or non-Alt input.\n   * Returns true if the event should be consumed. If consumed, the event will\n   * not propagate to other trigger other events, nor continue the drag input.\n   */\n  onDragStart(pointer) { return false; }\n\n  /**\n   * Called by InputAdapter while dragging moves. The input could be either\n   * an Alt or non-Alt input.\n   * Will always be called after onDragStart() and will be followed by\n   * onDragStop() when complete.\n   */\n  onDragMove(pointer) {}\n\n  /**\n   * Called by InputAdapter after a drag ends. The input could be either an\n   * Alt or non-Alt input.\n   * Will always be called after onDragStart(). Although onDragMove may be\n   * called in-between, it is not guaranteed.\n   */\n  onDragStop(pointer) {}\n\n  /**\n   * Called by InputAdapter after an InputEvent ends.\n   */\n  onPostInputEvent(pointer) {}\n\n  /**\n   * Called by InputAdapter when zoom changes.\n   * Returns true if event is consumed (zoom will not be applied)\n   */\n  onZoomChange(pointer, zoomValue, prevValue)\n  {\n    return false;\n  }\n}\n\nexport default AbstractInputHandler;\n","export function userClearGraph(app, graphOnly=false, callback=null)\n{\n  if (window.confirm(I18N.toString(\"alert.graph.clear\")))\n  {\n    const module = app.getCurrentModule();\n    module.getGraphController().getGraph().clear();\n    if (!graphOnly)\n    {\n      app.getUndoManager().clear();\n      app.getSession().setProjectName(null);\n    }\n    if (callback) callback();\n  }\n}\n","export const RENDER_LAYER_WORKSPACE = \"workspace\";\nexport const RENDER_LAYER_WORKSPACE_OVERLAY = \"workspace-overlay\";\nexport const RENDER_LAYER_VIEWPORT = \"viewport\";\nexport const RENDER_LAYER_VIEWPORT_OVERLAY = \"viewport-overlay\";\n\nclass RenderManager\n{\n  constructor()\n  {\n    this._renderMapping = new Map();\n  }\n\n  addRenderer(layerID, rendererClass)\n  {\n    if (this._renderMapping.has(layerID))\n    {\n      this._renderMapping.get(layerID).push(rendererClass);\n    }\n    else\n    {\n      this._renderMapping.set(layerID, [rendererClass]);\n    }\n    return this;\n  }\n\n  //DuckType(SessionListener)\n  onSessionStart(session)\n  {\n\n  }\n\n  //DuckType(SessionListener)\n  onSessionStop(session)\n  {\n    this._renderMapping.clear();\n  }\n\n  getRenderersByLayer(layerID)\n  {\n    return this._renderMapping.get(layerID);\n  }\n}\n\nexport default RenderManager;\n","import React from 'react';\nimport Style from './PanelSwitch.css';\n\nclass PanelSwitch extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    if (!props.id) throw new Error(\"Must specify id\");\n  }\n\n  //Override\n  render()\n  {\n    const id = this.props.id;\n    const disabled = this.props.disabled;\n    const checked = this.props.checked;\n    const onChange = this.props.onChange;\n\n    return (\n      <div id={id}\n        className={Style.switch_container +\n          (disabled ? \" disabled \" : \"\") +\n          (checked ? \" active \" : \"\") +\n          \" \" + this.props.className}\n        style={this.props.style}>\n        <label className={Style.panel_switch}\n          style={this.props.style}>\n          <input type=\"checkbox\" id={id + \"-switch\"} checked={checked} onChange={onChange} disabled={disabled}/>\n          <div className={Style.switch_slider}></div>\n        </label>\n        <label className={Style.switch_label}\n          htmlFor={id + \"-switch\"}>\n          {this.props.title}\n        </label>\n      </div>\n    );\n  }\n}\n\nexport default PanelSwitch;\n","import React from 'react';\n\nclass Icon extends React.Component\n{\n  constructor(props) { super(props); }\n\n  //Override\n  render()\n  {\n    return (\n      <svg id={this.props.id} className={this.props.className} style={this.props.style}\n      xmlns=\"http://www.w3.org/2000/svg\"\n      width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n        <path d=\"M9,16V10H5L12,3L19,10H15V16H9M5,20V18H19V20H5Z\"/>\n      </svg>\n    );\n  }\n}\nexport default Icon;\n","import React from 'react';\n\nclass Icon extends React.Component\n{\n  constructor(props) { super(props); }\n\n  //Override\n  render()\n  {\n    return (\n      <svg id={this.props.id} className={this.props.className} style={this.props.style}\n      xmlns=\"http://www.w3.org/2000/svg\"\n      width=\"24\" height=\"24\" viewBox=\"0 0 56 56\">\n        <path fill=\"#E9E9E0\" d=\"M36.985,0H7.963C7.155,0,6.5,0.655,6.5,1.926V55c0,0.345,0.655,1,1.463,1h40.074 c0.808,0,1.463-0.655,1.463-1V12.978c0-0.696-0.093-0.92-0.257-1.085L37.607,0.257C37.442,0.093,37.218,0,36.985,0z\"/>\n        <polygon fill=\"#D9D7CA\" points=\"37.5,0.151 37.5,12 49.349,12 \t\"/>\n        <path fill=\"#9777A8\" d=\"M48.037,56H7.963C7.155,56,6.5,55.345,6.5,54.537V39h43v15.537C49.5,55.345,48.845,56,48.037,56z\"/>\n        <path fill=\"#FFFFFF\" d={\"M17.021,42.719v7.848c0,0.474-0.087,0.873-0.26,1.196s-0.405,0.583-0.697,0.779 s-0.627,0.333-1.005,0.41c-0.378,0.077-0.768,0.116-1.169,0.116c-0.2,0-0.436-0.021-0.704-0.062s-0.547-0.104-0.834-0.191 s-0.563-0.185-0.827-0.294s-0.487-0.232-0.67-0.369l0.697-1.107c0.091,0.063,0.221,0.13,0.39,0.198s0.354,0.132,0.554,0.191 s0.41,0.111,0.629,0.157s0.424,0.068,0.615,0.068c0.483,0,0.868-0.094,1.155-0.28s0.439-0.504,0.458-0.95v-7.711H17.021z\"}/>\n        <path fill=\"#FFFFFF\" d={\"M25.184,50.238c0,0.364-0.075,0.718-0.226,1.06s-0.362,0.643-0.636,0.902s-0.61,0.467-1.012,0.622 s-0.856,0.232-1.367,0.232c-0.219,0-0.444-0.012-0.677-0.034s-0.467-0.062-0.704-0.116c-0.237-0.055-0.463-0.13-0.677-0.226 s-0.398-0.212-0.554-0.349l0.287-1.176c0.128,0.073,0.289,0.144,0.485,0.212s0.398,0.132,0.608,0.191s0.419,0.107,0.629,0.144 s0.405,0.055,0.588,0.055c0.556,0,0.982-0.13,1.278-0.39s0.444-0.645,0.444-1.155c0-0.31-0.104-0.574-0.314-0.793 s-0.472-0.417-0.786-0.595s-0.654-0.355-1.019-0.533s-0.706-0.388-1.025-0.629s-0.583-0.526-0.793-0.854s-0.314-0.738-0.314-1.23 c0-0.446,0.082-0.843,0.246-1.189s0.385-0.641,0.663-0.882s0.602-0.426,0.971-0.554s0.759-0.191,1.169-0.191 c0.419,0,0.843,0.039,1.271,0.116s0.774,0.203,1.039,0.376c-0.055,0.118-0.118,0.248-0.191,0.39s-0.142,0.273-0.205,0.396 s-0.118,0.226-0.164,0.308s-0.073,0.128-0.082,0.137c-0.055-0.027-0.116-0.063-0.185-0.109s-0.166-0.091-0.294-0.137 s-0.296-0.077-0.506-0.096s-0.479-0.014-0.807,0.014c-0.183,0.019-0.355,0.07-0.52,0.157s-0.31,0.193-0.438,0.321 s-0.228,0.271-0.301,0.431s-0.109,0.313-0.109,0.458c0,0.364,0.104,0.658,0.314,0.882s0.47,0.419,0.779,0.588 s0.647,0.333,1.012,0.492s0.704,0.354,1.019,0.581s0.576,0.513,0.786,0.854S25.184,49.7,25.184,50.238z\"}/>\n        <path fill=\"#FFFFFF\" d={\"M35.082,47.914c0,0.848-0.107,1.595-0.321,2.242s-0.511,1.185-0.889,1.613s-0.82,0.752-1.326,0.971 s-1.06,0.328-1.661,0.328s-1.155-0.109-1.661-0.328s-0.948-0.542-1.326-0.971s-0.675-0.966-0.889-1.613s-0.321-1.395-0.321-2.242 s0.107-1.593,0.321-2.235s0.511-1.178,0.889-1.606s0.82-0.754,1.326-0.978s1.06-0.335,1.661-0.335s1.155,0.111,1.661,0.335 s0.948,0.549,1.326,0.978s0.675,0.964,0.889,1.606S35.082,47.066,35.082,47.914z M30.844,51.729c0.337,0,0.658-0.066,0.964-0.198 s0.579-0.349,0.82-0.649s0.431-0.695,0.567-1.183s0.21-1.082,0.219-1.784c-0.009-0.684-0.08-1.265-0.212-1.743 s-0.314-0.873-0.547-1.183s-0.497-0.533-0.793-0.67s-0.608-0.205-0.937-0.205c-0.337,0-0.658,0.063-0.964,0.191 s-0.579,0.344-0.82,0.649s-0.431,0.699-0.567,1.183c-0.137,0.483-0.21,1.075-0.219,1.777c0.009,0.684,0.08,1.267,0.212,1.75 s0.314,0.877,0.547,1.183s0.497,0.528,0.793,0.67S30.516,51.729,30.844,51.729z\"}/>\n        <path fill=\"#FFFFFF\" d=\"M44.68,42.924V53h-1.668l-3.951-6.945V53h-1.668V42.924h1.668l3.951,6.945v-6.945H44.68z\"/>\n        <path fill=\"#9777A8\" d=\"M19.5,19v-4c0-0.551,0.448-1,1-1c0.553,0,1-0.448,1-1s-0.447-1-1-1c-1.654,0-3,1.346-3,3v4 c0,1.103-0.897,2-2,2c-0.553,0-1,0.448-1,1s0.447,1,1,1c1.103,0,2,0.897,2,2v4c0,1.654,1.346,3,3,3c0.553,0,1-0.448,1-1 s-0.447-1-1-1c-0.552,0-1-0.449-1-1v-4c0-1.2-0.542-2.266-1.382-3C18.958,21.266,19.5,20.2,19.5,19z\"/>\n        <circle fill=\"#9777A8\" cx=\"27.5\" cy=\"18.5\" r=\"1.5\"/>\n        <path fill=\"#9777A8\" d=\"M39.5,21c-1.103,0-2-0.897-2-2v-4c0-1.654-1.346-3-3-3c-0.553,0-1,0.448-1,1s0.447,1,1,1 c0.552,0,1,0.449,1,1v4c0,1.2,0.542,2.266,1.382,3c-0.84,0.734-1.382,1.8-1.382,3v4c0,0.551-0.448,1-1,1c-0.553,0-1,0.448-1,1 s0.447,1,1,1c1.654,0,3-1.346,3-3v-4c0-1.103,0.897-2,2-2c0.553,0,1-0.448,1-1S40.053,21,39.5,21z\"/>\n        <path fill=\"#9777A8\" d=\"M27.5,24c-0.553,0-1,0.448-1,1v3c0,0.552,0.447,1,1,1s1-0.448,1-1v-3 C28.5,24.448,28.053,24,27.5,24z\"/>\n      </svg>\n    );\n  }\n}\nexport default Icon;\n","import React from 'react';\n\nclass Icon extends React.Component\n{\n  constructor(props) { super(props); }\n\n  //Override\n  render()\n  {\n    return (\n      <svg id={this.props.id} className={this.props.className} style={this.props.style}\n      xmlns=\"http://www.w3.org/2000/svg\"\n      width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n        <path d=\"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10h-4v4h-2v-4H7v-2h4V7h2v4h4v2z\"/>\n      </svg>\n    );\n  }\n}\nexport default Icon;\n","import React from 'react';\n\nclass Icon extends React.Component\n{\n  constructor(props) { super(props); }\n\n  //Override\n  render()\n  {\n    return (\n      <svg id={this.props.id} className={this.props.className} style={this.props.style}\n      xmlns=\"http://www.w3.org/2000/svg\"\n      width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n        <path d=\"M13.49 5.48c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm-3.6 13.9l1-4.4 2.1 2v6h2v-7.5l-2.1-2 .6-3c1.3 1.5 3.3 2.5 5.5 2.5v-2c-1.9 0-3.5-1-4.3-2.4l-1-1.6c-.4-.6-1-1-1.7-1-.3 0-.5.1-.8.1l-5.2 2.2v4.7h2v-3.4l1.8-.7-1.6 8.1-4.9-1-.4 2 7 1.4z\"/>\n      </svg>\n    );\n  }\n}\nexport default Icon;\n","import React from 'react';\nimport Style from './IconUploadButton.css';\n\nimport IconButton from './IconButton.js';\n\nclass IconUploadButton extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.onFileUpload = this.onFileUpload.bind(this);\n  }\n\n  onFileUpload(e)\n  {\n    const files = e.target.files;\n    if (files.length > 0)\n    {\n      if (this.props.onUpload) this.props.onUpload(files[0]);\n\n      //Makes sure you can upload the same file again.\n      e.target.value = \"\";\n    }\n  }\n\n  //Override\n  render()\n  {\n    const accept = this.props.accept;\n\n    return (\n      <IconButton id={this.props.id}\n        className={Style.upload_button +\n          \" \" + this.props.className}\n        style={this.props.style}\n        title={this.props.title}\n        disabled={this.props.disabled}>\n        <input type=\"file\" name=\"import\"\n          className={Style.upload_input}\n          disabled={this.props.disabled}\n          accept={accept}\n          onChange={this.onFileUpload}/>\n        {this.props.children}\n      </IconButton>\n    );\n  }\n}\n\nexport default IconUploadButton;\n","import React from 'react';\n\nclass Icon extends React.Component\n{\n  constructor(props) { super(props); }\n\n  //Override\n  render()\n  {\n    return (\n      <svg id={this.props.id} className={this.props.className} style={this.props.style}\n      xmlns=\"http://www.w3.org/2000/svg\"\n      width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n        <path d=\"M19 12v7H5v-7H3v7c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-7h-2zm-6 .67l2.59-2.58L17 11.5l-5 5-5-5 1.41-1.41L11 12.67V3h2z\"/>\n      </svg>\n    );\n  }\n}\nexport default Icon;\n","import React from 'react';\n\nclass Icon extends React.Component\n{\n  constructor(props) { super(props); }\n\n  //Override\n  render()\n  {\n    return (\n      <svg id={this.props.id} className={this.props.className} style={this.props.style}\n      xmlns=\"http://www.w3.org/2000/svg\"\n      width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n        <path d=\"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z\"/>\n      </svg>\n    );\n  }\n}\nexport default Icon;\n","class AbstractEventHandler\n{\n  constructor() {}\n\n  applyUndo(undoManager)\n  {\n    throw new Error(\"Undo operation for handler not supported\");\n  }\n\n  applyRedo(undoManager)\n  {\n    throw new Error(\"Redo operation for handler not supported\");\n  }\n}\n\nexport default AbstractEventHandler;\n","import React from 'react';\nimport IconButton from './IconButton.js';\n\nclass IconStateButton extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.state = {\n      index: props.initial || 0\n    };\n\n    this.onClick = this.onClick.bind(this);\n  }\n\n  onClick(e)\n  {\n    const prevIndex = this.state.index;\n    this.setState((prev, props) => {\n      const count = React.Children.count(props.children);\n      let nextIndex = prev.index + 1;\n      if (nextIndex >= count)\n      {\n        nextIndex = 0;\n      }\n      return {index: nextIndex};\n    }, () => {\n      if (this.props.onClick)\n      {\n        this.props.onClick(e, prevIndex);\n      }\n    });\n  }\n\n  setStateIndex(index)\n  {\n    this.setState({index: index});\n  }\n\n  getStateIndex()\n  {\n    return this.state.index;\n  }\n\n  //Override\n  render()\n  {\n    const child = React.Children.map(this.props.children, (child, i) => {\n      if (i === this.state.index) return child;\n    })[0];\n\n    return (\n      <IconButton id={this.props.id}\n        className={this.props.className}\n        style={this.props.style}\n        title={this.props.title}\n        disabled={this.props.disabled}\n        onClick={this.onClick}>\n        {child}\n      </IconButton>\n    );\n  }\n}\nexport default IconStateButton;\n","import React from 'react';\n\nclass Icon extends React.Component\n{\n  constructor(props) { super(props); }\n\n  //Override\n  render()\n  {\n    return (\n      <svg id={this.props.id} className={this.props.className} style={this.props.style}\n      xmlns=\"http://www.w3.org/2000/svg\"\n      width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n        <path d=\"M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z\"/>\n      </svg>\n    );\n  }\n}\nexport default Icon;\n","import React from 'react';\n\nclass Icon extends React.Component\n{\n  constructor(props) { super(props); }\n\n  //Override\n  render()\n  {\n    return (\n      <svg id={this.props.id} className={this.props.className} style={this.props.style}\n      xmlns=\"http://www.w3.org/2000/svg\"\n      width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n        <path d=\"M5 16h3v3h2v-5H5v2zm3-8H5v2h5V5H8v3zm6 11h2v-3h3v-2h-5v5zm2-11V5h-2v5h5V8h-3z\"/>\n      </svg>\n    );\n  }\n}\nexport default Icon;\n","import React from 'react';\nimport Style from './FullscreenWidget.css';\n\nimport IconStateButton from 'experimental/components/IconStateButton.js';\nimport FullscreenIcon from 'experimental/iconset/FullscreenIcon.js';\nimport FullscreenExitIcon from 'experimental/iconset/FullscreenExitIcon.js';\n\nclass FullscreenWidget extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  //Override\n  render()\n  {\n    const app = this.props.app;\n\n    return (\n      <IconStateButton id={this.props.id}\n        className={Style.fullscreen_button + \" \" + this.props.className}\n        style={this.props.style}\n        title={\"Fullscreen Mode\"}\n        onClick={(e, i) => app.setState({hide: (i === 0)})}>\n        <FullscreenIcon/>\n        <FullscreenExitIcon/>\n      </IconStateButton>\n    );\n  }\n}\n\nexport default FullscreenWidget;\n","import React from 'react';\n\nclass Icon extends React.Component\n{\n  constructor(props) { super(props); }\n\n  //Override\n  render()\n  {\n    return (\n      <svg id={this.props.id} className={this.props.className} style={this.props.style}\n      xmlns=\"http://www.w3.org/2000/svg\"\n      width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n        <path d=\"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z\"/>\n        <path d=\"M12 10h-2v2H9v-2H7V9h2V7h1v2h2v1z\"/>\n      </svg>\n    );\n  }\n}\nexport default Icon;\n","import React from 'react';\n\nclass Icon extends React.Component\n{\n  constructor(props) { super(props); }\n\n  //Override\n  render()\n  {\n    return (\n      <svg id={this.props.id} className={this.props.className} style={this.props.style}\n      xmlns=\"http://www.w3.org/2000/svg\"\n      width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n        <path d=\"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14zM7 9h5v1H7z\"/>\n      </svg>\n    );\n  }\n}\nexport default Icon;\n","import React from 'react';\nimport Style from './ZoomWidget.css';\n\nimport IconButton from 'experimental/components/IconButton.js';\nimport ZoomInIcon from 'experimental/iconset/ZoomInIcon.js';\nimport ZoomOutIcon from 'experimental/iconset/ZoomOutIcon.js';\n\nclass ZoomWidget extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.onZoomIn = this.onZoomIn.bind(this);\n    this.onZoomOut = this.onZoomOut.bind(this);\n  }\n\n  onZoomIn(e)\n  {\n    const viewport = this.props.viewport;\n    const viewScale = -viewport.getScale() * 0.4;\n    viewport.addScale(viewScale);\n  }\n\n  onZoomOut(e)\n  {\n    const viewport = this.props.viewport;\n    const viewScale = viewport.getScale() * 0.75;\n    viewport.addScale(viewScale);\n  }\n\n  //Override\n  render()\n  {\n    const viewport = this.props.viewport;\n    const viewScale = \"x\" + (1 / (viewport.getScale() || 1)).toFixed(2);\n\n    return (\n      <div id={this.props.id}\n        className={Style.zoom_container +\n          \" \" + this.props.className}\n        style={this.props.style}>\n        <IconButton className={Style.zoom_button} title=\"Zoom In\" onClick={this.onZoomIn}>\n          <ZoomInIcon/>\n        </IconButton>\n        <IconButton className={Style.zoom_button} title=\"Zoom Out\" onClick={this.onZoomOut}>\n          <ZoomOutIcon/>\n        </IconButton>\n        <label className={Style.zoom_label}>{viewScale}</label>\n      </div>\n    );\n  }\n}\n\nexport default ZoomWidget;\n","import React from 'react';\n\nclass Icon extends React.Component\n{\n  constructor(props) { super(props); }\n\n  //Override\n  render()\n  {\n    return (\n      <svg id={this.props.id} className={this.props.className} style={this.props.style}\n      xmlns=\"http://www.w3.org/2000/svg\"\n      width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n        <path d=\"M12 8c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm8.94 3c-.46-4.17-3.77-7.48-7.94-7.94V1h-2v2.06C6.83 3.52 3.52 6.83 3.06 11H1v2h2.06c.46 4.17 3.77 7.48 7.94 7.94V23h2v-2.06c4.17-.46 7.48-3.77 7.94-7.94H23v-2h-2.06zM12 19c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7z\"/>\n      </svg>\n    );\n  }\n}\nexport default Icon;\n","import React from 'react';\nimport Style from './FocusCenterWidget.css';\n\nimport IconButton from 'experimental/components/IconButton.js';\nimport PinpointIcon from 'experimental/iconset/PinpointIcon.js';\n\nconst OFFSET_EPSILON = 0.1;\n\nclass FocusCenterWidget extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.onClick = this.onClick.bind(this);\n  }\n\n  onClick(e)\n  {\n    const viewport = this.props.viewport;\n    viewport.setOffset(0, 0);\n  }\n\n  //Override\n  render()\n  {\n    const viewport = this.props.viewport;\n\n    return (\n      <IconButton id={this.props.id}\n        className={Style.center_focus_button +\n          \" \" + this.props.className}\n        style={this.props.style}\n        title={\"Center Workspace\"}\n        disabled={Math.abs(viewport.getOffsetX()) < OFFSET_EPSILON &&\n          Math.abs(viewport.getOffsetY()) < OFFSET_EPSILON} onClick={this.onClick}>\n        <PinpointIcon/>\n      </IconButton>\n    );\n  }\n}\n\nexport default FocusCenterWidget;\n","import React from 'react';\nimport Style from './NavbarWidget.css';\n\nimport FullscreenWidget from 'experimental/widgets/FullscreenWidget.js';\nimport ZoomWidget from 'experimental/widgets/ZoomWidget.js';\nimport FocusCenterWidget from 'experimental/widgets/FocusCenterWidget.js';\n\nclass NavbarWidget extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  //Override\n  render()\n  {\n    const app = this.props.app;\n    const viewport = app.getInputAdapter().getViewport();\n\n    return (\n      <div id={this.props.id}\n        className={Style.navbar_container +\n          \" \" + this.props.className}\n        style={this.props.style}>\n        <FullscreenWidget className={Style.navbar_widget} app={app}/>\n        <ZoomWidget className={Style.navbar_widget_container} viewport={viewport}/>\n        <FocusCenterWidget className={Style.navbar_widget} viewport={viewport}/>\n      </div>\n    );\n  }\n}\n\nexport default NavbarWidget;\n","import React from 'react';\nimport Style from './PanelDivider.css';\n\nclass PanelDivider extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  //Override\n  render()\n  {\n    return (\n      <div id={this.props.id}\n        className={Style.panel_divider +\n          \" \" + this.props.className}\n        style={this.props.style}>\n      </div>\n    );\n  }\n}\n\nexport default PanelDivider;\n","export const CTRL_KEY = 'Control';\nexport const META_KEY = 'Meta';\nexport const ALT_KEY = 'Alt';\nexport const SHIFT_KEY = 'Shift';\n//NOTE: For more keys, refer to http://keycode.info/\n\nclass HotKeyManager\n{\n  constructor()\n  {\n    this._hotkeys = [];\n    this._cachedEvent = {\n      ctrlKey: false,\n      metaKey: false,\n      altKey: false,\n      shiftKey: false,\n      code: null\n    };\n    this._prevHotKey = null;\n    this._repeatCount = 0;\n    this._enabled = false;\n\n    this._altHotkey = null;\n\n    this.onKeyDown = this.onKeyDown.bind(this);\n    this.onKeyUp = this.onKeyUp.bind(this);\n  }\n\n  registerHotKey(name, keys, callback)\n  {\n    if (!Array.isArray(keys)) throw new Error(\"Must be an array of key codes\");\n    const ctrlIndex = keys.indexOf(CTRL_KEY);\n    if (ctrlIndex >= 0) keys.splice(ctrlIndex, 1);\n    const metaIndex = keys.indexOf(META_KEY);\n    if (metaIndex >= 0) keys.splice(metaIndex, 1);\n    const altIndex = keys.indexOf(ALT_KEY);\n    if (altIndex >= 0) keys.splice(altIndex, 1);\n    const shiftIndex = keys.indexOf(SHIFT_KEY);\n    if (shiftIndex >= 0) keys.splice(shiftIndex, 1);\n    if (keys.length != 1) throw new Error(\"Multiple key operations not supported\");\n    const charKey = keys[0];\n\n    const ctrl = ctrlIndex >= 0 || metaIndex >= 0;\n    const alt = altIndex >= 0;\n    const shift = shiftIndex >= 0;\n\n    const result = {\n      name: name,\n      localizedKeys: (ctrl ? \"Ctrl + \" : \"\") +\n        (alt ? \"Alt + \" : \"\") +\n        (shift ? \"Shift + \" : \"\") +\n        charKey,\n      charKey: charKey,\n      ctrlKey: ctrl,\n      altKey: alt,\n      shiftKey: shift,\n      callback: callback\n    };\n\n    this._hotkeys.unshift(result);\n\n    return this;\n  }\n\n  //HACK: Cause hotkey manager does not allow 'control' hotkeys. This is the exception.\n  registerAltHotKey(name, callback)\n  {\n    if (this._altHotkey) throw new Error(\"Only one hotkey can exist for \\'Alt\\'\");\n\n    this._altHotkey = {\n      name: name,\n      localizedKeys: \"Alt\",\n      charKey: null,\n      ctrlKey: false,\n      altKey: true,\n      shiftKey: false,\n      callback: callback\n    };\n\n    return this;\n  }\n\n  //Override\n  onSessionStart(session)\n  {\n    window.addEventListener('keydown', this.onKeyDown);\n    window.addEventListener('keyup', this.onKeyUp);\n\n    this._enabled = true;\n  }\n\n  //Override\n  onSessionStop(session)\n  {\n    this._enabled = false;\n\n    this._prevHotKey = null;\n    this._repeatCount = 0;\n    this._hotkeys.length = 0;\n    this._altHotkey = null;\n\n    window.removeEventListener('keydown', this.onKeyDown);\n    window.removeEventListener('keyup', this.onKeyUp);\n  }\n\n  setEnabled(enabled)\n  {\n    this._enabled = enabled;\n  }\n\n  isEnabled()\n  {\n    return this._enabled;\n  }\n\n  findMatchingHotKey(e)\n  {\n    for(const hotkey of this._hotkeys)\n    {\n      if (matchesHotKeyEvent(e, hotkey)) return hotkey;\n    }\n    return null;\n  }\n\n  getCurrentHotKey()\n  {\n    return this._prevHotKey;\n  }\n\n  getCurrentHotKeyRepeatCount()\n  {\n    return this._repeatCount;\n  }\n\n  getCurrentlyPossibleHotKeys(dst=[])\n  {\n    const event = this._cachedEvent;\n    const eventCtrl = event.ctrlKey || event.metaKey;\n    const eventAlt = event.altKey;\n    const eventShift = event.shiftKey;\n    if (!eventCtrl && !eventAlt && !eventShift) return dst;\n    const eventKey = event.code;\n\n    let result = null;\n    for(const hotkey of this._hotkeys)\n    {\n      let flag = false;\n      if (eventCtrl ^ hotkey.ctrlKey)\n      {\n        //It's ok, but it is not a complete match...\n        if (!eventCtrl) flag = true;\n        //Nope.\n        else continue;\n      }\n      if (eventAlt ^ hotkey.altKey)\n      {\n        //It's ok, but it is not a complete match...\n        if (!eventAlt) flag = true;\n        //Nope.\n        else continue;\n      }\n      if (eventShift ^ hotkey.shiftKey)\n      {\n        //It's ok, but it is not a complete match...\n        if (!eventShift) flag = true;\n        //Nope.\n        else continue;\n      }\n\n      if (!flag && eventKey === hotkey.charKey)\n      {\n        result = hotkey;\n      }\n\n      dst.push(hotkey);\n    }\n\n    if (result) return result;\n    else return dst;\n  }\n\n  onKeyDown(e)\n  {\n    if (!this._enabled) return;\n\n    if (!e.repeat)\n    {\n      this.captureKeyEvent(e, false);\n\n      let result = this.findMatchingHotKey(this._cachedEvent);\n      if (!result && matchesHotKeyEvent(e, this._altHotkey)) result = this._altHotkey;\n\n      if (result)\n      {\n        if (this._prevHotKey === result)\n        {\n          ++this._repeatCount;\n        }\n        else\n        {\n          this._prevHotKey = result;\n          this._repeatCount = 0;\n        }\n\n        result.callback();\n\n        e.preventDefault();\n        e.stopPropagation();\n      }\n    }\n  }\n\n  onKeyUp(e)\n  {\n    if (!this._enabled) return;\n\n    if (this.captureKeyEvent(e, true))\n    {\n      this._prevHotKey = null;\n      this._repeatCount = 0;\n    }\n  }\n\n  captureKeyEvent(e, isKeyUp=false)\n  {\n    this._cachedEvent.ctrlKey = e.ctrlKey;\n    this._cachedEvent.metaKey = e.metaKey;\n    this._cachedEvent.altKey = e.altKey;\n    this._cachedEvent.shiftKey = e.shiftKey;\n    this._cachedEvent.code = isKeyUp ? null : (e.code || null);\n    return isKeyUp && !(this._cachedEvent.ctrlKey || this._cachedEvent.metaKey || this._cachedEvent.altKey || this._cachedEvent.shiftKey);\n  }\n}\n\nexport default HotKeyManager;\n\nfunction matchesHotKeyEvent(e, hotkey)\n{\n  if (hotkey.ctrlKey !== (e.ctrlKey || e.metaKey)) return false;\n  if (hotkey.altKey !== e.altKey) return false;\n  if (hotkey.shiftKey !== e.shiftKey) return false;\n  if (hotkey.charKey && hotkey.charKey !== e.code) return false;\n  return true;\n}\n","import React from 'react';\n\nconst QUAD_RADIAN_THRESHOLD = 0.01;\nconst QUAD_REVERSE_OFFSET_THRESHOLD = 4;\nconst ARROW_WIDTH = 10;\nconst SIXTH_PI = Math.PI / 6;\n\nexport const DIRECTED_FORWARD = \"forward\";\nexport const DIRECTED_BACKWARD = \"backward\";\nexport const DIRECTED_BOTH = \"both\";\nexport const DIRECTED_NONE = \"undirected\";\n\nexport const DefaultEndpointRenderer = props => (\n  <>\n    <path d={\n      \"M \" +\n        (props.position.x - (props.length * Math.sin(props.angle - SIXTH_PI))) +\n        \" \" +\n        (props.position.y - (props.length * Math.cos(props.angle - SIXTH_PI))) +\n        \" \" +\n        \"L \" + props.position.x + \" \" + props.position.y +\n        \" \" +\n        \"L \" +\n        (props.position.x - (props.length * Math.sin(props.angle + SIXTH_PI))) +\n        \" \" +\n        (props.position.y - (props.length * Math.cos(props.angle + SIXTH_PI)))\n    }\n    stroke={props.color}\n    fill=\"none\"/>\n  </>\n);\n\nexport const DefaultLabelRenderer = props => (\n  <g transform={\"translate(\" + props.position.x + \",\" + props.position.y + \")\" +\n    \" \" +\n    \"rotate(\" + (props.direction * 180 / Math.PI) + \")\"}>\n    {\n      props.labels && props.labels.length > 0 &&\n      props.labels.map((str, i) => {\n        return (\n          <text key={str + \".\" + i}\n            transform={\"translate(0,\" + ((i + 1) * -15) + \")\" +\n              (props.reverse ? \" scale(-1,-1)\" : \"\")}\n            alignmentBaseline=\"central\"\n            pointerEvents=\"none\"\n            style={{userSelect: \"none\"}}\n            textAnchor=\"middle\"\n            stroke={props.color}>\n            {str}\n          </text>\n        );\n      })\n    }\n  </g>\n);\n\nclass EdgeRenderer extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  //Override\n  render()\n  {\n    const directed = this.props.directed || DIRECTED_NONE;\n\n    const ForwardEndpointRenderer =\n      (directed === DIRECTED_FORWARD || directed === DIRECTED_BOTH) ?\n        (this.props.forwardEndpointRenderer ||\n        this.props.endpointRenderer ||\n        DefaultEndpointRenderer) : null;\n    const BackwardEndpointRenderer =\n      (directed === DIRECTED_BACKWARD || directed === DIRECTED_BOTH) ?\n        (this.props.backwardEndpointRenderer ||\n        this.props.endpointRenderer ||\n        DefaultEndpointRenderer) : null;\n    const EdgeLabelRenderer = this.props.labelRenderer || DefaultLabelRenderer;\n\n    const fromPoint = this.props.from;\n    const toPoint = this.props.to;\n    const centerPoint = this.props.center;\n    const label = this.props.label || \"\";\n    const direction = this.props.direction || 0;\n    const color = this.props.color || \"#000000\";\n\n    let reverseLabel = false;\n    let fromAngle;\n    let toAngle;\n    let quadLine = null;\n\n    const dftx = fromPoint.x - toPoint.x;\n    const dfty = fromPoint.y - toPoint.y;\n    const dfcx = fromPoint.x - centerPoint.x;\n    const dfcy = fromPoint.y - centerPoint.y;\n    const ftrad = Math.atan2(dfty, dftx);\n    const fcrad = Math.atan2(dfcy, dfcx);\n    if (Math.abs(ftrad - fcrad) <= QUAD_RADIAN_THRESHOLD)\n    {\n      toAngle = Math.atan2(centerPoint.x - toPoint.x, centerPoint.y - toPoint.y) + Math.PI;\n      fromAngle = Math.atan2(centerPoint.x - fromPoint.x, centerPoint.y - fromPoint.y) + Math.PI;\n      quadLine = \"L \" + toPoint.x + \" \" + toPoint.y;\n      reverseLabel = false;\n    }\n    else\n    {\n      const cx = ((centerPoint.x * 4) - fromPoint.x - toPoint.x) / 2;\n      const cy = ((centerPoint.y * 4) - fromPoint.y - toPoint.y) / 2;\n      toAngle = Math.atan2(cx - toPoint.x, cy - toPoint.y) + Math.PI;\n      fromAngle = Math.atan2(cx - fromPoint.x, cy - fromPoint.y) + Math.PI;\n      quadLine = \"Q \" + cx + \" \" + cy + \" \" + toPoint.x + \" \" + toPoint.y;\n      reverseLabel = cy > centerPoint.y + QUAD_REVERSE_OFFSET_THRESHOLD;\n    }\n\n    return (\n      <g>\n        <path d={\"M \" + fromPoint.x + \" \" + fromPoint.y + \" \" + quadLine}\n          stroke={color}\n          fill=\"none\"/>\n        {ForwardEndpointRenderer &&\n          <ForwardEndpointRenderer position={toPoint} angle={toAngle} length={ARROW_WIDTH} color={color}/>}\n        {BackwardEndpointRenderer &&\n          <BackwardEndpointRenderer position={fromPoint} angle={fromAngle} length={ARROW_WIDTH} color={color}/>}\n        {EdgeLabelRenderer &&\n          <EdgeLabelRenderer position={centerPoint} labels={label.split('\\n')} direction={direction} reverse={reverseLabel}/>}\n      </g>\n    );\n  }\n}\n\nexport default EdgeRenderer;\n","import AbstractGraphExporter from 'manager/export/AbstractGraphExporter.js';\n\nimport PNGIcon from 'icons/flat/PNGIcon.js';\nimport JPGIcon from 'icons/flat/JPGIcon.js';\nimport XMLIcon from 'icons/flat/XMLIcon.js';\nimport SVGIcon from 'icons/flat/SVGIcon.js';\nimport { FILE_TYPE_PNG, FILE_TYPE_JPG, FILE_TYPE_SVG, downloadImageFromSVG } from 'util/Downloader.js';\n\nconst EXPORT_PADDING_X = 30;\nconst EXPORT_PADDING_Y = 0;\n\nclass GraphImageExporter extends AbstractGraphExporter\n{\n  constructor(imageType=FILE_TYPE_PNG)\n  {\n    super();\n    this._imageType = imageType;\n  }\n\n  processSVGForExport(element, width, height, currentModule)\n  {\n    const graphController = currentModule.getGraphController();\n\n    const viewport = currentModule.getApp().getInputAdapter().getViewport();\n    const offsetX = viewport.getOffsetX();\n    const offsetY = viewport.getOffsetY();\n    const bounds = graphController.getGraph().getBoundingRect();\n    const dx = bounds.minX + offsetX - EXPORT_PADDING_X;\n    const dy = bounds.minY + offsetY - EXPORT_PADDING_Y;\n    const w = bounds.width + EXPORT_PADDING_X * 2;\n    const h = bounds.height + EXPORT_PADDING_Y * 2;\n    const clone = element.cloneNode(true);\n    clone.setAttribute('viewBox', dx + \" \" + dy + \" \" + w + \" \" + h);\n    clone.setAttribute('width', width);\n    clone.setAttribute('height', height);\n\n    //Apply the workspace font (refer to Workspace.css)\n    clone.setAttribute('font-size', \"16px\");\n    clone.setAttribute('font-family', \"monospace\");\n    clone.setAttribute('style', \".graph-ui {display: none;}\");\n\n    /*\n\n    const nodeColor = styleOpts.getOptionByProp(\"--color-graph-node\").getStyle();\n    const textColor = styleOpts.getOptionByProp(\"--color-graph-text\").getStyle();\n    console.log(nodeColor);\n    const styleString = \"* {\"\n      + \"--color-graph-node: blue;\"\n      + \"--color-graph-text: \" + textColor + \";\"\n      + \"}\";\n\n    */\n\n    /*\n    //TODO: Link the font family to svg\n    const link = document.createElement(\"link\");\n    link.setAttribute(\"rel\", \"stylesheet\");\n    clone.appendChild(link);\n    */\n\n    //Remove unwanted ui elements from image\n    const uiElements = clone.getElementsByClassName(\"graph-ui\");\n    while(uiElements.length > 0)\n    {\n      const e = uiElements[0];\n      e.remove();//This will propagate changes to uiElements, so be careful\n    }\n\n    return clone;\n  }\n\n  //Override\n  exportToFile(filename, module)\n  {\n    const workspace = module.getApp().workspace;\n    const svgElement = workspace.getSVGElement();\n    const workspaceDim = svgElement.viewBox.baseVal;\n    const width = workspaceDim.width;\n    const height = workspaceDim.height;\n    const svg = this.processSVGForExport(svgElement, width, height, module);\n\n    downloadImageFromSVG(filename, this._imageType, svg, width, height);\n  }\n\n  //Override\n  doesSupportFile()\n  {\n    return true;\n  }\n\n  //Override\n  canImport(module)\n  {\n    return false;\n  }\n\n  //Override\n  getTitle()\n  {\n    switch(this._imageType)\n    {\n      case FILE_TYPE_PNG: return I18N.toString(\"file.export.png.hint\");\n      case FILE_TYPE_JPG: return I18N.toString(\"file.export.jpg.hint\");\n      case FILE_TYPE_SVG: return I18N.toString(\"file.export.svg.hint\");\n      default: return super.getTitle();\n    }\n  }\n\n  //Override\n  getLabel()\n  {\n    switch(this._imageType)\n    {\n      case FILE_TYPE_PNG: return I18N.toString(\"file.export.png\");\n      case FILE_TYPE_JPG: return I18N.toString(\"file.export.jpg\");\n      case FILE_TYPE_SVG: return I18N.toString(\"file.export.svg\");\n      default: return super.getLabel();\n    }\n  }\n\n  //Override\n  getFileType()\n  {\n    return this._imageType;\n  }\n\n  //Override\n  getIconClass()\n  {\n    switch(this._imageType)\n    {\n      case FILE_TYPE_PNG: return PNGIcon;\n      case FILE_TYPE_JPG: return JPGIcon;\n      case FILE_TYPE_SVG: return SVGIcon;\n      default: return null;\n    }\n  }\n}\n\nexport const DEFAULT_IMAGE_EXPORTERS = [\n  new GraphImageExporter(FILE_TYPE_PNG),\n  new GraphImageExporter(FILE_TYPE_JPG),\n  new GraphImageExporter(FILE_TYPE_SVG)\n];\n\nexport default GraphImageExporter;\n","import AbstractEventHandler from 'manager/undo/AbstractEventHandler.js';\n\nclass SafeGraphEventHandler extends AbstractEventHandler\n{\n  constructor(graphController, graphParser)\n  {\n    super();\n\n    this._graphController = graphController;\n    this._graphParser = graphParser;\n    this._graphData = graphParser.objectify(graphController.getGraph());\n  }\n\n  //Override\n  applyUndo(undoManager)\n  {\n    const prevEvent = undoManager.getPreviousEvent();\n    if (prevEvent instanceof SafeGraphEventHandler)\n    {\n      prevEvent.applyRedo(undoManager);\n    }\n    else\n    {\n      this._graphController.getGraph().clear();\n    }\n  }\n\n  //Override\n  applyRedo(undoManager)\n  {\n    this._graphParser.parse(this._graphData, this._graphController.getGraph());\n  }\n}\nexport default SafeGraphEventHandler;\n","import React from 'react';\n\nclass Icon extends React.Component\n{\n  constructor(props) { super(props); }\n\n  //Override\n  render()\n  {\n    return (\n      <svg id={this.props.id} className={this.props.className} style={this.props.style}\n      xmlns=\"http://www.w3.org/2000/svg\"\n      width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n        <path d=\"M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 16H8v-2h8v2zm0-4H8v-2h8v2zm-3-5V3.5L18.5 9H13z\"/>\n      </svg>\n    );\n  }\n}\nexport default Icon;\n","import React from 'react';\n\nclass Icon extends React.Component\n{\n  constructor(props) { super(props); }\n\n  //Override\n  render()\n  {\n    return (\n      <svg id={this.props.id} className={this.props.className} style={this.props.style}\n      xmlns=\"http://www.w3.org/2000/svg\"\n      width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n        <path d=\"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\"/>\n      </svg>\n    );\n  }\n}\nexport default Icon;\n","import React from 'react';\n\nclass Icon extends React.Component\n{\n  constructor(props) { super(props); }\n\n  //Override\n  render()\n  {\n    return (\n      <svg id={this.props.id} className={this.props.className} style={this.props.style}\n      xmlns=\"http://www.w3.org/2000/svg\"\n      width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n        <path d=\"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5 11h-4v4h-2v-4H7v-2h4V7h2v4h4v2z\"/>\n      </svg>\n    );\n  }\n}\nexport default Icon;\n","import React from 'react';\n\nclass Icon extends React.Component\n{\n  constructor(props) { super(props); }\n\n  //Override\n  render()\n  {\n    return (\n      <svg id={this.props.id} className={this.props.className} style={this.props.style}\n      xmlns=\"http://www.w3.org/2000/svg\"\n      width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n        <path d=\"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5 11H7v-2h10v2z\"/>\n      </svg>\n    );\n  }\n}\nexport default Icon;\n","import React from 'react';\n\nclass Icon extends React.Component\n{\n  constructor(props) { super(props); }\n\n  //Override\n  render()\n  {\n    return (\n      <svg id={this.props.id} className={this.props.className} style={this.props.style}\n      xmlns=\"http://www.w3.org/2000/svg\"\n      width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n        <path d=\"M16.59 7.58L10 14.17l-3.59-3.58L5 12l5 5 8-8zM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z\"/>\n      </svg>\n    );\n  }\n}\nexport default Icon;\n","import React from 'react';\n\nclass Icon extends React.Component\n{\n  constructor(props) { super(props); }\n\n  //Override\n  render()\n  {\n    return (\n      <svg id={this.props.id} className={this.props.className} style={this.props.style}\n      xmlns=\"http://www.w3.org/2000/svg\"\n      width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n        <path d=\"M14.59 8L12 10.59 9.41 8 8 9.41 10.59 12 8 14.59 9.41 16 12 13.41 14.59 16 16 14.59 13.41 12 16 9.41 14.59 8zM12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z\"/>\n      </svg>\n    );\n  }\n}\nexport default Icon;\n","import React from 'react';\n\nclass Icon extends React.Component\n{\n  constructor(props) { super(props); }\n\n  //Override\n  render()\n  {\n    return (\n      <svg id={this.props.id} className={this.props.className} style={this.props.style}\n      xmlns=\"http://www.w3.org/2000/svg\"\n      width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n        <path d=\"M19 8l-4 4h3c0 3.31-2.69 6-6 6-1.01 0-1.97-.25-2.8-.7l-1.46 1.46C8.97 19.54 10.43 20 12 20c4.42 0 8-3.58 8-8h3l-4-4zM6 12c0-3.31 2.69-6 6-6 1.01 0 1.97.25 2.8.7l1.46-1.46C15.03 4.46 13.57 4 12 4c-4.42 0-8 3.58-8 8H1l4 4 4-4H6z\"/>\n      </svg>\n    );\n  }\n}\nexport default Icon;\n","import React from 'react';\nimport Style from './PanelCheckbox.css';\n\nclass PanelCheckbox extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.state = {\n      checked: props.initial || false\n    };\n\n    this.onChange = this.onChange.bind(this);\n  }\n\n  setChecked(value)\n  {\n    this.setState({checked: value});\n  }\n\n  isChecked()\n  {\n    return this.state.checked;\n  }\n\n  onChange(e)\n  {\n    const checked = e.target.checked;\n    if (this.state.checked !== checked)\n    {\n      this.setState({checked: checked});\n    }\n  }\n\n  //Override\n  render()\n  {\n    return (\n      <div id={this.props.id}\n        className={Style.checkbox_container +\n          \" \" + this.props.className}\n        style={this.props.style}>\n        <input type=\"checkbox\" id={this.props.id + \"-checkbox\"}\n          name={this.props.id + \"-checkbox\"} value={this.props.value}\n          checked={this.state.checked}\n          disabled={this.props.disabled}\n          onChange={this.onChange}/>\n        <label htmlFor={this.props.id + \"-checkbox\"}>{this.props.title}</label>\n      </div>\n    );\n  }\n}\n\nexport default PanelCheckbox;\n","class GraphNodeSelectionBox\n{\n  constructor()\n  {\n    this._boundingBox = {\n      fromX: 0, fromY: 0,\n      toX: 0, toY: 0,\n      visible: false\n    };\n\n    this.targets = [];\n  }\n\n  getSelectionBox()\n  {\n    return this._boundingBox;\n  }\n\n  getSelection(graph, forceUpdate=false)\n  {\n    if (forceUpdate)\n    {\n      const box = this._boundingBox;\n      const mx = Math.max(box.toX, box.fromX);\n      const my = Math.max(box.toY, box.fromY);\n      const lx = Math.min(box.toX, box.fromX);\n      const ly = Math.min(box.toY, box.fromY);\n      this.clearSelection();\n      getNodesWithin(graph, lx, ly, mx, my, this.targets);\n    }\n\n    return this.targets;\n  }\n\n  hasSelection()\n  {\n    return this.targets.length > 0;\n  }\n\n  clearSelection()\n  {\n    this.targets.length = 0;\n  }\n\n  isTargetInSelection(target)\n  {\n    return this.targets.includes(target);\n  }\n\n  beginSelection(graph, x, y)\n  {\n    const box = this._boundingBox;\n    box.fromX = box.toX = x;\n    box.fromY = box.toY = y;\n    this.clearSelection();\n\n    box.visible = true;\n  }\n\n  updateSelection(graph, x, y)\n  {\n    const box = this._boundingBox;\n    box.toX = x;\n    box.toY = y;\n    this.getSelection(graph, true);\n  }\n\n  endSelection(graph, x, y)\n  {\n    const box = this._boundingBox;\n    box.toX = x;\n    box.toY = y;\n    this.getSelection(graph, true);\n\n    box.visible = false;\n  }\n\n  isSelecting()\n  {\n    return this._boundingBox.visible;\n  }\n}\n\nfunction getNodesWithin(graph, x1, y1, x2, y2, dst)\n{\n  const fromX = Math.min(x1, x2);\n  const fromY = Math.min(y1, y2);\n  const toX = Math.max(x1, x2);\n  const toY = Math.max(y1, y2);\n\n  for(const node of graph.getNodes())\n  {\n    if (node.x >= fromX && node.x < toX &&\n        node.y >= fromY && node.y < toY)\n    {\n      dst.push(node);\n    }\n  }\n  return dst;\n}\n\nexport default GraphNodeSelectionBox;\n","const EDGE_RADIUS = 12;\nconst EDGE_RADIUS_SQU = EDGE_RADIUS * EDGE_RADIUS;\nconst ENDPOINT_RADIUS = 6;\nconst ENDPOINT_RADIUS_SQU = ENDPOINT_RADIUS * ENDPOINT_RADIUS;\n\nclass GraphPicker\n{\n  constructor(graphController)\n  {\n    this.target = null;\n    this.targetType = \"\";\n\n    this.initialTarget = null;\n    this.initialTargetType = \"\";\n\n    this._prevX = 0;\n    this._prevY = 0;\n  }\n\n  setInitialTarget(target, type)\n  {\n    this.initialTarget = target;\n    this.initialTargetType = type;\n  }\n\n  updateHoverTarget(graph, x, y)\n  {\n    if (this._prevX !== x || this._prevY !== y)\n    {\n      this._prevX = x;\n      this._prevY = y;\n\n      //Update target\n      this.updateTarget(graph, x, y);\n\n      //HACK: to make the cursor look like a pointer when targeting\n      if (this.hasTarget())\n      {\n        document.body.style.cursor = \"pointer\";\n      }\n      else\n      {\n        document.body.style.cursor = \"auto\";\n      }\n    }\n  }\n\n  updateInitialTarget(graph, x, y)\n  {\n    this.updateTarget(graph, x, y);\n    this.setInitialTarget(this.target, this.targetType);\n  }\n\n  updateTarget(graph, x, y)\n  {\n    if (this.target = this.getNodeByInitialMarkerAt(graph, x, y))\n    {\n      //Clicked on initial marker\n      this.targetType = \"initial\";\n    }\n    else if (this.target = this.getEdgeByEndPointAt(graph, x, y))\n    {\n      //Clicked on endpoint\n      this.targetType = \"endpoint\";\n    }\n    else if (this.target = this.getNodeAt(graph, x, y))\n    {\n      //Clicked on node\n      this.targetType = \"node\";\n    }\n    else if (this.target = this.getEdgeAt(graph, x, y))\n    {\n      //Clicked on edge\n      this.targetType = \"edge\";\n    }\n    else\n    {\n      //Clicked on graph\n      this.target = null;\n      this.targetType = \"none\";\n    }\n\n    return this.target;\n  }\n\n  clearTarget()\n  {\n    this.target = null;\n    this.targetType = \"none\";\n  }\n\n  hasTarget()\n  {\n    return this.target != null;\n  }\n\n  getNodeAt(graph, x, y)\n  {\n    //Search graph\n    for(const node of graph.getNodes())\n    {\n      const nodeSize = node.getNodeSize();\n      const dx = x - node.x;\n      const dy = y - node.y;\n      if (dx * dx + dy * dy < nodeSize * nodeSize)\n      {\n        return node;\n      }\n    }\n    return null;\n  }\n\n  getNodeByInitialMarkerAt(graph, x, y)\n  {\n    const startNode = graph.getStartNode();\n    if (!startNode) return null;\n\n    const nodeSize = startNode.getNodeSize();\n    const offset = -(nodeSize + (nodeSize / 2));\n    const dx = x - (startNode.x + offset);\n    const dy = y - startNode.y;\n    if (dx * dx + dy * dy < EDGE_RADIUS_SQU)\n    {\n      return startNode;\n    }\n\n    return null;\n  }\n\n  getEdgeAt(graph, x, y)\n  {\n    const center = {x: 0, y: 0};\n\n    //Search graph\n    for(const edge of graph.getEdges())\n    {\n      edge.getCenterPoint(center);\n      const dx = x - center.x;\n      const dy = y - center.y;\n      if (dx * dx + dy * dy < EDGE_RADIUS_SQU)\n      {\n        return edge;\n      }\n    }\n    return null;\n  }\n\n  getEdgeByEndPointAt(graph, x, y)\n  {\n    const end = {x: 0, y: 0};\n    //Search graph\n    for(const edge of graph.getEdges())\n    {\n      edge.getEndPoint(end);\n      const dx = x - end.x;\n      const dy = y - end.y;\n      if (dx * dx + dy * dy < ENDPOINT_RADIUS_SQU)\n      {\n        return edge;\n      }\n    }\n    return null;\n  }\n\n\n  isTarget(target)\n  {\n    return this.target == target;\n  }\n}\n\nexport default GraphPicker;\n","class InputHandler\n{\n  isTargetable(inputController, pointer, target, targetType)\n  {\n    return false;\n  }\n\n  onAction(inputController, graphController, pointer, target)\n  {\n    return false;\n  }\n\n  onDblAction(inputController, graphController, pointer, target)\n  {\n    return false;\n  }\n\n  onDragStart(inputController, graphController, pointer, target)\n  {\n    return false;\n  }\n\n  onDragMove(inputController, graphController, pointer, target)\n  {\n    return false;\n  }\n\n  onDragStop(inputController, graphController, pointer, target)\n  {\n    return false;\n  }\n}\nexport default InputHandler;\n","import InputHandler from './InputHandler.js';\n\nclass GraphElementInputHandler extends InputHandler\n{\n  constructor(targetType)\n  {\n    super();\n\n    if (!targetType)\n    {\n      throw new Error(\"Missing target type for graph element input handler\");\n    }\n\n    this._targetType = targetType;\n  }\n\n  //Override\n  isTargetable(inputController, pointer, target, targetType)\n  {\n    if (targetType === this._targetType)\n    {\n      return true;\n    }\n\n    return false;\n  }\n  \n  getTargetType()\n  {\n    return this._targetType;\n  }\n}\n\nexport default GraphElementInputHandler;\n","import GraphElementInputHandler from './GraphElementInputHandler.js';\n\nconst SNAP_TO_GRID = true;\nconst SNAP_SIZE = 48;\n\nclass GraphNodeInputHandler extends GraphElementInputHandler\n{\n  constructor()\n  {\n    super(\"node\");\n  }\n\n  //Override\n  onAction(inputController, graphController, pointer, target)\n  {\n    const picker = inputController.getPicker();\n    const selectionBox = inputController.getSelectionBox();\n\n    //Click to delete node\n    if (inputController.isTrashMode())\n    {\n      //So that the emitted 'delete' events can use this\n      graphController.prevX = target.x;\n      graphController.prevY = target.y;\n\n      //If there exists selected states, delete them all!\n      if (selectionBox.hasSelection())\n      {\n        //Delete all selected nodes\n        graphController.deleteSelectedNodes(target);\n      }\n      else\n      {\n        //Delete a single node\n        graphController.deleteTargetNode(target);\n      }\n      return true;\n    }\n    //Edit click to toggle node\n    else if (!inputController.isMoveMode())\n    {\n      graphController.toggleNode(target);\n      return true;\n    }\n    else\n    {\n      //Edit label for selected node\n      graphController.openLabelEditor(target, target.getNodeLabel());\n    }\n\n    return false;\n  }\n\n  //Override\n  onDragStart(inputController, graphController, pointer, target)\n  {\n    if (inputController.isMoveMode())\n    {\n      //Moving node (and selected nodes)\n      graphController.prevX = target.x;\n      graphController.prevY = target.y;\n    }\n    else\n    {\n      const picker = inputController.getPicker();\n      const graph = graphController.getGraph();\n      const edge = graph.createEdge(target, pointer);\n      edge.setEdgeLabel(graphController.getGraphLabeler().getDefaultEdgeLabel());\n\n      //Redirect pointer to refer to the edge as the new target\n      picker.setInitialTarget(edge, \"endpoint\");\n      inputController.isNewEdge = true;\n\n      //Reset previous quad values for new proxy edge\n      const edgeQuad = edge.getQuadratic();\n      graphController.prevQuad.radians = edgeQuad.radians;\n      graphController.prevQuad.length = edgeQuad.length;\n      graphController.prevEdgeTo = null;\n\n      //Ready to move proxy edge to pointer...\n    }\n    return true;\n  }\n\n  //Override\n  onDragMove(inputController, graphController, pointer, target)\n  {\n    const picker = inputController.getPicker();\n    const selectionBox = inputController.getSelectionBox();\n    const graph = graphController.getGraph();\n    let x = pointer.x;\n    let y = pointer.y;\n\n    if (inputController._snapToGrid)\n    {\n      const snapSize = inputController._snapSize;\n      x = Math.round(x / snapSize) * snapSize;\n      y = Math.round(y / snapSize) * snapSize;\n    }\n\n    if (selectionBox.hasSelection())\n    {\n      graphController.moveMultipleNodesTo(pointer, selectionBox.getSelection(graph), x, y);\n    }\n    else\n    {\n      graphController.moveNodeTo(pointer, target, x, y);\n    }\n    return true;\n  }\n\n  //Override\n  onDragStop(inputController, graphController, pointer, target)\n  {\n    const picker = inputController.getPicker();\n    const selectionBox = inputController.getSelectionBox();\n    const graph = graphController.getGraph();\n    const x = pointer.x;\n    const y = pointer.y;\n\n    //Delete it if withing trash area...\n    if (inputController.isTrashMode())\n    {\n      //If there exists selected states, delete them all!\n      if (selectionBox.hasSelection())\n      {\n        graphController.deleteSelectedNodes(target);\n      }\n      else\n      {\n        //Delete a single node\n        graphController.deleteTargetNode(target);\n      }\n\n      return true;\n    }\n    //If dragged to an empty space (not trash)\n    else\n    {\n      //Do nothing, since should have moved to position\n      if (selectionBox.hasSelection())\n      {\n        const dx = x - graphController.prevX;\n        const dy = y - graphController.prevY;\n        graphController.onGraphIntentMoveAllNodes(selectionBox.getSelection(graph), dx, dy);\n        //graphController.emit(\"nodeMoveAll\", graph, picker.getSelection(graph), dx, dy);\n      }\n      else\n      {\n        graphController.onGraphIntentMoveNode(target, x, y, graphController.prevX, graphController.prevY);\n        //graphController.emit(\"nodeMove\", graph, target, x, y, graphController.prevX, graphController.prevY);\n      }\n      return true;\n    }\n\n    return false;\n  }\n}\n\nexport default GraphNodeInputHandler;\n","import GraphElementInputHandler from './GraphElementInputHandler.js';\nimport GraphNode from 'graph/GraphNode.js';\n\nclass GraphInitialInputHandler extends GraphElementInputHandler\n{\n  constructor()\n  {\n    super(\"initial\");\n  }\n\n  //Override\n  onDragStart(inputController, graphController, pointer, target)\n  {\n    //Ready to move the initial marker to another state...\n    inputController.ghostInitialMarker = pointer;\n    return true;\n  }\n\n  //Override\n  onDragMove(inputController, graphController, pointer, target)\n  {\n    const picker = inputController.getPicker();\n    const graph = graphController.getGraph();\n    const x = pointer.x;\n    const y = pointer.y;\n    //Move initial marker to node or pointer\n    const dst = picker.getNodeAt(graph, x, y) || pointer;\n    inputController.ghostInitialMarker = dst;\n    return true;\n  }\n\n  //Override\n  onDragStop(inputController, graphController, pointer, target)\n  {\n    const graph = graphController.getGraph();\n\n    //If valid initial object to mark...\n    if (inputController.ghostInitialMarker instanceof GraphNode)\n    {\n      const prevInitial = graph.getStartNode();\n\n      //Set the new object as the initial node\n      graph.setStartNode(inputController.ghostInitialMarker);\n      graphController.applyAutoRename();\n\n      //Emit event\n      graphController.onGraphIntentChangeInitial(inputController.ghostInitialMarker, prevInitial);\n      //graphController.emit(\"nodeInitial\", graph, inputController.ghostInitialMarker, prevInitial);\n    }\n\n    //Reset ghost initial marker\n    inputController.ghostInitialMarker = null;\n    return true;\n  }\n}\n\nexport default GraphInitialInputHandler;\n","import GraphElementInputHandler from './GraphElementInputHandler.js';\n\nclass GraphEdgeInputHandler extends GraphElementInputHandler\n{\n  constructor()\n  {\n    super(\"edge\");\n  }\n\n  //Override\n  onAction(inputController, graphController, pointer, target)\n  {\n    if (inputController.isTrashMode())\n    {\n      //Delete a single edge\n      graphController.deleteTargetEdge(target);\n    }\n    else\n    {\n      //Edit label for selected edge\n      graphController.openLabelEditor(target, target.getEdgeLabel());\n    }\n    return true;\n  }\n\n  //Override\n  onDragStart(inputController, graphController, pointer, target)\n  {\n    //Makes sure that placeholders are not quadratics!\n    if (target.isPlaceholder())\n    {\n      return false;\n    }\n\n    //Save previous quadratics\n    const targetQuad = target.getQuadratic();\n    graphController.prevQuad.radians = targetQuad.radians;\n    graphController.prevQuad.length = targetQuad.length;\n\n    //Ready to move the edge vertex to pointer...\n    return true;\n  }\n\n  //Override\n  onDragMove(inputController, graphController, pointer, target)\n  {\n    graphController.moveEdgeTo(pointer, target, pointer.x, pointer.y);\n    return true;\n  }\n\n  //Override\n  onDragStop(inputController, graphController, pointer, target)\n  {\n    const graph = graphController.getGraph();\n\n    //Delete it if withing trash area...\n    if (inputController.isTrashMode())\n    {\n      graphController.deleteTargetEdge(target);\n    }\n    else\n    {\n      //Do nothing, since should have moved to position\n      graphController.onGraphIntentMoveEdge(target, target.getQuadratic(), graphController.prevQuad);\n      //graphController.emit(\"edgeMove\", graph, target, target.getQuadratic(), graphController.prevQuad);\n    }\n    return true;\n  }\n}\n\nexport default GraphEdgeInputHandler;\n","import GraphElementInputHandler from './GraphElementInputHandler.js';\nimport GraphNode from 'graph/GraphNode.js';\n\nclass GraphEndpointInputHandler extends GraphElementInputHandler\n{\n  constructor()\n  {\n    super(\"endpoint\");\n  }\n\n  //Override\n  onAction(inputController, graphController, pointer, target)\n  {\n    if (inputController.isTrashMode())\n    {\n      //Delete a single edge\n      graphController.deleteTargetEdge(target);\n      return true;\n    }\n    return false;\n  }\n\n  //Override\n  onDragStart(inputController, graphController, pointer, target)\n  {\n    const targetQuad = target.getQuadratic();\n    graphController.prevQuad.radians = targetQuad.radians;\n    graphController.prevQuad.length = targetQuad.length;\n    graphController.prevEdgeTo = target.getDestinationNode();\n\n    inputController.isNewEdge = false;\n\n    //Ready to move the edge endpoint to pointer...\n    return true;\n  }\n\n  //Override\n  onDragMove(inputController, graphController, pointer, target)\n  {\n    graphController.moveEndpointTo(pointer, target, pointer.x, pointer.y);\n    return true;\n  }\n\n  //Override\n  onDragStop(inputController, graphController, pointer, target)\n  {\n    const graph = graphController.getGraph();\n    const x = pointer.x;\n    const y = pointer.y;\n\n    //Delete it if withing trash area...\n    if (inputController.isTrashMode())\n    {\n      graphController.deleteTargetEdge(target);\n      return true;\n    }\n    //If hovering over a node...\n    else if (target.getDestinationNode() instanceof GraphNode)\n    {\n      const result = graph.formatEdge(target);\n\n      //If a different edge is the result of the target...\n      if (result !== target)\n      {\n        //Allow the user to edit the merged labels\n        graphController.openLabelEditor(result, result.getEdgeLabel());\n\n        //Delete the merged label\n        graph.deleteEdge(target);\n        return true;\n      }\n      //Open label editor if a new edge...\n      else\n      {\n        if (inputController.isNewEdge)\n        {\n          graphController.openLabelEditor(result, \"\", (target, value) => graphController.onGraphIntentFinishEdge(target));\n        }\n        else\n        {\n          graphController.openLabelEditor(target, target.getEdgeLabel());\n        }\n      }\n\n      if (inputController.isNewEdge)\n      {\n        //Must be after openLabelEditor() to allow the function to check it...\n        inputController.isNewEdge = false;\n\n        //Emit event\n        graphController.onGraphIntentCreateEdge(target);\n      }\n      else if (graphController.prevEdgeTo !== null)\n      {\n        //Emit event\n        graphController.onGraphIntentChangeDestination(target, target.getDestinationNode(), graphController.prevEdgeTo, graphController.prevQuad);\n      }\n\n      return true;\n    }\n    //If hovering over anything else...\n    else\n    {\n      //Destroy any edge that no longer have a destination\n      if (inputController.shouldDestroyPointlessEdges)\n      {\n        if (!inputController.isNewEdge)\n        {\n          graphController.deleteTargetEdge(target);\n        }\n        else\n        {\n          graph.deleteEdge(target);\n        }\n        return true;\n      }\n      //Keep edges as placeholders (used in DFA's)\n      else\n      {\n        target.changeDestinationNode(null);\n\n        //Open label editor if default edge...\n        if (target.getEdgeLabel().length <= 0)\n        {\n          graphController.openLabelEditor(target, target.getEdgeLabel());\n        }\n        return true;\n      }\n    }\n  }\n}\n\nexport default GraphEndpointInputHandler;\n","import InputHandler from './InputHandler.js';\n\nclass GraphNodeCreateInputHandler extends InputHandler\n{\n  constructor()\n  {\n    super();\n  }\n\n  //Override\n  isTargetable(inputController, pointer, target, targetType)\n  {\n    return targetType === 'none';\n  }\n\n  //Override\n  onDblAction(inputController, graphController, pointer, target)\n  {\n    let x = pointer.x;\n    let y = pointer.y;\n\n    if (inputController._snapToGrid)\n    {\n      const snapSize = inputController._snapSize;\n      x = Math.round(x / snapSize) * snapSize;\n      y = Math.round(y / snapSize) * snapSize;\n    }\n\n    //Create node at position\n    const node = graphController.createNode(x, y);\n    //TODO: this allows nodes to move away from other nodes\n    //But undoManager does not recognize it.\n    //graphController.moveNodeTo(pointer, node, x, y);\n    return true;\n  }\n}\n\nexport default GraphNodeCreateInputHandler;\n","import AbstractInputController from 'modules/abstract/AbstractInputController.js';\n\n//import NodalGraphPicker from 'graph/picker/NodalGraphPicker.js';\nimport GraphNodeSelectionBox from 'graph/GraphNodeSelectionBox.js';\nimport GraphPicker from './GraphPicker.js';\n\nimport GraphNodeInputHandler from './inputhandler/GraphNodeInputHandler.js';\nimport GraphInitialInputHandler from './inputhandler/GraphInitialInputHandler.js';\n\nimport GraphEdgeInputHandler from './inputhandler/GraphEdgeInputHandler.js';\nimport GraphEndpointInputHandler from './inputhandler/GraphEndpointInputHandler.js';\nimport GraphNodeCreateInputHandler from './inputhandler/GraphNodeCreateInputHandler.js';\n\nconst DEFAULT_SHOULD_DESTROY_POINTLESS_EDGE = true;\n\nclass InputController extends AbstractInputController\n{\n  constructor(module, inputAdapter)\n  {\n    super(module, inputAdapter);\n\n    this._picker = null;\n    this._selectionBox = new GraphNodeSelectionBox();\n    this._graphController = null;\n\n    //Make sure this is always false when moving endpoints\n    this.isNewEdge = false;\n\n    //Used to change render to follow pointer when moving initial marker\n    this.ghostInitialMarker = null;\n\n    //Whether to destroy pointless edges\n    this.shouldDestroyPointlessEdges = DEFAULT_SHOULD_DESTROY_POINTLESS_EDGE;\n\n    //Swap left to right clicks and vice versa on anything else but Macs\n    this._swapMouseScheme = true;//!navigator.platform.startsWith(\"Mac\");\n\n    //Used to determine whether the target should be destroyed because of trash mode\n    this._trashMode = false;\n\n    this._disabled = false;\n\n    //TODO: this works, it's just not attached to anything\n    this._snapToGrid = false;\n    this._snapSize = 48;\n\n    this._inputHandlers = [\n      new GraphNodeInputHandler(),\n      new GraphEdgeInputHandler(),\n      new GraphEndpointInputHandler(),\n      new GraphInitialInputHandler(),\n      new GraphNodeCreateInputHandler()\n    ];\n  }\n\n  //Override\n  initialize(module)\n  {\n    super.initialize(module);\n\n    this._module = module;\n    this._graphController = module.getGraphController();\n    //this._picker = new NodalGraphPicker(this._graphController);\n    this._picker = new GraphPicker(this._graphController);\n  }\n\n  //Override\n  destroy(module)\n  {\n    super.destroy(module);\n  }\n\n  //Override\n  update(module)\n  {\n    super.update(module);\n\n    const graph = this._graphController.getGraph();\n    const picker = this._picker;\n\n    const x = this._inputAdapter.getPointerX();\n    const y = this._inputAdapter.getPointerY();\n    picker.updateHoverTarget(graph, x, y);\n  }\n\n  setDisabled(disabled)\n  {\n    this._disabled = disabled;\n  }\n\n  isDisabled()\n  {\n    return this._disabled;\n  }\n\n  //Override\n  onPreInputEvent(pointer)\n  {\n    if (this._disabled) return super.onPreInputEvent(pointer);\n\n    const inputController = this;\n    const graphController = this._graphController;\n\n    const graph = graphController.getGraph();\n    const picker = inputController.getPicker();\n    picker.updateInitialTarget(graph, pointer.x, pointer.y);\n\n    const target = picker.initialTarget;\n    const targetType = picker.initialTargetType;\n\n    if (this._selectionBox.hasSelection())\n    {\n      //Unselect everything is clicked on something other than nodes...\n      if (targetType != \"node\" || !this._selectionBox.isTargetInSelection(target))\n      {\n        this._selectionBox.clearSelection();\n      }\n    }\n\n    //Override\n    return super.onPreInputEvent(pointer);\n  }\n\n  //Override\n  onInputEvent(pointer)\n  {\n    if (this._disabled) return super.onInputEvent(pointer);\n\n    const inputController = this;\n    const graphController = this._graphController;\n    const picker = inputController.getPicker();\n    picker.updateTarget(graphController.getGraph(), pointer.x, pointer.y);\n    const target = picker.initialTarget;\n    const targetType = picker.initialTargetType;\n\n    for(const handler of this._inputHandlers)\n    {\n      if (handler.isTargetable(inputController, pointer, target, targetType) &&\n        handler.onAction(inputController, graphController, pointer, target))\n      {\n        return true;\n      }\n    }\n\n    //Override\n    return super.onInputEvent(pointer);\n  }\n\n  //Override\n  onDblInputEvent(pointer)\n  {\n    if (this._disabled) return super.onDblInputEvent(pointer);\n\n    const inputController = this;\n    const graphController = this._graphController;\n    const picker = inputController.getPicker();\n    const target = picker.initialTarget;\n    const targetType = picker.initialTargetType;\n\n    //Make sure it is not in trash mode\n    if (inputController.isTrashMode())\n    {\n      graphController.emit(\"tryCreateWhileTrash\");\n      return false;\n    }\n\n    for(const handler of this._inputHandlers)\n    {\n      if (handler.isTargetable(inputController, pointer, target, targetType) &&\n        handler.onDblAction(inputController, graphController, pointer, target))\n      {\n        return true;\n      }\n    }\n\n    //Override\n    return super.onDblInputEvent(pointer);\n  }\n\n  //Override\n  onDragStart(pointer)\n  {\n    if (this._disabled) return super.onDragStart(pointer);\n\n    const inputController = this;\n    const graphController = this._graphController;\n    const picker = inputController.getPicker();\n    const target = picker.initialTarget;\n    const targetType = picker.initialTargetType;\n\n    //Make sure it is not in new edge mode\n    inputController.isNewEdge = false;\n\n    //Make sure it is not in trash mode\n    if (inputController.isTrashMode())\n    {\n      graphController.emit(\"tryCreateWhileTrash\");\n      return false;\n    }\n\n    for(const handler of this._inputHandlers)\n    {\n      if (handler.isTargetable(inputController, pointer, target, targetType) &&\n        handler.onDragStart(inputController, graphController, pointer, target))\n      {\n        return true;\n      }\n    }\n\n    //Override\n    return super.onDragStart(pointer);\n  }\n\n  //Override\n  onDragMove(pointer)\n  {\n    if (this._disabled) return super.onDragMove(pointer);\n\n    const inputController = this;\n    const graphController = this._graphController;\n    const picker = inputController.getPicker();\n    const target = picker.initialTarget;\n    const targetType = picker.initialTargetType;\n\n    for(const handler of this._inputHandlers)\n    {\n      if (handler.isTargetable(inputController, pointer, target, targetType) &&\n        handler.onDragMove(inputController, graphController, pointer, target))\n      {\n        return true;\n      }\n    }\n\n    //Override\n    return super.onDragMove(pointer);\n  }\n\n  //Override\n  onDragStop(pointer)\n  {\n    if (this._disabled) return super.onDragStop(pointer);\n\n    const inputController = this;\n    const graphController = this._graphController;\n    const picker = inputController.getPicker();\n    picker.updateTarget(graphController.getGraph(), pointer.x, pointer.y);\n    const target = picker.initialTarget;\n    const targetType = picker.initialTargetType;\n\n    for(const handler of this._inputHandlers)\n    {\n      if (handler.isTargetable(inputController, pointer, target, targetType) &&\n        handler.onDragStop(inputController, graphController, pointer, target))\n      {\n        return true;\n      }\n    }\n\n    //Override\n    return super.onDragStop(pointer);\n  }\n\n  //Override\n  onPostInputEvent(pointer)\n  {\n    if (this._disabled) return super.onPostInputEvent(pointer);\n\n    const inputController = this;\n    const graphController = this._graphController;\n    const graph = graphController.getGraph();\n    const picker = inputController.getPicker();\n\n    picker.clearTarget();\n    picker.updateTarget(graph, pointer.x, pointer.y);\n\n    //Override\n    super.onPostInputEvent(pointer);\n  }\n\n  setTrashMode(enabled)\n  {\n    this._trashMode = enabled;\n    if (enabled)\n    {\n      this._module.getApp()._drawer.setViewportColor(\"var(--color-viewport-error)\");\n    }\n    else\n    {\n      this._module.getApp()._drawer.setViewportColor(null);\n    }\n  }\n\n  isTrashMode()\n  {\n    return this._trashMode;\n  }\n\n  setInputScheme(shouldInputFirst)\n  {\n    this._swapMouseScheme = !shouldInputFirst;\n  }\n\n  getInputScheme()\n  {\n    return this._swapMouseScheme;\n  }\n\n  isMoveMode()\n  {\n    const result = this._inputAdapter.isAltInput();\n    return this._swapMouseScheme ? !result : result;\n  }\n\n  isDragging()\n  {\n    return this._inputAdapter.isDragging();\n  }\n\n  isActionMode()\n  {\n    return this._inputAdapter.isPointerActive() ?\n      //Is considered an input when NOT moving or when creating a new edge...\n      this.isNewEdge || !this.isMoveMode() :\n      //If not active, just show default input...\n      !this._swapMouseScheme;\n  }\n\n  getPicker()\n  {\n    return this._picker;\n  }\n\n  getSelectionBox()\n  {\n    return this._selectionBox;\n  }\n}\n\nexport default InputController;\n","import AbstractGraphController from 'modules/abstract/AbstractGraphController.js';\n\nimport Eventable from 'util/Eventable.js';\nimport GraphEdge from 'graph/GraphEdge.js';\nimport GraphLayout from 'modules/fsa/graph/GraphLayout.js';\n\nimport GraphChangeHandler from 'experimental/GraphChangeHandler.js';\n\nconst NODE_SPAWN_RADIUS = 64;\nconst DEFAULT_AUTO_RENAME = true;\nconst GRAPH_REFRESH_RATE = 30;\nconst DELETE_ON_EMPTY = true;\n\nclass GraphController extends AbstractGraphController\n{\n  constructor(module, graph, labeler, parser)\n  {\n    super(module, graph, labeler, parser);\n\n    this.inputController = null;\n    this._graphChangeHandler = new GraphChangeHandler(GRAPH_REFRESH_RATE);\n\n    this.getGraphLabeler().setGraphController(this);\n\n    this.labelEditorElement = null;\n\n    this.prevQuad = {\n      radians: 0, length: 0,\n      x: 0, y: 0\n    };\n    this.prevEdgeTo = null;\n    this.prevX = 0;\n    this.prevY = 0;\n\n    this.shouldAutoLabel = DEFAULT_AUTO_RENAME;\n\n    //The difference between controller events vs graph events is: controller has user-intent\n\n    //tryCreateWhileTrash()\n    this.registerEvent(\"tryCreateWhileTrash\");\n  }\n\n  //Override\n  initialize(module)\n  {\n    super.initialize(module);\n\n    this._module = module;\n    this.inputController = module.getInputController();\n  }\n\n  //Override\n  destroy(module)\n  {\n    super.destroy(module);\n  }\n\n  //Override\n  update(module)\n  {\n    super.update(module);\n\n    this._graphChangeHandler.update(this._graph);\n  }\n\n  getGraphChangeHandler()\n  {\n    return this._graphChangeHandler;\n  }\n\n  applyAutoLayout()\n  {\n    GraphLayout.applyLayout(this.getGraph());\n\n    this.getModule().getApp().getUndoManager().captureEvent();\n  }\n\n  applyAutoRename()\n  {\n    const graphLabeler = this._labeler;\n    const graph = this._graph;\n\n    if (graph.isEmpty()) return;\n\n    //Reset all default labels...\n    for(const node of graph.getNodes())\n    {\n      if (!node.getNodeCustom()) node.setNodeLabel(\"\");\n    }\n\n    //Rename all default labels appropriately...\n    for(const node of graph.getNodes())\n    {\n      if (!node.getNodeCustom())\n      {\n        node.setNodeLabel(graphLabeler.getDefaultNodeLabel());\n      }\n    }\n  }\n\n  onGraphIntentImport()\n  {\n    this.getModule().getApp().getUndoManager().captureEvent();\n  }\n\n  onGraphIntentCreateEdge(edge)\n  {\n  }\n\n  onGraphIntentFinishEdge(edge)\n  {\n    this.getModule().getApp().getUndoManager().captureEvent();\n  }\n\n  onGraphIntentMoveEdge(edge, nextQuad, prevQuad)\n  {\n    this.getModule().getApp().getUndoManager().captureEvent();\n  }\n\n  onGraphIntentChangeDestination(edge, destinationNode, prevDestination, prevQuad)\n  {\n    this.getModule().getApp().getUndoManager().captureEvent();\n  }\n\n  onGraphIntentChangeInitial(nextInitial, prevInitial)\n  {\n    this.getModule().getApp().getUndoManager().captureEvent();\n  }\n\n  onGraphIntentMoveNode(node, nextX, nextY, prevX, prevY)\n  {\n    this.getModule().getApp().getUndoManager().captureEvent();\n  }\n\n  onGraphIntentMoveAllNodes(nodes, dx, dy)\n  {\n    this.getModule().getApp().getUndoManager().captureEvent();\n  }\n\n  onGraphIntentDeleteNodes(node, targetNodes, prevX, prevY)\n  {\n    if (this.shouldAutoLabel)\n    {\n      this.applyAutoRename();\n    }\n  }\n\n  setAutoRenameNodes(enable)\n  {\n    const prev = this.shouldAutoLabel;\n    this.shouldAutoLabel = enable;\n    if (enable && !prev)\n    {\n      this.applyAutoRename();\n    }\n  }\n\n  shouldAutoRenameNodes()\n  {\n    return this.shouldAutoLabel;\n  }\n\n  renameNode(node, name)\n  {\n    const prev = node.getNodeLabel();\n    const isPrevCustom = node.getNodeCustom();\n\n    node.setNodeLabel(name);\n    node.setNodeCustom(true);\n\n    this.getModule().getApp().getUndoManager().captureEvent();\n  }\n\n  createNode(x, y)\n  {\n    if (typeof x === 'undefined') x = (Math.random() * NODE_SPAWN_RADIUS * 2) - NODE_SPAWN_RADIUS;\n    if (typeof y === 'undefined') y = (Math.random() * NODE_SPAWN_RADIUS * 2) - NODE_SPAWN_RADIUS;\n\n    const node = this.getGraph().createNode(x, y);\n\n    const newNodeLabel = this.getGraphLabeler().getDefaultNodeLabel();\n    node.setNodeLabel(newNodeLabel);\n\n    this.getModule().getApp().getUndoManager().captureEvent();\n    return node;\n  }\n\n  toggleNode(node)\n  {\n    const prev = node.getNodeAccept();\n    const result = !prev;\n    //Toggle accept for selected node\n    node.setNodeAccept(result);\n\n    //Emit event\n    this.getModule().getApp().getUndoManager().captureEvent();\n  }\n\n  deleteSelectedNodes(selectedNode)\n  {\n    const selectionBox = this.inputController.getSelectionBox();\n    const selection = selectionBox.getSelection(this.getGraph()).slice();\n\n    //Remove from graph\n    for(const node of selection)\n    {\n      this.getGraph().deleteNode(node);\n    }\n\n    //Remove from selection\n    selectionBox.clearSelection();\n\n    //Emit event\n    this.onGraphIntentDeleteNodes(selectedNode, selection, this.prevX, this.prevY);\n    this.getModule().getApp().getUndoManager().captureEvent();\n  }\n\n  deleteTargetNode(target)\n  {\n    this.getGraph().deleteNode(target);\n\n    //Emit event\n    this.onGraphIntentDeleteNodes(target, [target], this.prevX, this.prevY);\n    this.getModule().getApp().getUndoManager().captureEvent();\n  }\n\n  deleteTargetNodes(targets)\n  {\n    if (!targets || targets.length <= 0) return;\n\n    const graph = this.getGraph();\n    for(const node of targets)\n    {\n      graph.deleteNode(node);\n    }\n\n    //Emit event\n    this.onGraphIntentDeleteNodes(targets[0], targets, this.prevX, this.prevY);\n    this.getModule().getApp().getUndoManager().captureEvent();\n  }\n\n  deleteTargetEdge(target)\n  {\n    this.getGraph().deleteEdge(target);\n\n    //Emit event\n    this.getModule().getApp().getUndoManager().captureEvent();\n  }\n\n  deleteTargetEdges(targets)\n  {\n    if (!targets || targets.length <= 0) return;\n\n    for(const target of targets)\n    {\n      this.deleteTargetEdge(target);\n    }\n  }\n\n  moveNodeTo(pointer, node, x, y)\n  {\n    const nodeSize = node.getNodeSize();\n    for(const other of this.getGraph().getNodes())\n    {\n      //Update node collision\n      if (node === other) continue;\n\n      const dx = x - other.x;\n      const dy = y - other.y;\n      const angle = Math.atan2(dy, dx);\n\n      const diameter = (nodeSize * 2);\n      const nextDX = other.x + (Math.cos(angle) * diameter) - x;\n      const nextDY = other.y + (Math.sin(angle) * diameter) - y;\n\n      if (dx * dx + dy * dy < nodeSize * nodeSize * 4)\n      {\n        x += nextDX;\n        y += nextDY;\n      }\n    }\n\n    node.x = x;\n    node.y = y;\n  }\n\n  moveMultipleNodesTo(pointer, nodes, x, y)\n  {\n    //Moves all nodes by difference between initial position with passed-in x and y\n    const pos = pointer.getInputEventPosition();\n    const dx = x - pos.x;\n    const dy = y - pos.y;\n    for(const node of nodes)\n    {\n      node.x += dx;\n      node.y += dy;\n    }\n\n    //Updates initial position to passed-in x and y to maintain relative position\n    pointer.changeInputEventPosition(x, y);\n  }\n\n  moveEdgeTo(pointer, edge, x, y)\n  {\n    edge.setQuadraticByCoords(x, y);\n  }\n\n  moveEndpointTo(pointer, edge, x, y)\n  {\n    //Get ONLY node at x and y (cannot use hover target, since it is not ONLY nodes)\n    const picker = this.inputController.getPicker();\n    const dst = picker.getNodeAt(this.getGraph(), x, y) || pointer;\n\n    edge.changeDestinationNode(dst);\n\n    //If the cursor returns to the state after leaving it...\n    if (edge.isSelfLoop())\n    {\n      //Make it a self loop\n      const sourceNode = edge.getSourceNode();\n      const dx = sourceNode.x - x;\n      const dy = sourceNode.y - y;\n      const radians = Math.atan2(dy, dx) + Math.PI;\n      edge.setQuadratic(radians);\n    }\n    //Otherwise, maintain original curve\n    else\n    {\n      //TODO: This also causes self-loops to act weird when no longer a self loop\n      edge.setQuadratic(this.prevQuad.radians, this.prevQuad.length);\n    }\n  }\n\n  openLabelEditor(target, defaultValue=null, callback=null)\n  {\n    const labelEditor = this.getModule().getInputManager().getLabelEditorManager().getLabelEditorComponent();\n    const prevLabel = defaultValue;\n    labelEditor.openEditor(target, defaultValue, (target, value) => {\n      if (DELETE_ON_EMPTY && (!value || value.length <= 0) && target instanceof GraphEdge)\n      {\n        //Assumes target is GraphEdge\n        this._graph.deleteEdge(target);\n      }\n      else\n      {\n        if (target instanceof GraphEdge)\n        {\n          target.setEdgeLabel(value);\n        }\n        else\n        {\n          target.setNodeLabel(value);\n        }\n\n        if (!prevLabel || (prevLabel.length > 0 && value !== prevLabel))\n        {\n          this.getModule().getApp().getUndoManager().captureEvent();\n        }\n        if (callback) callback(target, value);\n      }\n    }, (target) => {\n      if (DELETE_ON_EMPTY && (!prevLabel || prevLabel.length <= 0) && target instanceof GraphEdge)\n      {\n        //Assumes target is GraphEdge\n        this._graph.deleteEdge(target);\n      }\n    });\n  }\n\n  focusOnNode(node)\n  {\n    //Center workspace at focused node; inverted due to graph-to-screen space\n    this.inputController.getInputAdapter().getViewport().setOffset(-node.x, -node.y);\n  }\n\n  focusOnEdge(edge)\n  {\n    //Center workspace at focused edge; inverted due to graph-to-screen space\n    const center = edge.getCenterPoint();\n    this.inputController.getInputAdapter().getViewport().setOffset(-center.x, -center.y);\n  }\n\n  focusOnNodes(nodes)\n  {\n    //Center workspace at the average of focused nodes; inverted due to graph-to-screen space\n    const length = nodes.length;\n    let ax = 0;\n    let ay = 0;\n    for(const node of nodes)\n    {\n      ax += node.x;\n      ay += node.y;\n    }\n    this.inputController.getInputAdapter().getViewport().setOffset(-ax / length, -ay / length);\n  }\n}\n//Mixin Eventable\nEventable.mixin(GraphController);\n\nexport default GraphController;\n","import AbstractInputHandler from 'input/AbstractInputHandler.js';\n\nclass SelectionBoxInputHandler extends AbstractInputHandler\n{\n  constructor(inputController, graphController, selectionBox)\n  {\n    super();\n\n    this._inputController = inputController;\n    this._graphController = graphController;\n    this._selectionBox = selectionBox;\n  }\n\n  //Override\n  onDragStart(pointer)\n  {\n    if (!this._inputController.isMoveMode())\n    {\n      //Begin selection box...\n      this._selectionBox.beginSelection(this._graphController.getGraph(), pointer.x, pointer.y);\n      return true;\n    }\n\n    return false;\n  }\n\n  //Override\n  onDragMove(pointer)\n  {\n    //If the selection box is active...\n    if (this._selectionBox.isSelecting())\n    {\n      //Update the selection box\n      this._selectionBox.updateSelection(this._graphController.getGraph(), pointer.x, pointer.y);\n      return true;\n    }\n\n    return false;\n  }\n\n  //Override\n  onDragStop(pointer)\n  {\n    //If was trying to select...\n    if (this._selectionBox.isSelecting())\n    {\n      //Stop selecting stuff, fool.\n      this._selectionBox.endSelection(this._graphController.getGraph(), pointer.x, pointer.y);\n      return true;\n    }\n\n    return false;\n  }\n}\n\nexport default SelectionBoxInputHandler;\n","import AbstractInputHandler from 'input/AbstractInputHandler.js';\n\nclass ViewportInputHandler extends AbstractInputHandler\n{\n  constructor()\n  {\n    super();\n\n    this._prevX = 0;\n    this._prevY = 0;\n  }\n\n  //Override\n  onDragStart(pointer)\n  {\n    this._prevX = pointer.x;\n    this._prevY = pointer.y;\n    return true;\n  }\n\n  //Override\n  onDragMove(pointer)\n  {\n    const dx = pointer.x - this._prevX;\n    const dy = pointer.y - this._prevY;\n    const adapter = pointer.getAdapter();\n    const viewport = adapter.getViewport();\n    viewport.addOffset(dx, dy, true);\n    return true;\n  }\n\n  //Override\n  onDragStop(pointer)\n  {\n    //Do nothing. It should already be moved.\n    return true;\n  }\n}\n\nexport default ViewportInputHandler;\n","import React from 'react';\n\nexport const SUBMIT_DELAY = 30;\nexport const SUBMIT_KEY = \"Enter\";\nexport const CANCEL_KEY = \"Escape\";\n\nclass PatternInput extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.inputElement = null;\n\n    this.placeholder = \"\";\n    this.maxLength = 524288;/*This is the default value*/\n    this.multiLine = true;\n    this.formatter = null;\n\n    this._submitTimeout = null;\n    this._submit = props.submitOnBlur;\n    this._skipBlur = false;\n    this._skipSelect = false;\n\n    this.state = {\n      prevValue: \"\",\n      value: \"\"\n    };\n\n    this.onChange = this.onChange.bind(this);\n    this.onFocus = this.onFocus.bind(this);\n    this.onBlur = this.onBlur.bind(this);\n    this.onKeyDown = this.onKeyDown.bind(this);\n  }\n\n  setFormatter(formatter)\n  {\n    this.formatter = formatter;\n    return this;\n  }\n\n  onFocus(e)\n  {\n    if (this._skipSelect)\n    {\n      this.inputElement.select();\n      this._skipSelect = false;\n    }\n  }\n\n  onBlur(e)\n  {\n    if (!this._submitTimeout)\n    {\n      this._submitTimeout = setTimeout(() => {\n        this._submitTimeout = null;\n        if (this._skipBlur) return;\n\n        const submit = this._submit;\n        this._submit = this.props.submitOnBlur;\n        if (document.activeElement !== this.inputElement && submit)\n        {\n          const value = this.state.value;\n          if (this.props.onSubmit) this.props.onSubmit(value);\n\n          this.setState({prevValue: value});\n        }\n        else\n        {\n          this.setState((prev, props) => {\n            return {value: prev.prevValue};\n          });\n        }\n\n        if (this.props.onBlur) this.props.onBlur(e);\n      }, SUBMIT_DELAY);\n    }\n  }\n\n  onKeyDown(e)\n  {\n    if (e.key === SUBMIT_KEY)\n    {\n      if (e.shiftKey && this.multiLine) return;\n\n      this._submit = true;\n      this.inputElement.blur();\n\n      e.preventDefault();\n      e.stopPropagation();\n    }\n    else if (e.key === CANCEL_KEY)\n    {\n      this.setState((prev, props) => {\n        return {value: prev.prevValue};\n      }, () => {\n        this._submit = false;\n        this.inputElement.blur();\n      });\n\n      e.preventDefault();\n      e.stopPropagation();\n    }\n  }\n\n  onChange(e)\n  {\n    let value = e.target.value;\n    if (this.formatter)\n    {\n      value = this.formatter(value);\n    }\n\n    this.setState({value: value});\n  }\n\n  focus(select=true)\n  {\n    this._skipSelect = select;\n    this.inputElement.focus();\n  }\n\n  ignoreBlur(ignore)\n  {\n    const prev = this._skipBlur;\n    this._skipBlur = ignore;\n    return prev !== ignore;\n  }\n\n  appendValue(string, separator=\"\", format=true)\n  {\n    const value = this.state.value;\n    if (value && value.length + string.length > this.maxLength) return;\n\n    let result;\n    if (value && value.length > 0)\n    {\n      result = value + separator + string;\n    }\n    else\n    {\n      result = string;\n    }\n\n    if (format && this.formatter)\n    {\n      result = this.formatter(result);\n    }\n\n    this.setState((prev, props) => {\n      return {value: result};\n    });\n  }\n\n  resetValue(string)\n  {\n    this.setState({prevValue: string, value: string});\n  }\n\n  setValue(string, format=true)\n  {\n    let value = string;\n    if (format && this.formatter)\n    {\n      value = this.formatter(value);\n    }\n    this.setState({value: value});\n  }\n\n  getValue()\n  {\n    return this.state.value;\n  }\n\n  //Override\n  render()\n  {\n    const placeholder = this.placeholder;\n    const maxlength = this.maxLength;\n    const multiline = this.multiLine;\n    const disabled = this.props.disabled;\n\n    const value = this.state.value;\n\n    return (\n      <div id={this.props.id}\n        className={this.props.className}\n        style={this.props.style}>\n        {\n          multiline ?\n          <textarea ref={ref=>this.inputElement=ref}\n            type=\"text\" rows=\"1\" spellCheck=\"false\"\n            disabled={disabled}\n            placeholder={placeholder}\n            maxLength={maxlength}\n            value={value}\n            onChange={this.onChange}\n            onFocus={this.onFocus}\n            onBlur={this.onBlur}\n            onKeyDown={this.onKeyDown}/>\n          :\n          <input ref={ref=>this.inputElement=ref}\n            type=\"text\" spellCheck=\"false\"\n            disabled={disabled}\n            placeholder={placeholder}\n            maxLength={maxlength}\n            value={value}\n            onChange={this.onChange}\n            onFocus={this.onFocus}\n            onBlur={this.onBlur}\n            onKeyDown={this.onKeyDown}/>\n        }\n      </div>\n    );\n  }\n}\n\nexport default PatternInput;\n","import React from 'react';\nimport Style from './LabelEditorView.css';\n\nimport GraphElement from 'graph/GraphElement.js';\n\nimport PatternInput from 'system/patterninput/PatternInput.js';\n\nclass LabelEditorView extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.ref = null;\n    this.inputComponent = null;\n\n    this.state = {\n      open: false\n    };\n\n    this._target = null;\n    this._targetCallback = null;\n\n    this.onInputSubmit = this.onInputSubmit.bind(this);\n    this.onInputBlur = this.onInputBlur.bind(this);\n  }\n\n  openEditor(graphElement, defaultValue=null, onSubmit=null, onCancel=null)\n  {\n    if (!(graphElement instanceof GraphElement)) throw new Error(\"Can only open editor for GraphElements\");\n\n    this._target = graphElement;\n    this._targetOnSubmit = onSubmit;\n    this._targetOnCancel = onCancel;\n\n    const formatter = this.props.labeler.getLabelFormatter(this._target);\n    this.inputComponent.setFormatter(formatter);\n\n    this.setState({open: true}, () => {\n      if (defaultValue !== null)\n      {\n        this.inputComponent.resetValue(defaultValue);\n      }\n      this.inputComponent.focus();\n    });\n  }\n\n  closeEditor()\n  {\n    this._target = null;\n    this._targetOnSubmit = null;\n    this._targetOnCancel = null;\n\n    this.inputComponent.setFormatter(null);\n\n    this.setState({open: false});\n  }\n\n  isEditorOpen()\n  {\n    return this.state.open;\n  }\n\n  getTarget()\n  {\n    return this._target;\n  }\n\n  onInputSubmit(value)\n  {\n    if (this._targetOnSubmit)\n    {\n      this._targetOnSubmit(this._target, value);\n      //Don't handle cancel callbacks...\n      this._targetOnCancel = null;\n    }\n  }\n\n  onInputBlur(e)\n  {\n    if (this._targetOnCancel)\n    {\n      this._targetOnCancel(this._target);\n      //Don't handle submit callbacks...\n      this._targetOnSubmit = null;\n    }\n    this.closeEditor();\n  }\n\n  //Override\n  render()\n  {\n    const isEditorOpen = this.state.open;\n\n    const target = this._target;\n    const targetStyle = this.props.style || {};\n    const viewport = this.props.viewport;\n    const labeler = this.props.labeler;\n\n    if (target)\n    {\n      const center = target.getCenterPoint();\n      const element = viewport.getElement();\n      const parentClientRect = element.getBoundingClientRect();\n      const screenPos = transformViewToScreen(\n        element,\n        center.x + viewport.getOffsetX(),\n        center.y + viewport.getOffsetY()\n      );\n      const x = screenPos.x;\n      const y = screenPos.y;\n      const offsetX = -(this.ref.offsetWidth / 2) - parentClientRect.left;\n      const offsetY = -(this.ref.offsetHeight / 2) - parentClientRect.top;\n\n      targetStyle['top'] = (y + offsetY) + \"px\";\n      targetStyle['left'] = (x + offsetX) + \"px\";\n    }\n\n    return (\n      <div ref={ref=>this.ref=ref}\n        id={this.props.id}\n        className={Style.editor_container +\n          (isEditorOpen ? \" open \" : \"\") +\n          \" \" + this.props.className}\n        style={targetStyle}>\n        <PatternInput ref={ref=>this.inputComponent=ref}\n          submitOnBlur={this.props.saveOnExit}\n          onSubmit={this.onInputSubmit}\n          onBlur={this.onInputBlur}/>\n        <div className={Style.tray_container}>\n          {this.props.children}\n        </div>\n      </div>\n    );\n  }\n}\n\nfunction transformViewToScreen(svg, x, y)\n{\n  const ctm = svg.getScreenCTM();\n  return {\n    x: (x * ctm.a) + ctm.e,\n    y: (y * ctm.d) + ctm.f\n  };\n}\n\nexport default LabelEditorView;\n","import React from 'react';\n\nimport LabelEditorView from './LabelEditorView.js';\nimport {RENDER_LAYER_WORKSPACE_OVERLAY} from 'manager/RenderManager.js';\n\nclass LabelEditorManager\n{\n  constructor(app)\n  {\n    this._app = app;\n\n    this._labelEditorComponent = null;\n    this._labelEditorRenderer = null;\n    this._labeler = null;\n  }\n\n  setLabelEditorRenderer(renderer)\n  {\n    this._labelEditorRenderer = renderer;\n    return this;\n  }\n\n  setLabeler(labeler)\n  {\n    this._labeler = labeler;\n    return this;\n  }\n\n  //DuckType(SessionListener)\n  onSessionStart(session)\n  {\n    const currentModule = session.getCurrentModule();\n    const viewport = session.getApp().getInputAdapter().getViewport();\n\n    const LabelEditorRenderer = this._labelEditorRenderer;\n    const labeler = this._labeler;\n    session.getApp().getRenderManager().addRenderer(RENDER_LAYER_WORKSPACE_OVERLAY, props => (\n      <LabelEditorView ref={ref=>this._labelEditorComponent=ref}\n        labeler={labeler}\n        viewport={viewport}\n        saveOnExit={true}>\n        {/* LabelEditor objects */\n          LabelEditorRenderer &&\n          <LabelEditorRenderer currentModule={currentModule} parent={this._labelEditorComponent}/>}\n      </LabelEditorView>\n    ));\n  }\n\n  //DuckType(SessionListener)\n  onSessionStop(session)\n  {\n    this._labeler = null;\n    this._labelEditorRenderer = null;\n    this._labelEditorComponent = null;\n  }\n\n  getLabelEditorComponent()\n  {\n    return this._labelEditorComponent;\n  }\n}\n\nexport default LabelEditorManager;\n","import InputController from 'modules/nodalgraph/controller/InputController.js';\nimport GraphController from 'modules/nodalgraph/controller/GraphController.js';\n\nimport SelectionBoxInputHandler from 'modules/nodalgraph/controller/SelectionBoxInputHandler.js';\nimport ViewportInputHandler from 'modules/nodalgraph/controller/ViewportInputHandler.js';\n\nimport LabelEditorManager from 'manager/labeleditor/LabelEditorManager.js';\n\nimport Notifications from 'system/notification/Notifications.js';\n\nclass NodalGraphInputManager\n{\n  constructor(currentModule, nodalGraph, graphLabeler, graphParser, labelEditorRenderer)\n  {\n    this._inputController = new InputController(currentModule, currentModule.getApp().getInputAdapter());\n    this._graphController = new GraphController(currentModule, nodalGraph, graphLabeler, graphParser);\n\n    this._labelEditorManager = new LabelEditorManager()\n      .setLabelEditorRenderer(labelEditorRenderer)\n      .setLabeler(graphLabeler);\n\n    currentModule.getApp().getInputAdapter()\n      .addInputHandler(this._inputController)\n      .addInputHandler(new SelectionBoxInputHandler(this._inputController, this._graphController, this._inputController.getSelectionBox()))\n      .addInputHandler(new ViewportInputHandler());\n  }\n\n  //Not yet implemented\n  setGraphLabeler(labeler)\n  {\n    this._graphLabeler = labeler;\n    return this;\n  }\n\n  //Not yet implemented\n  setGraphParser(parser)\n  {\n    this._graphParser = parser;\n    return this;\n  }\n\n  update(currentModule)\n  {\n    const inputController = this.getInputController();\n    const graphController = this.getGraphController();\n    inputController.update(currentModule);\n    graphController.update(currentModule);\n  }\n\n  //DuckType(SessionListener)\n  onSessionStart(session)\n  {\n    const currentModule = session.getCurrentModule();\n    const inputController = this.getInputController();\n    const graphController = this.getGraphController();\n    inputController.initialize(currentModule);\n    graphController.initialize(currentModule);\n\n    this._labelEditorManager.onSessionStart(session);\n\n    //Notify on create in delete mode\n    const tryCreateWhileTrash = () => {\n      if (this._inputController.isTrashMode())\n      {\n        Notifications.addMessage(I18N.toString(\"message.warning.cannotmodify\"), \"warning\", \"tryCreateWhileTrash\");\n      }\n    };\n    this._graphController.on(\"tryCreateWhileTrash\", tryCreateWhileTrash);\n  }\n\n  //DuckType(SessionListener)\n  onSessionStop(session)\n  {\n    this._labelEditorManager.onSessionStop(session);\n\n    const currentModule = session.getCurrentModule();\n    const inputController = this.getInputController();\n    const graphController = this.getGraphController();\n    graphController.destroy(currentModule);\n    inputController.destroy(currentModule);\n  }\n\n  getLabelEditorManager() { return this._labelEditorManager; }\n  getGraphParser() { return this._graphController.getGraphParser(); }\n  getGraphLabeler() { return this._graphController.getGraphLabeler(); }\n  getGraphController() { return this._graphController; }\n  getInputController() { return this._inputController; }\n}\n\nexport default NodalGraphInputManager;\n","import FSA, { State } from '../FSA.js';\n\nexport function convertToNFA(fsa, dst=new FSA(false))\n{\n  if (!fsa.isDeterministic())\n  {\n    dst.copy(fsa);\n    return dst;\n  }\n\n  dst.setDeterministic(false);\n  return dst;\n}\n\nexport function convertToDFA(fsa, dst=new FSA(true))\n{\n  if (fsa.isDeterministic())\n  {\n    dst.copy(fsa);\n    return dst;\n  }\n\n  dst.setDeterministic(true);\n\n  const startState = fsa.getStartState();\n\n  const dfaData = {\n    nfaSource: fsa,\n    //To keep track of dfa states in terms of nfa sets\n    dfaStateMap: new Map(),\n    //Array of final dfa states\n    dfaFinalStates: [],\n    //To keep track of dfa transitions in terms of dfa states\n    dfaTransitionMap: new Map(),\n    //The resultant dfa start state\n    dfaStartState: null,\n    //The trap state for all missing transitions\n    dfaTrapState: null\n  };\n\n  //Make new DFA start state\n  const startStatesByClosure = fsa.doClosureTransition(startState);\n  dfaData.dfaStartState = getDFAStateFromNFAStates(startStatesByClosure, dfaData);\n  dfaData.dfaTrapState = getDFAStateFromNFAStates([], dfaData);\n\n  //For every state from the NFA's powerset, add it to DFA with correct transitions\n  const statePowerSet = getPowerSetOfStates(fsa.getStates());\n  for(const nfaStates of statePowerSet)\n  {\n    //As long as it is not the empty set...\n    if (nfaStates.length > 0)\n    {\n      expandNFAStatesToDFA(nfaStates, dfaData);\n    }\n  }\n\n  //Make sure any unused symbols are added as transitions for every state...\n  for(const dfaState of dfaData.dfaStateMap.values())\n  {\n    for(const symbol of fsa.getAlphabet())\n    {\n      //If transition for symbol does not exist...\n      const dfaTransitionKey = getDFATransitionKeyFromDFAStateAndSymbol(dfaState, symbol, dfaData);\n      if (!dfaData.dfaTransitionMap.has(dfaTransitionKey))\n      {\n        dfaData.dfaTransitionMap.set(dfaTransitionKey, [dfaState, symbol, dfaData.dfaTrapState]);\n      }\n    }\n  }\n\n  //Compiled dfa data to dst\n  dst.clear();\n  //Add states\n  for(const dfaState of dfaData.dfaStateMap.values())\n  {\n    dst.addState(dfaState);\n  }\n\n  //Set start state\n  dst.setStartState(dfaData.dfaStartState);\n  //Set final states\n  for(const finalState of dfaData.dfaFinalStates)\n  {\n    dst.setFinalState(finalState);\n  }\n  //Add transitions (will also add any symbols used to alphabet)\n  for(const transition of dfaData.dfaTransitionMap.values())\n  {\n    dst.addTransition(transition[0], transition[2], transition[1]);\n  }\n  return dst;\n}\n\nfunction expandNFAStatesToDFA(nfaStates, dfaData)\n{\n  let fromDFAState = getDFAStateFromNFAStates(nfaStates, dfaData);\n  let dfaState = null;\n\n  let nfaTerminals = [];\n\n  for(const symbol of dfaData.nfaSource.getAlphabet())\n  {\n    //Get all closed reachable states...\n    for(const fromNFAState of nfaStates)\n    {\n      dfaData.nfaSource.doTerminalTransition(fromNFAState, symbol, nfaTerminals);\n    }\n\n    //If has reachable states...\n    if (nfaTerminals.length > 0)\n    {\n      dfaState = getDFAStateFromNFAStates(nfaTerminals, dfaData);\n\n      //Create transition for reachable state\n      //Should guarantee to be unique for state and symbol pair\n      const dfaTransitionKey = getDFATransitionKeyFromDFAStateAndSymbol(fromDFAState, symbol, dfaData);\n      dfaData.dfaTransitionMap.set(dfaTransitionKey, [fromDFAState, symbol, dfaState]);\n    }\n\n    //Reset list\n    nfaTerminals.length = 0;\n  }\n}\n\nfunction getNFAStateKeyFromNFAStates(nfaStates, dfaData)\n{\n  let result = \"\";\n  for(const nfaState of dfaData.nfaSource.getStates())\n  {\n    if (nfaStates.includes(nfaState))\n    {\n      result += \"x\";\n    }\n    else\n    {\n      result += \"-\";\n    }\n  }\n  return result;\n}\n\nfunction getDFATransitionKeyFromDFAStateAndSymbol(dfaState, symbol, dfaData)\n{\n  return dfaState.getStateID() + \";\" + symbol;\n}\n\nfunction getDFAStateFromNFAStates(nfaStates, dfaData)\n{\n  const nfaStateKey = getNFAStateKeyFromNFAStates(nfaStates, dfaData);\n  let result = dfaData.dfaStateMap.get(nfaStateKey);\n\n  //If it doesn't exist, create it...\n  if (!result)\n  {\n    let final = false;\n    //Compute the label from nfa states in set notation...\n    let dfaStateLabel = \"{\";\n    for(const state of nfaStates)\n    {\n      if (dfaStateLabel.length > 1)\n      {\n        dfaStateLabel += \",\";\n      }\n      dfaStateLabel += state.getStateLabel();\n\n      //Check if nfa state is final state...\n      if (!final)\n      {\n        final = dfaData.nfaSource.isFinalState(state);\n      }\n    }\n    dfaStateLabel += \"}\";\n\n    //Create the state\n    result = new State(dfaStateLabel);\n    dfaData.dfaStateMap.set(nfaStateKey, result);\n\n    //If any nfa states is a final state, make dfa state final...\n    if (final)\n    {\n      dfaData.dfaFinalStates.push(result);\n    }\n  }\n\n  return result;\n}\n\nfunction getPowerSetOfStates(states)\n{\n  var result = [[]];\n\n  for(const state of states)\n  {\n    for(let i = 0, len = result.length; i < len; ++i)\n    {\n      result.push(result[i].concat(state));\n    }\n  }\n  return result;\n}\n","const MAX_COMPUTATION_STEPS = 1000;\n\nexport function solveFSA(fsa, input)\n{\n  if (typeof input === 'string') input = input[Symbol.iterator]();\n\n  if (fsa.isDeterministic())\n  {\n    //Solve if the DFA way...\n    let state = fsa.getStartState();\n    let symbol = null;\n\n    //Is testing null after assignment\n    while((symbol = input.next().value))\n    {\n      const states = fsa.doTransition(state, symbol);\n      if (states.length < 1) return false;\n      //DFA's should only return 1 output\n      state = states[0];\n    }\n    return fsa.isFinalState(state);\n  }\n  else\n  {\n    //Solve it the NFA way...\n    const cachedStates = [];\n    const cachedSymbols = [];\n\n    //Start with the start state...\n    const startState = fsa.getStartState();\n    //(index refers to the \"level\" of computation)\n    cachedStates.push({state: startState, index: 0});\n    //...and any state defined similarly by closure...\n    for(const relatedState of fsa.doClosureTransition(startState))\n    {\n      cachedStates.push({state: relatedState, index: 0});\n    }\n\n    //The next symbol to compute...\n    let symbol = null;\n\n    //Just to be safe from infinite loops...\n    let counter = 0;\n    while(cachedStates.length > 0)\n    {\n      symbol = input.next().value;\n      if (solveFSAByStep(fsa, symbol, cachedStates, cachedSymbols))\n      {\n        return true;\n      }\n\n      //HACK: This is to stop any infinite loops! This should be fixed in the future!\n      ++counter;\n      if (counter > MAX_COMPUTATION_STEPS)\n      {\n        return false;\n      }\n    }\n\n    return false;\n  }\n}\n\n//TODO: When an empty transition occurs, it does a closure transition.\n//The closure chain will be stored as a group\n//Any future transitions must not re-enter the group\nexport function solveFSAByStep(nfa, symbol, cachedStates, cachedSymbols)\n{\n  //initialize variables\n  let state = null;\n  let nextStates = [];\n  let nextIndex = 0;\n\n  if (symbol)\n  {\n    cachedSymbols.push(symbol);\n  }\n\n  for(const cstate of cachedStates)\n  {\n    state = cstate.state;\n    symbol = cstate.index < cachedSymbols.length ? cachedSymbols[cstate.index] : null;\n\n    if (symbol)\n    {\n      //Read to next state...\n      nextIndex = cstate.index + 1;\n      for(const nextState of nfa.doTerminalTransition(state, symbol))\n      {\n        nextStates.push({state: nextState, index: nextIndex});\n      }\n    }\n    else\n    {\n      if (nfa.isFinalState(state)) return true;\n    }\n\n    //Read none to next state...\n    nextIndex = cstate.index;\n  }\n  cachedStates.length = 0\n  cachedStates.push(...nextStates);\n  return false;\n}\n","import FSA from '../FSA.js';\n\nexport function invertDFA(fsa, dst=new FSA(true))\n{\n  dst.copy(fsa);\n\n  const toBeRejected = new Set(dst.getFinalStates());\n  for(const state of dst.getStates())\n  {\n    if (toBeRejected.has(state))\n    {\n      dst.setFinalState(state, false);\n    }\n    else\n    {\n      dst.setFinalState(state, true);\n    }\n  }\n\n  return dst;\n};\n","export {convertToDFA, convertToNFA} from './util/ConvertFSA.js';\nexport {solveFSA, solveFSAByStep} from './util/SolveFSA.js';\nexport {isEquivalentFSA, isEquivalentDFA} from './util/EqualFSA.js';\nexport {invertDFA} from './util/InvertDFA.js';\nexport {intersectFSA, intersectDFA} from './util/IntersectFSA.js';\n","import React from 'react';\n\nclass BoxRenderer extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  //Override\n  render()\n  {\n    const visible = this.props.visible;\n    const fromX = this.props.fromX || 0;\n    const fromY = this.props.fromY || 0;\n    const toX = this.props.toX || fromX + 1;\n    const toY = this.props.toY || fromY + 1;\n\n    const dx = toX - fromX;\n    const dy = toY - fromY;\n\n    return (\n      <g className=\"graph-selection-container\">\n      { visible &&\n        <rect className=\"graph-selection\"\n          x={dx < 0 ? toX : fromX}\n          y={dy < 0 ? toY : fromY}\n          width={dx < 0 ? -dx : dx}\n          height={dy < 0 ? -dy : dy}/> }\n      </g>\n    );\n  }\n}\n\nexport default BoxRenderer;\n","import React from 'react';\n\nconst CURSOR_RADIUS = 4;\nconst NODE_RADIUS = 16;\nconst EDGE_RADIUS = 12;\nconst ENDPOINT_RADIUS = 6;\nconst INITIAL_MARKER_OFFSET_X = -(NODE_RADIUS + (NODE_RADIUS / 2));\n\nconst HIGHLIGHT_RADIUS_OFFSET = 4;\nconst HIGHLIGHT_LINE_WIDTH = 3;\nconst HIGHLIGHT_LINE_ARRAY = [8, 6];\n\nclass HighlightRenderer extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  //Override\n  render()\n  {\n    const target = this.props.target;\n    const type = this.props.type;\n\n    let x = 0;\n    let y = 0;\n    let r = CURSOR_RADIUS;\n    switch(type)\n    {\n      case \"node\":\n        x = target.x || 0;\n        y = target.y || 0;\n        r = NODE_RADIUS;\n        break;\n      case \"edge\":\n        const center = target.getCenterPoint();\n        x = center.x || 0;\n        y = center.y || 0;\n        r = EDGE_RADIUS;\n        break;\n      case \"endpoint\":\n        const endpoint = target.getEndPoint();\n        x = endpoint.x || 0;\n        y = endpoint.y || 0;\n        r = ENDPOINT_RADIUS;\n        break;\n      case \"initial\":\n        x = target.x + INITIAL_MARKER_OFFSET_X;\n        y = target.y || 0;\n        r = EDGE_RADIUS;\n        break;\n    }\n\n    return (\n      <g className=\"graph-highlight-container\">\n        <circle className={\"graph-highlight \" + this.props.className}\n          cx={x} cy={y}\n          r={r + HIGHLIGHT_RADIUS_OFFSET}\n          strokeDashoffset={this.props.offset || 0}\n          strokeDasharray={HIGHLIGHT_LINE_ARRAY}\n          strokeWidth={HIGHLIGHT_LINE_WIDTH}\n          fill=\"none\"/>\n      </g>\n    );\n  }\n}\n\nexport default HighlightRenderer;\n","import React from 'react';\n\nimport BoxRenderer from './BoxRenderer.js';\nimport HighlightRenderer from './HighlightRenderer.js';\n\nclass SelectionBoxRenderer extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  //Override\n  render()\n  {\n    const currentModule = this.props.currentModule;\n\n    const graphController = currentModule.getGraphController();\n    const inputController = currentModule.getInputController();\n\n    const graph = graphController.getGraph();\n    const selectionBox = inputController.getSelectionBox();\n    const selectionBoundingBox = selectionBox.getSelectionBox();\n\n    return (\n      <g>\n        {/* Selected elements */}\n        { selectionBox &&\n          selectionBox.hasSelection() &&\n          selectionBox.getSelection(graph).map((e, i) =>\n            <HighlightRenderer key={e.getGraphElementID()}\n              className={inputController.isTrashMode() ?\n                \"highlight-error\" :\n                \"highlight-select\"}\n              target={e} type=\"node\"/>) }\n\n        {/* Selection box */}\n        { selectionBoundingBox &&\n          <BoxRenderer visible={selectionBoundingBox.visible}\n            fromX={selectionBoundingBox.fromX} fromY={selectionBoundingBox.fromY}\n            toX={selectionBoundingBox.toX} toY={selectionBoundingBox.toY}/> }\n      </g>\n    );\n  }\n}\n\nexport default SelectionBoxRenderer;\n","import React from 'react';\n\nimport SelectionBoxRenderer from './SelectionBoxRenderer.js';\nimport HighlightRenderer from './HighlightRenderer.js';\n\nclass GraphInputRenderer extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  //Override\n  render()\n  {\n    //Inherits props from parent\n    const currentModule = this.props.currentModule;\n\n    const inputController = currentModule.getInputController();\n\n    const viewport = inputController.getInputAdapter().getViewport();\n    const picker = inputController.getPicker();\n    const selectionBox = inputController.getSelectionBox();\n\n    return (\n      <g>\n        <SelectionBoxRenderer currentModule={currentModule}/>\n\n        {/* Node test targets */}\n        { currentModule._tester &&\n          currentModule._tester.targets &&\n          currentModule._tester.targets.map((e, i) => {\n            return <HighlightRenderer key={e.getGraphElementID()}\n              className=\"highlight-test graph-gui\"\n              target={e} type=\"node\" offset=\"6\"/>;\n          })}\n\n        {/* Hover markers */}\n        { picker &&\n          picker.hasTarget() &&\n          !selectionBox.isTargetInSelection(picker.target) &&\n          <HighlightRenderer className={inputController.isTrashMode() ?\n            \"highlight-error\" :\n            \"highlight-select\"}\n            target={picker.target}\n            type={picker.targetType}/> }\n      </g>\n    );\n  }\n}\n\nexport default GraphInputRenderer;\n","import React from 'react';\n\nclass Icon extends React.Component\n{\n  constructor(props) { super(props); }\n\n  //Override\n  render()\n  {\n    return (\n      <svg id={this.props.id} className={this.props.className} style={this.props.style}\n      xmlns=\"http://www.w3.org/2000/svg\"\n      width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n        <path d=\"M13,6V11H18V7.75L22.25,12L18,16.25V13H13V18H16.25L12,22.25L7.75,18H11V13H6V16.25L1.75,12L6,7.75V11H11V6H7.75L12,1.75L16.25,6H13Z\"/>\n      </svg>\n    );\n  }\n}\nexport default Icon;\n","import React from 'react';\nimport Style from './ModeSelectTray.css';\n\nimport IconButton from 'experimental/components/IconButton.js';\nimport EditPencilIcon from 'experimental/iconset/EditPencilIcon.js';\nimport MoveIcon from 'experimental/iconset/MoveIcon.js';\n\nclass ModeSelectTray extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.onChange = this.onChange.bind(this);\n  }\n\n  onChange(newValue)\n  {\n    if (this.props.onChange)\n    {\n      this.props.onChange(newValue);\n    }\n  }\n\n  //Override\n  render()\n  {\n    const mode = this.props.mode || 0;\n    const onChange = this.props.onChange;\n\n    return (\n      <div id={this.props.id}\n        className={Style.tray_container +\n          \" \" + this.props.className}\n        style={this.props.style}>\n        <IconButton className={Style.tray_button +\n          (mode === 0 ? \" active \" : \"\")}\n          onClick={() => this.onChange(0)}\n          title={I18N.toString(\"cursor.actionmode\")}>\n          <EditPencilIcon/>\n        </IconButton>\n        <IconButton className={Style.tray_button +\n          (mode === 1 ? \" active \" : \"\")}\n          onClick={() => this.onChange(1)}\n          title={I18N.toString(\"cursor.movemode\")}>\n          <MoveIcon/>\n        </IconButton>\n      </div>\n    );\n  }\n}\nexport default ModeSelectTray;\n","import React from 'react';\n\nclass Icon extends React.Component\n{\n  constructor(props) { super(props); }\n\n  //Override\n  render()\n  {\n    return (\n      <svg id={this.props.id} className={this.props.className} style={this.props.style}\n      xmlns=\"http://www.w3.org/2000/svg\"\n      width=\"24\" height=\"24\" viewBox=\"0 0 26 26\">\n        <path d=\"M 11.5 -0.03125 C 9.542969 -0.03125 7.96875 1.59375 7.96875 3.5625 L 7.96875 4 L 4 4 C 3.449219 4 3 4.449219 3 5 L 3 6 L 2 6 L 2 8 L 4 8 L 4 23 C 4 24.644531 5.355469 26 7 26 L 19 26 C 20.644531 26 22 24.644531 22 23 L 22 8 L 24 8 L 24 6 L 23 6 L 23 5 C 23 4.449219 22.550781 4 22 4 L 18.03125 4 L 18.03125 3.5625 C 18.03125 1.59375 16.457031 -0.03125 14.5 -0.03125 Z M 11.5 2.03125 L 14.5 2.03125 C 15.304688 2.03125 15.96875 2.6875 15.96875 3.5625 L 15.96875 4 L 10.03125 4 L 10.03125 3.5625 C 10.03125 2.6875 10.695313 2.03125 11.5 2.03125 Z M 6 8 L 11.125 8 C 11.25 8.011719 11.371094 8.03125 11.5 8.03125 L 14.5 8.03125 C 14.628906 8.03125 14.75 8.011719 14.875 8 L 20 8 L 20 23 C 20 23.5625 19.5625 24 19 24 L 7 24 C 6.4375 24 6 23.5625 6 23 Z M 8 10 L 8 22 L 10 22 L 10 10 Z M 12 10 L 12 22 L 14 22 L 14 10 Z M 16 10 L 16 22 L 18 22 L 18 10 Z \"/>\n      </svg>\n    );\n  }\n}\nexport default Icon;\n","import React from 'react';\nimport Style from './TrashCanWidget.css';\n\nimport { userClearGraph } from 'experimental/UserUtil.js';\n\nimport TrashCanDetailedIcon from 'experimental/iconset/TrashCanDetailedIcon.js';\n\nconst DOUBLE_TAP_TIME = 250;\n\nclass TrashCanWidget extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.ref = null;\n\n    this.state = {\n      forceActive: false\n    };\n\n    this._doubleTapTimeout = null;\n\n    this.onMouseEnter = this.onMouseEnter.bind(this);\n    this.onMouseLeave = this.onMouseLeave.bind(this);\n    this.onClick = this.onClick.bind(this);\n\n    //HACK: This is kinda a hack to lose trash mode focus...\n    this.onAnyMouseDownNotConsumed = this.onAnyMouseDownNotConsumed.bind(this);\n  }\n\n  onMouseEnter(e)\n  {\n    if (this.state.forceActive) return;\n\n    this.props.inputController.setTrashMode(true);\n  }\n\n  onMouseLeave(e)\n  {\n    if (this.state.forceActive) return;\n\n    this.props.inputController.setTrashMode(false);\n  }\n\n  onClick(e)\n  {\n    e.stopPropagation();\n    e.preventDefault();\n\n    if (this._doubleTapTimeout)\n    {\n      //This is a double tap!\n      clearTimeout(this._doubleTapTimeout);\n      this._doubleTapTimeout = null;\n      this.setState({forceActive: false});\n\n      userClearGraph(this.props.app, true);\n      this.props.inputController.setTrashMode(false);\n    }\n    else\n    {\n      //This is a single tap!\n      this.setState((prev, props) => {\n        const result = !prev.forceActive;\n        props.inputController.setTrashMode(result);\n        this._doubleTapTimeout = setTimeout(() => {\n          this._doubleTapTimeout = null;\n        }, DOUBLE_TAP_TIME);\n\n        if (result)\n        {\n          document.documentElement.addEventListener('mousedown', this.onAnyMouseDownNotConsumed);\n        }\n\n        return {\n          forceActive: result\n        };\n      });\n    }\n  }\n\n  onAnyMouseDownNotConsumed(e)\n  {\n    if (this.state.forceActive && this.ref !== e.target)\n    {\n      e.stopPropagation();\n      e.preventDefault();\n\n      document.documentElement.removeEventListener('mousedown', this.onAnyMouseDownNotConsumed);\n\n      this.props.inputController.setTrashMode(false);\n      this.setState({forceActive: false});\n    }\n  }\n\n  //Override\n  render()\n  {\n    const inputController = this.props.inputController;\n    const graphController = this.props.graphController;\n    const inputAdapter = inputController.getInputAdapter();\n\n    const active = inputController.isTrashMode();\n    const hide = !active && (graphController.getGraph().isEmpty() || (inputAdapter.isUsingTouch() && inputAdapter.isDragging()));\n\n    return (\n      <div ref={ref=>this.ref=ref} id={this.props.id}\n        className={Style.trash_container +\n          (active ? \" active \" : \"\") +\n          (hide ? \" hide \" : \"\") +\n          \" \" + this.props.className}\n        style={this.props.style}\n        onMouseEnter={this.onMouseEnter}\n        onMouseLeave={this.onMouseLeave}\n        onClick={this.onClick}>\n        <TrashCanDetailedIcon/>\n      </div>\n    );\n  }\n}\n\nexport default TrashCanWidget;\n","import AbstractMachineBuilder from 'modules/abstract/AbstractMachineBuilder.js';\nimport FSA, { EMPTY_SYMBOL, State } from './FSA.js';\nimport FSANode from 'modules/fsa/graph/FSANode.js';\nimport FSAEdge, { EMPTY_CHAR } from 'modules/fsa/graph/FSAEdge.js';\n\nexport const ERROR_UNREACHABLE_STATE = \"unreachable_state\";\nexport const ERROR_DUPLICATE_STATE = \"duplicate_state\";\nexport const ERROR_INCOMPLETE_TRANSITION = \"incomplete_transition\";\nexport const ERROR_DUPLICATE_TRANSITION = \"duplicate_transition\";\nexport const ERROR_MISSING_TRANSITION = \"missing_transition\";\nexport const ERROR_EMPTY_TRANSITION = \"empty_transition\";\n\nclass FSABuilder extends AbstractMachineBuilder\n{\n\tconstructor()\n\t{\n\t\tsuper();\n\n\t\tthis._machine = new FSA();\n\t}\n\n\t//Override\n\tattemptBuild(graph, dst, errors=[], warnings=[])\n\t{\n\t\terrors.length = 0;\n\t\twarnings.length = 0;\n\n\t\tconst deterministic = dst.isDeterministic();\n\t\tdst.clear();\n\n\t\tconst nodeLabels = new Map();\n\t\tconst nodeOutgoings = new Map();\n\t\tconst edgeSymbols = new Set();\n\t\tconst edgePlaceholders = [];\n\t\tconst edgeEmpties = [];\n\n\t\tconst graphNodes = graph.getNodes();\n\t\tconst graphEdges = graph.getEdges();\n\t\tconst graphStart = graph.getStartNode();\n\n\t\tfor (const node of graphNodes)\n\t\t{\n\t\t\tconst nodeLabel = node.getNodeLabel();\n\t\t\tconst state = new State(nodeLabel, node);\n\t\t\tdst.addState(state);\n\n\t\t\tif (node.getNodeAccept())\n\t\t\t{\n\t\t\t\tdst.setFinalState(state, true);\n\t\t\t}\n\n\t\t\tif (graphStart === node)\n\t\t\t{\n\t\t\t\tdst.setStartState(state);\n\t\t\t}\n\n\t\t\t//Check for duplicate states\n\t\t\tif (nodeLabels.has(nodeLabel)) nodeLabels.get(nodeLabel).push(state);\n\t\t\telse nodeLabels.set(nodeLabel, [state]);\n\n\t\t\t//For duplicate transitions\n\t\t\tnodeOutgoings.set(state, new Map());\n\t\t}\n\n\t\tfor (const edge of graphEdges)\n\t\t{\n\t\t\tconst srcNode = edge.getSourceNode();\n\t\t\tconst dstNode = edge.getDestinationNode();\n\t\t\tif (!edge.isPlaceholder() && srcNode instanceof FSANode && dstNode instanceof FSANode)\n\t\t\t{\n\t\t\t\tconst srcState = dst.getStateByID(srcNode.getGraphElementID());\n\t\t\t\tconst dstState = dst.getStateByID(dstNode.getGraphElementID());\n\t\t\t\tif (!srcState || !dstState) throw new Error(\"Cannot find state for edge source/destination nodes - mismatch id\");\n\n\t\t\t\tconst edgeLabelSymbols = edge.getEdgeSymbolsFromLabel();\n\t\t\t\tfor (const symbol of edgeLabelSymbols)\n\t\t\t\t{\n\t\t\t\t\tif (!symbol) continue;\n\n          if (symbol === EMPTY_CHAR)\n          {\n\t\t\t\t\t\t//For empties\n            edgeEmpties.push(edge);\n          }\n          else\n          {\n\t\t\t\t\t\t//For used symbol\n            edgeSymbols.add(symbol);\n          }\n\n          //Translate all labels to symbols\n          let transitionSymbol;\n          switch(symbol)\n          {\n            case EMPTY_CHAR:\n              transitionSymbol = EMPTY_SYMBOL;\n              break;\n            default:\n              transitionSymbol = symbol;\n          }\n\n\t\t\t\t\t//For duplicate/missing transitions\n\t\t\t\t\tlet outSymbols = nodeOutgoings.get(srcState);\n\t\t\t\t\tlet outEdges = outSymbols.get(transitionSymbol);\n\t\t\t\t\tif (!outEdges) outSymbols.set(transitionSymbol, outEdges = new Array());\n\t\t\t\t\toutEdges.push(edge);\n\n          //Add to machine...\n\t\t\t\t\tdst.addTransition(srcState, dstState, transitionSymbol);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tedgePlaceholders.push(edge);\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t}\n\n    //Check for duplicate node labels\n\t\tfor(const [nodeLabel, sharedStates] of nodeLabels.entries())\n\t\t{\n\t\t\tif (sharedStates.length > 1)\n\t\t\t{\n\t\t\t\terrors.push({\n\t\t\t\t\tname: ERROR_DUPLICATE_STATE,\n\t\t\t\t\tlabel: nodeLabel,\n\t\t\t\t\tnodes: sharedStates.map(e => e.getSource())\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n    //Check for incomplete edge\n\t\tif (edgePlaceholders.length > 0)\n\t\t{\n\t\t\terrors.push({\n\t\t\t\tname: ERROR_INCOMPLETE_TRANSITION,\n\t\t\t\tedges: edgePlaceholders\n\t\t\t});\n\t\t}\n\n\t\t//Check for unreachable nodes\n\t\tconst unreachables = this.getUnreachableNodes(graph);\n\t\tif (unreachables && unreachables.length > 0)\n\t\t{\n\t\t\twarnings.push({\n\t\t\t\tname: ERROR_UNREACHABLE_STATE,\n\t\t\t\tnodes: unreachables\n\t\t\t});\n\t\t}\n\n\t\tif (deterministic)\n\t\t{\n\t    //Check for empty transitions\n\t\t\tif (edgeEmpties.length > 0)\n\t\t\t{\n\t\t\t\terrors.push({\n\t\t\t\t\tname: ERROR_EMPTY_TRANSITION,\n\t\t\t\t\tedges: edgeEmpties\n\t\t\t\t});\n\t\t\t}\n\n\t    //Check for duplicate edge labels\n\t\t\t//Check for missing edge labels\n\t\t\tconst missingSymbols = [];\n\t\t\tfor(const [state, edgeMapping] of nodeOutgoings.entries())\n\t\t\t{\n\t\t\t\tfor(const symbol of edgeSymbols)\n\t\t\t\t{\n\t\t\t\t\tconst edges = edgeMapping.get(symbol);\n\t\t\t\t\tif (edges)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (edges.length !== 1)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\terrors.push({\n\t\t\t\t\t\t\t\tname: ERROR_DUPLICATE_TRANSITION,\n\t\t\t\t\t\t\t\tedges: edges,\n\t\t\t\t\t\t\t\tsymbol: symbol\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tmissingSymbols.push(symbol);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (missingSymbols.length > 0)\n\t\t\t\t{\n\t\t\t\t\terrors.push({\n\t\t\t\t\t\tname: ERROR_MISSING_TRANSITION,\n\t\t\t\t\t\tnode: state.getSource(),\n\t\t\t\t\t\tsymbols: missingSymbols.slice()\n\t\t\t\t\t});\n\t\t\t\t\tmissingSymbols.length = 0;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (errors.length <= 0)\n\t\t{\n\t\t\t//Errors should be empty\n\t\t\treturn this._machine;\n\t\t}\n\t\telse\n\t\t{\n\t\t\t//Reasons are stored in errors\n\t\t\treturn null;\n\t\t}\n\t}\n\n\tgetUnreachableNodes(graph)\n\t{\n\t\tconst openList = graph.getNodes().slice();\n\t\tconst index = openList.indexOf(startNode);\n\t\topenList.splice(index, 1);\n\n\t\tconst queue = [];\n\t\tqueue.push(startNode);\n\n\t\twhile(queue.length > 0)\n\t\t{\n\t\t\tconst nextNode = queue.pop();\n\n\t\t}\n\n    if (graph.getNodeCount() <= 1) return [];\n\n    const edges = graph.getEdges();\n    const nodes = graph.getNodes().slice();\n\t\tconst startNode = graph.getStartNode();\n\t\tconst startIndex = nodes.indexOf(startNode);\n\t\tif (startIndex < 0) return [];\n\t\tnodes.splice(startIndex, 1);\n\n    let nextNodes = [];\n    nextNodes.push(startNode);\n\n    while(nextNodes.length > 0)\n    {\n      const node = nextNodes.pop();\n      for(const edge of edges)\n      {\n        if (edge.getSourceNode() === node)\n        {\n          const i = nodes.indexOf(edge.getDestinationNode());\n          if (i >= 0)\n          {\n\t\t\t\t\t\tconst nextNode = nodes[i];\n            nodes.splice(i, 1);\n            nextNodes.push(nextNode);\n          }\n        }\n      }\n    }\n\n    return nodes;\n\t}\n\n\t//Override\n\tgetMachine()\n\t{\n\t\treturn this._machine;\n\t}\n}\n\n//Representations ->\n//Truth\n\n//MachineBuilder\n//Graph -> Machine (Compile, then return errors)\n//Any changes to graph does not warrant a change to machine\n//Machine Changes -> Graph (Apply them as they happen)\n//Any change to machine does.\n//Machine Conversion -> Graph (Reconstruct the entire graph from machine, then apply layout)\n\nexport default FSABuilder;\n","import AbstractMachineController from 'modules/abstract/AbstractMachineController.js';\n\nimport {EMPTY_SYMBOL} from 'modules/fsa2/machine/FSA.js';\nimport {EMPTY_CHAR, SYMBOL_SEPARATOR} from 'modules/fsa/graph/FSAEdge.js';\nimport FSABuilder from 'modules/fsa2/machine/FSABuilder.js';\nimport { convertToDFA, invertDFA } from 'modules/fsa2/machine/FSAUtils.js';\n\nimport GraphLayout from 'modules/fsa/graph/GraphLayout.js';\n\nclass MachineController extends AbstractMachineController\n{\n  constructor(module)\n  {\n    super(module, new FSABuilder());\n\n    this.graphController = null;\n  }\n\n  //Override\n  initialize(module)\n  {\n    super.initialize(module);\n\n    this.graphController = module.getGraphController();\n  }\n\n  //Override\n  destroy(module)\n  {\n    super.destroy(module);\n  }\n\n  //Override\n  update(module)\n  {\n    super.update(module);\n  }\n\n  getMachineType()\n  {\n    return this._machineBuilder.getMachine().isDeterministic() ? \"DFA\" : \"NFA\";\n  }\n\n  setMachineType(machineType)\n  {\n    this._machineBuilder.getMachine().setDeterministic(machineType === 'DFA');\n  }\n\n  changeMachineTo(machineType)\n  {\n    const prev = this.getMachineType();\n    if (prev != machineType)\n    {\n      this.setMachineType(machineType);\n    }\n  }\n\n  getFirstGraphNodeByLabel(graph, label)\n  {\n    for(const node of graph.getNodes())\n    {\n      if (node.getNodeLabel() == label)\n      {\n        return node;\n      }\n    }\n\n    return null;\n  }\n\n  setGraphToMachine(graph, machine)\n  {\n    graph.clear();\n\n    if (machine.getStateCount() <= 0) return;\n\n    //Add all states\n    let stateMap = new Map();\n    let node;\n    for(const state of machine.getStates())\n    {\n      node = graph.createNode(0, 0);\n      node.setNodeLabel(state.getStateLabel());\n      if (machine.isFinalState(state)) node.setNodeAccept(true);\n      stateMap.set(state, node);\n    }\n\n    //Add all transitions\n    let edge, from, to, read, labels, flag;\n    for(let transition of machine.getTransitions())\n    {\n      from = stateMap.get(transition.getSourceState());\n      to = stateMap.get(transition.getDestinationState());\n      read = [];\n      for(const symbol of transition.getSymbols())\n      {\n        if (symbol === EMPTY_SYMBOL)\n        {\n          read.push(EMPTY_CHAR);\n        }\n        else\n        {\n          read.push(symbol);\n        }\n      }\n      edge = graph.createEdge(from, to);\n      edge.setEdgeLabel(read.join(SYMBOL_SEPARATOR));\n      const formattedEdge = graph.formatEdge(edge);\n      if (edge != formattedEdge) graph.deleteEdge(edge);\n    }\n\n    //Set start state\n    const startState = machine.getStartState();\n    graph.setStartNode(stateMap.get(startState));\n\n    //Auto layout graph\n    GraphLayout.applyLayout(graph);\n  }\n\n  convertMachineTo(machineType)\n  {\n    const currentMachineType = this.getMachineType();\n\n    //Already converted machine...\n    if (currentMachineType === machineType) return;\n\n    if (machineType == \"DFA\" && currentMachineType == \"NFA\")\n    {\n      const result = convertToDFA(this.getMachineBuilder().getMachine());\n      this.setGraphToMachine(this.graphController.getGraph(), result);\n      this.setMachineType(machineType);\n    }\n    else if (machineType == \"NFA\" && currentMachineType == \"DFA\")\n    {\n      this.changeMachineTo(machineType);\n    }\n    else\n    {\n      throw new Error(\"Conversion scheme between \\'\" + currentMachineType + \"\\' to \\'\" + machineType + \"\\' is not supported\");\n    }\n  }\n\n  invertMachine()\n  {\n    const machine = this.getMachineBuilder().getMachine();\n    const result = invertDFA(machine, machine);\n\n    //Update final states\n    for(const state of result.getStates())\n    {\n      const src = state.getSource();\n      src.setNodeAccept(machine.isFinalState(state));\n    }\n  }\n\n  getUnreachableNodes()\n  {\n    const graphController = this.graphController;\n    const graph = graphController.getGraph();\n    if (graph.getNodeCount() <= 1) return [];\n\n    const edges = graph.getEdges();\n    const nodes = graph.getNodes().slice();\n    const startNode = nodes.shift();\n    let nextNodes = [];\n    nextNodes.push(startNode);\n\n    while(nextNodes.length > 0)\n    {\n      const node = nextNodes.pop();\n      for(const edge of edges)\n      {\n        if (edge.getSourceNode() === node)\n        {\n          const i = nodes.indexOf(edge.getDestinationNode());\n          if (i >= 0)\n          {\n            const nextNode = nodes.splice(i, 1)[0];\n            nextNodes.push(nextNode);\n          }\n        }\n      }\n    }\n\n    return nodes;\n  }\n\n  getStates()\n  {\n    return this._machineBuilder.getMachine().getStates();\n  }\n\n  countStates()\n  {\n    return this._machineBuilder.getMachine().getStateCount();\n  }\n\n  getFinalStates()\n  {\n    return this._machineBuilder.getMachine().getFinalStates();\n  }\n\n  getTransitions()\n  {\n    return this._machineBuilder.getMachine().getTransitions();\n  }\n\n  getAlphabet()\n  {\n    const machine = this._machineBuilder.getMachine();\n    return Array.from(machine.getAlphabet());\n  }\n\n  isUsedSymbol(symbol)\n  {\n    return !this.isCustomSymbol(symbol);\n  }\n\n  createSymbol(symbol)\n  {\n    this.addCustomSymbol(symbol);\n  }\n\n  deleteSymbol(symbol)\n  {\n    let edge = null;\n    let index = null;\n    let result = null;\n    const targets = [];\n\n    const graph = this.graphController.getGraph();\n    for(let i = graph.getEdges().length - 1; i >= 0; --i)\n    {\n      edge = graph.getEdges()[i];\n      index = edge.getEdgeLabel().indexOf(symbol);\n      if (index >= 0)\n      {\n        result = edge.getEdgeLabel().substring(0, index) + edge.getEdgeLabel().substring(index + 1);\n        if (result.length > 0)\n        {\n          edge.setEdgeLabel(result);\n        }\n        else\n        {\n          edge.setEdgeLabel(\"\");\n          graph.deleteEdge(edge);\n        }\n        targets.push(edge);\n      }\n    }\n\n    if (targets.length <= 0)\n    {\n      this.getMachineBuilder().removeCustomSymbol(symbol);\n    }\n  }\n\n  renameSymbol(prevSymbol, nextSymbol)\n  {\n    let edge = null;\n    let result = null;\n    const targets = [];\n\n    const graph = this.graphController.getGraph();\n    const length = graph.getEdges().length;\n    for(let i = 0; i < length; ++i)\n    {\n      edge = graph.getEdges()[i];\n      let result = edge.getEdgeLabel().replace(prevSymbol, nextSymbol);\n      if (result != edge.getEdgeLabel())\n      {\n        targets.push(edge);\n      }\n      edge.setEdgeLabel(result);\n    }\n\n    if (targets.length <= 0)\n    {\n      this.getMachineBuilder().renameCustomSymbol(prevSymbol, nextSymbol);\n    }\n  }\n\n  getCustomSymbols()\n  {\n    return Array.from(this._machineBuilder.getMachine().getCustomSymbols());\n  }\n\n  isCustomSymbol(symbol)\n  {\n    return this._machineBuilder.isCustomSymbol(symbol);\n  }\n\n  addCustomSymbol(symbol)\n  {\n    this._machineBuilder.getMachine().setCustomSymbol(symbol);\n  }\n\n  clearCustomSymbols()\n  {\n    this._machineBuilder.getMachine().clearCustomSymbols();\n  }\n}\n\nexport default MachineController;\n","import React from 'react';\n\nconst RETURN_FOCUS_DELAY = 50;\n\nclass PatternInputButton extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.ref = null;\n\n    this._timeout = null;\n\n    this.onMouseDown = this.onMouseDown.bind(this);\n    this.onAnyMouseUp = this.onAnyMouseUp.bind(this);\n  }\n\n  onMouseDown(e)\n  {\n    const parent = this.props.parent;\n    if (parent.ignoreBlur(true))\n    {\n      document.addEventListener(\"mouseup\", this.onAnyMouseUp);\n    }\n\n    if (this.props.onClick)\n    {\n      this.props.onClick(e, this);\n    }\n  }\n\n  onAnyMouseUp()\n  {\n    document.removeEventListener(\"mouseup\", this.onAnyMouseUp);\n\n    if (this._timeout) clearTimeout(this._timeout);\n    this._timeout = setTimeout(() => {\n      this._timeout = null;\n\n      const parent = this.props.parent;\n      parent.ignoreBlur(false);\n\n      if (document.activeElement === this.ref)\n      {\n        parent.focus(false);\n      }\n      else if (document.activeElement !== this.props.parent.inputElement)\n      {\n        parent.onBlur();\n      }\n    }, RETURN_FOCUS_DELAY);\n  }\n\n  //Override\n  render()\n  {\n    return (\n      <button ref={ref=>this.ref=ref}\n        id={this.props.id}\n        className={this.props.className}\n        style={this.props.style}\n        title={this.props.title}\n        onMouseDown={this.onMouseDown}>\n        {this.props.title}\n      </button>\n    );\n  }\n}\n\nexport default PatternInputButton;\n","import React from 'react';\n\nclass Icon extends React.Component\n{\n  constructor(props) { super(props); }\n\n  //Override\n  render()\n  {\n    return (\n      <svg id={this.props.id} className={this.props.className} style={this.props.style}\n      xmlns=\"http://www.w3.org/2000/svg\"\n      width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n        <path d=\"M12 7.77L18.39 18H5.61L12 7.77M12 4L2 20h20L12 4z\"/>\n      </svg>\n    );\n  }\n}\nexport default Icon;\n","import AbstractGraphExporter from 'manager/export/AbstractGraphExporter.js';\n\nimport { JSON as JSONGraphParser } from 'modules/fsa/graph/FSAGraphParser.js';\nimport { downloadText } from 'util/Downloader.js';\n\nimport JSONFileIcon from 'experimental/iconset/flat/JSONFileIcon.js';\n\nclass FSAGraphExporter extends AbstractGraphExporter\n{\n  constructor() { super(); }\n\n  fromJSON(data, module)\n  {\n    const graphController = module.getGraphController();\n    const machineController = module.getMachineController();\n    const graph = graphController.getGraph();\n\n    const metadata = '_metadata' in data ? data['_metadata'] : {};\n    const newGraph = JSONGraphParser.parse(data.graphData, graph);\n\n    //HACK: this should be calculated elsewhere\n    const machineData = data.machineData;\n    const machineName = machineData.name;\n    if (machineName) module.getApp().getSession().setProjectName(machineName);\n    const machineType = machineData.type;\n    if (machineType) machineController.setMachineType(machineType);\n    const customSymbols = machineData.symbols;\n    if (customSymbols && Array.isArray(customSymbols))\n    {\n      machineController.clearCustomSymbols();\n      for(const symbol of customSymbols)\n      {\n        machineController.addCustomSymbol(symbol);\n      }\n    }\n    const statePrefix = machineData.statePrefix;\n    if (statePrefix)\n    {\n      graphController.getGraphLabeler().setDefaultNodeLabelPrefix(statePrefix);\n    }\n\n    return newGraph;\n  }\n\n  toJSON(graphData, module)\n  {\n    const graphController = module.getGraphController();\n    const machineController = module.getMachineController();\n\n    const dst = {};\n    dst[\"_metadata\"] = {\n      module: module.getModuleName(),\n      version: process.env.VERSION + \":\" + module.getModuleVersion(),\n      timestamp: new Date().toString()\n    };\n    dst[\"graphData\"] = graphData;\n    dst[\"machineData\"] = {\n      name: module.getApp().getSession().getProjectName(),\n      type: machineController.getMachineType(),\n      symbols: machineController.getCustomSymbols(),\n      statePrefix: graphController.getGraphLabeler().getDefaultNodeLabelPrefix()\n    };\n    return dst;\n  }\n\n  //Override\n  importFromData(data, module)\n  {\n    this.fromJSON(data, module);\n  }\n\n  //Override\n  exportToData(module)\n  {\n    const graph = module.getGraphController().getGraph();\n    const graphData = JSONGraphParser.objectify(graph);\n    const result = this.toJSON(graphData, module);\n    return result;\n  }\n\n  //Override\n  doesSupportData()\n  {\n    return true;\n  }\n\n  //Override\n  importFromFile(fileBlob, module)\n  {\n    return new Promise((resolve, reject) => {\n      const filename = fileBlob.name;\n      if (!filename.endsWith(this.getFileType()))\n      {\n        throw new Error(\"Trying to import invalid file type for \\'\" + this.getFileType() + \"\\': \" + filename);\n      }\n\n      const reader = new FileReader();\n      reader.onload = e => {\n        const graphController = module.getGraphController();\n        const machineController = module.getMachineController();\n        const data = e.target.result;\n        const name = filename.substring(0, filename.length - this.getFileType().length - 1);\n        const graph = graphController.getGraph();\n        const prevGraphHash = graph.getHashCode(true);\n\n        //TODO: this should not be here, this should exist somewhere in graphController\n        if (!graph.isEmpty())\n        {\n          module.getApp().getUndoManager().captureEvent();\n        }\n\n        try\n        {\n          const jsonData = JSON.parse(data);\n\n          this.fromJSON(jsonData, module);\n\n          module.getApp().getSession().setProjectName(name);\n\n          resolve();\n        }\n        catch (e)\n        {\n          reader.abort();\n          reject(e);\n        }\n        finally\n        {\n          const nextGraphHash = graph.getHashCode(true);\n          if (prevGraphHash !== nextGraphHash)\n          {\n            module.getApp().getUndoManager().captureEvent();\n          }\n        }\n      };\n\n      reader.onerror = e => {\n        reject(new Error(\"Unable to import file: \" + e.target.error.code));\n      }\n\n      reader.readAsText(fileBlob);\n    });\n  }\n\n  //Override\n  exportToFile(filename, module)\n  {\n    const graph = module.getGraphController().getGraph();\n    const graphData = JSONGraphParser.objectify(graph);\n    const dst = this.toJSON(graphData, module);\n    const jsonString = JSON.stringify(dst);\n    downloadText(filename + '.' + this.getFileType(), jsonString);\n  }\n\n  //Override\n  doesSupportFile()\n  {\n    return true;\n  }\n\n  //Override\n  canImport(module)\n  {\n    return true;\n  }\n\n  //Override\n  canExport(module)\n  {\n    return !module.getGraphController().getGraph().isEmpty();\n  }\n\n  //Override\n  getTitle()\n  {\n    return I18N.toString(\"file.export.machine.hint\");\n  }\n\n  //Override\n  getLabel()\n  {\n    return I18N.toString(\"file.export.machine\");\n  }\n\n  //Override\n  getFileType()\n  {\n    return \"json\";\n  }\n\n  //Override\n  getIconClass()\n  {\n    return JSONFileIcon;\n  }\n}\n\nexport default FSAGraphExporter;\n","import React from 'react';\n\nclass Icon extends React.Component\n{\n  constructor(props) { super(props); }\n\n  //Override\n  render()\n  {\n    return (\n      <svg id={this.props.id} className={this.props.className} style={this.props.style}\n      xmlns=\"http://www.w3.org/2000/svg\"\n      width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n        <path d=\"M20 12l-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8 8-8z\"/>\n      </svg>\n    );\n  }\n}\nexport default Icon;\n","import React from 'react';\nimport Style from './TapeWidget.css';\n\nimport DownArrowIcon from 'experimental/iconset/DownArrowIcon.js';\n\nconst TAPE_INFINITE_LEFT = true;\nconst TAPE_INFINITE_RIGHT = true;\n\nclass TapeWidget extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.onTapeStepBackward = this.onTapeStepBackward.bind(this);\n    this.onTapeStepForward = this.onTapeStepForward.bind(this);\n    this.onTapeFinish = this.onTapeFinish.bind(this);\n    this.onTapeReset = this.onTapeReset.bind(this);\n    this.onTapeSkipForward = this.onTapeSkipForward.bind(this);\n    this.onTapeSkipBackward = this.onTapeSkipBackward.bind(this);\n    this.onTapeStop = this.onTapeStop.bind(this);\n  }\n\n  onTapeStepBackward(e)\n  {\n    const tapeContext = this.props.value;\n    tapeContext.stepBackward();\n  }\n\n  onTapeStepForward(e)\n  {\n    const tapeContext = this.props.value;\n    tapeContext.stepForward();\n  }\n\n  onTapeSkipForward(e)\n  {\n  }\n\n  onTapeSkipBackward(e)\n  {\n  }\n\n  onTapeReset(e)\n  {\n    const tapeContext = this.props.value;\n    tapeContext.reset();\n  }\n\n  onTapeFinish(e)\n  {\n    const tapeContext = this.props.value;\n    tapeContext.finish();\n  }\n\n  onTapeStop(e)\n  {\n    const tapeContext = this.props.value;\n    tapeContext.stop();\n  }\n\n  //Override\n  render()\n  {\n    const showTransitionStates = true;\n    const tapeContext = this.props.value;\n    const tapeIndex = tapeContext ? tapeContext.getCurrentTapeIndex() : -1;\n\n    if (!tapeContext) return null;\n\n    return (\n      <div id={this.props.id}\n        className={Style.tape_container +\n        \" \" + this.props.className}\n        style={this.props.style}>\n\n        <div className={Style.tape_control_tray}>\n          <button onClick={this.onTapeStepBackward}>BACK</button>\n          <button onClick={this.onTapeStepForward}>STEP</button>\n          <button onClick={this.onTapeReset}>RESET</button>\n          <button onClick={this.onTapeFinish}>TO END</button>\n        </div>\n\n        <div className={Style.tape_control_tray}>\n          <button onClick={this.onTapeSkipForward}>SKIP TO NEXT</button>\n          <button onClick={this.onTapeSkipBackward}>SKIP TO PREV</button>\n          <button onClick={this.onTapeStop}>STOP</button>\n        </div>\n\n        <div className={\"tape-row\"}>\n\n          {TAPE_INFINITE_LEFT && tapeContext.isTapeLeftInfinite() &&\n            <div className=\"tape-row-entry infinite\">\n              <span className=\"tape-row-states\"></span>\n              <label className=\"tape-row-symbol\">{\"...\"}</label>\n            </div>}\n\n          <DownArrowIcon\n            className=\"tape-pointer\"\n            style={{opacity: tapeIndex < 0 ? 0 : 1, left: tapeIndex + \"em\"}}/>\n\n          {tapeContext.getTapeInput().map((e, i) => {\n            let active = false;\n            let activeRead = false;\n            active = tapeIndex === i;\n            activeRead = tapeIndex === i - 1;\n            /*\n            const currentIndex = Math.floor(tapeIndex / 2);\n            if (currentIndex === i)\n            {\n              //It's the current index...\n              active = tapeIndex % 2 === 1;\n              activeRead = tapeIndex % 2 === 0;\n            }\n            else if (currentIndex === i + 1)\n            {\n              //It's the previous index...\n              active = tapeIndex % 2 === 0;\n            }\n            */\n\n            const sourceStates = tapeContext.getTapeSourceStatesByIndex(i);\n            const disabled = sourceStates === null;\n            return (\n              <div key={e + \":\" + i} className={\"tape-row-entry\" +\n                (active ? \" active \" : \"\") +\n                (activeRead ? \" active-read \" : \"\") +\n                (disabled ? \" disabled \" : \"\")}\n                onClick={(e) => (!disabled ? tapeContext.setCurrentTapeIndex(i) : null)}>\n                {showTransitionStates &&\n                  sourceStates &&\n                  <span className=\"tape-row-states\">\n                    {sourceStates.map(sourceState => {\n                      return (\n                        <label key={sourceState.getGraphElementID()}>\n                          {sourceState.getNodeLabel()}\n                        </label>\n                      );\n                    })}\n                  </span>}\n                <label className=\"tape-row-symbol\">\n                  {e}\n                </label>\n              </div>\n            );\n          })}\n\n          {TAPE_INFINITE_RIGHT && tapeContext.isTapeRightInfinite() &&\n            <div className=\"tape-row-entry infinite\">\n              <span className=\"tape-row-states\"></span>\n              <label className=\"tape-row-symbol\">{\"...\"}</label>\n            </div>}\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default TapeWidget;\n"],"sourceRoot":""}