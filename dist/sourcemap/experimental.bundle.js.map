{"version":3,"sources":["webpack:///./src/app/experimental/components/IconButton.js","webpack:///./src/app/experimental/panels/PanelContainer.js","webpack:///./src/app/session/manager/notification/components/DefaultNotificationLayout.js","webpack:///./src/app/experimental/iconset/TinyDownIcon.js","webpack:///./src/app/experimental/iconset/TinyUpIcon.js","webpack:///./src/app/experimental/panels/PanelSection.js","webpack:///./src/app/session/manager/notification/Notification.js","webpack:///./src/app/session/manager/notification/NotificationManager.js","webpack:///./src/app/util/input/AbstractInputHandler.js","webpack:///./src/app/session/manager/RenderManager.js","webpack:///./src/app/experimental/panels/PanelSwitch.js","webpack:///./src/app/experimental/iconset/UploadIcon.js","webpack:///./src/app/experimental/components/IconUploadButton.js","webpack:///./src/app/experimental/iconset/DownloadIcon.js","webpack:///./src/app/experimental/iconset/EditPencilIcon.js","webpack:///./src/app/session/manager/hotkey/HotKeyManager.js","webpack:///./src/app/experimental/iconset/ExpandDownIcon.js","webpack:///./src/app/experimental/drawer/DrawerView.js","webpack:///./src/app/experimental/toolbar/ToolbarButton.js","webpack:///./src/app/experimental/iconset/OfflineIcon.js","webpack:///./src/app/experimental/toolbar/ToolbarTitle.js","webpack:///./src/app/experimental/iconset/MenuIcon.js","webpack:///./src/app/experimental/toolbar/ToolbarView.js","webpack:///./src/app/experimental/viewport/ViewportView.js","webpack:///./src/app/experimental/tooltip/TooltipView.js","webpack:///./src/app/experimental/components/UploadDropZone.js","webpack:///./src/app/util/input/InputPointer.js","webpack:///./src/app/util/input/ViewportAdapter.js","webpack:///./src/app/util/input/InputAdapter.js","webpack:///./src/app/util/input/components/ViewportComponent.js","webpack:///./src/app/session/manager/notification/components/NotificationView.js","webpack:///./src/app/experimental/menus/export/ExportPanel.js","webpack:///./src/app/util/storage/AutoSave.js","webpack:///./src/app/util/storage/LocalStorage.js","webpack:///./src/app/experimental/panels/PanelButton.js","webpack:///./src/app/experimental/menus/option/PreviewView.js","webpack:///./src/app/experimental/menus/option/OptionPanel.js","webpack:///./src/app/experimental/menus/language/LanguagePanel.js","webpack:///./src/app/experimental/menus/moduleloader/ModuleLoaderPanel.js","webpack:///./src/app/experimental/toolbar/ToolbarDivider.js","webpack:///./src/app/experimental/toolbar/ToolbarUploadButton.js","webpack:///./src/app/experimental/iconset/PageEmptyIcon.js","webpack:///./src/app/experimental/iconset/UndoIcon.js","webpack:///./src/app/experimental/iconset/RedoIcon.js","webpack:///./src/app/experimental/iconset/BugIcon.js","webpack:///./src/app/experimental/iconset/WorldIcon.js","webpack:///./src/app/experimental/iconset/HelpIcon.js","webpack:///./src/app/experimental/iconset/SettingsIcon.js","webpack:///./src/app/util/storage/AbstractAutoSaveHandler.js","webpack:///./src/app/experimental/AppSaver.js","webpack:///./src/app/experimental/ColorSaver.js","webpack:///./src/app/session/Session.js","webpack:///./src/app/util/URLHelper.js","webpack:///./src/app/session/manager/export/ExportManager.js","webpack:///./src/app/session/manager/DrawerManager.js","webpack:///./src/app/session/manager/MenuManager.js","webpack:///./src/app/session/manager/ViewportManager.js","webpack:///./src/app/session/manager/hotkey/HotKeyView.js","webpack:///./src/app/session/manager/undo/UndoManager.js","webpack:///./src/app/session/manager/TooltipManager.js","webpack:///./src/app/experimental/App.js"],"names":["IconButton","props","_classCallCheck","this","_possibleConstructorReturn","_getPrototypeOf","call","React","Component","title","showButtonLabel","SHOW_LABEL","react__WEBPACK_IMPORTED_MODULE_0___default","a","createElement","id","className","Style","icon_button","style","disabled","onClick","children","PanelContainer","panel_container","panel_title","panel_content","panel_bottom","STYLE_TYPE_DEFAULT","STYLE_TYPE_WARNING","STYLE_TYPE_ERROR","STYLE_TYPE_SUCCESS","DefaultNotificationLayout","message","notification","notification_container","styleType","split","map","e","i","key","close","I18N","toString","Icon","react_default","xmlns","width","height","viewBox","d","TinyUpIcon_classCallCheck","TinyUpIcon_possibleConstructorReturn","TinyUpIcon_getPrototypeOf","PanelSection","_this","PanelSection_classCallCheck","PanelSection_getPrototypeOf","state","open","initial","bind","PanelSection_assertThisInitialized","setState","prev","isOpen","isDisabled","Children","count","isFull","full","section_container","section_header","TinyUpIcon","TinyDownIcon","section_content_container","section_content","Notification","notificationManager","layoutID","tags","_notificationManager","_message","_layoutID","_tags","_props","_id","guid","removeNotification","tag","includes","WARNING_LAYOUT_ID","ERROR_LAYOUT_ID","SUCCESS_LAYOUT_ID","NotificationManager","NotificationManager_classCallCheck","_layouts","Map","_notifications","notificationLayout","set","delete","arguments","length","undefined","clearNotifications","push","Array","isArray","flag","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Symbol","iterator","next","done","value","hasTag","err","return","splice","pop","indexOf","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","session","registerNotificationLayout","_extends","has","get","AbstractInputHandler","pointer","zoomValue","prevValue","RENDER_LAYER_WORKSPACE","RENDER_LAYER_WORKSPACE_OVERLAY","RENDER_LAYER_VIEWPORT","RENDER_LAYER_VIEWPORT_OVERLAY","RenderManager","_renderMapping","layerID","rendererClass","clear","PanelSwitch","Error","checked","onChange","switch_container","panel_switch","type","switch_slider","switch_label","htmlFor","IconUploadButton","onFileUpload","_assertThisInitialized","files","target","onUpload","accept","_IconButton_js__WEBPACK_IMPORTED_MODULE_2__","upload_button","name","upload_input","CTRL_KEY","SHIFT_KEY","HotKeyManager","_hotkeys","_cachedEvent","ctrlKey","metaKey","altKey","shiftKey","code","_prevHotKey","_repeatCount","_enabled","_altHotkey","onKeyDown","onKeyUp","keys","callback","ctrlIndex","metaIndex","altIndex","shiftIndex","charKey","ctrl","alt","shift","result","localizedKeys","unshift","window","addEventListener","removeEventListener","enabled","hotkey","matchesHotKeyEvent","dst","event","eventCtrl","eventAlt","eventShift","eventKey","repeat","captureKeyEvent","findMatchingHotKey","preventDefault","stopPropagation","isKeyUp","DRAWER_WIDTH_CSSVAR","DRAWER_MIN_WIDTH","DrawerView","DrawerView_classCallCheck","DrawerView_getPrototypeOf","ref","drawerElement","tabIndex","soloClass","viewportColor","_handlingGrab","_handlingResize","_isfull","_hasintent","_prevWidth","_resizeTimeout","_resizeEndTimeout","_sideways","onDrawerHandleGrab","DrawerView_assertThisInitialized","onDrawerHandleRelease","onDrawerHandleMove","onDrawerExpand","onWindowResize","fullscreen","setDrawerWidth","panels","color","hasIntent","drawerSide","side","drawerOffsetY","getBoundingClientRect","top","documentSize","document","documentElement","clientHeight","clientWidth","minSize","getCSSDrawerWidth","setProperty","toggleDrawer","_this2","setTimeout","clearTimeout","isDrawerSideBottom","clientY","clientX","Math","abs","_this3","drawerPanels","drawerDirection","direction","shouldDrawerHide","hide","drawerSoloClass","isDrawerOpen","shouldDrawerBarSideways","showDrawerHandle","shouldDrawerOpenFull","shouldHideDrawerContent","showDrawerTabs","viewportStyle","app_content","app_viewport","app_drawer","drawer_handle","onMouseDown","drawer_content","drawer_content_bar","drawer_tab_expander","ExpandDownIcon","current","isCurrentTab","drawer_tab","setCurrentTab","drawer_content_panel_container","drawer_content_panel","ComponentClass","drawer_panel_container","drawer_panel","panelProps","drawer","parseInt","getComputedStyle","getPropertyValue","replace","ToolbarButton","ToolbarButton_classCallCheck","ToolbarButton_possibleConstructorReturn","ToolbarButton_getPrototypeOf","IconClass","icon","toolbar_button","OfflineIcon_classCallCheck","OfflineIcon_possibleConstructorReturn","OfflineIcon_getPrototypeOf","ToolbarTitle","ToolbarTitle_classCallCheck","ToolbarTitle_getPrototypeOf","inputElement","onSubmit","ToolbarTitle_assertThisInitialized","resetValue","newValue","offline","navigator","onLine","title_container","title_input_container","FormattedInput","defaultValue","OfflineIcon","offline_status","title_subtitle","MenuIcon_classCallCheck","MenuIcon_possibleConstructorReturn","MenuIcon_getPrototypeOf","TOOLBAR_DEFAULT_MENU_INDEX","ToolbarView","ToolbarView_classCallCheck","ToolbarView_getPrototypeOf","toolbarElement","menuIndex","onBarExpand","ToolbarView_assertThisInitialized","onTitleChange","menus","setCurrentMenu","toggleBar","setProjectName","child","containerOnly","toolbarMenus","toolbarMenuIndex","ToolbarMenu","showCustomToolbarMenu","onTitleClick","hasButtons","isBarOpen","shouldBarHide","showBarExpander","app_bar","bar_menu","menu_container","ToolbarView_extends","menuProps","toolbar","menu_button_container","renderMenuButtons","bar_toolbar","experimental_toolbar_ToolbarTitle","toolbar_title","getProjectName","toolbar_button_container","renderToolbarButtons","toolbar_expander","MenuIcon","VIEWPORT_DEFAULT_VIEW_INDEX","ViewportView","ViewportView_classCallCheck","ViewportView_possibleConstructorReturn","ViewportView_getPrototypeOf","viewIndex","views","viewportViews","viewportViewIndex","ViewportViewPane","view_container","ViewportView_extends","viewProps","viewport","ONESHOT_MODE","TooltipView","TooltipView_classCallCheck","TooltipView_possibleConstructorReturn","TooltipView_getPrototypeOf","_tooltipTimeout","index","mode","visible","nextIndex","floor","random","setTooltipIndex","tooltipIndex","updateTooltip","tooltip_container","opacity","UploadDropZone","UploadDropZone_classCallCheck","UploadDropZone_getPrototypeOf","_waiting","onDragEnter","UploadDropZone_assertThisInitialized","onDragLeave","onFileDrop","dataTransfer","fileBlob","items","dataItems","file","kind","getAsFile","dataFiles","clearData","isWaitingForFile","upload_container","UploadIcon","upload_icon","only","InputPointer","adapter","element","InputPointer_classCallCheck","_adapter","_element","_viewport","_active","_x","_y","_inputpos","x","y","pos","dx","dy","ViewportAdapter","ViewportAdapter_classCallCheck","_offsetX","_offsetY","_nextOffsetX","_nextOffsetY","_offsetDamping","_scaleFactor","_minScale","_maxScale","scale","damping","ctm","getScreenCTM","f","min","max","dscale","LONG_TAP_TICKS","DOUBLE_TAP_TICKS","SCROLL_SENSITIVITY","CURSOR_RADIUS_SQU","CURSOR_RADIUS","DRAGGING_BUFFER_SQU","DRAGGING_BUFFER","InputAdapter","InputAdapter_classCallCheck","_handlers","_activeDragHandler","_cursor","_mousemove","_mouseup","_touchmove","_touchend","_timer","_pointer","_dragging","_altinput","_holdInputDelay","_dblInputDelay","_scrollSensitivity","_minTapRadius","_draggingRadiusSqu","_prevEmptyInput","_prevEmptyTime","_prevEmptyX","_prevEmptyY","onContextMenu","onMouseMove","onTouchStart","onWheel","onMouseDownThenMove","onMouseDownThenUp","onTouchStartThenMove","onTouchStartThenEnd","onDelayedInputDown","handler","SVGElement","setElement","onTouchMove","update","eventName","_len","eventArgs","_key","apply","hasInputHandlers","cursor","activeElement","blur","focus","button","onInputDown","mouse","transformScreenToView","setPosition","handleEvent","cancelInputEvent","onInputMove","onInputUp","changedTouches","touch","deltaY","getScale","setScale","beginInput","onDragMove","getDistanceSquToInitial","timer","onDragStop","dist","dt","Date","now","endInput","isActive","SMOOTH_OFFSET_DAMPING","MIN_SCALE","MAX_SCALE","ViewportComponent","ViewportComponent_classCallCheck","ViewportComponent_possibleConstructorReturn","ViewportComponent_getPrototypeOf","_ref","createRef","_inputAdapter","getViewport","setMinScale","setMaxScale","setOffsetDamping","inputHandler","addInputHandler","initialize","terminate","getOffsetX","getOffsetY","baseViewSize","viewSize","Number","MIN_VALUE","halfViewSize","getSVGViewBoxString","transform","getSVGTransformString","viewport_component","NotificationView","NotificationView_classCallCheck","NotificationView_possibleConstructorReturn","NotificationView_getPrototypeOf","notifications_container","getNotifications","getLayoutID","NotificationLayout","getNotificationLayout","NotificationView_extends","getID","getMessage","getProps","ExportPanel","ExportPanel_classCallCheck","ExportPanel_possibleConstructorReturn","ExportPanel_getPrototypeOf","exporter","doesSupportFile","getIconClass","getLabel","getFileType","panel_button","getApp","getExportManager","tryExportToFile","exporters","getExporters","renderExporterButton","AutoSave","_init","_interval","_storage","dataStorage","isSupported","onAutoSaveLoad","onIntervalUpdate","setInterval","destroy","clearInterval","onAutoSaveUnload","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","onAutoSaveUpdate","registerHandler","unregisterHandler","load","_iteratorNormalCompletion4","_didIteratorError4","_iteratorError4","_step4","_iterator4","unload","_iteratorNormalCompletion5","_didIteratorError5","_iteratorError5","_step5","_iterator5","LocalStorage","localStorage","setData","hidden","msHidden","webkitHidden","setItem","removeItem","getData","getItem","setDataAsObject","objectValue","Object","JSON","stringify","console","error","getDataAsObject","parse","PanelButton","PanelButton_classCallCheck","PanelButton_possibleConstructorReturn","PanelButton_getPrototypeOf","button_container","PreviewView","PreviewView_classCallCheck","PreviewView_possibleConstructorReturn","PreviewView_getPrototypeOf","preview_container","preview_app","preview_toolbar","preview_workspace","preview_viewport","preview_node","left","preview_notifications","preview_notification_info","preview_notification_error","preview_notification_warning","preview_notification_success","preview_drawer","SKIP_WELCOME_STORAGE_ID","DISABLE_EXIT_WARNING_STORAGE_ID","OptionPanel","OptionPanel_classCallCheck","OptionPanel_getPrototypeOf","theme","customTheme","skipWelcome","exitWarning","onChangeTheme","OptionPanel_assertThisInitialized","opts","getStyleOpts","prevTheme","getOptions","resetStyle","getCurrentModule","display","experimental_panels_PanelButton","getPropsByGroup","StyleInput","getOptionByProp","menus_option_PreviewView","confirm","alert","LanguagePanel","LanguagePanel_classCallCheck","LanguagePanel_possibleConstructorReturn","LanguagePanel_getPrototypeOf","localizedName","langFile","language_button","fetchLanguageFile","language_button_list","renderLanguageButton","ModuleLoaderPanel","ModuleLoaderPanel_classCallCheck","ModuleLoaderPanel_possibleConstructorReturn","ModuleLoaderPanel_getPrototypeOf","moduleKey","moduleInfo","useExperimental","isExperimental","currentModule","getModuleName","module_button","version","restartSession","module_button_list","Modules","renderModuleButton","ToolbarDivider","ToolbarDivider_classCallCheck","ToolbarDivider_possibleConstructorReturn","ToolbarDivider_getPrototypeOf","divider","ToolbarUploadButton","ToolbarUploadButton_classCallCheck","ToolbarUploadButton_possibleConstructorReturn","ToolbarUploadButton_getPrototypeOf","ToolbarButtonStyle","PageEmptyIcon_classCallCheck","PageEmptyIcon_possibleConstructorReturn","PageEmptyIcon_getPrototypeOf","UndoIcon_classCallCheck","UndoIcon_possibleConstructorReturn","UndoIcon_getPrototypeOf","RedoIcon_classCallCheck","RedoIcon_possibleConstructorReturn","RedoIcon_getPrototypeOf","BugIcon_classCallCheck","BugIcon_possibleConstructorReturn","BugIcon_getPrototypeOf","WorldIcon_classCallCheck","WorldIcon_possibleConstructorReturn","WorldIcon_getPrototypeOf","HelpIcon_classCallCheck","HelpIcon_possibleConstructorReturn","HelpIcon_getPrototypeOf","SettingsIcon_classCallCheck","SettingsIcon_possibleConstructorReturn","SettingsIcon_getPrototypeOf","AbstractAutoSaveHandler","AppSaver","app","AppSaver_classCallCheck","AppSaver_possibleConstructorReturn","AppSaver_getPrototypeOf","_app","getSession","currentModuleName","data","getDefaultExporter","importFromData","getUndoManager","captureEvent","exportToData","ColorSaver","styleOpts","ColorSaver_classCallCheck","ColorSaver_possibleConstructorReturn","ColorSaver_getPrototypeOf","_styleOpts","root","getElementById","activeColor","opt","ColorHelper","prop","setStyle","liteColor","inverted","darkColor","registerStyleOption","isDefaultStyle","getStyle","MODULE_TIMEOUT","Session","Session_classCallCheck","_name","_module","_moduleClass","_sessionID","_listeners","listener","moduleName","log","urlParams","url","parser","href","vars","search","substring","pair","decodeURIComponent","URLHelper","location","fetch","ModuleClass","onSessionStart","stopSession","startSession","onSessionStop","string","innerHTML","separator","trim","ExportManager","ExportManager_classCallCheck","_exporters","File","Promise","reject","fileName","_loop","canImport","endsWith","catch","importFromFile","exportToFile","DrawerManager","DrawerManager_classCallCheck","_panelClasses","_panelProps","panelClass","MenuManager","MenuManager_classCallCheck","getToolbarComponent","closeBar","ViewportManager","ViewportManager_classCallCheck","_viewClasses","_viewProps","viewClass","HotKeyView","HotKeyView_classCallCheck","HotKeyView_possibleConstructorReturn","HotKeyView_getPrototypeOf","_cachedHotKeys","_cacheTimeout","hotKeyManager","showHotKeys","isEnabled","getCurrentlyPossibleHotKeys","useCount","getCurrentHotKeyRepeatCount","currentHotKey","getCurrentHotKey","hotkey_container","hotkey_label","hotkey_name","UndoManager","UndoManager_classCallCheck","history","offsetIndex","_handlerFactory","factory","args","captureEventAsHandler","eventHandler","canUndo","canRedo","applyUndo","applyRedo","TooltipManager","TooltipManager_classCallCheck","_tooltips","_transitionMode","transitionMode","tooltip","App","App_classCallCheck","App_getPrototypeOf","_workspace","_toolbar","_drawer","_labeleditor","StyleOptionRegistry","_colorSaver","_saver","App_assertThisInitialized","_undoManager","_hotKeyManager","_exportManager","_drawerManager","_menuManager","_viewportManager","_renderManager","_tooltipManager","_session","addListener","_mediaQuerySmallWidthList","matchMedia","_mediaQuerySmallHeightList","onModuleTitleClick","onToolbarClearButton","addPanelClass","registerAltHotKey","getWorkspaceComponent","getInputAdapter","updateSession","setEnabled","isDrawerFullscreen","renderers","sessionID","getSessionID","R","App_extends","constructor","currentModuleLocalizedName","getLocalizedModuleName","hasSmallWidth","matches","hasSmallHeight","isFullscreen","undoManager","exportManager","drawerManager","menuManager","viewportManager","renderManager","tooltipManager","drawerPanelClasses","getPanelClasses","drawerPanelProps","getPanelProps","menuPanelClasses","menuPanelProps","viewportViewClasses","getViewClasses","viewportViewProps","getViewProps","defaultExporter","workspaceRenderers","getRenderersByLayer","workspaceOverlayRenderers","viewportRenderers","viewportOverlayRenderers","app_container","experimental_toolbar_ToolbarView","experimental_toolbar_ToolbarButton","PageEmptyIcon","toolbar_ToolbarUploadButton","getImportFileTypes","join","tryImportFromFile","pushNotification","finally","UndoIcon","undo","RedoIcon","redo","DownloadIcon","canExport","experimental_toolbar_ToolbarDivider","BugIcon","WorldIcon","HelpIcon","SettingsIcon","EditPencilIcon","experimental_drawer_DrawerView","experimental_components_UploadDropZone","experimental_tooltip_TooltipView","getTransitionMode","getTooltips","input_components_ViewportComponent","renderRenderers","workspace","notification_components_NotificationView","manager_hotkey_HotKeyView","experimental_viewport_ViewportView","hot"],"mappings":"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","file":"experimental.bundle.a7fbbd3386f234b98602.js","sourcesContent":["import React from 'react';\nimport Style from './IconButton.css';\n\nclass IconButton extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  //Override\n  render()\n  {\n    const title = this.props.title;\n    const showButtonLabel = IconButton.SHOW_LABEL && title;\n\n    return (\n      <button id={this.props.id}\n        className={Style.icon_button +\n          (showButtonLabel ? \" hint \" : \"\") +\n          \" \" + this.props.className}\n        style={this.props.style}\n        title={title}\n        disabled={this.props.disabled}\n        onClick={this.props.onClick}>\n        {this.props.children}\n        <label>{title}</label>\n      </button>\n    );\n  }\n}\nIconButton.SHOW_LABEL = false;\n\nexport default IconButton;\n","import React from 'react';\nimport Style from './PanelContainer.css';\n\nclass PanelContainer extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n  \n  //Override\n  render()\n  {\n    const title = this.props.title;\n\n    return (\n      <div id={this.props.id}\n        className={Style.panel_container +\n          \" \" + this.props.className}\n        style={this.props.style}>\n        <div className={Style.panel_title}>\n          <h1>{title}</h1>\n        </div>\n        <div className={Style.panel_content}>\n          {this.props.children}\n        </div>\n        <div className={Style.panel_bottom}>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default PanelContainer;\n","import React from 'react';\nimport Style from './DefaultNotificationLayout.css';\n\nexport const STYLE_TYPE_DEFAULT = \"default\";\nexport const STYLE_TYPE_WARNING = \"warning\";\nexport const STYLE_TYPE_ERROR = \"error\";\nexport const STYLE_TYPE_SUCCESS = \"success\";\n\nclass DefaultNotificationLayout extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  //Override\n  render()\n  {\n    const message = this.props.message;\n    const notification = this.props.notification;\n\n    return (\n      <div id={this.props.id}\n        className={Style.notification_container +\n          \" \" + this.props.styleType +\n          \" \" + this.props.className}\n        style={this.props.style}>\n        {message &&\n          message.split('\\n').map((e, i) => <p key={e + \":\" + i}>{e}</p>)}\n        {this.props.children}\n        {notification &&\n          <button onClick={e => notification.close()}>\n            {I18N.toString(\"message.action.close\")}\n          </button>}\n      </div>\n    );\n  }\n}\n\nexport default DefaultNotificationLayout;\n","import React from 'react';\n\nclass Icon extends React.Component\n{\n  constructor(props) { super(props); }\n\n  //Override\n  render()\n  {\n    return (\n      <svg id={this.props.id} className={this.props.className} style={this.props.style}\n      xmlns=\"http://www.w3.org/2000/svg\"\n      width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n        <path d=\"M7 10l5 5 5-5z\"/>\n      </svg>\n    );\n  }\n}\nexport default Icon;\n","import React from 'react';\n\nclass Icon extends React.Component\n{\n  constructor(props) { super(props); }\n\n  //Override\n  render()\n  {\n    return (\n      <svg id={this.props.id} className={this.props.className} style={this.props.style}\n      xmlns=\"http://www.w3.org/2000/svg\"\n      width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n        <path d=\"M7 14l5-5 5 5z\"/>\n      </svg>\n    );\n  }\n}\nexport default Icon;\n","import React from 'react';\nimport Style from './PanelSection.css';\n\nimport IconButton from 'experimental/components/IconButton.js';\nimport TinyDownIcon from 'experimental/iconset/TinyDownIcon.js';\nimport TinyUpIcon from 'experimental/iconset/TinyUpIcon.js';\n\nclass PanelSection extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.state = {\n      open: props.initial || false\n    };\n\n    this.onClick = this.onClick.bind(this);\n  }\n\n  onClick(e)\n  {\n    this.setState((prev, props) => {\n      return {open: !prev.open};\n    })\n  }\n\n  //Override\n  componentDidUpdate()\n  {\n    if (this.state.open && this.props.disabled)\n    {\n      this.setState({open: false});\n    }\n  }\n\n  //Override\n  render()\n  {\n    const isOpen = this.state.open;\n    const isDisabled = this.props.disabled || React.Children.count(this.props.children) <= 0;\n    const isFull = this.props.full;\n    const title = this.props.title;\n    return (\n      <section id={this.props.id}\n        className={Style.section_container +\n          \" \" + this.props.className}\n        style={this.props.style}>\n        <IconButton className={Style.section_header}\n          title={title}\n          disabled={isDisabled}\n          onClick={this.onClick}>\n          {!isOpen ? <TinyDownIcon/> : <TinyUpIcon/>}\n        </IconButton>\n        <div className={Style.section_content_container +\n          (isOpen ? \" open \" : \"\") +\n          (isFull ? \" full \" : \"\")}>\n          <div className={Style.section_content}>\n            {this.props.children}\n          </div>\n        </div>\n      </section>\n    );\n  }\n}\n\nexport default PanelSection;\n","import {guid} from 'util/MathHelper.js';\n\nclass Notification\n{\n  constructor(notificationManager, message, layoutID, tags, props)\n  {\n    this._notificationManager = notificationManager;\n    this._message = message;\n    this._layoutID = layoutID;\n    this._tags = tags;\n    this._props = props;\n    this._id = guid();\n  }\n\n  close() { this._notificationManager.removeNotification(this); }\n  hasTag(tag) { return this._tags.includes(tag); }\n\n  getMessage() { return this._message; }\n  getLayoutID() { return this._layoutID; }\n  getTags() { return this._tags; }\n  getProps() { return this._props; }\n  getID() { return this._id; }\n  getNotificationManager() { return this._notificationManager; }\n}\n\nexport default Notification;\n","import React from 'react';\nimport Notification from './Notification.js';\n\nimport DefaultNotificationLayout, {\n  STYLE_TYPE_DEFAULT,\n  STYLE_TYPE_WARNING,\n  STYLE_TYPE_ERROR,\n  STYLE_TYPE_SUCCESS\n} from './components/DefaultNotificationLayout.js';\n\nexport const DEFAULT_LAYOUT_ID = \"default\";\nexport const WARNING_LAYOUT_ID = \"warning\";\nexport const ERROR_LAYOUT_ID = \"error\";\nexport const SUCCESS_LAYOUT_ID = \"success\";\n\nclass NotificationManager\n{\n  constructor()\n  {\n    this._layouts = new Map();\n    this._notifications = [];\n  }\n\n  registerNotificationLayout(layoutID, notificationLayout)\n  {\n    this._layouts.set(layoutID, notificationLayout);\n    return this;\n  }\n\n  unregisterNotificationLayout(layoutID)\n  {\n    this._layouts.delete(layoutID);\n    return this;\n  }\n\n  pushNotification(message, layoutID=null, tags=[], props={}, replace=true)\n  {\n    if (replace)\n    {\n      this.clearNotifications(tags);\n    }\n\n    const notification = new Notification(this, message, layoutID, tags, props);\n    this._notifications.push(notification);\n    return notification;\n  }\n\n  popNotification(tags=null)\n  {\n    if (this._notifications.length <= 0) return null;\n\n    if (Array.isArray(tags))\n    {\n      for(let i = this._notifications.length - 1; i >= 0; --i)\n      {\n        const notification = this._notifications[i];\n        let flag = true;\n        for(const tag of tags)\n        {\n          if (!notification.hasTag(tag))\n          {\n            flag = false;\n            break;\n          }\n        }\n        if (flag)\n        {\n          this._notifications.splice(i, 1);\n          return notification;\n        }\n      }\n    }\n    else if (typeof tags === 'string')\n    {\n      for(let i = 0, length = this._notifications.length; i < length; ++i)\n      {\n        const notification = this._notifications[i];\n        if (notification.hasTag(tags))\n        {\n          this._notifications.splice(i, 1);\n          return notification;\n        }\n      }\n    }\n    else\n    {\n      return this._notifications.pop();\n    }\n  }\n\n  removeNotification(notification)\n  {\n    const i = this._notifications.indexOf(notification);\n    if (i >= 0)\n    {\n      this._notifications.splice(i, 1);\n    }\n  }\n\n  clearNotifications(tags=null)\n  {\n    if (this._notifications.length <= 0) return;\n\n    if (Array.isArray(tags))\n    {\n      for(let i = this._notifications.length - 1; i >= 0; --i)\n      {\n        const notification = this._notifications[i];\n        let flag = true;\n        for(const tag of tags)\n        {\n          if (!notification.hasTag(tag))\n          {\n            flag = false;\n            break;\n          }\n        }\n        if (flag)\n        {\n          this._notifications.splice(i, 1);\n        }\n      }\n    }\n    else if (typeof tags === 'string')\n    {\n      for(let i = this._notifications.length - 1; i >= 0; --i)\n      {\n        const notification = this._notifications[i];\n        if (notification.hasTag(tags))\n        {\n          this._notifications.splice(i, 1);\n        }\n      }\n    }\n    else\n    {\n      this._notifications.length = 0;\n    }\n  }\n\n  //DuckType(SessionListener)\n  onSessionStart(session)\n  {\n    //Overwrite any changes to default notifications...\n    this.registerNotificationLayout(DEFAULT_LAYOUT_ID, props => <DefaultNotificationLayout styleType={STYLE_TYPE_DEFAULT} {...props}/>);\n    this.registerNotificationLayout(WARNING_LAYOUT_ID, props => <DefaultNotificationLayout styleType={STYLE_TYPE_WARNING} {...props}/>);\n    this.registerNotificationLayout(ERROR_LAYOUT_ID, props => <DefaultNotificationLayout styleType={STYLE_TYPE_ERROR} {...props}/>);\n    this.registerNotificationLayout(SUCCESS_LAYOUT_ID, props => <DefaultNotificationLayout styleType={STYLE_TYPE_SUCCESS} {...props}/>);\n  }\n\n  //DuckType(SessionListener)\n  onSessionStop(session)\n  {\n    this.clearNotifications();\n  }\n\n  hasNotificationLayout(layoutID)\n  {\n    return this._layouts.has(layoutID);\n  }\n\n  getNotificationLayout(layoutID)\n  {\n    return this._layouts.get(layoutID);\n  }\n\n  getNotifications()\n  {\n    return this._notifications;\n  }\n\n  isEmpty()\n  {\n    return this._notifications.length <= 0;\n  }\n}\n\nexport default NotificationManager;\n","/**\n * Used by InputAdapter to handle input event logic.\n */\nclass AbstractInputHandler\n{\n  constructor() {}\n\n  /**\n   * Called by InputAdapter before an InputEvent begins.\n   * Returns true if the event should be consumed. If consumed, the event will\n   * not begin.\n   */\n  onPreInputEvent(pointer) { return false; }\n\n  /**\n   * Called by InputAdapter when an InputEvent resolves and is not an Alt input.\n   * To handle events for Alt inputs, refer to onAltInputEvent().\n   * Returns true if the event should be consumed. If consumed, the event will\n   * not propagate to other trigger other events.\n   */\n  onInputEvent(pointer) { return false; }\n\n  /**\n   * Called by InputAdapter when an InputEvent resolves and is an Alt input.\n   * To handle events for non-Alt inputs, refer to onInputEvent().\n   * Returns true if the event should be consumed. If consumed, the event will\n   * not propagate to other trigger other events.\n   */\n  onAltInputEvent(pointer) { return false; }\n\n  /**\n   * Called by InputAdapter when a DblInputEvent resolves. The input is\n   * assumed by a non-Alt input, since only non-Alt inputs can trigger this\n   * event.\n   * Returns true if the event should be consumed. If consumed, the event will\n   * not propagate to other trigger other events.\n   */\n  onDblInputEvent(pointer) { return false; }\n\n  /**\n   * Called by InputAdapter when input movess. The input is called before drag\n   * logic.\n   * Returns true if the event should be consumed. If consumed, the event will\n   * not propagate to other trigger other events (i.e. dragging events).\n   */\n  onMoveInputEvent(pointer) { return false; }\n\n  /**\n   * Called by InputAdapter before a drag begins. The input could be either\n   * an Alt or non-Alt input.\n   * Returns true if the event should be consumed. If consumed, the event will\n   * not propagate to other trigger other events, nor continue the drag input.\n   */\n  onDragStart(pointer) { return false; }\n\n  /**\n   * Called by InputAdapter while dragging moves. The input could be either\n   * an Alt or non-Alt input.\n   * Will always be called after onDragStart() and will be followed by\n   * onDragStop() when complete.\n   */\n  onDragMove(pointer) {}\n\n  /**\n   * Called by InputAdapter after a drag ends. The input could be either an\n   * Alt or non-Alt input.\n   * Will always be called after onDragStart(). Although onDragMove may be\n   * called in-between, it is not guaranteed.\n   */\n  onDragStop(pointer) {}\n\n  /**\n   * Called by InputAdapter after an InputEvent ends.\n   */\n  onPostInputEvent(pointer) {}\n\n  /**\n   * Called by InputAdapter when zoom changes.\n   * Returns true if event is consumed (zoom will not be applied)\n   */\n  onZoomChange(pointer, zoomValue, prevValue)\n  {\n    return false;\n  }\n}\n\nexport default AbstractInputHandler;\n","export const RENDER_LAYER_WORKSPACE = \"workspace\";\nexport const RENDER_LAYER_WORKSPACE_OVERLAY = \"workspace-overlay\";\nexport const RENDER_LAYER_VIEWPORT = \"viewport\";\nexport const RENDER_LAYER_VIEWPORT_OVERLAY = \"viewport-overlay\";\n\nclass RenderManager\n{\n  constructor()\n  {\n    this._renderMapping = new Map();\n  }\n\n  addRenderer(layerID, rendererClass)\n  {\n    if (this._renderMapping.has(layerID))\n    {\n      this._renderMapping.get(layerID).push(rendererClass);\n    }\n    else\n    {\n      this._renderMapping.set(layerID, [rendererClass]);\n    }\n    return this;\n  }\n\n  //DuckType(SessionListener)\n  onSessionStart(session)\n  {\n\n  }\n\n  //DuckType(SessionListener)\n  onSessionStop(session)\n  {\n    this._renderMapping.clear();\n  }\n\n  getRenderersByLayer(layerID)\n  {\n    return this._renderMapping.get(layerID);\n  }\n}\n\nexport default RenderManager;\n","import React from 'react';\nimport Style from './PanelSwitch.css';\n\nclass PanelSwitch extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    if (!props.id) throw new Error(\"Must specify id\");\n  }\n\n  //Override\n  render()\n  {\n    const id = this.props.id;\n    const disabled = this.props.disabled;\n    const checked = this.props.checked;\n    const onChange = this.props.onChange;\n\n    return (\n      <div id={id}\n        className={Style.switch_container +\n          (disabled ? \" disabled \" : \"\") +\n          (checked ? \" active \" : \"\") +\n          \" \" + this.props.className}\n        style={this.props.style}>\n        <label className={Style.panel_switch}\n          style={this.props.style}>\n          <input type=\"checkbox\" id={id + \"-switch\"} checked={checked} onChange={onChange} disabled={disabled}/>\n          <div className={Style.switch_slider}></div>\n        </label>\n        <label className={Style.switch_label}\n          htmlFor={id + \"-switch\"}>\n          {this.props.title}\n        </label>\n      </div>\n    );\n  }\n}\n\nexport default PanelSwitch;\n","import React from 'react';\n\nclass Icon extends React.Component\n{\n  constructor(props) { super(props); }\n\n  //Override\n  render()\n  {\n    return (\n      <svg id={this.props.id} className={this.props.className} style={this.props.style}\n      xmlns=\"http://www.w3.org/2000/svg\"\n      width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n        <path d=\"M9,16V10H5L12,3L19,10H15V16H9M5,20V18H19V20H5Z\"/>\n      </svg>\n    );\n  }\n}\nexport default Icon;\n","import React from 'react';\nimport Style from './IconUploadButton.css';\n\nimport IconButton from './IconButton.js';\n\nclass IconUploadButton extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.onFileUpload = this.onFileUpload.bind(this);\n  }\n\n  onFileUpload(e)\n  {\n    const files = e.target.files;\n    if (files.length > 0)\n    {\n      if (this.props.onUpload) this.props.onUpload(files[0]);\n\n      //Makes sure you can upload the same file again.\n      e.target.value = \"\";\n    }\n  }\n\n  //Override\n  render()\n  {\n    const accept = this.props.accept;\n\n    return (\n      <IconButton id={this.props.id}\n        className={Style.upload_button +\n          \" \" + this.props.className}\n        style={this.props.style}\n        title={this.props.title}\n        disabled={this.props.disabled}>\n        <input type=\"file\" name=\"import\"\n          className={Style.upload_input}\n          disabled={this.props.disabled}\n          accept={accept}\n          onChange={this.onFileUpload}/>\n        {this.props.children}\n      </IconButton>\n    );\n  }\n}\n\nexport default IconUploadButton;\n","import React from 'react';\n\nclass Icon extends React.Component\n{\n  constructor(props) { super(props); }\n\n  //Override\n  render()\n  {\n    return (\n      <svg id={this.props.id} className={this.props.className} style={this.props.style}\n      xmlns=\"http://www.w3.org/2000/svg\"\n      width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n        <path d=\"M19 12v7H5v-7H3v7c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-7h-2zm-6 .67l2.59-2.58L17 11.5l-5 5-5-5 1.41-1.41L11 12.67V3h2z\"/>\n      </svg>\n    );\n  }\n}\nexport default Icon;\n","import React from 'react';\n\nclass Icon extends React.Component\n{\n  constructor(props) { super(props); }\n\n  //Override\n  render()\n  {\n    return (\n      <svg id={this.props.id} className={this.props.className} style={this.props.style}\n      xmlns=\"http://www.w3.org/2000/svg\"\n      width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n        <path d=\"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z\"/>\n      </svg>\n    );\n  }\n}\nexport default Icon;\n","export const CTRL_KEY = 'Control';\nexport const META_KEY = 'Meta';\nexport const ALT_KEY = 'Alt';\nexport const SHIFT_KEY = 'Shift';\n//NOTE: For more keys, refer to http://keycode.info/\n\nclass HotKeyManager\n{\n  constructor()\n  {\n    this._hotkeys = [];\n    this._cachedEvent = {\n      ctrlKey: false,\n      metaKey: false,\n      altKey: false,\n      shiftKey: false,\n      code: null\n    };\n    this._prevHotKey = null;\n    this._repeatCount = 0;\n    this._enabled = false;\n\n    this._altHotkey = null;\n\n    this.onKeyDown = this.onKeyDown.bind(this);\n    this.onKeyUp = this.onKeyUp.bind(this);\n  }\n\n  registerHotKey(name, keys, callback)\n  {\n    if (!Array.isArray(keys)) throw new Error(\"Must be an array of key codes\");\n    const ctrlIndex = keys.indexOf(CTRL_KEY);\n    if (ctrlIndex >= 0) keys.splice(ctrlIndex, 1);\n    const metaIndex = keys.indexOf(META_KEY);\n    if (metaIndex >= 0) keys.splice(metaIndex, 1);\n    const altIndex = keys.indexOf(ALT_KEY);\n    if (altIndex >= 0) keys.splice(altIndex, 1);\n    const shiftIndex = keys.indexOf(SHIFT_KEY);\n    if (shiftIndex >= 0) keys.splice(shiftIndex, 1);\n    if (keys.length != 1) throw new Error(\"Multiple key operations not supported\");\n    const charKey = keys[0];\n\n    const ctrl = ctrlIndex >= 0 || metaIndex >= 0;\n    const alt = altIndex >= 0;\n    const shift = shiftIndex >= 0;\n\n    const result = {\n      name: name,\n      localizedKeys: (ctrl ? \"Ctrl + \" : \"\") +\n        (alt ? \"Alt + \" : \"\") +\n        (shift ? \"Shift + \" : \"\") +\n        charKey,\n      charKey: charKey,\n      ctrlKey: ctrl,\n      altKey: alt,\n      shiftKey: shift,\n      callback: callback\n    };\n\n    this._hotkeys.unshift(result);\n\n    return this;\n  }\n\n  //HACK: Cause hotkey manager does not allow 'control' hotkeys. This is the exception.\n  registerAltHotKey(name, callback)\n  {\n    if (this._altHotkey) throw new Error(\"Only one hotkey can exist for \\'Alt\\'\");\n\n    this._altHotkey = {\n      name: name,\n      localizedKeys: \"Alt\",\n      charKey: null,\n      ctrlKey: false,\n      altKey: true,\n      shiftKey: false,\n      callback: callback\n    };\n\n    return this;\n  }\n\n  //Override\n  onSessionStart(session)\n  {\n    window.addEventListener('keydown', this.onKeyDown);\n    window.addEventListener('keyup', this.onKeyUp);\n\n    this._enabled = true;\n  }\n\n  //Override\n  onSessionStop(session)\n  {\n    this._enabled = false;\n\n    this._prevHotKey = null;\n    this._repeatCount = 0;\n    this._hotkeys.length = 0;\n    this._altHotkey = null;\n\n    window.removeEventListener('keydown', this.onKeyDown);\n    window.removeEventListener('keyup', this.onKeyUp);\n  }\n\n  setEnabled(enabled)\n  {\n    this._enabled = enabled;\n  }\n\n  isEnabled()\n  {\n    return this._enabled;\n  }\n\n  findMatchingHotKey(e)\n  {\n    for(const hotkey of this._hotkeys)\n    {\n      if (matchesHotKeyEvent(e, hotkey)) return hotkey;\n    }\n    return null;\n  }\n\n  getCurrentHotKey()\n  {\n    return this._prevHotKey;\n  }\n\n  getCurrentHotKeyRepeatCount()\n  {\n    return this._repeatCount;\n  }\n\n  getCurrentlyPossibleHotKeys(dst=[])\n  {\n    const event = this._cachedEvent;\n    const eventCtrl = event.ctrlKey || event.metaKey;\n    const eventAlt = event.altKey;\n    const eventShift = event.shiftKey;\n    if (!eventCtrl && !eventAlt && !eventShift) return dst;\n    const eventKey = event.code;\n\n    let result = null;\n    for(const hotkey of this._hotkeys)\n    {\n      let flag = false;\n      if (eventCtrl ^ hotkey.ctrlKey)\n      {\n        //It's ok, but it is not a complete match...\n        if (!eventCtrl) flag = true;\n        //Nope.\n        else continue;\n      }\n      if (eventAlt ^ hotkey.altKey)\n      {\n        //It's ok, but it is not a complete match...\n        if (!eventAlt) flag = true;\n        //Nope.\n        else continue;\n      }\n      if (eventShift ^ hotkey.shiftKey)\n      {\n        //It's ok, but it is not a complete match...\n        if (!eventShift) flag = true;\n        //Nope.\n        else continue;\n      }\n\n      if (!flag && eventKey === hotkey.charKey)\n      {\n        result = hotkey;\n      }\n\n      dst.push(hotkey);\n    }\n\n    if (result) return result;\n    else return dst;\n  }\n\n  onKeyDown(e)\n  {\n    if (!this._enabled) return;\n\n    if (!e.repeat)\n    {\n      this.captureKeyEvent(e, false);\n\n      let result = this.findMatchingHotKey(this._cachedEvent);\n      if (!result && matchesHotKeyEvent(e, this._altHotkey)) result = this._altHotkey;\n\n      if (result)\n      {\n        if (this._prevHotKey === result)\n        {\n          ++this._repeatCount;\n        }\n        else\n        {\n          this._prevHotKey = result;\n          this._repeatCount = 0;\n        }\n\n        result.callback();\n\n        e.preventDefault();\n        e.stopPropagation();\n      }\n    }\n  }\n\n  onKeyUp(e)\n  {\n    if (!this._enabled) return;\n\n    if (this.captureKeyEvent(e, true))\n    {\n      this._prevHotKey = null;\n      this._repeatCount = 0;\n    }\n  }\n\n  captureKeyEvent(e, isKeyUp=false)\n  {\n    this._cachedEvent.ctrlKey = e.ctrlKey;\n    this._cachedEvent.metaKey = e.metaKey;\n    this._cachedEvent.altKey = e.altKey;\n    this._cachedEvent.shiftKey = e.shiftKey;\n    this._cachedEvent.code = isKeyUp ? null : (e.code || null);\n    return isKeyUp && !(this._cachedEvent.ctrlKey || this._cachedEvent.metaKey || this._cachedEvent.altKey || this._cachedEvent.shiftKey);\n  }\n}\n\nexport default HotKeyManager;\n\nfunction matchesHotKeyEvent(e, hotkey)\n{\n  if (hotkey.ctrlKey !== (e.ctrlKey || e.metaKey)) return false;\n  if (hotkey.altKey !== e.altKey) return false;\n  if (hotkey.shiftKey !== e.shiftKey) return false;\n  if (hotkey.charKey && hotkey.charKey !== e.code) return false;\n  return true;\n}\n","import React from 'react';\n\nclass Icon extends React.Component\n{\n  constructor(props) { super(props); }\n\n  //Override\n  render()\n  {\n    return (\n      <svg id={this.props.id} className={this.props.className} style={this.props.style}\n      xmlns=\"http://www.w3.org/2000/svg\"\n      width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n        <path d=\"M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z\"/>\n      </svg>\n    );\n  }\n}\nexport default Icon;\n","import React from 'react';\nimport Style from './DrawerView.css';\n\nimport IconButton from 'experimental/components/IconButton.js';\nimport ExpandDownIcon from 'experimental/iconset/ExpandDownIcon.js';\n\nconst DRAWER_WIDTH_CSSVAR = \"--drawer-width\";\nconst DRAWER_HANDLE_DRAG_OFFSET = 6;\nconst DRAWER_HANDLE_MIN_SIZE_BUFFER = 32;\nconst DRAWER_HANDLE_MAX_SIZE_BUFFER = 128;\nconst DRAWER_MIN_WIDTH = 200;\nconst DRAWER_RESIZE_REFRESH_RATE = 200;\nconst DRAWER_HANDLE_CUSTOM_SNAP_WIDTH = 300;\n\nconst DRAWER_SHOULD_HIDE_CONTENT_ON_RESIZE = true;\nconst DRAWER_SHOULD_HIDE_TAB_LIST = false;\nconst DRAWER_SHOULD_HIDE_FIRST_PANEL = true;\n\nexport const DRAWER_WIDTH_TYPE_FULL = \"full\";\nexport const DRAWER_WIDTH_TYPE_MIN = \"min\";\nexport const DRAWER_SIDE_BOTTOM = \"bottom\";\nexport const DRAWER_SIDE_RIGHT = \"right\";\nexport const DRAWER_BAR_DIRECTION_VERTICAL = \"vertical\";\nexport const DRAWER_BAR_DIRECTION_HORIZONTAL = \"horizontal\";\n\nclass DrawerView extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.ref = null;\n    this.drawerElement = null;\n\n    this.state = {\n      open: false,\n      tabIndex: 0,\n      soloClass: null,\n      viewportColor: null\n    };\n\n    //When drawer is currently changing size intentfully\n    this._handlingGrab = false;\n    this._handlingResize = false;\n    //Whether the drawer should fullscreen\n    this._isfull = false;\n    //Whether to restore drawer width after fullscreen\n    this._hasintent = false;\n    //Save intentful drawer width for restore after fullscreen\n    this._prevWidth = DRAWER_MIN_WIDTH;\n    //Used to manage resize updates\n    this._resizeTimeout = null;\n    this._resizeEndTimeout = null;\n    //Changed in render() to reflect current render state.\n    this._sideways = false;\n\n    this.onDrawerHandleGrab = this.onDrawerHandleGrab.bind(this);\n    this.onDrawerHandleRelease = this.onDrawerHandleRelease.bind(this);\n    this.onDrawerHandleMove = this.onDrawerHandleMove.bind(this);\n    this.onDrawerExpand = this.onDrawerExpand.bind(this);\n    this.onWindowResize = this.onWindowResize.bind(this);\n  }\n\n  //Override\n  componentDidMount()\n  {\n    window.addEventListener('resize', this.onWindowResize, false);\n  }\n\n  //Override\n  componentWillUnmount()\n  {\n    window.removeEventListener('resize', this.onWindowResize);\n  }\n\n  openDrawer(fullscreen=false, callback=null)\n  {\n    if (fullscreen)\n    {\n      this.setDrawerWidth(DRAWER_WIDTH_TYPE_FULL, true);\n    }\n\n    if (!this.state.open)\n    {\n      this.setState({ open: true }, callback);\n    }\n  }\n\n  closeDrawer(callback=null)\n  {\n    if (this.state.open)\n    {\n      this.setState({ open: false }, callback);\n    }\n  }\n\n  toggleDrawer(callback=null)\n  {\n    this.setState((prev, props) => {\n      return { open: !prev.open };\n    }, callback);\n  }\n\n  isDrawerOpen()\n  {\n    return this.state.open;\n  }\n\n  isDrawerFullscreen()\n  {\n    return this._isfull;\n  }\n\n  setCurrentTab(tabIndex)\n  {\n    if (!this.props.panels) return;\n    if (tabIndex >= this.props.panels.length) tabIndex = 0;\n    if (this.state.open && this.state.tabIndex === tabIndex)\n    {\n      //Toggle fullscreen\n      if (this._isfull)\n      {\n        this.setDrawerWidth(this._prevWidth);\n      }\n      else\n      {\n        this.setDrawerWidth(DRAWER_WIDTH_TYPE_FULL, true);\n      }\n    }\n    else\n    {\n      //Open and set tab index\n      this.setState({open: true, tabIndex: tabIndex});\n    }\n  }\n\n  getCurrentTabIndex()\n  {\n    return this.state.tabIndex;\n  }\n\n  isCurrentTab(tabIndex)\n  {\n    return this.state.tabIndex === tabIndex;\n  }\n\n  setViewportColor(color)\n  {\n    this.state.viewportColor = color;\n  }\n\n  getViewportColor()\n  {\n    return this.state.viewportColor;\n  }\n\n  setDrawerSoloClass(soloClass, callback=null)\n  {\n    this.setState({soloClass: soloClass}, callback);\n  }\n\n  setDrawerWidth(value, hasIntent=true)\n  {\n    if (!this.drawerElement || !this.ref) return;\n\n    this._hasintent = hasIntent;\n\n    const drawerSide = this.props.side;\n    const drawerOffsetY = this.ref.getBoundingClientRect().top;\n    const isDrawerSideBottom = drawerSide === DRAWER_SIDE_BOTTOM;\n    const documentSize = isDrawerSideBottom ?\n      document.documentElement.clientHeight - drawerOffsetY:\n      document.documentElement.clientWidth;\n    const minSize = DRAWER_MIN_WIDTH;\n\n    if (typeof value === 'string')\n    {\n      switch(value)\n      {\n        case DRAWER_WIDTH_TYPE_FULL:\n          this._isfull = true;\n          this._prevWidth = getCSSDrawerWidth(this.drawerElement);\n          break;\n        case DRAWER_WIDTH_TYPE_MIN:\n          this._isfull = false;\n          this.drawerElement.style.setProperty(DRAWER_WIDTH_CSSVAR, minSize + \"px\");\n          break;\n        default:\n          throw new Error(\"Trying to set drawer width to invalid string\");\n      }\n    }\n    else if (typeof value === 'number')\n    {\n      if (value < minSize + DRAWER_HANDLE_MIN_SIZE_BUFFER) value = minSize;\n      if (value > documentSize - DRAWER_HANDLE_MAX_SIZE_BUFFER)\n      {\n        value = documentSize;\n        this._isfull = true;\n      }\n      else\n      {\n        this._isfull = false;\n      }\n      this.drawerElement.style.setProperty(DRAWER_WIDTH_CSSVAR, value + \"px\");\n    }\n    else\n    {\n      throw new Error(\"Trying to set drawer width to unknown value\");\n    }\n  }\n\n  onDrawerExpand()\n  {\n    //Don't close, just small-ify.\n    if (this.state.open && this._isfull)\n    {\n      this.setDrawerWidth(this._prevWidth);\n\n      //If did not make any changes...\n      if (this._isfull)\n      {\n        //Make it do normal stuff.\n        this.toggleDrawer();\n      }\n    }\n    else\n    {\n      this.toggleDrawer();\n    }\n  }\n\n  onWindowResize(e)\n  {\n    if (!this._resizeTimeout)\n    {\n      this._resizeTimeout = setTimeout(() => {\n        this._resizeTimeout = null;\n\n        //Handle resize ends (more like debouncing)\n        if (this._resizeEndTimeout) clearTimeout(this._resizeEndTimeout);\n        else this._handlingResize = true;\n        this._resizeEndTimeout = setTimeout(() => {\n          this._resizeEndTimeout = null;\n          this._handlingResize = false;\n        }, 500);\n\n        if (!this.drawerElement || !this.ref) return;\n\n        const drawerSide = this.props.side;\n        const drawerOffsetY = this.ref.getBoundingClientRect().top;\n        const isDrawerSideBottom = drawerSide === DRAWER_SIDE_BOTTOM;\n        const documentSize = isDrawerSideBottom ?\n          document.documentElement.clientHeight - drawerOffsetY:\n          document.documentElement.clientWidth;\n\n        if (this._isfull)\n        {\n          if (this._hasintent) return;\n          if (this._prevWidth + DRAWER_HANDLE_MAX_SIZE_BUFFER < documentSize)\n          {\n            this._isfull = false;\n            this.drawerElement.style.setProperty(DRAWER_WIDTH_CSSVAR, this._prevWidth + \"px\");\n          }\n        }\n        else\n        {\n          const drawerSize = getCSSDrawerWidth(this.drawerElement);\n          if (drawerSize + DRAWER_HANDLE_MAX_SIZE_BUFFER > documentSize)\n          {\n            this._isfull = true;\n            this._hasintent = false;\n          }\n        }\n      }, DRAWER_RESIZE_REFRESH_RATE);\n    }\n  }\n\n  onDrawerHandleGrab(e)\n  {\n    if (!this._handlingGrab && this.state.open)\n    {\n      this._handlingGrab = true;\n      this._prevWidth = getCSSDrawerWidth(this.drawerElement);\n      document.addEventListener(\"mouseup\", this.onDrawerHandleRelease);\n      document.addEventListener(\"mousemove\", this.onDrawerHandleMove);\n    }\n    else\n    {\n      this.onDrawerHandleRelease(e);\n    }\n  }\n\n  onDrawerHandleRelease(e)\n  {\n    if (this._handlingGrab)\n    {\n      document.removeEventListener(\"mouseup\", this.onDrawerHandleRelease);\n      document.removeEventListener(\"mousemove\", this.onDrawerHandleMove);\n      this._handlingGrab = false;\n      this._prevWidth = getCSSDrawerWidth(this.drawerElement);\n    }\n  }\n\n  onDrawerHandleMove(e)\n  {\n    const drawerSide = this.props.side;\n    const isDrawerSideBottom = drawerSide === DRAWER_SIDE_BOTTOM;\n    const documentSize = isDrawerSideBottom ?\n      document.documentElement.clientHeight :\n      document.documentElement.clientWidth;\n    const pointerValue = isDrawerSideBottom ? e.clientY : e.clientX;\n\n    let result = documentSize - pointerValue + DRAWER_HANDLE_DRAG_OFFSET;\n    //Try snapping to some widths...\n    if (!isDrawerSideBottom && Math.abs(result - DRAWER_HANDLE_CUSTOM_SNAP_WIDTH) < DRAWER_HANDLE_MIN_SIZE_BUFFER)\n    {\n      result = DRAWER_HANDLE_CUSTOM_SNAP_WIDTH;\n    }\n    this.setDrawerWidth(result);\n  }\n\n  //Override\n  render()\n  {\n    const drawerPanels = this.props.panels;\n    const drawerSide = this.props.side || DRAWER_SIDE_RIGHT;\n    const drawerDirection = this.props.direction || DRAWER_BAR_DIRECTION_HORIZONTAL;\n    const shouldDrawerHide = this.props.hide || false;\n    const drawerSoloClass = this.state.soloClass;\n\n    const isDrawerOpen = this.state.open;\n    //Assumes that parent container has flex and flex-direction: column for bottom, row for right.\n    const isDrawerSideBottom = drawerSide === DRAWER_SIDE_BOTTOM;\n    const shouldDrawerBarSideways = !isDrawerSideBottom && (!isDrawerOpen || drawerDirection === DRAWER_BAR_DIRECTION_VERTICAL);\n    const showDrawerHandle = isDrawerOpen || this._handlingGrab;\n    const shouldDrawerOpenFull = this._isfull;\n    const shouldHideDrawerContent = (DRAWER_SHOULD_HIDE_CONTENT_ON_RESIZE && (this._handlingGrab || this._handlingResize)) || !isDrawerOpen;\n    const shouldHideFirstDrawerPanel = DRAWER_SHOULD_HIDE_FIRST_PANEL;\n    const showDrawerTabs = isDrawerOpen || !DRAWER_SHOULD_HIDE_TAB_LIST;\n\n    //Used to handle sideways logic\n    this._sideways = shouldDrawerBarSideways;\n\n    let viewportStyle = {};\n    if (this.state.viewportColor !== null)\n    {\n      viewportStyle['outlineColor'] = this.state.viewportColor;\n    }\n\n    return (\n      <div ref={ref=>this.ref=ref}\n      id={this.props.id}\n      className={Style.app_content +\n        (isDrawerSideBottom ? \" column \" : \"\") +\n        (\" \" + this.props.className)}\n      style={this.props.style}>\n        <div className={Style.app_viewport} style={viewportStyle}>\n          {this.props.children}\n        </div>\n        <div ref={ref=>this.drawerElement=ref}\n        className={\n          Style.app_drawer +\n          (isDrawerOpen ? \" open \" : \"\") +\n          (shouldDrawerBarSideways ? \" drawer-bar-sideways \" : \"\") +\n          (isDrawerSideBottom ? \" drawer-side-bottom \" : \"\") +\n          (shouldDrawerOpenFull ? \" full \" : \"\") +\n          (shouldHideDrawerContent ? \" hide-content \" : \"\") +\n          (this._handlingResize ? \" no-animation \" : \"\") +\n          (shouldDrawerHide ? \" hide \" : \"\")}>\n          <div className={Style.drawer_handle + (showDrawerHandle ? \" show \" : \"\")} onMouseDown={this.onDrawerHandleGrab}>\n            <span>{\"||\"}</span>\n          </div>\n          <div className={Style.drawer_content}>\n            <nav className={Style.drawer_content_bar}>\n              <IconButton className={Style.drawer_tab_expander} onClick={this.onDrawerExpand}>\n                <ExpandDownIcon/>\n              </IconButton>\n              {showDrawerTabs && drawerPanels && drawerPanels.map((e, i) => {\n                if (!e) return null;\n                if (!e['TITLE']) return null;\n                const title = e['TITLE'];\n                const current = this.isCurrentTab(i);\n                const disabled = drawerSoloClass && drawerSoloClass !== e;\n                return (\n                  <a key={title + \":\" + i}\n                    className={Style.drawer_tab +\n                      (current ? \" active \" : \"\") +\n                      (disabled ? \" disabled \" : \"\")}\n                    onClick={() => this.setCurrentTab(i)}>\n                    <label>{title}</label>\n                  </a>\n                );\n              })}\n            </nav>\n            <div className={Style.drawer_content_panel_container}>\n              <div className={Style.drawer_content_panel}>\n                {drawerPanels && drawerPanels.map((e, i) => {\n                  if (!e) return null;\n                  const ComponentClass = e;\n                  const title = e['TITLE'] || \"\";\n                  const current = this.isCurrentTab(i);\n                  const disabled = drawerSoloClass && drawerSoloClass !== e;\n                  return (\n                    <div key={title + \":\" + i}\n                      className={Style.drawer_panel_container +\n                        (!current ? \" hide \" : \"\") +\n                        (disabled ? \" disabled \" : \"\")}>\n                      <ComponentClass className={Style.drawer_panel}\n                        {...this.props.panelProps}\n                        drawer={this}/>\n                    </div>\n                  );\n                })}\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\nexport default DrawerView;\n\nfunction getCSSDrawerWidth(drawerElement)\n{\n  return parseInt(window.getComputedStyle(drawerElement).getPropertyValue(DRAWER_WIDTH_CSSVAR).replace(/\\D/g, ''));\n}\n","import React from 'react';\nimport Style from './ToolbarButton.css';\n\nimport IconButton from 'experimental/components/IconButton.js';\n\nexport const TOOLBAR_CONTAINER_MENU = \"menu\";\nexport const TOOLBAR_CONTAINER_TOOLBAR = \"toolbar\";\nexport const TOOLBAR_CONTAINER_ALL = \"all\";\n\nclass ToolbarButton extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  //Override\n  render()\n  {\n    const IconClass = this.props.icon;\n    return (\n      <IconButton id={this.props.id}\n        className={Style.toolbar_button + \" \" + this.props.className}\n        style={this.props.style}\n        title={this.props.title}\n        disabled={this.props.disabled}\n        onClick={this.props.onClick}>\n        <IconClass/>\n      </IconButton>\n    );\n  }\n}\n\nexport default ToolbarButton;\n","import React from 'react';\n\nclass Icon extends React.Component\n{\n  constructor(props) { super(props); }\n\n  //Override\n  render()\n  {\n    return (\n      <svg id={this.props.id} className={this.props.className} style={this.props.style}\n      xmlns=\"http://www.w3.org/2000/svg\"\n      width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n        <path d=\"M12 2.02c-5.51 0-9.98 4.47-9.98 9.98s4.47 9.98 9.98 9.98 9.98-4.47 9.98-9.98S17.51 2.02 12 2.02zM11.48 20v-6.26H8L13 4v6.26h3.35L11.48 20z\"/>\n      </svg>\n    );\n  }\n}\nexport default Icon;\n","import React from 'react';\nimport Style from './ToolbarTitle.css';\n\nimport FormattedInput from 'deprecated/system/formattedinput/FormattedInput.js';\nimport OfflineIcon from 'experimental/iconset/OfflineIcon.js';\n\nclass ToolbarTitle extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.inputElement = null;\n\n    this.onSubmit = this.onSubmit.bind(this);\n  }\n\n  setTitle(title)\n  {\n    this.inputElement.resetValue(title);\n  }\n\n  getTitle()\n  {\n    return this.inputElement.value;\n  }\n\n  onSubmit(newValue, prevValue)\n  {\n    //If the value has changed or the value remained empty...\n    if (newValue !== prevValue)\n    {\n      if (this.props.onChange) this.props.onChange(newValue);\n    }\n  }\n\n  //Override\n  render()\n  {\n    const title = this.props.title;\n    const offline = !(navigator && navigator.onLine);\n    const onClick = this.props.onClick;\n\n    return (\n      <div id={this.props.id}\n        className={Style.title_container +\n          \" \" + this.props.className}\n        style={this.props.style}>\n        <span className={Style.title_input_container}>\n          <FormattedInput ref={ref=>this.inputElement=ref}\n            defaultValue={this.props.defaultValue}\n            onSubmit={this.onSubmit}/>\n          {offline && <OfflineIcon className={Style.offline_status}/>}\n        </span>\n        <div className={Style.title_subtitle} onClick={onClick}>\n          {title}\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default ToolbarTitle;\n","import React from 'react';\n\nclass Icon extends React.Component\n{\n  constructor(props) { super(props); }\n\n  //Override\n  render()\n  {\n    return (\n      <svg id={this.props.id} className={this.props.className} style={this.props.style}\n      xmlns=\"http://www.w3.org/2000/svg\"\n      width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n        <path d=\"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z\"/>\n      </svg>\n    );\n  }\n}\nexport default Icon;\n","import React from 'react';\nimport Style from './ToolbarView.css';\n\nimport {TOOLBAR_CONTAINER_MENU, TOOLBAR_CONTAINER_TOOLBAR} from './ToolbarButton.js';\nimport ToolbarTitle from './ToolbarTitle.js';\n\nimport IconButton from 'experimental/components/IconButton.js';\nimport MenuIcon from 'experimental/iconset/MenuIcon.js';\n\nconst TOOLBAR_BUTTON_BUFFER = 150;\nconst TOOLBAR_ALLOW_MENU_BAR = true;\nconst TOOLBAR_DEFAULT_MENU_INDEX = -1;\n\nclass ToolbarView extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.ref = null;\n    this.toolbarElement = null;\n\n    this.state = {\n      open: false,\n      menuIndex: TOOLBAR_DEFAULT_MENU_INDEX\n    };\n\n    this.onBarExpand = this.onBarExpand.bind(this);\n    this.onTitleChange = this.onTitleChange.bind(this);\n  }\n\n  openBar(callback=null)\n  {\n    if (!this.state.open)\n    {\n      //Open it, but also reset menu...\n      this.setState({ open: true, menuIndex: TOOLBAR_DEFAULT_MENU_INDEX }, callback);\n    }\n  }\n\n  closeBar(callback=null)\n  {\n    if (this.state.open)\n    {\n      //Close it, but also reset menu...\n      this.setState({ open: false, menuIndex: TOOLBAR_DEFAULT_MENU_INDEX }, callback);\n    }\n  }\n\n  toggleBar(callback=null)\n  {\n    //Toggle it, but also reset menu...\n    this.setState((prev, props) => {\n      return { open: !prev.open, menuIndex: TOOLBAR_DEFAULT_MENU_INDEX };\n    }, callback);\n  }\n\n  isBarOpen()\n  {\n    return this.state.open;\n  }\n\n  setCurrentMenu(menuIndex)\n  {\n    if (!this.props.menus) return;\n    if (menuIndex >= this.props.menus.length) menuIndex = TOOLBAR_DEFAULT_MENU_INDEX;\n\n    //Open and set tab index\n    this.setState({open: true, menuIndex: menuIndex});\n  }\n\n  getCurrentMenuIndex()\n  {\n    return this.state.menuIndex;\n  }\n\n  isCurrentMenu(menuIndex)\n  {\n    return this.state.menuIndex === menuIndex;\n  }\n\n  onBarExpand(e)\n  {\n    if (this.state.open && this.state.menuIndex  >= 0)\n    {\n      this.setCurrentMenu(TOOLBAR_DEFAULT_MENU_INDEX);\n    }\n    else\n    {\n      this.toggleBar();\n    }\n  }\n\n  onTitleChange(value)\n  {\n    this.props.session.setProjectName(value);\n  }\n\n  renderMenuButtons(children)\n  {\n    return React.Children.map(children, child => {\n      if (child.props.containerOnly !== TOOLBAR_CONTAINER_TOOLBAR) return child;\n    });\n  }\n\n  renderToolbarButtons(children)\n  {\n    return React.Children.map(children, child => {\n      if (child.props.containerOnly !== TOOLBAR_CONTAINER_MENU) return child;\n    });\n  }\n\n  //Override\n  render()\n  {\n    const title = this.props.title;\n    const toolbarMenus = this.props.menus;\n    const toolbarMenuIndex = this.state.menuIndex;\n    const ToolbarMenu = toolbarMenuIndex >= 0 ? toolbarMenus[toolbarMenuIndex] : null;\n    const showCustomToolbarMenu = ToolbarMenu != null;\n    const onTitleClick = this.props.onTitleClick;\n\n    const session = this.props.session;\n\n    const hasButtons = React.Children.count(this.props.children) > 0;\n    const isBarOpen = this.state.open;\n    const shouldBarHide = this.props.hide || false;\n    const showBarExpander = isBarOpen || (hasButtons && TOOLBAR_ALLOW_MENU_BAR);\n\n    return (\n      <div ref={ref=>this.ref=ref}\n      id={this.props.id}\n      className={Style.app_bar +\n        (isBarOpen ? \" open \" : \"\") +\n        (shouldBarHide ? \" hide \" : \"\") +\n        \" \" + this.props.className}\n      style={this.props.style}>\n        <div className={Style.bar_menu}>\n          {showCustomToolbarMenu ?\n            <div className={Style.menu_container}>\n              <ToolbarMenu {...this.props.menuProps} toolbar={this}/>\n            </div> :\n            <div className={Style.menu_button_container}>\n              {this.renderMenuButtons(this.props.children)}\n            </div>}\n        </div>\n        <div ref={ref=>this.toolbarElement=ref} className={Style.bar_toolbar}>\n          <ToolbarTitle className={Style.toolbar_title}\n            title={title}\n            defaultValue={session.getProjectName()}\n            onChange={this.onTitleChange}\n            onClick={onTitleClick}/>\n\n          <div className={Style.toolbar_button_container}>\n            {this.renderToolbarButtons(this.props.children)}\n          </div>\n\n          {showBarExpander &&\n          <IconButton className={Style.toolbar_expander} onClick={this.onBarExpand}>\n            <MenuIcon/>\n          </IconButton>}\n        </div>\n      </div>\n    );\n  }\n}\nexport default ToolbarView;\n","import React from 'react';\nimport Style from './ViewportView.css';\n\nconst VIEWPORT_DEFAULT_VIEW_INDEX = 0;\n\nclass ViewportView extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.ref = null;\n\n    this.state = {\n      viewIndex: VIEWPORT_DEFAULT_VIEW_INDEX\n    };\n  }\n\n  setCurrentView(viewIndex)\n  {\n    if (!this.props.views) return;\n    if (viewIndex >= this.props.views.length) viewIndex = VIEWPORT_DEFAULT_VIEW_INDEX;\n\n    //Open and set tab index\n    this.setState({viewIndex: viewIndex});\n  }\n\n  getCurrentViewIndex()\n  {\n    return this.state.viewIndex;\n  }\n\n  isCurrentView(viewIndex)\n  {\n    return this.state.viewIndex === viewIndex;\n  }\n\n  //Override\n  render()\n  {\n    const viewportViews = this.props.views;\n    const viewportViewIndex = this.state.viewIndex;\n    const ViewportViewPane = viewportViewIndex >= 0 ? viewportViews[viewportViewIndex] : null;\n\n    return (\n      <div ref={ref=>this.ref=ref}\n        id={this.props.id}\n        className={Style.view_container +\n          \" \" + this.props.className}\n        style={this.props.style}>\n        {ViewportViewPane &&\n          <ViewportViewPane {...this.props.viewProps} viewport={this}/>}\n      </div>\n    );\n  }\n}\n\nexport default ViewportView;\n","import React from 'react';\nimport Style from './TooltipView.css';\n\nconst TOOLTIP_WAIT_TIME = 30000;\n\nexport const RANDOM_MODE = \"random\";\nexport const SEQUENTIAL_MODE = \"sequential\";\nexport const ONESHOT_MODE = \"oneshot\";\n\nclass TooltipView extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this._tooltipTimeout = null;\n\n    this.state = {\n      index: props.initial || 0\n    };\n  }\n\n  //Override\n  componentWillUnmount()\n  {\n    clearTimeout(this._tooltipTimeout);\n    this._tooltipTimeout = null;\n  }\n\n  setTooltipIndex(index)\n  {\n    this.setState({index: index});\n  }\n\n  getTooltipIndex()\n  {\n    return this.state.index;\n  }\n\n  updateTooltip()\n  {\n    const mode = this.props.mode;\n    const visible = this.props.visible;\n    this._tooltipTimeout = null;\n\n    if (visible)\n    {\n      const count = React.Children.count(this.props.children);\n      let nextIndex = this.state.index + 1;\n      if (mode === RANDOM_MODE)\n      {\n        nextIndex = Math.floor(Math.random() * count);\n      }\n      else if (mode === ONESHOT_MODE)\n      {\n        if (nextIndex >= count) nextIndex = count - 1;\n      }\n      else\n      {\n        if (nextIndex >= count) nextIndex = 0;\n      }\n      this.setTooltipIndex(nextIndex);\n    }\n    else\n    {\n      if (mode === RANDOM_MODE)\n      {\n        //Pick a random index to start at.\n        this.setTooltipIndex(Math.floor(Math.random() * React.Children.count(this.props.children)));\n      }\n      else if (mode === ONESHOT_MODE)\n      {\n        //Skip to the end.\n        this.setTooltipIndex(React.Children.count(this.props.children) - 1);\n      }\n      else\n      {\n        //Go back to the beginning.\n        this.setTooltipIndex(0);\n      }\n    }\n  }\n\n  //Override\n  render()\n  {\n    const mode = this.props.mode;\n    const visible = this.props.visible;\n    const tooltipIndex = this.state.index;\n\n    if (visible && !this._tooltipTimeout)\n    {\n      this._tooltipTimeout = setTimeout(() => {\n        this.updateTooltip();\n      }, TOOLTIP_WAIT_TIME);\n    }\n\n    return (\n      <div id={this.props.id}\n        className={Style.tooltip_container +\n          (visible ? \" visible \" : \"\") +\n          \" \" + this.props.className}\n        style={this.props.style}>\n        {React.Children.map(this.props.children, (child, i) => {\n          return (\n            <label style={{opacity: tooltipIndex === i ? 1 : 0}}>\n              {child}\n            </label>\n          );\n        })}\n      </div>\n    );\n  }\n}\n\nexport default TooltipView;\n","import React from 'react';\nimport Style from './UploadDropZone.css';\n\nimport UploadIcon from 'experimental/iconset/UploadIcon.js';\n\nclass UploadDropZone extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.ref = null;\n\n    this._waiting = false;\n\n    this.onDragEnter = this.onDragEnter.bind(this);\n    this.onDragLeave = this.onDragLeave.bind(this);\n    this.onFileDrop = this.onFileDrop.bind(this);\n  }\n\n  //Override\n  componentDidMount()\n  {\n    //Upload drop zone\n    this.ref.addEventListener(\"drop\", this.onFileDrop);\n    this.ref.addEventListener(\"dragover\", this.onDragEnter);\n    this.ref.addEventListener(\"dragenter\", this.onDragEnter);\n    this.ref.addEventListener(\"dragleave\", this.onDragLeave);\n    this.ref.addEventListener(\"dragend\", this.onDragLeave);\n  }\n\n  //Override\n  componentWillUnmount()\n  {\n    this.ref.removeEventListener(\"drop\", this.onFileDrop);\n    this.ref.removeEventListener(\"dragover\", this.onDragEnter);\n    this.ref.removeEventListener(\"dragenter\", this.onDragEnter);\n    this.ref.removeEventListener(\"dragleave\", this.onDragLeave);\n    this.ref.removeEventListener(\"dragend\", this.onDragLeave);\n  }\n\n  onDragEnter(e)\n  {\n    e.preventDefault();\n    e.stopPropagation();\n\n    //Change state\n    this._waiting = true;\n  }\n\n  onDragLeave(e)\n  {\n    //Prevent file from being opened\n    e.preventDefault();\n    e.stopPropagation();\n\n    //Revert state\n    this._waiting = false;\n  }\n\n  onFileDrop(e)\n  {\n    //Prevent file from being opened\n    e.preventDefault();\n    e.stopPropagation();\n\n    //Revert state\n    this._waiting = false;\n\n    const dataTransfer = e.dataTransfer;\n    let fileBlob = null;\n    if (dataTransfer.items)\n    {\n      const dataItems = dataTransfer.items;\n      const length = dataItems.length;\n\n      //Just get the first one\n      if (length >= 1)\n      {\n        const file = dataItems[0];\n        if (file.kind === 'file')\n        {\n          fileBlob = file.getAsFile();\n        }\n      }\n    }\n    else\n    {\n      const dataFiles = dataTransfer.files;\n      const length = dataFiles.length;\n\n      //Just get the first one\n      if (length >= 1)\n      {\n        fileBlob = dataFiles[0];\n      }\n    }\n\n    if (this.props.onFileDrop)\n    {\n      //NOTE: fileBlob could be null\n      this.props.onFileDrop(fileBlob);\n    }\n\n    if (dataTransfer.items)\n    {\n      dataTransfer.items.clear();\n    }\n    else\n    {\n      dataTransfer.clearData();\n    }\n  }\n\n  //Override\n  render()\n  {\n    const isWaitingForFile = this._waiting;\n\n    return (\n      <div ref={ref=>this.ref=ref} id={this.props.id}\n        className={Style.upload_container +\n          (isWaitingForFile ? \" waiting \" : \"\") +\n          \" \" + this.props.className}\n        style={this.props.style}>\n        <UploadIcon className={Style.upload_icon}/>\n        {React.Children.only(this.props.children)}\n      </div>\n    );\n  }\n}\n\nexport default UploadDropZone;\n","/**\n * Used by InputAdapter to hold input event data.\n */\nclass InputPointer\n{\n  constructor(adapter, element, viewport)\n  {\n    this._adapter = adapter;\n    this._element = element;\n    this._viewport = viewport;\n\n    this._active = false;\n    this._x = 0;\n    this._y = 0;\n\n    this._inputpos = {x: 0, y: 0};\n  }\n\n  get x() { return this._x; }\n  get y() { return this._y; }\n\n  setPosition(x, y)\n  {\n    this._x = x;\n    this._y = y;\n    return this;\n  }\n\n  beginInput()\n  {\n    this._active = true;\n    this._inputpos.x = this._x;\n    this._inputpos.y = this._y;\n  }\n\n  /**\n   * Returns the position which the input began at. This is mutable.\n   */\n  getInputEventPosition() { return this._inputpos; }\n\n  changeInputEventPosition(x, y)\n  {\n    this._inputpos.x = x;\n    this._inputpos.y = y;\n  }\n\n  endInput() { this._active = false; }\n  isActive() { return this._active; }\n\n  getDistanceSquToInitial()\n  {\n    const pos = this._inputpos;\n    const dx = pos.x - this._x;\n    const dy = pos.y - this._y;\n    return dx * dx + dy * dy;\n  }\n\n  /**\n   * The DOM element for which this pointer provides context for; this should be\n   * the same element as in the input adapter.\n   */\n  getElement() { return this._element; }\n\n  /**\n   * The viewport for this pointer operates within; this should be the same\n   * viewport as in the input adapter.\n   */\n  getViewport() { return this._viewport; }\n\n  /**\n   * The input adapter that controls this pointer's properties\n   */\n  getAdapter() { return this._adapter; }\n}\n\nexport default InputPointer;\n","/**\n * Represents and handles the transformations to the interactible viewport of\n * the SVG element.\n */\nclass ViewportAdapter\n{\n  constructor()\n  {\n    this._element = null;\n    this._offsetX = 0;\n    this._offsetY = 0;\n    this._nextOffsetX = 0;\n    this._nextOffsetY = 0;\n    this._offsetDamping = 0.1;\n\n    this._scaleFactor = 1;\n    this._minScale = 1;\n    this._maxScale = 1;\n  }\n\n  setElement(element)\n  {\n    this._element = element;\n    return this;\n  }\n\n  setMinScale(scale)\n  {\n    this._minScale = scale;\n    if (this._scaleFactor < this._minScale) this._scaleFactor = this._minScale;\n    return this;\n  }\n\n  setMaxScale(scale)\n  {\n    this._maxScale = scale;\n    if (this._scaleFactor > this._maxScale) this._scaleFactor = this._maxScale;\n    return this;\n  }\n\n  setOffsetDamping(damping)\n  {\n    this._offsetDamping = damping;\n    return this;\n  }\n\n  update()\n  {\n    const dx = this._nextOffsetX - this._offsetX;\n    this._offsetX += dx * this._offsetDamping;\n    const dy = this._nextOffsetY - this._offsetY;\n    this._offsetY += dy * this._offsetDamping;\n  }\n\n  transformScreenToView(clientX, clientY)\n  {\n    if (!this._element) return {x: clientX - this._offsetX, y: clientY - this._offsetY};\n\n    const ctm = this._element.getScreenCTM();\n    return {\n      x: (clientX - ctm.e) / ctm.a - this._offsetX,\n      y: (clientY - ctm.f) / ctm.d - this._offsetY\n    };\n  }\n\n  setOffset(x, y, immediate=false)\n  {\n    if (immediate)\n    {\n      this._nextOffsetX = this._offsetX = x;\n      this._nextOffsetY = this._offsetY = y;\n    }\n    else\n    {\n      this._nextOffsetX = x;\n      this._nextOffsetY = y;\n    }\n  }\n\n  addOffset(dx, dy, immediate=false)\n  {\n    if (immediate)\n    {\n      this._offsetX += dx;\n      this._offsetY += dy;\n      this._nextOffsetX = this._offsetX;\n      this._nextOffsetY = this._offsetY;\n    }\n    else\n    {\n      this._nextOffsetX += dx;\n      this._nextOffsetY += dy;\n    }\n  }\n\n  setScale(scale) { this._scaleFactor = Math.min(this._maxScale, Math.max(this._minScale, scale)); }\n  addScale(dscale) { this._scaleFactor = Math.min(this._maxScale, Math.max(this._minScale, this._scaleFactor + dscale)); }\n  getOffsetX() { return this._offsetX; }\n  getOffsetY() { return this._offsetY; }\n  getOffsetDamping() { return this._offsetDamping; }\n  getScale() { return this._scaleFactor; }\n  getMinScale() { return this._minScale; }\n  getMaxScale() { return this._maxScale; }\n  getElement() { return this._element; }\n}\n\nexport default ViewportAdapter;\n","import InputPointer from './InputPointer.js';\nimport ViewportAdapter from './ViewportAdapter.js';\n\nconst LONG_TAP_TICKS = 600;\nconst DOUBLE_TAP_TICKS = 600;\nconst SCROLL_SENSITIVITY = 1.0 / 300.0;\nconst CURSOR_RADIUS = 4;\nconst CURSOR_RADIUS_SQU = CURSOR_RADIUS * CURSOR_RADIUS;\nconst DRAGGING_BUFFER = 18;\nconst DRAGGING_BUFFER_SQU = DRAGGING_BUFFER * DRAGGING_BUFFER;\n\n/**\n * Provides an interface for input handlers to interact with a HTMLElement.\n * Each listenable element should correspond to only a single InputAdapter.\n */\nclass InputAdapter\n{\n  constructor()\n  {\n    this._handlers = [];\n    this._activeDragHandler = null;\n\n    this._element = null;\n    this._cursor = {\n      _mousemove: null,\n      _mouseup: null,\n      _touchmove: null,\n      _touchend: null,\n      _timer: null\n    };\n    this._pointer = null;\n\n    this._viewport = new ViewportAdapter();\n\n    //Although dragging could be in pointer, it should be here to allow\n    //the adapter to be independent of pointer.\n    this._dragging = false;\n    this._altinput = false;\n\n    this._holdInputDelay = LONG_TAP_TICKS;\n    this._dblInputDelay = DOUBLE_TAP_TICKS;\n    this._scrollSensitivity = SCROLL_SENSITIVITY;\n    this._minTapRadius = CURSOR_RADIUS_SQU * 16;\n    this._draggingRadiusSqu = CURSOR_RADIUS_SQU + DRAGGING_BUFFER_SQU;\n\n    this._prevEmptyInput = false;\n    this._prevEmptyTime = 0;\n    this._prevEmptyX = 0;\n    this._prevEmptyY = 0;\n\n    this.onContextMenu = this.onContextMenu.bind(this);\n    this.onMouseDown = this.onMouseDown.bind(this);\n    this.onMouseMove = this.onMouseMove.bind(this);\n    this.onTouchStart = this.onTouchStart.bind(this);\n    this.onWheel = this.onWheel.bind(this);\n\n    this.onMouseDownThenMove = this.onMouseDownThenMove.bind(this);\n    this.onMouseDownThenUp = this.onMouseDownThenUp.bind(this);\n    this.onTouchStartThenMove = this.onTouchStartThenMove.bind(this);\n    this.onTouchStartThenEnd = this.onTouchStartThenEnd.bind(this);\n\n    this.onDelayedInputDown = this.onDelayedInputDown.bind(this);\n  }\n\n  addInputHandler(handler)\n  {\n    this._handlers.push(handler);\n    return this;\n  }\n\n  removeInputHandler(handler)\n  {\n    const index = this._handlers.indexOf(handler);\n    if (index >= 0) this._handlers.splice(index, 1);\n    return this;\n  }\n\n  initialize(element)\n  {\n    if (!(element instanceof SVGElement)) throw new Error(\"Missing SVG element for input adapter's viewport\");\n    if (this._element) throw new Error(\"Trying to initialize an InputAdapter already initialized\");\n\n    this._viewport.setElement(this._element = element);\n    this._pointer = new InputPointer(this, this._element, this._viewport);\n\n    this._element.addEventListener('mousedown', this.onMouseDown);\n    this._element.addEventListener('mousemove', this.onMouseMove);\n    this._element.addEventListener('touchstart', this.onTouchStart);\n    this._element.addEventListener('touchmove', this.onTouchMove);\n    this._element.addEventListener('contextmenu', this.onContextMenu);\n    this._element.addEventListener('wheel', this.onWheel);\n  }\n\n  destroy()\n  {\n    if (!this._element) throw new Error(\"Trying to destroy an InputAdapter that is not yet initialized\");\n\n    this._element.removeEventListener('mousedown', this.onMouseDown);\n    this._element.removeEventListener('mousemove', this.onMouseMove);\n    this._element.removeEventListener('touchstart', this.onTouchStart);\n    this._element.removeEventListener('contextmenu', this.onContextMenu);\n    this._element.removeEventListener('wheel', this.onWheel);\n\n    this._element = null;\n  }\n\n  update()\n  {\n    if (this._element)\n    {\n      //Smooth transition offset\n      this._viewport.update();\n    }\n  }\n\n  handleEvent(eventName, ...eventArgs)\n  {\n    //Let others handle this event...\n    for(const handler of this._handlers)\n    {\n      if (handler[eventName](...eventArgs))\n      {\n        return handler;\n      }\n    }\n\n    return null;\n  }\n\n  onMouseDown(e)\n  {\n    if (!this.hasInputHandlers()) return false;\n\n    e.stopPropagation();\n    e.preventDefault();\n\n    const cursor = this._cursor;\n\n    //Blur any element in focus\n    document.activeElement.blur();\n    this._element.focus();\n\n    //Make sure mouse move is deleted, just in case\n    if (cursor._mousemove)\n    {\n      document.removeEventListener('mousemove', cursor._mousemove);\n      cursor._mousemove = null;\n    }\n    //Make sure mouse up is deleted, just in case\n    if (cursor._mouseup)\n    {\n      document.removeEventListener('mouseup', cursor._mouseup);\n      cursor._mouseup = null;\n    }\n\n    //HACK: To allow Mac's to use ctrl+click as right clicks\n    const button = e.ctrlKey ? 2 : e.button;\n\n    //Is this a valid mouse down?\n    if (this.onInputDown(e.clientX, e.clientY, button))\n    {\n      //Start mouse down logic...\n      cursor._mousemove = this.onMouseDownThenMove;\n      cursor._mouseup = this.onMouseDownThenUp;\n\n      document.addEventListener('mousemove', cursor._mousemove);\n      document.addEventListener('mouseup', cursor._mouseup);\n    }\n\n    return false;\n  }\n\n  onMouseMove(e)\n  {\n    if (!this.hasInputHandlers()) return false;\n\n    const mouse = this._viewport.transformScreenToView(e.clientX, e.clientY);\n    const pointer = this._pointer;\n    pointer.setPosition(mouse.x, mouse.y);\n\n    if (this.handleEvent('onMoveInputEvent', pointer))\n    {\n      e.stopPropagation();\n      e.preventDefault();\n\n      this.cancelInputEvent();\n    }\n  }\n\n  onMouseDownThenMove(e)\n  {\n    if (!this.hasInputHandlers()) return false;\n\n    e.stopPropagation();\n    e.preventDefault();\n\n    this.onInputMove(e.clientX, e.clientY);\n\n    return false;\n  }\n\n  onMouseDownThenUp(e)\n  {\n    if (!this.hasInputHandlers()) return false;\n\n    e.stopPropagation();\n    e.preventDefault();\n\n    const cursor = this._cursor;\n\n    //Make sure mouse move is deleted, just in case\n    if (cursor._mousemove)\n    {\n      document.removeEventListener('mousemove', cursor._mousemove);\n      cursor._mousemove = null;\n    }\n    //Make sure mouse up is deleted, just in case\n    if (cursor._mouseup)\n    {\n      document.removeEventListener('mouseup', cursor._mouseup);\n      cursor._mouseup = null;\n    }\n\n    this.onInputUp(e.clientX, e.clientY);\n\n    return false;\n  }\n\n  onTouchStart(e)\n  {\n    if (!this.hasInputHandlers()) return false;\n\n    if (e.changedTouches.length == 1)\n    {\n      e.stopPropagation();\n      e.preventDefault();\n\n      const cursor = this._cursor;\n\n      //Blur any element in focus\n      document.activeElement.blur();\n      this._element.focus();\n\n      //Make sure touch move is deleted, just in case\n      if (cursor._touchmove)\n      {\n        document.removeEventListener('touchmove', cursor._touchmove);\n        cursor._touchmove = null;\n      }\n      //Make sure touch end is deleted, just in case\n      if (cursor._touchend)\n      {\n        document.removeEventListener('touchend', cursor._touchend);\n        cursor._touchend = null;\n      }\n\n      const touch = e.changedTouches[0];\n      //Is this a valid touch start?\n      if (this.onInputDown(touch.clientX, touch.clientY, 0))\n      {\n        //Start touch start logic...\n        cursor._touchmove = this.onTouchStartThenMove;\n        cursor._touchend = this.onTouchStartThenEnd;\n\n        document.addEventListener('touchmove', cursor._touchmove);\n        document.addEventListener('touchend', cursor._touchend);\n      }\n\n      return false;\n    }\n  }\n\n  onTouchStartThenEnd(e)\n  {\n    if (!this.hasInputHandlers()) return false;\n\n    e.stopPropagation();\n    e.preventDefault();\n\n    const cursor = this._cursor;\n\n    //Make sure mouse move is deleted, just in case\n    if (cursor._touchmove)\n    {\n      document.removeEventListener('touchmove', cursor._touchmove);\n      cursor._touchmove = null;\n    }\n    //Make sure mouse up is deleted, just in case\n    if (cursor._touchend)\n    {\n      document.removeEventListener('touchend', cursor._touchend);\n      cursor._touchend = null;\n    }\n\n    const touch = e.changedTouches[0];\n    this.onInputUp(touch.clientX, touch.clientY);\n\n    return false;\n  }\n\n  onTouchStartThenMove(e)\n  {\n    if (!this.hasInputHandlers()) return false;\n\n    e.stopPropagation();\n    e.preventDefault();\n\n    const touch = e.changedTouches[0];\n    this.onInputMove(touch.clientX, touch.clientY);\n\n    return false;\n  }\n\n  onContextMenu(e)\n  {\n    if (!this.hasInputHandlers()) return false;\n\n    e.stopPropagation();\n    e.preventDefault();\n\n    return false;\n  }\n\n  onWheel(e)\n  {\n    if (!this.hasInputHandlers()) return false;\n\n    e.stopPropagation();\n    e.preventDefault();\n\n    const pointer = this._pointer;\n    const dy = e.deltaY * this._scrollSensitivity;\n    const prev = this._viewport.getScale();\n    const next = prev + dy;\n\n    //Let others handle this event...\n    if (!this.handleEvent('onZoomChange', pointer, next, prev))\n    {\n      this._viewport.setScale(next);\n    }\n\n    return false;\n  }\n\n  onInputDown(x, y, button)\n  {\n    if (!this.hasInputHandlers()) throw new Error(\"Missing handlers for input adapter\");\n\n    //Setup for hold timer...\n    const cursor = this._cursor;\n    const pointer = this._pointer;\n    const mouse = this._viewport.transformScreenToView(x, y);\n    pointer.setPosition(mouse.x, mouse.y);\n\n    this._dragging = false;\n    this._altinput = button == 2;\n\n    //Let others handle this event...\n    if (!this.handleEvent('onPreInputEvent', pointer))\n    {\n      pointer.beginInput();\n      cursor._timer = setTimeout(this.onDelayedInputDown, this._holdInputDelay);\n      return true;\n    }\n\n    return false;\n  }\n\n  onDelayedInputDown()\n  {\n    if (!this.hasInputHandlers()) throw new Error(\"Missing handlers for input adapter\");\n\n    //That means the input is remaining still (like a hold)...\n    if (!this._dragging)\n    {\n      this._altinput = true;\n    }\n  }\n\n  onInputMove(x, y)\n  {\n    if (!this.hasInputHandlers()) throw new Error(\"Missing handlers for input adapter\");\n\n    const pointer = this._pointer;\n    const mouse = this._viewport.transformScreenToView(x, y);\n    pointer.setPosition(mouse.x, mouse.y);\n\n    if (!this._dragging)\n    {\n      if (pointer.getDistanceSquToInitial() > this._draggingRadiusSqu)\n      {\n        this._dragging = true;\n\n        //Let others handle this event...\n        const result = this.handleEvent('onDragStart', pointer);\n        if (!result)\n        {\n          this._dragging = false;\n\n          //TODO: you could NOT cancel the event and just update the target?\n          //If so, who is the initial target then?\n\n          //Stop the input event early...\n          this.cancelInputEvent();\n        }\n        else\n        {\n          this._activeDragHandler = result;\n        }\n      }\n      else\n      {\n        //Still a click or hold...\n      }\n    }\n    else\n    {\n      //Continue to drag...\n      if (this._activeDragHandler)\n      {\n        this._activeDragHandler.onDragMove(pointer);\n      }\n    }\n  }\n\n  onInputUp(x, y)\n  {\n    if (!this.hasInputHandlers()) throw new Error(\"Missing handlers for input adapter\");\n\n    const cursor = this._cursor;\n    const timer = cursor._timer;\n    if (timer)\n    {\n      clearTimeout(timer);\n      cursor._timer = null;\n    }\n\n    //Update pointer target to final position\n    const pointer = this._pointer;\n    const mouse = this._viewport.transformScreenToView(x, y);\n    pointer.setPosition(mouse.x, mouse.y);\n\n    if (this._dragging)\n    {\n      //Stop dragging!\n      if (this._activeDragHandler)\n      {\n        this._activeDragHandler.onDragStop(pointer);\n        this._activeDragHandler = null;\n      }\n    }\n    else\n    {\n      if (this._altinput)\n      {\n        //Alt Tap!\n        this.handleEvent('onAltInputEvent', pointer);\n      }\n      else\n      {\n        //If the input was not consumed...\n        if (!this.handleEvent('onInputEvent', pointer))\n        {\n          //Try for double tap...\n          const dx = x - this._prevEmptyX;\n          const dy = y - this._prevEmptyY;\n          const dist = dx * dx + dy * dy;\n          const dt = Date.now() - this._prevEmptyTime;\n          if (this._prevEmptyInput &&\n            dist < this._minTapRadius &&\n            dt < this._dblInputDelay)\n          {\n            //Double tap!\n            this.handleEvent('onDblInputEvent', pointer);\n\n            this._prevEmptyInput = false;\n          }\n          else\n          {\n            this._prevEmptyInput = true;\n            this._prevEmptyTime = Date.now();\n            this._prevEmptyX = x;\n            this._prevEmptyY = y;\n          }\n        }\n      }\n    }\n\n    pointer.endInput();\n    this.handleEvent('onPostInputEvent', pointer);\n  }\n\n  cancelInputEvent()\n  {\n    const pointer = this._pointer;\n    const cursor = this._cursor;\n\n    //Make sure mouse move is deleted, just in case\n    if (cursor._mousemove)\n    {\n      document.removeEventListener('mousemove', cursor._mousemove);\n      cursor._mousemove = null;\n    }\n    //Make sure mouse up is deleted, just in case\n    if (cursor._mouseup)\n    {\n      document.removeEventListener('mouseup', cursor._mouseup);\n      cursor._mouseup = null;\n    }\n\n    const timer = cursor._timer;\n    if (timer)\n    {\n      clearTimeout(timer);\n      cursor._timer = null;\n    }\n\n    pointer.endInput();\n    this.handleEvent('onPostInputEvent', pointer);\n  }\n\n  clearInputHandlers() { this._handlers.clear(); }\n  hasInputHandlers() { return this._handlers.length > 0; }\n  getActiveElement() { return this._element; }\n  getViewport() { return this._viewport; }\n  getPointerX() { return this._pointer ? this._pointer.x : 0; }\n  getPointerY() { return this._pointer ? this._pointer.y : 0; }\n  isPointerActive() { return this._pointer ? this._pointer.isActive() : false; }\n  isUsingTouch() { return this._cursor._touchmove || this._cursor._touchend; }\n  isAltInput() { return this._altinput; }\n  isDragging() { return this._dragging; }\n}\n\nexport default InputAdapter;\n","import React from 'react';\nimport Style from './ViewportComponent.css';\n\nimport InputAdapter from '../InputAdapter.js';\nimport AbstractInputHandler from '../AbstractInputHandler.js';\n\nconst DEFAULT_VIEW_SIZE = 300;\nconst SMOOTH_OFFSET_DAMPING = 0.4;\nconst MIN_SCALE = 0.1;\nconst MAX_SCALE = 10;\n\nclass ViewportComponent extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this._ref = React.createRef();\n\n    this._inputAdapter = new InputAdapter();\n    this._inputAdapter.getViewport()\n      .setMinScale(MIN_SCALE)\n      .setMaxScale(MAX_SCALE)\n      .setOffsetDamping(SMOOTH_OFFSET_DAMPING);\n  }\n\n  addInputHandler(inputHandler)\n  {\n    if (!(inputHandler instanceof AbstractInputHandler)) throw new Error(\"input handler must be an instanceof AbstractInputHandler\");\n    this._inputAdapter.addInputHandler(inputHandler);\n    return this;\n  }\n\n  //Override\n  componentDidMount()\n  {\n    this._inputAdapter.initialize(this._ref.current);\n  }\n\n  //Override\n  componentWillUnmount()\n  {\n    this._inputAdapter.terminate();\n  }\n\n  //Override\n  componentDidUpdate()\n  {\n    this._inputAdapter.update();\n  }\n\n  getSVGTransformString()\n  {\n    const viewport = this._inputAdapter.getViewport();\n    return \"translate(\" + viewport.getOffsetX() + \" \" + viewport.getOffsetY() + \")\";\n  }\n\n  getSVGViewBoxString(baseViewSize)\n  {\n    const viewport = this._inputAdapter.getViewport();\n    const viewSize = baseViewSize * Math.max(Number.MIN_VALUE, viewport.getScale());\n    const halfViewSize = viewSize / 2;\n    return (-halfViewSize) + \" \" + (-halfViewSize) + \" \" + viewSize + \" \" + viewSize;\n  }\n\n  getSVGElement()\n  {\n    return this._ref.current;\n  }\n\n  getInputAdapter()\n  {\n    return this._inputAdapter;\n  }\n\n  //Override\n  render()\n  {\n    const viewBox = this.getSVGViewBoxString(this.props.viewSize || DEFAULT_VIEW_SIZE);\n    const transform = this.getSVGTransformString();\n\n    return (\n      <svg ref={this._ref}\n        id={this.props.id}\n        className={Style.viewport_component + \" \" + this.props.className}\n        style={this.props.style}\n        viewBox={viewBox}>\n        <g transform={transform}>\n          {this.props.children}\n        </g>\n      </svg>\n    );\n  }\n}\n\nexport default ViewportComponent;\n","import React from 'react';\nimport Style from './NotificationView.css';\n\nimport DefaultNotificationLayout from './DefaultNotificationLayout.js';\n\nclass NotificationView extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  //Override\n  render()\n  {\n    const notificationManager = this.props.notificationManager;\n    return (\n      <div id={this.props.id}\n        className={Style.notifications_container +\n          \" \" + this.props.className}\n        style={this.props.style}>\n        {notificationManager.getNotifications().map(notification => {\n          const layoutID = notification.getLayoutID();\n          const NotificationLayout = layoutID ? notificationManager.getNotificationLayout(layoutID) : DefaultNotificationLayout;\n          return (\n            <NotificationLayout key={notification.getID()} notification={notification} message={notification.getMessage()} {...notification.getProps()}/>\n          );\n        })}\n      </div>\n    );\n  }\n}\n\nexport default NotificationView;\n","import React from 'react';\nimport Style from '../MenuPanel.css';\n\nimport IconButton from 'experimental/components/IconButton.js';\n\nclass ExportPanel extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  renderExporterButton(exporter)\n  {\n    if (!exporter.doesSupportFile()) return null;\n    const IconClass = exporter.getIconClass();\n    return (\n      <IconButton key={exporter.getLabel() + \":\" + exporter.getFileType()}\n        className={Style.panel_button}\n        title={exporter.getLabel()}\n        onClick={() => this.props.session.getApp().getExportManager().tryExportToFile(exporter)}>\n        <IconClass/>\n      </IconButton>\n    );\n  }\n\n  //Override\n  render()\n  {\n    const session = this.props.session;\n    const exportManager = session.getApp().getExportManager();\n    const exporters = exportManager.getExporters();\n\n    return (\n      <div id={this.props.id}\n        className={Style.panel_container +\n          \" \" + this.props.className}\n        style={this.props.style}>\n        <div className={Style.panel_title}>\n          <h1>{I18N.toString(\"component.exporting.title\")}</h1>\n        </div>\n        <div className={Style.panel_content}>\n          {exporters.map(e => this.renderExporterButton(e))}\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default ExportPanel;\n","const AUTOSAVE_INTERVAL = 1000;\n\nconst AutoSave = {\n  _init: false,\n  _handlers: [],\n  _interval: null,\n  _storage: null,\n  initialize(dataStorage)\n  {\n    if (!dataStorage) throw new Error(\"Unable to initialize AutoSave for unknown data storage\");\n    if (!dataStorage.isSupported()) return;\n\n    this._storage = dataStorage;\n    this._init = true;\n    for(const handler of this._handlers)\n    {\n      handler.onAutoSaveLoad(this._storage);\n    }\n\n    this.onIntervalUpdate = this.onIntervalUpdate.bind(this);\n    this._interval = setInterval(this.onIntervalUpdate, AUTOSAVE_INTERVAL);\n  },\n  destroy()\n  {\n    if (!this._storage.isSupported()) return;\n    if (!this._init) return;\n\n    clearInterval(this._interval);\n\n    this._init = false;\n    for(const handler of this._handlers)\n    {\n      handler.onAutoSaveUnload(this._storage);\n    }\n    this._handlers.length = 0;\n    this._storage = null;\n  },\n  onIntervalUpdate()\n  {\n    for(const handler of this._handlers)\n    {\n      handler.onAutoSaveUpdate(this._storage);\n    }\n  },\n  registerHandler(handler)\n  {\n    this._handlers.push(handler);\n    if (this._init)\n    {\n      handler.onAutoSaveLoad(this._storage);\n    }\n    return this;\n  },\n  unregisterHandler(handler)\n  {\n    this._handlers.splice(this._handlers.indexOf(handler), 1);\n    if (this._init)\n    {\n      handler.onAutoSaveUnload(this._storage);\n    }\n    return this;\n  },\n  load()\n  {\n    if (!this._init) throw new Error(\"Cannot load when not yet initialized\");\n\n    for(const handler of this._handlers)\n    {\n      handler.onAutoSaveLoad(this._storage);\n    }\n  },\n  unload()\n  {\n    if (!this._init) throw new Error(\"Cannot save when not yet initialized\");\n\n    for(const handler of this._handlers)\n    {\n      handler.onAutoSaveUnload(this._storage);\n    }\n  }\n};\n\nexport default AutoSave;\n","const LocalStorage = {\n  clear()\n  {\n    if (!this.isSupported()) return;\n    localStorage.clear();\n  },\n  setData(key, value)\n  {\n    if (!this.isSupported()) return;\n\n    // Opera 12.10 and Firefox 18 and later support\n    let hidden, visibilityChange;\n    if (typeof document.hidden !== \"undefined\")\n    {\n      hidden = \"hidden\";\n      visibilityChange = \"visibilitychange\";\n    }\n    else if (typeof document.msHidden !== \"undefined\")\n    {\n      hidden = \"msHidden\";\n      visibilityChange = \"msvisibilitychange\";\n    }\n    else if (typeof document.webkitHidden !== \"undefined\")\n    {\n      hidden = \"webkitHidden\";\n      visibilityChange = \"webkitvisibilitychange\";\n    }\n\n    //Don't save anything if hidden...\n    if (document[hidden]) return;\n\n    if (value)\n    {\n      localStorage.setItem(key, value);\n    }\n    else\n    {\n      localStorage.removeItem(key);\n    }\n  },\n  getData(key, defaultValue=null)\n  {\n    if (!this.isSupported()) return defaultValue;\n    return localStorage.getItem(key) || defaultValue;\n  },\n  setDataAsObject(key, objectValue)\n  {\n    try\n    {\n      if (objectValue && Object.keys(objectValue).length > 0)\n      {\n        this.setData(key, JSON.stringify(objectValue));\n      }\n      else\n      {\n        this.setData(key, null);\n      }\n    }\n    catch (e)\n    {\n      console.error(e);\n    }\n  },\n  getDataAsObject(key, defaultValue=null)\n  {\n    const result = this.getData(key, null);\n    if (result)\n    {\n      try\n      {\n        return JSON.parse(result);\n      }\n      catch (e)\n      {\n        console.error(e);\n        return defaultValue;\n      }\n    }\n    else\n    {\n      return defaultValue;\n    }\n  },\n  isSupported()\n  {\n    return typeof localStorage !== 'undefined';\n  }\n};\n\nexport default LocalStorage;\n","import React from 'react';\nimport Style from './PanelButton.css';\n\nclass PanelButton extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  //Override\n  render()\n  {\n    return (\n      <button id={this.props.id}\n        className={Style.button_container +\n          \" \" + this.props.className}\n        style={this.props.style}\n        onClick={this.props.onClick}>\n        {this.props.children}\n      </button>\n    );\n  }\n}\n\nexport default PanelButton;\n","import React from 'react';\nimport Style from './PreviewView.css';\n\nclass PreviewView extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  //Override\n  render()\n  {\n    return (\n      <div id={this.props.id}\n        className={Style.preview_container +\n          \" \" + this.props.className}\n        style={this.props.style}>\n        <div className={Style.preview_app}>\n          <div className={Style.preview_toolbar}>\n          </div>\n          <div className={Style.preview_workspace}>\n            <div className={Style.preview_viewport}>\n              <div className={Style.preview_node} style={{left: \"25%\", top: \"40%\"}}></div>\n              <div className={Style.preview_node} style={{left: \"40%\", top: \"40%\"}}></div>\n            </div>\n            <div className={Style.preview_notifications}>\n              <div className={Style.preview_notification_info}></div>\n              <div className={Style.preview_notification_error}></div>\n              <div className={Style.preview_notification_warning}></div>\n              <div className={Style.preview_notification_success}></div>\n            </div>\n            <div className={Style.preview_drawer}>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default PreviewView;\n","import React from 'react';\nimport Style from './OptionPanel.css';\n\nimport AutoSave from 'util/storage/AutoSave.js';\nimport LocalStorage from 'util/storage/LocalStorage.js';\nimport StyleInput from 'deprecated/system/styleopt/components/StyleInput.js';\n\nimport PanelContainer from 'experimental/panels/PanelContainer.js';\nimport PanelSection from 'experimental/panels/PanelSection.js';\nimport PanelSwitch from 'experimental/panels/PanelSwitch.js';\nimport PanelButton from 'experimental/panels/PanelButton.js';\n\nimport PreviewView from './PreviewView.js';\n\n//This should be the same as the one referred to by index.js\nconst SKIP_WELCOME_STORAGE_ID = \"skipWelcome\";\nconst DISABLE_EXIT_WARNING_STORAGE_ID = \"disableExitWarning\";\nconst ENABLE_MODULES = process.env.NODE_ENV === 'development';\n\nclass OptionPanel extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.state = {\n      theme: \"default\",\n      customTheme: false,\n      skipWelcome: LocalStorage.getData(SKIP_WELCOME_STORAGE_ID) === \"true\",\n      exitWarning: LocalStorage.getData(DISABLE_EXIT_WARNING_STORAGE_ID) === \"true\"\n    };\n\n    this.onChangeTheme = this.onChangeTheme.bind(this);\n  }\n\n  onChangeTheme(e)\n  {\n    const session = this.props.session;\n    const app = session.getApp();\n    const opts = app.getStyleOpts();\n    const prevTheme = this.state.theme;\n    const theme = e.target.value;\n    if (prevTheme === theme) return;\n\n    if (theme === \"default\")\n    {\n      for(let option of opts.getOptions())\n      {\n        option.resetStyle();\n      }\n    }\n\n    this.setState({theme: theme});\n  }\n\n  //Override\n  render()\n  {\n    const session = this.props.session;\n    const currentModule = session.getCurrentModule();\n    const opts = session.getApp().getStyleOpts();\n\n    return (\n      <PanelContainer id={this.props.id}\n        className={this.props.className}\n        style={this.props.style}\n        title={I18N.toString(\"component.options.title\")}>\n        <PanelSection title=\"Theme\">\n          <div style={{display: \"flex\"}}>\n            <div style={{width: \"60%\"}}>\n              <div id=\"options-theme-select-container\">\n                <select id=\"options-theme-select\" className=\"panel-select\" value={this.state.theme} onChange={this.onChangeTheme} disabled={this.state.customTheme}>\n                  <option value=\"default\">Default</option>\n                  <option value=\"ucsd\" disabled={true}>UC San Diego (Coming Soon)</option>\n                  <option value=\"duke\" disabled={true}>Duke University (Coming Soon)</option>\n                  <option value=\"mit\" disabled={true}>MIT (Coming Soon)</option>\n                </select>\n                {\n                  !this.state.customTheme &&\n                  <PanelButton onClick={() => this.setState({customTheme: true})}>\n                    {I18N.toString(\"action.options.changetheme\")}\n                  </PanelButton>\n                }\n              </div>\n              {\n                this.state.customTheme && <div>\n\n                  <PanelSection title={\"General Colors\"} full={true}>\n                    {opts.getPropsByGroup(\"general\").map(e => (\n                      <div key={e}>\n                        <StyleInput value={opts.getOptionByProp(e)}\n                          title={I18N.toString(\"options.\" + e)}/>\n                      </div>\n                    ))}\n                  </PanelSection>\n\n                  <PanelSection title={\"Surface Colors\"} full={true}>\n                    {opts.getPropsByGroup(\"surface\").map(e => (\n                      <div key={e}>\n                        <StyleInput value={opts.getOptionByProp(e)}\n                          title={I18N.toString(\"options.\" + e)}/>\n                      </div>\n                    ))}\n                  </PanelSection>\n\n                  <PanelSection title={\"Graph Colors\"} full={true}>\n                    {opts.getPropsByGroup(\"graph\").map(e => (\n                      <div key={e}>\n                        <StyleInput value={opts.getOptionByProp(e)}\n                          title={I18N.toString(\"options.\" + e)}/>\n                      </div>\n                    ))}\n                  </PanelSection>\n\n                  <PanelButton onClick={(e) => {\n                    for(let option of opts.getOptions())\n                    {\n                      option.resetStyle();\n                    }\n                    this.setState({customTheme: false});\n                  }}>\n                    {I18N.toString(\"action.options.reset\")}\n                  </PanelButton>\n                </div>\n              }\n            </div>\n            <div>\n              <PreviewView/>\n            </div>\n          </div>\n        </PanelSection>\n\n        <PanelSwitch id={\"option-skipwelcome\"}\n          checked={this.state.skipWelcome}\n          title={I18N.toString(\"options.skipwelcome\")}\n          onChange={(e) => {\n            const result = e.target.checked;\n            this.setState({skipWelcome: result});\n            LocalStorage.setData(SKIP_WELCOME_STORAGE_ID, \"\" + result);\n          }}/>\n        <PanelSwitch id={\"option-exitwarning\"}\n          checked={this.state.exitWarning}\n          title={I18N.toString(\"options.exitwarning\")}\n          onChange={(e) => {\n            const result = e.target.checked;\n            this.setState({exitWarning: result});\n            LocalStorage.setData(DISABLE_EXIT_WARNING_STORAGE_ID, \"\" + result);\n          }}/>\n\n        <PanelButton onClick={() => {\n          if (window.confirm(\"This will clear any cached or saved data. Are you sure you want to continue?\"))\n          {\n            LocalStorage.setData(\"enableExperimental\", \"false\");\n            //TODO: This is only to force use default module, remove later.\n            LocalStorage.setData(\"currentModule\", \"\");\n\n            try { AutoSave.destroy(); }\n            catch(e){/* Ignore if it fails. */}\n\n            window.alert(\"It's done! Restart to apply changes!\");\n          }\n        }}>\n          {\"Get out of Experimental Mode and return to Safety\"}\n        </PanelButton>\n      </PanelContainer>\n    );\n  }\n}\n\nexport default OptionPanel;\n","import React from 'react';\nimport Style from './LanguagePanel.css';\n\nimport PanelContainer from 'experimental/panels/PanelContainer.js';\nimport IconButton from 'experimental/components/IconButton.js';\n\nclass LanguagePanel extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  renderLanguageButton(localizedName, langFile)\n  {\n    return (\n      <IconButton key={langFile}\n        className={Style.language_button}\n        title={localizedName}\n        onClick={(e) => I18N.fetchLanguageFile(langFile)}>\n      </IconButton>\n    );\n  }\n\n  //Override\n  render()\n  {\n    const session = this.props.session;\n\n    return (\n      <PanelContainer id={this.props.id}\n        className={this.props.className}\n        style={this.props.style}\n        title={I18N.toString(\"component.language.title\")}>\n        <div className={Style.language_button_list}>\n          {this.renderLanguageButton(\"English\", \"en_us\")}\n          {this.renderLanguageButton(\"Pirate Speak\", \"xx_pirate\")}\n        </div>\n      </PanelContainer>\n    );\n  }\n}\n\nexport default LanguagePanel;\n","import React from 'react';\nimport Style from './ModuleLoaderPanel.css';\n\nimport PanelContainer from 'experimental/panels/PanelContainer.js';\nimport IconButton from 'experimental/components/IconButton.js';\n\nimport Modules from 'modules/Modules.js';\n\nclass ModuleLoaderPanel extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  renderModuleButton(moduleKey, moduleInfo)\n  {\n    const session = this.props.session;\n    const app = session.getApp();\n    const useExperimental = app.isExperimental();\n    const currentModule = session.getCurrentModule();\n    const currentModuleName = currentModule ? currentModule.getModuleName() : \"\";\n\n    return (\n      <IconButton key={moduleKey}\n        className={Style.module_button}\n        title={moduleInfo.name + \" (\" + moduleInfo.version + \")\"}\n        disabled={moduleInfo['experimental'] !== useExperimental || moduleInfo['disabled']}\n        onClick={(e) => {\n          session.restartSession(session.getApp(), moduleKey);\n        }}>\n      </IconButton>\n    );\n  }\n\n  //Override\n  render()\n  {\n    const session = this.props.session;\n    const app = session.getApp();\n    const useExperimental = app.isExperimental();\n    const currentModule = session.getCurrentModule();\n    const currentModuleName = currentModule ? currentModule.getModuleName() : \"\";\n\n    return (\n      <PanelContainer\n        id={this.props.id}\n        className={this.props.className}\n        style={this.props.style}\n        title={\"Change Modules\"}>\n        <div className={Style.module_button_list}>\n          {Object.keys(Modules).map(e => this.renderModuleButton(e, Modules[e]))}\n        </div>\n      </PanelContainer>\n    );\n  }\n}\n\nexport default ModuleLoaderPanel;\n","import React from 'react';\nimport Style from './ToolbarDivider.css';\n\nclass ToolbarDivider extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  //Override\n  render()\n  {\n    return (\n      <div id={this.props.id}\n        className={Style.divider + \" \" + this.props.className}\n        style={this.props.style}>\n      </div>\n    );\n  }\n}\n\nexport default ToolbarDivider;\n","import React from 'react';\n\nimport ToolbarButtonStyle from './ToolbarButton.css';\nimport IconUploadButton from 'experimental/components/IconUploadButton.js';\n\nclass ToolbarUploadButton extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  //Override\n  render()\n  {\n    const IconClass = this.props.icon;\n    return (\n      <IconUploadButton id={this.props.id}\n        className={ToolbarButtonStyle.toolbar_button +\n          \" \" + this.props.className}\n        style={this.props.style}\n        title={this.props.title}\n        disabled={this.props.disabled}\n        accept={this.props.accept}\n        onUpload={this.props.onUpload}>\n        <IconClass/>\n      </IconUploadButton>\n    );\n  }\n}\n\nexport default ToolbarUploadButton;\n","import React from 'react';\n\nclass Icon extends React.Component\n{\n  constructor(props) { super(props); }\n\n  //Override\n  render()\n  {\n    return (\n      <svg id={this.props.id} className={this.props.className} style={this.props.style}\n      xmlns=\"http://www.w3.org/2000/svg\"\n      width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n        <path d=\"M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 2zm-3-7V3.5L18.5 9H13z\"/>\n      </svg>\n    );\n  }\n}\nexport default Icon;\n","import React from 'react';\n\nclass Icon extends React.Component\n{\n  constructor(props) { super(props); }\n\n  //Override\n  render()\n  {\n    return (\n      <svg id={this.props.id} className={this.props.className} style={this.props.style}\n      xmlns=\"http://www.w3.org/2000/svg\"\n      width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n        <path d=\"M12.5 8c-2.65 0-5.05.99-6.9 2.6L2 7v9h9l-3.62-3.62c1.39-1.16 3.16-1.88 5.12-1.88 3.54 0 6.55 2.31 7.6 5.5l2.37-.78C21.08 11.03 17.15 8 12.5 8z\"/>\n      </svg>\n    );\n  }\n}\nexport default Icon;\n","import React from 'react';\n\nclass Icon extends React.Component\n{\n  constructor(props) { super(props); }\n\n  //Override\n  render()\n  {\n    return (\n      <svg id={this.props.id} className={this.props.className} style={this.props.style}\n      xmlns=\"http://www.w3.org/2000/svg\"\n      width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n        <path d=\"M18.4 10.6C16.55 8.99 14.15 8 11.5 8c-4.65 0-8.58 3.03-9.96 7.22L3.9 16c1.05-3.19 4.05-5.5 7.6-5.5 1.95 0 3.73.72 5.12 1.88L13 16h9V7l-3.6 3.6z\"/>\n      </svg>\n    );\n  }\n}\nexport default Icon;\n","import React from 'react';\n\nclass Icon extends React.Component\n{\n  constructor(props) { super(props); }\n\n  //Override\n  render()\n  {\n    return (\n      <svg id={this.props.id} className={this.props.className} style={this.props.style}\n      xmlns=\"http://www.w3.org/2000/svg\"\n      width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n        <path d=\"M20 8h-2.81c-.45-.78-1.07-1.45-1.82-1.96L17 4.41 15.59 3l-2.17 2.17C12.96 5.06 12.49 5 12 5s-.96.06-1.41.17L8.41 3 7 4.41l1.62 1.63C7.88 6.55 7.26 7.22 6.81 8H4v2h2.09c-.05.33-.09.66-.09 1v1H4v2h2v1c0 .34.04.67.09 1H4v2h2.81c1.04 1.79 2.97 3 5.19 3s4.15-1.21 5.19-3H20v-2h-2.09c.05-.33.09-.66.09-1v-1h2v-2h-2v-1c0-.34-.04-.67-.09-1H20V8zm-4 4v3c0 .22-.03.47-.07.7l-.1.65-.37.65c-.72 1.24-2.04 2-3.46 2s-2.74-.77-3.46-2l-.37-.64-.1-.65C8.03 15.48 8 15.23 8 15v-4c0-.23.03-.48.07-.7l.1-.65.37-.65c.3-.52.72-.97 1.21-1.31l.57-.39.74-.18c.31-.08.63-.12.94-.12.32 0 .63.04.95.12l.68.16.61.42c.5.34.91.78 1.21 1.31l.38.65.1.65c.04.22.07.47.07.69v1zm-6 2h4v2h-4zm0-4h4v2h-4z\"/>\n      </svg>\n    );\n  }\n}\nexport default Icon;\n","import React from 'react';\n\nclass Icon extends React.Component\n{\n  constructor(props) { super(props); }\n\n  //Override\n  render()\n  {\n    return (\n      <svg id={this.props.id} className={this.props.className} style={this.props.style}\n      xmlns=\"http://www.w3.org/2000/svg\"\n      width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n        <path d={\"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zm6.93 6h-2.95c-.32-1.25-.78-2.45-1.38-3.56 1.84.63 3.37 1.91 4.33 3.56zM12 4.04c.83 1.2 1.48 2.53 1.91 3.96h-3.82c.43-1.43 1.08-2.76 1.91-3.96zM4.26 14C4.1 13.36 4 12.69 4 12s.1-1.36.26-2h3.38c-.08.66-.14 1.32-.14 2 0 .68.06 1.34.14 2H4.26zm.82 2h2.95c.32 1.25.78 2.45 1.38 3.56-1.84-.63-3.37-1.9-4.33-3.56zm2.95-8H5.08c.96-1.66 2.49-2.93 4.33-3.56C8.81 5.55 8.35 6.75 8.03 8zM12 19.96c-.83-1.2-1.48-2.53-1.91-3.96h3.82c-.43 1.43-1.08 2.76-1.91 3.96zM14.34 14H9.66c-.09-.66-.16-1.32-.16-2 0-.68.07-1.35.16-2h4.68c.09.65.16 1.32.16 2 0 .68-.07 1.34-.16 2zm.25 5.56c.6-1.11 1.06-2.31 1.38-3.56h2.95c-.96 1.65-2.49 2.93-4.33 3.56zM16.36 14c.08-.66.14-1.32.14-2 0-.68-.06-1.34-.14-2h3.38c.16.64.26 1.31.26 2s-.1 1.36-.26 2h-3.38z\"}/>\n      </svg>\n    );\n  }\n}\nexport default Icon;\n","import React from 'react';\n\nclass Icon extends React.Component\n{\n  constructor(props) { super(props); }\n\n  //Override\n  render()\n  {\n    return (\n      <svg id={this.props.id} className={this.props.className} style={this.props.style}\n      xmlns=\"http://www.w3.org/2000/svg\"\n      width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n        <path d=\"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 17h-2v-2h2v2zm2.07-7.75l-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z\"/>\n      </svg>\n    );\n  }\n}\nexport default Icon;\n","import React from 'react';\n\nclass Icon extends React.Component\n{\n  constructor(props) { super(props); }\n\n  //Override\n  render()\n  {\n    return (\n      <svg id={this.props.id} className={this.props.className} style={this.props.style}\n      xmlns=\"http://www.w3.org/2000/svg\"\n      width=\"24\" height=\"24\" viewBox=\"0 0 20 20\">\n        <path d=\"M15.95 10.78c.03-.25.05-.51.05-.78s-.02-.53-.06-.78l1.69-1.32c.15-.12.19-.34.1-.51l-1.6-2.77c-.1-.18-.31-.24-.49-.18l-1.99.8c-.42-.32-.86-.58-1.35-.78L12 2.34c-.03-.2-.2-.34-.4-.34H8.4c-.2 0-.36.14-.39.34l-.3 2.12c-.49.2-.94.47-1.35.78l-1.99-.8c-.18-.07-.39 0-.49.18l-1.6 2.77c-.1.18-.06.39.1.51l1.69 1.32c-.04.25-.07.52-.07.78s.02.53.06.78L2.37 12.1c-.15.12-.19.34-.1.51l1.6 2.77c.1.18.31.24.49.18l1.99-.8c.42.32.86.58 1.35.78l.3 2.12c.04.2.2.34.4.34h3.2c.2 0 .37-.14.39-.34l.3-2.12c.49-.2.94-.47 1.35-.78l1.99.8c.18.07.39 0 .49-.18l1.6-2.77c.1-.18.06-.39-.1-.51l-1.67-1.32zM10 13c-1.65 0-3-1.35-3-3s1.35-3 3-3 3 1.35 3 3-1.35 3-3 3z\"/>\n      </svg>\n    );\n  }\n}\nexport default Icon;\n","class AbstractAutoSaveHandler\n{\n  onAutoSaveLoad(dataStorage) {}\n  onAutoSaveUpdate(dataStorage) {}\n  onAutoSaveUnload(dataStorage) {}\n}\n\nexport default AbstractAutoSaveHandler;\n","import AbstractAutoSaveHandler from 'util/storage/AbstractAutoSaveHandler.js';\n\nclass AppSaver extends AbstractAutoSaveHandler\n{\n  constructor(app)\n  {\n    super();\n\n    this._app = app;\n  }\n\n  //Override\n  onAutoSaveLoad(dataStorage)\n  {\n    const app = this._app;\n    const session = app.getSession();\n    const currentModule = session.getCurrentModule();\n    const currentModuleName = currentModule.getModuleName();\n\n    const data = dataStorage.getDataAsObject(\"graph-\" + currentModuleName);\n    if (data)\n    {\n      const exporter = app.getExportManager().getDefaultExporter();\n      if (exporter)\n      {\n        exporter.importFromData(data, currentModule);\n\n        app.getUndoManager().captureEvent();\n      }\n    }\n  }\n\n  //Override\n  onAutoSaveUpdate(dataStorage)\n  {\n    const app = this._app;\n    const session = app.getSession();\n    const currentModule = session.getCurrentModule();\n    const currentModuleName = currentModule.getModuleName();\n\n    const exporter = app.getExportManager().getDefaultExporter();\n    if (exporter)\n    {\n      const data = exporter.exportToData(currentModule);\n      dataStorage.setDataAsObject(\"graph-\" + currentModuleName, data);\n    }\n  }\n\n  //Override\n  onAutoSaveUnload(dataStorage)\n  {\n    //Don't do anything...\n  }\n\n  getApp() { return this._app; }\n}\n\nexport default AppSaver;\n","import AbstractAutoSaveHandler from 'util/storage/AbstractAutoSaveHandler.js';\nimport * as ColorHelper from 'util/ColorHelper.js';\n\nexport const COLOR_STORAGE_ID = \"prefs-color\";\n\nclass ColorSaver extends AbstractAutoSaveHandler\n{\n  constructor(styleOpts)\n  {\n    super();\n\n    this._styleOpts = styleOpts;\n  }\n\n  initialize()\n  {\n    const root = document.getElementById(\"root\");\n    const opts = this._styleOpts;\n\n    function activeColor(opt, value)\n    {\n      const color = [];\n      ColorHelper.HEXtoRGB(value, color);\n      ColorHelper.invertRGB(color, false, color);\n      const result = ColorHelper.RGBtoHEX(color);\n      //Set style\n      opts.getOptionByProp(opt.prop + \"-active\").setStyle(result);\n    }\n    function liteColor(opt, value)\n    {\n      //v < 0.15 ? lighten : darken\n      const color = [];\n      const inverted = [];\n      ColorHelper.HEXtoRGB(value, color);\n      ColorHelper.invertRGB(color, true, inverted);\n      ColorHelper.blendRGB(0.39, color, inverted, color);\n      const result = ColorHelper.RGBtoHEX(color);\n      //Set style\n      opts.getOptionByProp(opt.prop + \"-lite\").setStyle(result);\n    }\n    function darkColor(opt, value)\n    {\n      //v < 0.15 ? lighten : darken\n      const color = [];\n      const inverted = [];\n      ColorHelper.HEXtoRGB(value, color);\n      ColorHelper.invertRGB(color, true, inverted);\n      ColorHelper.blendRGB(0.2, color, inverted, color);\n      const result = ColorHelper.RGBtoHEX(color);\n      //Set style\n      opts.getOptionByProp(opt.prop + \"-dark\").setStyle(result);\n    }\n    opts.registerStyleOption(root, \"--color-graph-node\", \"color\", \"graph\");\n    opts.registerStyleOption(root, \"--color-graph-text\", \"color\", \"graph\");\n    opts.registerStyleOption(root, \"--color-graph-select\", \"color\", \"graph\");\n\n    opts.registerStyleOption(root, \"--color-accent\", \"color\", \"general\");\n    opts.registerStyleOption(root, \"--color-primary\", \"color\", \"general\", (...args) => {\n      liteColor(...args);\n      darkColor(...args);\n    });\n    opts.registerStyleOption(root, \"--color-primary-text\", \"color\", \"general\");\n    opts.registerStyleOption(root, \"--color-primary-lite\", \"color\", \"hidden\");\n    opts.registerStyleOption(root, \"--color-primary-dark\", \"color\", \"hidden\");\n\n    opts.registerStyleOption(root, \"--color-background\", \"color\", \"general\", (...args) => {\n      activeColor(...args);\n      liteColor(...args);\n    });\n    opts.registerStyleOption(root, \"--color-background-active\", \"color\", \"hidden\");\n    opts.registerStyleOption(root, \"--color-background-lite\", \"color\", \"hidden\");\n\n    opts.registerStyleOption(root, \"--color-success\", \"color\", \"general\");\n    opts.registerStyleOption(root, \"--color-warning\", \"color\", \"general\");\n\n    opts.registerStyleOption(root, \"--color-surface\", \"color\", \"surface\", (...args) => {\n      activeColor(...args);\n      liteColor(...args);\n      darkColor(...args);\n    });\n    opts.registerStyleOption(root, \"--color-surface-text\", \"color\", \"surface\");\n    opts.registerStyleOption(root, \"--color-surface-active\", \"color\", \"surface\");\n    opts.registerStyleOption(root, \"--color-surface-lite\", \"color\", \"hidden\");\n    opts.registerStyleOption(root, \"--color-surface-dark\", \"color\", \"hidden\");\n\n    opts.registerStyleOption(root, \"--color-surface-error\", \"color\", \"surface\", darkColor);\n    opts.registerStyleOption(root, \"--color-surface-error-dark\", \"color\", \"hidden\");\n    opts.registerStyleOption(root, \"--color-surface-success\", \"color\", \"surface\", darkColor);\n    opts.registerStyleOption(root, \"--color-surface-success-dark\", \"color\", \"hidden\");\n    opts.registerStyleOption(root, \"--color-surface-warning\", \"color\", \"surface\", darkColor);\n    opts.registerStyleOption(root, \"--color-surface-warning-dark\", \"color\", \"hidden\");\n\n    opts.initialize();\n  }\n\n  destroy()\n  {\n    const opts = this._styleOpts;\n    opts.terminate();\n  }\n\n  //Override\n  onAutoSaveLoad(dataStorage)\n  {\n    const opts = this._styleOpts;\n    const data = dataStorage.getDataAsObject(COLOR_STORAGE_ID);\n    if (!data) return;\n\n    for(let prop in data)\n    {\n      const opt = opts.getOptionByProp(prop);\n      if (opt)\n      {\n        opt.setStyle(data[prop]);\n      }\n    }\n  }\n\n  //Override\n  onAutoSaveUnload(dataStorage)\n  {\n    //Don't do anything...\n  }\n\n  //Override\n  onAutoSaveUpdate(dataStorage)\n  {\n    const opts = this._styleOpts;\n    const data = {};\n    for(let opt of opts.getOptions())\n    {\n      if (!opt.isDefaultStyle())\n      {\n        data[opt.prop] = opt.getStyle();\n      }\n    }\n    dataStorage.setDataAsObject(COLOR_STORAGE_ID, data);\n  }\n\n  getStyleOpts()\n  {\n    return this._styleOpts;\n  }\n}\n\nexport default ColorSaver;\n","import Modules from 'modules/Modules.js';\nimport LocalStorage from 'util/storage/LocalStorage.js';\nimport * as URLHelper from 'util/URLHelper.js';\nimport {guid} from 'util/MathHelper.js';\n\nconst DEFAULT_MODULE_ID = \"fsa2\"\nexport const CURRENT_MODULE_STORAGE_ID = \"currentModule\";\nconst MODULE_LOAD_DELAY = 300;\nlet MODULE_TIMEOUT = null;\n\nclass Session\n{\n  constructor()\n  {\n    this._name = I18N.toString(\"file.untitled\");\n    this._module = null;\n    this._moduleClass = null;\n    this._app = null;\n\n    this._sessionID = null;\n\n    this._listeners = [];\n  }\n\n  addListener(listener)\n  {\n    this._listeners.push(listener);\n    return this;\n  }\n\n  startSession(app, moduleName=null)\n  {\n    if (this._module !== null) return;\n\n    console.log(\"[Session] Starting session for module \\'\" + moduleName + \"\\'...\");\n\n    //Load from storage, url, or default, if not specified...\n    if (!moduleName || moduleName.length <= 0)\n    {\n      const urlParams = URLHelper.getURLParameters(URLHelper.getCurrentURL());\n      if ('module' in urlParams) moduleName = urlParams['module'];\n      if (!moduleName || moduleName.length <= 0)\n      {\n        moduleName = LocalStorage.getData(CURRENT_MODULE_STORAGE_ID);\n        if (!moduleName || moduleName.length <= 0)\n        {\n          moduleName = DEFAULT_MODULE_ID;\n        }\n      }\n    }\n\n    //Check registered module info...\n    const moduleInfo = Modules[moduleName];\n    if (!moduleInfo)\n    {\n      window.alert(\"Cannot find registered module with id \\'\" + moduleName + \"\\'\");\n      return;\n    }\n    const useExperimental = moduleInfo['experimental'];\n    if (useExperimental && !app.isExperimental())\n    {\n      window.alert(\"Cannot load experimental module with id \\'\" + moduleName + \"\\' on stable app version.\");\n      return;\n    }\n    else if (!useExperimental && app.isExperimental())\n    {\n      window.alert(\"Cannot load stable module with id \\'\" + moduleName + \"\\' on experimental app version.\");\n      return;\n    }\n\n    //Overwrite any past calls...\n    if (MODULE_TIMEOUT) clearTimeout(MODULE_TIMEOUT);\n\n    MODULE_TIMEOUT = setTimeout(() => {\n      moduleInfo.fetch((ModuleClass) => {\n        MODULE_TIMEOUT = null;\n\n        this._app = app;\n        this._moduleClass = ModuleClass;\n        this._sessionID = guid();\n        try\n        {\n          this._module = new ModuleClass(app);\n          this._module.initialize(app);\n\n          for(const listener of this._listeners)\n          {\n            listener.onSessionStart(this);\n          }\n\n          LocalStorage.setData(CURRENT_MODULE_STORAGE_ID, moduleName);\n        }\n        catch (e)\n        {\n          console.error(e);\n          window.alert(\"Could not load module with id \\'\" + moduleName + \"\\'\");\n        }\n      });\n    }, MODULE_LOAD_DELAY);\n  }\n\n  restartSession(app, moduleName=null)\n  {\n    if (this._module === null) throw new Error(\"Cannot restart session that is not yet started\");\n\n    this.stopSession(app);\n    this.startSession(app, moduleName);\n  }\n\n  updateSession(app)\n  {\n    if (this._module)\n    {\n      this._module.update(app);\n    }\n  }\n\n  stopSession(app)\n  {\n    if (this._module === null) return;\n\n    console.log(\"[Session] Stopping session...\");\n\n    for(const listener of this._listeners)\n    {\n      listener.onSessionStop(this);\n    }\n\n    this._module.destroy(this._app);\n    this._moduleClass = null;\n    this._module = null;\n    this._sessionID = null;\n    this._app = null;\n  }\n\n  setProjectName(name)\n  {\n    if (!name || name.length <= 0)\n    {\n      this._name = I18N.toString(\"file.untitled\");\n    }\n    else\n    {\n      this._name = name;\n    }\n\n    const value = this._name;\n    const element = document.getElementById('window-title');\n    const string = element.innerHTML;\n    const separator = string.indexOf('-');\n    if (separator !== -1)\n    {\n      element.innerHTML = string.substring(0, separator).trim() + \" - \" + value;\n    }\n    else\n    {\n      element.innerHTML = string + \" - \" + value;\n    }\n  }\n\n  getProjectName() { return this._name; }\n  getCurrentModule() { return this._module; }\n  isModuleLoaded() { return this._module !== null; }\n  getSessionID() { return this._sessionID; }\n  getApp() { return this._app; }\n}\n\nexport default Session;\n","export function getCurrentURL()\n{\n  return window.location.href;\n}\n\n//https://gomakethings.com/getting-all-query-string-values-from-a-url-with-vanilla-js/\nexport function getURLParameters(url)\n{\n  const result = {};\n  const parser = document.createElement('a');\n  parser.href = url;\n  const query = parser.search.substring(1);\n  const vars = query.split('&');\n  for(const v of vars)\n  {\n    const pair = v.split('=');\n    result[pair[0]] = decodeURIComponent(pair[1]);\n  }\n  return result;\n}\n","class ExportManager\n{\n  constructor(app)\n  {\n    this._app = app;\n\n    this._exporters = [];\n  }\n\n  addExporter(exporter)\n  {\n    this._exporters.push(exporter);\n    return this;\n  }\n\n  addExporters(exporters)\n  {\n    for(const exporter of exporters)\n    {\n      this._exporters.push(exporter);\n    }\n    return this;\n  }\n\n  //DuckType(SessionListener)\n  onSessionStart(session)\n  {\n\n  }\n\n  //DuckType(SessionListener)\n  onSessionStop(session)\n  {\n    this._exporters.length = 0;\n  }\n\n  tryImportFromFile(fileBlob)\n  {\n    if (!fileBlob) throw new Error(\"Unable to import null file\");\n    if (!(fileBlob instanceof File)) throw new Error(\"Unable to import object as file\");\n\n    const currentModule = this._app.getSession().getCurrentModule();\n    let result = Promise.reject();\n    const fileName = fileBlob.name;\n    const exporters = this._exporters;\n\n    for(const exporter of exporters)\n    {\n      if (exporter.canImport(currentModule) && exporter.doesSupportFile() && fileName.endsWith(exporter.getFileType()))\n      {\n        result = result.catch(e => exporter.importFromFile(fileBlob, currentModule));\n      }\n    }\n\n    return result.catch(e => {\n      console.error(e);\n      throw new Error(\"Cannot find valid exporter for file: \" + fileName);\n    });\n  }\n\n  tryExportToFile(exporter=null)\n  {\n    const session = this._app.getSession();\n    const currentModule = session.getCurrentModule();\n    const fileName = session.getProjectName();\n    if (!exporter) exporter = this.getDefaultExporter();\n    exporter.exportToFile(fileName, currentModule)\n  }\n\n  getImportFileTypes()\n  {\n    const session = this._app.getSession();\n    const currentModule = session.getCurrentModule();\n    return this._exporters.map(e => {\n      if (!e.canImport(currentModule) || !e.doesSupportFile()) return null;\n      return '.' + e.getFileType();\n    });\n  }\n\n  getDefaultExporter()\n  {\n    return this._exporters[0];\n  }\n\n  getExporters()\n  {\n    return this._exporters;\n  }\n}\n\nexport default ExportManager;\n","class DrawerManager\n{\n  constructor()\n  {\n    this._panelClasses = [];\n    this._panelProps = null;\n  }\n\n  setPanelProps(props)\n  {\n    this._panelProps = props;\n    return this;\n  }\n\n  addPanelClass(panelClass)\n  {\n    this._panelClasses.push(panelClass);\n    return this;\n  }\n\n  //DuckType(SessionListener)\n  onSessionStart(session)\n  {\n    \n  }\n\n  //DuckType(SessionListener)\n  onSessionStop(session)\n  {\n    this._panelClasses.length = 0;\n    this._panelProps = null;\n  }\n\n  getPanelProps()\n  {\n    return this._panelProps;\n  }\n\n  getPanelClasses()\n  {\n    return this._panelClasses;\n  }\n}\n\nexport default DrawerManager;\n","class MenuManager\n{\n  constructor()\n  {\n    this._panelClasses = [];\n    this._panelProps = null;\n  }\n\n  setPanelProps(props)\n  {\n    this._panelProps = props;\n    return this;\n  }\n\n  addPanelClass(panelClass)\n  {\n    this._panelClasses.push(panelClass);\n    return this;\n  }\n\n  //DuckType(SessionListener)\n  onSessionStart(session)\n  {\n  }\n\n  //DuckType(SessionListener)\n  onSessionStop(session)\n  {\n    session.getApp().getToolbarComponent().closeBar();\n    \n    this._panelClasses.length = 0;\n    this._panelProps = null;\n  }\n\n  getPanelProps()\n  {\n    return this._panelProps;\n  }\n\n  getPanelClasses()\n  {\n    return this._panelClasses;\n  }\n}\n\nexport default MenuManager;\n","class ViewportManager\n{\n  constructor()\n  {\n    this._viewClasses = [];\n    this._viewProps = null;\n  }\n\n  setViewProps(props)\n  {\n    this._viewProps = props;\n    return this;\n  }\n\n  addViewClass(viewClass)\n  {\n    this._viewClasses.push(viewClass);\n    return this;\n  }\n\n  //DuckType(SessionListener)\n  onSessionStart(session)\n  {\n\n  }\n\n  //DuckType(SessionListener)\n  onSessionStop(session)\n  {\n    this._viewClasses.length = 0;\n    this._viewProps = null;\n  }\n\n  getViewProps()\n  {\n    return this._viewProps;\n  }\n\n  getViewClasses()\n  {\n    return this._viewClasses;\n  }\n}\n\nexport default ViewportManager;\n","import React from 'react';\nimport Style from './HotKeyView.css';\n\nconst AVAILABLE_HOTKEY_REFRESH_RATE = 100;\n\nclass HotKeyView extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this._cachedHotKeys = [];\n    this._cacheTimeout = null;\n  }\n\n  //Override\n  render()\n  {\n    const hotKeyManager = this.props.hotKeyManager;\n    const showHotKeys = !this.props.disabled && hotKeyManager.isEnabled();\n\n    if (!this._cacheTimeout && showHotKeys)\n    {\n      this._cacheTimeout = setTimeout(() => {\n        this._cacheTimeout = null;\n        this._cachedHotKeys.length = 0;\n        hotKeyManager.getCurrentlyPossibleHotKeys(this._cachedHotKeys);\n      }, AVAILABLE_HOTKEY_REFRESH_RATE);\n    }\n\n    const useCount = hotKeyManager.getCurrentHotKeyRepeatCount();\n    const currentHotKey = hotKeyManager.getCurrentHotKey();\n\n    return (\n      <div id={this.props.id}\n        className={Style.hotkey_container +\n          \" \" + this.props.className}\n        style={this.props.style}>\n        {showHotKeys && this._cachedHotKeys.map((e, i) => {\n          const isActive = currentHotKey === e;\n          return (\n            <div key={e.localizedKeys + \":\" + i + \":\" + (isActive ? useCount : 0)}\n              className={Style.hotkey +\n                (isActive ? \" active \" : \"\")}>\n              <label className={Style.hotkey_label}>\n                {e.localizedKeys}\n              </label>\n              <label className={Style.hotkey_name}>\n                {e.name + (isActive && useCount > 1 ? \" x\" + useCount : \"\")}\n              </label>\n            </div>\n          );\n        })}\n      </div>\n    );\n  }\n}\n\nexport default HotKeyView;\n","const MAX_HISTORY_LENGTH = 1000;\n\nclass UndoManager\n{\n  constructor()\n  {\n    this.history = [];\n    this.offsetIndex = 0;\n\n    this._handlerFactory = null;\n  }\n\n  setEventHandlerFactory(factory)\n  {\n    this._handlerFactory = factory;\n    return this;\n  }\n\n  //DuckType(SessionListener)\n  onSessionStart(session)\n  {\n\n  }\n\n  //DuckType(SessionListener)\n  onSessionStop(session)\n  {\n    this.clear();\n  }\n\n  captureEvent(...args)\n  {\n    if (typeof this._handlerFactory === 'function')\n    {\n      const handler = this._handlerFactory(args);\n      if (handler)\n      {\n        this.captureEventAsHandler(handler);\n      }\n      else\n      {\n        throw new Error(\"Cannot create valid undo event handler for capture\");\n      }\n    }\n    else\n    {\n      console.error(\"Missing default undo event handler for capture\");\n    }\n  }\n\n  captureEventAsHandler(eventHandler)\n  {\n    //Pop it all until current event\n    while(this.offsetIndex > 0)\n    {\n      this.history.pop();\n      --this.offsetIndex;\n    }\n\n    //Push the current event to the stack\n    this.history.push(eventHandler);\n\n    while(this.history.length > MAX_HISTORY_LENGTH)\n    {\n      this.history.unshift();\n    }\n  }\n\n  getPreviousEvent()\n  {\n    if (!this.canUndo()) return null;\n    return this.history[this.history.length - this.offsetIndex - 1];\n  }\n\n  getNextEvent()\n  {\n    if (!this.canRedo()) return null;\n    return this.history[this.history.length - this.offsetIndex + 1];\n  }\n\n  undo()\n  {\n    if (!this.canUndo())\n    {\n      //Already the oldest recorded event!\n      return;\n    }\n\n    const event = this.history[this.history.length - this.offsetIndex - 1];\n    ++this.offsetIndex;\n\n    event.applyUndo(this);\n  }\n\n  canUndo()\n  {\n    return this.offsetIndex < this.history.length;\n  }\n\n  redo()\n  {\n    if (!this.canRedo())\n    {\n      //Already the most recent event!\n      return;\n    }\n\n    --this.offsetIndex;\n    const event = this.history[this.history.length - this.offsetIndex - 1];\n\n    event.applyRedo(this);\n  }\n\n  canRedo()\n  {\n    return this.offsetIndex > 0;\n  }\n\n  clear()\n  {\n    this.history.length = 0;\n    this.offsetIndex = 0;\n  }\n}\n\nexport default UndoManager;\n","import {ONESHOT_MODE} from 'experimental/tooltip/TooltipView.js';\n\nclass TooltipManager\n{\n  constructor()\n  {\n    this._tooltips = [];\n\n    this._transitionMode = ONESHOT_MODE;\n  }\n\n  setTransitionMode(transitionMode)\n  {\n    this._transitionMode = transitionMode;\n    return this;\n  }\n\n  addTooltip(tooltip)\n  {\n    this._tooltips.push(tooltip);\n    return this;\n  }\n\n  //DuckType(SessionListener)\n  onSessionStart(session)\n  {\n\n  }\n\n  //DuckType(SessionListener)\n  onSessionStop(session)\n  {\n    this._tooltips.length = 0;\n    this._transitionMode = ONESHOT_MODE;\n  }\n\n  getTransitionMode()\n  {\n    return this._transitionMode;\n  }\n\n  getTooltips()\n  {\n    return this._tooltips;\n  }\n}\n\nexport default TooltipManager;\n","import React from 'react';\nimport { hot } from 'react-hot-loader/root';\nimport Style from './App.css';\n\nimport DrawerView, { DRAWER_SIDE_RIGHT, DRAWER_SIDE_BOTTOM, DRAWER_BAR_DIRECTION_VERTICAL, DRAWER_BAR_DIRECTION_HORIZONTAL } from 'experimental/drawer/DrawerView.js';\nimport ToolbarView from 'experimental/toolbar/ToolbarView.js';\nimport ViewportView from 'experimental/viewport/ViewportView.js';\nimport TooltipView, { ONESHOT_MODE } from 'experimental/tooltip/TooltipView.js';\nimport UploadDropZone from 'experimental/components/UploadDropZone.js';\nimport ViewportComponent from 'util/input/components/ViewportComponent.js';\nimport NotificationView from 'session/manager/notification/components/NotificationView.js';\nimport IconButton from 'experimental/components/IconButton.js';\n\nimport ExportPanel from 'experimental/menus/export/ExportPanel.js';\nimport OptionPanel from 'experimental/menus/option/OptionPanel.js';\nimport LanguagePanel from 'experimental/menus/language/LanguagePanel.js';\nimport ModuleLoaderPanel from 'experimental/menus/moduleloader/ModuleLoaderPanel.js';\n\nimport ToolbarButton, {TOOLBAR_CONTAINER_TOOLBAR, TOOLBAR_CONTAINER_MENU} from 'experimental/toolbar/ToolbarButton.js';\nimport ToolbarDivider from 'experimental/toolbar/ToolbarDivider.js';\nimport ToolbarUploadButton from 'experimental/toolbar/ToolbarUploadButton.js';\nimport PageEmptyIcon from 'experimental/iconset/PageEmptyIcon.js';\nimport UndoIcon from 'experimental/iconset/UndoIcon.js';\nimport RedoIcon from 'experimental/iconset/RedoIcon.js';\nimport UploadIcon from 'experimental/iconset/UploadIcon.js';\nimport DownloadIcon from 'experimental/iconset/DownloadIcon.js';\nimport BugIcon from 'experimental/iconset/BugIcon.js';\nimport WorldIcon from 'experimental/iconset/WorldIcon.js';\nimport HelpIcon from 'experimental/iconset/HelpIcon.js';\nimport SettingsIcon from 'experimental/iconset/SettingsIcon.js';\nimport EditPencilIcon from 'experimental/iconset/EditPencilIcon.js';\n\nimport AppSaver from 'experimental/AppSaver.js';\nimport ColorSaver from 'experimental/ColorSaver.js';\n\nimport AutoSave from 'util/storage/AutoSave.js';\nimport LocalStorage from 'util/storage/LocalStorage.js';\n\nimport StyleOptionRegistry from 'deprecated/system/styleopt/StyleOptionRegistry.js';\n\nimport Session from 'session/Session.js';\nimport ExportManager from 'session/manager/export/ExportManager.js';\nimport DrawerManager from 'session/manager/DrawerManager.js';\nimport MenuManager from 'session/manager/MenuManager.js';\nimport ViewportManager from 'session/manager/ViewportManager.js';\nimport HotKeyManager from 'session/manager/hotkey/HotKeyManager.js';\nimport HotKeyView from 'session/manager/hotkey/HotKeyView.js';\nimport UndoManager from 'session/manager/undo/UndoManager.js';\nimport RenderManager, {RENDER_LAYER_WORKSPACE, RENDER_LAYER_WORKSPACE_OVERLAY,\n  RENDER_LAYER_VIEWPORT, RENDER_LAYER_VIEWPORT_OVERLAY} from 'session/manager/RenderManager.js';\nimport TooltipManager from 'session/manager/TooltipManager.js';\nimport NotificationManager, {ERROR_LAYOUT_ID} from 'session/manager/notification/NotificationManager.js';\n\nconst BUGREPORT_URL = \"https://goo.gl/forms/XSil43Xl5xLHsa0E2\";\nconst HELP_URL = \"https://github.com/flapjs/FLAPJS-WebApp/blob/master/docs/HELP.md\";\n\nconst SMOOTH_OFFSET_DAMPING = 0.4;\nconst MIN_SCALE = 0.1;\nconst MAX_SCALE = 10;\n\nconst DRAWER_INDEX_ABOUT = 0;\n\nconst MENU_INDEX_EXPORT = 0;\nconst MENU_INDEX_OPTION = 1;\nconst MENU_INDEX_LANGUAGE = 2;\nconst MENU_INDEX_MODULE = 3;\n\nconst ERROR_UPLOAD_NOTIFICATION_TAG = \"error_upload\";\n\nclass App extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this._workspace = React.createRef();\n    this._toolbar = null;\n    this._drawer = null;\n    this._viewport = null;\n    this._labeleditor = null;\n\n    this._styleOpts = new StyleOptionRegistry();\n    this._colorSaver = new ColorSaver(this._styleOpts);\n\n    this._saver = new AppSaver(this);\n\n    this._undoManager = new UndoManager();\n    this._hotKeyManager = new HotKeyManager();\n    this._exportManager = new ExportManager(this);\n    this._drawerManager = new DrawerManager();\n    this._menuManager = new MenuManager();\n    this._viewportManager = new ViewportManager();\n    this._renderManager = new RenderManager();\n    this._tooltipManager = new TooltipManager();\n    this._notificationManager = new NotificationManager();\n\n    this._session = new Session()\n      .addListener(this._undoManager)\n      .addListener(this._hotKeyManager)\n      .addListener(this._exportManager)\n      .addListener(this._drawerManager)\n      .addListener(this._menuManager)\n      .addListener(this._viewportManager)\n      .addListener(this._renderManager)\n      .addListener(this._tooltipManager)\n      .addListener(this._notificationManager)\n      .addListener(this);\n\n    //TODO: This is only used to control transitions (do we really need it?)\n    this._init = false;\n\n    this.state = {\n      hide: false\n    };\n\n    this._mediaQuerySmallWidthList = window.matchMedia(\"only screen and (max-width: 400px)\");\n    this._mediaQuerySmallHeightList = window.matchMedia(\"only screen and (min-height: 400px)\");\n\n    //this._notificationManager.pushNotification(\"Welcome to Flap.js\");\n    this.onModuleTitleClick = this.onModuleTitleClick.bind(this);\n    this.onToolbarClearButton = this.onToolbarClearButton.bind(this);\n  }\n\n  //Override\n  componentDidMount()\n  {\n    AutoSave.initialize(LocalStorage);\n    //Start session\n    this._session.startSession(this);\n  }\n\n  //Override\n  componentWillUnmount()\n  {\n    //Stop session\n    this._session.stopSession(this);\n    AutoSave.destroy();\n  }\n\n  //DuckType\n  onSessionStart(session)\n  {\n    //Default values\n    this._menuManager\n      .addPanelClass(ExportPanel)//MENU_INDEX_EXPORT\n      .addPanelClass(OptionPanel)//MENU_INDEX_OPTION\n      .addPanelClass(LanguagePanel)//MENU_INDEX_LANGUAGE\n      .addPanelClass(ModuleLoaderPanel);//MENU_INDEX_MODULE\n    this._hotKeyManager\n      .registerAltHotKey(\"Show Hints\", () => {IconButton.SHOW_LABEL = !IconButton.SHOW_LABEL});\n\n    this._colorSaver.initialize();\n\n    AutoSave.registerHandler(this._saver);\n    AutoSave.registerHandler(this._colorSaver);\n\n    this._init = true;\n  }\n\n  //DuckType\n  onSessionStop(session)\n  {\n    this._init = false;\n\n    AutoSave.unregisterHandler(this._saver);\n    AutoSave.unregisterHandler(this._colorSaver);\n\n    this._colorSaver.destroy();\n  }\n\n  onModuleTitleClick(e)\n  {\n    const drawer = this._drawer;\n    if (!drawer.isDrawerOpen() || !drawer.isCurrentTab(DRAWER_INDEX_ABOUT))\n    {\n      //Open current module info panel\n      drawer.setCurrentTab(DRAWER_INDEX_ABOUT);\n    }\n    else\n    {\n      //On another click... open module change panel\n      const toolbar = this._toolbar;\n      toolbar.setCurrentMenu(MENU_INDEX_MODULE);\n    }\n  }\n\n  onToolbarClearButton(e)\n  {\n    const currentModule = this._session.getCurrentModule();\n    if (currentModule)\n    {\n      currentModule.clear(this);\n    }\n  }\n\n  getWorkspaceComponent() { return this._workspace.current; }\n  getToolbarComponent() { return this._toolbar; }\n\n  getUndoManager() { return this._undoManager; }\n  getHotKeyManager() { return this._hotKeyManager; }\n  getExportManager() { return this._exportManager; }\n  getDrawerManager() { return this._drawerManager; }\n  getMenuManager() { return this._menuManager; }\n  getViewportManager() { return this._viewportManager; }\n  getRenderManager() { return this._renderManager; }\n  getTooltipManager() { return this._tooltipManager; }\n  getNotificationManager() { return this._notificationManager; }\n\n  getSession() { return this._session; }\n  getCurrentModule() { return this._session.getCurrentModule(); }\n  getInputAdapter() { return this.getWorkspaceComponent().getInputAdapter(); }\n  getStyleOpts() { return this._styleOpts; }\n\n  isExperimental() { return true; }\n\n  //Override\n  componentDidUpdate()\n  {\n    this._session.updateSession(this);\n\n    //Disable hotkeys when graph is not in view\n    this._hotKeyManager.setEnabled(\n      !(this._toolbar && this._toolbar.isBarOpen()) &&\n      !(this._drawer && this._drawer.isDrawerOpen() &&\n        this._drawer.isDrawerFullscreen())\n      );\n  }\n\n  renderRenderers(renderers, props)\n  {\n    const session = this._session;\n    const sessionID = session.getSessionID();\n    if (renderers && renderers.length > 0)\n    {\n      return renderers.map((R, i) => <R key={sessionID + \".\" + R.constructor.name + \".\" + i} {...props}/>);\n    }\n    else\n    {\n      return null;\n    }\n  }\n\n  //Override\n  render()\n  {\n    const session = this._session;\n    const sessionID = session.getSessionID();\n    const currentModule = session.getCurrentModule();\n    const currentModuleLocalizedName = currentModule ? currentModule.getLocalizedModuleName() : null;\n\n    const hasSmallWidth = this._mediaQuerySmallWidthList.matches;\n    const hasSmallHeight = this._mediaQuerySmallHeightList.matches;\n    const isFullscreen = this.state.hide;\n\n    const undoManager = this._undoManager;\n    const exportManager = this._exportManager;\n    const drawerManager = this._drawerManager;\n    const menuManager = this._menuManager;\n    const viewportManager = this._viewportManager;\n    const renderManager = this._renderManager;\n    const tooltipManager = this._tooltipManager;\n    const notificationManager = this._notificationManager;\n\n    const drawerPanelClasses = drawerManager.getPanelClasses();\n    const drawerPanelProps = drawerManager.getPanelProps() || {session: session};\n    const menuPanelClasses = menuManager.getPanelClasses();\n    const menuPanelProps = menuManager.getPanelProps() || {session: session};\n    const viewportViewClasses = viewportManager.getViewClasses();\n    const viewportViewProps = viewportManager.getViewProps() || {session: session};\n    const defaultExporter = exportManager.getDefaultExporter();\n\n    const workspaceRenderers = renderManager.getRenderersByLayer(RENDER_LAYER_WORKSPACE);\n    const workspaceOverlayRenderers = renderManager.getRenderersByLayer(RENDER_LAYER_WORKSPACE_OVERLAY);\n    const viewportRenderers = renderManager.getRenderersByLayer(RENDER_LAYER_VIEWPORT);\n    const viewportOverlayRenderers = renderManager.getRenderersByLayer(RENDER_LAYER_VIEWPORT_OVERLAY);\n\n    return (\n      <div className={Style.app_container + (currentModule ? \" active \" : \"\")}>\n        <ToolbarView ref={ref=>this._toolbar=ref} className={Style.app_bar}\n          menus={menuPanelClasses}\n          menuProps={menuPanelProps}\n          hide={isFullscreen}\n          title={currentModuleLocalizedName}\n          session={session}\n          onTitleClick={this.onModuleTitleClick}>\n          <ToolbarButton title={I18N.toString(\"action.toolbar.newmachine\")} icon={PageEmptyIcon}\n            onClick={this.onToolbarClearButton}\n            disabled={!currentModule}/>\n          <ToolbarUploadButton title={I18N.toString(\"action.toolbar.uploadmachine\")} icon={UploadIcon} accept={exportManager.getImportFileTypes().join(\",\")}\n            onUpload={fileBlob => {\n              exportManager.tryImportFromFile(fileBlob)\n                .catch((e) => {\n                  notificationManager.pushNotification(\"ERROR: Unable to load invalid JSON file.\", ERROR_LAYOUT_ID, ERROR_UPLOAD_NOTIFICATION_TAG);\n                  console.error(e);\n                })\n                .finally(() => {\n                  this._toolbar.closeBar();\n                });\n            }}\n            disabled={!defaultExporter || !defaultExporter.canImport(currentModule)}/>\n          <ToolbarButton title={I18N.toString(\"action.toolbar.undo\")} icon={UndoIcon} containerOnly={TOOLBAR_CONTAINER_TOOLBAR}\n            disabled={!undoManager.canUndo()}\n            onClick={()=>undoManager.undo()}/>\n          <ToolbarButton title={I18N.toString(\"action.toolbar.redo\")} icon={RedoIcon} containerOnly={TOOLBAR_CONTAINER_TOOLBAR}\n            disabled={!undoManager.canRedo()}\n            onClick={()=>undoManager.redo()}/>\n          <ToolbarButton title={I18N.toString(\"component.exporting.title\")} icon={DownloadIcon}\n            onClick={()=>this._toolbar.setCurrentMenu(MENU_INDEX_EXPORT)}\n            disabled={!defaultExporter || !defaultExporter.canExport(currentModule)}/>\n          <ToolbarDivider/>\n          <ToolbarButton title={I18N.toString(\"action.toolbar.bug\")} icon={BugIcon} containerOnly={TOOLBAR_CONTAINER_MENU}\n            onClick={()=>window.open(BUGREPORT_URL, '_blank')}/>\n          <ToolbarButton title={I18N.toString(\"action.toolbar.lang\")} icon={WorldIcon} containerOnly={TOOLBAR_CONTAINER_MENU}\n            onClick={()=>this._toolbar.setCurrentMenu(MENU_INDEX_LANGUAGE)}/>\n          <ToolbarButton title={I18N.toString(\"action.toolbar.help\")} icon={HelpIcon}\n            onClick={()=>window.open(HELP_URL, '_blank')}/>\n          <ToolbarButton title={I18N.toString(\"component.options.title\")} icon={SettingsIcon} containerOnly={TOOLBAR_CONTAINER_MENU}\n            onClick={()=>this._toolbar.setCurrentMenu(MENU_INDEX_OPTION)}/>\n          <ToolbarButton title={\"Change Module\"} icon={EditPencilIcon} containerOnly={TOOLBAR_CONTAINER_MENU}\n            onClick={()=>this._toolbar.setCurrentMenu(MENU_INDEX_MODULE)}/>\n        </ToolbarView>\n\n        <DrawerView ref={ref=>this._drawer=ref} className={Style.app_content}\n          panels={drawerPanelClasses}\n          panelProps={drawerPanelProps}\n          side={hasSmallWidth ? DRAWER_SIDE_BOTTOM : DRAWER_SIDE_RIGHT}\n          direction={hasSmallHeight ? DRAWER_BAR_DIRECTION_VERTICAL : DRAWER_BAR_DIRECTION_HORIZONTAL}\n          hide={isFullscreen}>\n\n          <UploadDropZone>\n            <div className=\"viewport\">\n\n              <TooltipView mode={tooltipManager.getTransitionMode()}\n                visible={/* TODO: For the initial fade-in animation */this._init && !undoManager.canUndo()}>\n                {tooltipManager.getTooltips().map((e, i) => <label key={e + \":\" + i}>{e}</label>)}\n              </TooltipView>\n\n              <ViewportComponent ref={this._workspace}>\n                {/* RENDER_LAYER_WORKSPACE */}\n                {this.renderRenderers(workspaceRenderers, {workspace: this.getWorkspaceComponent()})}\n              </ViewportComponent>\n\n              {/* RENDER_LAYER_WORKSPACE_OVERLAY */}\n              {this.renderRenderers(workspaceOverlayRenderers, {workspace: this.getWorkspaceComponent()})}\n\n              <NotificationView notificationManager={notificationManager}/>\n\n              {this._hotKeyManager.isEnabled() &&\n                <HotKeyView hotKeyManager={this._hotKeyManager}/>}\n\n              <ViewportView ref={ref=>this._viewport=ref}\n                views={viewportViewClasses}\n                viewProps={viewportViewProps}>\n                {/* RENDER_LAYER_VIEWPORT */}\n                {this.renderRenderers(viewportRenderers, {viewport: this._viewport})}\n              </ViewportView>\n\n              {/* RENDER_LAYER_VIEWPORT_OVERLAY */}\n              {this.renderRenderers(viewportOverlayRenderers, {viewport: this._viewport})}\n\n            </div>\n          </UploadDropZone>\n        </DrawerView>\n      </div>\n    );\n  }\n}\n\n//For hotloading this class\nexport default hot(App);\n"],"sourceRoot":""}