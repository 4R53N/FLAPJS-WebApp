{"version":3,"sources":["webpack:///./src/app/util/input/AbstractInputHandler.js","webpack:///./src/app/util/input/InputContext.js","webpack:///./src/app/session/manager/undo/AbstractEventHandler.js","webpack:///./src/app/components/iconset/MoveIcon.js","webpack:///./src/app/components/iconset/TrashCanDetailedIcon.js","webpack:///./src/app/components/iconset/ZoomInIcon.js","webpack:///./src/app/components/iconset/ZoomOutIcon.js","webpack:///./src/app/components/iconset/PinpointIcon.js","webpack:///./src/app/experimental/UserUtil.js","webpack:///./src/app/util/input/InputPointer.js","webpack:///./src/app/util/input/ViewportAdapter.js","webpack:///./src/app/util/input/InputAdapter.js","webpack:///./src/app/util/input/components/ViewportComponent.js","webpack:///./src/app/graph2/renderer/BoxRenderer.js","webpack:///./src/app/graph2/renderer/NodeRenderer.js","webpack:///./src/app/graph2/renderer/GraphNodeRenderer.js","webpack:///./src/app/graph2/components/layers/GraphNodeLayer.js","webpack:///./src/app/graph2/renderer/EdgeRenderer.js","webpack:///./src/app/graph2/renderer/GraphEdgeRenderer.js","webpack:///./src/app/graph2/components/layers/GraphEdgeLayer.js","webpack:///./src/app/graph2/renderer/GraphHighlightRenderer.js","webpack:///./src/app/graph2/components/layers/GraphHighlightLayer.js","webpack:///./src/app/graph2/inputs/SelectionBoxInputHandler.js","webpack:///./src/app/graph2/inputs/ViewportInputHandler.js","webpack:///./src/app/graph2/components/views/NodeGraphView.js","webpack:///./src/app/graph2/element/GraphElement.js","webpack:///./src/app/graph2/element/GraphNode.js","webpack:///./src/app/graph2/element/GraphEdge.js","webpack:///./src/app/graph2/components/widgets/pattern/PatternInput.js","webpack:///./src/app/graph2/components/views/LabelEditorView.js","webpack:///./src/app/graph2/components/widgets/TrashCanWidget.js","webpack:///./src/app/graph2/components/widgets/ModeTrayWidget.js","webpack:///./src/app/graph2/components/layers/ViewportLayer.js","webpack:///./src/app/graph2/components/widgets/ZoomWidget.js","webpack:///./src/app/graph2/components/widgets/FocusCenterWidget.js","webpack:///./src/app/graph2/components/layers/ViewportNavigationLayer.js","webpack:///./src/app/graph2/inputs/GraphNodeInputHandler.js","webpack:///./src/app/graph2/inputs/GraphEdgeInputHandler.js","webpack:///./src/app/graph2/controller/InputController.js","webpack:///./src/app/graph2/controller/SelectionBox.js","webpack:///./src/app/graph2/components/views/GraphEditorView.js","webpack:///./src/app/graph2/NodeGraph.js","webpack:///./src/app/graph2/element/QuadraticEdge.js","webpack:///./src/app/util/file/Parser.js","webpack:///./src/app/util/version/SemanticVersion.js","webpack:///./src/app/graph2/NodeGraphParser.js","webpack:///./src/app/graph2/controller/LabelFormatter.js","webpack:///./src/app/graph2/controller/GraphController.js","webpack:///./src/app/graph2/NodeGraphChangeHandler.js","webpack:///./src/app/graph2/SafeUndoNodeGraphEventHandler.js","webpack:///./src/app/modules/nodegraph/graph/controller/NodeGraphController.js","webpack:///./src/app/modules/nodegraph/NodeGraphModule.js"],"names":["AbstractInputHandler","_classCallCheck","this","pointer","zoomValue","prevValue","InputContext","_inputHandlers","inputHandler","push","index","indexOf","splice","length","eventName","_len","arguments","eventArgs","Array","_key","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","next","done","value","handlerEventCallback","apply","err","return","AbstractEventHandler","undoManager","Error","Icon","props","_possibleConstructorReturn","_getPrototypeOf","call","React","Component","react__WEBPACK_IMPORTED_MODULE_0___default","a","createElement","id","className","style","xmlns","width","height","viewBox","d","userClearGraph","app","graphOnly","callback","window","confirm","I18N","toString","getCurrentModule","getGraphController","getGraph","clear","getUndoManager","captureEvent","getSession","setProjectName","__webpack_require__","__webpack_exports__","InputPointer","inputAdapter","element","viewportAdapter","_inputAdapter","_element","_viewportAdapter","_active","_x","_y","_inputpos","x","y","pos","dx","dy","ViewportAdapter","ViewportAdapter_classCallCheck","_offsetX","_offsetY","_nextOffsetX","_nextOffsetY","_offsetDamping","_scaleFactor","_minScale","_maxScale","scale","damping","clientX","clientY","ctm","getScreenCTM","e","f","Math","min","max","dscale","LONG_TAP_TICKS","DOUBLE_TAP_TICKS","SCROLL_SENSITIVITY","CURSOR_RADIUS_SQU","CURSOR_RADIUS","DRAGGING_BUFFER_SQU","DRAGGING_BUFFER","InputAdapter","_this","InputAdapter_classCallCheck","_contexts","_activeDragHandler","_cursor","_mousemove","_mouseup","_touchmove","_touchend","_timer","_pointer","_dragging","_altinput","_holdInputDelay","_dblInputDelay","_scrollSensitivity","_minTapRadius","_draggingRadiusSqu","_prevEmptyInput","_prevEmptyTime","_prevEmptyX","_prevEmptyY","onContextMenu","bind","_assertThisInitialized","onMouseDown","onMouseMove","onTouchStart","onWheel","onMouseDownThenMove","onMouseDownThenUp","onTouchStartThenMove","onTouchStartThenEnd","onDelayedInputDown","context","unshift","shift","SVGElement","setElement","addEventListener","onTouchMove","removeEventListener","update","_get2","result","handleEvent","concat","_get","prototype","stopPropagation","preventDefault","cursor","document","activeElement","blur","focus","button","ctrlKey","onInputDown","mouse","transformScreenToView","setPosition","cancelInputEvent","onInputMove","onInputUp","changedTouches","touch","deltaY","prev","getScale","setScale","beginInput","setTimeout","onDragMove","getDistanceSquToInitial","inputEventPosition","getInputEventPosition","timer","clearTimeout","onDragStop","dist","dt","Date","now","endInput","isActive","SMOOTH_OFFSET_DAMPING","MIN_SCALE","MAX_SCALE","ViewportComponent","ViewportComponent_classCallCheck","ViewportComponent_possibleConstructorReturn","ViewportComponent_getPrototypeOf","_ref","createRef","getViewportAdapter","setMinScale","setMaxScale","setOffsetDamping","addInputHandler","initialize","current","destroy","viewport","getOffsetX","getOffsetY","baseViewSize","viewSize","Number","MIN_VALUE","halfViewSize","getSVGViewBoxString","transform","getSVGTransformString","react_default","ref","Style","viewport_component","children","BoxRenderer","visible","fromX","fromY","toX","toY","color","abs","stroke","fill","fillOpacity","DefaultNodeShapeRenderer","Fragment","cx","position","cy","r","radius","outline","onMouseOver","onMouseOut","pointerEvents","DefaultLabelRenderer","userSelect","fontSize","label","textAnchor","NodeRenderer","NodeRenderer_classCallCheck","NodeRenderer_possibleConstructorReturn","NodeRenderer_getPrototypeOf","NodeShapeRenderer","NodeLabelRenderer","target","type","GraphNodeRenderer","GraphNodeRenderer_classCallCheck","GraphNodeRenderer_possibleConstructorReturn","GraphNodeRenderer_getPrototypeOf","node","getNodeLabel","getNodeSize","renderer_NodeRenderer","source","GraphNodeLayer","GraphNodeLayer_classCallCheck","GraphNodeLayer_possibleConstructorReturn","GraphNodeLayer_getPrototypeOf","inputController","nodes","renderer_GraphNodeRenderer","key","getGraphElementID","hasPointerEvents","SIXTH_PI","PI","DefaultEndpointRenderer","sin","angle","cos","direction","labels","map","str","i","reverse","alignmentBaseline","EdgeRenderer","EdgeRenderer_classCallCheck","EdgeRenderer_possibleConstructorReturn","EdgeRenderer_getPrototypeOf","fromAngle","toAngle","directed","ForwardEndpointRenderer","forwardEndpointRenderer","endpointRenderer","BackwardEndpointRenderer","backwardEndpointRenderer","EdgeLabelRenderer","labelRenderer","fromPoint","from","toPoint","to","centerPoint","center","reverseLabel","quadLine","dftx","dfty","dfcx","dfcy","ftrad","atan2","fcrad","pathData","strokeWidth","split","GraphEdgeRenderer","GraphEdgeRenderer_classCallCheck","GraphEdgeRenderer_possibleConstructorReturn","GraphEdgeRenderer_getPrototypeOf","edge","start","getStartPoint","end","getEndPoint","getCenterPoint","getEdgeLabel","edgeDir","getEdgeDirection","renderer_EdgeRenderer","GraphEdgeLayer","GraphEdgeLayer_classCallCheck","GraphEdgeLayer_possibleConstructorReturn","GraphEdgeLayer_getPrototypeOf","edges","renderer_GraphEdgeRenderer","HIGHLIGHT_LINE_ARRAY","GraphHighlightRenderer","GraphHighlightRenderer_classCallCheck","GraphHighlightRenderer_possibleConstructorReturn","GraphHighlightRenderer_getPrototypeOf","strokeDashoffset","strokeDasharray","GraphHighlightLayer","GraphHighlightLayer_classCallCheck","GraphHighlightLayer_possibleConstructorReturn","GraphHighlightLayer_getPrototypeOf","highlights","renderer_GraphHighlightRenderer","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","SelectionBoxInputHandler","graphController","selectionBox","SelectionBoxInputHandler_classCallCheck","SelectionBoxInputHandler_possibleConstructorReturn","SelectionBoxInputHandler_getPrototypeOf","_inputController","_graphController","_selectionBox","hasSelection","isMoveMode","isTargetInSelection","getImmediateTargetSource","clearSelection","hasActiveTarget","hasCurrentTarget","beginSelection","isVisible","updateSelection","endSelection","ViewportInputHandler","ViewportInputHandler_classCallCheck","ViewportInputHandler_possibleConstructorReturn","ViewportInputHandler_getPrototypeOf","_cachedPosition","getInputAdapter","addOffset","NodeGraphView","NodeGraphView_classCallCheck","NodeGraphView_possibleConstructorReturn","NodeGraphView_getPrototypeOf","_inputContext","bindContextAsLast","clearInputHandlers","unbindContext","graph","selectionBoundingBox","getBoundingBox","layers_GraphNodeLayer","getNodes","layers_GraphEdgeLayer","getEdges","layers_GraphHighlightLayer","getSelection","renderer_BoxRenderer","GraphElement","elementID","GraphElement_classCallCheck","_id","dst","GraphNode","GraphNode_classCallCheck","GraphNode_possibleConstructorReturn","GraphNode_getPrototypeOf","_label","usePosition","floor","GraphEdge","GraphEdge_classCallCheck","GraphEdge_possibleConstructorReturn","GraphEdge_getPrototypeOf","_from","_to","HALFPI","isPlaceholder","halfPlaceholderLength","getPlaceholderLength","placeholderLength","src","getHashString","GraphEdge_get","PatternInput","PatternInput_classCallCheck","PatternInput_getPrototypeOf","inputElement","placeholder","maxLength","multiLine","formatter","_submitTimeout","_submit","submitOnBlur","_skipBlur","_skipSelect","state","onChange","PatternInput_assertThisInitialized","onFocus","onBlur","onKeyDown","select","_this2","submit","onSubmit","setState","_this3","shiftKey","caretPosition","selectionStart","selectionEnd","ignore","string","separator","format","_this4","maxlength","multiline","disabled","rows","spellCheck","LabelEditorView","LabelEditorView_classCallCheck","LabelEditorView_getPrototypeOf","inputComponent","open","_target","_targetCallback","onInputSubmit","LabelEditorView_assertThisInitialized","onInputBlur","graphElement","defaultValue","onCancel","_targetOnSubmit","_targetOnCancel","labelFormatter","setFormatter","resetValue","closeEditor","isEditorOpen","targetStyle","getElement","parentClientRect","getBoundingClientRect","screenPos","svg","transformViewToScreen","offsetX","offsetWidth","left","offsetY","offsetHeight","top","editor_container","pattern_PatternInput","saveOnExit","tray_container","TrashCanWidget","TrashCanWidget_classCallCheck","TrashCanWidget_getPrototypeOf","active","forceActive","_doubleTapTimeout","onMouseEnter","TrashCanWidget_assertThisInitialized","onMouseLeave","onClick","onAnyMouseDownNotConsumed","onClear","documentElement","_this5","_this6","hide","trash_container","TrashCanDetailedIcon","ModeTrayWidget","ModeTrayWidget_classCallCheck","ModeTrayWidget_possibleConstructorReturn","ModeTrayWidget_getPrototypeOf","mode","IconButton","tray_button","title","EditPencilIcon","MoveIcon","ViewportLayer","ViewportLayer_classCallCheck","ViewportLayer_getPrototypeOf","onTrashChange","ViewportLayer_assertThisInitialized","onTrashClear","onModeChange","flag","setTrashMode","clearGraph","setMoveModeFirst","moveMode","isHandlingInput","isMoveModeFirst","view_container","components_widgets_TrashCanWidget","view_widget","bottom","right","isEmpty","isUsingTouch","isDragging","components_widgets_ModeTrayWidget","ZoomWidget","ZoomWidget_classCallCheck","ZoomWidget_getPrototypeOf","onZoomIn","ZoomWidget_assertThisInitialized","onZoomOut","viewScale","addScale","toFixed","zoom_container","zoom_button","ZoomInIcon","ZoomOutIcon","zoom_label","FocusCenterWidget","FocusCenterWidget_classCallCheck","FocusCenterWidget_getPrototypeOf","FocusCenterWidget_assertThisInitialized","setOffset","center_focus_button","PinpointIcon","ViewportNavigationLayer","ViewportNavigationLayer_classCallCheck","ViewportNavigationLayer_possibleConstructorReturn","ViewportNavigationLayer_getPrototypeOf","navbar_container","components_widgets_ZoomWidget","navbar_widget_container","components_widgets_FocusCenterWidget","navbar_widget","GraphNodeInputHandler","GraphNodeInputHandler_classCallCheck","GraphNodeInputHandler_possibleConstructorReturn","GraphNodeInputHandler_getPrototypeOf","_labelFormatter","currentTargetType","getCurrentTargetType","isTrashMode","emitGraphEvent","currentTargetSource","getCurrentTargetSource","deleteNode","openLabelEditor","hasChanged","onInputEvent","createNode","setNodeLabel","getDefaultNodeLabel","bindActiveTarget","targetSource","getActiveTargetSource","moveNodeTo","unbindActiveTarget","lerp","nodeSize","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","other","diameter","nextDX","nextDY","GraphEdgeInputHandler","GraphEdgeInputHandler_classCallCheck","GraphEdgeInputHandler_possibleConstructorReturn","GraphEdgeInputHandler_getPrototypeOf","_cachedEdgeQuads","radians","_cachedEdgeTo","_cachedPointer","_newEdge","deleteEdge","targetEdge","createEdge","setNodeEventsOnly","getQuadraticRadians","getQuadraticLength","getEdgeTo","setQuadraticRadians","setQuadraticLength","setEdgeTo","targetType","getActiveTargetType","setQuadraticByCoords","getImmediateTargetType","immediateTargetSource","getEdgeFrom","isNewEdge","edgeTo","setEdgeLabel","getDefaultEdgeLabel","DEFAULT_MOVE_MODE_FIRST","InputController","InputController_classCallCheck","_trashMode","_moveMode","_nodeOnly","_moveModeFirst","_handlingInput","_activeTarget","input","_immediateTarget","isAltInput","updateCurrentTarget","data","pointerEvent","SelectionBox","SelectionBox_classCallCheck","_boundingBox","targets","box","mx","my","lx","ly","x1","y1","x2","y2","getNodesWithin","includes","GraphEditorView","GraphEditorView_classCallCheck","GraphEditorView_getPrototypeOf","_viewportComponent","_labelEditorComponent","_graphViewComponent","GraphEditorView_assertThisInitialized","getLabelFormatter","getViewportComponent","setInputController","setGraphController","setSelectionBox","setLabelFormatter","bindContext","getInputContext","views_NodeGraphView","components_layers_ViewportLayer","components_layers_ViewportNavigationLayer","overlay","components_views_LabelEditorView","setLabelEditor","labelEditor","propTypes","PropTypes","object","NodeGraph","nodeClass","edgeClass","NodeGraph_classCallCheck","_nodeClass","_edgeClass","_nodeMapping","Map","_edgeMapping","clearEdges","clearNodes","size","minX","minY","maxX","maxY","minNX","MAX_VALUE","minNY","maxNX","maxNY","maxNodeSize","values","minEX","minEY","maxEX","maxEY","startPoint","endPoint","sx","sy","ex","ey","_iteratorNormalCompletion4","_didIteratorError4","_iteratorError4","_step4","_iterator4","stringHash","addNode","guid","setGraphElementID","set","has","delete","nullSourceEdges","_iteratorNormalCompletion5","_didIteratorError5","_iteratorError5","_step5","_iterator5","_i","get","_iteratorNormalCompletion6","_didIteratorError6","_iteratorError6","_step6","_iterator6","addEdge","_iteratorNormalCompletion7","_didIteratorError7","_iteratorError7","_step7","_iterator7","QuadraticEdge","QuadraticEdge_classCallCheck","QuadraticEdge_possibleConstructorReturn","QuadraticEdge_getPrototypeOf","_quad","coords","prevNode","QuadraticEdge_get","fromx","fromy","midpointx","midpointy","angleOffset","sqrt","outrad","inrad","maxdr","getDirectionalVector","isQuadratic","getQuadraticAsCoords","px","py","getMidPoint","qcoords","qx","qy","isSelfLoop","Parser","Parser_classCallCheck","SemanticVersion","major","minor","patch","SemanticVersion_classCallCheck","components","parseInt","otherVersion","VERSION","parse","NodeGraphParser","NodeGraphParser_classCallCheck","NodeGraphParser_possibleConstructorReturn","NodeGraphParser_getPrototypeOf","NodeGraphParser_typeof","dataVersion","canSupportVersion","nodeDatas","nodeCount","edgeDatas","edgeCount","hasQuad","nodeIndices","nodeData","edgeData","sourceNode","destinationNode","quadData","graphNodes","graphEdges","edgeSource","edgeDestination","sourceIndex","destinationIndex","quad","getQuadratic","LabelFormatter","nextLabel","nextNodeLabel","nextEdgeLabel","DEFAULT_LABEL_FORMATTER","GraphController","GraphController_classCallCheck","_graph","_graphChangeHandler","_labelEditor","_listeners","graphChangeHandler","listener","eventData","onGraphEvent","defaultLabel","prevLabel","openEditor","NodeGraphChangeHandler","refreshTicks","NodeGraphChangeHandler_classCallCheck","_cachedGraphHash","_refreshTicks","_elapsedTicks","Infinity","graphHash","getHashCode","SafeUndoNodeGraphEventHandler","graphParser","SafeUndoNodeGraphEventHandler_classCallCheck","SafeUndoNodeGraphEventHandler_possibleConstructorReturn","SafeUndoNodeGraphEventHandler_getPrototypeOf","_graphParser","_graphData","compose","prevEvent","getPreviousEvent","applyRedo","NodeGraphController","NodeGraphController_classCallCheck","NodeGraphController_possibleConstructorReturn","NodeGraphController_getPrototypeOf","_app","setGraphChangeHandler","setEventHandlerFactory","NodeGraphController_get","getNotificationManager","pushNotification","WARNING_LAYOUT_ID","NodalGraphModule","NodeGraphModule_classCallCheck","getDrawerManager","addPanelClass","PanelContainer","getRenderManager","addRenderer","RENDER_LAYER_WORKSPACE","views_GraphEditorView","UserUtil","getToolbarComponent","closeBar"],"mappings":"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","file":"module_nodegraph.bundle.ddfe9a7246e47a7c5914.js","sourcesContent":["/**\n * Used by InputAdapter to handle input event logic.\n */\nclass AbstractInputHandler\n{\n    constructor() {}\n\n    /**\n   * Called by InputAdapter before an InputEvent begins.\n   * Returns true if the event should be consumed. If consumed, the event will\n   * not begin.\n   */\n    onPreInputEvent(pointer) { return false; }\n\n    /**\n   * Called by InputAdapter when an InputEvent resolves and is not an Alt input.\n   * To handle events for Alt inputs, refer to onAltInputEvent().\n   * Returns true if the event should be consumed. If consumed, the event will\n   * not propagate to trigger other events.\n   */\n    onInputEvent(pointer) { return false; }\n\n    /**\n   * Called by InputAdapter when an InputEvent resolves and is an Alt input.\n   * To handle events for non-Alt inputs, refer to onInputEvent().\n   * Returns true if the event should be consumed. If consumed, the event will\n   * not propagate to trigger other events.\n   */\n    onAltInputEvent(pointer) { return false; }\n\n    /**\n   * Called by InputAdapter when a DblInputEvent resolves. The input is\n   * assumed by a non-Alt input, since only non-Alt inputs can trigger this\n   * event.\n   * Returns true if the event should be consumed. If consumed, the event will\n   * not propagate to trigger other events.\n   */\n    onDblInputEvent(pointer) { return false; }\n\n    /**\n   * Called by InputAdapter when input moves. The input is called before drag\n   * logic.\n   * Returns true if the event should be consumed. If consumed, the event will\n   * not propagate to trigger other events (i.e. dragging events).\n   */\n    onMoveInputEvent(pointer) { return false; }\n\n    /**\n   * Called by InputAdapter before a drag begins. The input could be either\n   * an Alt or non-Alt input.\n   * Returns true if the event should be consumed. If consumed, the event will\n   * not propagate to trigger other events, and then it will continue the drag\n   * input events for the current handler only.\n   * \n   * NOTE: A drag does not start immediately on move. There is a radius to\n   * compensate for mobile users. Therefore pointer.x and pointer.y refer to\n   * the offset position. To get the starting pointer position, use\n   * pointer.getInputEventPosition().\n   */\n    onDragStart(pointer) { return false; }\n\n    /**\n   * Called by InputAdapter while dragging moves. The input could be either\n   * an Alt or non-Alt input.\n   * Will always be called after onDragStart() and will be followed by\n   * onDragStop() when complete.\n   */\n    onDragMove(pointer) {}\n\n    /**\n   * Called by InputAdapter after a drag ends. The input could be either an\n   * Alt or non-Alt input.\n   * Will always be called after onDragStart(). Although onDragMove may be\n   * called in-between, it is not guaranteed.\n   */\n    onDragStop(pointer) {}\n\n    /**\n   * Called by InputAdapter after an InputEvent ends.\n   */\n    onPostInputEvent(pointer) {}\n\n    /**\n   * Called by InputAdapter when zoom changes.\n   * Returns true if event is consumed (zoom will not be applied)\n   */\n    onZoomChange(pointer, zoomValue, prevValue)\n    {\n        return false;\n    }\n}\n\nexport default AbstractInputHandler;","class InputContext\n{\n    constructor()\n    {\n        this._inputHandlers = [];\n    }\n\n    addInputHandler(inputHandler)\n    {\n        this._inputHandlers.push(inputHandler);\n        return this;\n    }\n\n    removeInputHandler(inputHandler)\n    {\n        const index = this._inputHandlers.indexOf(inputHandler);\n        if (index >= 0) this._inputHandlers.splice(index, 1);\n        return this;\n    }\n\n    clearInputHandlers() { this._inputHandlers.length = 0; }\n\n    handleEvent(eventName, ...eventArgs)\n    {\n        //Let others handle this event...\n        for (const inputHandler of this._inputHandlers)\n        {\n            const handlerEventCallback = inputHandler[eventName];\n            if (typeof handlerEventCallback === 'function')\n            {\n                if (handlerEventCallback.apply(inputHandler, eventArgs))\n                {\n                    return inputHandler;\n                }\n            }\n        }\n\n        return null;\n    }\n\n    getInputHandlers() { return this._inputHandlers; }\n    hasInputHandlers() { return this._inputHandlers.length > 0; }\n}\n\nexport default InputContext;","class AbstractEventHandler\n{\n    constructor() {}\n\n    applyUndo(undoManager)\n    {\n        throw new Error('Undo operation for handler not supported');\n    }\n\n    applyRedo(undoManager)\n    {\n        throw new Error('Redo operation for handler not supported');\n    }\n}\n\nexport default AbstractEventHandler;\n","import React from 'react';\n\nclass Icon extends React.Component\n{\n    constructor(props) { super(props); }\n\n    /** @override */\n    render()\n    {\n        return (\n            <svg id={this.props.id} className={this.props.className} style={this.props.style}\n                xmlns=\"http://www.w3.org/2000/svg\"\n                width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n                <path d=\"M13,6V11H18V7.75L22.25,12L18,16.25V13H13V18H16.25L12,22.25L7.75,18H11V13H6V16.25L1.75,12L6,7.75V11H11V6H7.75L12,1.75L16.25,6H13Z\"/>\n            </svg>\n        );\n    }\n}\nexport default Icon;\n","import React from 'react';\n\nclass Icon extends React.Component\n{\n    constructor(props) { super(props); }\n\n    /** @override */\n    render()\n    {\n        return (\n            <svg id={this.props.id} className={this.props.className} style={this.props.style}\n                xmlns=\"http://www.w3.org/2000/svg\"\n                width=\"24\" height=\"24\" viewBox=\"0 0 26 26\">\n                <path d=\"M 11.5 -0.03125 C 9.542969 -0.03125 7.96875 1.59375 7.96875 3.5625 L 7.96875 4 L 4 4 C 3.449219 4 3 4.449219 3 5 L 3 6 L 2 6 L 2 8 L 4 8 L 4 23 C 4 24.644531 5.355469 26 7 26 L 19 26 C 20.644531 26 22 24.644531 22 23 L 22 8 L 24 8 L 24 6 L 23 6 L 23 5 C 23 4.449219 22.550781 4 22 4 L 18.03125 4 L 18.03125 3.5625 C 18.03125 1.59375 16.457031 -0.03125 14.5 -0.03125 Z M 11.5 2.03125 L 14.5 2.03125 C 15.304688 2.03125 15.96875 2.6875 15.96875 3.5625 L 15.96875 4 L 10.03125 4 L 10.03125 3.5625 C 10.03125 2.6875 10.695313 2.03125 11.5 2.03125 Z M 6 8 L 11.125 8 C 11.25 8.011719 11.371094 8.03125 11.5 8.03125 L 14.5 8.03125 C 14.628906 8.03125 14.75 8.011719 14.875 8 L 20 8 L 20 23 C 20 23.5625 19.5625 24 19 24 L 7 24 C 6.4375 24 6 23.5625 6 23 Z M 8 10 L 8 22 L 10 22 L 10 10 Z M 12 10 L 12 22 L 14 22 L 14 10 Z M 16 10 L 16 22 L 18 22 L 18 10 Z \"/>\n            </svg>\n        );\n    }\n}\nexport default Icon;\n","import React from 'react';\n\nclass Icon extends React.Component\n{\n    constructor(props) { super(props); }\n\n    /** @override */\n    render()\n    {\n        return (\n            <svg id={this.props.id} className={this.props.className} style={this.props.style}\n                xmlns=\"http://www.w3.org/2000/svg\"\n                width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n                <path d=\"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z\"/>\n                <path d=\"M12 10h-2v2H9v-2H7V9h2V7h1v2h2v1z\"/>\n            </svg>\n        );\n    }\n}\nexport default Icon;\n","import React from 'react';\n\nclass Icon extends React.Component\n{\n    constructor(props) { super(props); }\n\n    /** @override */\n    render()\n    {\n        return (\n            <svg id={this.props.id} className={this.props.className} style={this.props.style}\n                xmlns=\"http://www.w3.org/2000/svg\"\n                width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n                <path d=\"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14zM7 9h5v1H7z\"/>\n            </svg>\n        );\n    }\n}\nexport default Icon;\n","import React from 'react';\n\nclass Icon extends React.Component\n{\n    constructor(props) { super(props); }\n\n    /** @override */\n    render()\n    {\n        return (\n            <svg id={this.props.id} className={this.props.className} style={this.props.style}\n                xmlns=\"http://www.w3.org/2000/svg\"\n                width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n                <path d=\"M12 8c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm8.94 3c-.46-4.17-3.77-7.48-7.94-7.94V1h-2v2.06C6.83 3.52 3.52 6.83 3.06 11H1v2h2.06c.46 4.17 3.77 7.48 7.94 7.94V23h2v-2.06c4.17-.46 7.48-3.77 7.94-7.94H23v-2h-2.06zM12 19c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7z\"/>\n            </svg>\n        );\n    }\n}\nexport default Icon;\n","export function userClearGraph(app, graphOnly=false, callback=null)\n{\n    if (window.confirm(I18N.toString('alert.graph.clear')))\n    {\n        const module = app.getCurrentModule();\n        module.getGraphController().getGraph().clear();\n        if (!graphOnly)\n        {\n            app.getUndoManager().clear();\n            app.getSession().setProjectName(null);\n        }\n        else\n        {\n            app.getUndoManager().captureEvent();\n        }\n        if (callback) callback();\n    }\n}\n","/**\n * Used by InputAdapter to hold input event data.\n */\nclass InputPointer\n{\n    constructor(inputAdapter, element, viewportAdapter)\n    {\n        this._inputAdapter = inputAdapter;\n        this._element = element;\n        this._viewportAdapter = viewportAdapter;\n\n        this._active = false;\n        this._x = 0;\n        this._y = 0;\n\n        this._inputpos = { x: 0, y: 0 };\n    }\n\n    get x() { return this._x; }\n    get y() { return this._y; }\n\n    setPosition(x, y)\n    {\n        this._x = x;\n        this._y = y;\n        return this;\n    }\n\n    beginInput()\n    {\n        this._active = true;\n        this._inputpos.x = this._x;\n        this._inputpos.y = this._y;\n    }\n\n    /**\n     * Returns the position which the input began at. This is mutable.\n     */\n    getInputEventPosition() { return this._inputpos; }\n\n    changeInputEventPosition(x, y)\n    {\n        this._inputpos.x = x;\n        this._inputpos.y = y;\n    }\n\n    endInput() { this._active = false; }\n    isActive() { return this._active; }\n\n    getDistanceSquToInitial()\n    {\n        const pos = this._inputpos;\n        const dx = pos.x - this._x;\n        const dy = pos.y - this._y;\n        return dx * dx + dy * dy;\n    }\n\n    /**\n     * The DOM element for which this pointer provides context for; this should be\n     * the same element as in the input adapter.\n     */\n    getElement() { return this._element; }\n\n    /**\n     * The viewport for this pointer operates within; this should be the same\n     * viewport as in the input adapter.\n     */\n    getViewportAdapter() { return this._viewportAdapter; }\n\n    /**\n     * The input adapter that controls this pointer's properties\n     */\n    getInputAdapter() { return this._inputAdapter; }\n}\n\nexport default InputPointer;\n","/**\n * Represents and handles the transformations to the interactible viewport of\n * the SVG element.\n */\nclass ViewportAdapter\n{\n    constructor()\n    {\n        this._element = null;\n        this._offsetX = 0;\n        this._offsetY = 0;\n        this._nextOffsetX = 0;\n        this._nextOffsetY = 0;\n        this._offsetDamping = 0.1;\n\n        this._scaleFactor = 1;\n        this._minScale = 1;\n        this._maxScale = 1;\n    }\n\n    setElement(element)\n    {\n        this._element = element;\n        return this;\n    }\n\n    setMinScale(scale)\n    {\n        this._minScale = scale;\n        if (this._scaleFactor < this._minScale) this._scaleFactor = this._minScale;\n        return this;\n    }\n\n    setMaxScale(scale)\n    {\n        this._maxScale = scale;\n        if (this._scaleFactor > this._maxScale) this._scaleFactor = this._maxScale;\n        return this;\n    }\n\n    setOffsetDamping(damping)\n    {\n        this._offsetDamping = damping;\n        return this;\n    }\n\n    update()\n    {\n        const dx = this._nextOffsetX - this._offsetX;\n        this._offsetX += dx * this._offsetDamping;\n        const dy = this._nextOffsetY - this._offsetY;\n        this._offsetY += dy * this._offsetDamping;\n    }\n\n    transformScreenToView(clientX, clientY)\n    {\n        if (!this._element) return {x: clientX - this._offsetX, y: clientY - this._offsetY};\n\n        const ctm = this._element.getScreenCTM();\n        return {\n            x: (clientX - ctm.e) / ctm.a - this._offsetX,\n            y: (clientY - ctm.f) / ctm.d - this._offsetY\n        };\n    }\n\n    setOffset(x, y, immediate=false)\n    {\n        if (immediate)\n        {\n            this._nextOffsetX = this._offsetX = x;\n            this._nextOffsetY = this._offsetY = y;\n        }\n        else\n        {\n            this._nextOffsetX = x;\n            this._nextOffsetY = y;\n        }\n    }\n\n    addOffset(dx, dy, immediate=false)\n    {\n        if (immediate)\n        {\n            this._offsetX += dx;\n            this._offsetY += dy;\n            this._nextOffsetX = this._offsetX;\n            this._nextOffsetY = this._offsetY;\n        }\n        else\n        {\n            this._nextOffsetX += dx;\n            this._nextOffsetY += dy;\n        }\n    }\n\n    setScale(scale) { this._scaleFactor = Math.min(this._maxScale, Math.max(this._minScale, scale)); }\n    addScale(dscale) { this._scaleFactor = Math.min(this._maxScale, Math.max(this._minScale, this._scaleFactor + dscale)); }\n    getOffsetX() { return this._offsetX; }\n    getOffsetY() { return this._offsetY; }\n    getOffsetDamping() { return this._offsetDamping; }\n    getScale() { return this._scaleFactor; }\n    getMinScale() { return this._minScale; }\n    getMaxScale() { return this._maxScale; }\n    getElement() { return this._element; }\n}\n\nexport default ViewportAdapter;\n","import InputContext from './InputContext.js';\nimport InputPointer from './InputPointer.js';\nimport ViewportAdapter from './ViewportAdapter.js';\n\nconst LONG_TAP_TICKS = 600;\nconst DOUBLE_TAP_TICKS = 600;\nconst SCROLL_SENSITIVITY = 1.0 / 300.0;\nconst CURSOR_RADIUS = 4;\nconst CURSOR_RADIUS_SQU = CURSOR_RADIUS * CURSOR_RADIUS;\nconst DRAGGING_BUFFER = 18;\nconst DRAGGING_BUFFER_SQU = DRAGGING_BUFFER * DRAGGING_BUFFER;\n\n/**\n * Provides an interface for input handlers to interact with a HTMLElement.\n * Each listenable element should correspond to only a single InputAdapter.\n */\nclass InputAdapter extends InputContext\n{\n    constructor()\n    {\n        super();\n        this._contexts = [];\n        this._activeDragHandler = null;\n\n        this._element = null;\n        this._cursor = {\n            _mousemove: null,\n            _mouseup: null,\n            _touchmove: null,\n            _touchend: null,\n            _timer: null\n        };\n        this._pointer = null;\n\n        this._viewportAdapter = new ViewportAdapter();\n\n        //Although dragging could be in pointer, it should be here to allow\n        //the adapter to be independent of pointer.\n        this._dragging = false;\n        this._altinput = false;\n\n        this._holdInputDelay = LONG_TAP_TICKS;\n        this._dblInputDelay = DOUBLE_TAP_TICKS;\n        this._scrollSensitivity = SCROLL_SENSITIVITY;\n        this._minTapRadius = CURSOR_RADIUS_SQU * 16;\n        this._draggingRadiusSqu = CURSOR_RADIUS_SQU + DRAGGING_BUFFER_SQU;\n\n        this._prevEmptyInput = false;\n        this._prevEmptyTime = 0;\n        this._prevEmptyX = 0;\n        this._prevEmptyY = 0;\n\n        this.onContextMenu = this.onContextMenu.bind(this);\n        this.onMouseDown = this.onMouseDown.bind(this);\n        this.onMouseMove = this.onMouseMove.bind(this);\n        this.onTouchStart = this.onTouchStart.bind(this);\n        this.onWheel = this.onWheel.bind(this);\n\n        this.onMouseDownThenMove = this.onMouseDownThenMove.bind(this);\n        this.onMouseDownThenUp = this.onMouseDownThenUp.bind(this);\n        this.onTouchStartThenMove = this.onTouchStartThenMove.bind(this);\n        this.onTouchStartThenEnd = this.onTouchStartThenEnd.bind(this);\n\n        this.onDelayedInputDown = this.onDelayedInputDown.bind(this);\n    }\n\n    bindContext(context)\n    {\n        if (!(context instanceof InputContext)) \n            throw new Error('Cannot bind invalid context - must be an instance of InputContext');\n      \n        this._contexts.unshift(context);\n        return this;\n    }\n\n    bindContextAsLast(context)\n    {\n        if (!(context instanceof InputContext)) \n            throw new Error('Cannot bind invalid context - must be an instance of InputContext');\n      \n        this._contexts.push(context);\n        return this;\n    }\n\n    unbindContext(context=null)\n    {\n        if (context)\n        {\n            const index = this._contexts.indexOf(context);\n            if (index >= 0)\n            {\n                this._contexts.splice(index, 1);\n                return context;\n            }\n            else\n            {\n                return null;\n            }\n        }\n        else\n        {\n            return this._contexts.shift();\n        }\n    }\n\n    clearContexts()\n    {\n        this._contexts.length = 0;\n    }\n\n    hasContexts()\n    {\n        return this._contexts.length > 0;\n    }\n\n    getCurrentContext()\n    {\n        if (this._contexts.length > 0)\n        {\n            return this._contexts[this._contexts.length - 1];\n        }\n        else\n        {\n            return this;\n        }\n    }\n\n    initialize(element)\n    {\n        if (!(element instanceof SVGElement)) throw new Error('Missing SVG element for input adapter\\'s viewport');\n        if (this._element) throw new Error('Trying to initialize an InputAdapter already initialized');\n\n        this._viewportAdapter.setElement(this._element = element);\n        this._pointer = new InputPointer(this, this._element, this._viewportAdapter);\n\n        this._element.addEventListener('mousedown', this.onMouseDown);\n        this._element.addEventListener('mousemove', this.onMouseMove);\n        this._element.addEventListener('touchstart', this.onTouchStart);\n        this._element.addEventListener('touchmove', this.onTouchMove);\n        this._element.addEventListener('contextmenu', this.onContextMenu);\n        this._element.addEventListener('wheel', this.onWheel);\n    }\n\n    destroy()\n    {\n        if (!this._element) throw new Error('Trying to destroy an InputAdapter that is not yet initialized');\n\n        this._element.removeEventListener('mousedown', this.onMouseDown);\n        this._element.removeEventListener('mousemove', this.onMouseMove);\n        this._element.removeEventListener('touchstart', this.onTouchStart);\n        this._element.removeEventListener('contextmenu', this.onContextMenu);\n        this._element.removeEventListener('wheel', this.onWheel);\n\n        this._element = null;\n    }\n\n    update()\n    {\n        if (this._element)\n        {\n            //Smooth transition offset\n            this._viewportAdapter.update();\n        }\n    }\n\n    /** @override */\n    handleEvent(eventName, ...eventArgs)\n    {\n        for(const context of this._contexts)\n        {\n            const result = context.handleEvent(eventName, ...eventArgs);\n            if (result)\n            {\n                return result;\n            }\n        }\n    \n        return super.handleEvent(eventName, ...eventArgs);\n    }\n\n    onMouseDown(e)\n    {\n        e.stopPropagation();\n        e.preventDefault();\n\n        const cursor = this._cursor;\n\n        //Blur any element in focus\n        document.activeElement.blur();\n        this._element.focus();\n\n        //Make sure mouse move is deleted, just in case\n        if (cursor._mousemove)\n        {\n            document.removeEventListener('mousemove', cursor._mousemove);\n            cursor._mousemove = null;\n        }\n        //Make sure mouse up is deleted, just in case\n        if (cursor._mouseup)\n        {\n            document.removeEventListener('mouseup', cursor._mouseup);\n            cursor._mouseup = null;\n        }\n\n        //HACK: To allow Mac's to use ctrl+click as right clicks\n        const button = e.ctrlKey ? 2 : e.button;\n\n        //Is this a valid mouse down?\n        if (this.onInputDown(e.clientX, e.clientY, button))\n        {\n            //Start mouse down logic...\n            cursor._mousemove = this.onMouseDownThenMove;\n            cursor._mouseup = this.onMouseDownThenUp;\n\n            document.addEventListener('mousemove', cursor._mousemove);\n            document.addEventListener('mouseup', cursor._mouseup);\n        }\n\n        return false;\n    }\n\n    onMouseMove(e)\n    {\n        const mouse = this._viewportAdapter.transformScreenToView(e.clientX, e.clientY);\n        const pointer = this._pointer;\n        pointer.setPosition(mouse.x, mouse.y);\n\n        if (this.handleEvent('onMoveInputEvent', pointer))\n        {\n            e.stopPropagation();\n            e.preventDefault();\n\n            this.cancelInputEvent();\n        }\n    }\n\n    onMouseDownThenMove(e)\n    {\n        e.stopPropagation();\n        e.preventDefault();\n\n        this.onInputMove(e.clientX, e.clientY);\n\n        return false;\n    }\n\n    onMouseDownThenUp(e)\n    {\n        e.stopPropagation();\n        e.preventDefault();\n\n        const cursor = this._cursor;\n\n        //Make sure mouse move is deleted, just in case\n        if (cursor._mousemove)\n        {\n            document.removeEventListener('mousemove', cursor._mousemove);\n            cursor._mousemove = null;\n        }\n        //Make sure mouse up is deleted, just in case\n        if (cursor._mouseup)\n        {\n            document.removeEventListener('mouseup', cursor._mouseup);\n            cursor._mouseup = null;\n        }\n\n        this.onInputUp(e.clientX, e.clientY);\n\n        return false;\n    }\n\n    onTouchStart(e)\n    {\n        if (e.changedTouches.length == 1)\n        {\n            e.stopPropagation();\n            e.preventDefault();\n\n            const cursor = this._cursor;\n\n            //Blur any element in focus\n            document.activeElement.blur();\n            this._element.focus();\n\n            //Make sure touch move is deleted, just in case\n            if (cursor._touchmove)\n            {\n                document.removeEventListener('touchmove', cursor._touchmove);\n                cursor._touchmove = null;\n            }\n            //Make sure touch end is deleted, just in case\n            if (cursor._touchend)\n            {\n                document.removeEventListener('touchend', cursor._touchend);\n                cursor._touchend = null;\n            }\n\n            const touch = e.changedTouches[0];\n            //Is this a valid touch start?\n            if (this.onInputDown(touch.clientX, touch.clientY, 0))\n            {\n                //Start touch start logic...\n                cursor._touchmove = this.onTouchStartThenMove;\n                cursor._touchend = this.onTouchStartThenEnd;\n\n                document.addEventListener('touchmove', cursor._touchmove);\n                document.addEventListener('touchend', cursor._touchend);\n            }\n\n            return false;\n        }\n    }\n\n    onTouchStartThenEnd(e)\n    {\n        e.stopPropagation();\n        e.preventDefault();\n\n        const cursor = this._cursor;\n\n        //Make sure mouse move is deleted, just in case\n        if (cursor._touchmove)\n        {\n            document.removeEventListener('touchmove', cursor._touchmove);\n            cursor._touchmove = null;\n        }\n        //Make sure mouse up is deleted, just in case\n        if (cursor._touchend)\n        {\n            document.removeEventListener('touchend', cursor._touchend);\n            cursor._touchend = null;\n        }\n\n        const touch = e.changedTouches[0];\n        this.onInputUp(touch.clientX, touch.clientY);\n\n        return false;\n    }\n\n    onTouchStartThenMove(e)\n    {\n        e.stopPropagation();\n        e.preventDefault();\n\n        const touch = e.changedTouches[0];\n        this.onInputMove(touch.clientX, touch.clientY);\n\n        return false;\n    }\n\n    onContextMenu(e)\n    {\n        e.stopPropagation();\n        e.preventDefault();\n\n        return false;\n    }\n\n    onWheel(e)\n    {\n        e.stopPropagation();\n        e.preventDefault();\n\n        const pointer = this._pointer;\n        const dy = e.deltaY * this._scrollSensitivity;\n        const prev = this._viewportAdapter.getScale();\n        const next = prev + dy;\n\n        //Let others handle this event...\n        if (!this.handleEvent('onZoomChange', pointer, next, prev))\n        {\n            this._viewportAdapter.setScale(next);\n        }\n\n        return false;\n    }\n\n    onInputDown(x, y, button)\n    {\n    //Setup for hold timer...\n        const cursor = this._cursor;\n        const pointer = this._pointer;\n        const mouse = this._viewportAdapter.transformScreenToView(x, y);\n        pointer.setPosition(mouse.x, mouse.y);\n\n        this._dragging = false;\n        this._altinput = button == 2;\n\n        //Let others handle this event...\n        if (!this.handleEvent('onPreInputEvent', pointer))\n        {\n            pointer.beginInput();\n            cursor._timer = setTimeout(this.onDelayedInputDown, this._holdInputDelay);\n            return true;\n        }\n\n        return false;\n    }\n\n    onDelayedInputDown()\n    {\n    //That means the input is remaining still (like a hold)...\n        if (!this._dragging)\n        {\n            this._altinput = true;\n        }\n    }\n\n    onInputMove(x, y)\n    {\n        const pointer = this._pointer;\n        const mouse = this._viewportAdapter.transformScreenToView(x, y);\n        pointer.setPosition(mouse.x, mouse.y);\n\n        if (!this._dragging)\n        {\n            if (pointer.getDistanceSquToInitial() > this._draggingRadiusSqu)\n            {\n                this._dragging = true;\n\n                //Let others handle this event...\n                const inputEventPosition = pointer.getInputEventPosition();\n                const result = this.handleEvent('onDragStart', pointer, inputEventPosition.x, inputEventPosition.y);\n                if (!result)\n                {\n                    this._dragging = false;\n\n                    //TODO: you could NOT cancel the event and just update the target?\n                    //If so, who is the initial target then?\n\n                    //Stop the input event early...\n                    this.cancelInputEvent();\n                }\n                else\n                {\n                    this._activeDragHandler = result;\n                }\n            }\n            else\n            {\n                //Still a click or hold...\n            }\n        }\n        else\n        {\n            //Continue to drag...\n            if (this._activeDragHandler)\n            {\n                this._activeDragHandler.onDragMove(pointer);\n            }\n        }\n    }\n\n    onInputUp(x, y)\n    {\n        const cursor = this._cursor;\n        const timer = cursor._timer;\n        if (timer)\n        {\n            clearTimeout(timer);\n            cursor._timer = null;\n        }\n\n        //Update pointer target to final position\n        const pointer = this._pointer;\n        const mouse = this._viewportAdapter.transformScreenToView(x, y);\n        pointer.setPosition(mouse.x, mouse.y);\n\n        if (this._dragging)\n        {\n            //Stop dragging!\n            if (this._activeDragHandler)\n            {\n                this._activeDragHandler.onDragStop(pointer);\n                this._activeDragHandler = null;\n            }\n        }\n        else\n        {\n            if (this._altinput)\n            {\n                //Alt Tap!\n                this.handleEvent('onAltInputEvent', pointer);\n            }\n            else\n            {\n                //If the input was not consumed...\n                if (!this.handleEvent('onInputEvent', pointer))\n                {\n                    //Try for double tap...\n                    const dx = x - this._prevEmptyX;\n                    const dy = y - this._prevEmptyY;\n                    const dist = dx * dx + dy * dy;\n                    const dt = Date.now() - this._prevEmptyTime;\n                    if (this._prevEmptyInput &&\n            dist < this._minTapRadius &&\n            dt < this._dblInputDelay)\n                    {\n                        //Double tap!\n                        this.handleEvent('onDblInputEvent', pointer);\n\n                        this._prevEmptyInput = false;\n                    }\n                    else\n                    {\n                        this._prevEmptyInput = true;\n                        this._prevEmptyTime = Date.now();\n                        this._prevEmptyX = x;\n                        this._prevEmptyY = y;\n                    }\n                }\n            }\n        }\n\n        pointer.endInput();\n        this.handleEvent('onPostInputEvent', pointer);\n    }\n\n    cancelInputEvent()\n    {\n        const pointer = this._pointer;\n        const cursor = this._cursor;\n\n        //Make sure mouse move is deleted, just in case\n        if (cursor._mousemove)\n        {\n            document.removeEventListener('mousemove', cursor._mousemove);\n            cursor._mousemove = null;\n        }\n        //Make sure mouse up is deleted, just in case\n        if (cursor._mouseup)\n        {\n            document.removeEventListener('mouseup', cursor._mouseup);\n            cursor._mouseup = null;\n        }\n\n        const timer = cursor._timer;\n        if (timer)\n        {\n            clearTimeout(timer);\n            cursor._timer = null;\n        }\n\n        pointer.endInput();\n        this.handleEvent('onPostInputEvent', pointer);\n    }\n\n    getContexts() { return this._contexts; }\n    getActiveElement() { return this._element; }\n    getViewportAdapter() { return this._viewportAdapter; }\n    getPointerX() { return this._pointer ? this._pointer.x : 0; }\n    getPointerY() { return this._pointer ? this._pointer.y : 0; }\n    isPointerActive() { return this._pointer ? this._pointer.isActive() : false; }\n    isUsingTouch() { return this._cursor._touchmove || this._cursor._touchend; }\n    isAltInput() { return this._altinput; }\n    isDragging() { return this._dragging; }\n}\n\nexport default InputAdapter;","import React from 'react';\nimport Style from './ViewportComponent.css';\n\nimport InputAdapter from '../InputAdapter.js';\nimport AbstractInputHandler from '../AbstractInputHandler.js';\n\nconst DEFAULT_VIEW_SIZE = 300;\nconst SMOOTH_OFFSET_DAMPING = 0.4;\nconst MIN_SCALE = 0.1;\nconst MAX_SCALE = 10;\n\nclass ViewportComponent extends React.Component\n{\n    constructor(props)\n    {\n        super(props);\n\n        this._ref = React.createRef();\n\n        this._inputAdapter = new InputAdapter();\n        this._inputAdapter.getViewportAdapter()\n            .setMinScale(MIN_SCALE)\n            .setMaxScale(MAX_SCALE)\n            .setOffsetDamping(SMOOTH_OFFSET_DAMPING);\n    }\n\n    addInputHandler(inputHandler)\n    {\n        if (!(inputHandler instanceof AbstractInputHandler)) throw new Error('input handler must be an instanceof AbstractInputHandler');\n        this._inputAdapter.addInputHandler(inputHandler);\n        return this;\n    }\n\n    /** @override */\n    componentDidMount()\n    {\n        this._inputAdapter.initialize(this._ref.current);\n    }\n\n    /** @override */\n    componentWillUnmount()\n    {\n        this._inputAdapter.destroy();\n    }\n\n    /** @override */\n    componentDidUpdate()\n    {\n        this._inputAdapter.update();\n    }\n\n    getSVGTransformString()\n    {\n        const viewport = this._inputAdapter.getViewportAdapter();\n        return 'translate(' + viewport.getOffsetX() + ' ' + viewport.getOffsetY() + ')';\n    }\n\n    getSVGViewBoxString(baseViewSize)\n    {\n        const viewport = this._inputAdapter.getViewportAdapter();\n        const viewSize = baseViewSize * Math.max(Number.MIN_VALUE, viewport.getScale());\n        const halfViewSize = viewSize / 2;\n        return (-halfViewSize) + ' ' + (-halfViewSize) + ' ' + viewSize + ' ' + viewSize;\n    }\n\n    getSVGElement()\n    {\n        return this._ref.current;\n    }\n\n    getInputAdapter()\n    {\n        return this._inputAdapter;\n    }\n\n    /** @override */\n    render()\n    {\n        const viewBox = this.getSVGViewBoxString(this.props.viewSize || DEFAULT_VIEW_SIZE);\n        const transform = this.getSVGTransformString();\n\n        return (\n            <svg ref={this._ref}\n                id={this.props.id}\n                className={Style.viewport_component + ' ' + this.props.className}\n                style={this.props.style}\n                viewBox={viewBox}>\n                <g transform={transform}>\n                    {this.props.children}\n                </g>\n            </svg>\n        );\n    }\n}\n\nexport default ViewportComponent;","import React from 'react';\n\nconst FILL_OPACITY = 0.1;\n\nclass BoxRenderer extends React.Component\n{\n    constructor(props)\n    {\n        super(props);\n    }\n\n    /** @override */\n    render()\n    {\n        const visible = this.props.visible;\n        const fromX = this.props.fromX || 0;\n        const fromY = this.props.fromY || 0;\n        const toX = this.props.toX || fromX + 1;\n        const toY = this.props.toY || fromY + 1;\n        const color = this.props.color || '#000000';\n\n        const dx = toX - fromX;\n        const dy = toY - fromY;\n\n        return (\n            <g>\n                {visible &&\n                    <rect\n                        x={Math.min(toX, fromX)}\n                        y={Math.min(toY, fromY)}\n                        width={Math.abs(dx)}\n                        height={Math.abs(dy)}\n                        stroke={color}\n                        fill={color}\n                        fillOpacity={FILL_OPACITY} />}\n            </g>\n        );\n    }\n}\n\nexport default BoxRenderer;\n","import React from 'react';\n\nconst INPUT_MASK_NODE_RADIUS_OFFSET = 4;\n\nexport const EVENT_SOURCE_NODE = 'node';\n\nexport const DefaultNodeShapeRenderer = props => (\n    <React.Fragment>\n        <circle cx={props.position.x} cy={props.position.y}\n            r={props.radius}\n            fill={props.color}\n            stroke={props.outline} />\n        <circle cx={props.position.x} cy={props.position.y}\n            r={props.radius + INPUT_MASK_NODE_RADIUS_OFFSET}\n            fill=\"transparent\"\n            cursor=\"pointer\"\n            onMouseOver={props.onMouseOver}\n            onMouseOut={props.onMouseOut}\n            pointerEvents={props.pointerEvents} />\n    </React.Fragment>\n);\n\nexport const DefaultLabelRenderer = props => (\n    <text x={props.position.x} y={props.position.y + 4}\n        pointerEvents=\"none\"\n        style={{\n            userSelect: 'none',\n            fontSize: `${(1 - Math.min(Math.max(props.label.length - 2, 0) / 6, 0.5))}em`\n        }}\n        textAnchor=\"middle\"\n        stroke={props.color}>\n        {props.label}\n    </text>\n);\n\nclass NodeRenderer extends React.Component\n{\n    constructor(props) { super(props); }\n\n    /** @override */\n    render()\n    {\n        const position = this.props.position;\n        const radius = this.props.radius || 16;\n        const label = this.props.label || '';\n        const color = this.props.color || '#FFFFFF';\n        const outline = this.props.outline || '#000000';\n        const onMouseOver = this.props.onMouseOver;\n        const onMouseOut = this.props.onMouseOut;\n        const pointerEvents = this.props.pointerEvents || 'visiblePainted';\n\n        const NodeShapeRenderer = DefaultNodeShapeRenderer;\n        const NodeLabelRenderer = DefaultLabelRenderer;\n\n        return (\n            <g>\n                {NodeShapeRenderer &&\n          <NodeShapeRenderer\n              position={position}\n              radius={radius}\n              color={color}\n              outline={outline}\n              onMouseOver={onMouseOver ? e =>\n              {\n                  const value = e.target['value'] || (e.target['value'] = {});\n                  value.type = EVENT_SOURCE_NODE;\n                  onMouseOver(e);\n              } : null}\n              onMouseOut={onMouseOut ? e =>\n              {\n                  const value = e.target['value'] || (e.target['value'] = {});\n                  value.type = EVENT_SOURCE_NODE;\n                  onMouseOut(e);\n              } : null}\n              pointerEvents={pointerEvents} />}\n                {NodeLabelRenderer &&\n          <NodeLabelRenderer\n              position={position}\n              label={label}\n              color={outline} />}\n            </g>\n        );\n    }\n}\n\nexport default NodeRenderer;\n","import React from 'react';\n\nimport NodeRenderer from 'graph2/renderer/NodeRenderer.js';\n\nclass GraphNodeRenderer extends React.Component\n{\n    constructor(props)\n    {\n        super(props);\n    }\n\n    /** @override */\n    render()\n    {\n        const node = this.props.node;\n        const fill = this.props.fill;\n        const stroke = this.props.stroke;\n        const onMouseOver = this.props.onMouseOver;\n        const onMouseOut = this.props.onMouseOut;\n        const pointerEvents = this.props.pointerEvents;\n\n        const label = node.getNodeLabel();\n        const radius = node.getNodeSize();\n\n        return (\n            <React.Fragment>\n                <NodeRenderer\n                    position={node} \n                    radius={radius}\n                    label={label}\n                    color={fill}\n                    outline={stroke}\n                    onMouseOver={onMouseOver ? e =>\n                    {\n                        const value = e.target['value'] || (e.target['value'] = {});\n                        value.source = node;\n                        onMouseOver(e);\n                    } : null}\n                    onMouseOut={onMouseOut ? e =>\n                    {\n                        const value = e.target['value'] || (e.target['value'] = {});\n                        value.source = node;\n                        onMouseOut(e);\n                    } : null}\n                    pointerEvents={pointerEvents} />\n            </React.Fragment>\n        );\n    }\n}\n\nexport default GraphNodeRenderer;\n","import React from 'react';\n\nimport GraphNodeRenderer from '../../renderer/GraphNodeRenderer.js';\n\nclass GraphNodeLayer extends React.Component\n{\n    constructor(props)\n    {\n        super(props);\n    }\n\n    /** @override */\n    render()\n    {\n        const inputController = this.props.inputController;\n        const onMouseOver = this.props.onMouseOver;\n        const onMouseOut = this.props.onMouseOut;\n\n        const nodes = [];\n        for(const node of this.props.nodes)\n        {\n            nodes.push(\n                <GraphNodeRenderer\n                    key={node.getGraphElementID()}\n                    node={node}\n                    onMouseOver={onMouseOver}\n                    onMouseOut={onMouseOut}\n                    pointerEvents={inputController.hasPointerEvents(node) ? 'all' : 'none'} />\n            );\n        }\n\n        return (\n            <g>\n                {nodes}\n            </g>\n        );\n    }\n}\n\nexport default GraphNodeLayer;","import React from 'react';\n\nconst QUAD_RADIAN_THRESHOLD = 0.01;\nconst QUAD_REVERSE_OFFSET_THRESHOLD = 4;\nconst ARROW_WIDTH = 10;\nconst SIXTH_PI = Math.PI / 6;\nconst INPUT_MASK_EDGE_WIDTH = 8;\n\nexport const DIRECTED_FORWARD = 'forward';\nexport const DIRECTED_BACKWARD = 'backward';\nexport const DIRECTED_BOTH = 'both';\nexport const DIRECTED_NONE = 'undirected';\n\nexport const EVENT_SOURCE_FORWARD_ENDPOINT = 'forward-endpoint';\nexport const EVENT_SOURCE_BACKWARD_ENDPOINT = 'backward-endpoint';\nexport const EVENT_SOURCE_EDGE = 'edge';\nexport const EVENT_SOURCE_LABEL = 'label';\n\nexport const DefaultEndpointRenderer = props => (\n    <React.Fragment>\n        <path d={\n            'M ' +\n            (props.position.x - (props.length * Math.sin(props.angle - SIXTH_PI))) +\n            ' ' +\n            (props.position.y - (props.length * Math.cos(props.angle - SIXTH_PI))) +\n            ' ' +\n            'L ' + props.position.x + ' ' + props.position.y +\n            ' ' +\n            'L ' +\n            (props.position.x - (props.length * Math.sin(props.angle + SIXTH_PI))) +\n            ' ' +\n            (props.position.y - (props.length * Math.cos(props.angle + SIXTH_PI)))}\n        stroke={props.color}\n        fill=\"none\" />\n        <circle cx={props.position.x} cy={props.position.y}\n            r={props.length / 2}\n            fill=\"transparent\"\n            cursor=\"pointer\"\n            onMouseOver={props.onMouseOver}\n            onMouseOut={props.onMouseOut}\n            pointerEvents={props.pointerEvents} />\n    </React.Fragment>\n);\n\nexport const DefaultLabelRenderer = props => (\n    <g transform={'translate(' + props.position.x + ',' + props.position.y + ')' +\n        ' ' +\n        'rotate(' + (props.direction * 180 / Math.PI) + ')'}>\n        {\n            props.labels && props.labels.length > 0 &&\n            props.labels.map((str, i) =>\n            {\n                const onMouseOver = props.onMouseOver;\n                const onMouseOut = props.onMouseOut;\n                return (\n                    <text key={str + '.' + i}\n                        transform={'translate(0,' + ((i + 1) * -15) + ')' +\n                            (props.reverse ? ' scale(-1,-1)' : '')}\n                        alignmentBaseline=\"central\"\n                        style={{ userSelect: 'none' }}\n                        textAnchor=\"middle\"\n                        fill={props.color}\n                        cursor=\"pointer\"\n                        onMouseOver={onMouseOver ? e => \n                        {\n                            const value = e.target['value'] || (e.target['value'] = {});\n                            value.index = i;\n                            onMouseOver(e);\n                        } : null}\n                        onMouseOut={onMouseOut ? e =>\n                        {\n                            const value = e.target['value'] || (e.target['value'] = {});\n                            value.index = i;\n                            onMouseOut(e);\n                        } : null}\n                        pointerEvents={props.pointerEvents}>\n                        {str}\n                    </text>\n                );\n            })\n        }\n    </g>\n);\n\nclass EdgeRenderer extends React.Component\n{\n    constructor(props)\n    {\n        super(props);\n    }\n\n    /** @override */\n    render()\n    {\n        const directed = this.props.directed || DIRECTED_NONE;\n\n        const ForwardEndpointRenderer =\n            (directed === DIRECTED_FORWARD || directed === DIRECTED_BOTH) ?\n                (this.props.forwardEndpointRenderer ||\n                    this.props.endpointRenderer ||\n                    DefaultEndpointRenderer) : null;\n        const BackwardEndpointRenderer =\n            (directed === DIRECTED_BACKWARD || directed === DIRECTED_BOTH) ?\n                (this.props.backwardEndpointRenderer ||\n                    this.props.endpointRenderer ||\n                    DefaultEndpointRenderer) : null;\n        const EdgeLabelRenderer = this.props.labelRenderer || DefaultLabelRenderer;\n\n        const fromPoint = this.props.from;\n        const toPoint = this.props.to;\n        const centerPoint = this.props.center;\n        const label = this.props.label || '';\n        const direction = this.props.direction || 0;\n        const color = this.props.color || '#000000';\n        const onMouseOver = this.props.onMouseOver;\n        const onMouseOut = this.props.onMouseOut;\n        const pointerEvents = this.props.pointerEvents || 'visiblePainted';\n\n        let reverseLabel = false;\n        let fromAngle;\n        let toAngle;\n        let quadLine = null;\n\n        const dftx = fromPoint.x - toPoint.x;\n        const dfty = fromPoint.y - toPoint.y;\n        const dfcx = fromPoint.x - centerPoint.x;\n        const dfcy = fromPoint.y - centerPoint.y;\n        const ftrad = Math.atan2(dfty, dftx);\n        const fcrad = Math.atan2(dfcy, dfcx);\n        if (Math.abs(ftrad - fcrad) <= QUAD_RADIAN_THRESHOLD)\n        {\n            toAngle = Math.atan2(centerPoint.x - toPoint.x, centerPoint.y - toPoint.y) + Math.PI;\n            fromAngle = Math.atan2(centerPoint.x - fromPoint.x, centerPoint.y - fromPoint.y) + Math.PI;\n            quadLine = 'L ' + toPoint.x + ' ' + toPoint.y;\n            reverseLabel = false;\n        }\n        else\n        {\n            const cx = ((centerPoint.x * 4) - fromPoint.x - toPoint.x) / 2;\n            const cy = ((centerPoint.y * 4) - fromPoint.y - toPoint.y) / 2;\n            toAngle = Math.atan2(cx - toPoint.x, cy - toPoint.y) + Math.PI;\n            fromAngle = Math.atan2(cx - fromPoint.x, cy - fromPoint.y) + Math.PI;\n            quadLine = 'Q ' + cx + ' ' + cy + ' ' + toPoint.x + ' ' + toPoint.y;\n            reverseLabel = cy > centerPoint.y + QUAD_REVERSE_OFFSET_THRESHOLD;\n        }\n\n        const pathData = `M ${fromPoint.x} ${fromPoint.y} ${quadLine}`;\n        return (\n            <g>\n                <path d={pathData}\n                    stroke={color}\n                    fill=\"none\" />\n                <path d={pathData}\n                    stroke=\"transparent\"\n                    strokeWidth={`${INPUT_MASK_EDGE_WIDTH}px`}\n                    fill=\"none\"\n                    cursor=\"pointer\"\n                    onMouseOver={onMouseOver ? e =>\n                    {\n                        const value = e.target['value'] || (e.target['value'] = {});\n                        value.type = EVENT_SOURCE_EDGE;\n                        onMouseOver(e);\n                    } : null}\n                    onMouseOut={onMouseOut ? e =>\n                    {\n                        const value = e.target['value'] || (e.target['value'] = {});\n                        value.type = EVENT_SOURCE_EDGE;\n                        onMouseOut(e);\n                    } : null}\n                    pointerEvents={pointerEvents} />\n                {ForwardEndpointRenderer &&\n                    <ForwardEndpointRenderer\n                        position={toPoint}\n                        angle={toAngle}\n                        length={ARROW_WIDTH}\n                        color={color}\n                        onMouseOver={onMouseOver ? e =>\n                        {\n                            const value = e.target['value'] || (e.target['value'] = {});\n                            value.type = EVENT_SOURCE_FORWARD_ENDPOINT;\n                            onMouseOver(e);\n                        } : null}\n                        onMouseOut={onMouseOut ? e =>\n                        {\n                            const value = e.target['value'] || (e.target['value'] = {});\n                            value.type = EVENT_SOURCE_FORWARD_ENDPOINT;\n                            onMouseOut(e);\n                        } : null}\n                        pointerEvents={pointerEvents} />}\n                {BackwardEndpointRenderer &&\n                    <BackwardEndpointRenderer\n                        position={fromPoint}\n                        angle={fromAngle}\n                        length={ARROW_WIDTH}\n                        color={color}\n                        onMouseOver={onMouseOver ? e => \n                        {\n                            const value = e.target['value'] || (e.target['value'] = {});\n                            value.type = EVENT_SOURCE_BACKWARD_ENDPOINT;\n                            onMouseOver(e);\n                        } : null}\n                        onMouseOut={onMouseOut ? e =>\n                        {\n                            const value = e.target['value'] || (e.target['value'] = {});\n                            value.type = EVENT_SOURCE_BACKWARD_ENDPOINT;\n                            onMouseOut(e);\n                        } : null}\n                        pointerEvents={pointerEvents} />}\n                {EdgeLabelRenderer &&\n                    <EdgeLabelRenderer\n                        position={centerPoint}\n                        labels={label.split('\\n')}\n                        direction={direction}\n                        reverse={reverseLabel}\n                        color={color}\n                        onMouseOver={onMouseOver ? e => \n                        {\n                            const value = e.target['value'] || (e.target['value'] = {});\n                            value.type = EVENT_SOURCE_LABEL;\n                            onMouseOver(e);\n                        } : null}\n                        onMouseOut={onMouseOut ? e =>\n                        {\n                            const value = e.target['value'] || (e.target['value'] = {});\n                            value.type = EVENT_SOURCE_LABEL;\n                            onMouseOut(e);\n                        } : null}\n                        pointerEvents={pointerEvents} />}\n            </g>\n        );\n    }\n}\n\nexport default EdgeRenderer;\n","import React from 'react';\n\nimport EdgeRenderer, {DIRECTED_FORWARD} from 'graph2/renderer/EdgeRenderer.js';\n\nclass GraphEdgeRenderer extends React.Component\n{\n    constructor(props)\n    {\n        super(props);\n    }\n\n    /** @override */\n    render()\n    {\n        const edge = this.props.edge;\n        const stroke = this.props.stroke;\n        const onMouseOver = this.props.onMouseOver;\n        const onMouseOut = this.props.onMouseOut;\n        const pointerEvents = this.props.pointerEvents;\n\n        const start = edge.getStartPoint();\n        const end = edge.getEndPoint();\n        const center = edge.getCenterPoint();\n        const label = edge.getEdgeLabel();\n        const edgeDir = edge.getEdgeDirection();\n\n        return (\n            <React.Fragment>\n                <EdgeRenderer\n                    directed={DIRECTED_FORWARD}\n                    from={start}\n                    to={end}\n                    center={center}\n                    label={label}\n                    direction={edgeDir}\n                    color={stroke}\n                    onMouseOver={onMouseOver ? e =>\n                    {\n                        const value = e.target['value'] || (e.target['value'] = {});\n                        value.source = edge;\n                        onMouseOver(e);\n                    } : null}\n                    onMouseOut={onMouseOut ? e =>\n                    {\n                        const value = e.target['value'] || (e.target['value'] = {});\n                        value.source = edge;\n                        onMouseOut(e);\n                    } : null}\n                    pointerEvents={pointerEvents} />\n            </React.Fragment>\n        );\n    }\n}\n\nexport default GraphEdgeRenderer;\n","import React from 'react';\n\nimport GraphEdgeRenderer from '../../renderer/GraphEdgeRenderer.js';\n\nclass GraphEdgeLayer extends React.Component\n{\n    constructor(props) { super(props); }\n\n    /** @override */\n    render()\n    {\n        const inputController = this.props.inputController;\n        const onMouseOver = this.props.onMouseOver;\n        const onMouseOut = this.props.onMouseOut;\n\t\t\n        const edges = [];\n        for(const edge of this.props.edges)\n        {\n            edges.push(\n                <GraphEdgeRenderer\n                    key={edge.getGraphElementID()}\n                    edge={edge}\n                    onMouseOver={onMouseOver}\n                    onMouseOut={onMouseOut}\n                    pointerEvents={inputController.hasPointerEvents(edge) ? 'all' : 'none'} />\n            );\n        }\n\n        return (\n            <g>\n                {edges}\n            </g>\n        );\n    }\n}\n\nexport default GraphEdgeLayer;","import React from 'react';\n\nconst HIGHLIGHT_LINE_WIDTH = 3;\nconst HIGHLIGHT_LINE_ARRAY = [8, 6];\nconst HIGHLIGHT_OFFSET = 0;\n\nclass GraphHighlightRenderer extends React.Component\n{\n    constructor(props)\n    {\n        super(props);\n    }\n\n    /** @override */\n    render()\n    {\n        const center = this.props.center;\n        const stroke = this.props.color || '#CCCCCC';\n        const radius = this.props.radius || 24;\n\n        return (\n            <React.Fragment>\n                <circle\n                    cx={center.x} cy={center.y} r={radius}\n                    stroke={stroke}\n                    strokeDashoffset={HIGHLIGHT_OFFSET}\n                    strokeDasharray={HIGHLIGHT_LINE_ARRAY}\n                    strokeWidth={HIGHLIGHT_LINE_WIDTH}\n                    fill=\"none\"\n                    pointerEvents=\"none\" />\n            </React.Fragment>\n        );\n    }\n}\n\nexport default GraphHighlightRenderer;\n","import React from 'react';\n\nimport GraphHighlightRenderer from '../../renderer/GraphHighlightRenderer.js';\n\nconst HIGHLIGHT_OFFSET = 4;\n\nclass GraphHighlightLayer extends React.Component\n{\n    constructor(props)\n    {\n        super(props);\n    }\n\n    /** @override */\n    render()\n    {\n        const highlights = [];\n\n        const nodes = this.props.nodes;\n        if (nodes)\n        {\n            for(const node of nodes)\n            {\n                highlights.push(\n                    <GraphHighlightRenderer\n                        key={node.getGraphElementID()}\n                        center={node}\n                        radius={node.getNodeSize() + HIGHLIGHT_OFFSET}/>\n                );\n            }\n        }\n\n        const edges = this.props.edges;\n        if (edges)\n        {\n            for(const edge of edges)\n            {\n                highlights.push(\n                    <GraphHighlightRenderer\n                        key={edge.getGraphElementID()}\n                        center={edge.getCenterPoint()}/>\n                );\n            }\n        }\n\n        return (\n            <g>\n                {highlights}\n            </g>\n        );\n    }\n}\n\nexport default GraphHighlightLayer;","import AbstractInputHandler from 'util/input/AbstractInputHandler.js';\n\nclass SelectionBoxInputHandler extends AbstractInputHandler\n{\n    constructor(inputController, graphController, selectionBox)\n    {\n        super();\n\n        this._inputController = inputController;\n        this._graphController = graphController;\n        this._selectionBox = selectionBox;\n    }\n\n    /** @override */\n    onPreInputEvent(pointer)\n    {\n        const inputController = this._inputController;\n        const selectionBox = this._selectionBox;\n        if (selectionBox.hasSelection())\n        {\n            if (!inputController.isMoveMode() || !selectionBox.isTargetInSelection(inputController.getImmediateTargetSource()))\n            {\n                selectionBox.clearSelection();\n            }\n        }\n\n        return false;\n    }\n\n    /** @override */\n    onDragStart(pointer)\n    {\n        const inputController = this._inputController;\n        if (inputController.hasActiveTarget()) return false;\n        if (inputController.isMoveMode()) return false;\n        if (inputController.hasCurrentTarget()) return false;\n\n        const inputEventPosition = pointer.getInputEventPosition();\n        this._selectionBox.beginSelection(this._graphController.getGraph(), inputEventPosition.x, inputEventPosition.y);\n        return true;\n    }\n  \n    /** @override */\n    onDragMove(pointer)\n    {\n        if (this._selectionBox.isVisible())\n        {\n            this._selectionBox.updateSelection(this._graphController.getGraph(), pointer.x, pointer.y);\n        }\n    }\n  \n    /** @override */\n    onDragStop(pointer)\n    {\n        if (this._selectionBox.isVisible())\n        {\n            this._selectionBox.endSelection(this._graphController.getGraph(), pointer.x, pointer.y);\n        }\n    }\n}\n\nexport default SelectionBoxInputHandler;","import AbstractInputHandler from 'util/input/AbstractInputHandler.js';\n\nclass ViewportInputHandler extends AbstractInputHandler\n{\n    constructor(inputController)\n    {\n        super();\n\n        this._inputController = inputController;\n\n        this._cachedPosition = {x: 0, y: 0};\n    }\n\n    /** @override */\n    onDragStart(pointer)\n    {\n        const inputController = this._inputController;\n        if (inputController.hasActiveTarget()) return false;\n        if (inputController.hasCurrentTarget()) return false;\n        if (!inputController.isMoveMode()) return false;\n\n        const inputEventPosition = pointer.getInputEventPosition();\n        this._cachedPosition.x = inputEventPosition.x;\n        this._cachedPosition.y = inputEventPosition.y;\n        return true;\n    }\n  \n    /** @override */\n    onDragMove(pointer)\n    {\n        const dx = pointer.x - this._cachedPosition.x;\n        const dy = pointer.y - this._cachedPosition.y;\n\n        const adapter = pointer.getInputAdapter();\n        const viewport = adapter.getViewportAdapter();\n        viewport.addOffset(dx, dy, true);\n\n        /*\n\t\t// We don't want to update it due to how viewports are positioned.\n\t\tthis._cachedPosition.x = pointer.x;\n\t\tthis._cachedPosition.y = pointer.y;\n\t\t*/\n    }\n  \n    /** @override */\n    onDragStop(pointer)\n    {\n        // Do nothing.\n    }\n}\n\nexport default ViewportInputHandler;","import React from 'react';\n\nimport BoxRenderer from 'graph2/renderer/BoxRenderer.js';\n\nimport GraphNodeLayer from '../layers/GraphNodeLayer.js';\nimport GraphEdgeLayer from '../layers/GraphEdgeLayer.js';\nimport GraphHighlightLayer from '../layers/GraphHighlightLayer.js';\n\nimport InputContext from 'util/input/InputContext.js';\nimport SelectionBoxInputHandler from 'graph2/inputs/SelectionBoxInputHandler.js';\nimport ViewportInputHandler from 'graph2/inputs/ViewportInputHandler.js';\n\nclass NodeGraphView extends React.Component\n{\n    constructor(props)\n    {\n        super(props);\n\n        this._inputContext = new InputContext();\n    }\n\n    /** @override */\n    componentDidMount()\n    {\n        const viewport = this.props.viewport;\n        const inputController = this.props.inputController;\n        const graphController = this.props.graphController;\n        const selectionBox = this.props.selectionBox;\n        const inputAdapter = viewport.getInputAdapter();\n\n        const context = this._inputContext;\n        if (selectionBox)\n        {\n            context.addInputHandler(new SelectionBoxInputHandler(inputController, graphController, selectionBox));\n        }\n        if (inputController)\n        {\n            context.addInputHandler(new ViewportInputHandler(inputController));\n        }\n        inputAdapter.bindContextAsLast(context);\n    }\n\n    /** @override */\n    componentWillUnmount()\n    {\n        const viewport = this.props.viewport;\n        const inputAdapter = viewport.getInputAdapter();\n        const context = this._inputContext;\n        context.clearInputHandlers();\n        inputAdapter.unbindContext(context);\n    }\n\n    getInputContext() { return this._inputContext; }\n\n    /** @override */\n    render()\n    {\n        const inputController = this.props.inputController;\n        const graphController = this.props.graphController;\n        const selectionBox = this.props.selectionBox;\n        const onMouseOver = this.props.onMouseOver;\n        const onMouseOut = this.props.onMouseOut;\n\n        const graph = graphController.getGraph();\n        const selectionBoundingBox = selectionBox ? selectionBox.getBoundingBox() : null;\n\n        // Order matters here, it determines the z-index!\n        return (\n            <React.Fragment>\n                <GraphNodeLayer nodes={graph.getNodes()}\n                    inputController={inputController}\n                    onMouseOver={onMouseOver}\n                    onMouseOut={onMouseOut} />\n                <GraphEdgeLayer edges={graph.getEdges()}\n                    inputController={inputController}\n                    onMouseOver={onMouseOver}\n                    onMouseOut={onMouseOut} />\n                {selectionBox &&\n                    <React.Fragment>\n                        <GraphHighlightLayer\n                            nodes={selectionBox.getSelection()} />\n                        <BoxRenderer visible={selectionBox.isVisible()}\n                            fromX={selectionBoundingBox.fromX}\n                            fromY={selectionBoundingBox.fromY}\n                            toX={selectionBoundingBox.toX}\n                            toY={selectionBoundingBox.toY} />\n                    </React.Fragment>}\n            </React.Fragment>\n        );\n    }\n}\n\nexport default NodeGraphView;","/**\n * A class that represents any positioned, unique object in a graph. Usually\n * this is not instantiated, but rather extended. Look at {@link NodeElement}\n * and {@link EdgeElement} as examples.\n */\nclass GraphElement\n{\n    /**\n   * Creates an element with the unique id.\n   * \n   * @param {Number} elementID The unique id that represents the element.\n   */\n    constructor(elementID)\n    {\n        this._id = elementID;\n    }\n\n    /**\n   * Sets the element's id to the passed-in id.\n   * @param {String} elementID  The new id.\n   * @returns {this}\n   */\n    setGraphElementID(elementID)\n    {\n        this._id = elementID;\n        return this;\n    }\n\n    /**\n   * Compute the center point of the element and store the result in dst. The\n   * properties changed in dst are: x, y.\n   * @param  {Object} [dst={x: 0, y: 0}]    The object to store the result.\n   * @returns {Object}                       The passed-in dst.\n   */\n    getCenterPoint(dst = { x: 0, y: 0 })\n    {\n        dst.x = dst.y = 0;\n        return dst;\n    }\n\n    /**\n   * A unique identifier for this graph element\n   * @returns {String} The unique identifier for this element.\n   */\n    getGraphElementID() { return this._id; }\n\n    /**\n   * Computes the hash string that represents this element and its current state\n   * uniquely and deterministically. {@link NodeGraph} uses this to compute its\n   * hash code that distinguishes it from other graphs. The generated string\n   * should only be used to differentiate between other objects of the same hash\n   * function. In other words, every instance should only be compared to other\n   * instances of the same class (or extended class without override).\n   * @param  {Boolean} [usePosition=true] Whether to consider positioning as\n   *                                      part of the unique state.\n   * @returns {String}                     The hash string that represents this\n   *                                      current state.\n   */\n    getHashString(usePosition = true) { return this._id; }\n}\n\nexport default GraphElement;\n","import GraphElement from './GraphElement.js';\n\n/**\n * A class that represents the node elements of a graph.\n *\n * @see {@link NodeGraph}\n * @extends GraphElement\n */\nclass GraphNode extends GraphElement\n{\n    /**\n   * Creates a node with the unique id.\n   * \n   * @param {String} id         the element id for this node.\n   * @param {Number} [x=0]      the initial x position\n   * @param {Number} [y=0]      the initial y position\n   */\n    constructor(id, x = 0, y = 0)\n    {\n        super(id);\n\n        this.x = x;\n        this.y = y;\n    \n        this._label = '';\n    }\n\n    /** @override */\n    getCenterPoint(dst={x: 0, y: 0})\n    {\n        dst.x = this.x;\n        dst.y = this.y;\n        return dst;\n    }\n\n    /**\n   * Sets the node label to the passed-in string.\n   *\n   * Assumes the label is NOT null.\n   * @param {String} label  The new node label.\n   * @returns {this}\n   */\n    setNodeLabel(label)\n    {\n        this._label = label;\n        return this;\n    }\n\n    /**\n   * Gets the label of the node. If the node has no label, it will return an\n   * empty string.\n   * @returns {String} The node's label.\n   */\n    getNodeLabel() { return this._label; }\n\n    /**\n   * Gets the size of the node. Can be overriden to specify a different size.\n   * @returns {Number} The radius of the node.\n   */\n    getNodeSize() { return 16; }\n\n    /** @override */\n    getHashString(usePosition=true)\n    {\n        if (usePosition)\n        {\n            return super.getHashString(usePosition) + ':' +\n        Math.floor(this.x) + ',' + Math.floor(this.y) + '.' + this._label;\n        }\n        else\n        {\n            return super.getHashString(usePosition) + ':' + this._label;\n        }\n    }\n}\n\nexport default GraphNode;\n","import GraphElement from './GraphElement.js';\n\n/**\n * A class that represents the edge elements of a graph.\n * \n * @see {@link NodeGraph}\n * @extends GraphElement\n */\nclass GraphEdge extends GraphElement\n{\n    /**\n   * Creates a edge with the unique id.\n   * \n   * @param {String} id           The element id for this node.\n   * @param {GraphNode} from      The from node of the edge.\n   * @param {GraphNode} [to=null] The to node of the edge.\n   */\n    constructor(id, from, to=null)\n    {\n        super(id);\n\n        this._from = from;\n        this._to = to;\n\n        this._label = '';\n    }\n\n    setEdgeFrom(node)\n    {\n        if (!node) throw new Error('Source of edge cannot be null');\n\n        this._from = node;\n        return this;\n    }\n\n    setEdgeTo(node)\n    {\n        this._to = node;\n        return this;\n    }\n\n    /**\n   * Sets the edge label to the passed-in string.\n   *\n   * Assumes the label is NOT null.\n   * @param {String} label  The new edge label.\n   * @returns {this}\n   */\n    setEdgeLabel(label)\n    {\n        this._label = label;\n        return this;\n    }\n\n    getEdgeDirection()\n    {\n        const from = this._from;\n        const to = this._to;\n        const HALFPI = Math.PI / 2;\n        let result = 0;\n\n        if (this.isPlaceholder())\n        {\n            result = Math.PI / 4;\n        }\n        else\n        {\n            const dy = to.y - from.y;\n            const dx = to.x - from.x;\n            result = Math.atan2(dy, dx);\n        }\n\n        if (result > HALFPI || result < -HALFPI)\n        {\n            result += Math.PI;\n        }\n\n        return result;\n    }\n\n    getStartPoint(dst = { x: 0, y: 0 })\n    {\n        const from = this._from;\n        dst.x = from.x;\n        dst.y = from.y;\n        return dst;\n    }\n\n    /** @override */\n    getCenterPoint(dst = { x: 0, y: 0 })\n    {\n        const from = this._from;\n        const to = this._to;\n        if (this.isPlaceholder())\n        {\n            const halfPlaceholderLength = this.getPlaceholderLength() / 2;\n            dst.x = from.x + halfPlaceholderLength;\n            dst.y = from.y + halfPlaceholderLength;\n        }\n        else\n        {\n            dst.x = from.x + (to.x - from.x) / 2;\n            dst.y = from.y + (to.y - from.y) / 2;\n        }\n        return dst;\n    }\n\n    getEndPoint(dst = { x: 0, y: 0 })\n    {\n        if (this.isPlaceholder())\n        {\n            const from = this._from;\n            const placeholderLength = this.getPlaceholderLength();\n            dst.x = from.x + placeholderLength;\n            dst.y = from.y + placeholderLength;\n        }\n        else\n        {\n            const to = this._to;\n            dst.x = to.x;\n            dst.y = to.y;\n        }\n        return dst;\n    }\n\n    getPlaceholderLength() { return this._from.getNodeSize(); }\n    isPlaceholder() { return this._to === null; }\n    isSelfLoop() { return this._from === this._to; }\n\n    /**\n   * Gets the label of the edge. If the edge has no label, it will return an\n   * empty string.\n   * @returns {String} The edge's label.\n   */\n    getEdgeLabel() { return this._label; }\n\n    getEdgeFrom() { return this._from; }\n    getEdgeTo() { return this._to; }\n\n    /** @override */\n    getHashString(usePosition = true)\n    {\n        const src = this._from ? this._from.getHashString(usePosition) : '';\n        // HACK: to may be a pointer, which is not a node, so getHashString does not exist.\n        const dst = this._to ? this._to.getHashString ? this._to.getHashString(usePosition) : '0' : '';\n        return super.getHashString(usePosition) + ':' + src + ',' + dst + '.' + this._label;\n    }\n}\n\nexport default GraphEdge;","import React from 'react';\n\nexport const SUBMIT_DELAY = 30;\nexport const SUBMIT_KEY = 'Enter';\nexport const CANCEL_KEY = 'Escape';\n\nclass PatternInput extends React.Component\n{\n    constructor(props)\n    {\n        super(props);\n\n        this.inputElement = null;\n\n        this.placeholder = '';\n        this.maxLength = 524288;/*This is the default value*/\n        this.multiLine = true;\n        this.formatter = null;\n\n        this._submitTimeout = null;\n        this._submit = props.submitOnBlur;\n        this._skipBlur = false;\n        this._skipSelect = false;\n\n        this.state = {\n            prevValue: '',\n            value: ''\n        };\n\n        this.onChange = this.onChange.bind(this);\n        this.onFocus = this.onFocus.bind(this);\n        this.onBlur = this.onBlur.bind(this);\n        this.onKeyDown = this.onKeyDown.bind(this);\n    }\n\n    setFormatter(formatter)\n    {\n        this.formatter = formatter;\n        return this;\n    }\n\n    setPlaceholder(placeholder)\n    {\n        this.placeholder = placeholder;\n        return this;\n    }\n\n    onFocus(e)\n    {\n        if (this._skipSelect)\n        {\n            this.inputElement.select();\n            this._skipSelect = false;\n        }\n    }\n\n    onBlur(e)\n    {\n        if (!this._submitTimeout)\n        {\n            this._submitTimeout = setTimeout(() => \n            {\n                this._submitTimeout = null;\n                if (this._skipBlur) return;\n\n                const submit = this._submit;\n                this._submit = this.props.submitOnBlur;\n                if (document.activeElement !== this.inputElement && submit)\n                {\n                    const value = this.state.value;\n                    if (this.props.onSubmit) this.props.onSubmit(value);\n\n                    this.setState({prevValue: value});\n                }\n                else\n                {\n                    this.setState((prev, props) => \n                    {\n                        return {value: prev.prevValue};\n                    });\n                }\n\n                if (this.props.onBlur) this.props.onBlur(e);\n            }, SUBMIT_DELAY);\n        }\n    }\n\n    onKeyDown(e)\n    {\n        if (e.key === SUBMIT_KEY)\n        {\n            if (e.shiftKey && this.multiLine) return;\n\n            this._submit = true;\n            this.inputElement.blur();\n\n            e.preventDefault();\n            e.stopPropagation();\n        }\n        else if (e.key === CANCEL_KEY)\n        {\n            this.setState((prev, props) => \n            {\n                return {value: prev.prevValue};\n            }, () => \n            {\n                this._submit = false;\n                this.inputElement.blur();\n            });\n\n            e.preventDefault();\n            e.stopPropagation();\n        }\n    }\n\n    onChange(e)\n    {\n        const target = e.target;\n        const caretPosition = target.selectionStart;\n        let value = target.value;\n        if (this.formatter)\n        {\n            value = this.formatter(value, this.state.value);\n        }\n\n        this.setState({value: value}, () => \n        {\n            target.selectionEnd = caretPosition;\n        });\n    }\n\n    focus(select=true)\n    {\n        this._skipSelect = select;\n        this.inputElement.focus();\n    }\n\n    ignoreBlur(ignore)\n    {\n        const prev = this._skipBlur;\n        this._skipBlur = ignore;\n        return prev !== ignore;\n    }\n\n    appendValue(string, separator='', format=true)\n    {\n        const value = this.state.value;\n        if (value && value.length + string.length > this.maxLength) return;\n\n        let result;\n        if (value && value.length > 0)\n        {\n            result = value + separator + string;\n        }\n        else\n        {\n            result = string;\n        }\n\n        if (format && this.formatter)\n        {\n            result = this.formatter(result, this.state.value);\n        }\n\n        this.setState((prev, props) => \n        {\n            return {value: result};\n        });\n    }\n\n    resetValue(string)\n    {\n        this.setState({prevValue: string, value: string});\n    }\n\n    setValue(string, format=true)\n    {\n        let value = string;\n        if (format && this.formatter)\n        {\n            value = this.formatter(value, this.state.value);\n        }\n        this.setState({value: value});\n    }\n\n    getValue()\n    {\n        return this.state.value;\n    }\n\n    /** @override */\n    render()\n    {\n        const placeholder = this.placeholder;\n        const maxlength = this.maxLength;\n        const multiline = this.multiLine;\n        const disabled = this.props.disabled;\n\n        const value = this.state.value;\n\n        return (\n            <div id={this.props.id}\n                className={this.props.className}\n                style={this.props.style}>\n                {\n                    multiline ?\n                        <textarea ref={ref=>this.inputElement=ref}\n                            type=\"text\" rows=\"1\" spellCheck=\"false\"\n                            disabled={disabled}\n                            placeholder={placeholder}\n                            maxLength={maxlength}\n                            value={value}\n                            onChange={this.onChange}\n                            onFocus={this.onFocus}\n                            onBlur={this.onBlur}\n                            onKeyDown={this.onKeyDown}/>\n                        :\n                        <input ref={ref=>this.inputElement=ref}\n                            type=\"text\" spellCheck=\"false\"\n                            disabled={disabled}\n                            placeholder={placeholder}\n                            maxLength={maxlength}\n                            value={value}\n                            onChange={this.onChange}\n                            onFocus={this.onFocus}\n                            onBlur={this.onBlur}\n                            onKeyDown={this.onKeyDown}/>\n                }\n            </div>\n        );\n    }\n}\n\nexport default PatternInput;\n","import React from 'react';\nimport Style from './LabelEditorView.css';\n\nimport GraphElement from 'graph2/element/GraphElement.js';\nimport GraphNode from 'graph2/element/GraphNode.js';\nimport GraphEdge from 'graph2/element/GraphEdge.js';\n\nimport PatternInput from 'graph2/components/widgets/pattern/PatternInput.js';\n\nclass LabelEditorView extends React.Component\n{\n    constructor(props)\n    {\n        super(props);\n\n        this._ref = React.createRef();\n        this.inputComponent = null;\n\n        this.state = {\n            open: false\n        };\n\n        this._target = null;\n        this._targetCallback = null;\n\n        this.onInputSubmit = this.onInputSubmit.bind(this);\n        this.onInputBlur = this.onInputBlur.bind(this);\n    }\n\n    openEditor(graphElement, defaultValue = null, onSubmit = null, onCancel = null)\n    {\n        if (!(graphElement instanceof GraphElement))\n            throw new Error('Can only open editor for GraphElements');\n\n        this._target = graphElement;\n        this._targetOnSubmit = onSubmit;\n        this._targetOnCancel = onCancel;\n\n        if (graphElement instanceof GraphNode)\n        {\n            const formatter = this.props.labelFormatter['formatNodeLabel'];\n            this.inputComponent.setFormatter(formatter);\n        }\n        else if (graphElement instanceof GraphEdge)\n        {\n            const formatter = this.props.labelFormatter['formatEdgeLabel'];\n            this.inputComponent.setFormatter(formatter);\n        }\n\n        this.setState({ open: true }, () =>\n        {\n            if (defaultValue !== null)\n            {\n                this.inputComponent.resetValue(defaultValue);\n            }\n            this.inputComponent.focus();\n        });\n    }\n\n    closeEditor()\n    {\n        this._target = null;\n        this._targetOnSubmit = null;\n        this._targetOnCancel = null;\n\n        this.inputComponent.setFormatter(null);\n\n        this.setState({ open: false });\n    }\n\n    isEditorOpen()\n    {\n        return this.state.open;\n    }\n\n    getTarget()\n    {\n        return this._target;\n    }\n\n    onInputSubmit(value)\n    {\n        if (this._targetOnSubmit)\n        {\n            this._targetOnSubmit(this._target, value);\n            //Don't handle cancel callbacks...\n            this._targetOnCancel = null;\n        }\n    }\n\n    onInputBlur(e)\n    {\n        if (this._targetOnCancel)\n        {\n            this._targetOnCancel(this._target);\n            //Don't handle submit callbacks...\n            this._targetOnSubmit = null;\n        }\n        this.closeEditor();\n    }\n\n    /** @override */\n    render()\n    {\n        const isEditorOpen = this.state.open;\n\n        const target = this._target;\n        const targetStyle = this.props.style || {};\n        const viewport = this.props.viewport;\n\n        if (viewport)\n        {\n            const viewportAdapter = this.props.viewport.getInputAdapter().getViewportAdapter();\n\n            if (target)\n            {\n                const center = target.getCenterPoint();\n                const element = viewportAdapter.getElement();\n                const parentClientRect = element.getBoundingClientRect();\n                const screenPos = transformViewToScreen(\n                    element,\n                    center.x + viewportAdapter.getOffsetX(),\n                    center.y + viewportAdapter.getOffsetY()\n                );\n                const x = screenPos.x;\n                const y = screenPos.y;\n                const offsetX = -(this._ref.current.offsetWidth / 2) - parentClientRect.left;\n                const offsetY = -(this._ref.current.offsetHeight / 2) - parentClientRect.top;\n\n                targetStyle['top'] = (y + offsetY) + 'px';\n                targetStyle['left'] = (x + offsetX) + 'px';\n            }\n        }\n\n        return (\n            <div ref={this._ref}\n                id={this.props.id}\n                className={Style.editor_container +\n          (isEditorOpen ? ' open ' : '') +\n          ' ' + this.props.className}\n                style={targetStyle}>\n                <PatternInput ref={ref => this.inputComponent = ref}\n                    submitOnBlur={this.props.saveOnExit}\n                    onSubmit={this.onInputSubmit}\n                    onBlur={this.onInputBlur} />\n                <div className={Style.tray_container}>\n                    {this.props.children}\n                </div>\n            </div>\n        );\n    }\n}\n\nfunction transformViewToScreen(svg, x, y)\n{\n    const ctm = svg.getScreenCTM();\n    return {\n        x: (x * ctm.a) + ctm.e,\n        y: (y * ctm.d) + ctm.f\n    };\n}\n\nexport default LabelEditorView;\n","import React from 'react';\nimport Style from './TrashCanWidget.css';\n\nimport TrashCanDetailedIcon from 'components/iconset/TrashCanDetailedIcon.js';\n\nconst DOUBLE_TAP_TIME = 250;\n\nclass TrashCanWidget extends React.Component\n{\n    constructor(props)\n    {\n        super(props);\n\n        this.ref = null;\n\n        this.state = {\n            active: false,\n            forceActive: false\n        };\n\n        this._doubleTapTimeout = null;\n\n        this.onMouseEnter = this.onMouseEnter.bind(this);\n        this.onMouseLeave = this.onMouseLeave.bind(this);\n        this.onClick = this.onClick.bind(this);\n\n        // This is kinda a hack to lose trash mode focus...\n        this.onAnyMouseDownNotConsumed = this.onAnyMouseDownNotConsumed.bind(this);\n    }\n\n    onMouseEnter(e)\n    {\n        if (this.state.forceActive) return;\n\n        this.setState({ active: true }, () =>\n        {\n            const onChange = this.props.onChange;\n            if (onChange) onChange(true);\n        });\n    }\n\n    onMouseLeave(e)\n    {\n        if (this.state.forceActive) return;\n\n        this.setState({ active: false }, () =>\n        {\n            const onChange = this.props.onChange;\n            if (onChange) onChange(false);\n        });\n    }\n\n    onClick(e)\n    {\n        e.stopPropagation();\n        e.preventDefault();\n\n        if (this._doubleTapTimeout)\n        {\n            // This is a double tap!\n            clearTimeout(this._doubleTapTimeout);\n            this._doubleTapTimeout = null;\n\n            this.setState({ active: false, forceActive: false }, () =>\n            {\n                const onClear = this.props.onClear;\n                if (onClear) onClear();\n                const onChange = this.props.onChange;\n                if (onChange) onChange(false);\n            });\n        }\n        else\n        {\n            // This is a single tap!\n            this.setState((prev, props) =>\n            {\n                const result = !prev.forceActive;\n\n                this._doubleTapTimeout = setTimeout(() =>\n                {\n                    this._doubleTapTimeout = null;\n                }, DOUBLE_TAP_TIME);\n\n                if (result)\n                {\n                    document.documentElement.addEventListener('mousedown', this.onAnyMouseDownNotConsumed);\n                }\n\n                return {\n                    active: result,\n                    forceActive: result\n                };\n            }, () =>\n            {\n                const onChange = this.props.onChange;\n                if (onChange) onChange(this.state.active);\n            });\n        }\n    }\n\n    onAnyMouseDownNotConsumed(e)\n    {\n        if (this.state.forceActive && this.ref !== e.target)\n        {\n            e.stopPropagation();\n            e.preventDefault();\n\n            document.documentElement.removeEventListener('mousedown', this.onAnyMouseDownNotConsumed);\n\n            this.setState({ active: false, forceActive: false }, () =>\n            {\n                const onChange = this.props.onChange;\n                if (onChange) onChange(false);\n            });\n        }\n    }\n    /** @override */\n    render()\n    {\n        const visible = this.props.visible;\n        const active = this.state.active;\n        const hide = !active && !visible;\n\n        return (\n            <div ref={ref => this.ref = ref} id={this.props.id}\n                className={Style.trash_container +\n          (active ? ' active ' : '') +\n          (hide ? ' hide ' : '') +\n          ' ' + this.props.className}\n                style={this.props.style}\n                onMouseEnter={this.onMouseEnter}\n                onMouseLeave={this.onMouseLeave}\n                onClick={this.onClick}>\n                <TrashCanDetailedIcon />\n            </div>\n        );\n    }\n}\n\nexport default TrashCanWidget;\n","import React from 'react';\nimport Style from './ModeTrayWidget.css';\n\nimport IconButton from 'experimental/components/IconButton.js';\nimport EditPencilIcon from 'components/iconset/EditPencilIcon.js';\nimport MoveIcon from 'components/iconset/MoveIcon.js';\n\nexport const MODE_ACTION = 0;\nexport const MODE_MOVE = 1;\n\nclass ModeTrayWidget extends React.Component\n{\n    constructor(props) { super(props); }\n\n    /** @override */\n    render()\n    {\n        const visible = this.props.visible;\n        const mode = this.props.mode;\n        const onChange = this.props.onChange;\n        const hide = !visible;\n\n        return (\n            <div id={this.props.id}\n                className={Style.tray_container +\n          (hide ? ' hide ' : '') +\n          ' ' + this.props.className}\n                style={this.props.style}>\n                <IconButton className={Style.tray_button +\n          (mode === MODE_ACTION ? ' active ' : '')}\n                onClick={() => \n                {\n                    if (onChange) onChange(MODE_ACTION);\n                }}\n                title={I18N.toString('cursor.actionmode')}>\n                    <EditPencilIcon/>\n                </IconButton>\n                <IconButton className={Style.tray_button +\n          (mode === MODE_MOVE ? ' active ' : '')}\n                onClick={() => \n                {\n                    if (onChange) onChange(MODE_MOVE);\n                }}\n                title={I18N.toString('cursor.movemode')}>\n                    <MoveIcon/>\n                </IconButton>\n            </div>\n        );\n    }\n}\nexport default ModeTrayWidget;\n","import React from 'react';\nimport Style from './ViewportLayer.css';\n\nimport TrashCanWidget from '../widgets/TrashCanWidget.js';\nimport ModeTrayWidget, { MODE_ACTION, MODE_MOVE } from '../widgets/ModeTrayWidget.js';\n\nclass ViewportLayer extends React.Component\n{\n    constructor(props)\n    {\n        super(props);\n\n        this.onTrashChange = this.onTrashChange.bind(this);\n        this.onTrashClear = this.onTrashClear.bind(this);\n        this.onModeChange = this.onModeChange.bind(this);\n    }\n\n    onTrashChange(flag)\n    {\n        this.props.inputController.setTrashMode(flag);\n    }\n\n    onTrashClear()\n    {\n        this.props.graphController.clearGraph();\n    }\n\n    onModeChange(value)\n    {\n        this.props.inputController.setMoveModeFirst(value === MODE_MOVE);\n    }\n\n    /** @override */\n    render()\n    {\n        const inputController = this.props.inputController;\n        const graphController = this.props.graphController;\n        const viewport = this.props.viewport;\n        const graph = graphController.getGraph();\n\n        let moveMode = null;\n        if (inputController)\n        {\n            if (inputController.isHandlingInput())\n            {\n                moveMode = inputController.isMoveMode() ? MODE_MOVE : MODE_ACTION;\n            }\n            else\n            {\n                moveMode = inputController.isMoveModeFirst() ? MODE_MOVE : MODE_ACTION;\n            }\n        }\n\n        return (\n            <div id={this.props.id}\n                className={Style.view_container +\n\t\t\t\t\t' ' + this.props.className}\n                style={this.props.style}>\n                <TrashCanWidget className={Style.view_widget}\n                    style={{ bottom: 0, right: 0 }}\n                    visible={!graph.isEmpty() && viewport &&\n\t\t\t\t\t\t(!viewport.getInputAdapter().isUsingTouch() || !viewport.getInputAdapter().isDragging())}\n                    onChange={this.onTrashChange}\n                    onClear={this.onTrashClear} />\n                <ModeTrayWidget className={Style.view_widget}\n                    style={{ bottom: 0, left: 0 }}\n                    visible={inputController}\n                    mode={moveMode}\n                    onChange={this.onModeChange} />\n                {this.props.children}\n            </div>\n        );\n    }\n}\n\nexport default ViewportLayer;","import React from 'react';\nimport Style from './ZoomWidget.css';\n\nimport IconButton from 'experimental/components/IconButton.js';\nimport ZoomInIcon from 'components/iconset/ZoomInIcon.js';\nimport ZoomOutIcon from 'components/iconset/ZoomOutIcon.js';\n\nclass ZoomWidget extends React.Component\n{\n    constructor(props)\n    {\n        super(props);\n\n        this.onZoomIn = this.onZoomIn.bind(this);\n        this.onZoomOut = this.onZoomOut.bind(this);\n    }\n\n    onZoomIn(e)\n    {\n        const viewportAdapter = this.props.viewportAdapter;\n        const viewScale = -viewportAdapter.getScale() * 0.4;\n        viewportAdapter.addScale(viewScale);\n    }\n\n    onZoomOut(e)\n    {\n        const viewportAdapter = this.props.viewportAdapter;\n        const viewScale = viewportAdapter.getScale() * 0.75;\n        viewportAdapter.addScale(viewScale);\n    }\n\n    /** @override */\n    render()\n    {\n        const viewportAdapter = this.props.viewportAdapter;\n        const viewScale = 'x' + (1 / (viewportAdapter.getScale() || 1)).toFixed(2);\n\n        return (\n            <div id={this.props.id}\n                className={Style.zoom_container +\n          ' ' + this.props.className}\n                style={this.props.style}>\n                <IconButton className={Style.zoom_button} title=\"Zoom In\" onClick={this.onZoomIn}>\n                    <ZoomInIcon/>\n                </IconButton>\n                <IconButton className={Style.zoom_button} title=\"Zoom Out\" onClick={this.onZoomOut}>\n                    <ZoomOutIcon/>\n                </IconButton>\n                <label className={Style.zoom_label}>{viewScale}</label>\n            </div>\n        );\n    }\n}\n\nexport default ZoomWidget;\n","import React from 'react';\nimport Style from './FocusCenterWidget.css';\n\nimport IconButton from 'experimental/components/IconButton.js';\nimport PinpointIcon from 'components/iconset/PinpointIcon.js';\n\nconst OFFSET_EPSILON = 0.1;\n\nclass FocusCenterWidget extends React.Component\n{\n    constructor(props)\n    {\n        super(props);\n\n        this.onClick = this.onClick.bind(this);\n    }\n\n    onClick(e)\n    {\n        const viewportAdapter = this.props.viewportAdapter;\n        viewportAdapter.setOffset(0, 0);\n    }\n\n    /** @override */\n    render()\n    {\n        const viewportAdapter = this.props.viewportAdapter;\n\n        return (\n            <IconButton id={this.props.id}\n                className={Style.center_focus_button +\n          ' ' + this.props.className}\n                style={this.props.style}\n                title={'Center Workspace'}\n                disabled={Math.abs(viewportAdapter.getOffsetX()) < OFFSET_EPSILON &&\n          Math.abs(viewportAdapter.getOffsetY()) < OFFSET_EPSILON}\n                onClick={this.onClick}>\n                <PinpointIcon />\n            </IconButton>\n        );\n    }\n}\n\nexport default FocusCenterWidget;\n","import React from 'react';\nimport Style from './ViewportNavigationLayer.css';\n\nimport ZoomWidget from '../widgets/ZoomWidget.js';\nimport FocusCenterWidget from '../widgets/FocusCenterWidget.js';\n\nclass ViewportNavigationLayer extends React.Component\n{\n    constructor(props)\n    {\n        super(props);\n    }\n\n    /** @override */\n    render()\n    {\n        const viewportAdapter = this.props.viewportAdapter;\n\n        return (\n            <div id={this.props.id}\n                className={Style.navbar_container +\n\t\t\t\t\t' ' + this.props.className}\n                style={this.props.style}>\n                <ZoomWidget className={Style.navbar_widget_container}\n                    viewportAdapter={viewportAdapter} />\n                <FocusCenterWidget className={Style.navbar_widget}\n                    viewportAdapter={viewportAdapter} />\n                {this.props.children}\n            </div>\n        );\n    }\n}\n\nexport default ViewportNavigationLayer;","import AbstractInputHandler from 'util/input/AbstractInputHandler.js';\nimport { lerp } from 'util/MathHelper.js';\nimport { EVENT_SOURCE_NODE } from 'graph2/renderer/NodeRenderer.js';\n\nexport const GRAPH_EVENT_NODE_CREATE = 'node-create';\nexport const GRAPH_EVENT_NODE_DELETE = 'node-delete';\nexport const GRAPH_EVENT_NODE_DELETE_ALL = 'node-delete-all';\nexport const GRAPH_EVENT_NODE_LABEL_CHANGE = 'edge-label-change';\nexport const GRAPH_EVENT_NODE_MOVE = 'node-move';\nexport const GRAPH_EVENT_NODE_MOVE_ALL = 'node-move-all';\nexport const GRAPH_EVENT_NODE_EDIT_WHILE_DELETE = 'error-node-edit-while-delete';\n\nconst NODE_POSITION_INTERPOLATION_DELTA = 0.6;\nconst SHOULD_DELETE_NODE_WITH_EMPTY_LABEL = false;\n\nclass GraphNodeInputHandler extends AbstractInputHandler\n{\n    constructor(inputController, graphController, selectionBox, labelFormatter)\n    {\n        super();\n        this._inputController = inputController;\n        this._graphController = graphController;\n        this._selectionBox = selectionBox;\n        this._labelFormatter = labelFormatter;\n\n        this._cachedPosition = { x: 0, y: 0 };\n    }\n\n    /** @override */\n    onInputEvent(pointer)\n    {\n        const inputController = this._inputController;\n        const currentTargetType = inputController.getCurrentTargetType();\n\n        if (inputController.isTrashMode())\n        {\n            // Don't delete stuff if moving...\n            if (inputController.isMoveMode())\n            {\n                this._graphController.emitGraphEvent(GRAPH_EVENT_NODE_EDIT_WHILE_DELETE);\n                return false;\n            }\n\n            if (currentTargetType === EVENT_SOURCE_NODE)\n            {\n                const currentTargetSource = inputController.getCurrentTargetSource();\n                const graphController = this._graphController;\n                graphController.getGraph().deleteNode(currentTargetSource);\n                graphController.emitGraphEvent(GRAPH_EVENT_NODE_DELETE, { target: currentTargetSource });\n                return true;\n            }\n        }\n\n        if (!inputController.isMoveMode() && currentTargetType === EVENT_SOURCE_NODE)\n        {\n            const currentTargetSource = inputController.getCurrentTargetSource();\n            const graphController = this._graphController;\n            graphController.openLabelEditor(currentTargetSource, currentTargetSource.getNodeLabel(),\n                (target, value, hasChanged) => \n                {\n                    if (SHOULD_DELETE_NODE_WITH_EMPTY_LABEL && !value)\n                    {\n                        graphController.getGraph().deleteNode(currentTargetSource);\n                        graphController.emitGraphEvent(GRAPH_EVENT_NODE_DELETE, { target: currentTargetSource });\n                    }\n                    else if (hasChanged)\n                    {\n                        graphController.emitGraphEvent(GRAPH_EVENT_NODE_LABEL_CHANGE, { target: currentTargetSource });\n                    }\n                });\n            return true;\n        }\n\n        return false;\n    }\n\n    /** @override */\n    onAltInputEvent(pointer)\n    {\n        return this.onInputEvent(pointer);\n    }\n\n    /** @override */\n    onDblInputEvent(pointer)\n    {\n        const inputController = this._inputController;\n        if (inputController.hasActiveTarget()) return false;\n        if (inputController.isTrashMode()) return false;\n\n        const currentTargetType = inputController.getCurrentTargetType();\n        if (!currentTargetType)\n        {\n            const graphController = this._graphController;\n            const graph = graphController.getGraph();\n            const node = graph.createNode(pointer.x, pointer.y);\n            node.setNodeLabel(this._labelFormatter.getDefaultNodeLabel());\n            graphController.emitGraphEvent(GRAPH_EVENT_NODE_CREATE, { target: node });\n        }\n    }\n\n    /** @override */\n    onDragStart(pointer)\n    {\n        const inputController = this._inputController;\n        if (inputController.hasActiveTarget()) return false;\n        if (inputController.isTrashMode())\n        {\n            this._graphController.emitGraphEvent(GRAPH_EVENT_NODE_EDIT_WHILE_DELETE);\n            return false;\n        }\n\n        const currentTargetType = inputController.getCurrentTargetType();\n        if (currentTargetType === EVENT_SOURCE_NODE)\n        {\n            const currentTargetSource = inputController.getCurrentTargetSource();\n            if (this._selectionBox.hasSelection())\n            {\n                if (!this._selectionBox.isTargetInSelection(currentTargetSource))\n                {\n                    this._selectionBox.clearSelection();\n                }\n                else\n                {\n                    this._cachedPosition.x = pointer.x;\n                    this._cachedPosition.y = pointer.y;\n                }\n            }\n            inputController.bindActiveTarget(currentTargetSource, currentTargetType, false);\n            return true;\n        }\n\n        return false;\n    }\n\n    /** @override */\n    onDragMove(pointer)\n    {\n        const inputController = this._inputController;\n        const targetSource = inputController.getActiveTargetSource();\n        if (this._selectionBox.hasSelection())\n        {\n            const dx = pointer.x - this._cachedPosition.x;\n            const dy = pointer.y - this._cachedPosition.y;\n            for (const node of this._selectionBox.getSelection())\n            {\n                node.x += dx;\n                node.y += dy;\n            }\n            this._cachedPosition.x = pointer.x;\n            this._cachedPosition.y = pointer.y;\n        }\n        else\n        {\n            this.moveNodeTo(this._graphController.getGraph(), targetSource, pointer.x, pointer.y);\n        }\n    }\n\n    /** @override */\n    onDragStop(pointer)\n    {\n        const inputController = this._inputController;\n        const graphController = this._graphController;\n        const selectionBox = this._selectionBox;\n\n        const targetSource = inputController.getActiveTargetSource();\n        inputController.unbindActiveTarget();\n\n        if (inputController.isTrashMode())\n        {\n            if (selectionBox.hasSelection())\n            {\n                const graph = graphController.getGraph();\n                const dst = [];\n                for (const node of selectionBox.getSelection())\n                {\n                    graph.deleteNode(node);\n                    dst.push(node);\n                }\n                graphController.emitGraphEvent(GRAPH_EVENT_NODE_DELETE_ALL, { target: dst });\n            }\n            else\n            {\n                graphController.getGraph().deleteNode(targetSource);\n                graphController.emitGraphEvent(GRAPH_EVENT_NODE_DELETE, { target: targetSource });\n            }\n            return;\n        }\n\n        if (selectionBox.hasSelection())\n        {\n            graphController.emitGraphEvent(GRAPH_EVENT_NODE_MOVE_ALL, { target: selectionBox.getSelection() });\n        }\n        else\n        {\n            graphController.emitGraphEvent(GRAPH_EVENT_NODE_MOVE, { target: targetSource });\n        }\n    }\n\n    moveNodeTo(graph, node, x, y)\n    {\n        x = lerp(node.x, x, NODE_POSITION_INTERPOLATION_DELTA);\n        y = lerp(node.y, y, NODE_POSITION_INTERPOLATION_DELTA);\n\n        const nodeSize = node.getNodeSize();\n        for (const other of graph.getNodes())\n        {\n            //Update node collision\n            if (node === other) continue;\n\n            const dx = x - other.x;\n            const dy = y - other.y;\n            const angle = Math.atan2(dy, dx);\n\n            const diameter = (nodeSize * 2);\n            const nextDX = other.x + (Math.cos(angle) * diameter) - x;\n            const nextDY = other.y + (Math.sin(angle) * diameter) - y;\n\n            if (dx * dx + dy * dy < nodeSize * nodeSize * 4)\n            {\n                x += nextDX;\n                y += nextDY;\n            }\n        }\n\n        node.x = x;\n        node.y = y;\n    }\n}\n\nexport default GraphNodeInputHandler;","import AbstractInputHandler from 'util/input/AbstractInputHandler.js';\nimport { lerp } from 'util/MathHelper.js';\n\nimport { EVENT_SOURCE_FORWARD_ENDPOINT, EVENT_SOURCE_EDGE, EVENT_SOURCE_LABEL } from 'graph2/renderer/EdgeRenderer.js';\nimport { EVENT_SOURCE_NODE } from 'graph2/renderer/NodeRenderer.js';\n\nexport const GRAPH_EVENT_EDGE_CREATE = 'edge-create';\nexport const GRAPH_EVENT_EDGE_DELETE = 'edge-delete';\nexport const GRAPH_EVENT_EDGE_LABEL_CHANGE = 'edge-label-change';\nexport const GRAPH_EVENT_EDGE_TO_CHANGE = 'edge-to-change';\nexport const GRAPH_EVENT_EDGE_QUAD_CHANGE = 'edge-quad-change';\nexport const GRAPH_EVENT_EDGE_EDIT_WHILE_DELETE = 'error-edge-edit-while-delete';\n\nconst EDGE_POSITION_INTERPOLATION_DELTA = 0.6;\n\nconst SHOULD_DELETE_EDGE_PLACEHOLDER = false;\nconst SHOULD_DELETE_EDGE_WITH_EMPTY_LABEL = false;\n\nclass GraphEdgeInputHandler extends AbstractInputHandler\n{\n    constructor(inputController, graphController, labelFormatter)\n    {\n        super();\n\n        this._inputController = inputController;\n        this._graphController = graphController;\n        this._labelFormatter = labelFormatter;\n\n        this._cachedEdgeQuads = {\n            radians: 0,\n            length: 0\n        };\n        this._cachedEdgeTo = null;\n        this._cachedPointer = { x: 0, y: 0 };\n        this._newEdge = false;\n    }\n\n    /** @override */\n    onInputEvent(pointer)\n    {\n        const inputController = this._inputController;\n        const currentTargetType = inputController.getCurrentTargetType();\n\n        if (inputController.isTrashMode())\n        {\n            //Don't delete stuff if moving...\n            if (inputController.isMoveMode())\n            {\n                this._graphController.emitGraphEvent(GRAPH_EVENT_EDGE_EDIT_WHILE_DELETE);\n                return false;\n            }\n\n            if (currentTargetType === EVENT_SOURCE_EDGE || currentTargetType === EVENT_SOURCE_FORWARD_ENDPOINT || currentTargetType === EVENT_SOURCE_LABEL)\n            {\n                const currentTargetSource = inputController.getCurrentTargetSource();\n                const graphController = this._graphController;\n                graphController.getGraph().deleteEdge(currentTargetSource);\n                graphController.emitGraphEvent(GRAPH_EVENT_EDGE_DELETE, {target: currentTargetSource});\n                return true;\n            }\n        }\n\n        if (!inputController.isMoveMode() && currentTargetType === EVENT_SOURCE_EDGE)\n        {\n            const currentTargetSource = inputController.getCurrentTargetSource();\n            const graphController = this._graphController;\n            graphController.openLabelEditor(currentTargetSource, currentTargetSource.getEdgeLabel(),\n                (target, value, hasChanged) => \n                {\n                    if (SHOULD_DELETE_EDGE_WITH_EMPTY_LABEL && !value)\n                    {\n                        graphController.getGraph().deleteEdge(currentTargetSource);\n                        graphController.emitGraphEvent(GRAPH_EVENT_EDGE_DELETE, {target: currentTargetSource});\n                    }\n                    else if (hasChanged)\n                    {\n                        graphController.emitGraphEvent(GRAPH_EVENT_EDGE_LABEL_CHANGE, {target: currentTargetSource});\n                    }\n                });\n            return true;\n        }\n\n        return false;\n    }\n\n    /** @override */\n    onAltInputEvent(pointer)\n    {\n        return this.onInputEvent(pointer);\n    }\n\n    /** @override */\n    onDragStart(pointer)\n    {\n        const inputController = this._inputController;\n        if (inputController.hasActiveTarget()) return false;\n        if (inputController.isTrashMode())\n        {\n            this._graphController.emitGraphEvent(GRAPH_EVENT_EDGE_EDIT_WHILE_DELETE);\n            return false;\n        }\n\n        const currentTargetType = inputController.getCurrentTargetType();\n        if (!inputController.isMoveMode() && currentTargetType === EVENT_SOURCE_NODE)\n        {\n            const graphController = this._graphController;\n            const graph = graphController.getGraph();\n\n            const currentTargetSource = inputController.getCurrentTargetSource();\n\n            this._cachedEdgeQuads.radians = 0;\n            this._cachedEdgeQuads.length = 0;\n            this._cachedEdgeTo = null;\n            this._newEdge = true;\n            this._cachedPointer.x = pointer.x;\n            this._cachedPointer.y = pointer.y;\n\n            const targetEdge = graph.createEdge(currentTargetSource, this._cachedPointer);\n\n            inputController.bindActiveTarget(targetEdge, EVENT_SOURCE_FORWARD_ENDPOINT, false);\n            inputController.setNodeEventsOnly(true);\n            return true;\n        }\n        else if (currentTargetType === EVENT_SOURCE_FORWARD_ENDPOINT)\n        {\n            const currentTargetSource = inputController.getCurrentTargetSource();\n\n            this._cachedEdgeQuads.radians = currentTargetSource.getQuadraticRadians();\n            this._cachedEdgeQuads.length = currentTargetSource.getQuadraticLength();\n            this._cachedEdgeTo = currentTargetSource.getEdgeTo();\n            this._newEdge = false;\n            this._cachedPointer.x = pointer.x;\n            this._cachedPointer.y = pointer.y;\n\n            currentTargetSource.setQuadraticRadians(0);\n            currentTargetSource.setQuadraticLength(0);\n            currentTargetSource.setEdgeTo(this._cachedPointer);\n\n            inputController.bindActiveTarget(currentTargetSource, currentTargetType, false);\n            inputController.setNodeEventsOnly(true);\n            return true;\n        }\n        else if (currentTargetType === EVENT_SOURCE_EDGE)\n        {\n            const currentTargetSource = inputController.getCurrentTargetSource();\n\n            this._cachedEdgeQuads.radians = currentTargetSource.getQuadraticRadians();\n            this._cachedEdgeQuads.length = currentTargetSource.getQuadraticLength();\n            this._cachedEdgeTo = currentTargetSource.getEdgeTo();\n            this._newEdge = false;\n            this._cachedPointer.x = pointer.x;\n            this._cachedPointer.y = pointer.y;\n\n            inputController.bindActiveTarget(currentTargetSource, currentTargetType, false);\n            return true;\n        }\n\n        return false;\n    }\n\n    /** @override */\n    onDragMove(pointer)\n    {\n        const inputController = this._inputController;\n        const targetSource = inputController.getActiveTargetSource();\n        const targetType = inputController.getActiveTargetType();\n\n        if (targetType === EVENT_SOURCE_EDGE)\n        {\n            targetSource.setQuadraticByCoords(pointer.x, pointer.y);\n        }\n        else if (targetType === EVENT_SOURCE_FORWARD_ENDPOINT)\n        {\n            const immediateTargetType = inputController.getImmediateTargetType();\n            if (immediateTargetType === EVENT_SOURCE_NODE)\n            {\n                const immediateTargetSource = inputController.getImmediateTargetSource();\n\t\t\t\t\n                // Restore the previously cached edge quadratics\n                if (targetSource.getEdgeTo() === this._cachedEdgeTo)\n                {\n                    targetSource.setQuadraticRadians(this._cachedEdgeQuads.radians);\n                    targetSource.setQuadraticLength(this._cachedEdgeQuads.length);\n                }\n                // Angle the self-loop edge towards the pointer\n                else if (targetSource.getEdgeFrom() === immediateTargetSource)\n                {\n                    const from = targetSource.getEdgeFrom();\n                    const dx = from.x - pointer.x;\n                    const dy = from.y - pointer.y;\n                    const radians = Math.PI + Math.atan2(dy, dx);\n                    targetSource.setQuadraticRadians(radians);\n                    targetSource.setEdgeTo(immediateTargetSource);\n                }\n                else\n                {\n                    targetSource.setQuadraticRadians(0);\n                    targetSource.setQuadraticLength(0);\n                    targetSource.setEdgeTo(immediateTargetSource);\n                }\n            }\n            else\n            {\n                this._cachedPointer.x = lerp(this._cachedPointer.x, pointer.x, EDGE_POSITION_INTERPOLATION_DELTA);\n                this._cachedPointer.y = lerp(this._cachedPointer.y, pointer.y, EDGE_POSITION_INTERPOLATION_DELTA);\n\n                if (targetSource.getEdgeTo() !== this._cachedPointer)\n                {\n                    targetSource.setQuadraticRadians(0);\n                    targetSource.setQuadraticLength(0);\n\n                    targetSource.setEdgeTo(this._cachedPointer);\n                }\n            }\n        }\n    }\n\n    /** @override */\n    onDragStop(pointer)\n    {\n        const inputController = this._inputController;\n        const targetSource = inputController.getActiveTargetSource();\n        const targetType = inputController.getActiveTargetType();\n        const isNewEdge = this._newEdge;\n\n        inputController.unbindActiveTarget();\n        if (targetType === EVENT_SOURCE_FORWARD_ENDPOINT)\n        {\n            inputController.setNodeEventsOnly(false);\n        }\n\n        const graphController = this._graphController;\n        if (inputController.isTrashMode())\n        {\n            graphController.getGraph().deleteEdge(targetSource);\n            graphController.emitGraphEvent(GRAPH_EVENT_EDGE_DELETE, {target: targetSource});\n            return;\n        }\n\n        if (targetType === EVENT_SOURCE_EDGE)\n        {\n            graphController.emitGraphEvent(GRAPH_EVENT_EDGE_QUAD_CHANGE, {target: targetSource});\n        }\n        else\n        {\n            const edgeTo = targetSource.getEdgeTo();\n            if (!edgeTo || edgeTo === this._cachedPointer)\n            {\n                if (SHOULD_DELETE_EDGE_PLACEHOLDER)\n                {\n                    graphController.getGraph().deleteEdge(targetSource);\n                    graphController.emitGraphEvent(GRAPH_EVENT_EDGE_DELETE, {target: targetSource});\n                    return;\n                }\n                else\n                {\n                    targetSource.setEdgeTo(null);\n\n                    if (isNewEdge)\n                    {\n                        targetSource.setEdgeLabel(this._labelFormatter.getDefaultEdgeLabel());\n                        graphController.emitGraphEvent(GRAPH_EVENT_EDGE_CREATE, {target: targetSource});\n                    }\n                    else\n                    {\n                        graphController.emitGraphEvent(GRAPH_EVENT_EDGE_TO_CHANGE, {target: targetSource});\n                    }\n                }\n            }\n            else if (edgeTo !== this._cachedEdgeTo)\n            {\n                targetSource.setEdgeLabel(this._labelFormatter.getDefaultEdgeLabel());\n                graphController.openLabelEditor(targetSource, isNewEdge ? null : targetSource.getEdgeLabel(),\n                    (target, value, hasChanged) => \n                    {\n                        if (SHOULD_DELETE_EDGE_WITH_EMPTY_LABEL && !value)\n                        {\n                            graphController.getGraph().deleteEdge(targetSource);\n                            graphController.emitGraphEvent(GRAPH_EVENT_EDGE_DELETE, {target: targetSource});\n                        }\n                        else if (isNewEdge)\n                        {\n                            graphController.emitGraphEvent(GRAPH_EVENT_EDGE_CREATE, {target: targetSource});\n                        }\n                        else if (hasChanged)\n                        {\n                            graphController.emitGraphEvent(GRAPH_EVENT_EDGE_TO_CHANGE, {target: targetSource});\n                        }\n                    });\n            }\n        }\n    }\n}\n\nexport default GraphEdgeInputHandler;","import GraphNodeInputHandler from '../inputs/GraphNodeInputHandler.js';\nimport GraphEdgeInputHandler from '../inputs/GraphEdgeInputHandler.js';\nimport InputContext from 'util/input/InputContext.js';\n\nimport GraphNode from 'graph2/element/GraphNode.js';\n\nconst DEFAULT_MOVE_MODE_FIRST = true;\n\nclass InputController\n{\n    constructor()\n    {\n        this._trashMode = false;\n        this._moveMode = DEFAULT_MOVE_MODE_FIRST;\n        this._nodeOnly = false;\n        this._moveModeFirst = DEFAULT_MOVE_MODE_FIRST;\n        this._handlingInput = false;\n\n        this._target = {\n            source: null,\n            type: null\n        };\n        this._activeTarget = {\n            source: null,\n            type: null,\n            input: true\n        };\n        this._immediateTarget = {\n            source: null,\n            type: null\n        };\n\n        this._inputContext = new InputContext();\n        this._graphController = null;\n        this._selectionBox = null;\n        this._labelFormatter = null;\n\n        this.onMouseOver = this.onMouseOver.bind(this);\n        this.onMouseOut = this.onMouseOut.bind(this);\n    }\n\n    setGraphController(graphController)\n    {\n        this._graphController = graphController;\n        return this;\n    }\n\n    setSelectionBox(selectionBox)\n    {\n        this._selectionBox = selectionBox;\n        return this;\n    }\n\n    setLabelFormatter(labelFormatter)\n    {\n        this._labelFormatter = labelFormatter;\n        return this;\n    }\n\n    setMoveMode(flag)\n    {\n        this._moveMode = flag;\n        return this;\n    }\n\n    setTrashMode(flag)\n    {\n        this._trashMode = flag;\n        return this;\n    }\n\n    setNodeEventsOnly(flag)\n    {\n        this._nodeOnly = flag;\n        return this;\n    }\n\n    setMoveModeFirst(flag)\n    {\n        this._moveModeFirst = flag;\n        return this;\n    }\n\n    initialize()\n    {\n        const graphController = this._graphController;\n        if (!graphController) throw new Error('Must set graph controller before init');\n        const selectionBox = this._selectionBox;\n        if (!selectionBox) throw new Error('Must set selection box before init');\n        const labelFormatter = this._labelFormatter;\n        if (!labelFormatter) throw new Error('Must set label formatter before init');\n\n        this._inputContext\n            .addInputHandler(this)\n            .addInputHandler(new GraphEdgeInputHandler(this, graphController, labelFormatter))\n            .addInputHandler(new GraphNodeInputHandler(this, graphController, selectionBox, labelFormatter));\n    }\n\n    update()\n    {\n        // There's nothing to do yet...\n    }\n\n    destroy()\n    {\n        this._inputContext.clearInputHandlers();\n    }\n\n    /** @override */\n    onPreInputEvent(pointer)\n    {\n        this._handlingInput = true;\n        this._moveMode = !pointer.getInputAdapter().isAltInput();\n\n        this.updateCurrentTarget(this._immediateTarget.source, this._immediateTarget.type);\n        return false;\n    }\n\n    /** @override */\n    onPostInputEvent(pointer)\n    {\n        this.updateCurrentTarget(null, null);\n        this._handlingInput = false;\n    }\n\n    onMouseOver(e)\n    {\n        const target = e.target;\n        const value = target['value'];\n        this._immediateTarget.source = value.source;\n        this._immediateTarget.type = value.type;\n\t\t\n        // Although you can access this, it cannot be a property for \"active\" targets.\n        // This is because those properties are used for comparison and equality. The\n        // extra data could be used for that, but it's up to you to manage that.\n        this._immediateTarget.data = value;\n    }\n\n    onMouseOut(e)\n    {\n        this._immediateTarget.source = null;\n        this._immediateTarget.type = null;\n\n        this._immediateTarget.data = null;\n    }\n\n    bindActiveTarget(targetSource, targetType, pointerEvent = true)\n    {\n        this._activeTarget.source = targetSource;\n        this._activeTarget.type = targetType;\n        this._activeTarget.input = pointerEvent;\n    }\n\n    unbindActiveTarget()\n    {\n        this._activeTarget.source = null;\n        this._activeTarget.type = null;\n        this._activeTarget.input = false;\n    }\n\n    updateCurrentTarget(targetSource, targetType)\n    {\n        this._target.source = targetSource;\n        this._target.type = targetType;\n    }\n\n    getActiveTargetSource() { return this._activeTarget.source; }\n    getActiveTargetType() { return this._activeTarget.type; }\n    hasActiveTarget() { return this._activeTarget.type !== null; }\n\n    hasPointerEvents(targetSource)\n    {\n        if (this._activeTarget.source === targetSource) return this._activeTarget.input;\n        if (this._nodeOnly) return targetSource instanceof GraphNode;\n        return true;\n    }\n\n    getCurrentTargetSource() { return this._target.source; }\n    getCurrentTargetType() { return this._target.type; }\n    hasCurrentTarget() { return this._target.type !== null; }\n\n    getImmediateTargetSource() { return this._immediateTarget.source; }\n    getImmediateTargetType() { return this._immediateTarget.type; }\n    hasImmediateTarget() { return this._immediateTarget.type !== null; }\n\n    isTrashMode() { return this._trashMode; }\n    isMoveMode() { return this._moveModeFirst ? this._moveMode : !this._moveMode; }\n    isNodeEventsOnly() { return this._nodeOnly; }\n    isMoveModeFirst() { return this._moveModeFirst; }\n\n    isHandlingInput() { return this._handlingInput; }\n    getInputContext() { return this._inputContext; }\n}\n\nexport default InputController;","class SelectionBox\n{\n    constructor()\n    {\n        this._boundingBox = {\n            fromX: 0, fromY: 0,\n            toX: 0, toY: 0,\n            visible: false\n        };\n\n        this.targets = [];\n    }\n\n    getBoundingBox() { return this._boundingBox; }\n\n    getSelection(graph, forceUpdate = false)\n    {\n        if (forceUpdate)\n        {\n            const box = this._boundingBox;\n            const mx = Math.max(box.toX, box.fromX);\n            const my = Math.max(box.toY, box.fromY);\n            const lx = Math.min(box.toX, box.fromX);\n            const ly = Math.min(box.toY, box.fromY);\n            this.clearSelection();\n            getNodesWithin(graph, lx, ly, mx, my, this.targets);\n        }\n\n        return this.targets;\n    }\n\n    beginSelection(graph, x, y)\n    {\n        const box = this._boundingBox;\n        box.fromX = box.toX = x;\n        box.fromY = box.toY = y;\n        this.clearSelection();\n\n        box.visible = true;\n    }\n\n    updateSelection(graph, x, y)\n    {\n        const box = this._boundingBox;\n        box.toX = x;\n        box.toY = y;\n        this.getSelection(graph, true);\n    }\n\n    endSelection(graph, x, y)\n    {\n        const box = this._boundingBox;\n        box.toX = x;\n        box.toY = y;\n        this.getSelection(graph, true);\n\n        box.visible = false;\n    }\n\t\n    isTargetInSelection(target) { return this.targets.includes(target); }\n    hasSelection() { return this.targets.length > 0; }\n    clearSelection() { this.targets.length = 0; }\n    isVisible() { return this._boundingBox.visible; }\n}\n\nfunction getNodesWithin(graph, x1, y1, x2, y2, dst)\n{\n    const fromX = Math.min(x1, x2);\n    const fromY = Math.min(y1, y2);\n    const toX = Math.max(x1, x2);\n    const toY = Math.max(y1, y2);\n\n    for (const node of graph.getNodes())\n    {\n        if (node.x >= fromX && node.x < toX &&\n\t\t\tnode.y >= fromY && node.y < toY)\n        {\n            dst.push(node);\n        }\n    }\n    return dst;\n}\n\nexport default SelectionBox;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport ViewportComponent from 'util/input/components/ViewportComponent.js';\nimport NodeGraphView from './NodeGraphView.js';\nimport LabelEditorView from './LabelEditorView.js';\nimport ViewportLayer from '../layers/ViewportLayer.js';\nimport ViewportNavigationLayer from '../layers/ViewportNavigationLayer.js';\n\nimport InputController from 'graph2/controller/InputController.js';\nimport SelectionBox from 'graph2/controller/SelectionBox.js';\n\nclass GraphEditorView extends React.Component\n{\n    constructor(props)\n    {\n        super(props);\n\n        this._inputController = new InputController();\n        this._selectionBox = new SelectionBox();\n\n        this._viewportComponent = React.createRef();\n        this._labelEditorComponent = React.createRef();\n        this._graphViewComponent = React.createRef();\n\n        this.onMouseOver = this.onMouseOver.bind(this);\n        this.onMouseOut = this.onMouseOut.bind(this);\n    }\n\n    /** @override */\n    componentDidMount()\n    {\n        const inputController = this._inputController;\n        const selectionBox = this._selectionBox;\n\n        const graphController = this.props.graphController;\n        const labelFormatter = graphController.getLabelFormatter();\n\n        const viewport = this.getViewportComponent();\n        const inputAdapter = viewport.getInputAdapter();\n\n        graphController.setInputController(inputController);\n\n        inputController.setGraphController(graphController);\n        inputController.setSelectionBox(selectionBox);\n        inputController.setLabelFormatter(labelFormatter);\n        inputAdapter.bindContext(inputController.getInputContext());\n\n        inputController.initialize();\n        graphController.initialize();\n    }\n\n    /** @override */\n    componentDidUpdate()\n    {\n        this._inputController.update();\n        this.props.graphController.update();\n    }\n\n    /** @override */\n    componentWillUnmount()\n    {\n        const viewport = this.getViewportComponent();\n        const inputAdapter = viewport.getInputAdapter();\n        inputAdapter.unbindContext(this._inputController.getInputContext());\n\n        this.props.graphController.destroy();\n\n        this._selectionBox.clearSelection();\n        this._inputController.destroy();\n    }\n\n    onMouseOver(e) { this._inputController.onMouseOver(e); }\n    onMouseOut(e) { this._inputController.onMouseOut(e); }\n\n    getInputController() { return this._inputController; }\n    getSelectionBox() { return this._selectionBox; }\n\n    getViewportComponent() { return this._viewportComponent.current; }\n    getLabelEditorComponent() { return this._labelEditorComponent.current; }\n\n    /** @override */\n    render()\n    {\n        const viewport = this.getViewportComponent();\n\n        const inputController = this._inputController;\n        const selectionBox = this._selectionBox;\n\n        const graphController = this.props.graphController;\n        const labelFormatter = graphController.getLabelFormatter();\n\n        return (\n            <React.Fragment>\n                <ViewportComponent ref={this._viewportComponent}\n                    id={this.props.id}\n                    className={this.props.className}\n                    style={this.props.style}>\n                    {viewport &&\n                        <React.Fragment>\n                            <NodeGraphView ref={this._graphViewComponent}\n                                graphController={graphController}\n                                inputController={inputController}\n                                selectionBox={selectionBox}\n                                viewport={viewport}\n                                onMouseOver={this.onMouseOver}\n                                onMouseOut={this.onMouseOut} />\n                            {this.props.children}\n                        </React.Fragment>}\n                </ViewportComponent>\n                {viewport &&\n                    <React.Fragment>\n                        <ViewportLayer\n                            graphController={graphController}\n                            inputController={inputController}\n                            viewport={viewport}>\n                            <ViewportNavigationLayer\n                                style={{ right: 0 }}\n                                viewportAdapter={viewport.getInputAdapter().getViewportAdapter()} />\n                            {this.props.overlay}\n                        </ViewportLayer>\n                        <LabelEditorView ref={ref =>\n                        {\n                            this._labelEditorComponent.current = ref;\n                            graphController.setLabelEditor(ref);\n                        }}\n                        labelFormatter={labelFormatter}\n                        viewport={viewport}\n                        saveOnExit={true}>\n                            {this.props.labelEditor}\n                        </LabelEditorView>\n                    </React.Fragment>}\n            </React.Fragment>\n        );\n    }\n}\n\nGraphEditorView.propTypes = {\n    id: PropTypes.string,\n    className: PropTypes.string,\n    style: PropTypes.object\n};\n\nexport default GraphEditorView;\n","import GraphNode from './element/GraphNode.js';\nimport GraphEdge from './element/GraphEdge.js';\nimport { guid, stringHash } from 'util/MathHelper.js';\n\n/**\n * A class that represents a graph that coordinates nodes and edges.\n * \n */\nclass NodeGraph\n{\n    /**\n     * Create a NodeGraph.\n     * \n     * @param {Class} [nodeClass=GraphNode] The class that represents a node.\n     * @param {Class} [edgeClass=GraphEdge] The class that represents an edge.\n     */\n    constructor(nodeClass = GraphNode, edgeClass = GraphEdge)\n    {\n        this._nodeClass = nodeClass;\n        this._edgeClass = edgeClass;\n\n        this._nodeMapping = new Map();\n        this._edgeMapping = new Map();\n    }\n\n    /**\n     * Removes all nodes and edges from the graph.\n     */\n    clear()\n    {\n        this.clearEdges();\n        this.clearNodes();\n    }\n\n    /**\n     * Checks whether there exists any number of nodes or edges.\n     * @returns {Boolean} Whether the graph is empty.\n     */\n    isEmpty()\n    {\n        return this._nodeMapping.size <= 0 && this._edgeMapping.size <= 0;\n    }\n\n    /**\n     * Computes the boundaries of the graph that surrounds all nodes and edges. If\n     * the graph is empty, a rectangle at the origin of size 1 is returned.\n     * @returns {Object} The object which represents the bounding rectangle. It has\n     *                  the properties: minX, minY, maxX, maxY, width, height.\n     */\n    getBoundingRect()\n    {\n        if (this._nodeMapping.size <= 0) return {\n            minX: 0,\n            minY: 0,\n            maxX: 1,\n            maxY: 1,\n            width: 1,\n            height: 1\n        };\n\n        var minNX = Number.MAX_VALUE;\n        var minNY = Number.MAX_VALUE;\n        var maxNX = Number.MIN_VALUE;\n        var maxNY = Number.MIN_VALUE;\n\n        var maxNodeSize = 0;\n        for (const node of this._nodeMapping.values())\n        {\n            const x = node.x;\n            const y = node.y;\n            const size = node.getNodeSize();\n            if (size > maxNodeSize) maxNodeSize = size;\n\n            minNX = Math.min(minNX, x);\n            maxNX = Math.max(maxNX, x);\n\n            minNY = Math.min(minNY, y);\n            maxNY = Math.max(maxNY, y);\n        }\n\n        minNX -= maxNodeSize;\n        minNY -= maxNodeSize;\n        maxNX += maxNodeSize;\n        maxNY += maxNodeSize;\n\n        var minEX = Number.MAX_VALUE;\n        var minEY = Number.MAX_VALUE;\n        var maxEX = Number.MIN_VALUE;\n        var maxEY = Number.MIN_VALUE;\n\n        const startPoint = { x: 0, y: 0 };\n        const endPoint = { x: 0, y: 0 };\n        const centerPoint = { x: 0, y: 0 };\n        for (const edge of this._edgeMapping.values())\n        {\n            //Will store into point objects...\n            edge.getStartPoint(startPoint);\n            edge.getEndPoint(endPoint);\n            edge.getCenterPoint(centerPoint);\n\n            const sx = startPoint.x;\n            const sy = startPoint.y;\n            const ex = endPoint.x;\n            const ey = endPoint.y;\n            const cx = centerPoint.x;\n            const cy = centerPoint.y;\n\n            minEX = Math.min(minEX, sx, ex, cx);\n            maxEX = Math.max(maxEX, sx, ex, cx);\n\n            minEY = Math.min(minEY, sy, ey, cy);\n            maxEY = Math.max(maxEY, sy, ey, cy);\n        }\n\n        const result = {\n            minX: Math.min(minNX, minEX),\n            minY: Math.min(minNY, minEY),\n            maxX: Math.max(maxNX, maxEX),\n            maxY: Math.max(maxNY, maxEY),\n            width: 0,\n            height: 0\n        };\n        result.width = result.maxX - result.minX;\n        result.height = result.maxY - result.minY;\n        return result;\n    }\n\n    /**\n     * Computes a unique and persistent hash code that describes the current\n     * state.\n     * @param  {Boolean} [usePosition=true] Whether to consider the positioning as\n     *                                      part of the graph's state.\n     * @returns {Number}                    the hash code.\n     */\n    getHashCode(usePosition = true)\n    {\n        let string = '';\n        for (const node of this._nodeMapping.values())\n        {\n            string += node.getHashString(usePosition) + ',';\n        }\n        string += '|';\n        for (const edge of this._edgeMapping.values())\n        {\n            string += edge.getHashString(usePosition) + ',';\n        }\n        return stringHash(string);\n    }\n\n    // =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= NODES\n\n    /**\n     * Create node for graph.\n     * @param  {Number} [x=0]       the initial x position\n     * @param  {Number} [y=0]       the initial y position\n     * @param  {String} [id=null]   the new node id (will be generated if null)\n     * @returns {GraphNdoe}         the new node\n     */\n    createNode(x = 0, y = 0, id = null)\n    {\n        return this.addNode(new (this._nodeClass)(id || guid(), x, y));\n    }\n\n    /**\n     * Add existing node to the graph. Any edges connected to the node are NOT\n     * deleted in the process. (so pls delete them first.)\n     * @param {GraphNode} node The node to be added.\n     * @returns {GraphNode} The node that was added to the graph.\n     */\n    addNode(node)\n    {\n        if (!node.getGraphElementID()) node.setGraphElementID(guid());\n        this._nodeMapping.set(node.getGraphElementID(), node);\n        return node;\n    }\n\n    /**\n     * Delete node from graph. Any edges whose source is the target node are also\n     * deleted.\n     * @param  {GraphNode} node        Target node to be deleted.\n     */\n    deleteNode(node)\n    {\n        const elementID = node.getGraphElementID();\n        if (this._nodeMapping.has(elementID))\n        {\n            this._nodeMapping.delete(elementID);\n\n            const nullSourceEdges = [];\n            //Find connected edges without sources...\n            for (const edge of this.getEdges())\n            {\n                if (edge.getEdgeFrom() === node)\n                {\n                    nullSourceEdges.push(edge);\n                }\n                else if (edge.getEdgeTo() === node)\n                {\n                    edge.setEdgeTo(null);\n                }\n            }\n            //Delete sourceless edges...\n            for (const edge of nullSourceEdges)\n            {\n                this.deleteEdge(edge);\n            }\n        }\n    }\n\n    clearNodes() { this._nodeMapping.clear(); }\n\n    getNodeByElementID(elementID)\n    {\n        if (this._nodeMapping.has(elementID))\n        {\n            return this._nodeMapping.get(elementID);\n        }\n        else\n        {\n            return null;\n        }\n    }\n\n    getNodesByLabel(label, dst = [])\n    {\n        for (const node of this.getNodes())\n        {\n            if (node.getNodeLabel() === label)\n            {\n                dst.push(node);\n            }\n        }\n        return dst;\n    }\n\n    getNodes() { return Array.from(this._nodeMapping.values()); }\n    getNodeCount() { return this._nodeMapping.size; }\n    getNodeClass() { return this._nodeClass; }\n\n    // =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= EDGES\n\n    /**\n     * This is more like addEdge() without adding it to the graph and just returns the result.\n     * This should only be called once when completing an edge.\n     * @deprecated\n     */\n    formatEdge(edge)\n    {\n        return edge;\n    }\n\n    /**\n     * Create edge for graph. The id argument can be used to set the id to a\n     * pre-defined value instead of generating a new one.\n     * @param  {GraphNode} from                     the source graph node for the edge\n     * @param  {GraphNode|InputPointer} [to=null]   the destination graph node for the edge\n     * @param  {String} [id=null]                   the new edge id (will be generated if null)\n     * @returns {GraphEdge}                         the new edge\n     */\n    createEdge(from, to = null, id = null)\n    {\n        return this.addEdge(new (this._edgeClass)(id || guid(), from, to));\n    }\n\n    /**\n     * Add existing edge to the graph.\n     * \n     * Assumes that the passed-in edge does not have conflicting id's within this graph.\n     * @param {GraphEdge} edge    the edge to be added.\n     * @returns {GraphEdge}       the edge that was added to the graph.\n     */\n    addEdge(edge)\n    {\n        if (!edge.getGraphElementID()) edge.setGraphElementID(guid());\n        this._edgeMapping.set(edge.getGraphElementID(), edge);\n        return edge;\n    }\n\n    /**\n     * Delete edge from graph. The from and to nodes of the target edge are not\n     * modified.\n     * @param  {GraphEdge} edge      target edge to be deleted.\n     */\n    deleteEdge(edge)\n    {\n        const elementID = edge.getGraphElementID();\n        if (this._edgeMapping.has(elementID))\n        {\n            this._edgeMapping.delete(elementID);\n        }\n    }\n\n    clearEdges() { this._edgeMapping.clear(); }\n\n    getEdgeByElementID(elementID)\n    {\n        if (this._edgeMapping.has(elementID))\n        {\n            return this._edgeMapping.get(elementID);\n        }\n        else\n        {\n            return null;\n        }\n    }\n\n    getEdgesByLabel(label, dst = [])\n    {\n        for (const edge of this.getEdges())\n        {\n            if (edge.getEdgeLabel() === label)\n            {\n                dst.push(edge);\n            }\n        }\n        return dst;\n    }\n\n    getEdges() { return Array.from(this._edgeMapping.values()); }\n    getEdgeCount() { return this._edgeMapping.size; }\n    getEdgeClass() { return this._edgeClass; }\n}\n\nexport default NodeGraph;\n","import GraphEdge from './GraphEdge.js';\nimport { getDirectionalVector, getMidPoint } from 'util/MathHelper.js';\n\n/**\n * A class that represents the curved edge elements of a graph.\n * \n * @see {@link NodeGraph}\n * @extends GraphEdge\n */\nclass QuadraticEdge extends GraphEdge\n{\n    /**\n     * Creates a quadratic edge with the unique id.\n     * @constructor\n     * @param {String} id           The element id for this node.\n     * @param {GraphNode} from      The from node of the edge.\n     * @param {GraphNode} [to=null] The to node of the edge.\n     */\n    constructor(id, from, to = null)\n    {\n        super(id, from, to);\n\n        //radians = the angle in radians, where 0 is the normal of midpoint\n        //length = the distance from midpoint\n        this._quad = {\n            radians: 0,\n            length: to ? 0 : this.getPlaceholderLength(),\n            coords: { x: 0, y: 0 }\n        };\n    }\n\n    /** @override */\n    setEdgeTo(node)\n    {\n        const prevNode = this._to;\n        if (node !== prevNode)\n        {\n            const result = super.setEdgeTo(node);\n            if (!node)\n            {\n                this.setQuadraticByCoords(prevNode.x, prevNode.y);\n            }\n            else if (node === this._from)\n            {\n                this._quad.length = this._from.getNodeSize() + this.getPlaceholderLength();\n            }\n            return result;\n        }\n        return super.setEdgeTo(node);\n    }\n\n    /**\n     * Set the angle of the curve in radians\n     * @param {Number} radians the radians the quadratic should be curved\n     * @returns {this}\n     */\n    setQuadraticRadians(radians)\n    {\n        this._quad.radians = radians;\n        return this;\n    }\n\n    /**\n     * Set the distance of the curve from the midpoint\n     * @param {Number} length the \"height\" of the curve\n     * @returns {this}\n     */\n    setQuadraticLength(length)\n    {\n        this._quad.length = length;\n        return this;\n    }\n\n    /**\n     * Calculates and sets the quadratic vertex to pass through the position.\n     * This will update the radians and length of the curve.\n     * @param {Number} x the x coordinate\n     * @param {Number} y the y coordinate\n     * @returns {this}\n     */\n    setQuadraticByCoords(x, y)\n    {\n        const from = this._from;\n        const to = this._to;\n\n        if (!to)\n        {\n            /*\n            Quad is re-used to determine edge angle for placeholder.\n            This can be used specifically for quad since regular quad is\n            dependent on edge to to NOT be null, which placeholder assumes\n            to BE null. Also, quad.length is ignored, because the\n            length should always be getPlaceholderLength(). This is\n            resolved by getStartPoint(), getEndPoint(), etc.\n            */\n            const dx = this._from.x - x;\n            const dy = this._from.y - y;\n            const radians = -Math.atan2(dx, dy) - (Math.PI / 2);\n            this._quad.radians = radians;\n            return this;\n        }\n\n        const fromx = from.x;\n        const fromy = from.y;\n        const tox = to.x;\n        const toy = to.y;\n\n        let dx = tox - fromx;\n        let dy = toy - fromy;\n        const midpointx = fromx + dx / 2;\n        const midpointy = fromy + dy / 2;\n\n        // Remember: y-axis is flipped because canvas coord-space is -y => +y\n        // Therefore, dy needs to be flipped\n        const angleOffset = Math.atan2(-dy, dx);\n        dx = x - midpointx;\n        dy = y - midpointy;\n\n        const PI = Math.PI;\n        const HALFPI = PI / 2;\n        // 0 rad = to the right\n        // Also: angleOffset is the offset from midpoint angle, the orthogonal base vector\n        // This is because the from and to could be flipped, and\n        // therefore give a negative, or at least a reversed angle.\n        let radians = Math.atan2(dy, dx) + angleOffset;\n        let length = Math.sqrt(dx * dx + dy * dy);\n        if (length < 0) length = 0;\n\n        // -PI / 2 is outward\n        const outrad = radians - (-HALFPI);\n        // PI / 2 is inward\n        const inrad = radians - (HALFPI);\n        // TODO: Should be dependent on length, instead of a constant.\n        const maxdr = PI / 20;\n\n        if (Math.abs(length) < 8)\n        {\n            radians = 0;\n            length = 0;\n        }\n        else if (outrad < maxdr && outrad > -maxdr)\n        {\n            // -PI / 2 is outward\n            radians = -HALFPI;\n        }\n        else if (-inrad < maxdr && -inrad > -maxdr)\n        {\n            // PI / 2 is inward\n            radians = HALFPI;\n        }\n\n        this._quad.radians = radians;\n        this._quad.length = length;\n        return this;\n    }\n\n    getQuadraticLength() { return this._quad.length; }\n    getQuadraticRadians() { return this._quad.radians; }\n    getQuadratic() { return this._quad; }\n    isQuadratic() { return !this.isPlaceholder() && this._quad.length !== 0; }\n\n    getQuadraticAsCoords()\n    {\n        const from = this._from;\n        const to = this._to;\n        const dst = this._quad.coords;\n        if (from == null || to == null)\n        {\n            dst.x = 0;\n            dst.y = 0;\n        }\n        else\n        {\n            /*\n            //To mark dirty...\n            _capture: {\n                fx: 0, fy: 0,\n                tx: 0, ty: 0,\n                ql: 0, qr: 0\n            }\n            */\n            getDirectionalVector(from.x, from.y, to.x, to.y, this._quad.length, this._quad.radians, dst);\n        }\n        return dst;\n    }\n\n    /** @override */\n    getEdgeDirection()\n    {\n        let result = 0;\n        if (this.isQuadratic())\n        {\n            const coords = this.getQuadraticAsCoords();\n            result = Math.atan2(coords.y, coords.x) + Math.PI / 2;\n        }\n        else\n        {\n            result = super.getEdgeDirection();\n        }\n\n        return result;\n    }\n\n    /** @override */\n    getStartPoint(dst = { x: 0, y: 0 })\n    {\n        const from = this._from;\n        const to = this._to;\n\n        if (!from) throw new Error('Source of edge cannot be null.');\n        if (!to)\n        {\n            //Make sure to use quad for placeholder direction\n            const radians = this._quad.radians;\n            const px = Math.cos(radians);\n            const py = Math.sin(radians);\n            const nodeSize = from.getNodeSize();\n            dst.x = from.x + px * nodeSize;\n            dst.y = from.y + py * nodeSize;\n            return dst;\n        }\n\n        //Check if edge is following something other than a node...then remain flat\n        if (typeof to['getNodeSize'] !== 'function' || !this.isQuadratic())\n        {\n            getDirectionalVector(from.x, from.y, to.x, to.y, from.getNodeSize(), 0, dst);\n            dst.x += from.x;\n            dst.y += from.y;\n            return dst;\n        }\n        else\n        {\n            getMidPoint(from.x, from.y, to.x, to.y, dst);\n            const qcoords = this.getQuadraticAsCoords();\n            const qx = dst.x + qcoords.x;\n            const qy = dst.y + qcoords.y;\n            getDirectionalVector(from.x, from.y, qx, qy, from.getNodeSize(), this.isSelfLoop() ? (Math.PI / 4) : 0, dst);\n            dst.x += from.x;\n            dst.y += from.y;\n            return dst;\n        }\n    }\n\n    /** @override */\n    getCenterPoint(dst = { x: 0, y: 0 })\n    {\n        const from = this._from;\n        const to = this._to;\n\n        if (!from) throw new Error('Source of edge cannot be null.');\n        if (!to)\n        {\n            //Make sure to use quad for placeholder direction (not magnitude)\n            const px = Math.cos(this._quad.radians);\n            const py = Math.sin(this._quad.radians);\n            const placeholderLength = from.getNodeSize() + this.getPlaceholderLength() / 2;\n            dst.x = from.x + px * placeholderLength;\n            dst.y = from.y + py * placeholderLength;\n            return dst;\n        }\n\n        getMidPoint(from.x, from.y, to.x, to.y, dst);\n\n        if (this.isQuadratic())\n        {\n            const qcoords = this.getQuadraticAsCoords();\n            dst.x += qcoords.x;\n            dst.y += qcoords.y;\n        }\n\n        return dst;\n    }\n\n    /** @override */\n    getEndPoint(dst = { x: 0, y: 0 })\n    {\n        const from = this._from;\n        const to = this._to;\n\n        if (!from) throw new Error('Source of edge cannot be null.');\n        if (!to)\n        {\n            //Make sure to use quadCoords for placeholder direction (not magnitude)\n            const radians = this._quad.radians;\n            const px = Math.cos(radians);\n            const py = Math.sin(radians);\n            const placeholderLength = from.getNodeSize() + this.getPlaceholderLength();\n            dst.x = from.x + px * placeholderLength;\n            dst.y = from.y + py * placeholderLength;\n            return dst;\n        }\n\n        //Get end point for non-nodes...\n        if (typeof to['getNodeSize'] !== 'function')\n        {\n            return to;\n        }\n        //Get end point for straight edges...\n        else if (!this.isQuadratic())\n        {\n            getDirectionalVector(to.x, to.y, from.x, from.y, to.getNodeSize(), 0, dst);\n            dst.x += to.x;\n            dst.y += to.y;\n            return dst;\n        }\n        //Get end point for quadratics...\n        else\n        {\n            getMidPoint(from.x, from.y, to.x, to.y, dst);\n            const qcoords = this.getQuadraticAsCoords();\n            const qx = dst.x + qcoords.x;\n            const qy = dst.y + qcoords.y;\n            getDirectionalVector(to.x, to.y, qx, qy, to.getNodeSize(), this.isSelfLoop() ? -(Math.PI / 4.0) : 0, dst);\n            dst.x += to.x;\n            dst.y += to.y;\n            return dst;\n        }\n    }\n\n    /** @override */\n    getHashString(usePosition = true)\n    {\n        if (usePosition)\n        {\n            return super.getHashString(usePosition) + ':' + this._quad.radians + ',' + this._quad.length;\n        }\n        else\n        {\n            return super.getHashString(usePosition);\n        }\n    }\n}\n\nexport default QuadraticEdge;\n","class Parser\n{\n    constructor() {}\n\n    parse(data, dst = null)\n    {\n        return dst;\n    }\n\n    compose(target, dst = null)\n    {\n        return dst;\n    }\n}\n\nexport default Parser;\n","const MAJOR_INDEX = 0;\nconst MINOR_INDEX = 1;\nconst PATCH_INDEX = 2;\n\nclass SemanticVersion\n{\n    /**\n     * @param {Number} major the major version value\n     * @param {Number} minor the minor version value\n     * @param {Number} patch the patch version value\n     */\n    constructor(major = 0, minor = 0, patch = 0)\n    {\n        this.major = major;\n        this.minor = minor;\n        this.patch = patch;\n    }\n\n    /**\n     * Checks whether this version can support the other version. More specfically,\n     * it returns true if the other version is newer but within the same major\n     * version. Because of how versioning works, order matters!\n     * \n     * @param {SemanticVersion} otherVersion  the version to compare to\n     * @returns {Boolean}                     whether this version can support the other\n     */\n    canSupportVersion(otherVersion)\n    {\n        return this.major == otherVersion.major &&\n            (this.minor < otherVersion.minor ||\n                (this.minor == otherVersion.minor && this.patch <= otherVersion.patch));\n    }\n\n    toString()\n    {\n        return this.major + '.' +\n            this.minor + '.' +\n            this.patch;\n    }\n\n    static parse(string)\n    {\n        if (typeof string != 'string') throw new Error('Invalid argument type to parse as SemanticVersion');\n\n        const components = string.split('.');\n        if (components.length != 3) throw new Error('Invalid format for SemanticVersion');\n\n        let major, minor, patch;\n        try\n        {\n            major = Number.parseInt(components[MAJOR_INDEX]);\n            minor = Number.parseInt(components[MINOR_INDEX]);\n            patch = Number.parseInt(components[PATCH_INDEX]);\n        }\n        catch (e)\n        {\n            throw e;\n        }\n\n        return new SemanticVersion(major, minor, patch);\n    }\n}\n\nexport default SemanticVersion;","import Parser from 'util/file/Parser.js';\nimport SemanticVersion from 'util/version/SemanticVersion.js';\nimport NodeGraph from './NodeGraph.js';\n\nimport GraphNode from 'graph2/element/GraphNode';\nimport GraphEdge from 'graph2/element/GraphEdge.js';\nimport QuadraticEdge from 'graph2/element/QuadraticEdge.js';\n\nexport const VERSION_STRING = '1.0.0';\nexport const VERSION = SemanticVersion.parse(VERSION_STRING);\n\n/**\n * A class that parses and composes NodeGraph's to and from JSON data.\n */\nclass NodeGraphParser extends Parser\n{\n    constructor() { super(); }\n\n    /**\n\t * @override\n\t * @param  {Object} data         \t\tthe graph data to parse\n\t * @param  {NodeGraph} [dst=null]\t\tthe target to set parsed graph data\n\t * @return {NodeGraph}            \tthe result in the passed-in dst\n\t */\n    parse(data, dst = null)\n    {\n        if (typeof data !== 'object')\n        {\n            throw new Error('Unable to parse data of non-object type');\n        }\n\n        const dataVersion = SemanticVersion.parse(data['_version'] || '0.0.0');\n        if (!dataVersion.canSupportVersion(VERSION))\n        {\n            throw new Error('Unable to parse data for incompatible version \\'' + dataVersion + '\\'');\n        }\n\n        const nodeDatas = data['nodes'] || [];\n        const nodeCount = Math.min(nodeDatas.length || 0, data['nodeCount'] || 0);\n        const edgeDatas = data['edges'] || [];\n        const edgeCount = Math.min(edgeDatas.length || 0, data['edgeCount'] || 0);\n        const hasQuad = data['quad'] || false;\n\n        if (!dst)\n        {\n            dst = new NodeGraph(GraphNode, hasQuad ? QuadraticEdge : GraphEdge);\n        }\n        else\n        {\n            dst.clear();\n        }\n\n        const nodeIndices = new Map();\n        for (let i = 0; i < nodeCount; ++i)\n        {\n            const nodeData = nodeDatas[i];\n            if (!nodeData) continue;\n\n            //NOTE: Assumes createNode will maintain order\n            const node = dst.createNode(nodeData['x'] || 0, nodeData['y'] || 0, nodeData['id']);\n            node.setNodeLabel(nodeData['label'] || '');\n\n            nodeIndices.set(i, node);\n        }\n\n        for (let i = 0; i < edgeCount; ++i)\n        {\n            const edgeData = edgeDatas[i];\n            if (!edgeData) continue;\n            const sourceNode = nodeIndices.get(edgeData['from']) || null;\n            //Cannot create source-less edges\n            if (!sourceNode) continue;\n            const destinationNode = nodeIndices.get(edgeData['to']) || null;\n            //NOTE: Assumes createEdge will maintain order\n            const edge = dst.createEdge(sourceNode, destinationNode, edgeData['id']);\n            edge.setEdgeLabel(edgeData['label'] || '');\n\n            if (edge instanceof QuadraticEdge)\n            {\n                const quadData = edgeData['quad'] || {};\n                edge.setQuadraticRadians(quadData['radians'] || 0);\n                edge.setQuadraticLength(quadData['length'] || 0);\n            }\n        }\n\n        return dst;\n    }\n\n    /**\n\t * @override\n\t * @param  {NodeGraph} target     the graph to compose into data\n\t * @param  {Object} [dst=null]    the object to append graph data\n\t * @return {Object}               the result in the passed-in dst\n\t */\n    compose(target, dst = null)\n    {\n        if (!(target instanceof NodeGraph))\n        {\n            throw new Error('Unable to compose target of unknown type');\n        }\n\n        if (!dst) dst = {};\n\n        const graphNodes = target.getNodes() || [];\n        const nodeCount = graphNodes.length || 0;\n        const graphEdges = target.getEdges() || [];\n        const edgeCount = graphEdges.length || 0;\n\n        const nodeDatas = new Array(nodeCount);\n        const nodeIndices = new Map();\n        let node;\n        for (let i = 0; i < nodeCount; ++i)\n        {\n            node = graphNodes[i];\n            if (node)\n            {\n                //NOTE: Assumes node must have an id\n                const elementID = node.getGraphElementID();\n\n                nodeIndices.set(node, i);\n                nodeDatas[i] = {\n                    id: elementID,\n                    x: node.x || 0, y: node.y || 0,\n                    label: node.getNodeLabel() || ''\n                };\n            }\n        }\n\n        let hasQuad = false;\n        const edgeDatas = new Array(edgeCount);\n        let edge;\n        for (let i = 0; i < edgeCount; ++i)\n        {\n            edge = graphEdges[i];\n            if (edge)\n            {\n                //NOTE: Assumes edge must have an id\n                const elementID = edge.getGraphElementID();\n\n                const edgeSource = edge.getEdgeFrom();\n                const edgeDestination = edge.getEdgeTo();\n                const sourceIndex = nodeIndices.has(edgeSource) ? nodeIndices.get(edgeSource) : -1;\n                const destinationIndex = nodeIndices.has(edgeDestination) ? nodeIndices.get(edgeDestination) : -1;\n                edgeDatas[i] = {\n                    id: elementID,\n                    from: sourceIndex,\n                    to: destinationIndex,\n                    label: edge.getEdgeLabel() || ''\n                };\n\n                if (edge instanceof QuadraticEdge)\n                {\n                    const quad = edge.getQuadratic() || {};\n                    hasQuad = true;\n                    edgeDatas[i]['quad'] = {\n                        radians: quad['radians'] || 0,\n                        length: quad['length'] || 0\n                    };\n                }\n            }\n        }\n\n        dst['_version'] = VERSION_STRING;\n        dst['nodeCount'] = nodeCount;\n        dst['nodes'] = nodeDatas;\n        dst['edgeCount'] = edgeCount;\n        dst['edges'] = edgeDatas;\n        dst['hasQuad'] = hasQuad;\n\n        return dst;\n    }\n}\n\nexport default NodeGraphParser;\n","class LabelFormatter\n{\n    formatLabel(target, nextLabel, prevLabel = null) { return nextLabel; }\n    getDefaultLabel(target) { return ''; }\n\n    formatNodeLabel(nextNodeLabel, prevNodeLabel = null)\n    {\n        return nextNodeLabel;\n    }\n\n    formatEdgeLabel(nextEdgeLabel, prevEdgeLabel = null)\n    {\n        return nextEdgeLabel;\n    }\n\n    getDefaultNodeLabel() { return ''; }\n    getDefaultEdgeLabel() { return ''; }\n}\nexport default LabelFormatter;\n\nexport const DEFAULT_LABEL_FORMATTER = new LabelFormatter();","import {DEFAULT_LABEL_FORMATTER} from './LabelFormatter.js';\n\nimport GraphNode from 'graph2/element/GraphNode.js';\nimport GraphEdge from 'graph2/element/GraphEdge.js';\n\nexport const GRAPH_EVENT_CLEAR = 'graph-clear';\n\nclass GraphController\n{\n    constructor(graph)\n    {\n        this._graph = graph;\n        this._graphChangeHandler = null;\n\n        this._inputController = null;\n        this._labelEditor = null;\n        this._labelFormatter = null;\n\n        this._listeners = [];\n    }\n\n    setInputController(inputController)\n    {\n        this._inputController = inputController;\n        return this;\n    }\n\n    setLabelEditor(labelEditor)\n    {\n        this._labelEditor = labelEditor;\n        return this;\n    }\n\n    setLabelFormatter(labelFormatter)\n    {\n        this._labelFormatter = labelFormatter;\n        return this;\n    }\n\n    setGraphChangeHandler(graphChangeHandler)\n    {\n        this._graphChangeHandler = graphChangeHandler;\n        return this;\n    }\n\t\n    addListener(listener)\n    {\n        this._listeners.push(listener);\n        return this;\n    }\n\n    removeListener(listener)\n    {\n        const index = this._listeners.indexOf(listener);\n        if (index >= 0) this._listeners.splice(index, 1);\n    }\n\n    clearListeners() { this._listeners.length = 0; }\n\n    initialize()\n    {\n        const inputController = this._inputController;\n\n        if (!inputController) throw new Error('Must set input controller before init');\n    }\n\n    update()\n    {\n        if (this._graphChangeHandler)\n        {\n            this._graphChangeHandler.update(this._graph);\n        }\n    }\n\n    destroy()\n    {\n\t\t\n    }\n\t\n    clearGraph()\n    {\n        this._graph.clear();\n        this.emitGraphEvent(GRAPH_EVENT_CLEAR);\n    }\n\n    onGraphEvent(eventName, eventData)\n    {\n        // Do nothing... for now...\n    }\n\n    emitGraphEvent(eventName, eventData = {})\n    {\n        this.onGraphEvent(eventName, eventData);\n\n        for(const listener of this._listeners)\n        {\n            listener.onGraphEvent(this, eventName, eventData);\n        }\n    }\n\n    openLabelEditor(target, defaultLabel = null, callback = null)\n    {\n        if (!this._labelEditor)\n        {\n            if (callback) callback(target, defaultLabel, false);\n            return;\n        }\n\n        const labelEditor = this._labelEditor;\n        const prevLabel = defaultLabel || '';\n        labelEditor.openEditor(target, defaultLabel, (target, value) =>\n        {\n            const hasChanged = !prevLabel || (prevLabel.length > 0 && value !== prevLabel);\n            if (target instanceof GraphEdge)\n            {\n                target.setEdgeLabel(value);\n            }\n            else if (target instanceof GraphNode)\n            {\n                target.setNodeLabel(value);\n            }\n\n            if (callback) callback(target, value, hasChanged);\n        }, (target) =>\n        {\n            if (callback) callback(target, null, false);\n        });\n    }\n\n    getLabelFormatter() { return this._labelFormatter || DEFAULT_LABEL_FORMATTER; }\n    getGraph() { return this._graph; }\n    getGraphChangeHandler() { return this._graphChangeHandler; }\n}\n\nexport default GraphController;","class NodeGraphChangeHandler\n{\n    constructor(refreshTicks = 10)\n    {\n        this._cachedGraphHash = 0;\n\n        this._refreshTicks = refreshTicks;\n        this._elapsedTicks = Infinity;\n\n        this._listeners = [];\n    }\n\n    addListener(listener)\n    {\n        if (typeof listener !== 'function')\n            throw new Error('Cannot add uncallable listener');\n        this._listeners.push(listener);\n    }\n\n    removeListener(listener)\n    {\n        const i = this._listeners.indexOf(listener);\n        if (i >= 0)\n        {\n            this._listeners.splice(i, 1);\n            return true;\n        }\n        return false;\n    }\n\n    clearListeners() { this._listeners.length = 0; }\n    getListeners() { return this._listeners; }\n\n    reset()\n    {\n        this._elapsedTicks = 0;\n        this._cachedGraphHash = 0;\n    }\n\n    update(graph)\n    {\n        if (++this._elapsedTicks >= this._refreshTicks)\n        {\n            this._elapsedTicks = 0;\n\n            const graphHash = graph.getHashCode(false);\n            if (graphHash !== this._cachedGraphHash)\n            {\n                this._cachedGraphHash = graphHash;\n                for (const listener of this._listeners)\n                {\n                    listener(graph);\n                }\n            }\n        }\n    }\n}\n\nexport default NodeGraphChangeHandler;\n","import AbstractEventHandler from 'session/manager/undo/AbstractEventHandler.js';\n\nclass SafeUndoNodeGraphEventHandler extends AbstractEventHandler\n{\n    constructor(graph, graphParser)\n    {\n        super();\n\n        this._graph = graph;\n        this._graphParser = graphParser;\n        this._graphData = graphParser.compose(graph);\n    }\n\n    /** @override */\n    applyUndo(undoManager)\n    {\n        const prevEvent = undoManager.getPreviousEvent();\n        if (prevEvent instanceof SafeUndoNodeGraphEventHandler)\n        {\n            prevEvent.applyRedo(undoManager);\n        }\n        else\n        {\n            this._graph.clear();\n        }\n    }\n\n    /** @override */\n    applyRedo(undoManager)\n    {\n        this._graphParser.parse(this._graphData, this._graph);\n    }\n}\nexport default SafeUndoNodeGraphEventHandler;\n","import GraphController from 'graph2/controller/GraphController.js';\n\nimport NodeGraphChangeHandler from 'graph2/NodeGraphChangeHandler.js';\nimport SafeUndoNodeGraphEventHandler from 'graph2/SafeUndoNodeGraphEventHandler.js';\n\nimport { GRAPH_EVENT_NODE_EDIT_WHILE_DELETE } from 'graph2/inputs/GraphNodeInputHandler.js';\nimport { GRAPH_EVENT_EDGE_EDIT_WHILE_DELETE } from 'graph2/inputs/GraphEdgeInputHandler.js';\n\nimport { WARNING_LAYOUT_ID } from 'session/manager/notification/NotificationManager.js';\n\nexport const TRASH_EDITING_NOTIFICATION_TAG = 'tryCreateWhileTrash';\n\nclass NodeGraphController extends GraphController\n{\n    constructor(app, graph, graphParser)\n    {\n        super(graph);\n\n        this._app = app;\n\n        this.setGraphChangeHandler(new NodeGraphChangeHandler());\n\n        app.getUndoManager().setEventHandlerFactory(\n            (...args) => new SafeUndoNodeGraphEventHandler(graph, graphParser));\n    }\n\n    /** @override */\n    onGraphEvent(eventName, eventData)\n    {\n        super.onGraphEvent(eventName, eventData);\n\n        switch (eventName)\n        {\n        case GRAPH_EVENT_NODE_EDIT_WHILE_DELETE:\n        case GRAPH_EVENT_EDGE_EDIT_WHILE_DELETE:\n            this._app.getNotificationManager().pushNotification(\n                I18N.toString('message.warning.cannotmodify'),\n                WARNING_LAYOUT_ID, TRASH_EDITING_NOTIFICATION_TAG, null, true);\n            break;\n        default:\n            this._app.getUndoManager().captureEvent();\n        }\n    }\n\t\n    getApp() { return this._app; }\n}\n\nexport default NodeGraphController;","import React from 'react';\nimport PanelContainer from 'experimental/panels/PanelContainer.js';\n\nimport * as UserUtil from 'experimental/UserUtil.js';\nimport { RENDER_LAYER_WORKSPACE } from 'session/manager/RenderManager.js';\nimport GraphEditorView from 'graph2/components/views/GraphEditorView.js';\n\nimport NodeGraph from 'graph2/NodeGraph.js';\nimport GraphNode from 'graph2/element/GraphNode.js';\nimport QuadraticEdge from 'graph2/element/QuadraticEdge.js';\nimport NodeGraphParser from 'graph2/NodeGraphParser.js';\nimport NodeGraphController from './graph/controller/NodeGraphController.js';\n\nconst MODULE_NAME = 'nodegraph';\nconst MODULE_VERSION = '0.0.1';\nconst MODULE_LOCALIZED_NAME = 'Node Graph';\n\nclass NodalGraphModule\n{\n    constructor(app)\n    {\n        this._app = app;\n\n        this._graph = new NodeGraph(GraphNode, QuadraticEdge);\n        this._graphController = new NodeGraphController(app, this._graph, new NodeGraphParser());\n    }\n\n    /** @override */\n    initialize(app)\n    {\n        app.getDrawerManager()\n            .addPanelClass(props => (\n                <PanelContainer id={props.id}\n                    className={props.className}\n                    style={props.style}\n                    title={'Your Average Graph Editor'}>\n                    <p>{'Brought to you with \\u2764 by the Flap.js team.'}</p>\n                    <p>{'<- Tap on a tab to begin!'}</p>\n                </PanelContainer>\n            ));\n        \n        /*\n        app.getExportManager()\n            .addExporter(new NodalGraphExporter())\n            .addExporters(DEFAULT_IMAGE_EXPORTERS);\n        */\n\n        app.getRenderManager()\n            .addRenderer(RENDER_LAYER_WORKSPACE, props => (\n                <GraphEditorView graphController={this._graphController} />\n            ));\n    }\n\n    /** @override */\n    update(app)\n    {\n    }\n\n    /** @override */\n    destroy(app)\n    {\n    }\n\n    /** @override */\n    clear(app, graphOnly = false)\n    {\n        UserUtil.userClearGraph(app, graphOnly, () => app.getToolbarComponent().closeBar());\n    }\n\n    getGraphController() { return this._graphController; }\n\n    /** @override */\n    getModuleVersion() { return MODULE_VERSION; }\n    /** @override */\n    getModuleName() { return MODULE_NAME; }\n    /** @override */\n    getLocalizedModuleName() { return MODULE_LOCALIZED_NAME; }\n\n    getApp() { return this._app; }\n}\n\nexport default NodalGraphModule;\n"],"sourceRoot":""}