{"version":3,"sources":["webpack:///./src/app/modules/base/BaseModule.js","webpack:///./src/app/system/formattedinput/FormattedInput.js","webpack:///./src/app/icons/IconToggle.js","webpack:///./src/app/icons/DropDownIcon.js","webpack:///./src/app/modules/fsa/panels/overview/infoblock/InfoBlock.js","webpack:///./src/app/icons/IconButton.js","webpack:///./src/app/icons/BoxAddIcon.js","webpack:///./src/app/icons/TriangleIcon.js","webpack:///./src/app/modules/fsa/panels/overview/stateslist/StateTag.js","webpack:///./src/app/modules/fsa/panels/overview/stateslist/StatesList.js","webpack:///./src/app/modules/fsa/panels/overview/alphabetlist/AlphabetTag.js","webpack:///./src/app/modules/fsa/panels/overview/alphabetlist/AlphabetList.js","webpack:///./src/app/machine/FSA.js","webpack:///./src/app/machine/Symbols.js","webpack:///./src/app/machine/NFA.js","webpack:///./src/app/modules/fsa/panels/overview/transitiontable/TransitionTable.js","webpack:///./src/app/modules/fsa/panels/overview/transitionfunction/TransitionFunction.js","webpack:///./src/app/modules/fsa/panels/overview/formaldefinition/FormalDefinition.js","webpack:///./src/app/modules/fsa/panels/overview/OverviewPanel.js","webpack:///./src/app/content/viewport/LabelEditor.js","webpack:///./src/app/content/viewport/TrashCan.js","webpack:///./src/app/icons/PlayIcon.js","webpack:///./src/app/icons/PauseIcon.js","webpack:///./src/app/icons/StopIcon.js","webpack:///./src/app/icons/UndoIcon.js","webpack:///./src/app/icons/RedoIcon.js","webpack:///./src/app/content/viewport/TestTray.js","webpack:///./src/app/icons/CreateIcon.js","webpack:///./src/app/icons/MoveIcon.js","webpack:///./src/app/content/viewport/CursorMode.js","webpack:///./src/app/content/viewport/Viewport.js","webpack:///./src/app/util/Downloader.js","webpack:///./src/app/machine/util/solveNFA.js","webpack:///./src/app/machine/DFA.js","webpack:///./src/app/modules/fsa/testing/TestMode.js","webpack:///./src/app/util/MathHelper.js","webpack:///./src/app/modules/fsa/testing/TestingInputList.js","webpack:///./src/app/modules/fsa/testing/TestingManager.js","webpack:///./src/app/icons/AddIcon.js","webpack:///./src/app/icons/RemoveIcon.js","webpack:///./src/app/icons/SuccessIcon.js","webpack:///./src/app/icons/FailureIcon.js","webpack:///./src/app/icons/RunningManIcon.js","webpack:///./src/app/modules/fsa/panels/testing/StatusButton.js","webpack:///./src/app/modules/fsa/panels/testing/TestingInput.js","webpack:///./src/app/modules/fsa/panels/testing/components/UploadTestButton.js","webpack:///./src/app/icons/UploadIcon.js","webpack:///./src/app/icons/PageNewContentIcon.js","webpack:///./src/app/icons/SaveIcon.js","webpack:///./src/app/icons/CloseIcon.js","webpack:///./src/app/modules/fsa/panels/testing/TestingPanel.js","webpack:///./src/app/system/notification/NotificationManager.js","webpack:///./src/app/system/notification/Notification.js","webpack:///./src/app/modules/fsa/notifications/NFAToDFAConversionWarningMessage.js","webpack:///./src/app/modules/fsa/panels/analysis/AnalysisPanel.js","webpack:///./src/app/modules/fsa/panels/about/AboutPanel.js","webpack:///./src/app/util/Eventable.js","webpack:///./src/app/graph/GraphLayout.js","webpack:///./src/app/graph/GraphElement.js","webpack:///./src/app/graph/GraphNode.js","webpack:///./src/app/graph/Node.js","webpack:///./src/app/graph/GraphEdge.js","webpack:///./src/app/graph/QuadraticEdge.js","webpack:///./src/app/graph/Edge.js","webpack:///./src/app/graph/NodalGraph.js","webpack:///./src/app/modules/fsa/builder/MachineLabeler.js","webpack:///./src/app/modules/fsa/builder/MachineBuilder.js","webpack:///./src/app/modules/fsa/notifications/StateUnreachableWarningMessage.js","webpack:///./src/app/modules/fsa/notifications/StateMissingTransitionErrorMessage.js","webpack:///./src/app/modules/fsa/notifications/TransitionErrorMessage.js","webpack:///./src/app/modules/fsa/builder/DFAErrorChecker.js","webpack:///./src/app/modules/fsa/builder/NFAErrorChecker.js","webpack:///./src/app/modules/fsa/builder/FSABuilder.js","webpack:///./src/app/modules/fsa/FSAModule.js","webpack:///./src/app/machine/util/convertNFA.js","webpack:///./src/app/controller/MachineController.js","webpack:///./src/app/graph/NodalGraphParser.js","webpack:///./src/app/util/SemanticVersion.js","webpack:///./src/app/util/FlapSaver.js","webpack:///./src/app/controller/Uploader.js","webpack:///./src/app/controller/GraphController.js","webpack:///./src/app/system/inputadapter/InputPointer.js","webpack:///./src/app/system/inputadapter/InputAdapter.js","webpack:///./src/app/system/inputadapter/Viewport.js","webpack:///./src/app/controller/GraphPicker.js","webpack:///./src/app/controller/InputController.js","webpack:///./src/app/content/HotKeys.js","webpack:///./src/app/system/localsave/LocalSave.js","webpack:///./src/app/system/localsave/LocalSaveManager.js","webpack:///./src/app/content/toolbar/UploadButton.js","webpack:///./src/app/content/toolbar/HelpButton.js","webpack:///./src/app/content/toolbar/MachineName.js","webpack:///./src/app/icons/PageNewIcon.js","webpack:///./src/app/icons/HelpIcon.js","webpack:///./src/app/icons/LanguageIcon.js","webpack:///./src/app/icons/OfflineIcon.js","webpack:///./src/app/icons/BugReportIcon.js","webpack:///./src/app/content/drawer/DrawerExpander.js","webpack:///./src/app/icons/flat/PNGIcon.js","webpack:///./src/app/icons/flat/JPGIcon.js","webpack:///./src/app/icons/flat/JSONIcon.js","webpack:///./src/app/icons/flat/XMLIcon.js","webpack:///./src/app/content/drawer/panels/exporting/ExportingPanel.js","webpack:///./src/app/util/ColorHelper.js","webpack:///./src/app/system/styleopt/StyleOptionRegistry.js","webpack:///./src/app/system/styleopt/components/StyleInput.js","webpack:///./src/app/content/drawer/panels/options/OptionGroup.js","webpack:///./src/app/content/drawer/panels/options/OptionHotkey.js","webpack:///./src/app/content/drawer/panels/options/OptionsPanel.js","webpack:///./src/app/content/drawer/Drawer.js","webpack:///./src/app/content/toolbar/Toolbar.js","webpack:///./src/app/content/workspace/Subtitle.js","webpack:///./src/app/graph/renderer/NodeRenderer.js","webpack:///./src/app/graph/renderer/EdgeRenderer.js","webpack:///./src/app/graph/renderer/InitialMarkerRenderer.js","webpack:///./src/app/graph/renderer/NodalGraphRenderer.js","webpack:///./src/app/content/workspace/renderer/SelectionBoxRenderer.js","webpack:///./src/app/content/workspace/renderer/HighlightRenderer.js","webpack:///./src/app/content/workspace/Workspace.js","webpack:///./src/app/tutorial/Tutorial.js","webpack:///./src/app/system/notification/components/NotificationMessage.js","webpack:///./src/app/system/notification/components/NotificationView.js","webpack:///./src/app/events/EventLogger.js","webpack:///./src/app/events/Event.js","webpack:///./src/app/events/GraphEdgeDestinationEvent.js","webpack:///./src/app/events/GraphEdgeLabelEvent.js","webpack:///./src/app/events/GraphEdgeMoveEvent.js","webpack:///./src/app/events/GraphNodeInitialEvent.js","webpack:///./src/app/events/GraphNodeMoveEvent.js","webpack:///./src/app/events/GraphNodeMoveAllEvent.js","webpack:///./src/app/controller/events/EventHandler.js","webpack:///./src/app/controller/events/UserCreateNodeEventHandler.js","webpack:///./src/app/controller/events/UserToggleNodeEventHandler.js","webpack:///./src/app/controller/events/UserDeleteNodesEventHandler.js","webpack:///./src/app/controller/events/UserSwapNodesEventHandler.js","webpack:///./src/app/controller/events/UserRenameNodeEventHandler.js","webpack:///./src/app/controller/events/UserCreateEdgeEventHandler.js","webpack:///./src/app/controller/events/UserDeleteEdgeEventHandler.js","webpack:///./src/app/controller/events/UserImportGraphEventHandler.js","webpack:///./src/app/controller/events/SafeGraphEventHandler.js","webpack:///./src/app/controller/events/UserChangeMachineEventHandler.js","webpack:///./src/app/controller/events/UserConvertMachineEventHandler.js","webpack:///./src/app/controller/events/UserRenameMachineEventHandler.js","webpack:///./src/app/controller/events/UserRenameSymbolEventHandler.js","webpack:///./src/app/controller/events/UserDeleteSymbolEventHandler.js","webpack:///./src/app/content/EventManager.js","webpack:///./src/app/content/App.js"],"names":["DEFAULT_PANELS","BaseModule","_classCallCheck","this","app","Error","FormattedInput","props","_this","FormattedInput_classCallCheck","_getPrototypeOf","call","element","ignoreSaveOnExit","defaultValue","state","value","prevValue","onChange","bind","_assertThisInitialized","onBlur","onKeyUp","React","Component","nextProps","hasFocus","length","setState","arguments","undefined","select","focus","blur","document","activeElement","e","filter","result","target","replace","_this2","captureOnExit","formatValue","prev","next","resetValue","onSubmit","_this3","key","_this4","newValue","callback","separator","selectionStart","selectionEnd","formatter","_this5","react_default","a","createElement","id","className","style","ref","type","IconToggle","IconToggle_classCallCheck","IconToggle_getPrototypeOf","open","onClick","IconToggle_assertThisInitialized","title","disabled","children","DropDownIcon","DropDownIcon_classCallCheck","DropDownIcon_possibleConstructorReturn","DropDownIcon_getPrototypeOf","xmlns","width","height","viewBox","d","fill","InfoBlock","InfoBlock_classCallCheck","InfoBlock_possibleConstructorReturn","InfoBlock_getPrototypeOf","dropdown","createRef","app_icons_IconToggle","pointerEvents","icons_DropDownIcon","display","isOpen","IconButton","IconButton_classCallCheck","IconButton_possibleConstructorReturn","IconButton_getPrototypeOf","BoxAddIcon","BoxAddIcon_classCallCheck","BoxAddIcon_possibleConstructorReturn","BoxAddIcon_getPrototypeOf","TriangleIcon","TriangleIcon_classCallCheck","TriangleIcon_possibleConstructorReturn","TriangleIcon_getPrototypeOf","StateTag","StateTag_classCallCheck","StateTag_getPrototypeOf","error","onValueChange","StateTag_assertThisInitialized","onFocus","onKeyDown","onDragStart","onDrop","graphController","graph","getGraph","nodeIndex","getNodeIndex","src","otherIndex","getNodeIndexByLabel","dataTransfer","getData","swapNodeByIndex","preventDefault","label","newLabel","node","getNodeByLabel","renameNode","deleteTargetNode","keyCode","Config","SUBMIT_KEY","CLEAR_KEY","trim","isCustom","hasCustomLabel","accept","spellCheck","draggable","StatesList","StatesList_classCallCheck","StatesList_getPrototypeOf","onStateCreate","StatesList_assertThisInitialized","x","Math","random","y","createNode","overview_infoblock_InfoBlock","I18N","toString","icons_TriangleIcon","nodes","map","i","overview_stateslist_StateTag","getGraphElementID","getNodeLabel","ev","focusOnNode","app_icons_IconButton","icons_BoxAddIcon","AlphabetTag","AlphabetTag_classCallCheck","AlphabetTag_getPrototypeOf","symbol","AlphabetTag_assertThisInitialized","machineController","newSymbol","oldSymbol","getAlphabet","includes","renameSymbol","createSymbol","deleteSymbol","maxLength","AlphabetList","AlphabetList_classCallCheck","AlphabetList_getPrototypeOf","editingTag","editing","onSymbolCreate","AlphabetList_assertThisInitialized","onStopEditing","alphabet","overview_alphabetlist_AlphabetTag","FSA","FSA_classCallCheck","_states","_transitions","_finalStates","_customAlphabet","fsa","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Symbol","iterator","done","push","err","return","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","transition","slice","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","final","_iteratorNormalCompletion4","_didIteratorError4","_iteratorError4","_step4","_iterator4","splice","indexOf","oldState","newState","_iteratorNormalCompletion5","_didIteratorError5","_iteratorError5","_step5","_iterator5","index","fromState","toState","_iteratorNormalCompletion6","_didIteratorError6","_iteratorError6","_step6","_iterator6","getStartState","unshift","isFinal","_iteratorNormalCompletion7","_didIteratorError7","_iteratorError7","_step7","_iterator7","_iteratorNormalCompletion8","_didIteratorError8","_iteratorError8","_step8","_iterator8","_iteratorNormalCompletion9","_didIteratorError9","_iteratorError9","_step9","_iterator9","isUsedAlphabet","_iteratorNormalCompletion10","_didIteratorError10","_iteratorError10","_step10","_iterator10","_iteratorNormalCompletion11","_didIteratorError11","_iteratorError11","_step11","_iterator11","s","getUsedAlphabet","_iteratorNormalCompletion12","_didIteratorError12","_iteratorError12","_step12","_iterator12","foundSymbols","Array","_iteratorNormalCompletion13","_didIteratorError13","_iteratorError13","_step13","_iterator13","transitions","getOutgoingTransitions","_iteratorNormalCompletion14","_didIteratorError14","_iteratorError14","_step14","_iterator14","DFA","NFA","states","usedAlphabet","startState","finalStates","ARROW","NFA_classCallCheck","NFA_possibleConstructorReturn","NFA_getPrototypeOf","dst","doClosureTransition","ps","nfaStates","getStates","j","len","concat","SRC","SYMBOL","DST","SYMBOL_AXIS","getDestinationFromSourceAndSymbol","machine","isSet","doTransition","isArray","join","TransitionTable","TransitionTable_classCallCheck","TransitionTable_possibleConstructorReturn","TransitionTable_getPrototypeOf","rowAxis","machineBuilder","getMachine","rowAxisType","getTransitions","isNFAMachine","getMachineType","hasEmptyColumn","scope","startsWith","getSymbolFromSourceAndDestination","TransitionFunction","TransitionFunction_classCallCheck","TransitionFunction_possibleConstructorReturn","TransitionFunction_getPrototypeOf","sort","isNFA","emptrans","empclassName","trans","FormalDefinition","FormalDefinition_classCallCheck","FormalDefinition_possibleConstructorReturn","FormalDefinition_getPrototypeOf","getFinalStates","DELTA","OverviewPanel","OverviewPanel_classCallCheck","OverviewPanel_getPrototypeOf","container","viewFormal","onChangeMachineType","OverviewPanel_assertThisInitialized","onAutoLayout","onChangeAutoRename","onSubmitAutoStatePrefix","onAutoStateFormat","switchDefinition","applyAutoLayout","changeMachineTo","getMachineBuilder","setAutoRenameNodes","checked","labeler","getLabeler","prefix","sortDefaultNodeLabels","STR_STATE_LABEL","overview_formaldefinition_FormalDefinition","overview_stateslist_StatesList","overview_alphabetlist_AlphabetList","overview_transitionfunction_TransitionFunction","overview_transitiontable_TransitionTable","paddingBottom","marginBottom","flexDirection","formattedinput_FormattedInput","background","outline","border","padding","margin","appearance","color","shouldAutoRenameNodes","htmlFor","isEmpty","UNLOCALIZED_NAME","RECOMMENDED_SYMBOLS","DEFAULT_SYMBOLS","EDGE_SYMBOL_SEPARATOR","LabelEditor","LabelEditor_classCallCheck","LabelEditor_getPrototypeOf","parentElement","inputElement","_timer","_prevValue","onContextMenu","LabelEditor_assertThisInitialized","onFormat","targetEdge","defaultText","getEdgeLabel","setValue","saveOnExit","setEdgeLabel","deleteEdge","stopPropagation","appendValue","getLabelFormatter","viewport","inputController","getViewport","screen","targetStyle","visibility","center","getCenterPoint","screenPos","svg","ctm","getScreenCTM","f","transformViewToScreen","getOffsetX","getOffsetY","offsetX","offsetWidth","offsetY","offsetHeight","top","left","tabIndex","clearTimeout","setTimeout","closeEditor","appendSymbol","TrashCan","TrashCan_classCallCheck","TrashCan_possibleConstructorReturn","TrashCan_getPrototypeOf","staticTrash","setTrashMode","mode","Viewport","DANGEROUS","NORMAL","inputAdapter","getAdapter","isTrashMode","isUsingTouch","isDragging","onMouseEnter","onTrashEnter","onMouseLeave","onTrashLeave","onTrashClick","PlayIcon","PlayIcon_classCallCheck","PlayIcon_possibleConstructorReturn","PlayIcon_getPrototypeOf","PauseIcon","PauseIcon_classCallCheck","PauseIcon_possibleConstructorReturn","PauseIcon_getPrototypeOf","StopIcon","StopIcon_classCallCheck","StopIcon_possibleConstructorReturn","StopIcon_getPrototypeOf","UndoIcon","UndoIcon_classCallCheck","UndoIcon_possibleConstructorReturn","UndoIcon_getPrototypeOf","RedoIcon","RedoIcon_classCallCheck","RedoIcon_possibleConstructorReturn","RedoIcon_getPrototypeOf","TestTray","TestTray_classCallCheck","TestTray_possibleConstructorReturn","TestTray_getPrototypeOf","tester","testList","inputList","testMode","testInput","getCurrentInput","testIndex","getCurrentTestStringIndex","split","testOffset","MAX_ELLIPSIS_COUNT","onResume","isRunning","icons_PlayIcon","onPause","icons_PauseIcon","onPreviousStep","hasPrevStep","isSkipping","icons_UndoIcon","onNextStep","hasNextStep","icons_RedoIcon","setStepByStepMode","icons_StopIcon","CreateIcon","CreateIcon_classCallCheck","CreateIcon_possibleConstructorReturn","CreateIcon_getPrototypeOf","MoveIcon","MoveIcon_classCallCheck","MoveIcon_possibleConstructorReturn","MoveIcon_getPrototypeOf","CursorMode","CursorMode_classCallCheck","CursorMode_possibleConstructorReturn","CursorMode_getPrototypeOf","actionMode","isActionMode","setInputScheme","icons_CreateIcon","icons_MoveIcon","Viewport_classCallCheck","Viewport_possibleConstructorReturn","Viewport_getPrototypeOf","labelEditor","prevMode","content_viewport_LabelEditor","getStepByStepMode","content_viewport_TestTray","content_viewport_CursorMode","content_viewport_TrashCan","WAITING","TESTING","Downloader","filename","data","downloadURL","getTextDataURI","filetype","svgString","XMLSerializer","serializeToString","blob","Blob","url","URL","createObjectURL","canvas","ctx","getContext","pixelRatio","window","devicePixelRatio","setTransform","image","Image","onload","drawImage","revokeObjectURL","imageURI","toDataURL","headerIndex","substring","setAttribute","body","appendChild","click","removeChild","encodeURIComponent","solveNFAbyStep","nfa","cachedStates","cachedSymbols","checkedStates","nextStates","nextIndex","cstate","doTerminalTransition","nextState","isFinalState","apply","DFA_classCallCheck","DFA_possibleConstructorReturn","DFA_getPrototypeOf","console","isValidDFA","TestMode","testingManager","TestMode_classCallCheck","targets","history","indexofString","running","started","skipToEnd","timer","onNodeDestroy","prepareForNewTest","resetTests","step","hasPrevInput","previous","pop","prevInput","hasNextInput","setResult","nextInput","currentStep","getCurrentCache","nextChar","skipFunc","curr_state","guid","s4","floor","TestingInputList","TestingInputList_classCallCheck","addInput","inputIndex","input","currState","counter","solveNFA","file","reader","FileReader","event","testInputs","abort","readAsText","first","dirty","markDirty","TestingManager","TestingManager_classCallCheck","shouldCheckError","isImmediateErrorCheck","errorCheckMode","NO_ERROR_CHECK","stepByStepMode","initialize","setMachineType","DELAYED_ERROR_CHECK","IMMEDIATE_ERROR_CHECK","isStarted","onStop","onStart","AddIcon","AddIcon_classCallCheck","AddIcon_possibleConstructorReturn","AddIcon_getPrototypeOf","RemoveIcon","RemoveIcon_classCallCheck","RemoveIcon_possibleConstructorReturn","RemoveIcon_getPrototypeOf","SuccessIcon","SuccessIcon_classCallCheck","SuccessIcon_possibleConstructorReturn","SuccessIcon_getPrototypeOf","FailureIcon","FailureIcon_classCallCheck","FailureIcon_possibleConstructorReturn","FailureIcon_getPrototypeOf","RunningManIcon","RunningManIcon_classCallCheck","RunningManIcon_possibleConstructorReturn","RunningManIcon_getPrototypeOf","StatusButton","StatusButton_classCallCheck","StatusButton_possibleConstructorReturn","StatusButton_getPrototypeOf","active","icons_SuccessIcon","icons_FailureIcon","icons_RunningManIcon","TestingInput","TestingInput_classCallCheck","TestingInput_getPrototypeOf","onStatusClick","TestingInput_assertThisInitialized","onSubmitClick","getInputByIndex","testByIndex","isInputFirst","getInput","newTest","removeInputByIndex","DELETE_KEY","getTests","shouldTestOnly","shiftKey","getCurrentInputIndex","panels_testing_StatusButton","placeholder","icons_AddIcon","icons_RemoveIcon","UploadTestButton","UploadTestButton_classCallCheck","UploadTestButton_possibleConstructorReturn","UploadTestButton_getPrototypeOf","uploadInput","name","UploadIcon","UploadIcon_classCallCheck","UploadIcon_possibleConstructorReturn","UploadIcon_getPrototypeOf","PageNewContentIcon","PageNewContentIcon_classCallCheck","PageNewContentIcon_possibleConstructorReturn","PageNewContentIcon_getPrototypeOf","SaveIcon","SaveIcon_classCallCheck","SaveIcon_possibleConstructorReturn","SaveIcon_getPrototypeOf","CloseIcon","CloseIcon_classCallCheck","CloseIcon_possibleConstructorReturn","CloseIcon_getPrototypeOf","TestingPanel","TestingPanel_classCallCheck","TestingPanel_getPrototypeOf","getErrorCheckMode","noTestMode","stepByStepModeChecked","onChangeErrorCheckMode","TestingPanel_assertThisInitialized","onUploadFileChange","onGraphChange","onTestsRunAll","onTestsClear","onTestsSave","onTestsNew","onTestsUpload","on","removeEventListener","g","files","importTests","getElementById","innerHTML","setErrorCheckMode","machineErrorChecker","clear","clearTests","clearTestName","hideTestInputList","downloadText","getTestsAsStrings","showTestInputList","isTestInvalid","isValidMachine","icons_PageNewContentIcon","components_UploadTestButton","icons_UploadIcon","icons_SaveIcon","icons_CloseIcon","panels_testing_TestingInput","Message","handler","tags","componentClass","componentProps","NotificationManager_classCallCheck","_handler","_id","_type","messages","getMessages","tag","INSTANCE","NotificationManager","_messageQueue","shouldReplaceRelated","clearMessages","addMessage","message","hasTag","NFAToDFAConversionWarningMessage","NFAToDFAConversionWarningMessage_classCallCheck","NFAToDFAConversionWarningMessage_getPrototypeOf","NFAToDFAConversionWarningMessage_assertThisInitialized","convertMachineTo","close","stateCount","pow","AnalysisPanel","AnalysisPanel_classCallCheck","AnalysisPanel_getPrototypeOf","optimizeUnreachOption","optimizeRedundOption","onConvertToDFA","AnalysisPanel_assertThisInitialized","onConvertToNFA","onOptimizeMachine","unreachableArray","getUnreachableNodes","getStartNode","deleteNode","messageTag","MACHINE_CONVERSION_MESSAGE_TAG","Notification","onDeleteAllUnreachable","canOptimize","AboutPanel","AboutPanel_classCallCheck","AboutPanel_possibleConstructorReturn","AboutPanel_getPrototypeOf","Eventable","__eventListeners","mixin","targetClass","targetPrototype","prototype","Object","assign","registerEvent","eventName","Map","has","set","unregisterEvent","delete","addEventListener","listener","get","listeners","flag","clearEventListeners","countEventListeners","getEventListeners","once","_len","args","_key","emit","_len2","_key2","onEventProcessed","GraphLayout","reachableNode","getReachableState","unreachableNode","numOfReachable","numOfUnreachable","numOfNode","maxNum","max","radius","degree_re","PI","degree_un","sin","cos","GraphElement","GraphElement_classCallCheck","graphElementID","GraphNode","GraphNode_classCallCheck","GraphNode_possibleConstructorReturn","GraphNode_getPrototypeOf","_label","Node","Node_classCallCheck","Node_possibleConstructorReturn","Node_getPrototypeOf","customLabel","_accept","NODE_RADIUS","prevLabel","_get","prevAccept","GraphEdge","from","to","GraphEdge_classCallCheck","GraphEdge_possibleConstructorReturn","GraphEdge_getPrototypeOf","_from","_to","HALFPI","isPlaceholder","dy","dx","atan2","halfPlaceholderLength","getPlaceholderLength","placeholderLength","getNodeSize","getDirectionalVector","x1","y1","x2","y2","dist","angleOffset","angle","getMidPoint","GraphCurvedEdge","QuadraticEdge_classCallCheck","QuadraticEdge_possibleConstructorReturn","QuadraticEdge_getPrototypeOf","_quad","radians","_coords","changeDestinationNode","fromx","fromy","midpointx","midpointy","sqrt","outrad","inrad","maxdr","abs","setQuadratic","getSelfLoopHeight","prevDest","QuadraticEdge_get","formatAsPlaceholder","isSelfLoop","formatAsSelfLoop","isQuadratic","coords","getQuadraticAsCoords","px","py","nodeSize","qcoords","qx","qy","Edge","Edge_classCallCheck","Edge_possibleConstructorReturn","Edge_getPrototypeOf","QuadraticEdge","Edge_get","NodalGraph","edges","NodalGraph_classCallCheck","reachable","startNode","edge","getSourceNode","getDestinationNode","edgeSource","edgeDestination","edgeLabel","otherEdge","otherEdgeLabel","parallelEdgeHeight","PARALLEL_EDGE_HEIGHT","getQuadratic","dist12sq","vertical","m","b","x0","y0","prevNode","minX","minY","maxX","maxY","minNX","Number","MAX_VALUE","minNY","maxNX","MIN_VALUE","maxNY","forEach","min","minEX","minEY","maxEX","maxEY","startpoint","getStartPoint","endpoint","getEndPoint","sx","sy","ex","ey","cx","cy","deleteAll","read","newNode","newEdge","formatEdge","setStartNode","applyLayout","MachineLabeler","MachineLabeler_classCallCheck","shouldAutoLabel","isDefaultInitial","defaultNodes","customLabels","_i","defaultName","getDefaultNodeLabelByIndex","setNodeLabel","isUniqueNodeLabel","MachineBuilder","MachineBuilder_classCallCheck","onGraphNodeLabelChange","targetNodes","prevX","prevY","enable","StateUnreachableWarningMessage","StateUnreachableWarningMessage_classCallCheck","StateUnreachableWarningMessage_getPrototypeOf","targetIndex","targetLabel","StateUnreachableWarningMessage_assertThisInitialized","buttonValue","StateMissingTransitionErrorMessage","StateMissingTransitionErrorMessage_classCallCheck","StateMissingTransitionErrorMessage_getPrototypeOf","StateMissingTransitionErrorMessage_assertThisInitialized","targetLength","TransitionErrorMessage","TransitionErrorMessage_classCallCheck","TransitionErrorMessage_getPrototypeOf","TransitionErrorMessage_assertThisInitialized","focusOnEdge","text","DFAErrorChecker","DFAErrorChecker_classCallCheck","errorNodes","errorEdges","warningNodes","warningEdges","shouldNotifyErrors","warnNodes","warnEdges","nodeTransitionMap","placeholderEdges","emptyEdges","dupeEdges","labels","currentAlphabet","missingNodes","nodeTransitions","MACHINE_ERRORS_MESSAGE_TAG","unReachedNodes","NFAErrorChecker","NFAErrorChecker_classCallCheck","unReachedNode","fillFSA","setFinalState","newTransition","setStartState","FSABuilder","FSABuilder_classCallCheck","FSABuilder_getPrototypeOf","_machine","_machineType","_machineValidDFA","_alphabet","_symbols","_errorTimer","FSABuilder_assertThisInitialized","onDelayedGraphChange","onDelayedErrorCheck","FSABuilder_get","GRAPH_IMMEDIATE_INTERVAL","ERROR_CHECK_INTERVAL","toNFA","checkErrors","string","allowNull","symbols","Set","symbolLength","subsymbol","add","size","machineType","prevSymbol","nextSymbol","PANELS","FSAModule","FSAModule_classCallCheck","FSAModule_possibleConstructorReturn","FSAModule_getPrototypeOf","_graph","_machineBuilder","FSAModule_get","destroy","formatAlphabetString","expandPowersetStateToDFA","powerSetState","dfa","getStateFromSet","hasState","newDFAStateFromNFA","terminals","dfaState","MachineController","MachineController_classCallCheck","_module","machineName","module","getMachineName","setMachineName","currentMachineType","powerSetStates","getPowerSet","log","trapState","newAlphabet","convertToDFA","copyMachine","addCustomSymbol","removeCustomSymbol","renameCustomSymbol","isCustomSymbol","NodalGraphParser","nodeLength","nodeCount","edgeLength","edgeCount","nodeData","setGraphElementID","setCustomLabel","edgeData","quad","nodeList","getElementsByTagName","edgeList","startNodeID","nodeIDMap","nodeID","attributes","nodeValue","nodeX","parseFloat","childNodes","nodeY","nodeAccept","nodeStart","boundingRect","getBoundingRect","edgeFrom","edgeTo","EMPTY","indexOfEdgeFrom","indexOfEdgeTo","edgeQuad","header","CURRENT_VERSION_STRING","doc","DOMParser","parseFromString","structure","automaton","SemanticVersion","major","minor","patch","SemanticVersion_classCallCheck","semanticVersion","components","parseInt","otherVersion","CURRENT_VERSION","stringify","saveToJSON","version","toJSON","getCustomSymbols","statePrefix","loadFromJSON","jsonData","metadata","FlapSaver_typeof","dataVersion","parse","canSupportVersion","addErrorMessage","graphJSON","graphData","newGraph","parseJSON","copyGraph","machineJSON","machineData","customSymbols","VALID_FILETYPES","VALID_EXTS","Uploader","Uploader_classCallCheck","graphFileBlob","Promise","resolve","reject","lastIndexOf","ext","FlapSaver","JSON","dataXML","parseXML","onerror","code","GraphController","GraphController_classCallCheck","uploader","prevQuad","prevEdgeTo","setMachineController","isPrevCustom","otherNodeIndex","other","newNodeLabel","getNextDefaultNodeLabel","SPAWN_RADIUS","selectedNode","picker","getPicker","selection","getSelection","clearSelection","pointer","diameter","nextDX","nextDY","NODE_RADIUS_SQU","pos","getInputEventPosition","changeInputEventPosition","setQuadraticByCoords","getNodeAt","sourceNode","openEditor","setOffset","ax","ay","InputPointer","InputPointer_classCallCheck","_active","_x","_y","_inputpos","InputAdapter","InputAdapter_classCallCheck","_controller","_element","_viewport","_cursor","_mousemove","_mouseup","_touchmove","_touchend","_pointer","_dragging","_altinput","_holdInputDelay","LONG_TAP_TICKS","_dblInputDelay","DOUBLE_TAP_TICKS","_scrollSensitivity","SCROLL_SENSITIVITY","_minTapRadius","CURSOR_RADIUS_SQU","_draggingRadiusSqu","DRAGGING_BUFFER_SQU","_prevEmptyInput","_prevEmptyTime","_prevEmptyX","_prevEmptyY","onMouseDown","onMouseMove","onTouchStart","onWheel","onMouseDownThenMove","onMouseDownThenUp","onTouchStartThenMove","onTouchStartThenEnd","onDelayedInputDown","controller","SVGElement","getElement","onTouchMove","cursor","button","ctrlKey","onInputDown","clientX","clientY","mouse","transformScreenToView","setPosition","onInputMove","onInputUp","changedTouches","touch","deltaY","getScale","onZoomChange","setScale","onPreInputEvent","beginInput","onDragMove","getDistanceSquToInitial","cancelInputEvent","onDragStop","onAltInputEvent","onInputEvent","dt","Date","now","onDblInputEvent","endInput","onPostInputEvent","inputadapter_Viewport_classCallCheck","_offsetX","_offsetY","_nextOffsetX","_nextOffsetY","_offsetDamping","_scaleFactor","_minScale","_maxScale","scale","damping","dscale","GraphPicker","GraphPicker_classCallCheck","selectionBox","fromX","fromY","toX","toY","visible","targetType","initialTarget","initialTargetType","getNodeByInitialMarkerAt","getEdgeByEndPointAt","getEdgeAt","INITIAL_MARKER_OFFSET_X","EDGE_RADIUS_SQU","end","ENDPOINT_RADIUS_SQU","box","mx","my","lx","ly","getNodesWithin","InputController","InputController_classCallCheck","setMinScale","MIN_SCALE","setMaxScale","MAX_SCALE","setOffsetDamping","SMOOTH_OFFSET_DAMPING","_inputAdapter","setController","_picker","_graphController","prevPointerX","prevPointerY","isNewEdge","ghostInitialMarker","shouldDestroyPointlessEdges","DEFAULT_SHOULD_DESTROY_POINTLESS_EDGE","_swapMouseScheme","_trashMode","workspace","setElement","update","getPointer","updateTarget","hasTarget","setInitialTarget","hasSelection","isTargetInSelection","deleteSelectedNodes","deleteTargetEdge","toggleNode","openLabelEditor","isMoveMode","targetQuad","STR_TRANSITION_DEFAULT_LABEL","beginSelection","moveMultipleNodesTo","moveNodeTo","moveEdgeTo","moveEndpointTo","addOffset","isSelecting","updateSelection","prevInitial","endSelection","clearTarget","zoomValue","enabled","shouldInputFirst","isAltInput","isActive","HotKeys","events","HotKeys_classCallCheck","toolbar","eventManager","which","metaKey","jsonString","getLogger","redo","undo","workspaceDim","baseVal","getSVGForExport","downloadSVG","LocalSaveManager","LocalSaveManager_classCallCheck","_handlers","_intervalID","_intervalMillis","_init","onIntervalUpdate","millis","doesSupportLocalStorage","setInterval","clearInterval","onAutoSave","saveKey","stringData","localStorage","setItem","removeItem","getItem","hidden","msHidden","webkitHidden","LocalSaveManager_typeof","hasOwnProperty","Storage","UploadButton","UploadButton_classCallCheck","UploadButton_getPrototypeOf","UploadButton_assertThisInitialized","getUploader","uploadFileGraph","inputID","getValidFileTypes","HelpButton","HelpButton_classCallCheck","HelpButton_getPrototypeOf","HelpButton_assertThisInitialized","hasMessages","MachineName","MachineName_classCallCheck","MachineName_getPrototypeOf","MachineName_assertThisInitialized","PageNewIcon","PageNewIcon_classCallCheck","PageNewIcon_possibleConstructorReturn","PageNewIcon_getPrototypeOf","HelpIcon","HelpIcon_classCallCheck","HelpIcon_possibleConstructorReturn","HelpIcon_getPrototypeOf","LanguageIcon","LanguageIcon_classCallCheck","LanguageIcon_possibleConstructorReturn","LanguageIcon_getPrototypeOf","OfflineIcon","OfflineIcon_classCallCheck","OfflineIcon_possibleConstructorReturn","OfflineIcon_getPrototypeOf","BugReportIcon","BugReportIcon_classCallCheck","BugReportIcon_possibleConstructorReturn","BugReportIcon_getPrototypeOf","DrawerExpander","DrawerExpander_classCallCheck","DrawerExpander_getPrototypeOf","DrawerExpander_assertThisInitialized","isFullscreen","closeDrawer","openDrawer","PNGIcon","PNGIcon_classCallCheck","PNGIcon_possibleConstructorReturn","PNGIcon_getPrototypeOf","points","r","JPGIcon","JPGIcon_classCallCheck","JPGIcon_possibleConstructorReturn","JPGIcon_getPrototypeOf","JSONIcon","JSONIcon_classCallCheck","JSONIcon_possibleConstructorReturn","JSONIcon_getPrototypeOf","XMLIcon","XMLIcon_classCallCheck","XMLIcon_possibleConstructorReturn","XMLIcon_getPrototypeOf","ExportingPanel","ExportingPanel_classCallCheck","ExportingPanel_getPrototypeOf","onExportXML","ExportingPanel_assertThisInitialized","onExportJSON","onExportPNG","onExportJPG","xmlString","toXML","flat_JSONIcon","flat_PNGIcon","flat_JPGIcon","flat_XMLIcon","ColorHelper","hex","red","green","blue","h","v","p","q","t","StyleOption","elementSource","propName","inputType","groupName","StyleOptionRegistry_classCallCheck","prop","group","_callback","_value","_defaultValue","computedStyle","shouldPropagateChange","getComputedStyle","getPropertyValue","setStyle","val","setProperty","StyleOptionRegistry","_options","_groups","changeCallback","option","computedStyles","values","updateStyle","StyleInput","StyleInput_classCallCheck","StyleInput_getPrototypeOf","StyleInput_assertThisInitialized","getStyle","OptionGroup","OptionGroup_classCallCheck","OptionGroup_possibleConstructorReturn","OptionGroup_getPrototypeOf","OptionHotkey","OptionHotkey_classCallCheck","OptionHotkey_possibleConstructorReturn","OptionHotkey_getPrototypeOf","keyName","LOCAL_STORAGE_ID","OptionsPanel","OptionsPanel_classCallCheck","OptionsPanel_getPrototypeOf","styleOpts","theme","customTheme","skipWelcome","LocalSave","getStringFromStorage","onChangeTheme","OptionsPanel_assertThisInitialized","root","opts","invertFunc","opt","HEXtoRGB","RGBtoHSV","HSVtoRGB","RGBtoHEX","getOptionByProp","darkFunc","registerStyleOption","registerHandler","onLoadSave","registry","terminate","unregisterHandler","loadFromStorage","getOptions","isDefaultStyle","saveToStorage","prevTheme","resetStyle","panels_options_OptionGroup","panels_options_OptionHotkey","getPropsByGroup","components_StyleInput","setStringToStorage","DEFAULT_TAB_INDEX","MAX_PANEL_THRESHOLD","MIN_PANEL_SIZE","Drawer","Drawer_classCallCheck","Drawer_getPrototypeOf","dragging","Drawer_assertThisInitialized","onScroll","_ontouchmove","_ontouchend","updatePanelSize","onStartDraggingDrawerBorder","onStopDraggingDrawerBorder","onMouseUp","currentModule","getCurrentModule","InfoPanel","getModuleInfoPanel","getModulePanels","PanelClass","panelID","getModuleName","content_drawer_DrawerExpander","setTab","matchMedia","matches","getBoundingClientRect","EXPORTING_PANEL_TAB_INDEX","OPTIONS_PANEL_TAB_INDEX","Toolbar","Toolbar_classCallCheck","Toolbar_getPrototypeOf","langOn","onMachineNameChange","Toolbar_assertThisInitialized","onMachineNameKeyDown","langOnClick","renameMachine","drawer","offline","navigator","onLine","toolbar_MachineName","serviceWorker","getRegistration","alert","icons_OfflineIcon","confirm","icons_PageNewIcon","toolbar_UploadButton","canUndo","canRedo","icons_BugReportIcon","toolbar_HelpButton","icons_HelpIcon","icons_LanguageIcon","maxWidth","fetchLanguageFile","Subtitle","Subtitle_classCallCheck","Subtitle_possibleConstructorReturn","Subtitle_getPrototypeOf","messageTimer","INIT_WAITTIME","textAnchor","NodeRenderer","NodeRenderer_classCallCheck","NodeRenderer_possibleConstructorReturn","NodeRenderer_getPrototypeOf","stroke","NODE_RADIUS_INNER","userSelect","fontSize","EdgeRenderer","EdgeRenderer_classCallCheck","EdgeRenderer_possibleConstructorReturn","EdgeRenderer_getPrototypeOf","SIXTH_PI","arrowAngle","start","quadCoords","edgeDir","getEdgeDirection","flipLabel","quadLine","ARROW_WIDTH","transform","str","yy","alignmentBaseline","InitialMarkerRenderer","InitialMarkerRenderer_classCallCheck","InitialMarkerRenderer_possibleConstructorReturn","InitialMarkerRenderer_getPrototypeOf","NodalGraphRenderer","NodalGraphRenderer_classCallCheck","NodalGraphRenderer_possibleConstructorReturn","NodalGraphRenderer_getPrototypeOf","renderer_NodeRenderer","renderer_EdgeRenderer","renderer_InitialMarkerRenderer","SelectionBoxRenderer","SelectionBoxRenderer_classCallCheck","SelectionBoxRenderer_possibleConstructorReturn","SelectionBoxRenderer_getPrototypeOf","HIGHLIGHT_LINE_ARRAY","HighlightRenderer","HighlightRenderer_classCallCheck","HighlightRenderer_possibleConstructorReturn","HighlightRenderer_getPrototypeOf","CURSOR_RADIUS","EDGE_RADIUS","ENDPOINT_RADIUS","strokeDashoffset","offset","strokeDasharray","strokeWidth","Workspace","Workspace_classCallCheck","Workspace_possibleConstructorReturn","Workspace_getPrototypeOf","bounds","w","EXPORT_PADDING_X","EXPORT_PADDING_Y","clone","cloneNode","uiElements","getElementsByClassName","remove","getSelectionBox","DEFAULT_GRAPH_SIZE","halfSize","content_workspace_Subtitle","renderer_NodalGraphRenderer","renderer_HighlightRenderer","renderer_SelectionBoxRenderer","Tutorial","Tutorial_classCallCheck","existsInStorage","NotificationMessage","NotificationMessage_classCallCheck","NotificationMessage_getPrototypeOf","onExitMessage","NotificationMessage_assertThisInitialized","getType","NotificationView","NotificationView_classCallCheck","NotificationView_possibleConstructorReturn","NotificationView_getPrototypeOf","notificationManager","getID","ComponentClass","getComponentClass","getComponentProps","notification_components_NotificationMessage","_extends","EventLogger","EventLogger_classCallCheck","offsetIndex","applyUndo","applyRedo","Event","GraphEdgeDestinationEvent","nextDestination","prevDestination","GraphEdgeDestinationEvent_classCallCheck","GraphEdgeDestinationEvent_possibleConstructorReturn","GraphEdgeDestinationEvent_getPrototypeOf","nextQuad","GraphEdgeLabelEvent","nextLabel","GraphEdgeLabelEvent_classCallCheck","GraphEdgeLabelEvent_possibleConstructorReturn","GraphEdgeLabelEvent_getPrototypeOf","edgeID","edgeIndex","getEdgeIndexByID","GraphEdgeMoveEvent","GraphEdgeMoveEvent_classCallCheck","GraphEdgeMoveEvent_possibleConstructorReturn","GraphEdgeMoveEvent_getPrototypeOf","GraphNodeInitialEvent","nextInitial","GraphNodeInitialEvent_classCallCheck","GraphNodeInitialEvent_possibleConstructorReturn","GraphNodeInitialEvent_getPrototypeOf","prevID","getNodeIndexByID","GraphNodeMoveEvent","nextX","nextY","GraphNodeMoveEvent_classCallCheck","GraphNodeMoveEvent_possibleConstructorReturn","GraphNodeMoveEvent_getPrototypeOf","GraphNodeMoveAllEvent","GraphNodeMoveAllEvent_classCallCheck","GraphNodeMoveAllEvent_possibleConstructorReturn","GraphNodeMoveAllEvent_getPrototypeOf","nodeIDs","EventHandler","eventLogger","postEventName","EventHandler_classCallCheck","onEvent","eventData","captureEvent","postData","capturePostEvent","handleEvent","UserCreateNodeEventHandler","UserCreateNodeEventHandler_classCallCheck","UserCreateNodeEventHandler_possibleConstructorReturn","UserCreateNodeEventHandler_getPrototypeOf","setNodeID","UserToggleNodeEventHandler","UserToggleNodeEventHandler_classCallCheck","UserToggleNodeEventHandler_possibleConstructorReturn","UserToggleNodeEventHandler_getPrototypeOf","UserDeleteNodesEventHandler","UserDeleteNodesEventHandler_classCallCheck","UserDeleteNodesEventHandler_possibleConstructorReturn","UserDeleteNodesEventHandler_getPrototypeOf","targetID","UserSwapNodesEventHandler","UserSwapNodesEventHandler_classCallCheck","UserSwapNodesEventHandler_possibleConstructorReturn","UserSwapNodesEventHandler_getPrototypeOf","otherNode","otherID","UserRenameNodeEventHandler","UserRenameNodeEventHandler_classCallCheck","UserRenameNodeEventHandler_possibleConstructorReturn","UserRenameNodeEventHandler_getPrototypeOf","prevCustom","UserCreateEdgeEventHandler","UserCreateEdgeEventHandler_classCallCheck","UserCreateEdgeEventHandler_possibleConstructorReturn","UserCreateEdgeEventHandler_getPrototypeOf","fromID","toID","fromIndex","setSourceNode","toIndex","setDestinationNode","UserDeleteEdgeEventHandler","UserDeleteEdgeEventHandler_classCallCheck","UserDeleteEdgeEventHandler_possibleConstructorReturn","UserDeleteEdgeEventHandler_getPrototypeOf","prevTo","UserImportGraphEventHandler","UserImportGraphEventHandler_classCallCheck","UserImportGraphEventHandler_possibleConstructorReturn","UserImportGraphEventHandler_getPrototypeOf","graphName","SafeGraphEventHandler","SafeGraphEventHandler_classCallCheck","SafeGraphEventHandler_possibleConstructorReturn","SafeGraphEventHandler_getPrototypeOf","UserChangeMachineEventHandler","UserChangeMachineEventHandler_classCallCheck","UserChangeMachineEventHandler_possibleConstructorReturn","UserChangeMachineEventHandler_getPrototypeOf","nextMachineType","prevMachineType","prevType","nextType","UserConvertMachineEventHandler","UserConvertMachineEventHandler_classCallCheck","UserConvertMachineEventHandler_possibleConstructorReturn","UserConvertMachineEventHandler_getPrototypeOf","UserRenameMachineEventHandler","UserRenameMachineEventHandler_classCallCheck","UserRenameMachineEventHandler_possibleConstructorReturn","UserRenameMachineEventHandler_getPrototypeOf","nextMachineName","prevMachineName","prevName","nextName","UserRenameSymbolEventHandler","UserRenameSymbolEventHandler_classCallCheck","UserRenameSymbolEventHandler_possibleConstructorReturn","UserRenameSymbolEventHandler_getPrototypeOf","targetIDs","UserDeleteSymbolEventHandler","UserDeleteSymbolEventHandler_classCallCheck","UserDeleteSymbolEventHandler_possibleConstructorReturn","UserDeleteSymbolEventHandler_getPrototypeOf","EventManager","EventManager_classCallCheck","eventHandlers","logger","targetNode","App","App_classCallCheck","App_getPrototypeOf","setModule","hotKeys","tutorial","isDangerous","isWaitingForFile","onDragOver","App_assertThisInitialized","onDragEnter","onDragLeave","onFileDrop","workspaceDOM","items","kind","getAsFile","clearData","full","content_toolbar_Toolbar","notification_components_NotificationView","shouldHideContent","opacity","content_workspace_Workspace","content_viewport_Viewport","content_drawer_Drawer","hot"],"mappings":"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","file":"content.bundle.2fa5cf913dcc0672c870.js","sourcesContent":["const DEFAULT_PANELS = [];\n\nclass BaseModule\n{\n  constructor() {}\n\n  initialize(app) {}\n\n  destroy(app) {}\n\n  getModulePanels()\n  {\n    return DEFAULT_PANELS;\n  }\n\n  getModuleName()\n  {\n    throw new Error(\"Missing module name\");\n  }\n}\n\nexport default BaseModule;\n","import React from 'react';\n\nclass FormattedInput extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.element = null;\n    this.ignoreSaveOnExit = false;\n\n    const defaultValue = props.defaultValue || \"\";\n    this.state = {\n      value: defaultValue,\n      prevValue: defaultValue\n    };\n\n    this.onChange = this.onChange.bind(this);\n    this.onBlur = this.onBlur.bind(this);\n    this.onKeyUp = this.onKeyUp.bind(this);\n\n    //props:\n    //  filter - a filter function\n    //  formatter - a format function\n    //  captureOnExit - what to capture on blur (none, save, reset)\n    //  defaultValue - the default value for input\n  }\n\n  //Override\n  componentWillReceiveProps(nextProps)\n  {\n    //Don't overwrite user input...\n    if (this.hasFocus()) return;\n\n    //TODO: This is a way to update the value if it is suppose to be the default value...\n    if (!this.state.value || this.state.value.length <= 0 || this.state.value === this.props.defaultValue)\n    {\n      this.setState({value: nextProps.defaultValue});\n    }\n  }\n\n  get value()\n  {\n    return this.state.value;\n  }\n\n  focus(replace=false)\n  {\n    if (replace)\n    {\n      this.element.select();\n    }\n    else\n    {\n      this.element.focus();\n    }\n  }\n\n  blur()\n  {\n    this.element.blur();\n  }\n\n  hasFocus()\n  {\n    return this.element === document.activeElement;\n  }\n\n  onChange(e)\n  {\n    if (this.props.filter)\n    {\n      const result = e.target.value.replace(this.props.filter, '');\n      this.setState({value: result});\n    }\n    else\n    {\n      this.setState({value: e.target.value});\n    }\n  }\n\n  onBlur(e)\n  {\n    if (this.ignoreSaveOnExit || this.props.captureOnExit == \"none\")\n    {\n      //For those you choose to handle exit, it's value should remain correct.\n      const result = this.formatValue(e.target.value);\n      this.setState({value: result});\n\n      //Don't ignore it for the future.\n      this.ignoreSaveOnExit = false;\n      return;\n    }\n\n    if (this.props.captureOnExit == \"save\")\n    {\n      const prev = this.state.prevValue;\n      const next = e.target.value || this.props.defaultValue || \"\";\n      this.resetValue(next, () => {\n        if (this.props.onSubmit)\n        {\n          this.props.onSubmit(next, prev);\n        }\n      });\n    }\n    else if (this.props.captureOnExit == \"reset\")\n    {\n      this.resetValue(null);\n    }\n  }\n\n  onKeyUp(e)\n  {\n    if (e.key == \"Enter\")\n    {\n      const prev = this.state.prevValue;\n      const next = e.target.value || this.props.defaultValue || \"\";\n      this.resetValue(next, () => {\n        this.ignoreSaveOnExit = true;\n\n        if (this.props.onSubmit)\n        {\n          this.props.onSubmit(next, prev);\n        }\n        this.element.blur();\n      });\n      return false;\n    }\n    else if (e.key == \"Escape\")\n    {\n      const prev = this.state.prevValue;\n      this.resetValue(prev, () => {\n        this.ignoreSaveOnExit = true;\n\n        if (this.props.onSubmit)\n        {\n          this.props.onSubmit(prev || \"\", prev);\n        }\n        this.element.blur();\n      });\n      return false;\n    }\n  }\n\n  resetValue(newValue=null, callback)\n  {\n    if (newValue != null)\n    {\n      const result = this.formatValue(newValue);\n      this.setState({value: result, prevValue: result}, callback);\n    }\n    else\n    {\n      this.setState((prev, props) => {\n        //NOTE: Although you CAN assume prev is valid, but what about when prev does not exist?\n        const result = this.formatValue(prev.prevValue);\n        return {value: result};\n      }, callback);\n    }\n  }\n\n  setValue(value, callback)\n  {\n    if (!value || value.length == 0)\n    {\n      value = this.props.defaultValue || \"\";\n    }\n    else\n    {\n      value = this.formatValue(value);\n    }\n\n    this.setState({value: value}, callback);\n  }\n\n  appendValue(value, separator=\",\")\n  {\n    let result = this.state.value;\n    //If the entire input is selected...\n    if (this.element.selectionStart == 0 &&\n      this.element.selectionEnd == value.length)\n    {\n      //Replace it!\n      result = value;\n    }\n    //Or just append to the end...\n    else\n    {\n      if (!result || result.length == 0)\n      {\n        result = value;\n      }\n      else\n      {\n        result = result + separator + value;\n      }\n    }\n\n    //If can filter input...\n    if (this.props.filter)\n    {\n      result = result.replace(this.props.filter, '');\n    }\n\n    this.setState({value: this.formatValue(result)});\n  }\n\n  formatValue(value)\n  {\n    const formatter = this.props.formatter;\n    const result = formatter(value);\n    return result || \"\";\n  }\n\n  //Override\n  render()\n  {\n    return <input\n      id={this.props.id} className={this.props.className} style={this.props.style}\n      ref={ref=>this.element=ref}\n      type=\"text\" value={this.state.value}\n      onChange={this.onChange}\n      onBlur={this.onBlur}\n      onKeyUp={this.onKeyUp}/>;\n  }\n}\n\nexport default FormattedInput;\n","import React from 'react';\nimport './IconToggle.css';\n\nclass IconToggle extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.state = {\n      open: this.props.defaultValue || false\n    };\n\n    this.onClick = this.onClick.bind(this);\n  }\n\n  onClick(e)\n  {\n    //Toggle state\n    this.setState((prev, props) => {\n      return {open: !prev.open};\n    });\n\n    //Call passed-in onClick listener\n    if (this.props.onClick)\n    {\n      this.props.onClick(e);\n    }\n  }\n\n  render()\n  {\n    return <button\n      className={\"icon-button icon-toggle \" + (this.state.open ? \" open \" : \"\") + this.props.className}\n      id={this.props.id}\n      title={this.props.title}\n      style={this.props.style}\n      disabled={this.props.disabled}\n      onClick={this.onClick}>\n      {this.props.children}\n    </button>;\n  }\n}\n\nexport default IconToggle;\n","import React from 'react';\n\nclass DropDownIcon extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    return <svg className=\"dropdown-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n      <path d=\"M7 10l5 5 5-5z\"/>\n      <path d=\"M0 0h24v24H0z\" fill=\"none\"/>\n    </svg>;\n  }\n}\n\nexport default DropDownIcon;\n","import React from 'react';\nimport './InfoBlock.css';\n\nimport IconToggle from 'icons/IconToggle.js';\nimport DropDownIcon from 'icons/DropDownIcon.js';\n\n//TODO: Should be deprecated to use OptionGroup (or something similar)\nclass InfoBlock extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.dropdown = React.createRef();\n  }\n\n  isOpen()\n  {\n    return this.dropdown.state ? this.dropdown.state.open : false;\n  }\n\n  render()\n  {\n    return <div className={\"infoblock-container \" + this.props.className}>\n      <div className=\"infoblock-header\" onClick={(e)=>this.dropdown.onClick(e)}>\n        <label>{this.props.title}</label>\n        <IconToggle id=\"collapse\" ref={ref=>this.dropdown=ref} defaultValue={this.props.defaultValue}\n          style={{pointerEvents: \"none\"}}>\n          <DropDownIcon/>\n        </IconToggle>\n      </div>\n      <div className=\"infoblock-content\"\n        style={{display: this.isOpen() ? \"block\" : \"none\"}}>\n        {this.props.children}\n      </div>\n    </div>;\n  }\n}\n\nexport default InfoBlock;\n","import React from 'react';\nimport './IconButton.css';\n\nclass IconButton extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    return <button\n      className={\"icon-button \" + this.props.className}\n      id={this.props.id}\n      title={this.props.title}\n      style={this.props.style}\n      disabled={this.props.disabled}\n      onClick={this.props.onClick}>\n      {this.props.children}\n    </button>;\n  }\n}\n\nexport default IconButton;\n","import React from 'react';\n\nclass BoxAddIcon extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    return <svg className=\"boxadd-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n      <path d=\"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10h-4v4h-2v-4H7v-2h4V7h2v4h4v2z\"/>\n      <path d=\"M0 0h24v24H0z\" fill=\"none\"/>\n    </svg>;\n  }\n}\n\nexport default BoxAddIcon;\n","import React from 'react';\n\nclass TriangleIcon extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    return <svg className=\"triangle-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n      <path d=\"M12 7.77L18.39 18H5.61L12 7.77M12 4L2 20h20L12 4z\"/>\n      <path fill=\"none\" d=\"M0 0h24v24H0V0z\"/>\n    </svg>;\n  }\n}\n\nexport default TriangleIcon;\n","import React from 'react';\nimport './StateTag.css';\n\nimport Config from 'config.js';\n\nclass StateTag extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.state = {\n      value: null,\n      error: false\n    };\n\n    this.onValueChange = this.onValueChange.bind(this);\n    this.onFocus = this.onFocus.bind(this);\n    this.onBlur = this.onBlur.bind(this);\n    this.onKeyDown = this.onKeyDown.bind(this);\n    this.onKeyUp = this.onKeyUp.bind(this);\n\n    this.onDragStart = this.onDragStart.bind(this);\n    this.onDrop = this.onDrop.bind(this);\n  }\n\n  onDragStart(e)\n  {\n    //Drag all of it\n    e.target.select();\n  }\n\n  onDrop(e)\n  {\n    const graphController = this.props.graphController;\n    const graph = graphController.getGraph();\n    const nodeIndex = graph.getNodeIndex(this.props.src);\n    const otherIndex = graph.getNodeIndexByLabel(e.dataTransfer.getData(\"text\"));\n\n    //Swap\n    graphController.swapNodeByIndex(nodeIndex, otherIndex);\n\n    e.preventDefault();\n  }\n\n  onFocus(e)\n  {\n    const target = e.target;\n    //This is a prop, refer to StateList for the actual node.getNodeLabel()\n    this.setState({ value: this.props.label, error: false }, () => {\n      target.select()\n    });\n\n    //Call any listening focus\n    if (this.props.onFocus) this.props.onFocus(e);\n  }\n\n  onBlur(e)\n  {\n    const graphController = this.props.graphController;\n    const newLabel = this.state.value;\n\n    //The value is already processed, abort\n    if (newLabel != null)\n    {\n      const node = this.props.src;\n      const graph = graphController.getGraph();\n      if (newLabel.length > 0)\n      {\n        const result = graph.getNodeByLabel(newLabel);\n        if (!result)\n        {\n          //Valid! Rename it!\n          graphController.renameNode(node, newLabel);\n        }\n        else\n        {\n          //Found something already named that! Ignore!\n        }\n      }\n      else\n      {\n        //Delete!\n        graphController.deleteTargetNode(this.props.src);\n      }\n\n      this.setState({ value: null, error: false });\n\n      //Call any listening blurs\n      if (this.props.onBlur) this.props.onBlur(e);\n    }\n  }\n\n  onKeyDown(e)\n  {\n    if (e.keyCode === Config.SUBMIT_KEY || e.keyCode === Config.CLEAR_KEY)\n    {\n      e.preventDefault();\n    }\n  }\n\n  onKeyUp(e)\n  {\n    if (e.keyCode === Config.SUBMIT_KEY)\n    {\n      e.target.blur();\n    }\n    else if (e.keyCode === Config.CLEAR_KEY)\n    {\n      const target = e.target;\n      this.setState({ value: null, error: false}, () => {\n        target.blur();\n      });\n    }\n  }\n\n  onValueChange(e)\n  {\n    const graph = this.props.graphController.getGraph();\n    const value = e.target.value.trim();\n    let error = false;\n    if (value.length > 0)\n    {\n      const node = graph.getNodeByLabel(value);\n      if (node != null && node != this.props.src)\n      {\n        error = true;\n      }\n    }\n\n    this.setState({\n      value: value,\n      error: error\n    });\n  }\n\n  render()\n  {\n    const isCustom = this.props.src.hasCustomLabel();\n    const value = this.state.value != null ? this.state.value : this.props.label;\n    return <div className={\"statetag-container\" +\n      (isCustom ? \" customtag\" : \"\") +\n      (value.length == 0 ? \" emptytag\" : \"\") +\n      (this.state.value && this.state.error ? \" errortag\" : \"\")}>\n      <input type=\"text\" className={(this.props.accept ? \" accept\" : \"\")}\n        spellCheck=\"false\"\n        draggable=\"true\"\n        style={{width: value.length + \"ch\"}}\n        value={value}\n        onChange={this.onValueChange}\n        onFocus={this.onFocus}\n        onBlur={this.onBlur}\n        onKeyUp={this.onKeyUp}\n        onKeyDown={this.onKeyDown}\n        onDragStart={this.onDragStart}\n        onDrop={this.onDrop}/>\n    </div>;\n  }\n}\n\nexport default StateTag;\n","import React from 'react';\nimport './StatesList.css';\n\nimport InfoBlock from '../infoblock/InfoBlock.js';\nimport IconButton from 'icons/IconButton.js';\nimport BoxAddIcon from 'icons/BoxAddIcon.js';\nimport TriangleIcon from 'icons/TriangleIcon.js';\n\nimport StateTag from './StateTag.js';\n\nclass StatesList extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.onStateCreate = this.onStateCreate.bind(this);\n  }\n\n  onStateCreate(e)\n  {\n    const x = -100 + (Math.random() * 100 * 2);\n    const y = -100 + (Math.random() * 100 * 2);\n    this.props.graphController.createNode(x, y);\n  }\n\n  render()\n  {\n    const graphController = this.props.graphController;\n    const graph = graphController.getGraph();\n    return <InfoBlock title={I18N.toString(\"component.stateslist.title\")} defaultValue=\"true\">\n      <div className=\"statelist-container\">\n        <div className=\"statelist\">\n          <TriangleIcon/>\n          {\n            graph.nodes.map((e, i) => {\n              return <StateTag key={e.getGraphElementID()} src={e} label={e.getNodeLabel()} accept={e.accept}\n                graphController={graphController}\n                onFocus={ev => graphController.focusOnNode(e)}/>\n            })\n          }\n        </div>\n        <IconButton onClick={this.onStateCreate}>\n          <BoxAddIcon/>\n        </IconButton>\n      </div>\n    </InfoBlock>;\n  }\n}\n\nexport default StatesList;\n","import React from 'react';\n\nimport './AlphabetTag.css';\nimport Config from 'config.js';\n\nclass AlphabetTag extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.ref = null;\n\n    this.state = {\n      symbol: null,\n      error: false\n    };\n\n    this.onValueChange = this.onValueChange.bind(this);\n    this.onFocus = this.onFocus.bind(this);\n    this.onBlur = this.onBlur.bind(this);\n    this.onKeyDown = this.onKeyDown.bind(this);\n    this.onKeyUp = this.onKeyUp.bind(this);\n  }\n\n  onFocus(e)\n  {\n    const target = e.target;\n    this.setState({\n      symbol: this.props.src,\n      error: false\n    }, () => target.select());\n\n    //Call any listening focus\n    if (this.props.onFocus) this.props.onFocus(e);\n  }\n\n  onBlur(e)\n  {\n    const machineController = this.props.machineController;\n    const newSymbol = this.state.symbol;\n\n    if (newSymbol != null)\n    {\n      const oldSymbol = this.props.src;\n      if (newSymbol.length > 0)\n      {\n        const alphabet = machineController.getAlphabet();\n        if (!alphabet.includes(newSymbol))\n        {\n          if (oldSymbol)\n          {\n            //Valid! Rename it!\n            machineController.renameSymbol(oldSymbol, newSymbol);\n          }\n          else\n          {\n            //Valid! Add it to the list!\n            machineController.createSymbol(newSymbol);\n          }\n        }\n        else\n        {\n          //Found something already named that! Ignore!\n        }\n      }\n      else if (oldSymbol)\n      {\n        //Delete!\n        machineController.deleteSymbol(oldSymbol);\n      }\n    }\n\n    this.setState({symbol: null, error: false});\n\n    //Call any listening blurs\n    if (this.props.onBlur) this.props.onBlur(e);\n  }\n\n  onKeyDown(e)\n  {\n    if (e.keyCode === Config.SUBMIT_KEY || e.keyCode === Config.CLEAR_KEY)\n    {\n      e.preventDefault();\n    }\n  }\n\n  onKeyUp(e)\n  {\n    if (e.keyCode === Config.SUBMIT_KEY)\n    {\n      e.target.blur();\n    }\n    else if (e.keyCode === Config.CLEAR_KEY)\n    {\n      const target = e.target;\n      this.setState({ symbol: null, error: false}, () => {\n        target.blur();\n      });\n    }\n  }\n\n  onValueChange(e)\n  {\n    const machineController = this.props.machineController;\n    const symbol = e.target.value.trim();\n    let error = false;\n    if (symbol.length > 0)\n    {\n      const alphabet = machineController.getAlphabet();\n      if (alphabet.includes(symbol) && symbol != this.props.src)\n      {\n        error = true;\n      }\n    }\n\n    this.setState({\n      symbol: symbol,\n      error: error\n    });\n  }\n\n  render()\n  {\n    const symbol = this.state.symbol != null ? this.state.symbol : this.props.src;\n    const isUsed = false;\n    //TODO: const isUsed = this.props.src && this.props.machineController.getMachineBuilder().getMachine().getUsedAlphabet().includes(symbol);\n    return <div className={\"alphatag-container\" +\n      (isUsed ? \" usedtag\" : \"\") +\n      (this.props.src && (!symbol || symbol.length == 0) ? \" emptytag\" : \"\") +\n      (this.state.symbol && this.state.error ? \" errortag\" : \"\")}>\n      <input type=\"text\" ref={ref=>this.ref=ref} className=\"alphatag-input\"\n        spellCheck=\"false\"\n        maxLength=\"1\"\n        value={symbol}\n        onChange={this.onValueChange}\n        onFocus = {this.onFocus}\n        onBlur={this.onBlur}\n        onKeyUp={this.onKeyUp}\n        onKeyDown={this.onKeyDown}/>\n    </div>;\n  }\n}\n\nexport default AlphabetTag;\n","import React from 'react';\nimport './AlphabetList.css';\n\nimport InfoBlock from '../infoblock/InfoBlock.js';\nimport IconButton from 'icons/IconButton.js';\nimport BoxAddIcon from 'icons/BoxAddIcon.js';\n\nimport AlphabetTag from './AlphabetTag.js';\n\nclass AlphabetList extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n    this.editingTag = null;\n\n    this.state = {\n      editing: false\n    };\n\n    this.onSymbolCreate = this.onSymbolCreate.bind(this);\n    this.onStopEditing = this.onStopEditing.bind(this);\n  }\n\n  onSymbolCreate(e)\n  {\n    this.setState({editing: true}, () => {\n      this.editingTag.ref.focus();\n    });\n  }\n\n  onStopEditing(e)\n  {\n    this.setState({editing: false});\n  }\n\n  render()\n  {\n    const machineController = this.props.machineController;\n    const alphabet = machineController.getAlphabet();\n\n    return <InfoBlock title={I18N.toString(\"component.alphabetlist.title\")}>\n      <div className=\"alphalist-container\">\n        <div className=\"alphalist\">\n          {\n            alphabet.map((e, i) => {\n              return <AlphabetTag key={e + \".\" + i} src={e} machineController={machineController}/>\n            })\n          }\n          {\n            this.state.editing &&\n            <AlphabetTag ref={ref=>this.editingTag=ref} src={\"\"} machineController={machineController}\n              onBlur={this.onStopEditing}/>\n          }\n        </div>\n\n        <IconButton onClick={this.onSymbolCreate}>\n          <BoxAddIcon/>\n        </IconButton>\n      </div>\n    </InfoBlock>;\n  }\n}\n\nexport default AlphabetList;\n","const SRC = 0;\nconst SYMBOL = 1;\nconst DST = 2;\n\nclass FSA\n{\n  constructor()\n  {\n    this._states = [];\n    this._transitions = [];\n    this._finalStates = [];\n\n    this._customAlphabet = [];\n  }\n\n  clear()\n  {\n    this._states.length = 0;\n    this._transitions.length = 0;\n    this._finalStates.length = 0;\n\n    this._customAlphabet.length = 0;\n  }\n\n  copy(fsa)\n  {\n    this._states.length = 0;\n    for(let state of fsa._states)\n    {\n      this._states.push(state);\n    }\n    this._transitions.length = 0;\n    for(let transition of fsa._transitions)\n    {\n      this._transitions.push(transition.slice());\n    }\n    this._finalStates.length = 0;\n    for(let final of fsa._finalStates)\n    {\n      this._finalStates.push(final);\n    }\n    this._customAlphabet.length = 0;\n    for(let symbol of fsa._customAlphabet)\n    {\n      this._customAlphabet.push(symbol);\n    }\n  }\n\n  newState(state)\n  {\n    if (this._states.includes(state))\n    {\n      throw new Error(\"State \\'\" + state + \"\\' already added to states.\");\n    }\n\n    this._states.push(state);\n    return state;\n  }\n\n  deleteState(state)\n  {\n    if (!this._states.includes(state))\n    {\n      throw new Error(\"State \\'\" + state + \"\\' does not exist.\");\n    }\n\n    this._states.splice(this._states.indexOf(state), 1);\n  }\n\n  renameState(oldState, newState)\n  {\n    if (!this._states.includes(oldState))\n    {\n      throw new Error(\"State \\'\" + oldState + \"\\' does not exist.\");\n    }\n    if (this._states.includes(newState))\n    {\n      throw new Error(\"State \\'\" + newState + \"\\' already exists.\");\n    }\n\n    for(let transition of this._transitions)\n    {\n      if (transition[SRC] == oldState)\n      {\n        transition[SRC] = newState;\n      }\n      if (transition[DST] == oldState)\n      {\n        transition[DST] = newState;\n      }\n    }\n\n    const index = this._states.indexOf(oldState);\n    this._states[index] = newState;\n  }\n\n  newTransition(fromState, toState, symbol)\n  {\n    if (!this._states.includes(fromState))\n    {\n      throw new Error(\"State \\'\" + fromState + \"\\' does not exist.\");\n    }\n\n    if (!this._states.includes(toState))\n    {\n      throw new Error(\"State \\'\" + toState + \"\\' does not exist.\");\n    }\n\n    //Check if already exists...\n    for(const transition of this._transitions)\n    {\n      if (transition[SRC] == fromState && transition[SYMBOL] == symbol && transition[DST] == toState)\n      {\n        return;\n      }\n    }\n\n    //Create new transition\n    this._transitions.push([fromState, symbol, toState]);\n  }\n\n  deleteTransition(fromState, toState, symbol=null)\n  {\n    for(let i = this._transitions.length - 1; i >= 0; --i)\n    {\n      const transition = this._transitions[i];\n      if (transition[SRC] == fromState && transition[DST] == toState)\n      {\n        //Delete if src, dst, and symbols match... or if deleting all symbols\n        if (symbol == null || transition[SYMBOL] == symbol)\n        {\n          this._transitions.splice(i, 1);\n        }\n      }\n    }\n  }\n\n  newSymbol(symbol)\n  {\n    if (this._customAlphabet.includes(symbol))\n    {\n      throw new Error(\"Symbol \\'\" + symbol + \"\\' already added to alphabet.\");\n    }\n\n    this._customAlphabet.push(symbol);\n  }\n\n  deleteSymbol(symbol)\n  {\n    if (!this._customAlphabet.includes(symbol))\n    {\n      throw new Error(\"Unable to remove symbol \\'\" + symbol + \"\\'.\");\n    }\n\n    this._customAlphabet.splice(this._customAlphabet.indexOf(symbol), 1);\n  }\n\n  setStartState(state)\n  {\n    if (this._states.length <= 0)\n    {\n      throw new Error(\"Not enough states.\");\n    }\n\n    if (!this._states.includes(state))\n    {\n      throw new Error(\"State \\'\" + state + \"\\' does not exist.\");\n    }\n\n    if (this.getStartState() == state) return;\n\n    this._states.splice(this._states.indexOf(state), 1);\n    this._states.unshift(state);\n  }\n\n  setFinalState(state, isFinal=true)\n  {\n    if (!this._states.includes(state))\n    {\n      throw new Error(\"State \\'\" + state + \"\\' does not exist.\");\n    }\n\n    if (isFinal)\n    {\n      if (this._finalStates.includes(state)) return;\n\n      this._finalStates.push(state);\n    }\n    else\n    {\n      if (!this._finalStates.includes(state)) return;\n      this._finalStates.splice(this._finalStates.indexOf(state), 1);\n    }\n  }\n\n  doTransition(state, symbol)\n  {\n    for(const transition of this._transitions)\n    {\n      if (transition[SRC] == state && transition[SYMBOL] == symbol)\n      {\n        return transition[DST];\n      }\n    }\n    return null;\n  }\n\n  isFinalState(state)\n  {\n    return this._finalStates.includes(state);\n  }\n\n  hasState(state)\n  {\n    return this._states.includes(state);\n  }\n\n  getStates()\n  {\n    return this._states;\n  }\n\n  //Is the same as isAlphabet if the user did not add custom symbols\n  isUsedAlphabet(symbol)\n  {\n    for(const transition of this._transitions)\n    {\n      if (transition[SYMBOL] == symbol)\n      {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  //Includes custom user-defined symbols (from newSymbol)\n  isAlphabet(symbol)\n  {\n    for(const s of this._customAlphabet)\n    {\n      if (s == symbol) return true;\n    }\n\n    return this.isUsedAlphabet(symbol);\n  }\n\n  getUsedAlphabet(dst=[])\n  {\n    const result = dst;\n    for(const transition of this._transitions)\n    {\n      const symbol = transition[SYMBOL];\n      if (symbol.length > 0 && !result.includes(symbol))\n      {\n        result.push(symbol);\n      }\n    }\n    return result;\n  }\n\n  getAlphabet(dst=[])\n  {\n    const result = dst;\n    for(const s of this._customAlphabet)\n    {\n      result.push(s);\n    }\n    return this.getUsedAlphabet(result);\n  }\n\n  getOutgoingTransitions(state=null, dst=[])\n  {\n    const result = dst;\n    for(const transition of this._transitions)\n    {\n      if (transition[SRC] == state)\n      result.push(transition);\n    }\n    return result;\n  }\n\n  getTransitions()\n  {\n    return this._transitions;\n  }\n\n  getStartState()\n  {\n    return this._states.length <= 0 ? null : this._states[0];\n  }\n\n  getFinalStates()\n  {\n    return this._finalStates;\n  }\n\n  isValidDFA()\n  {\n    const alphabet = this.getAlphabet();\n    const foundSymbols = new Array(alphabet.length);\n    foundSymbols.fill(false);\n\n    for(const state of this._states)\n    {\n      //Get all outgoing transitions\n      const transitions = this.getOutgoingTransitions(state);\n      for(const transition of transitions)\n      {\n        const index = alphabet.indexOf(transition[1]);\n        if (foundSymbols[index] == false)\n        {\n          foundSymbols[index] = true;\n        }\n        else\n        {\n          //Found duplicate\n          return false;\n        }\n      }\n\n      //Reset foundSymbols for next state\n      const length = foundSymbols.length;\n      for(let i = 0; i < length; ++i)\n      {\n        if (foundSymbols[i] == false)\n        {\n          //Found missing symbol for state\n          return false;\n        }\n        foundSymbols[i] = false;\n      }\n    }\n\n    return true;\n  }\n\n  toJSON()\n  {\n    const result = {};\n    if (this instanceof DFA) result.type = \"DFA\";\n    else if (this instanceof NFA) result.type = \"NFA\";\n    else result.type = \"FSA\";\n    result.states = this._states.slice();\n    result.alphabet = this._customAlphabet.slice();\n    result.usedAlphabet = this.getUsedAlphabet();\n    result.transitions = this._transitions.slice();\n    result.startState = this.getStartState();\n    result.finalStates = this._finalStates.slice();\n\n    return result;\n  }\n}\n\nexport default FSA;\n","export const EMPTY = '\\u03B5';\nexport const ARROW = '\\u2192';\nexport const EMPTY_SET = '\\u2205';\n\n//'\\u03BB' = LAMBDA\n","import FSA from './FSA.js';\nimport { EMPTY } from './Symbols.js';\n\nconst SRC = 0;\nconst SYMBOL = 1;\nconst DST = 2;\n\nclass NFA extends FSA\n{\n  constructor()\n  {\n    super();\n  }\n\n  //Override\n  getUsedAlphabet(dst=[])\n  {\n    const result = dst;\n    for(const transition of this._transitions)\n    {\n      const symbol = transition[SYMBOL];\n      if (!result.includes(symbol) && symbol != EMPTY)\n      {\n        result.push(symbol);\n      }\n    }\n    return result;\n  }\n\n  //Override\n  doTransition(state, symbol, dst=[])\n  {\n    const result = dst;\n    for(const transition of this._transitions)\n    {\n      if (transition[SRC] == state && transition[SYMBOL] == symbol)\n      {\n        result.push(transition[DST]);\n      }\n    }\n    return result;\n  }\n\n  doClosureTransition(state, dst=[])\n  {\n    const result = dst;\n    result.push(state);\n    for(let i = 0; i < result.length; ++i)\n    {\n      const transitions = this.getOutgoingTransitions(result[i]);\n      for(const transition of transitions)\n      {\n        if (transition[SYMBOL] == EMPTY)\n        {\n          const dst = transition[DST];\n          if (!result.includes(dst))\n          {\n            result.push(dst);\n          }\n        }\n      }\n    }\n    return result;\n  }\n\n  doTerminalTransition(state, symbol, dst=[])\n  {\n    const result = dst;\n    for(const transition of this._transitions)\n    {\n      if (transition[SRC] == state && transition[SYMBOL] == symbol)\n      {\n        //Get closure on destination states\n        const states = this.doClosureTransition(transition[DST]);\n        for(const s of states)\n        {\n          if (!result.includes(s))\n          {\n            result.push(s);\n          }\n        }\n      }\n    }\n\n    return result;\n  }\n\n    getPowerSet() {\n        var ps = [[]];\n        var nfaStates = this.getStates();\n        for(var i=0; i < nfaStates.length; i++) {\n            for(var j=0, len = ps.length; j < len; j++) {\n                ps.push(ps[j].concat(nfaStates[i]));\n            }\n        }\n        return ps;\n    }\n}\n\nexport default NFA;\n","import React from 'react';\nimport './TransitionTable.css';\n\nimport InfoBlock from '../infoblock/InfoBlock.js';\nimport NFA from 'machine/NFA.js';\nimport { EMPTY } from 'machine/Symbols.js';\n\nconst SRC = 0;\nconst SYMBOL = 1;\nconst DST = 2;\n\nconst SYMBOL_AXIS = \"symbols\";\nconst STATE_AXIS = \"states\";\n\nclass TransitionTable extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.state = {\n      rowAxis: SYMBOL_AXIS\n    }\n  }\n\n  render()\n  {\n    const machineBuilder = this.props.machineBuilder;\n    const machine = machineBuilder.getMachine();\n    const states = machine.getStates();\n    const alphabet = machine.getAlphabet();\n    const transitions = machine.getTransitions();\n    const rowAxisType = this.state.rowAxis;\n    const isNFAMachine = machineBuilder.getMachineType() == \"NFA\";\n    const hasEmptyColumn = rowAxisType === SYMBOL_AXIS && isNFAMachine;\n\n    return <InfoBlock title={I18N.toString(\"component.transitiontable.title\")}>\n      <div className=\"transitiontable-container\">\n        <table className=\"transitiontable\">\n          <tbody>\n            <tr>\n              <th className=\"emptycell\">\n                <button className=\"panel-button\" onClick={()=>\n                  this.setState((prev, props)=>{\n                    return {\n                      rowAxis: prev.rowAxis == SYMBOL_AXIS ? STATE_AXIS : SYMBOL_AXIS\n                    };\n                  })}>\n                  {this.state.rowAxis == SYMBOL_AXIS ? \"Q/\\u03A3\" : \"Q/Q\"}\n                </button>\n              </th>\n              {\n                rowAxisType === SYMBOL_AXIS ?\n                  alphabet.map((e, i)=><th key={e} scope=\"col\" className=\"col\">{e}</th>) :\n                rowAxisType === STATE_AXIS ?\n                  states.map((e, i)=><th key={e} scope=\"col\" className=\"col\">{e}</th>) :\n                null\n              }\n              {\n                hasEmptyColumn &&\n                  <th scope=\"col\">{EMPTY}</th>\n              }\n            </tr>\n            {\n              states.map((e, i)=><tr key={e}>\n                <th scope=\"row\" className=\"row\">{e}</th>\n                {\n                  rowAxisType === SYMBOL_AXIS ?\n                    alphabet.map((symbol, i) => {\n                      let className = \"\";//TODO: machine.isFinalState(e) ? \"accept\" : \"\";\n                      const result = getDestinationFromSourceAndSymbol(machine, e, symbol, isNFAMachine);\n                      if (!isNFAMachine && (result.startsWith(\"{\") || result == \"-\"))\n                      {\n                        className += \" error\";\n                      }\n                      return <td key={e + \",\" + symbol} className={className}>\n                        {result}\n                      </td>;\n                    }) :\n                  rowAxisType === STATE_AXIS ?\n                    states.map((dst, i) => {\n                      const result = getSymbolFromSourceAndDestination(machine, e, dst);\n                      return <td key={e + \",\" + dst}>\n                        {result}\n                      </td>;\n                    }) :\n                  null\n                }\n                {\n                  hasEmptyColumn &&\n                    <td>{getDestinationFromSourceAndSymbol(machine, e, EMPTY)}</td>\n                }\n              </tr>)\n            }\n          </tbody>\n        </table>\n      </div>\n    </InfoBlock>;\n  }\n}\n\nfunction getDestinationFromSourceAndSymbol(machine, src, symbol, isSet=true)\n{\n  const result = machine.doTransition(src, symbol);\n\n  //Assumes that the machine is always an NFA, therefore the result is an array\n  if (Array.isArray(result))\n  {\n    return !isSet && result.length == 1 ?\n      result[0] :\n      result.length > 0 ?\n      \"{\" + result.join(\", \") + \"}\" : \"-\";\n  }\n  else\n  {\n    return result || \"-\";\n  }\n}\n\nfunction getSymbolFromSourceAndDestination(machine, src, dst)\n{\n  const result = [];\n  const transitions = machine.getTransitions();\n  for(const transition of transitions)\n  {\n    if (transition[SRC] == src && transition[DST] == dst)\n    {\n      result.push(transition[SYMBOL]);\n    }\n  }\n\n  if (result.length === 1)\n  {\n    return result[0];\n  }\n  else if (result.length > 0)\n  {\n    return \"{\" + result.join(\", \") + \"}\";\n  }\n  else\n  {\n    return \"-\";\n  }\n}\n\nexport default TransitionTable;\n","import React from 'react';\nimport './TransitionFunction.css';\n\nimport InfoBlock from '../infoblock/InfoBlock';\nimport { EMPTY } from 'machine/Symbols.js';\n\nclass TransitionFunction extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const machineBuilder = this.props.machineBuilder;\n    const machine = machineBuilder.getMachine();\n    const states = machine.getStates();\n    const alphabet = machine.getAlphabet().sort();\n    let isNFA = machineBuilder.getMachineType() == \"NFA\";\n    return(\n        <InfoBlock title=\"Transition Chart\">\n          <div className=\"transitionfunction-container\">\n            <table className=\"transitionfunction-table\">\n              <tbody>\n                <tr>\n                  <th>Q{\"\\u00d7\"}&Sigma;</th>\n                  <th>{isNFA ? \"\\u2118(Q)\" : \"Q\"}</th>\n                </tr>\n                {\n                  states.map((state, i) => {\n                    let emptrans = machine.doTransition(state, EMPTY);\n                    let empclassName = \"\";\n\n                    let transitions = alphabet.map((symbol, j) => {\n                      let className = \"\";\n                      let trans = machine.doTransition(state, symbol);\n                      if(isNFA && !trans.length) return;\n                      if(!isNFA && !trans.length) {\n                        className = \"error\";\n                        trans = \"-\";\n                      }\n                      if(!isNFA && trans.length > 1) {\n                        className = \"error\";\n                        trans = \"{\" + trans + \"}\"\n                      }\n                      trans = isNFA ? \"{\" + trans + \"}\" : \"\" + trans;\n                      return <tr key={\"\"+state+symbol}>\n                          <td className=\"transitionfunction-key\">{\"(\" + state + \",\" + symbol + \")\"}</td>\n                          <td className={\"transitionfunction-value \" + className}>{trans}</td>\n                        </tr>\n                    });\n\n                    if(emptrans.length > 0) {\n                      if(!isNFA) {\n                        empclassName = \"error\";\n                      }\n                      const addBrac = isNFA || emptrans.length > 1;\n                      emptrans = addBrac ? \"{\" + emptrans + \"}\" : \"\" + emptrans;\n                      transitions.unshift(\n                          <tr key={\"\"+state+EMPTY}>\n                            <td className={\"transitionfunction-key \" + empclassName}>{\"(\" + state + \",\" + EMPTY + \")\"}</td>\n                            <td className=\"transitionfunction-value\">{emptrans}</td>\n                          </tr>\n                      );\n                    }\n                    return transitions;\n                  })\n                }\n              </tbody>\n            </table>\n          </div>\n        </InfoBlock>\n    );\n  }\n}\n\nexport default TransitionFunction;\n","import React from 'react';\nimport './FormalDefinition.css';\nimport { EMPTY } from 'machine/Symbols.js';\n\nimport { EMPTY_SET, ARROW } from 'machine/Symbols.js';\n\nconst EQUAL = \"=\";\nconst DELTA = \"\\u03b4\";\n\nclass FormalDefinition extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const machineBuilder = this.props.machineBuilder;\n    const machine = machineBuilder.getMachine();\n    const states = machine.getStates();\n    const finalStates = machine.getFinalStates();\n    const alphabet = machine.getAlphabet().sort();\n    let isNFA = machineBuilder.getMachineType() == \"NFA\";\n    return <div className=\"formaldef-container\">\n      <h2>{\"M = (Q, \\u03A3, \\u03b4, q0, F)\"}</h2>\n      <div>\n        <h3>Q =</h3>\n        <span className=\"formaldef-values\">\n          {states.length > 0 ? \"{ \" + states.join(\", \") + \" }\" : EMPTY_SET}\n        </span>\n      </div>\n      <div>\n        <h3>&Sigma; =</h3>\n        <span className=\"formaldef-values\">\n          {alphabet.length > 0 ? \"{ \" + alphabet.join(\", \") + \" }\" : EMPTY_SET}\n        </span>\n      </div>\n      <div>\n        <h3>{DELTA}</h3>\n        <div className=\"formaldef-values\">\n          {\n            states.map((state, i) => {\n              let emptrans = machine.doTransition(state, EMPTY);\n              let empclassName = \"\";\n\n              let transitions = alphabet.map((symbol, j) => {\n                let className = \"\";\n                let trans = machine.doTransition(state, symbol);\n                if(isNFA && !trans.length) return;\n                if(!isNFA && !trans.length) {\n                  className = \"error\";\n                  trans = \"-\";\n                }\n                if(!isNFA && trans.length > 1) {\n                  className = \"error\";\n                  trans = \"{ \" + trans + \" }\"\n                }\n                trans = isNFA ? \"{ \" + trans + \" }\" : \"\" + trans;\n                return <div key={\"\"+state+symbol} className={className}>\n                      {DELTA + \"( ( \" + state + \", \" + symbol + \" ) )\" + \" \" + EQUAL + \" \" + trans}\n                </div>\n              });\n\n              if(emptrans.length > 0) {\n                if(!isNFA) {\n                  empclassName = \"error\";\n                }\n                const addBrac = isNFA || emptrans.length > 1;\n                emptrans = addBrac ? \"{ \" + emptrans + \" }\" : \"\" + emptrans;\n                transitions.unshift(\n                    <div key={\"\" + state + EMPTY} className={empclassName}>\n                      {DELTA + \"( ( \" + state + \", \" + EMPTY + \" ) )\" + \" \" + EQUAL + \" \" + emptrans}\n                    </div>\n                );\n              }\n              return transitions;\n            })\n          }\n          {\n            isNFA && <div id=\"formaldef-otherinputs\">\n              <div>{\"For all other inputs (q, x),\"}</div>\n              <div>{DELTA + \"( (q, x) )\" + \" \" + EQUAL + \" \" + EMPTY_SET}</div>\n            </div>\n          }\n        </div>\n      </div>\n      <div>\n        <h3>q0 =</h3>\n        <span className=\"formaldef-values\">\n          {states[0]}\n        </span>\n      </div>\n      <div>\n        <h3>F =</h3>\n        <span className=\"formaldef-values\">\n          {finalStates.length > 0 ? \"{ \" + finalStates.join(\",\") + \" }\" : EMPTY_SET}\n        </span>\n      </div>\n    </div>;\n  }\n}\n\nexport default FormalDefinition;\n","import React from 'react';\nimport '../Panel.css';\nimport './OverviewPanel.css';\n\nimport Config from 'config.js';\n\nimport FormattedInput from 'system/formattedinput/FormattedInput.js';\n\nimport StatesList from './stateslist/StatesList.js';\nimport AlphabetList from './alphabetlist/AlphabetList.js';\nimport TransitionTable from './transitiontable/TransitionTable.js';\nimport TransitionFunction from './transitionfunction/TransitionFunction.js';\nimport FormalDefinition from \"./formaldefinition/FormalDefinition\";\n\nclass OverviewPanel extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.container = null;\n\n    this.state = {\n      viewFormal: false\n    };\n\n    this.onChangeMachineType = this.onChangeMachineType.bind(this);\n    this.onAutoLayout = this.onAutoLayout.bind(this);\n\n    this.onChangeAutoRename = this.onChangeAutoRename.bind(this);\n    this.onSubmitAutoStatePrefix = this.onSubmitAutoStatePrefix.bind(this);\n    this.onAutoStateFormat = this.onAutoStateFormat.bind(this);\n\n    this.switchDefinition = this.switchDefinition.bind(this);\n  }\n\n  onAutoLayout(e)\n  {\n    const graphController = this.props.graphController;\n    graphController.applyAutoLayout();\n  }\n\n  onChangeMachineType(e)\n  {\n    const value = e.target.value;\n    const machineController = this.props.machineController;\n    machineController.changeMachineTo(value);\n  }\n\n  onChangeAutoRename(e)\n  {\n    const machineBuilder = this.props.machineController.getMachineBuilder();\n    machineBuilder.setAutoRenameNodes(e.target.checked);\n  }\n\n  onSubmitAutoStatePrefix(next, prev)\n  {\n    const labeler = this.props.machineController.getMachineBuilder().getLabeler();\n    if (labeler.prefix != next)\n    {\n      labeler.prefix = next;\n      labeler.sortDefaultNodeLabels();\n    }\n  }\n\n  onAutoStateFormat(value)\n  {\n    return value && value.length > 0 ? value : Config.STR_STATE_LABEL;\n  }\n\n  switchDefinition()\n  {\n    this.setState((prev, props) => {\n      return { viewFormal: !prev.viewFormal };\n    });\n  }\n\n  render()\n  {\n    const graphController = this.props.graphController;\n    const machineController = this.props.machineController;\n\n    const graph = graphController.getGraph();\n    const machineBuilder = machineController.getMachineBuilder();\n\n    return <div className=\"panel-container\" id=\"overview\" ref={ref=>this.container=ref} style={this.props.style}>\n      <div className=\"panel-title\">\n        <h1>{I18N.toString(\"component.overview.title\")}</h1>\n      </div>\n        <div className=\"panel-content\">\n          <select className=\"machine-type panel-select\"\n            value={machineBuilder.getMachineType()}\n            onChange={this.onChangeMachineType}>\n            <option value=\"DFA\">DFA</option>\n            <option value=\"NFA\">NFA</option>\n          </select>\n\n          {this.state.viewFormal &&\n            <FormalDefinition machineBuilder={machineBuilder}/>}\n\n          {\n            !this.state.viewFormal &&\n            <div>\n              <div>\n                <div className=\"graphinfo-important\">\n                  <StatesList graphController={graphController}/>\n                  <AlphabetList machineController={machineController}/>\n                </div>\n                <div className=\"graphinfo\">\n                  <TransitionFunction machineBuilder={machineBuilder}/>\n                  <TransitionTable machineBuilder={machineBuilder}/>\n                </div>\n              </div>\n              <hr/>\n\n              {/*State Labeling*/}\n              <div style={{paddingBottom: \"0.5em\"}}>\n                <h3 style={{marginBottom: \"0\"}}>State Labels</h3>\n                <div style={{display: \"flex\", flexDirection: \"row\"}}>\n                  <div className=\"statetag-container\">\n                    <FormattedInput defaultValue={machineBuilder.getLabeler().prefix} style={{width: \"4em\"}} formatter={this.onAutoStateFormat} captureOnExit=\"save\" onSubmit={this.onSubmitAutoStatePrefix}/>\n                  </div>\n                  <select style={{\n                      background: \"none\",\n                      outline: \"none\",\n                      border: \"none\",\n                      padding: \"0\",\n                      margin: \"0\",\n                      appearance: \"none\",\n                      color: \"white\"\n                    }} disabled={true}>\n                    <option>{\"0-9\"}</option>\n                    <option>{\"a-z\"}</option>\n                    <option>{\"A-Z\"}</option>\n                  </select>\n                </div>\n                <div className=\"panel-checkbox\">\n\n                  <input type=\"checkbox\" id=\"auto-statename\"\n                    onChange={this.onChangeAutoRename}\n                    checked={machineBuilder.shouldAutoRenameNodes()}/>\n                  <label htmlFor=\"auto-statename\">{I18N.toString(\"options.autolabel\")}</label>\n                </div>\n              </div>\n\n              <hr/>\n\n              <button className=\"panel-button\" onClick={this.onAutoLayout} disabled={graph.isEmpty()}>\n                {I18N.toString(\"action.overview.autolayout\")}\n              </button>\n            </div>\n          }\n\n          <button className=\"panel-button\" onClick={this.switchDefinition}>\n            {this.state.viewFormal ? \"Back\" : \"View Definition\"}\n          </button>\n        </div>\n      <div className=\"panel-bottom\"></div>\n    </div>;\n  }\n}\nOverviewPanel.UNLOCALIZED_NAME = \"component.overview.title\";\n\nexport default OverviewPanel;\n","import React from 'react';\nimport './LabelEditor.css';\n\nimport Config from 'config.js';\nimport { EMPTY } from 'machine/Symbols.js';\n\nimport FormattedInput from 'system/formattedinput/FormattedInput.js';\n\n//TODO: This is equivalent to 4em for toolbar height\nconst LABEL_OFFSET_Y = -64;\nconst EDITOR_OFFSET_Y = -36;\nconst DELETE_KEY = 8;\nconst DELETE_FORWARD_KEY = 46;\n\nconst RECOMMENDED_SYMBOLS = [\"0\", \"1\"];\nconst DEFAULT_SYMBOLS = [EMPTY];\n\nconst EDGE_SYMBOL_SEPARATOR = Config.EDGE_SYMBOL_SEPARATOR;\n\nclass LabelEditor extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.parentElement = null;\n    this.inputElement = null;\n\n    //HACK: this is so if the click is focused back to the label editor, then it will NOT close\n    this._timer = null;\n    this._prevValue = \"\";\n\n    this.state = {\n      target: null,\n      callback: null\n    };\n\n    this.onContextMenu = this.onContextMenu.bind(this);\n    this.onFormat = this.onFormat.bind(this);\n    this.onSubmit = this.onSubmit.bind(this);\n  }\n\n  openEditor(targetEdge, defaultText=null, replace=true, callback=null)\n  {\n    //If not yet initilized, ignore any editor access\n    if (!this.inputElement || !this.parentElement)\n    {\n      throw new Error(\"Trying to open editor that has not yet mounted\");\n    }\n\n    this.setState((prev, props) => {\n      return {\n        target: targetEdge,\n        callback: callback\n      };\n    });\n\n    this.inputElement.resetValue(targetEdge.getEdgeLabel(), () => {\n      if (defaultText) this.inputElement.setValue(defaultText);\n\n      this._prevValue = targetEdge.getEdgeLabel();\n      this.parentElement.focus();\n      this.inputElement.focus(replace);\n    });\n  }\n\n  closeEditor(saveOnExit=false)\n  {\n    //If not yet initilized, ignore any editor access\n    if (!this.inputElement || !this.parentElement)\n    {\n      throw new Error(\"Trying to open editor that has not yet mounted\");\n    }\n\n    //Save data\n    if (this.state.target !== null)\n    {\n      if (saveOnExit)\n      {\n        let value = this.inputElement.value;\n        if (!value) value = EMPTY;\n\n        this.state.target.setEdgeLabel(value);\n      }\n      else\n      {\n        if (!this.state.target.getEdgeLabel())\n        {\n          this.state.target.setEdgeLabel(EMPTY);\n\n          //Delete it since it is not a valid edge\n          this.props.graphController.getGraph().deleteEdge(this.state.target);\n        }\n      }\n\n      this.setState({target: null});\n\n      if (this.state.callback) this.state.callback();\n    }\n\n    //Reset label editor\n    this.inputElement.blur();\n  }\n\n  hasFocus()\n  {\n    return this.inputElement.hasFocus();\n  }\n\n  isEditorOpen()\n  {\n    return this.state.target !== null;\n  }\n\n  onContextMenu(e)\n  {\n    e.preventDefault();\n    e.stopPropagation();\n  }\n\n  appendSymbol(symbol)\n  {\n    this.inputElement.appendValue(symbol, EDGE_SYMBOL_SEPARATOR);\n    this.inputElement.focus(false);\n  }\n\n  onSubmit(newValue, prevValue)\n  {\n    //this._prevValue = newValue;\n    //If the value has changed or the value remained empty...\n    if (newValue != prevValue)\n    {\n      //this.closeEditor(true);\n    }\n    else\n    {\n      //Will close due to timer...\n      //this.closeEditor(false);\n    }\n  }\n\n  onFormat(value)\n  {\n    //return this.props.machineController.getMachineBuilder().formatAlphabetString(value, true);\n    return this.props.machineController.getLabelFormatter().call(null, value, true);\n  }\n\n  render()\n  {\n    const inputController = this.props.inputController;\n    const viewport = inputController.getViewport();\n    const graphController = this.props.graphController;//This is used in closeEditor()\n    const machineController = this.props.machineController;//This is also used in callbacks\n    const screen = this.props.screen;\n\n    const targetStyle = {\n      visibility: \"hidden\"\n    };\n\n    const target = this.state.target;\n\n    if (target)\n    {\n      targetStyle.visibility = \"visible\";\n\n      //Assumes target is an instance of Edge\n      const center = target.getCenterPoint();\n      const screenPos = transformViewToScreen(screen,\n        center.x + viewport.getOffsetX(),\n        center.y + viewport.getOffsetY());\n      const x = screenPos.x;\n      const y = screenPos.y + LABEL_OFFSET_Y + EDITOR_OFFSET_Y;\n      const offsetX = -(this.parentElement.offsetWidth / 2);\n      const offsetY = -(this.parentElement.offsetHeight / 2);\n\n      targetStyle.top = (y + offsetY) + \"px\";\n      targetStyle.left = (x + offsetX) + \"px\";\n    }\n\n    const usedAlphabet = machineController.getMachineBuilder().getMachine().getAlphabet();\n\n    return <div className=\"bubble\" id=\"label-editor\" ref={ref=>this.parentElement=ref}\n      tabIndex={\"0\"/*This is to allow div's to focus/blur*/}\n      style={targetStyle}\n      onContextMenu={this.onContextMenu}\n      onFocus={(e)=>{\n        //HACK: delete the timer that will exit labelEditor\n        clearTimeout(this._timer);\n      }}\n      onBlur={(e)=>{\n        //HACK: start the timer that will exit labelEditor if not return focus\n        this._timer = setTimeout(() => this.closeEditor(true), 10);\n      }}>\n      <FormattedInput className=\"label-editor-input\" ref={ref=>this.inputElement=ref}\n        formatter={this.onFormat}\n        onSubmit={this.onSubmit}\n        captureOnExit={\"none\"}/>\n      <div className=\"label-editor-tray\">\n        {\n          usedAlphabet &&\n          <span className=\"label-editor-tray-used\">\n            {\n              usedAlphabet.map((e, i) => {\n                if (e.length < 1) return null;\n                return <button key={i} onClick={ev=>this.appendSymbol(e)}>{e}</button>\n              })\n            }\n          </span>\n        }\n        <span className=\"label-editor-tray-default\">\n          {\n            usedAlphabet &&\n            usedAlphabet.length <= 1 &&\n            RECOMMENDED_SYMBOLS.map((e, i) => {\n              return <button key={i} onClick={ev=>this.appendSymbol(e)}>\n              {e}\n              </button>;\n            })\n          }\n          {\n            DEFAULT_SYMBOLS.map((e, i) => {\n              return <button key={i} onClick={ev=>this.appendSymbol(e)}>\n              {e}\n              </button>;\n            })\n          }\n        </span>\n      </div>\n    </div>;\n  }\n}\n\nfunction transformViewToScreen(svg, x, y)\n{\n  const ctm = svg.getScreenCTM();\n  return {\n    x: (x * ctm.a) + ctm.e,\n    y: (y * ctm.d) + ctm.f\n  };\n}\n\nexport default LabelEditor;\n","import React from 'react';\nimport './TrashCan.css';\n\nimport Viewport from './Viewport.js';\n\nclass TrashCan extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.state = {\n      staticTrash: false\n    };\n  }\n\n  onTrashEnter(e)\n  {\n    if (this.state.staticTrash) return;\n    this.props.inputController.setTrashMode(true);\n\n    //Enable mode: dangerous\n    this.props.viewport.setState((prev, props) => {\n      return {mode: Viewport.DANGEROUS};\n    });\n  }\n\n  onTrashLeave(e)\n  {\n    if (this.state.staticTrash) return;\n    this.props.inputController.setTrashMode(false);\n\n    //Disable mode: dangerous\n    this.props.viewport.setState((prev, props) => {\n      return {mode: Viewport.NORMAL};\n    });\n  }\n\n  onTrashClick(e)\n  {\n    e.stopPropagation();\n    e.preventDefault();\n\n    this.setState((prev, props) => {\n      const result = !prev.staticTrash;\n      this.props.inputController.setTrashMode(result);\n\n      //Enable mode: dangerous\n      this.props.viewport.setState((prev, props) => {\n        return {mode: result ? Viewport.DANGEROUS : Viewport.NORMAL};\n      })\n\n      return {\n        staticTrash: result\n      };\n    });\n  }\n\n  render()\n  {\n    const inputController = this.props.inputController;\n    const inputAdapter = inputController.getAdapter();\n\n    return <svg id=\"trash-btn\"\n      className={(inputController.isTrashMode() ? \"danger \" : \"\") +\n        (inputAdapter.isUsingTouch() && inputAdapter.isDragging() ? \"hidden\" : \"\")}\n      width=\"24\" height=\"24\"\n      viewBox=\"0 0 24 24\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      onMouseEnter={this.onTrashEnter.bind(this)}\n      onMouseLeave={this.onTrashLeave.bind(this)}\n      onClick={this.onTrashClick.bind(this)}>\n      <path d={\"M3 6v18h18v-18h-18zm5 14c0 .552-.448 1-1 1s-1-.448-1-1v-10c0-.552.448-1 \" +\n      \"1-1s1 .448 1 1v10zm5 0c0 .552-.448 1-1 1s-1-.448-1-1v-10c0-.552.448-1 1-1s1 .448 1 \" +\n      \"1v10zm5 0c0 .552-.448 1-1 1s-1-.448-1-1v-10c0-.552.448-1 1-1s1 .448 1 \" +\n      \"1v10zm4-18v2h-20v-2h5.711c.9 0 1.631-1.099 1.631-2h5.315c0 .901.73 2 1.631 2h5.712z\"}/>\n    </svg>;\n  }\n}\n\nexport default TrashCan;\n","import React from 'react';\n\nclass PlayIcon extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    return <svg className=\"play-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n      <path d=\"M8 5v14l11-7z\"/>\n      <path d=\"M0 0h24v24H0z\" fill=\"none\"/>\n    </svg>;\n  }\n}\n\nexport default PlayIcon;\n","import React from 'react';\n\nclass PauseIcon extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    return <svg className=\"pause-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n      <path d=\"M6 19h4V5H6v14zm8-14v14h4V5h-4z\"/>\n      <path d=\"M0 0h24v24H0z\" fill=\"none\"/>\n    </svg>;\n  }\n}\n\nexport default PauseIcon;\n","import React from 'react';\n\nclass StopIcon extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    return <svg className=\"stop-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n      <path d=\"M0 0h24v24H0z\" fill=\"none\"/>\n      <path d=\"M6 6h12v12H6z\"/>\n    </svg>;\n  }\n}\n\nexport default StopIcon;\n","import React from 'react';\n\nclass UndoIcon extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    return <svg className=\"undo-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n      <path d=\"M0 0h24v24H0z\" fill=\"none\"/>\n      <path d=\"M12.5 8c-2.65 0-5.05.99-6.9 2.6L2 7v9h9l-3.62-3.62c1.39-1.16 3.16-1.88 5.12-1.88 3.54 0 6.55 2.31 7.6 5.5l2.37-.78C21.08 11.03 17.15 8 12.5 8z\"/>\n    </svg>;\n  }\n}\n\nexport default UndoIcon;\n","import React from 'react';\n\nclass RedoIcon extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    return <svg className=\"redo-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n      <path d=\"M0 0h24v24H0z\" fill=\"none\"/>\n      <path d=\"M18.4 10.6C16.55 8.99 14.15 8 11.5 8c-4.65 0-8.58 3.03-9.96 7.22L3.9 16c1.05-3.19 4.05-5.5 7.6-5.5 1.95 0 3.73.72 5.12 1.88L13 16h9V7l-3.6 3.6z\"/>\n    </svg>;\n  }\n}\n\nexport default RedoIcon;\n","import React from 'react';\nimport './TestTray.css';\n\nimport IconButton from 'icons/IconButton.js';\nimport PlayIcon from 'icons/PlayIcon.js';\nimport PauseIcon from 'icons/PauseIcon.js';\nimport StopIcon from 'icons/StopIcon.js';\nimport UndoIcon from 'icons/UndoIcon.js';\nimport RedoIcon from 'icons/RedoIcon.js';\n\nconst MAX_STRING_PREV_LENGTH = 2;\nconst MAX_ELLIPSIS_COUNT = 3;\n\nclass TestTray extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    const graphController = this.props.graphController;\n    const tester = this.props.tester;\n    const testList = this.props.tester.inputList;\n    const testMode = this.props.tester.testMode;\n    const testInput = testList.getCurrentInput();\n    const testIndex = testMode.getCurrentTestStringIndex();\n\n    return <div className=\"test-tray-container\">\n      <div className=\"test-tray-input-string-container\">\n      {\n        testInput && testIndex >= 0 &&\n        testInput.value.split('').map((e, i) => {\n          const testOffset = testIndex - i;\n          if (testOffset > MAX_ELLIPSIS_COUNT + MAX_STRING_PREV_LENGTH) return;\n          if (testOffset > MAX_STRING_PREV_LENGTH)\n          {\n            return <span key={e + \".\" + i} className=\"test-tray-input-placeholder\">.</span>;\n          }\n          return <span key={e + \".\" + i}\n            className={\"test-tray-input-char\" +\n            (testIndex == i ? \" active\" : \"\")}>\n            {e}\n            </span>;\n        })\n      }\n      </div>\n      <div className=\"test-tray-control\">\n\n        <IconButton onClick={(e)=>{\n          testMode.onResume();\n        }} disabled={testMode.isRunning()}>\n          <PlayIcon/>\n        </IconButton>\n\n        <IconButton onClick = {(e)=>{\n          testMode.onPause();\n        }} disabled={!testMode.isRunning()}>\n          <PauseIcon/>\n        </IconButton>\n\n        <IconButton onClick = {(e)=>{\n          testMode.onPreviousStep();\n          /*if (testMode.targets.length > 0)\n          {\n            graphController.focusOnNodes(testMode.targets);\n          }*/\n        }} disabled={!testMode.hasPrevStep() || testMode.isSkipping()}>\n          <UndoIcon/>\n        </IconButton>\n\n        <IconButton onClick = {(e)=>{\n          testMode.onNextStep();\n          /*if (testMode.targets.length > 0)\n          {\n            graphController.focusOnNodes(testMode.targets);\n          }*/\n        }} disabled={!tester.testMode.hasNextStep() || testMode.isSkipping()}>\n          <RedoIcon/>\n        </IconButton>\n\n        <IconButton onClick={(e)=>{\n          tester.setStepByStepMode(false);\n        }}>\n          <StopIcon/>\n        </IconButton>\n\n        <div className=\"trash-placeholder\">{/*PLACEHOLDER for TRASH*/}</div>\n      </div>\n    </div>;\n  }\n}\n\nexport default TestTray;\n","import React from 'react';\n\nclass CreateIcon extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    return <svg className=\"create-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n      <path d=\"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z\"/>\n      <path d=\"M0 0h24v24H0z\" fill=\"none\"/>\n    </svg>;\n  }\n}\n\nexport default CreateIcon;\n","import React from 'react';\n\nclass MoveIcon extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    return <svg className=\"move-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n      <path d=\"M0 0h24v24H0z\" fill=\"none\"/>\n      <path d=\"M13,6V11H18V7.75L22.25,12L18,16.25V13H13V18H16.25L12,22.25L7.75,18H11V13H6V16.25L1.75,12L6,7.75V11H11V6H7.75L12,1.75L16.25,6H13Z\" />\n    </svg>;\n  }\n}\n\nexport default MoveIcon;\n","import React from 'react';\nimport './CursorMode.css';\n\nimport IconButton from 'icons/IconButton.js';\nimport CreateIcon from 'icons/CreateIcon.js';\nimport MoveIcon from 'icons/MoveIcon.js';\n\nclass CursorMode extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    const inputController = this.props.inputController;\n    const graphController = this.props.graphController;\n    const actionMode = inputController.isActionMode(graphController);\n\n    return <div id=\"cursor-btn\">\n      <IconButton id=\"action-mode\" className={actionMode ? \"active\" : \"\"}\n        onClick={() => inputController.setInputScheme(true)}\n        title={I18N.toString(\"cursor.actionmode\")}>\n        <CreateIcon/>\n      </IconButton>\n      <IconButton id=\"move-mode\" className={!actionMode ? \"active\" : \"\"}\n        onClick={() => inputController.setInputScheme(false)}\n        title={I18N.toString(\"cursor.movemode\")}>\n        <MoveIcon/>\n      </IconButton>\n    </div>;\n  }\n}\n\nexport default CursorMode;\n","import React from 'react';\nimport './Viewport.css';\n\nimport LabelEditor from './LabelEditor.js';\nimport TrashCan from './TrashCan.js';\nimport TestTray from './TestTray.js';\nimport CursorMode from './CursorMode.js';\n\nclass Viewport extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.ref = null;\n    this.labelEditor = null;\n\n    this.state = {\n      prevMode: Viewport.NORMAL,\n      mode: Viewport.NORMAL\n    };\n  }\n\n  render()\n  {\n    const inputController = this.props.inputController;\n    const graphController = this.props.graphController;\n    const machineController = this.props.machineController;\n    const tester = this.props.tester;\n    const screen = this.props.screen;\n\n    return <div className={\"viewport-container viewport-\" + this.state.mode} ref={ref=>this.ref=ref}>\n      <LabelEditor ref={ref=>this.labelEditor=ref}\n        inputController={inputController}\n        graphController={graphController}\n        machineController={machineController}\n        screen={screen}/>\n      {\n        tester.getStepByStepMode() ?\n        <div className=\"anchor-bottom-left\" style={{width: \"100%\"}}>\n          <TestTray tester={tester} graphController={graphController}/>\n        </div>\n        :\n        <span>\n          <div className=\"anchor-bottom-left\" style={{width: \"100%\"}}>\n            <CursorMode inputController={inputController} graphController={graphController}/>\n          </div>\n          <div className=\"anchor-bottom-right\">\n            <TrashCan inputController={inputController} viewport={this}/>\n          </div>\n        </span>\n      }\n    </div>;\n  }\n}\nViewport.NORMAL = \"normal\";\nViewport.WAITING = \"waiting\";\nViewport.TESTING = \"testing\";\nViewport.DANGEROUS = \"dangerous\";\n\nexport default Viewport;\n","class Downloader\n{\n  static downloadText(filename, data)\n  {\n    Downloader.downloadURL(filename, Downloader.getTextDataURI(data));\n  }\n\n  static downloadSVG(filename, filetype, svg, width, height)\n  {\n    const serializer = new XMLSerializer();\n    const svgString = serializer.serializeToString(svg);\n    const blob = new Blob([svgString], {type:'image/svg+xml'});\n    const url = URL.createObjectURL(blob);\n\n    const canvas = document.createElement('canvas');\n    const ctx = canvas.getContext(\"2d\");\n    const pixelRatio = window.devicePixelRatio || 1;\n    canvas.width = width * pixelRatio;\n    canvas.height = height * pixelRatio;\n    canvas.style.width = width + \"px\";\n    canvas.style.height = height + \"px\";\n    ctx.setTransform(pixelRatio, 0, 0, pixelRatio, 0, 0);\n\n    const image = new Image();\n    image.onload = () => {\n      ctx.drawImage(image, 0, 0);\n      URL.revokeObjectURL(url);\n\n      const imageURI = canvas.toDataURL('image/' + filetype).replace('image/' + filetype, 'image/octet-stream');\n      Downloader.downloadURL(filename + '.' + filetype, imageURI);\n    };\n    image.src = url;\n  }\n\n  static downloadURL(filename, url)\n  {\n    const element = document.createElement('a');\n    const headerIndex = url.indexOf(\";\");\n    url = url.substring(0, headerIndex + 1) + \"headers=Content-Disposition%3A%20attachment%3B%20filename=\" + filename + \";\" + url.substring(headerIndex + 1);\n    element.setAttribute('href', url);\n    element.setAttribute('download', filename);\n\n    element.style.display = \"none\";\n    document.body.appendChild(element);\n\n    element.click();\n    document.body.removeChild(element);\n  }\n\n  static getTextDataURI(data)\n  {\n    return 'data:text/plain; charset=utf-8,' + encodeURIComponent(data);\n  }\n}\n\nexport default Downloader;\n","import { EMPTY } from 'machine/Symbols.js';\nimport NFA from 'machine/NFA.js'\n\n//This ASSUMES that the passed-in machine is an NFA! (and not a DFA)\nexport function solveNFA(nfa, input)\n{\n  if (typeof input === 'string') input = input[Symbol.iterator]();\n\n  let cachedStates = [];\n  let cachedSymbols = [];\n  cachedStates.push({state: nfa.getStartState(), index: 0});\n  for (let currState of nfa.doClosureTransition(nfa.getStartState()))\n  {\n    cachedStates.push({state: currState , index: 0});\n  }\n  let checkedStates = [];\n  let symbol = null;\n\n  let counter = 0;\n\n  while(cachedStates.length > 0)\n  {\n    symbol = input.next().value;\n    let res = solveNFAbyStep(nfa, symbol, cachedStates, cachedSymbols, checkedStates);\n    if (res) return true;\n\n    //HACK: This is to stop any infinite loops! This will be fixed in the future!\n    ++counter;\n    if (counter > 1000)\n    {\n      return false;\n    }\n  }\n\n  return false;\n}\n\n//TODO: When an empty transition occurs, it does a closure transition.\n//The closure chain will be stored as a group\n//Any future transitions must not re-enter the group\nexport function solveNFAbyStep(nfa, symbol, cachedStates, cachedSymbols, checkedStates)\n{\n  //initialize variables\n  let state = null;\n  let nextStates = [];\n  let nextIndex = 0;\n\n  if (symbol != null)\n  {\n    cachedSymbols.push(symbol);\n  }\n\n  for(let cstate of cachedStates)\n  {\n    state = cstate.state;\n    symbol = cstate.index < cachedSymbols.length ? cachedSymbols[cstate.index] : null;\n\n    if (symbol != null)\n    {\n      //Read to next state...\n      nextIndex = cstate.index + 1;\n      for(let nextState of nfa.doTerminalTransition(state, symbol))\n      {\n        nextStates.push({state: nextState, index: nextIndex});\n      }\n    }\n    else\n    {\n      if (nfa.isFinalState(state)) return true;\n      checkedStates.push(state);\n    }\n\n    //Read none to next state...\n    nextIndex = cstate.index;\n    /*for(let nextState of nfa.doTransition(state,EMPTY))\n    {\n      if (checkedStates.includes(nextState)) continue;\n      if (symbol == null && nfa.isFinalState(nextState)) return true;\n\n      nextStates.push({state: nextState, index: nextIndex});\n    }*/\n  }\n  cachedStates.length = 0\n  cachedStates.push(...nextStates);\n  return false;\n}\n","import FSA from './FSA.js';\n\nconst SRC = 0;\nconst SYMBOL = 1;\nconst DST = 2;\n\nclass DFA extends FSA\n{\n  constructor()\n  {\n    super();\n  }\n\n  validate()\n  {\n    //TODO: Deprecate this\n    console.error(\"This is deprecated, please use FSA.isValidDFA()\");\n    return this.isValidDFA();\n  }\n\n  //Override default behavior\n  newTransition(fromState, toState, symbol)\n  {\n    if (!this._states.includes(fromState))\n    {\n      throw new Error(\"State \\'\" + fromState + \"\\' does not exist.\");\n    }\n\n    if (!this._states.includes(toState))\n    {\n      throw new Error(\"State \\'\" + toState + \"\\' does not exist.\");\n    }\n\n    for(const transition of this._transitions)\n    {\n      //Check if already exists...\n      if (transition[SRC] == fromState && transition[SYMBOL] == symbol && transition[DST] == toState)\n      {\n        return;\n      }\n      //Check if valid deterministic transition...\n      else if (transition[SRC] == fromState && transition[SYMBOL] == symbol)\n      {\n        throw new Error(\"Unable to create illegal nondeterministic transition for DFA.\");\n      }\n    }\n\n    //Create new transition\n    this._transitions.push([fromState, symbol, toState]);\n  }\n}\n\nexport default DFA;\n","import { solveDFA } from 'machine/util/solveDFA.js';\nimport { solveNFA, solveNFAbyStep } from 'machine/util/solveNFA.js';\n\nimport { DFA } from 'machine/DFA.js';\n\nconst STEPTIME = 500;\nconst SKIPTIME = 50;\n\nclass TestMode\n{\n  constructor(testingManager)\n  {\n    this.graphController = null;\n    this.machineController = null;\n\n    this.testingManager = testingManager;\n\n    this.targets = [];\n\n    this.history = [];\n    this.indexofString = -1;\n    this.result = false;\n\n    //for nfa use\n    this.cachedStates = [];\n    this.cachedSymbols = [];\n    this.checkedStates = [];\n    this.running = false;\n    this.started = false;\n    this.skipToEnd = false;\n\n    this.timer = null;\n\n    this.onNodeDestroy = this.onNodeDestroy.bind(this);\n  }\n\n  initialize(app)\n  {\n    this.graphController = app.graphController;\n    this.machineController = app.machineController;\n\n    //NOTE: This is not necessary because you can edit once in stepbystep mode\n    //this.graphController.getGraph().on(\"nodeDestroy\", this.onNodeDestroy);\n  }\n\n  destroy()\n  {\n    //this.graphController.getGraph().removeEventListener(\"nodeDestroy\", this.onNodeDestroy);\n  }\n\n  onNodeDestroy(node)\n  {\n    //this.targets.splice(this.targets.indexOf(node), 1);\n  }\n\n  onStart()\n  {\n    //Check the machine, if DFA, then it must be a valid DFA\n    /*if (this.machineController.getMachineBuilder().getMachineType() == \"DFA\")\n    {\n      const dfa = this.machineController.getMachineBuilder().toDFA();\n      if (!dfa.validate()) return;\n    }*/\n    this.prepareForNewTest();\n    this.started = true;\n    this.skipToEnd = false;\n  }\n\n  onResume()\n  {\n    //If at the end, restart!\n    if (!this.hasNextStep())\n    {\n      this.testingManager.inputList.resetTests(false);\n    }\n\n    this.running = true;\n\n    const step = () => {\n      if (this.running)\n      {\n        if (this.hasNextStep())\n        {\n          this.onNextStep();\n          this.timer = setTimeout(step, STEPTIME);\n        }\n        else\n        {\n          this.onPause();\n        }\n      }\n    };\n    this.timer = setTimeout(step, STEPTIME);\n  }\n\n  onPause()\n  {\n    this.running = false;\n  }\n\n  onStop()\n  {\n    this.targets.length = 0;\n\n    this.running = false;\n    this.started = false;\n    this.skipToEnd = false;\n  }\n\n  isRunning()\n  {\n    return this.running;\n  }\n\n  isStarted()\n  {\n    return this.started;\n  }\n\n  isSkipping()\n  {\n    return this.skipToEnd;\n  }\n\n  hasPrevStep()\n  {\n    return this.history.length > 0 ||\n      this.testingManager.inputList.hasPrevInput();\n  }\n\n  onPreviousStep()\n  {\n    if (this.history.length > 0)\n    {\n      const previous = this.history.pop();\n      this.targets.length = 0;\n      this.cachedStates.length = 0;\n      this.cachedSymbols.length = 0;\n      this.checkedStates.length = 0;\n\n      //Copy the old step\n      for(const target of previous.targets)\n      {\n        if (!target) throw new Error(\"Found null target\");\n\n        this.targets.push(target);\n      }\n      for(const state of previous.cachedStates)\n      {\n        this.cachedStates.push(state);\n      }\n      for(const symbol of previous.cachedSymbols)\n      {\n        this.cachedSymbols.push(symbol);\n      }\n      for(const state of previous.checkedStates)\n      {\n        this.checkedStates.push(state);\n      }\n\n      this.indexofString--;\n    }\n    else\n    {\n      this.indexofString = -1;\n      this.testingManager.inputList.prevInput();\n    }\n  }\n\n  hasNextStep()\n  {\n    return this.indexofString < this.testingManager.inputList.getCurrentInput().value.length ||\n      this.testingManager.inputList.hasNextInput();\n  }\n\n  onNextStep()\n  {\n    const testInput = this.testingManager.inputList.getCurrentInput();\n    const fsa = this.machineController.getMachineBuilder().getMachine();\n\n    //Get next character of current test string\n    this.indexofString += 1;\n\n    //If no more characters to get...\n    if(this.indexofString >= testInput.value.length)\n    {\n      //End of test string\n      //Run it one more time...\n      this.result = solveNFAbyStep(fsa, null, this.cachedStates, this.cachedSymbols, this.checkedStates);\n      testInput.setResult(this.result);\n\n      //If this is the last test input...\n      if (!this.testingManager.inputList.hasNextInput())\n      {\n        //End of test!\n        this.onPause();\n        return false;\n      }\n      else\n      {\n        const result = this.testingManager.inputList.nextInput();\n\n        //Stop the resume at each string\n        //this.running = false;\n\n        this.prepareForNewTest();\n        return true;\n      }\n    }\n    else\n    {\n      //Update history\n      const currentStep = this.getCurrentCache();\n      this.history.push(currentStep);\n\n      //Run it\n      let nextChar = testInput.value[this.indexofString];\n\n      this.result = solveNFAbyStep(fsa, nextChar, this.cachedStates, this.cachedSymbols, this.checkedStates);\n      //Update targets\n      this.targets.length = 0;\n\n      for(const state of this.cachedStates)\n      {\n        let node = this.graphController.getGraph().getNodeByLabel(state.state);\n        if (!node) throw new Error(\"Found null target\");\n\n        if (!this.targets.includes(node)) this.targets.push(node);\n      }\n\n      if (this.targets.length <= 0 && !this.running)\n      {\n        this.skipToEnd = true;\n        const skipFunc = () => {\n          if (this.skipToEnd)\n          {\n            this.indexofString += 1;\n            if (this.indexofString >= testInput.value.length)\n            {\n              this.skipToEnd = false;\n            }\n            else\n            {\n              setTimeout(skipFunc, SKIPTIME);\n            }\n          }\n        };\n        setTimeout(skipFunc, SKIPTIME);\n      }\n\n      return true;\n    }\n  }\n\n  getCurrentCache()\n  {\n    return {\n      targets: this.targets.slice(),\n      cachedStates: this.cachedStates.slice(),\n      cachedSymbols: this.cachedSymbols.slice(),\n      checkedStates: this.checkedStates.slice()\n    };\n  }\n\n  getCurrentTestStringIndex()\n  {\n    return this.indexofString + 1;\n  }\n\n  prepareForNewTest()\n  {\n    this.cachedStates.length = 0;\n\n    const graph = this.graphController.getGraph();\n    if (graph.isEmpty()) return;\n\n    const machine = this.machineController.getMachineBuilder().getMachine();\n\n    this.targets.length = 0;\n\n    let startState = machine.getStartState();\n    for (let curr_state of machine.doClosureTransition(startState))\n    {\n      this.cachedStates.push({state: curr_state, index: 0});\n      const node = graph.getNodeByLabel(curr_state);\n      if (!node) throw new Error(\"Found null target\");\n      this.targets.push(node);\n    }\n\n    this.cachedSymbols.length = 0;\n    this.checkedStates.length = 0;\n    this.indexofString = -1;\n    this.history.length = 0;\n\n    this.skipToEnd = false;\n  }\n}\n\nexport default TestMode;\n","export function guid()\n{\n  function s4()\n  {\n    return Math.floor((1 + Math.random()) * 0x10000).toString(16).substring(1);\n  }\n  return s4() + s4() + '-' + s4() + '-' + s4() + '-' + s4() + '-' + s4() + s4() + s4();\n};\n\nexport function lerp(a, b, dt)\n{\n  return a * (1 - dt) + b * dt;\n};\n","import { guid } from 'util/MathHelper.js';\n\nimport { solveNFA } from 'machine/util/solveNFA.js';\n\nconst SUCCESS = true;\nconst FAILURE = false;\nconst PENDING = null;\n\n//Only refer to input by index, NEVER by reference!\nclass TestingInputList\n{\n  constructor()\n  {\n    this.inputList = [];\n    this.addInput(\"\");\n\n    this.inputIndex = 0;\n  }\n\n  isEmpty()\n  {\n    for(const input of this.inputList)\n    {\n      if (input.value.length > 0)\n      {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  testByIndex(index, machine)\n  {\n    if (index < 0 || index >= this.inputList.length)\n    {\n      throw new Error(\"Cannot find test input for index\");\n    }\n\n    const input = this.inputList[index];\n    input.setResult(null);\n    //TODO: make this a promise\n    const result = solveNFA(machine, input.value);\n    input.setResult(result);\n    return result;\n  }\n\n  importTests(file)\n  {\n    const reader = new FileReader();\n    reader.onload = (event) => {\n      try\n      {\n        //The only time the first element is being removed (then replaced)\n        this.inputList.length = 0;\n        this.inputIndex = 0;\n\n        const testInputs = event.target.result.split(\"\\n\");\n        for(let testInput of testInputs)\n        {\n          testInput = testInput.trim();\n          if (testInput.length > 0)\n          {\n            this.addInput(testInput);\n          }\n        }\n\n        //Make sure a first element exists\n        if (this.inputList.length < 0)\n        {\n          this.addInput(\"\");\n        }\n      }\n      catch(e)\n      {\n        reader.abort();\n      }\n    };\n    reader.readAsText(file);\n  }\n\n  getTestsAsStrings()\n  {\n    return this.inputList.map((e, i) => e.value);\n  }\n\n  clearTests()\n  {\n    //Reset first element\n    const first = this.inputList[0];\n    first.value = \"\";\n    first.result = null;\n    first.dirty = true;\n\n    //Reset list\n    this.inputList.length = 1;\n    this.inputIndex = 0;\n  }\n\n  resetTests(markDirty=true)\n  {\n    this.inputIndex = 0;\n\n    if (markDirty)\n    {\n      for(const input of this.inputList)\n      {\n        input.dirty = true;\n      }\n    }\n  }\n\n  getTests()\n  {\n    return this.inputList;\n  }\n\n  addInput(value)\n  {\n    const input = {\n      value: value,\n      result: null,\n      dirty: true,\n      id: guid(),\n      setResult(result)\n      {\n        this.dirty = false;\n        this.result = result;\n      }\n    };\n\n    this.inputList.push(input);\n    return input;\n  }\n\n  getInputByIndex(index)\n  {\n    if (index < 0 || index >= this.inputList.length)\n    {\n      throw new Error(\"Cannot find test input for index\");\n    }\n\n    return this.inputList[index];\n  }\n\n  removeInputByIndex(index)\n  {\n    if (index < 0 || index >= this.inputList.length)\n    {\n      throw new Error(\"Cannot find test input for index\");\n    }\n\n    if (index === 0)\n    {\n      //Cannot delete the first input element\n      throw new Error(\"Cannot delete the first test input\");\n    }\n\n    if (index <= this.inputIndex)\n    {\n      --this.inputIndex;\n    }\n\n    this.inputList.splice(index, 1);\n  }\n\n  nextInput()\n  {\n    ++this.inputIndex;\n    if (this.inputIndex >= this.inputList.length)\n    {\n      this.inputIndex = 0;\n    }\n\n    return this.inputList[this.inputIndex];\n  }\n\n  prevInput()\n  {\n    --this.inputIndex;\n    if (this.inputIndex < 0)\n    {\n      this.inputIndex = this.inputList.length - 1;\n    }\n\n    return this.inputList[this.inputIndex];\n  }\n\n  resetInput()\n  {\n    this.inputIndex = 0;\n  }\n\n  hasNextInput()\n  {\n    return this.inputIndex < this.inputList.length;\n  }\n\n  hasPrevInput()\n  {\n    return this.inputIndex > 0;\n  }\n\n  getCurrentInput()\n  {\n    return this.inputList[this.inputIndex];\n  }\n\n  getCurrentInputIndex()\n  {\n    return this.inputIndex;\n  }\n}\n\nexport default TestingInputList;\n","import Viewport from 'content/viewport/Viewport.js';\nimport TestMode from './TestMode.js';\nimport TestingInputList from './TestingInputList.js';\n\nclass TestingManager\n{\n  constructor()\n  {\n    this.machineController = null;\n    this.viewport = null;\n\n    this.inputList = new TestingInputList();\n\n    this.shouldCheckError = false;\n    this.isImmediateErrorCheck = false;\n    this.errorCheckMode = TestingManager.NO_ERROR_CHECK;\n    this.stepByStepMode = false;\n\n    this.testMode = new TestMode(this);\n  }\n\n  initialize(app)\n  {\n    this.machineController = app.machineController;\n    this.viewport = app.viewport;\n\n    this.testMode.initialize(app);\n  }\n\n  destroy()\n  {\n\n  }\n\n  setErrorCheckMode(mode)\n  {\n    const machineBuilder = this.machineController.getMachineBuilder();\n\n    //Update machine builder error checker\n    machineBuilder.setMachineType(machineBuilder.getMachineType());\n\n    if (mode == TestingManager.NO_ERROR_CHECK)\n    {\n      this.shouldCheckError = false;\n      this.errorCheckMode = mode;\n    }\n    else if (mode == TestingManager.DELAYED_ERROR_CHECK)\n    {\n      this.shouldCheckError = true;\n      this.isImmediateErrorCheck = false;\n      this.errorCheckMode = mode;\n    }\n    else if (mode == TestingManager.IMMEDIATE_ERROR_CHECK)\n    {\n      this.shouldCheckError = true;\n      this.isImmediateErrorCheck = true;\n      this.errorCheckMode = mode;\n    }\n    else\n    {\n      throw new Error(\"Unknown error check mode \\'\" + mode + \"\\'\");\n    }\n  }\n\n  getErrorCheckMode()\n  {\n    return this.errorCheckMode;\n  }\n\n  setStepByStepMode(mode)\n  {\n    this.stepByStepMode = mode ? true : false;\n    if (mode)\n    {\n      if (this.testMode.isStarted()) this.testMode.onStop();\n      this.testMode.onStart();\n      this.viewport.setState((prev, props) => {\n        if (prev.mode != Viewport.TESTING)\n        {\n          return {\n            prevMode: prev.mode,\n            mode: Viewport.TESTING\n          };\n        }\n        else\n        {\n          //It's already the correct viewport mode\n        }\n      });\n    }\n    else\n    {\n      if (this.testMode.isStarted()) this.testMode.onStop();\n      this.viewport.setState((prev, props) => {\n        return {mode: prev.prevMode};\n      });\n    }\n  }\n\n  getStepByStepMode()\n  {\n    return this.stepByStepMode;\n  }\n}\nTestingManager.NO_ERROR_CHECK = \"none\";\nTestingManager.DELAYED_ERROR_CHECK = \"delayed\";\nTestingManager.IMMEDIATE_ERROR_CHECK = \"immediate\";\n\nexport default TestingManager;\n","import React from 'react';\n\nclass AddIcon extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    return <svg className=\"add-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n      <path d=\"M0 0h24v24H0z\" fill=\"none\"/>\n      <path d=\"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5 11h-4v4h-2v-4H7v-2h4V7h2v4h4v2z\"/>\n    </svg>;\n  }\n}\n\nexport default AddIcon;\n","import React from 'react';\n\nclass RemoveIcon extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    return <svg className=\"remove-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n      <path d=\"M0 0h24v24H0z\" fill=\"none\"/>\n      <path d=\"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5 11H7v-2h10v2z\"/>\n    </svg>;\n  }\n}\n\nexport default RemoveIcon;\n","import React from 'react';\n\nclass SuccessIcon extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    return <svg className=\"success-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n      <path fill=\"none\" d=\"M0 0h24v24H0V0zm0 0h24v24H0V0z\"/>\n      <path d=\"M16.59 7.58L10 14.17l-3.59-3.58L5 12l5 5 8-8zM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z\"/>\n    </svg>;\n  }\n}\n\nexport default SuccessIcon;\n","import React from 'react';\n\nclass FailureIcon extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    return <svg className=\"failure-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n      <path d=\"M0 0h24v24H0z\" fill=\"none\"/>\n      <path d=\"M14.59 8L12 10.59 9.41 8 8 9.41 10.59 12 8 14.59 9.41 16 12 13.41 14.59 16 16 14.59 13.41 12 16 9.41 14.59 8zM12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z\"/>\n    </svg>;\n  }\n}\n\nexport default FailureIcon;\n","import React from 'react';\n\nclass RunningManIcon extends React.Component\n{\n    constructor(props)\n    {\n        super(props);\n    }\n    render() {\n        return <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n                <path fill=\"none\" d=\"M0 0h24v24H0z\"/>\n                <path d=\"M13.49 5.48c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm-3.6 13.9l1-4.4 2.1 2v6h2v-7.5l-2.1-2 .6-3c1.3 1.5 3.3 2.5 5.5 2.5v-2c-1.9 0-3.5-1-4.3-2.4l-1-1.6c-.4-.6-1-1-1.7-1-.3 0-.5.1-.8.1l-5.2 2.2v4.7h2v-3.4l1.8-.7-1.6 8.1-4.9-1-.4 2 7 1.4z\"/>\n            </svg>;\n    }\n}\n\nexport default RunningManIcon;\n","import React from 'react';\nimport './StatusButton.css';\n\nimport IconButton from 'icons/IconButton.js';\nimport SuccessIcon from 'icons/SuccessIcon.js';\nimport FailureIcon from 'icons/FailureIcon.js';\nimport WorkingIcon from 'icons/WorkingIcon.js';\nimport RunningManIcon from 'icons/RunningManIcon.js';\n\nclass StatusButton extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    const active = this.props.active;\n    if (this.props.mode === true)\n    {\n      //Success icon\n      return <IconButton className={\"status-icon success\" + (active ? \" active\" : \"\")}\n        onClick={this.props.onClick}>\n        <SuccessIcon/>\n      </IconButton>;\n    }\n    else if (this.props.mode === false)\n    {\n      //Failure icon\n      return <IconButton className={\"status-icon failure\" + (active ? \" active\" : \"\")}\n        onClick={this.props.onClick}>\n        <FailureIcon/>\n      </IconButton>;\n    }\n    else\n    {\n      //Pending icon\n      return <IconButton className={\"status-icon\" + (active ? \" active\" : \"\")}\n        onClick={this.props.onClick}>\n        <RunningManIcon/>\n      </IconButton>;\n    }\n  }\n}\n\nexport default StatusButton;\n","import React from 'react';\nimport './TestingInput.css';\n\nimport Config from 'config.js';\nimport { EMPTY } from 'machine/Symbols.js';\n\nimport IconButton from 'icons/IconButton.js';\nimport AddIcon from 'icons/AddIcon.js';\nimport RemoveIcon from 'icons/RemoveIcon.js';\n\nimport StatusButton from './StatusButton.js';\n\nclass TestingInput extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.ref = React.createRef();\n\n    this.onStatusClick = this.onStatusClick.bind(this);\n    this.onSubmitClick = this.onSubmitClick.bind(this);\n    this.onValueChange = this.onValueChange.bind(this);\n    this.onKeyDown = this.onKeyDown.bind(this);\n    this.onKeyUp = this.onKeyUp.bind(this);\n  }\n\n  getInput()\n  {\n    return this.props.testList.getInputByIndex(this.props.index);\n  }\n\n  isInputFirst()\n  {\n    return this.props.index === 0;\n  }\n\n  onStatusClick(e)\n  {\n    this.props.testList.testByIndex(this.props.index, this.props.machineBuilder.getMachine());\n  }\n\n  onSubmitClick(e)\n  {\n    if (this.isInputFirst())\n    {\n      const src = this.getInput();\n\n      //Add test input to list\n      const newTest = this.props.testList.addInput(src.value);\n      //Copy result to new test (should not be setResult)\n      newTest.result = src.result;\n      newTest.dirty = src.dirty;\n\n      //Delete already processed test\n      src.value = \"\";\n      src.result = null;\n      src.dirty = true;\n\n      //Reselect the target\n      this.ref.focus();\n    }\n    else\n    {\n      //Remove test input from list\n      this.props.testList.removeInputByIndex(this.props.index);\n    }\n  }\n\n  onValueChange(e)\n  {\n    const value = e.target.value.trim();\n    const src = this.getInput();\n    src.value = value;\n    src.dirty = true;\n  }\n\n  onKeyDown(e)\n  {\n    //If it is an 'enter', don't put in a new line...\n    if (e.keyCode === Config.SUBMIT_KEY)\n    {\n      e.preventDefault();\n    }\n    //Delete it if there is no value in it\n    else if (e.keyCode === Config.DELETE_KEY)\n    {\n      const src = this.getInput();\n      if (src.value.length <= 0)\n      {\n        const nextIndex = this.props.index + 1;\n        //Replace this input with the next one if there is one...\n        //Also, cannot delete first input, but this will never get there :)\n        if (this.props.testList.getTests().length > nextIndex)\n        {\n          const nextInput = this.props.testList.getInputByIndex(nextIndex);\n          src.value = nextInput.value;\n          src.result = nextInput.result;\n          src.dirty = nextInput.dirty;\n\n          this.props.testList.removeInputByIndex(nextIndex);\n        }\n      }\n    }\n  }\n\n  onKeyUp(e)\n  {\n    if (e.keyCode === Config.SUBMIT_KEY)\n    {\n      const shouldTestOnly = e.shiftKey;\n\n      //Should try to add and NOT run\n      if (this.isInputFirst() && !shouldTestOnly)\n      {\n        const src = this.getInput();\n\n        //Add test input to list\n        const newTest = this.props.testList.addInput(src.value);\n        //Copy result to new test (should not be setResult)\n        newTest.result = src.result;\n        newTest.dirty = src.dirty;\n\n        //Delete already processed test\n        src.value = \"\";\n        src.result = null;\n        src.dirty = true;\n\n        //Refocus the target\n        this.ref.focus();\n      }\n      //Should try to run ONLY\n      else\n      {\n        this.props.testList.testByIndex(this.props.index, this.props.machineBuilder.getMachine());\n\n        //Select everything again\n        this.ref.select();\n      }\n    }\n    else if (e.keyCode === Config.CLEAR_KEY)\n    {\n      e.target.blur();\n    }\n  }\n\n  render()\n  {\n    const src = this.getInput();\n    const first = this.isInputFirst();\n    return <div className={\"testinginput-container \" +\n      (this.props.testList.getCurrentInputIndex() === this.props.index ? \" active\" : \"\")}>\n\n      <StatusButton active={!src.dirty} mode={src.result} onClick={this.onStatusClick}/>\n\n      <input ref={ref=>this.ref=ref} className=\"testinginput-field\"\n        value={src.value}\n        placeholder={EMPTY}\n        onChange={this.onValueChange}\n        onKeyDown={this.onKeyDown}\n        onKeyUp={this.onKeyUp}\n        onFocus={(e)=>e.target.select()}/>\n\n      <IconButton className=\"testinginput-submit\" onClick={this.onSubmitClick}>\n        {first ? <AddIcon/> : <RemoveIcon/>}\n      </IconButton>\n    </div>;\n  }\n}\n\nexport default TestingInput;\n","import React from 'react';\n\nclass UploadTestButton extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    return <button\n      className={\"icon-button \" + this.props.className}\n      id={this.props.id}\n      title={this.props.title}\n      style={this.props.style}\n      disabled={this.props.disabled}\n      onClick={this.props.onClick}>\n      <input ref={ref=>this.uploadInput=ref}\n        id=\"test-upload-input\" type=\"file\" name=\"import\"\n        style={{display: \"none\"}}\n        onChange={this.props.onChange} accept=\".txt\"/>\n      <label htmlFor=\"test-upload-input\">\n        {this.props.children}\n      </label>\n    </button>;\n  }\n}\n\nexport default UploadTestButton;\n","import React from 'react';\n\nclass UploadIcon extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    return <svg className=\"upload-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n      <path d=\"M9,16V10H5L12,3L19,10H15V16H9M5,20V18H19V20H5Z\"/>\n    </svg>;\n  }\n}\n\nexport default UploadIcon;\n","import React from 'react';\n\nclass PageNewContentIcon extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    return <svg className=\"pagenewcontent-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n      <path d=\"M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 16H8v-2h8v2zm0-4H8v-2h8v2zm-3-5V3.5L18.5 9H13z\"/>\n    </svg>;\n  }\n}\n\nexport default PageNewContentIcon;\n","import React from 'react';\n\nclass SaveIcon extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    return <svg className=\"save-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n      <path d=\"M19 12v7H5v-7H3v7c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-7h-2zm-6 .67l2.59-2.58L17 11.5l-5 5-5-5 1.41-1.41L11 12.67V3h2z\"/>\n      <path fill=\"none\" d=\"M0 0h24v24H0z\"/>\n    </svg>;\n  }\n}\n\nexport default SaveIcon;\n","import React from 'react';\n\nclass CloseIcon extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    return <svg className=\"close-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n      <path d=\"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\"/>\n      <path d=\"M0 0h24v24H0z\" fill=\"none\"/>\n    </svg>;\n  }\n}\n\nexport default CloseIcon;\n","import React from 'react';\nimport '../Panel.css';\nimport './TestingPanel.css';\n\nimport Viewport from 'content/viewport/Viewport.js';\n\nimport Downloader from 'util/Downloader.js';\n\nimport TestingManager from 'modules/fsa/testing/TestingManager.js';\nimport TestingInput from './TestingInput.js';\n\nimport IconButton from 'icons/IconButton.js';\nimport UploadTestButton from './components/UploadTestButton.js';\n\nimport UploadIcon from 'icons/UploadIcon.js';\nimport CreateIcon from 'icons/PageNewContentIcon.js';\nimport SaveIcon from 'icons/SaveIcon.js';\nimport CloseIcon from 'icons/CloseIcon.js';\n\nconst TEST_FILENAME = \"test.txt\";\n\nclass TestingPanel extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.container = React.createRef();\n    this.uploadInput = React.createRef();\n\n    this.state = {\n      errorCheckMode: this.props.app.testingManager.getErrorCheckMode(),\n      noTestMode: true\n    };\n\n    this.stepByStepModeChecked = false;\n\n    this.onChangeErrorCheckMode = this.onChangeErrorCheckMode.bind(this);\n    this.onUploadFileChange = this.onUploadFileChange.bind(this);\n    this.onGraphChange = this.onGraphChange.bind(this);\n    this.onTestsRunAll = this.onTestsRunAll.bind(this);\n    this.onTestsClear = this.onTestsClear.bind(this);\n    this.onTestsSave = this.onTestsSave.bind(this);\n    this.onTestsNew = this.onTestsNew.bind(this);\n    this.onTestsUpload = this.onTestsUpload.bind(this);\n  }\n\n  componentWillMount()\n  {\n    const graphController = this.props.graphController;\n    const graph = graphController.getGraph();\n\n    //HACK: this should be a listener to FSABuilder, should not access graph\n    graph.on(\"markDirty\", this.onGraphChange);\n  }\n\n  componentWillUnmount()\n  {\n    const graphController = this.props.graphController;\n    const graph = graphController.getGraph();\n\n    graph.removeEventListener(\"markDirty\", this.onGraphChange);\n  }\n\n  onGraphChange(g)\n  {\n    const app = this.props.app;\n    const tester = app.testingManager;\n    tester.inputList.resetTests();\n  }\n\n  onUploadFileChange(e)\n  {\n    const files = e.target.files;\n    if (files.length > 0)\n    {\n      const app = this.props.app;\n      const tester = app.testingManager;\n      tester.inputList.importTests(files[0]);\n      document.getElementById(\"test-name\").innerHTML = files[0].name;\n\n      //Makes sure you can upload the same file again.\n      e.target.value = \"\";\n    }\n  }\n\n  onChangeErrorCheckMode(e)\n  {\n    const value = e.target.value;\n\n    const graphController = this.props.graphController;\n    const machineController = this.props.machineController;\n    const app = this.props.app;\n    const tester = app.testingManager;\n\n    const graph = graphController.getGraph();\n    const machineBuilder = machineController.getMachineBuilder();\n    tester.setErrorCheckMode(value);\n\n    //HACK: this should automatically be updated by testing manager on set error check mode\n    if (!tester.shouldCheckError)\n    {\n      machineBuilder.machineErrorChecker.clear();\n    }\n    else\n    {\n      machineBuilder.onGraphChange(graph);\n    }\n\n    this.setState({errorCheckMode: value});\n  }\n\n  onTestsRunAll(e)\n  {\n    const machine = this.props.machineController.getMachineBuilder().getMachine();\n    const app = this.props.app;\n    const tester = app.testingManager;\n    if (tester.testMode.isStarted())\n    {\n      tester.setStepByStepMode(false);\n    }\n    else\n    {\n      const testList = tester.inputList;\n      const length = testList.getTests().length;\n      tester.setStepByStepMode(this.stepByStepModeChecked);\n      for(let i = 0; i < length; ++i)\n      {\n        testList.testByIndex(i, machine);\n      }\n    }\n  }\n\n  onTestsClear(e)\n  {\n    const app = this.props.app;\n    const tester = app.testingManager;\n    tester.inputList.clearTests();\n    this.clearTestName();\n    this.hideTestInputList();\n    this.setState({noTestMode: true});\n  }\n\n  onTestsSave(e)\n  {\n    const app = this.props.app;\n    const tester = app.testingManager;\n    Downloader.downloadText(TEST_FILENAME, tester.inputList.getTestsAsStrings().join(\"\\n\"));\n  }\n\n  onTestsNew(e)\n  {\n      this.onTestsClear();\n      this.showTestInputList();\n      this.clearTestName();\n      this.setState({noTestMode: false});\n  }\n\n  onTestsUpload(e)\n  {\n      this.onTestsNew();\n      this.showTestInputList();\n  }\n\n  showTestInputList() {\n      document.getElementById(\"test-inputlist-container\").style.display = \"block\";\n  }\n\n  hideTestInputList() {\n      document.getElementById(\"test-inputlist-container\").style.display = \"none\";\n  }\n\n  clearTestName() {\n      document.getElementById(\"test-name\").innerHTML = \"\";\n  }\n\n  render()\n  {\n    const app = this.props.app;\n    const viewport = app.viewport;\n    const tester = app.testingManager;\n    const testList = tester.inputList;\n    const machineBuilder = this.props.machineController.getMachineBuilder();\n\n    const isTestInvalid = !machineBuilder.isValidMachine();\n\n    return <div className=\"panel-container\" id=\"testing\" ref={ref=>this.container=ref} style={this.props.style}>\n      <div className=\"panel-title\">\n        <h1>{I18N.toString(\"component.testing.title\")}</h1>\n      </div>\n\n      <div className=\"test-icon-row\">\n\n          <IconButton className=\"testicon\" id=\"testing-new\" title={I18N.toString(\"action.testing.new\")}\n            onClick={this.onTestsNew}>\n            <CreateIcon/>\n          </IconButton>\n\n          {/*Import Test Button*/}\n          <UploadTestButton className=\"testicon\" id=\"testing-upload\" title={I18N.toString(\"action.testing.import\")}\n            onClick={this.onTestsUpload} onChange={this.onUploadFileChange}>\n            <UploadIcon/>\n          </UploadTestButton>\n\n          {/*Save Test Button*/}\n          <IconButton className=\"testicon\" id=\"testing-save\" title={I18N.toString(\"action.testing.save\")}\n            onClick={this.onTestsSave} disabled={tester.inputList.isEmpty()}>\n            <SaveIcon/>\n          </IconButton>\n\n          <IconButton className=\"testicon\" id=\"testing-clear\" title={I18N.toString(\"action.testing.clear\")}\n            onClick={this.onTestsClear}\n            disabled={this.state.noTestMode}>\n            <CloseIcon/>\n          </IconButton>\n\n      </div>\n\n      <div className=\"panel-content\">\n\n        <div className=\"test-inputlist-container\" id=\"test-inputlist-container\" style={{\"display\": \"none\"}}>\n\n\n          <div className=\"scrollbar-container\">\n            <h3 id=\"test-name\">Test Name</h3>\n            <div className=\"test-inputlist-content\">\n              {\n                isTestInvalid &&\n                <label className=\"test-inputlist-content-warning\">Not a valid machine!</label>\n              }\n              {\n                testList.getTests().map((e, i) =>\n                  <TestingInput key={e.id} index={i}\n                    testList={testList}\n                    machineBuilder={machineBuilder}/>)\n              }\n              {\n                /*\n                <button className=\"panel-button\" onClick={() => testList.addInput(\"\")}>\n                  {I18N.toString(\"action.testing.add\")}\n                </button>\n                */\n              }\n            </div>\n          </div>\n\n          <button className=\"panel-button\" onClick={this.onTestsRunAll}>\n            {tester.testMode.isStarted() ? I18N.toString(\"action.testing.stoprun\") : I18N.toString(\"action.testing.runall\")}\n          </button>\n\n          <div className=\"panel-checkbox\">\n            <input id=\"test-step\" type=\"checkbox\"\n              checked={this.stepByStepModeChecked}\n              onChange={(e) => {\n                this.stepByStepModeChecked = e.target.checked;\n                if(!this.stepByStepModeChecked) tester.setStepByStepMode(false);\n              }}\n              disabled={tester.testMode.isStarted()}/>\n            <label htmlFor=\"test-step\">{I18N.toString(\"options.testing.stepmode\")}</label>\n          </div>\n\n        </div>\n\n        <hr />\n\n        <div id=\"test-errorcheck\">\n          <label>{I18N.toString(\"options.checkerrors\")}</label>\n          <select className=\"panel-select\"\n            value={this.state.errorCheckMode}\n            onChange={this.onChangeErrorCheckMode}>\n            <option value={TestingManager.NO_ERROR_CHECK}>{I18N.toString(\"options.checkerrors.mode.none\")}</option>\n            <option value={TestingManager.DELAYED_ERROR_CHECK}>{I18N.toString(\"options.checkerrors.mode.delayed\")}</option>\n            <option value={TestingManager.IMMEDIATE_ERROR_CHECK}>{I18N.toString(\"options.checkerrors.mode.immediate\")}</option>\n          </select>\n        </div>\n\n      </div>\n\n      <div className=\"panel-bottom\"></div>\n    </div>;\n  }\n}\nTestingPanel.UNLOCALIZED_NAME = \"component.testing.title\";\n\nexport default TestingPanel;\n","import { guid } from 'util/MathHelper.js';\n\nclass Message\n{\n  constructor(handler, value, type, tags, componentClass, componentProps)\n  {\n    this._handler = handler;\n    this._id = guid();\n    this._type = type;\n\n    this.value = value;\n    this.tags = tags;\n    this.componentClass = componentClass;\n    this.componentProps = componentProps;\n  }\n\n  close()\n  {\n    const messages = this._handler.getMessages();\n    const index = messages.indexOf(this);\n    if (index < 0) throw new Error(\"Trying to close an unopened notification message\");\n    messages.splice(index, 1);\n  }\n\n  getType()\n  {\n    return this._type;\n  }\n\n  getID()\n  {\n    return this._id;\n  }\n\n  getComponentClass()\n  {\n    return this.componentClass;\n  }\n\n  getComponentProps()\n  {\n    return this.componentProps;\n  }\n\n  hasTag(tag)\n  {\n    return this.tags.indexOf(tag) >= 0;\n  }\n}\n\nclass NotificationManager\n{\n  constructor()\n  {\n    this._messageQueue = [];\n  }\n\n  addMessage(value, type=null, tags=null, componentClass=null, componentProps=null, shouldReplaceRelated=true)\n  {\n    if (tags && shouldReplaceRelated)\n    {\n      this.clearMessages(tags);\n    }\n\n    const result = new Message(this, value, type || \"default\", tags || [], componentClass, componentProps);\n    this._messageQueue.unshift(result);\n  }\n\n  addDefaultMessage(value, tags=null, componentClass=null, componentProps=null, shouldReplaceRelated=true)\n  {\n    this.addMessage(value, \"default\", tags, componentClass, componentProps, shouldReplaceRelated);\n  }\n\n  addErrorMessage(value, tags=null, componentClass=null, componentProps=null, shouldReplaceRelated=true)\n  {\n    this.addMessage(value, \"error\", tags, componentClass, componentProps, shouldReplaceRelated);\n  }\n\n  addWarningMessage(value, tags=null, componentClass=null, componentProps=null, shouldReplaceRelated=true)\n  {\n    this.addMessage(value, \"warning\", tags, componentClass, componentProps, shouldReplaceRelated);\n  }\n\n  clearMessages(tags=null)\n  {\n    if (!tags)\n    {\n      this._messageQueue.length = 0;\n    }\n    else\n    {\n      if (!Array.isArray(tags)) tags = [tags];\n\n      let message;\n      for(let i = this._messageQueue.length - 1; i >= 0; --i)\n      {\n        message = this._messageQueue[i];\n        for(const tag of tags)\n        {\n          if (message.hasTag(tag))\n          {\n            this._messageQueue.splice(i, 1);\n            break;\n          }\n        }\n      }\n    }\n  }\n\n  hasMessages(tags=null)\n  {\n    if (!tags)\n    {\n      return this._messageQueue.length >= 0;\n    }\n    else\n    {\n      if (!Array.isArray(tags)) tags = [tags];\n\n      for(let i = this._messageQueue.length - 1; i >= 0; --i)\n      {\n        message = this._messageQueue[i];\n        for(const tag of tags)\n        {\n          if (message.hasTag(tag))\n          {\n            return true;\n          }\n        }\n      }\n\n      return false;\n    }\n  }\n\n  getMessages()\n  {\n    return this._messageQueue;\n  }\n}\nexport default NotificationManager;\n","import NotificationManager from './NotificationManager.js';\n\n//Singleton pattern (I know, I'm sorry. But we must.)\nconst INSTANCE = new NotificationManager();\nexport default INSTANCE;\n","import React from 'react';\n\nclass NFAToDFAConversionWarningMessage extends React.Component\n{\n    constructor(props)\n    {\n        super(props);\n        this.onClick = this.onClick.bind(this);\n    }\n\n    onClick(e)\n    {\n        const message = this.props.message;\n        const buttonValue = e.target.value;\n\n        switch(buttonValue)\n        {\n            case \"convert\":\n                {\n                    const machineController = this.props.machineController;\n                    machineController.convertMachineTo(\"DFA\");\n                    message.close();\n                }\n            break;\n            default:\n              throw new Error(\"Unknown button value for message\");\n        }\n    }\n\n    render()\n    {\n        const machineController = this.props.machineController;\n        const machine = machineController.getMachineBuilder().getMachine();\n        const stateCount = machine.getStates().length;\n\n        return <div>\n          <p>{I18N.toString(\"message.warning.convertNFAToDFA\")}</p>\n          <p>{`${stateCount} states -> ${Math.pow(2, stateCount)} states`}</p>\n          <button value=\"convert\" onClick={this.onClick}>{I18N.toString(\"message.action.convert\")}</button>\n        </div>;\n\n    }\n}\n\nexport default NFAToDFAConversionWarningMessage;\n","import React from 'react';\nimport Config from 'config.js';\n\nimport Notification from 'system/notification/Notification.js';\nimport NFAToDFAConversionWarningMessage from 'modules/fsa/notifications/NFAToDFAConversionWarningMessage.js';\n\nclass AnalysisPanel extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.container = null;\n    this.optimizeUnreachOption = null;\n    this.optimizeRedundOption = null;\n\n    this.onConvertToDFA = this.onConvertToDFA.bind(this);\n    this.onConvertToNFA = this.onConvertToNFA.bind(this);\n\n    this.onOptimizeMachine = this.onOptimizeMachine.bind(this);\n  }\n\n  onDeleteAllUnreachable(e)\n  {\n    const machineController = this.props.machineController;\n    const unreachableArray = machineController.getMachineBuilder().machineErrorChecker.getUnreachableNodes();\n    for(let node of unreachableArray)\n    {\n      if(node != machineController.graphController.getGraph().getStartNode())\n      {\n        machineController.graphController.getGraph().deleteNode(node);\n      }\n    }\n  }\n\n  onConvertToDFA(e)\n  {\n    const machineController = this.props.machineController;\n    const graphController = this.props.graphController;\n    const props = {graphController: graphController, machineController: machineController};\n    const messageTag = Config.MACHINE_CONVERSION_MESSAGE_TAG;\n\n    //machineController.convertMachineTo(\"DFA\");\n    Notification.addMessage(I18N.toString(\"message.warning.convertNFAToDFA\"),\n      \"warning\", messageTag, NFAToDFAConversionWarningMessage, props);\n  }\n\n  onConvertToNFA(e)\n  {\n    const machineController = this.props.machineController;\n    machineController.convertMachineTo(\"NFA\");\n  }\n\n  onOptimizeMachine(e)\n  {\n    if (this.optimizeUnreachOption.checked)\n    {\n      this.onDeleteAllUnreachable(e);\n    }\n  }\n\n  canOptimize()\n  {\n    return (this.optimizeRedundOption && this.optimizeRedundOption.checked) ||\n    (this.optimizeUnreachOption && this.optimizeUnreachOption.checked);\n  }\n\n  render()\n  {\n    const graphController = this.props.graphController;\n    const machineController = this.props.machineController;\n\n    const graph = graphController.getGraph();\n    const machineBuilder = machineController.getMachineBuilder();\n\n    return <div className=\"panel-container\" id=\"analysis\" ref={ref=>this.container=ref} style={this.props.style}>\n      <div className=\"panel-title\"><h1>{I18N.toString(\"component.analysis.title\")}</h1></div>\n      <div className=\"panel-content\">\n\n        {/*Optimize*/}\n        <div style={{paddingBottom: \"0.5em\"}}>\n          <h3 style={{marginBottom: \"0\"}}>Optimizations</h3>\n          <div style={{paddingBottom: \"0.5em\"}}>\n            <div>\n              <input ref={ref=>this.optimizeUnreachOption=ref} id=\"opt-unreach\" type=\"checkbox\"/>\n              <label htmlFor=\"opt-unreach\">Unreachables</label>\n            </div>\n            <div>\n              <input ref={ref=>this.optimizeRedundOption=ref} id=\"opt-redund\" type=\"checkbox\" disabled={true}/>\n              <label htmlFor=\"opt-redund\">Redundant States</label>\n            </div>\n          </div>\n          <button className=\"panel-button\" onClick={this.onOptimizeMachine} disabled={!this.canOptimize()}>Optimize</button>\n        </div>\n\n        <hr/>\n        {\n          machineBuilder.getMachineType() == \"DFA\" ?\n            <button className=\"panel-button\" onClick={this.onConvertToNFA}>\n              {I18N.toString(\"action.overview.convertnfa\")}\n            </button>\n          : machineBuilder.getMachineType() == \"NFA\" ?\n            <button className=\"panel-button\" onClick={this.onConvertToDFA}>\n              {I18N.toString(\"action.overview.convertdfa\")}\n            </button>\n          : null\n        }\n\n      </div>\n      <div className=\"panel-bottom\"></div>\n    </div>;\n  }\n}\nAnalysisPanel.UNLOCALIZED_NAME = \"component.analysis.title\";\n\nexport default AnalysisPanel;\n","import React from 'react';\n\nclass AboutPanel extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.container = null;\n  }\n\n  //Override\n  render()\n  {\n    return <div className=\"panel-container\" id=\"about\" ref={ref=>this.container=ref} style={this.props.style}>\n      <div className=\"panel-title\">\n        <h1>Finite State Automata</h1>\n      </div>\n      <div className=\"panel-content\">\n        <p>{\"Brought to you with \\u2764 by the Flap.js team.\"}</p>\n        <p>{\"<- Tap on a tab to begin!\"}</p>\n      </div>\n      <div className=\"panel-bottom\"></div>\n    </div>;\n  }\n}\n\nexport default AboutPanel;\n","const ALLOW_AUTOMATIC_REGISTER = false;\n\nconst Eventable = {\n  __eventListeners: null,\n  mixin(targetClass)\n  {\n    const targetPrototype = targetClass.prototype;\n    Object.assign(targetPrototype, Eventable);\n    delete targetPrototype.mixin;\n  },\n\n  registerEvent(eventName)\n  {\n    if (!this.__eventListeners) this.__eventListeners = new Map();\n\n    if (!this.__eventListeners.has(eventName))\n    {\n      this.__eventListeners.set(eventName, []);\n    }\n    else\n    {\n      throw new Error(\"Already registered event \\'\" + eventName + \"\\'\");\n    }\n  },\n\n  unregisterEvent(eventName)\n  {\n    if (!this.__eventListeners) return;\n\n    if (this.__eventListeners.has(eventName))\n    {\n      this.__eventListeners.delete(eventName);\n    }\n    else\n    {\n      throw new Error(\"Unable to find event \\'\" + eventName + \"\\'\");\n    }\n  },\n\n  addEventListener(eventName, listener)\n  {\n    if (!this.__eventListeners) this.__eventListeners = new Map();\n\n    let listeners;\n    if (this.__eventListeners.has(eventName))\n    {\n      listeners = this.__eventListeners.get(eventName);\n    }\n    else if (ALLOW_AUTOMATIC_REGISTER)\n    {\n      listeners = [];\n      this.__eventListeners.set(eventName, listeners);\n    }\n    else\n    {\n      throw new Error(\"Unable to find event \\'\" + eventName + \"\\'\");\n    }\n\n    listeners.push(listener);\n  },\n\n  removeEventListener(eventName, listener)\n  {\n    if (!this.__eventListeners) return;\n\n    if (this.__eventListeners.has(eventName))\n    {\n      const listeners = this.__eventListeners.get(eventName);\n      let flag = false;\n      let i = listeners.length;\n      while(i--)\n      {\n        if (listeners[i] === listener)\n        {\n          listeners.splice(i, 1);\n          flag = true;\n        }\n      }\n\n      if (!flag)\n      {\n        throw new Error(\"Unable to find listener for event \\'\" + eventName + \"\\'\");\n      }\n    }\n    else\n    {\n      throw new Error(\"Unknown event \\'\" + eventName + \"\\'\");\n    }\n  },\n\n  clearEventListeners(eventName)\n  {\n    if (!this.__eventListeners) return;\n\n    if (this.__eventListeners.has(eventName))\n    {\n      const listeners = this.__eventListeners.get(eventName);\n      listeners.length = 0;\n    }\n    else if (ALLOW_AUTOMATIC_REGISTER)\n    {\n      listeners = [];\n      this.__eventListeners.set(eventName, listeners);\n    }\n    else\n    {\n      throw new Error(\"Unable to find event \\'\" + eventName + \"\\'\");\n    }\n  },\n\n  countEventListeners(eventName)\n  {\n    if (!this.__eventListeners) return 0;\n    return this.__eventListeners.has(eventName) ? this.__eventListeners.get(eventName).length : 0;\n  },\n\n  getEventListeners(eventName)\n  {\n    if (!this.__eventListeners) return null;\n    return this.__eventListeners.get(eventName);\n  },\n\n  on(eventName, listener)\n  {\n    this.addEventListener(eventName, listener);\n  },\n\n  once(eventName, listener)\n  {\n    const f = (...args) => {\n      try\n      {\n        listener.apply(null, args);\n      }\n      finally\n      {\n        this.removeEventListener(eventName, f);\n      }\n    };\n\n    this.addEventListener(eventName, f);\n  },\n\n  emit(eventName, ...args)\n  {\n    try\n    {\n      if (!this.__eventListeners) return;\n\n      let listeners;\n      if (!this.__eventListeners.has(eventName))\n      {\n        if (ALLOW_AUTOMATIC_REGISTER)\n        {\n          listeners = [];\n          this.__eventListeners.set(eventName, listeners);\n        }\n        else\n        {\n          throw new Error(\"Unable to find event \\'\" + eventName + \"\\'\");\n        }\n      }\n      else\n      {\n        listeners = this.__eventListeners.get(eventName);\n\n        let result = null;\n        let i = listeners.length;\n        while(i--)\n        {\n          try\n          {\n            result = listeners[i].apply(null, args);\n          }\n          catch(e)\n          {\n            console.error(e);\n          }\n\n          if (result === true) break;\n        }\n      }\n    }\n    finally\n    {\n      this.onEventProcessed(eventName, ...args);\n    }\n  },\n\n  onEventProcessed(eventName, ...args)\n  {\n    //Do nothing.\n  }\n};\n\nexport default Eventable;\n","class GraphLayout\n{\n  static applyLayout(graph, type=\"circle\")\n  {\n    if (type != \"circle\") throw new Error(\"Invalid layout type\");\n    //seperate node to reachable and unreachable\n    const reachableNode= graph.getReachableState()\n    function unreachable(node)\n    {\n      return !reachableNode.includes(node)\n    }\n    const unreachableNode = graph.nodes.filter(unreachable)\n\n    //get num of nodes\n    const numOfReachable = reachableNode.length;\n    const numOfUnreachable = unreachableNode.length;\n    const numOfNode = graph.nodes.length;\n    const maxNum = Math.max(numOfReachable, numOfUnreachable)\n    if(numOfNode == 0)\n    {\n      return;\n    }\n    //set radius\n    var radius;\n    if(numOfReachable < 10 && numOfUnreachable < 10){\n      radius = maxNum/4 * 50 + 10;\n    }\n    else{\n      radius = (maxNum/5) * 40 + 10;\n    }\n    /*var radius;\n    if(numOfNode < 10){\n      radius = numOfNode/4 * 50 + 10;\n    }\n    else{\n      radius = (numOfNode/5) * 40 + 10;\n    }*/\n\n    //set degree\n    const degree_re = 2* Math.PI/numOfReachable;\n    const degree_un = 2* Math.PI/numOfUnreachable;\n\n    let currentStep = 0\n    for(const node of reachableNode)\n    {\n      node.y = Math.sin(degree_re*currentStep + Math.PI)*radius;\n      node.x = Math.cos(degree_re*currentStep + Math.PI)*radius;\n      currentStep += 1\n    }\n    currentStep = 0\n    for(const node of unreachableNode)\n    {\n      node.y = Math.sin(degree_un*currentStep + Math.PI)*(radius + 100);\n      node.x = Math.cos(degree_un*currentStep + Math.PI)*(radius + 100);\n      currentStep += 1\n    }\n    /*for(const node of graph.nodes)\n    {\n      node.y = Math.sin(degree*currentStep + Math.PI)*radius;\n      node.x = Math.cos(degree*currentStep + Math.PI)*radius;\n      currentStep += 1\n    }*/\n  }\n\n\n}\n\nexport default GraphLayout;\n","class GraphElement\n{\n  constructor(id)\n  {\n    this._id = id;\n  }\n  \n  setGraphElementID(graphElementID)\n  {\n    this._id = graphElementID;\n    return this;\n  }\n\n  getGraphElementID()\n  {\n    return this._id;\n  }\n}\nexport default GraphElement;\n","import GraphElement from 'graph/GraphElement.js';\n\nclass GraphNode extends GraphElement\n{\n  constructor(id, x, y)\n  {\n    super(id);\n\n    this.x = x;\n    this.y = y;\n\n    this._label = \"\";\n  }\n\n  setNodeLabel(label)\n  {\n    this._label = label;\n    return this;\n  }\n\n  getNodeLabel()\n  {\n    return this._label;\n  }\n\n  getNodeSize()\n  {\n    return 10;\n  }\n}\n\nexport default GraphNode;\n","import GraphNode from 'graph/GraphNode.js';\nimport Config from 'config.js';\nimport { guid } from 'util/MathHelper.js';\n\nclass Node extends GraphNode\n{\n  constructor(graph, x=0, y=0, label=\"q\")\n  {\n    super(guid(), x, y);\n\n    this.graph = graph;\n    this.customLabel = false;\n\n    this._label = label;\n    this._accept = false;\n  }\n\n  //Override\n  getNodeSize()\n  {\n    return Config.NODE_RADIUS;\n  }\n\n  //Override\n  setNodeLabel(label)\n  {\n    const prevLabel = this._label;\n    super.setNodeLabel(label);\n    this.customLabel = false;\n\n    if (prevLabel != label)\n    {\n      this.graph.emit(\"nodeLabel\", this, this._label, prevLabel);\n      this.graph.markDirty();\n    }\n  }\n\n  setCustomLabel(label)\n  {\n    const prevLabel = this._label;\n    this._label = label;\n    this.customLabel = true;\n\n    if (prevLabel != label)\n    {\n      this.graph.emit(\"nodeCustomLabel\", this, this._label, prevLabel);\n      this.graph.markDirty();\n    }\n  }\n\n  hasCustomLabel()\n  {\n    return this.customLabel;\n  }\n\n  get accept() { return this._accept; }\n  set accept(value) {\n    let prevAccept = this._accept;\n    this._accept = value;\n    if (prevAccept != value)\n    {\n      this.graph.emit(\"toggleAccept\", this, this._accept, prevAccept);\n      this.graph.markDirty();\n    }\n  }\n}\n\nexport default Node;\n","import GraphElement from 'graph/GraphElement.js';\n\nclass GraphEdge extends GraphElement\n{\n  constructor(id, from, to)\n  {\n    super(id);\n\n    if (!from) throw new Error(\"Source of edge cannot be null.\");\n\n    this._from = from;\n    this._to = to;\n\n    this._label = \"\";\n  }\n\n  setSourceNode(node)\n  {\n    if (!node) throw new Error(\"Source of edge cannot be null.\");\n\n    this._from = node;\n    return this;\n  }\n\n  getSourceNode()\n  {\n    return this._from;\n  }\n\n  setDestinationNode(node)\n  {\n    this._to = node;\n    return this;\n  }\n\n  changeDestinationNode(node)\n  {\n    this._to = node;\n  }\n\n  getDestinationNode()\n  {\n    return this._to;\n  }\n\n  setEdgeLabel(label)\n  {\n    this._label = label;\n  }\n\n  getEdgeLabel()\n  {\n    return this._label;\n  }\n\n  getEdgeDirection()\n  {\n    const from = this._from;\n    const to = this._to;\n    const HALFPI = Math.PI / 2;\n    let result = 0;\n\n    if (this.isPlaceholder())\n    {\n      result = Math.PI / 4;\n    }\n    else\n    {\n      const dy = to.y - from.y;\n      const dx = to.x - from.x;\n      result = Math.atan2(dy, dx);\n    }\n\n    if (result > HALFPI || result < -HALFPI)\n    {\n      result += Math.PI;\n    }\n\n    return result;\n  }\n\n  getStartPoint(dst={x: 0, y: 0})\n  {\n    const from = this._from;\n    dst.x = from.x;\n    dst.y = from.y;\n    return dst;\n  }\n\n  getCenterPoint(dst={x: 0, y: 0})\n  {\n    const from = this._from;\n    const to = this._to;\n    if (this.isPlaceholder())\n    {\n      const halfPlaceholderLength = this.getPlaceholderLength() / 2;\n      dst.x = from.x + halfPlaceholderLength;\n      dst.y = from.y + halfPlaceholderLength;\n    }\n    else\n    {\n      dst.x = from.x + (to.x - from.x) / 2;\n      dst.y = from.y + (to.y - from.y) / 2;\n    }\n    return dst;\n  }\n\n  getEndPoint(dst={x: 0, y: 0})\n  {\n    if (this.isPlaceholder())\n    {\n      const from = this._from;\n      const placeholderLength = getPlaceholderLength();\n      dst.x = from.x + placeholderLength;\n      dst.y = from.y + placeholderLength;\n    }\n    else\n    {\n      const to = this._to;\n      dst.x = to.x;\n      dst.y = to.y;\n    }\n    return dst;\n  }\n\n  getPlaceholderLength()\n  {\n    return this._from.getNodeSize();\n  }\n\n  isPlaceholder()\n  {\n    return !this._to;\n  }\n\n  isSelfLoop()\n  {\n    return this._from === this._to;\n  }\n}\n\nexport default GraphEdge;\n","import GraphEdge from 'graph/GraphEdge.js';\nimport { guid } from 'util/MathHelper.js';\n\nclass GraphCurvedEdge extends GraphEdge\n{\n  constructor(id, from, to)\n  {\n    super(id, from, null);\n\n    //radians = the angle in radians, where 0 is the normal of midpoint\n    //length = the distance from midpoint\n    this._quad = {\n      radians: 0,\n      length: 0,\n      _coords: {x: 0, y: 0}\n    };\n\n    //Make sure to format it correctly when creating...\n    this.changeDestinationNode(to);\n  }\n\n  setQuadratic(radians, length=undefined)\n  {\n    this._quad.radians = radians;\n    if (typeof length === 'number')\n    {\n      this._quad.length = length;\n    }\n    return this;\n  }\n\n  getQuadratic()\n  {\n    return this._quad;\n  }\n\n  isQuadratic()\n  {\n    return !this.isPlaceholder() && this._quad.length != 0;\n  }\n\n  setQuadraticByCoords(x, y)\n  {\n    const from = this._from;\n    const to = this._to;\n    const fromx = from.x;\n    const fromy = from.y;\n    const tox = to.x;\n    const toy = to.y;\n\n    let dx = tox - fromx;\n    let dy = toy - fromy;\n    const midpointx = fromx + dx / 2;\n    const midpointy = fromy + dy / 2;\n\n    //Remember: y-axis is flipped because canvas coord-space is -y => +y\n    //Therefore, dy needs to be flipped\n    const angleOffset = Math.atan2(-dy, dx);\n    dx = x - midpointx;\n    dy = y - midpointy;\n\n    const PI = Math.PI;\n    const PI2 = PI * 2;\n    const HALFPI = PI / 2;\n    //0 rad = to the right\n    //Also: angleOffset is the offset from midpoint angle, the orthogonal base vector\n    //This is because the from and to could be flipped, and\n    //therefore give a negative, or at least a reversed angle.\n    let radians = Math.atan2(dy, dx) + angleOffset;\n    let length = Math.sqrt(dx * dx + dy * dy);\n    if (length < 0) length = 0;\n\n    const outrad = radians - (-HALFPI);//-PI / 2 is outward\n    const inrad = radians - (HALFPI);//PI / 2 is inward\n    //TODO: Should be dependent on length\n    const maxdr = PI / 20;\n\n    if (Math.abs(length) < 8)\n    {\n      radians = 0;\n      length = 0;\n    }\n    else if (outrad < maxdr && outrad > -maxdr)\n    {\n      radians = -HALFPI;//-PI / 2 is outward\n    }\n    else if (-inrad < maxdr && -inrad > -maxdr)\n    {\n      radians = HALFPI;//PI / 2 is inward\n    }\n\n    this._quad.radians = radians;\n    this._quad.length = length;\n  }\n\n  getQuadraticAsCoords()\n  {\n    const from = this._from;\n    const to = this._to;\n    const dst = this._quad._coords;\n    if (from == null || to == null)\n    {\n      dst.x = 0;\n      dst.y = 0;\n    }\n    else\n    {\n      /*\n      //To mark dirty...\n      _capture: {\n        fx: 0, fy: 0,\n        tx: 0, ty: 0,\n        ql: 0, qr: 0\n      }\n      */\n      getDirectionalVector(from.x, from.y, to.x, to.y, this._quad.length, this._quad.radians, dst);\n    }\n    return dst;\n  }\n\n  getSelfLoopHeight()\n  {\n    return this._from.getNodeSize();\n  }\n\n  formatAsSelfLoop()\n  {\n    this.setQuadratic(-Math.PI / 2, this._from.getNodeSize() + this.getSelfLoopHeight());\n  }\n\n  formatAsPlaceholder(prevDest)\n  {\n    //Quad is re-used to determine edge angle for placeholder\n    //This can be used specifically for quad since regular quad is\n    //dependent on this._to != null, which placeholder assumes this._to == null.\n    //Also, quad.length is ignored, because the length should always be\n    //getPlaceholderLength(). This is resolved by getStartPoint(), etc.\n    if (prevDest)\n    {\n      const dx = this._from.x - prevDest.x;\n      const dy = this._from.y - prevDest.y;\n      const angle = -Math.atan2(dx, dy) - (Math.PI / 2);\n      this._quad.radians = angle;\n    }\n    else\n    {\n      this._quad.radians = 0;\n    }\n  }\n\n  //Override\n  changeDestinationNode(node)\n  {\n    const prevDest = this._to;\n\n    //Just to optimize this a little :)\n    if (prevDest === node) return;\n\n    super.changeDestinationNode(node);\n\n    if (this.isPlaceholder())\n    {\n      this.formatAsPlaceholder(prevDest);\n    }\n    else if (this.isSelfLoop())\n    {\n      this.formatAsSelfLoop();\n    }\n  }\n\n  //Override\n  getEdgeDirection()\n  {\n    let result = 0;\n    if (this.isQuadratic())\n    {\n      const coords = this.getQuadraticAsCoords();\n      result = Math.atan2(coords.y, coords.x) + Math.PI / 2;\n    }\n    else\n    {\n      result = super.getEdgeDirection();\n    }\n\n    return result;\n  }\n\n  //Override\n  getStartPoint(dst={x: 0, y: 0})\n  {\n    const from = this._from;\n    const to = this._to;\n\n    if (!from) throw new Error(\"Source of edge cannot be null.\");\n    if (!to)\n    {\n      //Make sure to use quad for placeholder direction (not magnitude)\n      const px = Math.cos(this._quad.radians);\n      const py = Math.sin(this._quad.radians);\n      const nodeSize = from.getNodeSize();\n      dst.x = from.x + px * nodeSize;\n      dst.y = from.y + py * nodeSize;\n      return dst;\n    }\n\n    //Check if edge is following something other than a node...then remain flat\n    if (!to.getNodeSize || !this.isQuadratic())\n    {\n      getDirectionalVector(from.x, from.y, to.x, to.y, from.getNodeSize(), 0, dst);\n      dst.x += from.x;\n      dst.y += from.y;\n      return dst;\n    }\n    else\n    {\n      getMidPoint(from.x, from.y, to.x, to.y, dst);\n      const qcoords = this.getQuadraticAsCoords();\n      const qx = dst.x + qcoords.x;\n      const qy = dst.y + qcoords.y;\n      getDirectionalVector(from.x, from.y, qx, qy, from.getNodeSize(), this.isSelfLoop() ? (Math.PI / 4) : 0, dst);\n      dst.x += from.x;\n      dst.y += from.y;\n      return dst;\n    }\n  }\n\n  //Override\n  getEndPoint(dst={x: 0, y: 0})\n  {\n    const from = this._from;\n    const to = this._to;\n\n    if (!from) throw new Error(\"Source of edge cannot be null.\");\n    if (!to)\n    {\n      //Make sure to use quadCoords for placeholder direction (not magnitude)\n      const px = Math.cos(this._quad.radians);\n      const py = Math.sin(this._quad.radians);\n      const placeholderLength = from.getNodeSize() + this.getPlaceholderLength();\n      dst.x = from.x + px * placeholderLength;\n      dst.y = from.y + py * placeholderLength;\n      return dst;\n    }\n\n    //Get end point for non-nodes...\n    if (!to.getNodeSize)\n    {\n      return to;\n    }\n    //Get end point for straight edges...\n    else if (!this.isQuadratic())\n    {\n      getDirectionalVector(to.x, to.y, from.x, from.y, to.getNodeSize(), 0, dst);\n      dst.x += to.x;\n      dst.y += to.y;\n      return dst;\n    }\n    //Get end point for quadratics...\n    else\n    {\n      getMidPoint(from.x, from.y, to.x, to.y, dst);\n      const qcoords = this.getQuadraticAsCoords();\n      const qx = dst.x + qcoords.x;\n      const qy = dst.y + qcoords.y;\n      getDirectionalVector(to.x, to.y, qx, qy, to.getNodeSize(), this.isSelfLoop() ? -(Math.PI / 4.0) : 0, dst);\n      dst.x += to.x;\n      dst.y += to.y;\n      return dst;\n    }\n  }\n\n  //Override\n  getCenterPoint(dst={x: 0, y: 0})\n  {\n    const from = this._from;\n    const to = this._to;\n\n    if (!from) throw new Error(\"Source of edge cannot be null.\");\n    if (!to)\n    {\n      //Make sure to use quad for placeholder direction (not magnitude)\n      const px = Math.cos(this._quad.radians);\n      const py = Math.sin(this._quad.radians);\n      const placeholderLength = from.getNodeSize() + this.getPlaceholderLength() / 2;\n      dst.x = from.x + px * placeholderLength;\n      dst.y = from.y + py * placeholderLength;\n      return dst;\n    }\n\n    getMidPoint(from.x, from.y, to.x, to.y, dst);\n\n    if (this.isQuadratic())\n    {\n      const qcoords = this.getQuadraticAsCoords();\n      dst.x += qcoords.x;\n      dst.y += qcoords.y;\n    }\n\n    return dst;\n  }\n}\n\nfunction getDirectionalVector(x1, y1, x2, y2, dist, angleOffset=0, dst={x: 0, y: 0})\n{\n  const dx = x2 - x1;\n  const dy = y2 - y1;\n  const angle = Math.atan2(dy, dx) + angleOffset;\n  dst.x = Math.cos(angle) * dist;\n  dst.y = Math.sin(angle) * dist;\n  return dst;\n}\n\nfunction getMidPoint(x1, y1, x2, y2, dst={x: 0, y: 0})\n{\n  dst.x = x1 + (x2 - x1) / 2;\n  dst.y = y1 + (y2 - y1) / 2;\n  return dst;\n}\n\nexport default GraphCurvedEdge;\n","import QuadraticEdge from 'graph/QuadraticEdge.js';\n\nimport { guid } from 'util/MathHelper.js';\n\nclass Edge extends QuadraticEdge\n{\n  constructor(graph, from, to, label)\n  {\n    super(guid(), from, to);\n\n    this.graph = graph;\n    this._label = label;\n  }\n\n  //Override\n  setEdgeLabel(label)\n  {\n    const prevLabel = this._label;\n    super.setEdgeLabel(label);\n\n    if (prevLabel != label)\n    {\n      this.graph.emit(\"edgeLabel\", this, label, prevLabel);\n\n      this.graph.markDirty();\n    }\n  }\n}\n\nexport default Edge;\n","import Config from 'config.js';\nimport Eventable from 'util/Eventable.js';\n\nimport GraphLayout from 'graph/GraphLayout.js';\n\nimport Node from './Node.js';\nimport Edge from './Edge.js';\nimport { EMPTY } from 'machine/Symbols.js';\n\nconst EDGE_SYMBOL_SEPARATOR = Config.EDGE_SYMBOL_SEPARATOR;\n\nclass NodalGraph\n{\n  constructor(nodes=[], edges=[])\n  {\n    this.nodes = nodes;\n    this.edges = edges;\n\n    //nodeCreate(node) - Whenever a new node is created\n    this.registerEvent(\"nodeCreate\");\n    //nodeDestroy(node) - Whenever a node is destroyed (even on clear)\n    this.registerEvent(\"nodeDestroy\");\n    //nodeLabel(node, newLabel, oldLabel) - Whenever a node label changes\n    this.registerEvent(\"nodeLabel\");\n    //nodeCustomLabel(node, newLabel, oldLabel) - Whenever a node custom label changes\n    this.registerEvent(\"nodeCustomLabel\");\n    //edgeCreate(edge) - Whenever a new edge is created\n    this.registerEvent(\"edgeCreate\");\n    //edgeDestroy(edge) - Whenever an edge is destroyed (even on clear)\n    this.registerEvent(\"edgeDestroy\");\n    //edgeLabel(edge, newLabel, oldLabel) - Whenever a node label changes\n    this.registerEvent(\"edgeLabel\");\n    //edgeDestination(edge, newDestination, oldDestination) - Whenever a node changes destination\n    this.registerEvent(\"edgeDestination\");\n    //toggleAccept(node) - Whenever a node changes to an accept state, or vice versa\n    this.registerEvent(\"toggleAccept\");\n    //newInitial(node, oldNode) - Whenever a node becomes the initial state; oldNode could be null\n    this.registerEvent(\"newInitial\");\n    //markDirty(graph) - Whenever the graph is marked dirty\n    this.registerEvent(\"markDirty\");\n  }\n\n  getNodeByLabel(label)\n  {\n    for(const node of this.nodes)\n    {\n      if (node.getNodeLabel() == label)\n      {\n        return node;\n      }\n    }\n\n    return null;\n  }\n\n  getNodeIndexByID(id)\n  {\n    const length = this.nodes.length;\n    for(let i = 0; i < length; ++i)\n    {\n      const node = this.nodes[i];\n      if (node.getGraphElementID() == id)\n      {\n        return i;\n      }\n    }\n    return -1;\n  }\n\n  getNodeIndex(node)\n  {\n    for(let i = this.nodes.length - 1; i >= 0; --i)\n    {\n      const other = this.nodes[i];\n      if (node === other)\n      {\n        return i;\n      }\n    }\n    return -1;\n  }\n\n  getNodeIndexByLabel(label)\n  {\n    for(let i = this.nodes.length - 1; i >= 0; --i)\n    {\n      const node = this.nodes[i];\n      if (node.getNodeLabel() == label)\n      {\n        return i;\n      }\n    }\n\n    return -1;\n  }\n\n  getReachableState()\n  {\n    let reachable = []\n    let startNode = this.getStartNode();\n    reachable.push(startNode);\n    for(let i = 0; i < reachable.length; i++)\n    {\n      for (const edge of this.edges)\n      {\n        if(edge.from == reachable[i])\n        {\n          if(!reachable.includes(edge.to))\n          {\n            reachable.push(edge.to);\n          }\n        }\n      }\n    }\n    return reachable\n  }\n\n  newNode(x, y, label)\n  {\n    const result = new Node(this, x, y, label);\n    if (this.nodes.length == 0)\n    {\n      this.emit(\"newInitial\", result, null);\n    }\n    this.nodes.push(result);\n    this.emit(\"nodeCreate\", result);\n\n    this.markDirty();\n    return result;\n  }\n\n  deleteNode(node)\n  {\n    //Make sure that any connections to this node are resolved before removal\n    let edge = null;\n    for(let i = this.edges.length - 1; i >= 0; --i)\n    {\n      edge = this.edges[i];\n      if (edge.getSourceNode() == node)\n      {\n        //Delete any edges that have this node as a source\n        this.edges.splice(i, 1);\n        this.emit(\"edgeDestroy\", edge);\n      }\n      else if (edge.getDestinationNode() == node)\n      {\n        //Return any edges that have this node as a destination\n        edge.changeDestinationNode(null);\n      }\n    }\n    let nodeIndex = this.nodes.indexOf(node);\n    this.nodes.splice(nodeIndex, 1);\n    if (nodeIndex == 0)\n    {\n      this.emit(\"newInitial\", this.getStartNode(), node);\n    }\n    this.emit(\"nodeDestroy\", node);\n\n    this.markDirty();\n  }\n\n  getEdgeIndexByID(id)\n  {\n    const length = this.edges.length;\n    for(let i = 0; i < length; ++i)\n    {\n      const edge = this.edges[i];\n      if (edge.getGraphElementID() == id)\n      {\n        return i;\n      }\n    }\n    return -1;\n  }\n\n  newEdge(from, to, label)\n  {\n    const result = new Edge(this, from, to, label);\n    this.edges.push(result);\n\n    this.emit(\"edgeCreate\", result);\n\n    this.markDirty();\n    return result;\n  }\n\n  //This is more like addEdge() without adding it to the graph and just returns the result\n  //This should only be called once when completing an edge\n  formatEdge(edge)\n  {\n    const edgeSource = edge.getSourceNode();\n    const edgeDestination = edge.getDestinationNode();\n    const edgeLabel = edge.getEdgeLabel().split(EDGE_SYMBOL_SEPARATOR);\n\n    //Look for an existing edge with similar from and to\n    for(const otherEdge of this.edges)\n    {\n      if (otherEdge === edge) continue;\n      if (otherEdge.getSourceNode() === edgeSource && otherEdge.getDestinationNode() === edgeDestination)\n      {\n        const otherEdgeLabel = otherEdge.getEdgeLabel();\n        if (edgeLabel.length > 0)\n        {\n          const result = otherEdgeLabel.split(EDGE_SYMBOL_SEPARATOR).concat(edgeLabel);\n          otherEdge.setEdgeLabel(result.join(EDGE_SYMBOL_SEPARATOR));\n        }\n\n        //Merged with newfound edge...\n        return otherEdge;\n      }\n    }\n\n    //Otherwise, format the current edge\n\n    if (!edge.isSelfLoop())\n    {\n      let flag = false;\n\n      //Bend away if there is another edge not bent with the same src/dst\n      const parallelEdgeHeight = Config.PARALLEL_EDGE_HEIGHT;\n      const HALFPI = Math.PI / 2;\n      for(const otherEdge of this.edges)\n      {\n        if (otherEdge.isQuadratic() && Math.abs(otherEdge.getQuadratic().length) >= parallelEdgeHeight * 2) continue;\n        if ((otherEdge.getDestinationNode() === edgeSource && otherEdge.getSourceNode() === edgeDestination))\n        {\n          edge.setQuadratic(HALFPI, parallelEdgeHeight);\n          otherEdge.setQuadratic(HALFPI, parallelEdgeHeight);\n          flag = true;\n\n          //ASSUMES that there will only ever be 2 edges that are parallel...\n          break;\n        }\n      }\n\n      //Try to move the edge away from intersecting nodes...\n      if (!flag)\n      {\n        const x1 = edgeSource.x;\n        const y1 = edgeSource.y;\n        const x2 = edgeDestination.x;\n        const y2 = edgeDestination.y;\n        const dist12sq = (x2 - x1) * (x2 - x1) + (y2 - y1) * (y2 - y1);\n        let vertical = false;\n        let m = 0;\n        let b = 0;\n\n        if(x1 > x2)\n        {\n          m = (y1-y2) / (x1-x2);\n          b = y2-m*x2;\n        }\n        else if (x1 < x2)\n        {\n          m = (y2-y1) / (x2-x1);\n          b = y1-m*x1;\n        }\n        else\n        {\n          vertical = true;\n        }\n\n        for(const node of this.nodes)\n        {\n          if(node === edgeSource || node === edgeDestination) continue;\n\n          const x0 = node.x;\n          const y0 = node.y;\n\n          const dist01sq = (x1-x0)*(x1-x0) + (y1-y0)*(y1-y0);\n          const dist02sq = (x2-x0)*(x2-x0) + (y2-y0)*(y2-y0);\n          if(dist01sq > dist12sq || dist02sq > dist12sq) continue;\n\n          let dist = 0;\n          if(vertical) {\n            dist = Math.abs(x1-x0);\n          } else {\n            dist = Math.abs(b+ m*x0 - y0) / Math.sqrt(1+m*m);\n          }\n\n          if(dist < Config.NODE_RADIUS)\n          {\n            flag = true;\n            break;\n          }\n        }\n\n        if (flag)\n        {\n          edge.setQuadratic(-Math.PI / 2, Config.NODE_RADIUS + 10);\n        }\n      }\n    }\n\n    return edge;\n  }\n\n  deleteEdge(edge)\n  {\n    this.edges.splice(this.edges.indexOf(edge), 1);\n    this.emit(\"edgeDestroy\", edge);\n\n    this.markDirty();\n  }\n\n  deleteAll()\n  {\n    for(let node of this.nodes)\n    {\n      this.emit(\"nodeDestroy\", node);\n    }\n    this.nodes.length = 0;\n\n    for(let edge of this.edges)\n    {\n      this.emit(\"edgeDestroy\", edge);\n    }\n    this.edges.length = 0;\n\n    this.markDirty();\n  }\n\n  isEmpty()\n  {\n    return this.nodes.length <= 0;\n  }\n\n  setStartNode(node)\n  {\n    if (this.nodes.length <= 1) return;\n\n    this.nodes.splice(this.nodes.indexOf(node), 1);\n    const prevNode = this.nodes[0];\n    this.nodes.unshift(node);\n    this.emit(\"newInitial\", node, prevNode);\n\n    this.markDirty();\n  }\n\n  getStartNode()\n  {\n    return this.nodes.length > 0 ? this.nodes[0] : null;\n  }\n\n  getBoundingRect()\n  {\n    if (this.nodes.length <= 0) return {\n      minX: 0, minY: 0, maxX: 1, maxY: 1, width: 1, height: 1\n    };\n\n    var minNX = Number.MAX_VALUE;\n    var minNY = Number.MAX_VALUE;\n    var maxNX = Number.MIN_VALUE;\n    var maxNY = Number.MIN_VALUE;\n\n    this.nodes.forEach(function (node) {\n      const x = node.x;\n      const y = node.y;\n\n      minNX = Math.min(minNX, x);\n      maxNX = Math.max(maxNX, x);\n\n      minNY = Math.min(minNY, y);\n      maxNY = Math.max(maxNY, y);\n    });\n\n    minNX -= Config.NODE_RADIUS;\n    minNY -= Config.NODE_RADIUS;\n    maxNX += Config.NODE_RADIUS;\n    maxNY += Config.NODE_RADIUS;\n\n    var minEX = Number.MAX_VALUE;\n    var minEY = Number.MAX_VALUE;\n    var maxEX = Number.MIN_VALUE;\n    var maxEY = Number.MIN_VALUE;\n    this.edges.forEach(function (edge) {\n      const startpoint = edge.getStartPoint();\n      const endpoint = edge.getEndPoint();\n      const center = edge.getCenterPoint();\n\n      const sx = startpoint.x;\n      const sy = startpoint.y;\n      const ex = endpoint.x;\n      const ey = endpoint.y;\n      const cx = center.x;\n      const cy = center.y;\n\n      minEX = Math.min(minEX, sx, ex, cx);\n      maxEX = Math.max(maxEX, sx, ex, cx);\n\n      minEY = Math.min(minEY, sy, ey, cy);\n      maxEY = Math.max(maxEY, sy, ey, cy);\n    });\n\n    const result = {\n      minX: Math.min(minNX, minEX),//minNX < minEX ? minNX : minEX,\n      minY: Math.min(minNY, minEY),//minNY < minEY ? minNY : minEY,\n      maxX: Math.max(maxNX, maxEX),//maxNX > maxEX ? maxNX : maxEX,\n      maxY: Math.max(maxNY, maxEY),//maxNY > maxEY ? maxNY : maxEY,\n      width: 0,\n      height: 0\n    };\n    result.width = result.maxX - result.minX;\n    result.height = result.maxY - result.minY;\n    return result;\n  }\n\n  copyGraph(graph)\n  {\n    this.deleteAll();\n    this.nodes = this.nodes.concat(graph.nodes);\n    this.edges = this.edges.concat(graph.edges);\n\n    //Reassign all nodes and edges to new graph\n    for(const node of graph.nodes)\n    {\n      node.graph = this;\n    }\n    for(const edge of graph.edges)\n    {\n      edge.graph = this;\n    }\n\n    this.markDirty();\n  }\n\n  copyMachine(machine)\n  {\n    this.deleteAll();\n\n    //Add all states\n    let node;\n    for(const state of machine.getStates())\n    {\n      node = this.newNode(0, 0, state);\n      if (machine.isFinalState(state))\n      {\n        node.accept = true;\n      }\n    }\n\n    //Add all transitions\n    let edge, from, to, read, labels, flag;\n    for(let transition of machine.getTransitions())\n    {\n      from = this.getNodeByLabel(transition[0]);\n      read = transition[1];\n      to = this.getNodeByLabel(transition[2]);\n      edge = this.newEdge(from, to, read);\n      const formattedEdge = this.formatEdge(edge);\n      if (edge != formattedEdge) this.deleteEdge(edge);\n    }\n\n    //Set start state\n    const startState = machine.getStartState();\n    this.setStartNode(this.getNodeByLabel(startState));\n\n    //Auto layout graph\n    GraphLayout.applyLayout(this);\n\n    this.markDirty();\n  }\n\n  markDirty()\n  {\n    this.emit(\"markDirty\", this);\n  }\n\n  toDFA(dst=null)\n  {\n    throw new Error(\"DEPRECATED!\");\n  }\n\n  toNFA(dst=null)\n  {\n    throw new Error(\"DEPRECATED!\");\n  }\n\n  //TODO: NEVER CALL THIS DIRECTLY (Only FSABuilder is allowed.) Will be deprecated later.\n  _toNFA(dst=null)\n  {\n    throw new Error(\"DEPRECATED!\");\n  }\n}\n//Mixin Eventable\nEventable.mixin(NodalGraph);\n\nexport default NodalGraph;\n","import Config from 'config.js';\n\nclass MachineLabeler\n{\n  constructor(graph)\n  {\n    this.graph = graph;\n    this.prefix = Config.STR_STATE_LABEL;\n\n    //TODO: this is hooked into the controller in App.js\n    this.shouldAutoLabel = false;\n  }\n\n  sortDefaultNodeLabels()\n  {\n    const startNode = this.graph.getStartNode();\n    if (!startNode) return;\n    const isDefaultInitial = !startNode.hasCustomLabel();\n\n    const defaultNodes = [];\n    const customLabels = [];\n    for(const node of this.graph.nodes)\n    {\n      if (node.hasCustomLabel())\n      {\n        customLabels.push(node.getNodeLabel());\n      }\n      else\n      {\n        defaultNodes.push(node);\n      }\n    }\n\n    let index = isDefaultInitial ? 0 : 1;\n    for(const node of defaultNodes)\n    {\n      let defaultName = null;\n      while(customLabels.includes(\n        defaultName = this.getDefaultNodeLabelByIndex(index++))) {}\n\n      node.setNodeLabel(defaultName);\n    }\n  }\n\n  getNextDefaultNodeLabel()\n  {\n    //if (!this.shouldAutoLabel) return this.prefix;\n\n    let nodeIndex = 0;\n    let result = this.getDefaultNodeLabelByIndex(nodeIndex);\n    while(!this.isUniqueNodeLabel(result))\n    {\n      ++nodeIndex;\n      result = this.getDefaultNodeLabelByIndex(nodeIndex);\n    }\n    return result;\n  }\n\n  getDefaultNodeLabelByIndex(index)\n  {\n    return this.prefix + (index);\n  }\n\n  isUniqueNodeLabel(newLabel)\n  {\n    for(const node of this.graph.nodes)\n    {\n      if (node.getNodeLabel() == newLabel)\n      {\n        return false;\n      }\n    }\n\n    return true;\n  }\n}\n\nexport default MachineLabeler;\n","import Config from 'config.js';\nimport MachineLabeler from './MachineLabeler.js';\n\nconst DEFAULT_AUTO_RENAME = true;\n\nclass MachineBuilder\n{\n  constructor(graph)\n  {\n    this.graph = graph;\n    this.graphController = null;\n\n    this.labeler = new MachineLabeler(graph);\n\n    this.onGraphNodeLabelChange = this.onGraphNodeLabelChange.bind(this);\n  }\n\n  initialize(app)\n  {\n    this.graphController = app.graphController;\n\n    this.setAutoRenameNodes(DEFAULT_AUTO_RENAME);\n  }\n\n  destroy()\n  {\n\n  }\n\n  onGraphNodeLabelChange(graph, node, targetNodes, prevX, prevY)\n  {\n    this.labeler.sortDefaultNodeLabels();\n  }\n\n  setAutoRenameNodes(enable)\n  {\n    const prev = this.labeler.shouldAutoLabel;\n    this.labeler.shouldAutoLabel = enable;\n    if (prev != enable && enable)\n    {\n      this.graphController.on(\"userDeleteNodes\", this.onGraphNodeLabelChange);\n    }\n    else\n    {\n      this.graphController.removeEventListener(\"userDeleteNodes\", this.onGraphNodeLabelChange);\n    }\n  }\n\n  shouldAutoRenameNodes()\n  {\n    return this.labeler.shouldAutoLabel;\n  }\n\n  getLabeler()\n  {\n    return this.labeler;\n  }\n}\n\nexport default MachineBuilder;\n","import React from 'react';\n\nclass StateUnreachableWarningMessage extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.targetIndex = 0;\n    this.targetLabel = \"\";\n    const targets = props.message.value;\n    for(const target of targets)\n    {\n      if (this.targetLabel.length > 0)\n      {\n        this.targetLabel += \", \";\n      }\n      this.targetLabel += target.getNodeLabel();\n    }\n\n    this.onClick = this.onClick.bind(this);\n  }\n\n  onClick(e)\n  {\n    const graphController = this.props.graphController;\n    const machineController = this.props.machineController;\n    const buttonValue = e.target.value;\n    const message = this.props.message;\n    switch(buttonValue)\n    {\n      case \"locate\":\n      {\n        //Locate the target node\n        const target = message.value[this.targetIndex++];\n        if (this.targetIndex >= message.value.length)\n        {\n          this.targetIndex = 0;\n        }\n\n        //Move pointer to target\n        graphController.focusOnNode(target);\n      }\n      break;\n      case \"deleteall\":\n      {\n        const targets = message.value;\n        //Delete all target nodes\n        for(const node of targets)\n        {\n          graphController.getGraph().deleteNode(node);\n        }\n\n        //Sort the nodes after deleting if enabled...\n        machineController.getMachineBuilder().labeler.sortDefaultNodeLabels();\n\n        //Exit the message\n        message.close();\n      }\n      break;\n      default:\n        throw new Error(\"Unknown button value for message\");\n    }\n  }\n\n  //Override\n  render()\n  {\n    return <div>\n      <p>{I18N.toString(\"message.warning.unreachable\") + \": \" + this.targetLabel}</p>\n      <button value=\"locate\" onClick={this.onClick}>{I18N.toString(\"message.action.locate\")}</button>\n      <button value=\"deleteall\" onClick={this.onClick}>{I18N.toString(\"message.action.deleteall\")}</button>\n    </div>;\n  }\n}\n\nexport default StateUnreachableWarningMessage;\n","import React from 'react';\n\nclass StateMissingTransitionErrorMessage extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.targetIndex = 0;\n    this.targetLabel = \"\";\n    const targets = props.message.value.targets;\n    for(const target of targets)\n    {\n      if (this.targetLabel.length > 0)\n      {\n        this.targetLabel += \", \";\n      }\n      this.targetLabel += target.getNodeLabel();\n    }\n\n    this.onClick = this.onClick.bind(this);\n  }\n\n  onClick(e)\n  {\n    const graphController = this.props.graphController;\n    const machineController = this.props.machineController;\n    const buttonValue = e.target.value;\n    const message = this.props.message;\n    switch(buttonValue)\n    {\n      case \"locate\":\n      {\n        const targets = message.value.targets;\n        const targetLength = targets.length;\n        if (targetLength > 0 && this.targetIndex < targetLength)\n        {\n          //Locate the target edge\n          const target = targets[this.targetIndex++];\n          if (this.targetIndex >= targetLength) this.targetIndex = 0;\n\n          //Move pointer to target\n          graphController.focusOnNode(target);\n        }\n      }\n      break;\n      default:\n        throw new Error(\"Unknown button value for message\");\n    }\n  }\n\n  //Override\n  render()\n  {\n    return <div>\n      <p>{I18N.toString(\"message.error.missing\") + \": \" + this.targetLabel}</p>\n      <button value=\"locate\" onClick={this.onClick}>{I18N.toString(\"message.action.locate\")}</button>\n    </div>;\n  }\n}\n\nexport default StateMissingTransitionErrorMessage;\n","import React from 'react';\n\nimport { ARROW } from 'machine/Symbols.js';\n\nclass TransitionErrorMessage extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.targetIndex = 0;\n    this.targetLabel = \"\";\n    const targets = props.message.value.targets;\n    for(const target of targets)\n    {\n      if (this.targetLabel.length > 0)\n      {\n        this.targetLabel += \", \";\n      }\n      this.targetLabel += \"(\" + target.getSourceNode().getNodeLabel() + \", \" + target.getDestinationNode().getNodeLabel() + \") \" + ARROW + \" \" + target.getEdgeLabel();\n    }\n\n    this.onClick = this.onClick.bind(this);\n  }\n\n  onClick(e)\n  {\n    const graphController = this.props.graphController;\n    const machineController = this.props.machineController;\n    const buttonValue = e.target.value;\n    const message = this.props.message;\n    switch(buttonValue)\n    {\n      case \"locate\":\n      {\n        const targets = message.value.targets;\n        const targetLength = targets.length;\n        if (targetLength > 0 && this.targetIndex < targetLength)\n        {\n          //Locate the target edge\n          const target = targets[this.targetIndex++];\n          if (this.targetIndex >= targetLength) this.targetIndex = 0;\n\n          //Move pointer to target\n          graphController.focusOnEdge(target);\n        }\n      }\n      break;\n      case \"deleteall\":\n      {\n        const targets = message.value.targets;\n        //Delete all target edges\n        for(const edge of targets)\n        {\n          graphController.getGraph().deleteEdge(edge);\n        }\n        //Exit the message\n        message.close();\n      }\n      break;\n      default:\n        throw new Error(\"Unknown button value for message\");\n    }\n  }\n\n  //Override\n  render()\n  {\n    return <div>\n      <p>{this.props.message.value.text + \": \" + this.targetLabel}</p>\n      <button value=\"locate\" onClick={this.onClick}>{I18N.toString(\"message.action.locate\")}</button>\n      <button value=\"deleteall\" onClick={this.onClick}>{I18N.toString(\"message.action.deleteall\")}</button>\n    </div>;\n  }\n}\n\nexport default TransitionErrorMessage;\n","import Config from 'config.js';\nimport { EMPTY } from 'machine/Symbols.js';\n\nimport Notification from 'system/notification/Notification.js';\nimport StateUnreachableWarningMessage from 'modules/fsa/notifications/StateUnreachableWarningMessage.js';\nimport StateMissingTransitionErrorMessage from 'modules/fsa/notifications/StateMissingTransitionErrorMessage.js';\nimport TransitionErrorMessage from 'modules/fsa/notifications/TransitionErrorMessage.js';\nimport StateErrorMessage from 'modules/fsa/notifications/StateErrorMessage.js';\n\nconst EDGE_SYMBOL_SEPARATOR = Config.EDGE_SYMBOL_SEPARATOR;\n\nclass DFAErrorChecker\n{\n  constructor(machineBuilder, graph)\n  {\n    this.machineBuilder = machineBuilder;\n    this.graph = graph;\n\n    this.errorNodes = [];\n    this.errorEdges = [];\n    this.warningNodes = [];\n    this.warningEdges = [];\n  }\n\n  clear()\n  {\n    this.errorNodes.length = 0;\n    this.errorEdges.length = 0;\n    this.warningNodes.length = 0;\n    this.warningEdges.length = 0;\n  }\n\n  checkErrors(shouldNotifyErrors=false, graphController=null, machineController=null)\n  {\n    //This should only run for \"DFA\" machine types...\n    if (this.machineBuilder.getMachineType() != \"DFA\")\n    {\n      throw new Error(\"Invalid machine type to check for DFA errors\");\n    }\n\n    const machine = this.machineBuilder.getMachine();\n    const graph = this.graph;\n    const alphabet = machine.getAlphabet();\n    const errorNodes = this.errorNodes;\n    const errorEdges = this.errorEdges;\n    const warnNodes = this.warningNodes;\n    const warnEdges = this.warningEdges;\n    this.clear();\n\n    let nodeTransitionMap = new Map();\n    let startNode = graph.getStartNode();\n\n    const placeholderEdges = [];\n    const emptyEdges = [];\n    const dupeEdges = [];\n    for(const edge of graph.edges)\n    {\n      //check incomplete edges\n      if (edge.isPlaceholder())\n      {\n        //Update cached error targets\n        placeholderEdges.push(edge);\n        if (errorEdges.indexOf(edge) == -1) errorEdges.push(edge);\n      }\n      else\n      {\n        const from = edge.getSourceNode();\n        const to = edge.getDestinationNode();\n        const labels = edge.getEdgeLabel().split(EDGE_SYMBOL_SEPARATOR);\n\n        for(const label of labels)\n        {\n          //check for empty transitions\n          if(label == EMPTY)\n          {\n            //Update cached error targets\n            emptyEdges.push(edge);\n            if (errorEdges.indexOf(edge) == -1) errorEdges.push(edge);\n          }\n          else\n          {\n            if(!nodeTransitionMap.has(from))\n            {\n              nodeTransitionMap.set(from, [label]);\n            }\n            else\n            {\n              //check for duplicate transitions\n              const currentAlphabet = nodeTransitionMap.get(from);\n              if(currentAlphabet.includes(label))\n              {\n                //Update cached error targets\n                dupeEdges.push(edge);\n                if (errorEdges.indexOf(edge) == -1) errorEdges.push(edge);\n              }\n              else\n              {\n                currentAlphabet.push(label);\n              }\n            }\n          }\n        }\n      }\n    }\n\n    const missingNodes = [];\n    //Check for missing transitions\n    for(const node of graph.nodes)\n    {\n      const nodeTransitions = nodeTransitionMap.get(node);\n      if (!nodeTransitions && alphabet.length != 0 ||\n        nodeTransitions && nodeTransitions.length < alphabet.length)\n      {\n        //Get the required missing symbols\n        /*\n        let array;\n        if (nodeTransitions)\n        {\n          array = [];\n          for(const symbol of alphabet)\n          {\n            if (!nodeTransitions.includes(symbol))\n            {\n              array.push(symbol);\n            }\n          }\n        }\n        else\n        {\n          array = alphabet.slice();\n        }\n        */\n\n        //Update cached error targets\n        missingNodes.push(node);\n        if (errorNodes.indexOf(node) == -1) errorNodes.push(node);\n      }\n    }\n\n    const result = !(errorNodes.length == 0 && errorEdges.length == 0 &&\n      warnNodes.length == 0 && warnEdges.length == 0);\n\n    //Callbacks for all collected errors\n    if (shouldNotifyErrors)\n    {\n      const messageTag = Config.MACHINE_ERRORS_MESSAGE_TAG;\n      //Clear the existing messages\n      Notification.clearMessages(messageTag);\n\n      //No errors!\n      if (!result)\n      {\n        Notification.addMessage(I18N.toString(\"message.error.none\"), \"success\", messageTag, null, null, false);\n      }\n      //There are some errors/warnings...\n      else\n      {\n        const props = {graphController: graphController, machineController: machineController};\n        //Add new warning messages\n        const unReachedNodes = getUnreachableNodes();\n        if (unReachedNodes.length > 0)\n        {\n          Notification.addMessage(unReachedNodes,\n            \"warning\", messageTag, StateUnreachableWarningMessage, props, false);\n        }\n\n        //Add new error messages\n        if (placeholderEdges.length > 0)\n        {\n          Notification.addMessage({text: I18N.toString(\"message.error.incomplete\"), targets: placeholderEdges},\n            \"error\", messageTag, TransitionErrorMessage, props, false);\n        }\n        if (emptyEdges.length > 0)\n        {\n          Notification.addMessage({text: I18N.toString(\"message.error.empty\"), targets: emptyEdges},\n            \"error\", messageTag, TransitionErrorMessage, props, false);\n        }\n        if (dupeEdges.length > 0)\n        {\n          Notification.addMessage({text: I18N.toString(\"message.error.dupe\"), targets: dupeEdges},\n            \"error\", messageTag, TransitionErrorMessage, props, false);\n        }\n        if (missingNodes.length > 0)\n        {\n          Notification.addMessage({targets: missingNodes},\n            \"error\", messageTag, StateMissingTransitionErrorMessage, props, false);\n        }\n      }\n    }\n\n    return result;\n  }\n\n  getUnreachableNodes() {\n    const graph = this.graph;\n    const machine = this.machineBuilder.getMachine();\n\n    const states = graph.nodes.slice();\n    const nextStates = [];\n    nextStates.push(states[0]);\n    states.splice(0, 1);\n\n    while(nextStates.length > 0)\n    {\n      const state = nextStates.pop();\n      const i = states.indexOf(state);\n      if (i >= 0)\n      {\n        states.splice(i, 1);\n        const result = machine.getOutgoingTransitions(state);\n        for(const state of result)\n        {\n          nextStates.push(state);\n        }\n      }\n    }\n\n    return states;\n  }\n}\n\nexport default DFAErrorChecker;\n","import Config from 'config.js';\nimport { EMPTY } from 'machine/Symbols.js';\n\nimport Notification from 'system/notification/Notification.js';\nimport StateUnreachableWarningMessage from 'modules/fsa/notifications/StateUnreachableWarningMessage.js';\nimport TransitionErrorMessage from 'modules/fsa/notifications/TransitionErrorMessage.js';\n\nconst EDGE_SYMBOL_SEPARATOR = Config.EDGE_SYMBOL_SEPARATOR;\n\nclass NFAErrorChecker\n{\n  constructor(machineBuilder, graph)\n  {\n    this.machineBuilder = machineBuilder;\n    this.graph = graph;\n\n    this.errorNodes = [];\n    this.errorEdges = [];\n    this.warningNodes = [];\n    this.warningEdges = [];\n  }\n\n  clear()\n  {\n    this.errorNodes.length = 0;\n    this.errorEdges.length = 0;\n    this.warningNodes.length = 0;\n    this.warningEdges.length = 0;\n  }\n\n  checkErrors(shouldNotifyErrors=false, graphController=null, machineController=null)\n  {\n    const machine = this.machineBuilder.getMachine();\n    const graph = this.graph;\n    const alphabet = machine.getAlphabet();\n    const errorNodes = this.errorNodes;\n    const errorEdges = this.errorEdges;\n    const warnNodes = this.warningNodes;\n    const warnEdges = this.warningEdges;\n    this.clear();\n\n    let nodeTransitionMap = new Map();\n    let unReachedNode = graph.nodes.slice();\n    let startNode = graph.getStartNode();\n    unReachedNode.splice(unReachedNode.indexOf(startNode),1);\n\n    const placeholderEdges = [];\n    const emptyEdges = [];\n    const dupeEdges = [];\n    for(const edge of graph.edges)\n    {\n      //check incomplete edges\n      if (edge.isPlaceholder())\n      {\n        //Update cached error targets\n        placeholderEdges.push(edge);\n        if (errorEdges.indexOf(edge) == -1) errorEdges.push(edge);\n      }\n      else\n      {\n        const from = edge.getSourceNode();\n        const to = edge.getDestinationNode();\n        const labels = edge.getEdgeLabel().split(EDGE_SYMBOL_SEPARATOR);\n\n        for(const label of labels)\n        {\n          //remove to from unReachedNode list\n          if (unReachedNode.includes(to)) unReachedNode.splice(unReachedNode.indexOf(to),1);\n        }\n      }\n    }\n\n    //check disconnect states\n    for (const node of unReachedNode)\n    {\n      if (warnNodes.indexOf(node) == -1) warnNodes.push(node);\n    }\n\n    const result = !(errorNodes.length == 0 && errorEdges.length == 0 &&\n      warnNodes.length == 0 && warnEdges.length == 0);\n\n    //Callbacks for all collected errors\n    const messageTag = Config.MACHINE_ERRORS_MESSAGE_TAG;\n    //Clear the existing messages\n    Notification.clearMessages(messageTag);\n\n    //No errors!\n    if (!result)\n    {\n      Notification.addMessage(I18N.toString(\"message.error.none\"), \"success\", messageTag, null, null, false);\n    }\n    //There are some errors/warnings...\n    else\n    {\n      const props = {graphController: graphController, machineController: machineController};\n\n      //Add new warning messages\n      if (unReachedNode.length > 0)\n      {\n        Notification.addMessage(unReachedNode,\n          \"warning\", messageTag, StateUnreachableWarningMessage, props, false);\n      }\n\n      //Add new error messages\n      if (placeholderEdges.length > 0)\n      {\n        Notification.addMessage({text: I18N.toString(\"message.error.incomplete\"), targets: placeholderEdges},\n          \"error\", messageTag, TransitionErrorMessage, props, false);\n      }\n    }\n\n    return result;\n  }\n\n  getUnreachableNodes() {\n\n    const graph = this.graph;\n\n    let unReachedNodes = graph.nodes.slice();\n\n    //keep start state\n    //unReachedNodes.splice(unReachedNodes.indexOf(unReachedNode.getStartNode()), 1);\n    for(const edge of graph.edges) {\n      const labels = edge.label.split(\",\");\n      for(const label of labels) {\n\n        const from = edge.from;\n        const to = edge.to;\n        //remove to from unReachedNode list\n        if(unReachedNodes.includes(to)) unReachedNodes.splice(unReachedNodes.indexOf(to),1);\n      }\n    }\n    return unReachedNodes;\n  }\n}\n\nexport default NFAErrorChecker;\n","import Config from 'config.js';\n\nimport MachineBuilder from './MachineBuilder.js';\nimport DFAErrorChecker from './DFAErrorChecker.js';\nimport NFAErrorChecker from './NFAErrorChecker.js';\nimport DFA from 'machine/DFA.js';\nimport NFA from 'machine/NFA.js';\nimport NodalGraph from 'graph/NodalGraph';\nimport Node from 'graph/Node.js';\n\nimport { EMPTY } from 'machine/Symbols.js';\n\nconst EDGE_SYMBOL_SEPARATOR = Config.EDGE_SYMBOL_SEPARATOR;\n\nclass FSABuilder extends MachineBuilder\n{\n  constructor(graph)\n  {\n    super(graph);\n\n    this._machine = new NFA();\n    this._machineType = \"DFA\";\n    this._machineValidDFA = false;\n    this._alphabet = [];\n    this._symbols = [];\n\n    this._timer = null;\n    this._errorTimer = null;\n\n    this.machineErrorChecker = new DFAErrorChecker(this, graph);\n    this.tester = null;\n\n    this.graphController = null;\n    this.machineController = null;\n\n    this.onGraphChange = this.onGraphChange.bind(this);\n    this.onDelayedGraphChange = this.onDelayedGraphChange.bind(this);\n    this.onDelayedErrorCheck = this.onDelayedErrorCheck.bind(this);\n  }\n\n  initialize(app)\n  {\n    super.initialize(app);\n\n    this.tester = app.testingManager;\n    this.graphController = app.graphController;\n    this.machineController = app.machineController;\n\n    this.graph.on(\"nodeCreate\", this.onGraphChange);\n    this.graph.on(\"nodeDestroy\", this.onGraphChange);\n    this.graph.on(\"nodeLabel\", this.onGraphChange);\n    this.graph.on(\"edgeCreate\", this.onGraphChange);\n    this.graph.on(\"edgeDestroy\", this.onGraphChange);\n    this.graph.on(\"edgeLabel\", this.onGraphChange);\n    this.graph.on(\"edgeDestination\", this.onGraphChange);\n    this.graph.on(\"toggleAccept\", this.onGraphChange);\n    this.graph.on(\"newInitial\", this.onGraphChange);\n    this.graph.on(\"markDirty\", this.onGraphChange);\n\n    this.onGraphChange();\n  }\n\n  destroy()\n  {\n    this.onGraphChange();\n\n    this.graph.removeEventListener(\"nodeCreate\", this.onGraphChange);\n    this.graph.removeEventListener(\"nodeDestroy\", this.onGraphChange);\n    this.graph.removeEventListener(\"nodeLabel\", this.onGraphChange);\n    this.graph.removeEventListener(\"edgeCreate\", this.onGraphChange);\n    this.graph.removeEventListener(\"edgeDestroy\", this.onGraphChange);\n    this.graph.removeEventListener(\"edgeLabel\", this.onGraphChange);\n    this.graph.removeEventListener(\"edgeDestination\", this.onGraphChange);\n    this.graph.removeEventListener(\"toggleAccept\", this.onGraphChange);\n    this.graph.removeEventListener(\"newInitial\", this.onGraphChange);\n    this.graph.removeEventListener(\"markDirty\", this.onGraphChange);\n\n    super.destroy();\n  }\n\n  onGraphChange(graph)\n  {\n    if (!this.tester) return;\n\n    if (this._timer)\n    {\n      clearTimeout(this._timer);\n      this._timer = null;\n    }\n\n    if (this._errorTimer)\n    {\n      clearTimeout(this._errorTimer);\n      this._errorTimer = null;\n    }\n\n    this._timer = setTimeout(this.onDelayedGraphChange, Config.GRAPH_IMMEDIATE_INTERVAL);\n    this._errorTimer = setTimeout(this.onDelayedErrorCheck,\n      this.tester.isImmediateErrorCheck ? (Config.GRAPH_IMMEDIATE_INTERVAL * 2) : Config.ERROR_CHECK_INTERVAL);\n  }\n\n  onDelayedGraphChange()\n  {\n    this._machine.clear();\n    const result = this.toNFA(this._machine);\n    for(const s of this._symbols)\n    {\n      this._machine.newSymbol(s);\n    }\n    this._machineValidDFA = this._machine.isValidDFA();\n  }\n\n  onDelayedErrorCheck()\n  {\n    if (!this.tester.shouldCheckError) return;\n\n    this.machineErrorChecker.checkErrors(true, this.graphController, this.machineController);\n  }\n\n  formatAlphabetString(string, allowNull=false)\n  {\n    const symbols = string.split(EDGE_SYMBOL_SEPARATOR);\n    const result = new Set();\n\n    let symbol = \"\";\n    let symbolLength = 0;\n    const length = symbols.length;\n    for(let i = 0; i < length; ++i)\n    {\n      symbol = symbols[i].trim();\n      symbolLength = symbol.length;\n      //If the symbol has none or more than 1 char\n      if (symbolLength !== 1)\n      {\n        //Remove symbol (by not adding to result)\n\n        //Divide multi-char symbol into smaller single char symbols\n        if (symbolLength > 1)\n        {\n          for(let subsymbol of symbol.split(\"\"))\n          {\n            subsymbol = subsymbol.trim();\n            if (!result.has(subsymbol))\n            {\n              result.add(subsymbol);\n            }\n          }\n        }\n      }\n      else\n      {\n        result.add(symbol);\n      }\n    }\n\n    //If it is an empty string...\n    if (result.size === 0) return allowNull ? null : EMPTY;\n    return Array.from(result).join(EDGE_SYMBOL_SEPARATOR);\n  }\n\n  setMachineType(machineType)\n  {\n    if (this._machineType == machineType) return;\n\n    this._machineType = machineType;\n    if (machineType == \"DFA\")\n    {\n      this.machineErrorChecker = new DFAErrorChecker(this, this.graph);\n    }\n    else if (machineType == \"NFA\")\n    {\n      this.machineErrorChecker = new NFAErrorChecker(this, this.graph);\n    }\n    else\n    {\n      throw new Error(\"Cannot find error checker for machine type \\'\" + machineType + \"\\'\");\n    }\n\n    this.onGraphChange();\n  }\n\n  getMachineType()\n  {\n    return this._machineType;\n  }\n\n  addCustomSymbol(symbol)\n  {\n    this._symbols.push(symbol);\n\n    this.onGraphChange();\n  }\n\n  removeCustomSymbol(symbol)\n  {\n    this._symbols.splice(this._symbols.indexOf(symbol), 1);\n\n    this.onGraphChange();\n  }\n\n  renameCustomSymbol(prevSymbol, nextSymbol)\n  {\n    const i = this._symbols.indexOf(prevSymbol);\n    if (i <= 0) throw new Error(\"Trying to rename unknown symbol \\'\" + prevSymbol + \"\\'\");\n    this._symbols[i] = nextSymbol;\n\n    this.onGraphChange();\n  }\n\n  isCustomSymbol(symbol)\n  {\n    return this._symbols.includes(symbol);\n  }\n\n  getAlphabet()\n  {\n    const machine = this.getMachine();\n    this._alphabet.length = 0;\n    machine.getAlphabet(this._alphabet);\n    return this._alphabet;\n  }\n\n  isValidMachine()\n  {\n    if (this._machineType == \"DFA\")\n    {\n      return this._machineValidDFA;\n    }\n    else\n    {\n      return true;\n    }\n  }\n\n  toDFA(dst = null)\n  {\n    const result = dst || new DFA();\n    if (!(result instanceof DFA))\n      throw new Error(\"Trying to parse graph mismatched machine type.\");\n    fillFSA(this.graph, result);\n    return result;\n  }\n\n  toNFA(dst=null)\n  {\n    const result = dst || new NFA();\n    if (!(result instanceof NFA))\n      throw new Error(\"Trying to parse graph mismatched machine type.\");\n    fillFSA(this.graph, result);\n    return result;\n  }\n\n  getMachine()\n  {\n    return this._machine;\n  }\n}\n\nfunction fillFSA(graph, fsa)\n{\n  if (graph.nodes.length <= 0) return fsa;\n  //Create all the nodes\n  for(const node of graph.nodes)\n  {\n    try\n    {\n      let state = node.getNodeLabel();\n      fsa.newState(state);\n\n      //Set final state\n      if (node.accept)\n      {\n        fsa.setFinalState(state, true);\n      }\n    }\n    catch(e)\n    {\n      throw e;\n    }\n  }\n\n  //Create all the edges\n  for(const edge of graph.edges)\n  {\n    //Ignore any incomplete edges\n    if (edge.isPlaceholder()) continue;\n    const from = edge.getSourceNode();\n    const to = edge.getDestinationNode();\n    if (from instanceof Node && to instanceof Node)\n    {\n      const labels = edge.getEdgeLabel().split(EDGE_SYMBOL_SEPARATOR);\n      for(const label of labels)\n      {\n        try\n        {\n          fsa.newTransition(from.getNodeLabel(), to.getNodeLabel(), label);\n        }\n        catch(e)\n        {\n          throw e;\n        }\n      }\n    }\n  }\n\n  //Set start state\n  let startState = graph.getStartNode().getNodeLabel();\n  fsa.setStartState(startState);\n\n  return fsa;\n}\n\nexport default FSABuilder;\n","import BaseModule from 'modules/base/BaseModule.js';\n\nimport OverviewPanel from './panels/overview/OverviewPanel.js';\nimport TestingPanel from './panels/testing/TestingPanel.js';\nimport AnalysisPanel from './panels/analysis/AnalysisPanel.js';\nimport AboutPanel from './panels/about/AboutPanel.js';\n\nimport NodalGraph from 'graph/NodalGraph.js';\n\nimport FSABuilder from './builder/FSABuilder.js';\n\nconst PANELS = [TestingPanel, OverviewPanel, AnalysisPanel];\n\nclass FSAModule extends BaseModule\n{\n  constructor()\n  {\n    super();\n    this._graph = new NodalGraph();\n    this._machineBuilder = new FSABuilder(this._graph);\n  }\n\n  //Override\n  initialize(app)\n  {\n    super.initialize(app);\n    this._machineBuilder.initialize(app);\n  }\n\n  //Override\n  destroy(app)\n  {\n    this._machineBuilder.destroy();\n    super.destroy(app);\n  }\n\n  getGraph()\n  {\n    return this._graph;\n  }\n\n  getMachineBuilder()\n  {\n    return this._machineBuilder;\n  }\n\n  getLabelFormatter()\n  {\n    return this._machineBuilder.formatAlphabetString.bind(this._machineBuilder);\n  }\n\n  getModuleInfoPanel()\n  {\n    return AboutPanel;\n  }\n\n  //Override\n  getModulePanels()\n  {\n    return PANELS;\n  }\n\n  //Override\n  getModuleName()\n  {\n    return \"fsa\";\n  }\n}\nexport default FSAModule;\n","import DFA from 'machine/DFA.js';\nimport { EMPTY } from 'machine/Symbols.js';\n\nexport function convertToDFA(nfa, dst=null)\n{\n  const result = dst || new DFA();\n\n  const alphabet = nfa.getAlphabet();\n  const startState = nfa.getStartState();\n\n  //Make new DFA start state\n  let nextStates = nfa.doClosureTransition(startState);\n  const newStartState = newDFAStateFromNFA(result, nfa, nextStates);\n\n  //For every state from the NFA's powerset, add it to DFA with correct transitions\n  const powerSetStates = nfa.getPowerSet();\n  for(const powerSetState of powerSetStates) {\n      console.log(\"Adding to DFA: \" + getStateFromSet(powerSetState));\n      if(powerSetState.length != 0)\n        expandPowersetStateToDFA(powerSetState, nfa, result);\n  }\n\n  //Create trap state\n  const trapState = result.newState(\"{}\");\n  let flag = false;\n\n  //Check for the new alphabet...\n  const newAlphabet = result.getAlphabet();\n  for(const state of result.getStates())\n  {\n    for(const symbol of newAlphabet)\n    {\n      //If transition for this symbol does not exist...\n      if (!result.doTransition(state, symbol))\n      {\n        //Create it\n        result.newTransition(state, trapState, symbol);\n\n        if (state !== trapState) flag = true;\n      }\n    }\n  }\n\n  return result;\n}\n\n/* Inspired by expandNFAStateToDFA, it takes a powerSetState, which is a set\n * of NFA states from the powerset (e.g. [q1, q1]) and adds it to the DFA as a\n * single state (e.g. {q1, q2}) and adds its transitions\n */\nfunction expandPowersetStateToDFA(powerSetState, nfa, dfa) {\n    const result = [];\n    const alphabet = nfa.getAlphabet();\n    const state = getStateFromSet(powerSetState);\n\n    if(!dfa.hasState(state)) {\n        result.push(newDFAStateFromNFA(dfa, nfa, powerSetState));\n    }\n\n    let terminals = [];\n    let dfaState = null;\n\n    for(const symbol of alphabet)\n    {\n      //Get all closed reachable states...\n      for(const s of powerSetState)\n      {\n        nfa.doTerminalTransition(s, symbol, terminals);\n      }\n\n      //If has reachable states...\n      if (terminals.length > 0)\n      {\n        dfaState = getStateFromSet(terminals);\n\n        //Create state if it does not exist...\n        if (!dfa.hasState(dfaState))\n        {\n          dfaState = newDFAStateFromNFA(dfa, nfa, terminals);\n          result.push(dfaState);\n        }\n\n        //Create transition for reachable state\n        dfa.newTransition(state, dfaState, symbol);\n      }\n\n      //Reset list\n      terminals.length = 0;\n    }\n\n    return result;\n}\n\nfunction expandNFAStateToDFA(state, nfa, dfa)\n{\n  const result = [];\n  const alphabet = nfa.getAlphabet();\n\n  let terminals = [];\n  let nfaStates = null;\n  let dfaState = null;\n\n  for(const symbol of alphabet)\n  {\n    //Get all closed reachable states...\n    nfaStates = getSetFromState(state);\n    for(const s of nfaStates)\n    {\n      nfa.doTerminalTransition(s, symbol, terminals);\n    }\n\n    //If has reachable states...\n    if (terminals.length > 0)\n    {\n      dfaState = getStateFromSet(terminals);\n\n      //Create state if it does not exist...\n      if (!dfa.hasState(dfaState))\n      {\n        dfaState = newDFAStateFromNFA(dfa, nfa, terminals);\n        result.push(dfaState);\n      }\n\n      //Create transition for reachable state\n      dfa.newTransition(state, dfaState, symbol);\n    }\n\n    //Reset list\n    terminals.length = 0;\n  }\n\n  return result;\n}\n\nfunction newDFAStateFromNFA(dfa, nfa, nfaStates)\n{\n  const result = dfa.newState(getStateFromSet(nfaStates));\n\n  //If the NFA states contain a final, then DFA state should be final\n  for(const s of nfaStates)\n  {\n    if (nfa.isFinalState(s))\n    {\n      dfa.setFinalState(result);\n      break;\n    }\n  }\n\n  return result;\n}\n\nfunction getStateFromSet(nfaStates)\n{\n  nfaStates.sort();\n  return \"{\" + nfaStates.join(\",\") + \"}\";\n}\n\nfunction getSetFromState(dfaState)\n{\n  return dfaState.substring(1, dfaState.length - 1).split(\",\");\n}\n","import Eventable from 'util/Eventable.js';\n\nimport { convertToDFA } from 'machine/util/convertNFA.js';\nimport DFA from 'machine/DFA.js';\n\nclass MachineController\n{\n  constructor()\n  {\n    this._module = null;\n\n    this.machineName = null;\n\n    this.graphController = null;\n\n    //userChangeMachine(machineBuilder, nextMachineType, prevMachineType) - when user changes machine type\n    this.registerEvent(\"userChangeMachine\");\n    //userConvertMachine(machineBuilder, nextMachineType, prevMachineType) - when user converts machine type\n    this.registerEvent(\"userConvertMachine\");\n    this.registerEvent(\"userPreConvertMachine\");//Before changes\n    this.registerEvent(\"userPostConvertMachine\");//After all changes\n    //userRenameMachine(machineBuilder, nextMachineName, prevMachineName) - when machine name is changed\n    this.registerEvent(\"userRenameMachine\");\n    //userCreateSymbol(machineBuilder, symbol) - When user adds a custom symbol\n    this.registerEvent(\"userCreateSymbol\");\n    //userDeleteSymbol(machineBuilder, symbol, prevEdges) - When user delets a symbol (and affects the edges)\n    this.registerEvent(\"userDeleteSymbol\");\n    this.registerEvent(\"userPreDeleteSymbol\");//userPreDeleteSymbol(machineBuilder, symbol)\n    this.registerEvent(\"userPostDeleteSymbol\");\n    //userRenameSymbol(machineBuilder, symbol, prevSymbol, targetEdges) - When user renames a used symbol (and affects the edges)\n    this.registerEvent(\"userRenameSymbol\");\n    this.registerEvent(\"userPreRenameSymbol\");//userPreDeleteSymbol(machineBuilder, symbol, prevSymbol)\n    this.registerEvent(\"userPostRenameSymbol\");\n  }\n\n  setModule(module)\n  {\n    this._module = module;\n  }\n\n  initialize(app)\n  {\n    this.graphController = app.graphController;\n  }\n\n  destroy()\n  {\n\n  }\n\n  getLabelFormatter()\n  {\n    return this._module.getLabelFormatter();\n  }\n\n  getMachineBuilder()\n  {\n    return this._module.getMachineBuilder();\n  }\n\n  getMachineType()\n  {\n    return this.getMachineBuilder().getMachineType();\n  }\n\n  setMachineType(machineType)\n  {\n    this.getMachineBuilder().setMachineType(machineType);\n  }\n\n  getMachineName()\n  {\n    return this.machineName || I18N.toString(\"file.untitled\");\n  }\n\n  setMachineName(machineName)\n  {\n    if (!machineName || machineName.length <= 0)\n    {\n      this.machineName = null;\n    }\n    else\n    {\n      this.machineName = machineName;\n    }\n\n    const value = this.getMachineName();\n    const element = document.getElementById('window-title');\n    const string = element.innerHTML;\n    const separator = string.indexOf('-');\n    if (separator !== -1)\n    {\n      element.innerHTML = value + \" - \" + string.substring(separator + 1).trim();\n    }\n    else\n    {\n      element.innerHTML = value + \" - \" + string;\n    }\n  }\n\n  renameMachine(machineName)\n  {\n    const prev = this.machineName;\n    this.setMachineName(machineName);\n\n    //Emit a user rename machine event\n    this.emit(\"userRenameMachine\", this.getMachineBuilder(), machineName, prev);\n  }\n\n  changeMachineTo(machineType)\n  {\n    const prev = this.getMachineBuilder().getMachineType();\n    if (prev != machineType)\n    {\n      this.setMachineType(machineType);\n\n      //Emit event\n      this.emit(\"userChangeMachine\", this.getMachineBuilder(), machineType, prev);\n    }\n  }\n\n  convertMachineTo(machineType)\n  {\n    const currentMachineType = this.getMachineType();\n\n    //Already converted machine...\n    if (currentMachineType === machineType) return;\n\n    if (machineType == \"DFA\" && currentMachineType == \"NFA\")\n    {\n      this.emit(\"userPreConvertMachine\", this.getMachineBuilder(), machineType, currentMachineType);\n\n      const result = convertToDFA(this.getMachineBuilder().getMachine(), new DFA());\n      this.graphController.getGraph().copyMachine(result);\n      this.setMachineType(machineType);\n\n      this.emit(\"userConvertMachine\", this.getMachineBuilder(), machineType, currentMachineType);\n      this.emit(\"userPostConvertMachine\", this.getMachineBuilder(), machineType, currentMachineType);\n    }\n    else if (machineType == \"NFA\" && currentMachineType == \"DFA\")\n    {\n      this.changeMachineTo(machineType);\n    }\n    else\n    {\n      throw new Error(\"Conversion scheme between \\'\" + currentMachineType + \"\\' to \\'\" + machineType + \"\\' is not supported\");\n    }\n  }\n\n  getAlphabet()\n  {\n    return this.getMachineBuilder().getAlphabet();\n  }\n\n  createSymbol(symbol)\n  {\n    this.getMachineBuilder().addCustomSymbol(symbol);\n\n    this.emit(\"userCreateSymbol\", this.getMachineBuilder(), symbol);\n  }\n\n  deleteSymbol(symbol)\n  {\n    let edge = null;\n    let index = null;\n    let result = null;\n    const targets = [];\n\n    this.emit(\"userPreDeleteSymbol\", this.getMachineBuilder(), symbol);\n\n    const graph = this.graphController.getGraph();\n    for(let i = graph.edges.length - 1; i >= 0; --i)\n    {\n      edge = graph.edges[i];\n      index = edge.getEdgeLabel().indexOf(symbol);\n      if (index >= 0)\n      {\n        result = edge.getEdgeLabel().substring(0, index) + edge.getEdgeLabel().substring(index + 1);\n        if (result.length > 0)\n        {\n          edge.setEdgeLabel(result);\n        }\n        else\n        {\n          edge.setEdgeLabel(\"\");\n          graph.deleteEdge(edge);\n        }\n        targets.push(edge);\n      }\n    }\n\n    if (targets.length <= 0)\n    {\n      this.getMachineBuilder().removeCustomSymbol(symbol);\n    }\n\n    this.emit(\"userDeleteSymbol\", this.getMachineBuilder(), symbol, targets);\n    this.emit(\"userPostDeleteSymbol\", this.getMachineBuilder(), symbol, targets);\n  }\n\n  renameSymbol(prevSymbol, nextSymbol)\n  {\n    let edge = null;\n    let result = null;\n    const targets = [];\n\n    this.emit(\"userPreRenameSymbol\", this.getMachineBuilder(), nextSymbol, prevSymbol);\n\n    const graph = this.graphController.getGraph();\n    const length = graph.edges.length;\n    for(let i = 0; i < length; ++i)\n    {\n      edge = graph.edges[i];\n      let result = edge.getEdgeLabel().replace(prevSymbol, nextSymbol);\n      if (result != edge.getEdgeLabel())\n      {\n        targets.push(edge);\n      }\n      edge.setEdgeLabel(result);\n    }\n\n    if (targets.length <= 0)\n    {\n      this.getMachineBuilder().renameCustomSymbol(prevSymbol, nextSymbol);\n    }\n\n    this.emit(\"userRenameSymbol\", this.getMachineBuilder(), nextSymbol, prevSymbol, targets);\n    this.emit(\"userPostRenameSymbol\", this.getMachineBuilder(), nextSymbol, prevSymbol, targets);\n  }\n\n  getCustomSymbols()\n  {\n    return this.getMachineBuilder()._symbols;\n  }\n\n  isCustomSymbol(symbol)\n  {\n    return this.getMachineBuilder().isCustomSymbol(symbol);\n  }\n}\nEventable.mixin(MachineController);\n\nexport default MachineController;\n","import Config from 'config.js';\n\nimport NodalGraph from './NodalGraph.js';\nimport Node from './Node.js';\nimport Edge from './Edge.js';\n\nimport { CURRENT_VERSION_STRING } from 'util/FlapSaver.js';\n\nconst EDGE_SYMBOL_SEPARATOR = Config.EDGE_SYMBOL_SEPARATOR;\n\nclass NodalGraphParser\n{\n  static parseJSON(data, dst=null)\n  {\n    const nodeLength = data.nodeCount;\n    const edgeLength = data.edgeCount;\n\n    if (nodeLength < 0) throw new Error(\"Invalid graph data: negative number of nodes.\");\n    if (edgeLength < 0) throw new Error(\"Invalid graph data: negative number of edges.\");\n\n    if (dst) dst.deleteAll();\n    const result = dst || new NodalGraph(new Array(nodeLength), new Array(edgeLength));\n\n    //The initial node is always saved/loaded first!\n    for(let i = 0; i < nodeLength; ++i)\n    {\n      const nodeData = data.nodes[i];\n      const newNode = new Node(result, nodeData.x || 0, nodeData.y || 0, nodeData.label || \"q?\");\n      newNode.setGraphElementID(nodeData.id);\n      newNode.accept = nodeData.accept;\n      if (nodeData.customLabel)\n      {\n        newNode.setCustomLabel(newNode.getNodeLabel());\n      }\n      result.nodes[i] = newNode;\n    }\n\n    for(let i = 0; i < edgeLength; ++i)\n    {\n      const edgeData = data.edges[i];\n\n      if (edgeData.from >= nodeLength || edgeData.from < 0) throw new Error(\"Invalid edge from data: node index \\'\" + edgeData.from + \"\\' out of bounds.\");\n\n      const newEdge = new Edge(result, result.nodes[edgeData.from], edgeData.to < 0 ? null : result.nodes[edgeData.to], edgeData.label || \"0\");\n      newEdge.setGraphElementID(edgeData.id);\n\n      //Force copy all quadratic data\n      newEdge.setQuadratic(edgeData.quad.radians, edgeData.quad.length);\n      result.edges[i] = newEdge;\n    }\n\n    return result;\n  }\n\n  static parseXML(data, dst=null)\n  {\n    let nodeList = data.getElementsByTagName(\"state\");\n    let edgeList = data.getElementsByTagName(\"transition\");\n    const nodeLength = nodeList.length;\n    const edgeLength = edgeList.length;\n\n    if (nodeLength < 0) throw new Error(\"Invalid graph data: negative number of nodes.\");\n    if (edgeLength < 0) throw new Error(\"Invalid graph data: negative number of edges.\");\n\n    if (dst) dst.deleteAll();\n    //HACK: call newEdge to auto layout the graph, therefore a fixed length array cannot be allocated.\n    const result = dst || new NodalGraph(new Array(nodeLength), []);\n    let nodeIDMap = new Map();\n    let startNodeID;\n    //create nodes list\n    for(let i = 0; i < nodeLength; ++i)\n    {\n      let node = nodeList[i];\n      let nodeLabel = node.attributes[1].nodeValue;\n      let nodeID = node.attributes[0].nodeValue;\n      let nodeX = parseFloat(node.childNodes[1].childNodes[0].nodeValue);\n      let nodeY = parseFloat(node.childNodes[3].childNodes[0].nodeValue);\n      let nodeAccept = node.getElementsByTagName(\"final\");\n      let nodeStart = node.getElementsByTagName(\"initial\");\n      if(nodeStart && nodeStart.length > 0) startNodeID = nodeID;//TODO: allow JFLAP names to be id\n      let newNode = new Node(result, nodeX , nodeY , Config.STR_STATE_LABEL + (nodeID));\n      newNode.accept = (nodeAccept != null && nodeAccept.length > 0);\n      if(nodeStart && nodeStart.length > 0)\n      {\n        if(result.nodes[0])\n        {\n          result.nodes[i] = result.nodes[0];\n          nodeIDMap.set(nodeList[0].attributes[0].nodeValue, i);\n          result.nodes[0] = newNode;\n          nodeIDMap.set(nodeID, 0);\n        }\n        else\n        {\n          result.nodes[0] = newNode;\n          nodeIDMap.set(nodeID, 0);\n        }\n      }\n      result.nodes[i] = newNode;\n      nodeIDMap.set(nodeID, i);\n    }\n    const boundingRect = result.getBoundingRect();\n    const width = boundingRect.width;\n    const height = boundingRect.height;\n    for(var i = 0; i < result.nodes.length; i++)\n    {\n      result.nodes[i].x -= boundingRect.minX + width / 2;\n      result.nodes[i].y -= boundingRect.minY + height / 2;\n      //result.nodes[i].x = parseFloat(result.nodes[i].x) + width/2;\n      //result.nodes[i].y = -height/2 - parseFloat(result.nodes[i].y);\n    }\n\n    //create edge lists\n    for(let i = 0; i < edgeLength; ++i)\n    {\n      const edge = edgeList[i];\n      const edgeFrom = edge.childNodes[1].childNodes[0].nodeValue;\n      const edgeTo = edge.childNodes[3].childNodes[0].nodeValue;\n      let edgeLabel = edge.childNodes[5];\n      if(edgeLabel.childNodes[0]) edgeLabel = edgeLabel.childNodes[0].nodeValue;\n      else edgeLabel = EMPTY;\n      const indexOfEdgeFrom = nodeIDMap.get(edgeFrom);\n      const indexOfEdgeTo = nodeIDMap.get(edgeTo);\n\n      //check valid from and to node\n      if(result.nodes[indexOfEdgeFrom] || (startNodeID == edgeFrom && result.nodes[0]) || (edgeFrom == 0 && result.nodes[startNodeID]) )\n      {\n        const newEdge = result.newEdge(result.nodes[indexOfEdgeFrom], edgeTo < 0 ? null : result.nodes[indexOfEdgeTo], edgeLabel || \"0\");\n        const formattedEdge = result.formatEdge(newEdge);\n        if (newEdge != formattedEdge) result.deleteEdge(newEdge);\n      }\n      else\n      {\n         throw new Error(\"Invalid edge from data: node index \\'\" + edge.from + \"\\' out of bounds.\");\n      }\n    }\n    return result;\n  }\n\n  static toJSON(graph)\n  {\n    const nodeLength = graph.nodes.length;\n    const edgeLength = graph.edges.length;\n\n    const data = {\n      nodeCount: nodeLength,\n      nodes: new Array(nodeLength),\n      edgeCount: edgeLength,\n      edges: new Array(edgeLength)\n    };\n\n    for(let i = 0; i < nodeLength; ++i)\n    {\n      const node = graph.nodes[i];\n      data.nodes[i] = {\n        id: node.getGraphElementID(),\n        x: node.x,\n        y: node.y,\n        label: node.getNodeLabel(),\n        accept: node.accept,\n        customLabel: node.hasCustomLabel()\n      };\n    }\n\n    for(let i = 0; i < edgeLength; ++i)\n    {\n      const edge = graph.edges[i];\n      const edgeQuad = edge.getQuadratic();\n      data.edges[i] = {\n        id: edge.getGraphElementID(),\n        from: graph.nodes.indexOf(edge.getSourceNode()),\n        to: graph.nodes.indexOf(edge.getDestinationNode()),\n        quad: { radians: edgeQuad.radians, length: edgeQuad.length },\n        label: edge.getEdgeLabel()\n      };\n    }\n\n    return data;\n  }\n\n  static toXML(graph)\n  {\n    const header = \"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\" standalone=\\\"no\\\"?><!--Created with flap.js \" + CURRENT_VERSION_STRING + \"--><structure></structure>\";\n    let parser = new DOMParser();\n    const doc = parser.parseFromString(header, \"application/xml\");\n\n    const structure = doc.getElementsByTagName(\"structure\")[0];\n\n    const type = doc.createElement(\"type\");\n    type.innerHTML = \"fa\";//For FSA\n    structure.appendChild(type);\n\n    const automaton = doc.createElement(\"automaton\");\n    structure.appendChild(automaton);\n\n    let node, state, x, y;\n    for(let i = 0; i < graph.nodes.length; ++i)\n    {\n      node = graph.nodes[i];\n\n      //state tag\n      state = doc.createElement(\"state\");\n      state.id = \"\" + i;\n      state.setAttribute(\"name\", node.getNodeLabel());\n      automaton.appendChild(state);\n\n      //x tag\n      x = doc.createElement(\"x\");\n      x.innerHTML = node.x;\n      state.appendChild(x);\n\n      //y tag\n      y = doc.createElement(\"y\");\n      y.innerHTML = node.y;\n      state.appendChild(y);\n\n      //initial tag\n      if (i == 0)\n      {\n        state.appendChild(doc.createElement(\"initial\"));\n      }\n\n      //final tag\n      if (node.accept)\n      {\n        state.appendChild(doc.createElement(\"final\"));\n      }\n    }\n\n    let transition, from, to, read, symbols;\n    for(let edge of graph.edges)\n    {\n      symbols = edge.getEdgeLabel().split(EDGE_SYMBOL_SEPARATOR);\n      for(let symbol of symbols)\n      {\n        //transition tag\n        transition = doc.createElement(\"transition\");\n        automaton.appendChild(transition);\n\n        //from tag\n        from = doc.createElement(\"from\");\n        from.innerHTML = graph.nodes.indexOf(edge.getSourceNode());\n        transition.appendChild(from);\n\n        //to tag\n        to = doc.createElement(\"to\");\n        to.innerHTML = graph.nodes.indexOf(edge.getDestinationNode());\n        transition.appendChild(to);\n\n        //read tag\n        read = doc.createElement(\"read\");\n        read.innerHTML = symbol;\n        transition.appendChild(read);\n      }\n    }\n\n    return doc;\n  }\n}\n\nexport default NodalGraphParser;\n","const MAJOR_INDEX = 0;\nconst MINOR_INDEX = 1;\nconst PATCH_INDEX = 2;\n\nclass SemanticVersion\n{\n  constructor(major=0, minor=0, patch=0)\n  {\n    this.major = major;\n    this.minor = minor;\n    this.patch = patch;\n  }\n\n  canSupportVersion(otherVersion)\n  {\n    return this.major == otherVersion.major &&\n      (this.minor < otherVersion.minor ||\n      (this.minor == otherVersion.minor && this.patch <= otherVersion.patch));\n  }\n\n  static stringify(semanticVersion)\n  {\n    return semanticVersion.major + \".\" +\n      semanticVersion.minor + \".\" +\n      semanticVersion.patch;\n  }\n\n  static parse(string)\n  {\n    if (typeof string != 'string') throw new Error(\"Invalid argument type to parse as SemanticVersion\");\n\n    const components = string.split('.');\n    if (components.length != 3) throw new Error(\"Invalid format for SemanticVersion\");\n\n    let major, minor, patch;\n    try\n    {\n      major = Number.parseInt(components[MAJOR_INDEX]);\n      minor = Number.parseInt(components[MINOR_INDEX]);\n      patch = Number.parseInt(components[PATCH_INDEX]);\n    }\n    catch(e)\n    {\n      throw e;\n    }\n\n    return new SemanticVersion(major, minor, patch);\n  }\n}\n\nexport default SemanticVersion;\n","import NodalGraph from 'graph/NodalGraph.js';\nimport NodalGraphParser from 'graph/NodalGraphParser.js';\n\nimport Notification from 'system/notification/Notification.js';\nimport SemanticVersion from 'util/SemanticVersion.js';\n\nexport const CURRENT_VERSION = new SemanticVersion(0, 2, 0);\nexport const CURRENT_VERSION_STRING = SemanticVersion.stringify(CURRENT_VERSION);\n\nexport function saveToJSON(graphController, machineController)\n{\n  const graph = graphController.getGraph();\n  const machineBuilder = machineController.getMachineBuilder();\n\n  if (!graph.isEmpty())\n  {\n    const dst = {};\n    dst[\"metadata\"] = {version: CURRENT_VERSION_STRING};\n    dst[\"graphData\"] = NodalGraphParser.toJSON(graph);\n\n    //HACK: this should be calculated elsewhere\n    dst[\"machineData\"] = {\n      name: machineController.getMachineName(),\n      type: machineController.getMachineType(),\n      symbols: machineController.getCustomSymbols(),\n      statePrefix: machineBuilder.getLabeler().prefix\n    };\n\n    return dst;\n  }\n  else\n  {\n    return {};\n  }\n};\n\nexport function loadFromJSON(jsonData, graphController, machineController)\n{\n  const graph = graphController.getGraph();\n  const machineBuilder = machineController.getMachineBuilder();\n\n  try\n  {\n    const metadata = jsonData.metadata;\n    if (typeof metadata == 'object')\n    {\n      const dataVersion = SemanticVersion.parse(metadata.version);\n      if (!CURRENT_VERSION.canSupportVersion(dataVersion))\n      {\n        Notification.addErrorMessage(\"ERROR: Unable to load invalid JSON file - invalid version.\", \"errorUpload\");\n        return;\n      }\n    }\n    const graphJSON = jsonData.graphData;\n    const newGraph = NodalGraphParser.parseJSON(graphJSON);\n    graph.copyGraph(newGraph);\n\n    //HACK: this should be calculated elsewhere\n    const machineJSON = jsonData.machineData;\n    const name = machineJSON.name;\n    if (name) machineController.setMachineName(name);\n    const type = machineJSON.type;\n    if (type) machineController.setMachineType(type);\n    const customSymbols = machineJSON.symbols;\n    if (customSymbols)\n    {\n      machineBuilder._symbols.length = 0;\n      for(const symbol of customSymbols)\n      {\n        machineBuilder._symbols.push(symbol);\n      }\n    }\n    const statePrefix = machineJSON.statePrefix;\n    if (statePrefix) machineBuilder.getLabeler().prefix = statePrefix;\n  }\n  catch (e)\n  {\n    Notification.addErrorMessage(\"ERROR: Unable to load invalid JSON file.\", \"errorUpload\");\n\n    console.error(e);\n  }\n};\n","import NodalGraph from 'graph/NodalGraph.js';\n\nimport * as FlapSaver from 'util/FlapSaver.js';\nimport NodalGraphParser from 'graph/NodalGraphParser.js';\n\nconst FILETYPE_JSON = \"application/json\";\nconst FILETYPE_JFLAP = \".jff\";\nconst FILETYPE_XML = \".xml\";\nconst VALID_FILETYPES = [FILETYPE_JSON, FILETYPE_JFLAP, FILETYPE_XML];\n\nconst JSON_EXT = \".json\";\nconst JFF_EXT = \".jff\";\nconst XML_EXT = \".xml\";\nconst VALID_EXTS = [JSON_EXT, JFF_EXT, XML_EXT];\n\nclass Uploader\n{\n  constructor(graphController)\n  {\n    this.graphController = graphController;\n    this.machineController = null;\n\n    //Add notifications here for errors\n  }\n\n  setMachineController(machineController)\n  {\n    this.machineController = machineController;\n  }\n\n  getValidFileTypes()\n  {\n    return VALID_FILETYPES;\n  }\n\n  uploadFileGraph(graphFileBlob)\n  {\n    return new Promise((resolve, reject) => {\n      if (!graphFileBlob) reject(\"Invalid file data : null\");\n\n      const name = graphFileBlob.name;\n      const i = name.lastIndexOf('.');\n      if (i < 0) reject(\"Invalid filename : missing file extension\");\n\n      const ext = name.substring(i);\n\n      if (VALID_EXTS.includes(ext))\n      {\n        const reader = new FileReader();\n        reader.onload = (event) => {\n          const data = event.target.result;\n          const name = graphFileBlob.name.substring(0, graphFileBlob.name.lastIndexOf('.'));\n          const graph = this.graphController.getGraph();\n\n          this.graphController.emit(\"userPreImportGraph\", graph);\n\n          try\n          {\n            if (ext === JSON_EXT)\n            {\n              const jsonData = JSON.parse(data);\n              FlapSaver.loadFromJSON(jsonData, this.graphController, this.machineController);\n            }\n            else if (ext === JFF_EXT || ext === XML_EXT)\n            {\n              const parser = new DOMParser();\n              const dataXML = parser.parseFromString(data, \"text/xml\");\n              const dst = NodalGraphParser.parseXML(dataXML);\n              graph.copyGraph(dst);\n            }\n            else\n            {\n              //There is no else... it's just not possible\n            }\n\n            this.graphController.emit(\"userImportGraph\", graph);\n\n            if (this.machineController)\n            {\n              this.machineController.setMachineName(name);\n            }\n\n            //Callback will accepts an event object that contains:\n            //  file - file data,\n            //  name - file name,\n            //  graph - the changed graph object\n            resolve({\n              file: data,\n              name: name,\n              graph: graph\n            });\n          }\n          catch(e)\n          {\n            reader.abort();\n\n            reject(e);\n          }\n          finally\n          {\n            this.graphController.emit(\"userPostImportGraph\", graph);\n          }\n        };\n        reader.onerror = (event) => {\n          reject(event.target.error.code);\n        };\n        reader.readAsText(graphFileBlob);\n      }\n      else\n      {\n        reject(\"Invalid filename : unknown file extension \\'\" + ext + \"\\'\");\n      }\n    });\n  }\n}\n\nexport default Uploader;\n","import Config from 'config.js';\n\nimport Eventable from 'util/Eventable.js';\n\nimport Uploader from './Uploader.js';\n\nimport GraphLayout from 'graph/GraphLayout.js';\n\nconst EDGE_SYMBOL_SEPARATOR = Config.EDGE_SYMBOL_SEPARATOR;\n\nclass GraphController\n{\n  constructor()\n  {\n    this._module = null;\n\n    this.inputController = null;\n    this.machineController = null;\n\n    this.labelEditor = null;\n    this.tester = null;\n    this.uploader = new Uploader(this);\n\n    this.prevQuad = {\n      radians: 0, length: 0,\n      x: 0, y: 0\n    };\n    this.prevEdgeTo = null;\n    this.prevX = 0;\n    this.prevY = 0;\n\n    //The difference between controller events vs graph events is: controller has user-intent\n\n    //userCreateNode(graph, node) - When user creates a node\n    this.registerEvent(\"userCreateNode\");\n    this.registerEvent(\"userPreCreateNode\");//(graph, nextNodeID, x, y)\n    this.registerEvent(\"userPostCreateNode\");//(graph, node)\n\n    //userToggleNode(graph, node, prevAccept) - When user toggles the accept state\n    this.registerEvent(\"userToggleNode\");\n\n    //userDeleteNodes(graph, node, targetNodes, prevX, prevY) - When user deletes one or more nodes\n    this.registerEvent(\"userDeleteNodes\");\n    this.registerEvent(\"userPreDeleteNodes\");\n    this.registerEvent(\"userPostDeleteNodes\");\n\n    //userDeleteEdge(graph, edge, prevTo, prevQuad) - When user deletes an edge\n    this.registerEvent(\"userDeleteEdge\");\n    this.registerEvent(\"userPreDeleteEdge\");\n    this.registerEvent(\"userPostDeleteEdge\");\n\n    //userCreateEdge(graph, edge) - When user creates an edge, after naming it\n    this.registerEvent(\"userCreateEdge\");\n    //this.registerEvent(\"userPreCreateEdge\");\n    this.registerEvent(\"userPostCreateEdge\");\n\n    /*\n    //userMoveNodes(graph, nodes, dx, dy) - When user moves one or more nodes\n    this.registerEvent(\"userMoveNodes\");\n    //userMoveInitial(graph, node, prevNode) - When user moves the initial marker to another\n    this.registerEvent(\"userMoveInitial\");\n    //userPreCreateEdge(graph, edge) - When user is about to create an edge, before src\n    this.registerEvent(\"userPreCreateEdge\");\n    //userBeginEdge(graph, edge, src) - When user begins to create an edge, after src and before naming it\n    this.registerEvent(\"userBeginEdge\");\n    //userEndEdge(graph, edge, src, dst) - When user finishes creating an edge, after dst and before naming it (dst could be null for deletion)\n    this.registerEvent(\"userEndEdge\");\n    //userPostCreateEdge(graph, edge) - When user is finished creating an edge, after dst and after quad changes\n    this.registerEvent(\"userPostCreateEdge\");\n    //userMoveEdge(graph, edge, prevDest) - When user changes the dst of edge\n    this.registerEvent(\"userChangeEdge\");\n    //userBendEdge(graph, edge, prevQuad) - When user bends the edge\n    this.registerEvent(\"userBendEdge\");\n    //userLabelEdge(graph, edge, prevLabel) - When user re-labels the edge\n    this.registerEvent(\"userLabelEdge\");\n    */\n\n    //userSwapNodes(graph, node, otherNode) - When user swap node indices\n    this.registerEvent(\"userSwapNodes\");\n\n    //userRenameNode(graph, node, nextLabel, prevLabel, isPrevCustom) - When user sets the label of node\n    this.registerEvent(\"userRenameNode\");\n\n    //userChangeLayout(graph, prevLayout) - When user re-layouts the graph\n    this.registerEvent(\"userChangeLayout\");\n    this.registerEvent(\"userPreChangeLayout\");//before any changes\n    this.registerEvent(\"userPostChangeLayout\");//after all changes\n\n    //userImportGraph(graph) - When user imports a graph\n    this.registerEvent(\"userImportGraph\");\n    this.registerEvent(\"userPreImportGraph\");//before any changes\n    this.registerEvent(\"userPostImportGraph\");//after all changes\n\n    //nodeMove(targetNode, nextX, nextY, prevX, prevY)\n    this.registerEvent(\"nodeMove\");\n    //nodeMoveAll(targetNodes, dx, dy)\n    this.registerEvent(\"nodeMoveAll\");\n    //nodeInitial(nextInitial, prevInitial)\n    this.registerEvent(\"nodeInitial\");\n    //edgeDestination(targetEdge, nextDestination, prevDestination, prevQuad)\n    this.registerEvent(\"edgeDestination\");\n    //edgeMove(targetEdge, nextQuad, prevQuad)\n    this.registerEvent(\"edgeMove\");\n    //edgeLabel(targetEdge, nextLabel, prevLabel)\n    this.registerEvent(\"edgeLabel\");\n    //tryCreateWhileTrash()\n    this.registerEvent(\"tryCreateWhileTrash\");\n  }\n\n  setModule(module)\n  {\n    this._module = module;\n  }\n\n  initialize(app)\n  {\n    this.labelEditor = app.viewport.labelEditor;\n    this.tester = app.testingManager;\n\n    this.inputController = app.inputController;\n    this.machineController = app.machineController;\n\n    this.uploader.setMachineController(this.machineController);\n  }\n\n  destroy()\n  {\n  }\n\n  getGraph()\n  {\n    return this._module.getGraph();\n  }\n\n  getLabelEditor()\n  {\n    return this.labelEditor;\n  }\n\n  getUploader()\n  {\n    return this.uploader;\n  }\n\n  applyAutoLayout()\n  {\n    this.emit(\"userPreChangeLayout\", this.getGraph());\n\n    GraphLayout.applyLayout(this.getGraph());\n\n    this.emit(\"userChangeLayout\", this.getGraph());\n    this.emit(\"userPostChangeLayout\", this.getGraph());\n  }\n\n  renameNode(node, name)\n  {\n    const prev = node.getNodeLabel();\n    const isPrevCustom = node.hasCustomLabel();\n\n    node.setCustomLabel(name);\n\n    this.emit(\"userRenameNode\", this.getGraph(), node, name, prev, isPrevCustom);\n  }\n\n  swapNodeByIndex(nodeIndex, otherNodeIndex)\n  {\n    const node = this.getGraph().nodes[nodeIndex];\n    const other = this.getGraph().nodes[otherNodeIndex];\n    this.getGraph().nodes[otherNodeIndex] = node;\n    this.getGraph().nodes[nodeIndex] = other;\n\n    this.emit(\"userSwapNodes\", this.getGraph(), node, other);\n  }\n\n  createNode(x, y)\n  {\n    const newNodeLabel = this.machineController.getMachineBuilder().getLabeler().getNextDefaultNodeLabel();\n\n    if (typeof x === 'undefined') x = (Math.random() * Config.SPAWN_RADIUS * 2) - Config.SPAWN_RADIUS;\n    if (typeof y === 'undefined') y = (Math.random() * Config.SPAWN_RADIUS * 2) - Config.SPAWN_RADIUS;\n\n    this.emit(\"userPreCreateNode\", this.getGraph(), newNodeLabel, x, y);\n\n    const node = this.getGraph().newNode(x, y, newNodeLabel);\n    node.x = x;\n    node.y = y;\n\n    this.emit(\"userCreateNode\", this.getGraph(), node);\n\n    this.emit(\"userPostCreateNode\", this.getGraph(), node);\n    return node;\n  }\n\n  toggleNode(node)\n  {\n    const prev = node.accept;\n    const result = !node.accept;\n    //Toggle accept for selected node\n    node.accept = result;\n\n    //Emit event\n    this.emit(\"userToggleNode\", this.getGraph(), node, prev);\n  }\n\n  deleteSelectedNodes(selectedNode)\n  {\n    const picker = this.inputController.getPicker();\n    const selection = picker.getSelection(this.getGraph()).slice();\n\n    this.emit(\"userPreDeleteNodes\", this.getGraph(), selectedNode, selection, this.prevX, this.prevY);\n\n    //Remove from graph\n    for(const node of selection)\n    {\n      this.getGraph().deleteNode(node);\n    }\n\n    //Remove from selection\n    picker.clearSelection();\n\n    //Emit event\n    this.emit(\"userDeleteNodes\", this.getGraph(), selectedNode, selection, this.prevX, this.prevY);\n    this.emit(\"userPostDeleteNodes\", this.getGraph(), selectedNode, selection, this.prevX, this.prevY);\n  }\n\n  deleteTargetNode(target)\n  {\n    this.emit(\"userPreDeleteNodes\", this.getGraph(), target, [target], this.prevX, this.prevY);\n\n    this.getGraph().deleteNode(target);\n\n    //Emit event\n    this.emit(\"userDeleteNodes\", this.getGraph(), target, [target], this.prevX, this.prevY);\n    this.emit(\"userPostDeleteNodes\", this.getGraph(), target, [target], this.prevX, this.prevY);\n  }\n\n  deleteTargetEdge(target)\n  {\n    this.emit(\"userPreDeleteEdge\", this.getGraph(), target, this.prevEdgeTo, this.prevQuad);\n    this.getGraph().deleteEdge(target);\n\n    //Emit event\n    this.emit(\"userDeleteEdge\", this.getGraph(), target, this.prevEdgeTo, this.prevQuad);\n    this.emit(\"userPostDeleteEdge\", this.getGraph(), target, this.prevEdgeTo, this.prevQuad);\n  }\n\n  moveNodeTo(pointer, node, x, y)\n  {\n    for(const other of this.getGraph().nodes)\n    {\n      //Update node collision\n      if (node === other) continue;\n\n      const dx = x - other.x;\n      const dy = y - other.y;\n      const angle = Math.atan2(dy, dx);\n\n      const diameter = (Config.NODE_RADIUS * 2);\n      const nextDX = other.x + (Math.cos(angle) * diameter) - x;\n      const nextDY = other.y + (Math.sin(angle) * diameter) - y;\n\n      if (dx * dx + dy * dy < Config.NODE_RADIUS_SQU * 4)\n      {\n        x += nextDX;\n        y += nextDY;\n      }\n    }\n\n    node.x = x;\n    node.y = y;\n  }\n\n  moveMultipleNodesTo(pointer, nodes, x, y)\n  {\n    //Moves all nodes by difference between initial position with passed-in x and y\n    const pos = pointer.getInputEventPosition();\n    const dx = x - pos.x;\n    const dy = y - pos.y;\n    for(const node of nodes)\n    {\n      node.x += dx;\n      node.y += dy;\n    }\n\n    //Updates initial position to passed-in x and y to maintain relative position\n    pointer.changeInputEventPosition(x, y);\n  }\n\n  moveEdgeTo(pointer, edge, x, y)\n  {\n    edge.setQuadraticByCoords(x, y);\n  }\n\n  moveEndpointTo(pointer, edge, x, y)\n  {\n    //Get ONLY node at x and y (cannot use hover target, since it is not ONLY nodes)\n    const picker = this.inputController.getPicker();\n    const dst = picker.getNodeAt(this.getGraph(), x, y) || pointer;\n\n    edge.changeDestinationNode(dst);\n\n    //If the cursor returns to the state after leaving it...\n    if (edge.isSelfLoop())\n    {\n      //Make it a self loop\n      const sourceNode = edge.getSourceNode();\n      const dx = sourceNode.x - x;\n      const dy = sourceNode.y - y;\n      const radians = Math.atan2(dy, dx) + Math.PI;\n      edge.setQuadratic(radians);\n    }\n    //Otherwise, maintain original curve\n    else\n    {\n      //TODO: This also causes self-loops to act weird when no longer a self loop\n      edge.setQuadratic(this.prevQuad.radians, this.prevQuad.length);\n    }\n  }\n\n  openLabelEditor(target, x, y, placeholder=null, replace=true, callback=null)\n  {\n    const prevLabel = placeholder || target.getEdgeLabel();\n    this.labelEditor.openEditor(target, placeholder, replace, () => {\n      const label = target.getEdgeLabel();\n      if (prevLabel.length > 0 && label != prevLabel)\n      {\n        this.emit(\"edgeLabel\", target, label, prevLabel);\n      }\n\n      if (callback)\n      {\n        callback();\n      }\n    });\n  }\n\n  focusOnNode(node)\n  {\n    //Center workspace at focused node; inverted due to graph-to-screen space\n    this.inputController.getViewport().setOffset(-node.x, -node.y);\n  }\n\n  focusOnEdge(edge)\n  {\n    //Center workspace at focused edge; inverted due to graph-to-screen space\n    const center = edge.getCenterPoint();\n    this.inputController.getViewport().setOffset(-center.x, -center.y);\n  }\n\n  focusOnNodes(nodes)\n  {\n    //Center workspace at the average of focused nodes; inverted due to graph-to-screen space\n    const length = nodes.length;\n    let ax = 0;\n    let ay = 0;\n    for(const node of nodes)\n    {\n      ax += node.x;\n      ay += node.y;\n    }\n    this.inputController.getViewport().setOffset(-ax / length, -ay / length);\n  }\n}\n//Mixin Eventable\nEventable.mixin(GraphController);\n\nfunction moveNodesOutOfEdges(target, graph)\n{\n\n  const x1 = target.getSourceNode().x;\n  const y1 = target.getSourceNode().y;\n  const x2 = target.getDestinationNode().x;\n  const y2 = target.getDestinationNode().y;\n  const dist12sq = (x2-x1)*(x2-x1) + (y2-y1)*(y2-y1);\n  let vertical = false;\n  let m = 0;\n  let b = 0;\n  if(x1 > x2) {\n    m = (y1-y2) / (x1-x2);\n    b = y2-m*x2;\n  } else if (x1 < x2) {\n    m = (y2-y1) / (x2-x1);\n    b = y1-m*x1;\n  } else {\n    vertical = true;\n  }\n\n  for(const node of graph.nodes)\n  {\n    if(node === target.getSourceNode() || node === target.getDestinationNode()) continue;\n\n    const x0 = node.x;\n    const y0 = node.y;\n\n    const dist01sq = (x1-x0)*(x1-x0) + (y1-y0)*(y1-y0);\n    const dist02sq = (x2-x0)*(x2-x0) + (y2-y0)*(y2-y0);\n    if(dist01sq > dist12sq || dist02sq > dist12sq) continue;\n\n\n    let dist = 0;\n    let xint = 0;\n    let yint = 0;\n    let m0 = 0;\n    let horizontal = false;\n    if(vertical) {\n      dist = Math.abs(x1-x0);\n      xint = x1;\n      yint = y0;\n      m0 = 0;\n    } else {\n      dist = Math.abs(b+ m*x0 - y0) / Math.sqrt(1+m*m);\n      xint = (x0 + m*y0 - m*b) / (m*m + 1);\n      yint = m * xint + b;\n      if(m !== 0) {\n        m0 = 1 / m;\n      } else {\n        horizontal = true;\n      }\n    }\n\n    if(dist < Config.NODE_RADIUS) {\n      const toMove = Config.NODE_RADIUS - dist + 10;\n      const distx = x0 - xint;\n      const disty = y0 - yint;\n      let signx = -1;\n      let signy = -1;\n      if(distx > 0) signx = 1;\n      if(disty > 0) signy = 1;\n\n      if(horizontal) {\n        node.y = y0 + signy * toMove;\n      } else {\n        let toMovex = toMove / Math.sqrt(m0*m0 + 1);\n        let toMovey = Math.abs(m0) * toMovex;\n        node.x = x0 + signx * toMovex;\n        node.y = y0 + signy * toMovey;\n      }\n    }\n  }\n}\n\nexport default GraphController;\n","/**\n * Used by InputAdapter to hold input event data.\n */\nclass InputPointer\n{\n  constructor()\n  {\n    this._active = false;\n    this._x = 0;\n    this._y = 0;\n\n    this._inputpos = {x: 0, y: 0};\n  }\n\n  get x() { return this._x; }\n  get y() { return this._y; }\n\n  setPosition(x, y)\n  {\n    this._x = x;\n    this._y = y;\n  }\n\n  beginInput()\n  {\n    this._active = true;\n    this._inputpos.x = this._x;\n    this._inputpos.y = this._y;\n  }\n\n  /**\n   * Returns the position which the input began at. This is not immutable.\n   */\n  getInputEventPosition()\n  {\n    return this._inputpos;\n  }\n\n  changeInputEventPosition(x, y)\n  {\n    this._inputpos.x = x;\n    this._inputpos.y = y;\n  }\n\n  endInput()\n  {\n    this._active = false;\n  }\n\n  isActive()\n  {\n    return this._active;\n  }\n\n  getDistanceSquToInitial()\n  {\n    const pos = this._inputpos;\n    const dx = pos.x - this._x;\n    const dy = pos.y - this._y;\n    return dx * dx + dy * dy;\n  }\n}\n\nexport default InputPointer;\n","import Config from 'config.js';\n\nimport InputPointer from './InputPointer.js';\n\n/**\n * Provides an interface for InputController to interact with a HTMLElement.\n * Each listenable element should correspond to only a single InputAdapter.\n */\nclass InputAdapter\n{\n  constructor()\n  {\n    this._controller = null;\n    this._element = null;\n    this._viewport = null;\n    this._cursor = {\n      _mousemove: null,\n      _mouseup: null,\n      _touchmove: null,\n      _touchend: null,\n      _timer: null\n    };\n\n    this._pointer = new InputPointer();\n\n    //Although dragging could be in pointer, it should be here to allow\n    //the adapter to be independent of pointer.\n    this._dragging = false;\n    this._altinput = false;\n\n    this._holdInputDelay = Config.LONG_TAP_TICKS;\n    this._dblInputDelay = Config.DOUBLE_TAP_TICKS;\n    this._scrollSensitivity = Config.SCROLL_SENSITIVITY;\n    this._minTapRadius = Config.CURSOR_RADIUS_SQU * 16;\n    this._draggingRadiusSqu = Config.CURSOR_RADIUS_SQU + Config.DRAGGING_BUFFER_SQU;\n\n    this._prevEmptyInput = false;\n    this._prevEmptyTime = 0;\n    this._prevEmptyX = 0;\n    this._prevEmptyY = 0;\n\n    this.onContextMenu = this.onContextMenu.bind(this);\n    this.onMouseDown = this.onMouseDown.bind(this);\n    this.onMouseMove = this.onMouseMove.bind(this);\n    this.onTouchStart = this.onTouchStart.bind(this);\n    this.onWheel = this.onWheel.bind(this);\n\n    this.onMouseDownThenMove = this.onMouseDownThenMove.bind(this);\n    this.onMouseDownThenUp = this.onMouseDownThenUp.bind(this);\n    this.onTouchStartThenMove = this.onTouchStartThenMove.bind(this);\n    this.onTouchStartThenEnd = this.onTouchStartThenEnd.bind(this);\n\n    this.onDelayedInputDown = this.onDelayedInputDown.bind(this);\n  }\n\n  setController(controller)\n  {\n    this._controller = controller;\n    return this;\n  }\n\n  initialize(element, viewport)\n  {\n    if (!(element instanceof SVGElement)) throw new Error(\"Invalid SVG element for InputAdapter\");\n    if (!viewport) throw new Error(\"Missing viewport for InputAdapter\");\n    if (viewport.getElement() != element) throw new Error(\"Mismatched viewport for passed-in element\");\n    if (this._element) throw new Error(\"Trying to initialize an InputAdapter already initialized\");\n\n    this._element = element;\n    this._viewport = viewport;\n\n    this._element.addEventListener('mousedown', this.onMouseDown);\n    this._element.addEventListener('mousemove', this.onMouseMove);\n    this._element.addEventListener('touchstart', this.onTouchStart);\n    this._element.addEventListener('touchmove', this.onTouchMove);\n    this._element.addEventListener('contextmenu', this.onContextMenu);\n    this._element.addEventListener('wheel', this.onWheel);\n  }\n\n  destroy()\n  {\n    if (!this._element) throw new Error(\"Trying to destroy an InputAdapter that is not yet initialized\");\n\n    this._element.removeEventListener('mousedown', this.onMouseDown);\n    this._element.removeEventListener('mousemove', this.onMouseMove);\n    this._element.removeEventListener('touchstart', this.onTouchStart);\n    this._element.removeEventListener('contextmenu', this.onContextMenu);\n    this._element.removeEventListener('wheel', this.onWheel);\n\n    this._element = null;\n  }\n\n  onMouseDown(e)\n  {\n    if (!this._controller) return false;\n\n    e.stopPropagation();\n    e.preventDefault();\n\n    const cursor = this._cursor;\n\n    //Blur any element in focus\n    document.activeElement.blur();\n    this._element.focus();\n\n    //Make sure mouse move is deleted, just in case\n    if (cursor._mousemove)\n    {\n      document.removeEventListener('mousemove', cursor._mousemove);\n      cursor._mousemove = null;\n    }\n    //Make sure mouse up is deleted, just in case\n    if (cursor._mouseup)\n    {\n      document.removeEventListener('mouseup', cursor._mouseup);\n      cursor._mouseup = null;\n    }\n\n    //HACK: To allow Mac's to use ctrl+click as right clicks\n    const button = e.ctrlKey ? 2 : e.button;\n\n    //Is this a valid mouse down?\n    if (this.onInputDown(e.clientX, e.clientY, button))\n    {\n      //Start mouse down logic...\n      cursor._mousemove = this.onMouseDownThenMove;\n      cursor._mouseup = this.onMouseDownThenUp;\n\n      document.addEventListener('mousemove', cursor._mousemove);\n      document.addEventListener('mouseup', cursor._mouseup);\n    }\n\n    return false;\n  }\n\n  onMouseMove(e)\n  {\n    if (!this._controller) return false;\n\n    const mouse = this._viewport.transformScreenToView(e.clientX, e.clientY);\n    this._pointer.setPosition(mouse.x, mouse.y);\n\n    //Can update target here for hover effects...\n  }\n\n  onMouseDownThenMove(e)\n  {\n    if (!this._controller) return false;\n\n    e.stopPropagation();\n    e.preventDefault();\n\n    this.onInputMove(e.clientX, e.clientY);\n\n    return false;\n  }\n\n  onMouseDownThenUp(e)\n  {\n    if (!this._controller) return false;\n\n    e.stopPropagation();\n    e.preventDefault();\n\n    const cursor = this._cursor;\n\n    //Make sure mouse move is deleted, just in case\n    if (cursor._mousemove)\n    {\n      document.removeEventListener('mousemove', cursor._mousemove);\n      cursor._mousemove = null;\n    }\n    //Make sure mouse up is deleted, just in case\n    if (cursor._mouseup)\n    {\n      document.removeEventListener('mouseup', cursor._mouseup);\n      cursor._mouseup = null;\n    }\n\n    this.onInputUp(e.clientX, e.clientY);\n\n    return false;\n  }\n\n  onTouchStart(e)\n  {\n    if (!this._controller) return false;\n\n    if (e.changedTouches.length == 1)\n    {\n      e.stopPropagation();\n      e.preventDefault();\n\n      const cursor = this._cursor;\n\n      //Blur any element in focus\n      document.activeElement.blur();\n      this._element.focus();\n\n      //Make sure touch move is deleted, just in case\n      if (cursor._touchmove)\n      {\n        document.removeEventListener('touchmove', cursor._touchmove);\n        cursor._touchmove = null;\n      }\n      //Make sure touch end is deleted, just in case\n      if (cursor._touchend)\n      {\n        document.removeEventListener('touchend', cursor._touchend);\n        cursor._touchend = null;\n      }\n\n      const touch = e.changedTouches[0];\n      //Is this a valid touch start?\n      if (this.onInputDown(touch.clientX, touch.clientY, 0))\n      {\n        //Start touch start logic...\n        cursor._touchmove = this.onTouchStartThenMove;\n        cursor._touchend = this.onTouchStartThenEnd;\n\n        document.addEventListener('touchmove', cursor._touchmove);\n        document.addEventListener('touchend', cursor._touchend);\n      }\n\n      return false;\n    }\n  }\n\n  onTouchStartThenEnd(e)\n  {\n    if (!this._controller) return false;\n\n    e.stopPropagation();\n    e.preventDefault();\n\n    const cursor = this._cursor;\n\n    //Make sure mouse move is deleted, just in case\n    if (cursor._touchmove)\n    {\n      document.removeEventListener('touchmove', cursor._touchmove);\n      cursor._touchmove = null;\n    }\n    //Make sure mouse up is deleted, just in case\n    if (cursor._touchend)\n    {\n      document.removeEventListener('touchend', cursor._touchend);\n      cursor._touchend = null;\n    }\n\n    const touch = e.changedTouches[0];\n    this.onInputUp(touch.clientX, touch.clientY);\n\n    return false;\n  }\n\n  onTouchStartThenMove(e)\n  {\n    if (!this._controller) return false;\n\n    e.stopPropagation();\n    e.preventDefault();\n\n    const touch = e.changedTouches[0];\n    this.onInputMove(touch.clientX, touch.clientY);\n\n    return false;\n  }\n\n  onContextMenu(e)\n  {\n    if (!this._controller) return false;\n\n    e.stopPropagation();\n    e.preventDefault();\n\n    return false;\n  }\n\n  onWheel(e)\n  {\n    if (!this._controller) return false;\n\n    e.stopPropagation();\n    e.preventDefault();\n\n    const controller = this._controller;\n    const pointer = this._pointer;\n    const dy = e.deltaY * this._scrollSensitivity;\n    const prev = this._viewport.getScale();\n    const next = prev + dy;\n\n    if (controller.onZoomChange(pointer, next, prev))\n    {\n      this._viewport.setScale(next);\n    }\n\n    return false;\n  }\n\n  onInputDown(x, y, button)\n  {\n    if (!this._controller) throw new Error(\"Missing controller for input adapter\");\n\n    //Setup for hold timer...\n    const cursor = this._cursor;\n    const controller = this._controller;\n    const pointer = this._pointer;\n    const mouse = this._viewport.transformScreenToView(x, y);\n    pointer.setPosition(mouse.x, mouse.y);\n\n    this._dragging = false;\n    this._altinput = button == 2;\n\n    if (!controller.onPreInputEvent(pointer))\n    {\n      pointer.beginInput();\n      cursor._timer = setTimeout(this.onDelayedInputDown, this._holdInputDelay);\n      return true;\n    }\n\n    return false;\n  }\n\n  onDelayedInputDown()\n  {\n    if (!this._controller) throw new Error(\"Missing controller for input adapter\");\n\n    //That means the input is remaining still (like a hold)...\n    if (!this._dragging)\n    {\n      this._altinput = true;\n    }\n  }\n\n  onInputMove(x, y)\n  {\n    if (!this._controller) throw new Error(\"Missing controller for input adapter\");\n\n    const controller = this._controller;\n    const pointer = this._pointer;\n    const mouse = this._viewport.transformScreenToView(x, y);\n    pointer.setPosition(mouse.x, mouse.y);\n\n    if (!this._dragging)\n    {\n      if (pointer.getDistanceSquToInitial() > this._draggingRadiusSqu)\n      {\n        this._dragging = true;\n        if (!controller.onDragStart(pointer))\n        {\n          this._dragging = false;\n\n          //TODO: you could NOT cancel the event and just update the target?\n          //If so, who is the initial target then?\n\n          //Stop the input event early...\n          this.cancelInputEvent();\n        }\n      }\n      else\n      {\n        //Still a click or hold...\n      }\n    }\n    else\n    {\n      //Continue to drag...\n      controller.onDragMove(pointer);\n    }\n  }\n\n  onInputUp(x, y)\n  {\n    if (!this._controller) throw new Error(\"Missing controller for input adapter\");\n\n    const cursor = this._cursor;\n    const timer = cursor._timer;\n    if (timer)\n    {\n      clearTimeout(timer);\n      cursor._timer = null;\n    }\n\n    //Update pointer target to final position\n    const controller = this._controller;\n    const pointer = this._pointer;\n    const mouse = this._viewport.transformScreenToView(x, y);\n    pointer.setPosition(mouse.x, mouse.y);\n\n    if (this._dragging)\n    {\n      //Stop dragging!\n      controller.onDragStop(pointer);\n    }\n    else\n    {\n      if (this._altinput)\n      {\n        //Alt Tap!\n        controller.onAltInputEvent(pointer);\n      }\n      else\n      {\n        //Tap!\n        const result = controller.onInputEvent(pointer);\n\n        //If the input was not consumed...\n        if (!result)\n        {\n          //Try for double tap...\n          const dx = x - this._prevEmptyX;\n          const dy = y - this._prevEmptyY;\n          const dist = dx * dx + dy * dy;\n          const dt = Date.now() - this._prevEmptyTime;\n          if (this._prevEmptyInput &&\n            dist < this._minTapRadius &&\n            dt < this._dblInputDelay)\n          {\n            //Double tap!\n            controller.onDblInputEvent(pointer);\n\n            this._prevEmptyInput = false;\n          }\n          else\n          {\n            this._prevEmptyInput = true;\n            this._prevEmptyTime = Date.now();\n            this._prevEmptyX = x;\n            this._prevEmptyY = y;\n          }\n        }\n      }\n    }\n\n    pointer.endInput();\n    controller.onPostInputEvent(pointer);\n  }\n\n  cancelInputEvent()\n  {\n    const controller = this._controller;\n    const pointer = this._pointer;\n    const cursor = this._cursor;\n\n    //Make sure mouse move is deleted, just in case\n    if (cursor._mousemove)\n    {\n      document.removeEventListener('mousemove', cursor._mousemove);\n      cursor._mousemove = null;\n    }\n    //Make sure mouse up is deleted, just in case\n    if (cursor._mouseup)\n    {\n      document.removeEventListener('mouseup', cursor._mouseup);\n      cursor._mouseup = null;\n    }\n\n    const timer = cursor._timer;\n    if (timer)\n    {\n      clearTimeout(timer);\n      cursor._timer = null;\n    }\n\n    pointer.endInput();\n    controller.onPostInputEvent(pointer);\n  }\n\n  getActiveElement()\n  {\n    return this._element;\n  }\n\n  getActiveViewport()\n  {\n    return this._viewport;\n  }\n\n  getPointer()\n  {\n    return this._pointer;\n  }\n\n  isUsingTouch()\n  {\n    return this._cursor._touchmove || this._cursor._touchend;\n  }\n\n  isAltInput()\n  {\n    return this._altinput;\n  }\n\n  isDragging()\n  {\n    return this._dragging;\n  }\n}\n\nexport default InputAdapter;\n","/**\n * Represents and handles the transformations to the interactible viewport of\n * the SVG element.\n */\nclass Viewport\n{\n  constructor()\n  {\n    this._element = null;\n    this._offsetX = 0;\n    this._offsetY = 0;\n    this._nextOffsetX = 0;\n    this._nextOffsetY = 0;\n    this._offsetDamping = 0.1;\n\n    this._scaleFactor = 1;\n    this._minScale = 1;\n    this._maxScale = 1;\n  }\n\n  setElement(element)\n  {\n    this._element = element;\n    return this;\n  }\n\n  setMinScale(scale)\n  {\n    this._minScale = scale;\n    if (this._scaleFactor < this._minScale) this._scaleFactor = this._minScale;\n    return this;\n  }\n\n  setMaxScale(scale)\n  {\n    this._maxScale = scale;\n    if (this._scaleFactor > this._maxScale) this._scaleFactor = this._maxScale;\n    return this;\n  }\n\n  setOffsetDamping(damping)\n  {\n    this._offsetDamping = damping;\n    return this;\n  }\n\n  update()\n  {\n    const dx = this._nextOffsetX - this._offsetX;\n    this._offsetX += dx * this._offsetDamping;\n    const dy = this._nextOffsetY - this._offsetY;\n    this._offsetY += dy * this._offsetDamping;\n  }\n\n  transformScreenToView(clientX, clientY)\n  {\n    if (!this._element) return {x: clientX - this._offsetX, y: clientY - this._offsetY};\n\n    const ctm = this._element.getScreenCTM();\n    return {\n      x: (clientX - ctm.e) / ctm.a - this._offsetX,\n      y: (clientY - ctm.f) / ctm.d - this._offsetY\n    };\n  }\n\n  setOffset(x, y, immediate=false)\n  {\n    if (immediate)\n    {\n      this._nextOffsetX = this._offsetX = x;\n      this._nextOffsetY = this._offsetY = y;\n    }\n    else\n    {\n      this._nextOffsetX = x;\n      this._nextOffsetY = y;\n    }\n  }\n\n  addOffset(dx, dy, immediate=false)\n  {\n    if (immediate)\n    {\n      this._offsetX += dx;\n      this._offsetY += dy;\n      this._nextOffsetX = this._offsetX;\n      this._nextOffsetY = this._offsetY;\n    }\n    else\n    {\n      this._nextOffsetX += dx;\n      this._nextOffsetY += dy;\n    }\n  }\n\n  setScale(scale)\n  {\n    this._scaleFactor = Math.min(this._maxScale, Math.max(this._minScale, scale));\n  }\n\n  addScale(dscale)\n  {\n    this._scaleFactor += dscale;\n\n    if (this._scaleFactor > this._maxScale) this._scaleFactor = this._maxScale;\n    else if (this._scaleFactor < this._minScale) this._scaleFactor = this._minScale;\n  }\n\n  getOffsetX()\n  {\n    return this._offsetX;\n  }\n\n  getOffsetY()\n  {\n    return this._offsetY;\n  }\n\n  getOffsetDamping()\n  {\n    return this._offsetDamping;\n  }\n\n  getScale()\n  {\n    return this._scaleFactor;\n  }\n\n  getMinScale()\n  {\n    return this._minScale;\n  }\n\n  getMaxScale()\n  {\n    return this._maxScale;\n  }\n\n  getElement()\n  {\n    return this._element;\n  }\n}\n\nexport default Viewport;\n","import Config from 'config.js';\n\nclass GraphPicker\n{\n  constructor()\n  {\n    this.selectionBox = {\n      fromX: 0, fromY: 0,\n      toX: 0, toY: 0,\n      visible: false\n    };\n    this.targets = [];\n\n    this.target = null;\n    this.targetType = \"\";\n\n    this.initialTarget = null;\n    this.initialTargetType = \"\";\n  }\n\n  setInitialTarget(target, type)\n  {\n    this.initialTarget = target;\n    this.initialTargetType = type;\n  }\n\n  updateTarget(graph, x, y)\n  {\n    if (this.target = this.getNodeByInitialMarkerAt(graph, x, y))\n    {\n      //Clicked on initial marker\n      this.targetType = \"initial\";\n    }\n    else if (this.target = this.getEdgeByEndPointAt(graph, x, y))\n    {\n      //Clicked on endpoint\n      this.targetType = \"endpoint\";\n    }\n    else if (this.target = this.getNodeAt(graph, x, y))\n    {\n      //Clicked on node\n      this.targetType = \"node\";\n    }\n    else if (this.target = this.getEdgeAt(graph, x, y))\n    {\n      //Clicked on edge\n      this.targetType = \"edge\";\n    }\n    else\n    {\n      //Clicked on graph\n      this.target = null;\n      this.targetType = \"none\";\n    }\n\n    return this.target;\n  }\n\n  clearTarget()\n  {\n    this.target = null;\n    this.targetType = \"none\";\n  }\n\n  hasTarget()\n  {\n    return this.target != null;\n  }\n\n  getNodeAt(graph, x, y)\n  {\n    //Search graph\n    for(const node of graph.nodes)\n    {\n      const dx = x - node.x;\n      const dy = y - node.y;\n      if (dx * dx + dy * dy < Config.NODE_RADIUS_SQU)\n      {\n        return node;\n      }\n    }\n    return null;\n  }\n\n  getNodeByInitialMarkerAt(graph, x, y)\n  {\n    const startNode = graph.getStartNode();\n    if (!startNode) return null;\n\n    const dx = x - (startNode.x + Config.INITIAL_MARKER_OFFSET_X);\n    const dy = y - startNode.y;\n    if (dx * dx + dy * dy < Config.EDGE_RADIUS_SQU)\n    {\n      return startNode;\n    }\n\n    return null;\n  }\n\n  getEdgeAt(graph, x, y)\n  {\n    const center = {x: 0, y: 0};\n    \n    //Search graph\n    for(const edge of graph.edges)\n    {\n      edge.getCenterPoint(center);\n      const dx = x - center.x;\n      const dy = y - center.y;\n      if (dx * dx + dy * dy < Config.EDGE_RADIUS_SQU)\n      {\n        return edge;\n      }\n    }\n    return null;\n  }\n\n  getEdgeByEndPointAt(graph, x, y)\n  {\n    const end = {x: 0, y: 0};\n    //Search graph\n    for(const edge of graph.edges)\n    {\n      edge.getEndPoint(end);\n      const dx = x - end.x;\n      const dy = y - end.y;\n      if (dx * dx + dy * dy < Config.ENDPOINT_RADIUS_SQU)\n      {\n        return edge;\n      }\n    }\n    return null;\n  }\n\n  getSelectionBox()\n  {\n    return this.selectionBox;\n  }\n\n  getSelection(graph, forceUpdate=false)\n  {\n    if (forceUpdate)\n    {\n      const box = this.selectionBox;\n      const mx = Math.max(box.toX, box.fromX);\n      const my = Math.max(box.toY, box.fromY);\n      const lx = Math.min(box.toX, box.fromX);\n      const ly = Math.min(box.toY, box.fromY);\n      this.clearSelection();\n      getNodesWithin(graph, lx, ly, mx, my, this.targets);\n    }\n\n    return this.targets;\n  }\n\n  hasSelection()\n  {\n    return this.targets.length > 0;\n  }\n\n  clearSelection()\n  {\n    this.targets.length = 0;\n  }\n\n  isTargetInSelection(target)\n  {\n    return this.targets.includes(target || this.target);\n  }\n\n  isTarget(target)\n  {\n    return this.target == target;\n  }\n\n  beginSelection(graph, x, y)\n  {\n    const box = this.selectionBox;\n    box.fromX = box.toX = x;\n    box.fromY = box.toY = y;\n    this.clearSelection();\n\n    box.visible = true;\n  }\n\n  updateSelection(graph, x, y)\n  {\n    const box = this.selectionBox;\n    box.toX = x;\n    box.toY = y;\n    this.getSelection(graph, true);\n  }\n\n  endSelection(graph, x, y)\n  {\n    const box = this.selectionBox;\n    box.toX = x;\n    box.toY = y;\n    this.getSelection(graph, true);\n\n    box.visible = false;\n  }\n\n  isSelecting()\n  {\n    return this.selectionBox.visible;\n  }\n}\n\nfunction getNodesWithin(graph, x1, y1, x2, y2, dst)\n{\n  const fromX = Math.min(x1, x2);\n  const fromY = Math.min(y1, y2);\n  const toX = Math.max(x1, x2);\n  const toY = Math.max(y1, y2);\n\n  for(const node of graph.nodes)\n  {\n    if (node.x >= fromX && node.x < toX &&\n        node.y >= fromY && node.y < toY)\n    {\n      dst.push(node);\n    }\n  }\n  return dst;\n}\n\nexport default GraphPicker;\n","import Config from 'config.js';\n\nimport InputAdapter from 'system/inputadapter/InputAdapter.js';\nimport Viewport from 'system/inputadapter/Viewport.js';\n\nimport GraphPicker from './GraphPicker.js';\nimport Node from 'graph/Node.js';\nimport Edge from 'graph/Edge.js';\n\nconst EDGE_SYMBOL_SEPARATOR = Config.EDGE_SYMBOL_SEPARATOR;\n\nclass InputController\n{\n  constructor()\n  {\n    this._module = null;\n\n    //TODO: Should this live here?\n    this._viewport = new Viewport()\n      .setMinScale(Config.MIN_SCALE)\n      .setMaxScale(Config.MAX_SCALE)\n      .setOffsetDamping(Config.SMOOTH_OFFSET_DAMPING);\n\n    //TODO: Should this live here?\n    this._inputAdapter = new InputAdapter()\n      .setController(this);\n\n    this._picker = new GraphPicker();\n\n    this._graphController = null;\n\n    //Used to check if target needs to be updated for the hover effect\n    this.prevPointerX = 0;\n    this.prevPointerY = 0;\n\n    //Make sure this is always false when moving endpoints\n    this.isNewEdge = false;\n\n    //Used to change render to follow pointer when moving initial marker\n    this.ghostInitialMarker = null;\n\n    //Whether to destroy pointless edges\n    this.shouldDestroyPointlessEdges = Config.DEFAULT_SHOULD_DESTROY_POINTLESS_EDGE;\n\n    //Swap left to right clicks and vice versa on anything else but Macs\n    this._swapMouseScheme = true;//!navigator.platform.startsWith(\"Mac\");\n\n    //Used to determine whether the target should be destroyed because of trash mode\n    this._trashMode = false;\n  }\n\n  setModule(module)\n  {\n    this._module = module;\n  }\n\n  initialize(app)\n  {\n    const element = app.workspace.ref;\n    this._viewport.setElement(element);\n    this._graphController = app.graphController;\n\n    this._inputAdapter.initialize(element, this._viewport);\n  }\n\n  destroy()\n  {\n    this._inputAdapter.destroy();\n  }\n\n  update()\n  {\n    //Smooth transition offset\n    this._viewport.update();\n\n    const graph = this._graphController.getGraph();\n    const pointer = this._inputAdapter.getPointer();\n    const picker = this._picker;\n    const x = pointer.x;\n    const y = pointer.y;\n\n    if (x != this.prevPointerX || y != this.prevPointerY)\n    {\n      this.prevPointerX = x;\n      this.prevPointerY = y;\n\n      //Update target\n      picker.updateTarget(graph, x, y);\n\n      //HACK: to make the cursor look like a pointer when targeting\n      if (picker.hasTarget())\n      {\n        document.body.style.cursor = \"pointer\";\n      }\n      else\n      {\n        document.body.style.cursor = \"auto\";\n      }\n    }\n  }\n\n  //Override\n  onPreInputEvent(pointer)\n  {\n    const inputController = this;\n    const graphController = this._graphController;\n\n    const graph = graphController.getGraph();\n    const picker = inputController.getPicker();\n    picker.updateTarget(graph, pointer.x, pointer.y);\n    picker.setInitialTarget(picker.target, picker.targetType);\n\n    const target = picker.initialTarget;\n    const targetType = picker.initialTargetType;\n\n    //Make sure to lose focus on label editors\n    /*\n    if (this.labelEditor.hasFocus())\n    {\n      this.labelEditor.closeEditor();\n      event.result = false;\n    }\n    */\n\n    if (picker.hasSelection())\n    {\n      //Unselect everything is clicked on something other than nodes...\n      if (targetType != \"node\" || !picker.isTargetInSelection(target))\n      {\n        picker.clearSelection();\n      }\n    }\n\n    //Disable all graph input when in step-by-step mode\n    if (graphController.tester.getStepByStepMode())\n    {\n      //Consume event!\n      return true;\n    }\n\n    return false;\n  }\n\n  //Override\n  onInputEvent(pointer)\n  {\n    const inputController = this;\n    const graphController = this._graphController;\n\n    const x = pointer.x;\n    const y = pointer.y;\n\n    const graph = graphController.getGraph();\n    const picker = inputController.getPicker();\n    picker.updateTarget(graph, x, y);\n    const target = picker.initialTarget;\n    const targetType = picker.initialTargetType;\n\n    //If is in trash mode... capture all events!\n    if (inputController.isTrashMode())\n    {\n      //Click to delete node\n      if (targetType === 'node')\n      {\n        //So that the emitted 'delete' events can use this\n        graphController.prevX = target.x;\n        graphController.prevY = target.y;\n\n        //If there exists selected states, delete them all!\n        if (picker.hasSelection())\n        {\n          //Delete all selected nodes\n          graphController.deleteSelectedNodes(target);\n        }\n        else\n        {\n          //Delete a single node\n          graphController.deleteTargetNode(target);\n        }\n\n        return true;\n      }\n      else if (targetType === 'edge' || targetType === 'endpoint')\n      {\n        //Delete a single edge\n        graphController.deleteTargetEdge(target);\n        return true;\n      }\n\n      //Clicked on something you cannot delete\n      //return true;\n      return false;\n    }\n\n    //If not in Trash Mode, then events should pass through to here...\n    //Otherwise, ALL events are captured to prevent ALL default behavior.\n\n    //Makes sure that user cannot toggle state while in trash mode\n    if (targetType === 'node')\n    {\n      graphController.toggleNode(target);\n      return true;\n    }\n    //Edit label for selected edge\n    else if (targetType === 'edge')\n    {\n      graphController.openLabelEditor(target, x, y);\n      return true;\n    }\n\n    return false;\n  }\n\n  //Override\n  onAltInputEvent(pointer)\n  {\n    return this.onInputEvent(pointer);\n  }\n\n  //Override\n  onDblInputEvent(pointer)\n  {\n    const graphController = this._graphController;\n    const x = pointer.x;\n    const y = pointer.y;\n\n    if (!this.isTrashMode())\n    {\n      //Create state at position\n      graphController.createNode(x, y);\n      return true;\n    }\n    else\n    {\n      graphController.emit(\"tryCreateWhileTrash\");\n      return true;\n    }\n\n    return false;\n  }\n\n  //Override\n  onDragStart(pointer)\n  {\n    const inputController = this;\n    const graphController = this._graphController;\n\n    const graph = graphController.getGraph();\n    const picker = inputController.getPicker();\n    const x = pointer.x;\n    const y = pointer.y;\n    const target = picker.initialTarget;\n    const targetType = picker.initialTargetType;\n\n    const viewport = inputController.getViewport();\n\n    //If is in move mode...\n    if (inputController.isMoveMode())\n    {\n      //Make sure it is not in trash mode\n      if (inputController.isTrashMode())\n      {\n        //inputController.setMoveMode(false, true);//Set to false\n\n        graphController.emit(\"tryCreateWhileTrash\");\n        return false;\n      }\n\n      //Make sure it is not in new edge mode\n      inputController.isNewEdge = false;\n\n      //Makes sure that placeholders are not quadratics!\n      if (targetType === 'edge' && target.isPlaceholder())\n      {\n        //inputController.setMoveMode(false, true);//Set to false\n\n        //Ignore drag event...\n        return false;\n      }\n      //Moving node (and selected nodes)\n      else if (targetType === 'node')\n      {\n        //target MUST be an instance of Node...\n        if (!(target instanceof Node))\n          throw new Error(\"Invalid target \" + target + \" for type \\'\" + targetType + \"\\'. Must be an instance of Node.\");\n\n        //Ready to move node(s)...\n        graphController.prevX = target.x;\n        graphController.prevY = target.y;\n        return true;\n      }\n      //Moving edge center point\n      else if (targetType === 'edge')\n      {\n        //target MUST be an instance of Edge...\n        if (!(target instanceof Edge))\n          throw new Error(\"Invalid target \" + target + \" for type \\'\" + targetType + \"\\'. Must be an instance of Edge.\");\n\n        //Makes sure that placeholders are not quadratics!\n        if (target.isPlaceholder())\n        {\n          //inputController.setMoveMode(false, true);//Set to false\n          return false;\n        }\n\n        //Save previous quadratics\n        const targetQuad = target.getQuadratic();\n        graphController.prevQuad.radians = targetQuad.radians;\n        graphController.prevQuad.length = targetQuad.length;\n\n        //Ready to move the edge vertex to pointer...\n        return true;\n      }\n      //Moving initial marker\n      else if (targetType === 'initial')\n      {\n        inputController.ghostInitialMarker = pointer;\n\n        //Ready to move the initial marker to another state...\n        return true;\n      }\n      //Moving nothing\n      else if (targetType === 'none')\n      {\n        //Reuse nodal prev pos for graph prev pos\n        graphController.prevX = x;\n        graphController.prevY = y;\n\n        //Ready to move the graph to pointer...\n        return true;\n      }\n    }\n    //If is NOT in move mode...\n    else\n    {\n      //If input dragged a node...\n      if (targetType === 'node')\n      {\n        if (!inputController.isTrashMode())\n        {\n          const edge = graph.newEdge(target, pointer, Config.STR_TRANSITION_DEFAULT_LABEL);\n\n          //Redirect pointer to refer to the edge as the new target\n          picker.setInitialTarget(edge, \"endpoint\");\n          inputController.isNewEdge = true;\n\n          //Reset previous quad values for new proxy edge\n          const edgeQuad = edge.getQuadratic();\n          graphController.prevQuad.radians = edgeQuad.radians;\n          graphController.prevQuad.length = edgeQuad.length;\n\n          //Ready to move proxy edge to pointer...\n          //inputController.setMoveMode(true, true);\n          return true;\n        }\n        else\n        {\n          graphController.emit(\"tryCreateWhileTrash\");\n          return false;\n        }\n      }\n      else if (targetType == 'edge')\n      {\n        //Do nothing.\n        return false;\n      }\n      //If input dragged nothing...\n      else if (targetType === 'none')\n      {\n        //Begin selection box...\n        picker.beginSelection(graph, x, y);\n        return true;\n      }\n    }\n\n    //In either moving or not... moving endpoints\n    if (targetType === 'endpoint')\n    {\n      //target MUST be an instance of Edge...\n      if (!(target instanceof Edge))\n        throw new Error(\"Invalid target \" + target + \" for type \\'\" + targetType + \"\\'. Must be an instance of Edge.\");\n\n      const targetQuad = target.getQuadratic();\n      graphController.prevQuad.radians = targetQuad.radians;\n      graphController.prevQuad.length = targetQuad.length;\n\n      graphController.prevEdgeTo = target.getDestinationNode();\n      inputController.isNewEdge = inputController.isMoveMode() ? false : true;\n\n      //Ready to move the edge endpoint to pointer...\n      return true;\n    }\n\n    //All input should be handled\n    //throw new Error(\"Unknown target type \\'\" + targetType + \"\\'.\");\n\n    return false;\n  }\n\n  //Override\n  onDragMove(pointer)\n  {\n    const inputController = this;\n    const graphController = this._graphController;\n    const graph = graphController.getGraph();\n\n    const picker = inputController.getPicker();\n    const x = pointer.x;\n    const y = pointer.y;\n    const target = picker.initialTarget;\n    const targetType = picker.initialTargetType;\n\n    //If is in move mode...\n    if (inputController.isMoveMode())\n    {\n      //Continue to move node(s)\n      if (targetType === 'node')\n      {\n        if (picker.hasSelection())\n        {\n          graphController.moveMultipleNodesTo(pointer, picker.getSelection(graph), x, y);\n        }\n        else\n        {\n          graphController.moveNodeTo(pointer, target, x, y);\n        }\n        return true;\n      }\n      //Continue to move edge vertex\n      else if (targetType === 'edge')\n      {\n        graphController.moveEdgeTo(pointer, target, x, y);\n        return true;\n      }\n      //Continue to move edge endpoint\n      else if (targetType === 'endpoint')\n      {\n        graphController.moveEndpointTo(pointer, target, x, y);\n        return true;\n      }\n      //Continue to move initial\n      else if (targetType === 'initial')\n      {\n        //Move initial marker to node or pointer\n        const dst = picker.getNodeAt(graph, x, y) || pointer;\n        inputController.ghostInitialMarker = dst;\n        return true;\n      }\n      //Continue to move graph\n      else if (targetType === 'none')\n      {\n        //Move graph\n        const dx = x - graphController.prevX;\n        const dy = y - graphController.prevY;\n        inputController.getViewport().addOffset(dx, dy, true);\n        return true;\n      }\n      else\n      {\n        //All move drag should be handled\n        throw new Error(\"Unknown target type \\'\" + targetType + \"\\'.\");\n      }\n    }\n    //If is NOT in move mode...\n    else\n    {\n      if (inputController.isNewEdge)\n      {\n        graphController.moveEndpointTo(pointer, target, x, y);\n        return true;\n      }\n\n      //If the selection box is active...\n      if (picker.isSelecting())\n      {\n        //Update the selection box\n        picker.updateSelection(graph, x, y);\n        return true;\n      }\n\n      //Otherwise, don't do anything. Cause even input drags will become move drags.\n    }\n  }\n\n  //Override\n  onDragStop(pointer)\n  {\n    const inputController = this;\n    const graphController = this._graphController;\n\n    const graph = graphController.getGraph();\n    const picker = inputController.getPicker();\n    const x = pointer.x;\n    const y = pointer.y;\n    picker.updateTarget(graph, x, y);\n    const target = picker.initialTarget;\n    const targetType = picker.initialTargetType;\n\n    //If is in move mode...\n    if (inputController.isMoveMode() || inputController.isNewEdge)\n    {\n      //If stopped dragging a node...\n      if (targetType === 'node')\n      {\n        //Delete it if withing trash area...\n        if (inputController.isTrashMode())\n        {\n          //If there exists selected states, delete them all!\n          if (picker.hasSelection())\n          {\n            graphController.deleteSelectedNodes(target);\n          }\n          else\n          {\n            //Delete a single node\n            graphController.deleteTargetNode(target);\n          }\n\n          return true;\n        }\n        //If dragged to an empty space (not trash)\n        else\n        {\n          //Do nothing, since should have moved to position\n          if (picker.hasSelection())\n          {\n            const dx = x - graphController.prevX;\n            const dy = y - graphController.prevY;\n            graphController.emit(\"nodeMoveAll\", picker.getSelection(graph), dx, dy);\n          }\n          else\n          {\n            graphController.emit(\"nodeMove\", target, x, y, graphController.prevX, graphController.prevY);\n          }\n          return true;\n        }\n      }\n      //If stopped dragging a edge...\n      else if (targetType === 'edge')\n      {\n        //Delete it if withing trash area...\n        if (inputController.isTrashMode())\n        {\n          graphController.deleteTargetEdge(target);\n        }\n        else\n        {\n          //Do nothing, since should have moved to position\n          graphController.emit(\"edgeMove\", target, target.getQuadratic(), graphController.prevQuad);\n        }\n        return true;\n      }\n      //If stopped dragging a endpoint...\n      else if (inputController.isNewEdge || targetType === 'endpoint')\n      {\n        //Delete it if withing trash area...\n        if (inputController.isTrashMode())\n        {\n          graphController.deleteTargetEdge(target);\n          return true;\n        }\n        //If hovering over a node...\n        else if (target.getDestinationNode() instanceof Node)\n        {\n          const result = graph.formatEdge(target);\n\n          //If a different edge is the result of the target...\n          if (result !== target)\n          {\n            //Allow the user to edit the merged labels\n            graphController.openLabelEditor(result, x, y, result.getEdgeLabel(), false);\n\n            //Delete the merged label\n            graph.deleteEdge(target);\n            return true;\n          }\n          //Open label editor if a new edge...\n          else\n          {\n            if (inputController.isNewEdge)\n            {\n              graphController.openLabelEditor(target, x, y, null, true, () => {\n                graphController.emit(\"userPostCreateEdge\", graph, target);\n              });\n            }\n            else\n            {\n              graphController.openLabelEditor(target, x, y);\n            }\n          }\n\n          if (inputController.isNewEdge)\n          {\n            //Must be after openLabelEditor() to allow the function to check it...\n            inputController.isNewEdge = false;\n\n            //Emit event\n            graphController.emit(\"userCreateEdge\", graph, target);\n          }\n          else if (graphController.prevEdgeTo !== null)\n          {\n            //Emit event\n            graphController.emit(\"edgeDestination\", target, target.getDestinationNode(), graphController.prevEdgeTo, graphController.prevQuad);\n          }\n\n          return true;\n        }\n        //If hovering over anything else...\n        else\n        {\n          //Destroy any edge that no longer have a destination\n          if (inputController.shouldDestroyPointlessEdges)\n          {\n            graph.deleteEdge(target);\n            return true;\n          }\n          //Keep edges as placeholders (used in DFA's)\n          else\n          {\n            target.changeDestinationNode(null);\n\n            //Open label editor if default edge...\n            if (target.getEdgeLabel().length <= 0)\n            {\n              graphController.openLabelEditor(target, x, y);\n            }\n            return true;\n          }\n        }\n      }\n      else if (targetType === 'initial')\n      {\n        //If valid initial object to mark...\n        if (inputController.ghostInitialMarker instanceof Node)\n        {\n          const prevInitial = graph.getStartNode();\n\n          //Set the new object as the initial node\n          graph.setStartNode(inputController.ghostInitialMarker);\n\n          //Emit event\n          graphController.emit(\"nodeInitial\", inputController.ghostInitialMarker, prevInitial);\n        }\n\n        //Reset ghost initial marker\n        inputController.ghostInitialMarker = null;\n        return true;\n      }\n      else if (targetType === 'none')\n      {\n        //Do nothing. It should already be moved.\n        return true;\n      }\n      else\n      {\n        //All move drag should be handled\n        throw new Error(\"Unknown target type \\'\" + targetType + \"\\'.\");\n      }\n    }\n    //If is NOT in move mode...\n    else\n    {\n      //If was trying to select...\n      if (picker.isSelecting())\n      {\n        //Stop selecting stuff, fool.\n        picker.endSelection(graph, x, y);\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  //Override\n  onPostInputEvent(pointer)\n  {\n    const inputController = this;\n    const graphController = this._graphController;\n    const graph = graphController.getGraph();\n    const picker = inputController.getPicker();\n\n    picker.clearTarget();\n    picker.updateTarget(graph, pointer.x, pointer.y);\n  }\n\n  //Override\n  onZoomChange(pointer, zoomValue, prevValue)\n  {\n    return true;\n  }\n\n  getViewport()\n  {\n    return this._viewport;\n  }\n\n  setTrashMode(enabled)\n  {\n    this._trashMode = enabled;\n  }\n\n  isTrashMode()\n  {\n    return this._trashMode;\n  }\n\n  setInputScheme(shouldInputFirst)\n  {\n    this._swapMouseScheme = !shouldInputFirst;\n  }\n\n  getInputScheme()\n  {\n    return this._swapMouseScheme;\n  }\n\n  isMoveMode()\n  {\n    const result = this._inputAdapter.isAltInput();\n    return this._swapMouseScheme ? !result : result;\n  }\n\n  isDragging()\n  {\n    return this._inputAdapter.isDragging();\n  }\n\n  isActionMode(graphController)\n  {\n    return this._inputAdapter.getPointer().isActive() ?\n      //Is considered an input when NOT moving or when creating a new edge...\n      graphController.isNewEdge || !this.isMoveMode() :\n      //If not active, just show default input...\n      !this._swapMouseScheme;\n  }\n\n  getPicker()\n  {\n    return this._picker;\n  }\n\n  getAdapter()\n  {\n    return this._inputAdapter;\n  }\n}\n\nexport default InputController;\n","import Downloader from 'util/Downloader.js';\nimport * as FlapSaver from 'util/FlapSaver.js';\n\nclass HotKeys\n{\n  constructor(events)\n  {\n    this.workspace = null;\n    this.toolbar = null;\n    this.events = null;\n    this.graphController = null;\n    this.machineController = null;\n\n    this.onKeyDown = this.onKeyDown.bind(this);\n  }\n\n  initialize(app)\n  {\n    this.workspace = app.workspace;\n    this.toolbar = app.toolbar;\n    this.events = app.eventManager;\n    this.graphController = app.graphController;\n    this.machineController = app.machineController;\n\n    window.addEventListener('keydown', this.onKeyDown);\n  }\n\n  destroy()\n  {\n    window.removeEventListener('keydown', this.onKeyDown);\n  }\n\n  onKeyDown(e)\n  {\n    //Ctrl-S\n    if (event.which == 83 && (event.metaKey || event.ctrlKey))\n    {\n      //Save as machine file\n      //TODO: Refer to export panel\n      const jsonString = JSON.stringify(FlapSaver.saveToJSON(this.graphController, this.machineController));\n      const machineName = this.machineController.getMachineName();\n      Downloader.downloadText(machineName + '.json', jsonString);\n\n      e.preventDefault();\n      e.stopPropagation();\n    }\n    //Ctrl-Z\n    else if (event.which == 90 && (event.metaKey || event.ctrlKey))\n    {\n      if (event.shiftKey)\n      {\n        //Redo\n        //TODO: Refer to toolbar\n        this.events.getLogger().redo();\n      }\n      else\n      {\n        //Undo\n        //TODO: Refer to toolbar\n        this.events.getLogger().undo();\n      }\n      e.preventDefault();\n      e.stopPropagation();\n    }\n    //Ctrl-P\n    else if (event.which == 80 && (event.metaKey || event.ctrlKey))\n    {\n      //Export to PNG\n      //TODO: Refer to export panel\n      const workspaceDim = this.workspace.ref.viewBox.baseVal;\n      const width = workspaceDim.width;\n      const height = workspaceDim.height;\n      const svg = this.workspace.getSVGForExport(width, height);\n      Downloader.downloadSVG(this.machineController.getMachineName(), 'png', svg, width, height);\n\n      e.preventDefault();\n      e.stopPropagation();\n    }\n  }\n}\n\nexport default HotKeys;\n","import LocalSaveManager from './LocalSaveManager.js';\n\n//Singleton pattern (I know, I'm sorry. But we must.)\nconst INSTANCE = new LocalSaveManager();\nexport default INSTANCE;\n","class LocalSaveManager\n{\n  constructor()\n  {\n    this._handlers = new Set();\n    this._intervalID = null;\n    this._intervalMillis = 1000;\n\n    this._init = false;\n\n    this.onIntervalUpdate = this.onIntervalUpdate.bind(this);\n  }\n\n  setAutoSaveInterval(millis)\n  {\n    if (!millis || millis <= 0) throw new Error(\"AutoSave interval must be greater than 0\");\n    this._intervalMillis = millis;\n  }\n\n  registerHandler(handler)\n  {\n    if (this._handlers.has(handler))\n    {\n      throw new Error(\"Cannot register handler, since it is already registered\");\n    }\n    this._handlers.add(handler);\n  }\n\n  unregisterHandler(handler)\n  {\n    if (!this._handlers.has(handler))\n    {\n      throw new Error(\"Cannot remove handler, since it is not yet registered\");\n    }\n    this._handlers.delete(handler);\n  }\n\n  initialize()\n  {\n    if (this._init) throw new Error(\"Cannot initialize LocalSave, since it is already initialized\");\n\n    if (this.doesSupportLocalStorage())\n    {\n      //Prepare autosave\n      this._intervalID = setInterval(this.onIntervalUpdate, this._intervalMillis);\n      this._init = true;\n    }\n    else\n    {\n      //Does not support local storage, so ignore everything...\n    }\n  }\n\n  terminate()\n  {\n    if (!this._init) throw new Error(\"Cannot terminate LocalSave, since it is not yet initialized\");\n\n    clearInterval(this._intervalID);\n\n    this._handlers.clear();\n    this._init = false;\n  }\n\n  onIntervalUpdate()\n  {\n    //Save most recent save for all registered handlers\n    for(let handler of this._handlers)\n    {\n      try\n      {\n        handler.onAutoSave();\n      }\n      catch(e)\n      {\n        console.error(e);\n      }\n    }\n  }\n\n  setStringToStorage(saveKey, stringData)\n  {\n    if (!this.doesSupportLocalStorage()) return;\n    if (stringData.length > 0)\n    {\n      localStorage.setItem(saveKey, stringData);\n    }\n    else\n    {\n      localStorage.removeItem(saveKey);\n    }\n  }\n\n  getStringFromStorage(saveKey)\n  {\n    if (!this.doesSupportLocalStorage()) return \"\";\n    return localStorage.getItem(saveKey) || \"\";\n  }\n\n  loadFromStorage(saveKey)\n  {\n    if (!this.doesSupportLocalStorage()) return null;\n    try\n    {\n      const value = localStorage.getItem(saveKey);\n      if (value && value.length > 0)\n      {\n        return JSON.parse(value);\n      }\n      else\n      {\n        return null;\n      }\n    }\n    catch(e)\n    {\n      console.error(e);\n      return {};\n    }\n  }\n\n  saveToStorage(saveKey, jsonData)\n  {\n    if (!this.doesSupportLocalStorage()) return;\n\n    let hidden, visibilityChange;\n\n    // Opera 12.10 and Firefox 18 and later support\n    if (typeof document.hidden !== \"undefined\")\n    {\n      hidden = \"hidden\";\n      visibilityChange = \"visibilitychange\";\n    }\n    else if (typeof document.msHidden !== \"undefined\")\n    {\n      hidden = \"msHidden\";\n      visibilityChange = \"msvisibilitychange\";\n    }\n    else if (typeof document.webkitHidden !== \"undefined\")\n    {\n      hidden = \"webkitHidden\";\n      visibilityChange = \"webkitvisibilitychange\";\n    }\n\n    if (document[hidden])\n    {\n      //Don't save anything...\n      return;\n    }\n\n    try\n    {\n      if (typeof jsonData == 'object')\n      {\n        let flag = jsonData;\n        if (flag)\n        {\n          flag = false;\n\n          //Don't save empty objects, cause that is wasteful.\n          for(let key in jsonData)\n          {\n            if (jsonData.hasOwnProperty(key))\n            {\n              flag = true;\n              break;\n            }\n          }\n        }\n\n        //Save or remove the data...\n        if (flag)\n        {\n          localStorage.setItem(saveKey, JSON.stringify(jsonData));\n        }\n        else\n        {\n          localStorage.removeItem(saveKey);\n        }\n      }\n      else if (typeof jsonData == 'string')\n      {\n        const flag = jsonData.length <= 0;\n\n        //Save or remove the data...\n        if (flag)\n        {\n          localStorage.setItem(saveKey, jsonData);\n        }\n        else\n        {\n          localStorage.removeItem(saveKey);\n        }\n      }\n    }\n    catch(e)\n    {\n      console.error(e);\n    }\n  }\n\n  existsInStorage(saveKey)\n  {\n    if (!this.doesSupportLocalStorage()) return false;\n    return localStorage.getItem(saveKey) != null;\n  }\n\n  clearStorage()\n  {\n    if (!this.doesSupportLocalStorage()) return;\n\n    localStorage.clear();\n  }\n\n  doesSupportLocalStorage()\n  {\n    //check if browser support local storage\n    return typeof Storage !== 'undefined';\n  }\n}\nexport default LocalSaveManager;\n","import React from 'react';\n\nclass UploadButton extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.onUploadFileChange = this.onUploadFileChange.bind(this);\n  }\n\n  onUploadFileChange(e)\n  {\n    const files = e.target.files;\n    if (files.length > 0)\n    {\n      this.props.graphController.getUploader().uploadFileGraph(files[0]);\n\n      //Makes sure you can upload the same file again.\n      e.target.value = \"\";\n    }\n  }\n\n  render()\n  {\n    const inputID = this.props.id + \"-input\";\n    return <button\n      className={\"icon-button button-upload \" + this.props.className}\n      id={this.props.id}\n      title={this.props.title}\n      style={this.props.style}\n      disabled={this.props.disabled}\n      onClick={this.props.onClick}>\n      <input id={inputID} type=\"file\" name=\"import\"\n        style={{display:\"none\"}}\n        onChange={this.onUploadFileChange}\n        accept={this.props.graphController.getUploader().getValidFileTypes().join(\",\")}/>\n      <label htmlFor={inputID}>\n        {this.props.children}\n      </label>\n    </button>;\n  }\n}\n\nexport default UploadButton;\n","import React from 'react';\nimport Notification from 'system/notification/Notification.js';\n\nclass HelpButton extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.onClick = this.onClick.bind(this);\n  }\n\n  onClick(e)\n  {\n    if (Notification.hasMessages())\n    {\n      Notification.addMessage(I18N.toString(\"message.help.3\"));\n      Notification.addMessage(I18N.toString(\"message.help.1\"));\n    }\n    else\n    {\n      Notification.addMessage(I18N.toString(\"message.help.2\"));\n    }\n\n    //The tutorial\n    const LINK = \"https://github.com/flapjs/FLAPJS-WebApp/blob/master/HELP.md\";\n    const newTab = window.open(LINK, '_blank');\n\n    if (this.props.onClick)\n    {\n      this.props.onClick(e);\n    }\n  }\n\n  render()\n  {\n    return <button\n      className={\"icon-button button-help \" + this.props.className}\n      id={this.props.id}\n      title={this.props.title}\n      style={this.props.style}\n      disabled={this.props.disabled}\n      onClick={this.onClick}>\n      {this.props.children}\n    </button>;\n  }\n}\n\nexport default HelpButton;\n","import React from 'react';\n\nclass MachineName extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.state = {\n      value: null\n    };\n\n    this.onKeyDown = this.onKeyDown.bind(this);\n    this.onChange = this.onChange.bind(this);\n    this.onFocus = this.onFocus.bind(this);\n    this.onBlur = this.onBlur.bind(this);\n  }\n\n  onChange(e)\n  {\n    this.setState({value: e.target.value});\n  }\n\n  onKeyDown(e)\n  {\n    if (e.key === 'Escape')\n    {\n      const target = e.target;\n      this.setState({value: null}, () => target.blur());\n      return false;\n    }\n    else if (e.key === 'Enter')\n    {\n      e.target.blur();\n      return false;\n    }\n  }\n\n  onFocus(e)\n  {\n    this.setState({value: this.props.value});\n  }\n\n  onBlur(e)\n  {\n    if (this.state.value)\n    {\n      if (this.props.onSubmit) this.props.onSubmit({value: this.state.value});\n    }\n\n    this.setState({value: null});\n  }\n\n  render()\n  {\n    return <input type=\"text\"\n      className={this.props.className}\n      id={this.props.id}\n      value={this.state.value != null ? this.state.value : this.props.value}\n      onChange={this.onChange}\n      onKeyDown={this.onKeyDown}\n      onFocus={this.onFocus}\n      onBlur={this.onBlur}>\n    </input>;\n  }\n}\n\nexport default MachineName;\n","import React from 'react';\n\nclass PageNewIcon extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    return <svg className=\"pagenew-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n      <path d=\"M0 0h24v24H0z\" fill=\"none\"/>\n      <path d=\"M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 2zm-3-7V3.5L18.5 9H13z\"/>\n    </svg>;\n  }\n}\n\nexport default PageNewIcon;\n","import React from 'react';\n\nclass HelpIcon extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    return <svg className=\"help-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n      <path d=\"M0 0h24v24H0z\" fill=\"none\"/>\n      <path d=\"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 17h-2v-2h2v2zm2.07-7.75l-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z\"/>\n    </svg>;\n  }\n}\n\nexport default HelpIcon;\n","import React from 'react';\n\nclass LanguageIcon extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    return <svg className=\"language-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n        <path d=\"M0 0h24v24H0z\" fill=\"none\"/>\n        <path d={\"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 \" +\n        \"22 12S17.52 2 11.99 2zm6.93 6h-2.95c-.32-1.25-.78-2.45-1.38-3.56 1.84.63 \" +\n        \"3.37 1.91 4.33 3.56zM12 4.04c.83 1.2 1.48 2.53 1.91 3.96h-3.82c.43-1.43 \" +\n        \"1.08-2.76 1.91-3.96zM4.26 14C4.1 13.36 4 12.69 4 12s.1-1.36.26-2h3.38c-.08.66-.14 \" +\n        \"1.32-.14 2 0 .68.06 1.34.14 2H4.26zm.82 2h2.95c.32 1.25.78 2.45 \" +\n        \"1.38 3.56-1.84-.63-3.37-1.9-4.33-3.56zm2.95-8H5.08c.96-1.66 2.49-2.93 \" +\n        \"4.33-3.56C8.81 5.55 8.35 6.75 8.03 8zM12 19.96c-.83-1.2-1.48-2.53-1.91-3.96h3.82c-.43 \" +\n        \"1.43-1.08 2.76-1.91 3.96zM14.34 14H9.66c-.09-.66-.16-1.32-.16-2 \" +\n        \"0-.68.07-1.35.16-2h4.68c.09.65.16 1.32.16 2 0 .68-.07 1.34-.16 2zm.25 \" +\n        \"5.56c.6-1.11 1.06-2.31 1.38-3.56h2.95c-.96 1.65-2.49 2.93-4.33 3.56zM16.36 \" +\n        \"14c.08-.66.14-1.32.14-2 0-.68-.06-1.34-.14-2h3.38c.16.64.26 1.31.26 2s-.1 \" +\n        \"1.36-.26 2h-3.38z\"}/>\n    </svg>;\n  }\n}\n\nexport default LanguageIcon;\n","import React from 'react';\n\nclass OfflineIcon extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    return <svg className=\"offline-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n      <path fill=\"none\" d=\"M0 0h24v24H0z\"/>\n      <path d=\"M12 2.02c-5.51 0-9.98 4.47-9.98 9.98s4.47 9.98 9.98 9.98 9.98-4.47 9.98-9.98S17.51 2.02 12 2.02zM11.48 20v-6.26H8L13 4v6.26h3.35L11.48 20z\"/>\n    </svg>;\n  }\n}\n\nexport default OfflineIcon;\n","import React from 'react';\n\nclass BugReportIcon extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  //Override\n  render()\n  {\n    return <svg className=\"bugreport-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n      <path d={\"M20 8h-2.81c-.45-.78-1.07-1.45-1.82-1.96L17 4.41 15.59 \" +\n      \"3l-2.17 2.17C12.96 5.06 12.49 5 12 5s-.96.06-1.41.17L8.41 3 7 \" +\n      \"4.41l1.62 1.63C7.88 6.55 7.26 7.22 6.81 8H4v2h2.09c-.05.33-.09.66-.09 \" +\n      \"1v1H4v2h2v1c0 .34.04.67.09 1H4v2h2.81c1.04 1.79 2.97 3 5.19 \" +\n      \"3s4.15-1.21 5.19-3H20v-2h-2.09c.05-.33.09-.66.09-1v-1h2v-2h-2v-1c0-.\"\n      + \"34-.04-.67-.09-1H20V8zm-4 4v3c0 .22-.03.47-.07.7l-.1.65-.37.65c-.72 \" +\n      \"1.24-2.04 2-3.46 2s-2.74-.77-3.46-2l-.37-.64-.1-.65C8.03 \" +\n      \"15.48 8 15.23 8 15v-4c0-.23.03-.48.07-.7l.1-.65.37-.65c.3-.52.72-.97 \" +\n      \"1.21-1.31l.57-.39.74-.18c.31-.08.63-.12.94-.12.32 0 \" +\n      \".63.04.95.12l.68.16.61.42c.5.34.91.78 1.21 1.31l.38.65.1.65c.04.22.07\" +\n      \".47.07.69v1zm-6 2h4v2h-4zm0-4h4v2h-4z\"}/>\n    </svg>;\n  }\n}\n\nexport default BugReportIcon;\n","import React from 'react';\nimport './DrawerExpander.css';\n\nclass DrawerExpander extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.onClick = this.onClick.bind(this);\n  }\n\n  onClick(e)\n  {\n    const app = this.props.app;\n    if (app.state.isFullscreen)\n    {\n      app.setState({isFullscreen: false});\n    }\n    else if (app.state.isOpen)\n    {\n      app.closeDrawer();\n    }\n    else\n    {\n      app.openDrawer();\n    }\n  }\n\n  //Override\n  render()\n  {\n    const app = this.props.app;\n    const open = app.state.isOpen;\n\n    return <div className={\"drawer-expand\" + (open ? \" open\" : \"\")}\n      onClick={this.onClick}>\n      <svg viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\n        <path d=\"M5 3.737l12.395 8.263-12.395 8.263v-16.526zm-2-3.737v24l18-12-18-12z\"/>\n      </svg>\n    </div>;\n  }\n}\n\nexport default DrawerExpander;\n","//https://www.flaticon.com/free-icon/png_136523\nimport React from 'react';\n\nclass PNGIcon extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    return <svg className=\"png-icon\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 56 56\">\n      <g>\n        <path fill=\"#E9E9E0\" d=\"M36.985,0H7.963C7.155,0,6.5,0.655,6.5,1.926V55c0,0.345,0.655,1,1.463,1h40.074 c0.808,0,1.463-0.655,1.463-1V12.978c0-0.696-0.093-0.92-0.257-1.085L37.607,0.257C37.442,0.093,37.218,0,36.985,0z\"/>\n        <path fill=\"#659C35\" d=\"M48.037,56H7.963C7.155,56,6.5,55.345,6.5,54.537V39h43v15.537C49.5,55.345,48.845,56,48.037,56z\"/>\n        <polygon fill=\"#D9D7CA\" points=\"37.5,0.151 37.5,12 49.349,12 \t\"/>\n        <g>\n          <path fill=\"#FFFFFF\" d=\"M17.385,53h-1.641V42.924h2.898c0.428,0,0.852,0.068,1.271,0.205 c0.419,0.137,0.795,0.342,1.128,0.615c0.333,0.273,0.602,0.604,0.807,0.991s0.308,0.822,0.308,1.306 c0,0.511-0.087,0.973-0.26,1.388c-0.173,0.415-0.415,0.764-0.725,1.046c-0.31,0.282-0.684,0.501-1.121,0.656 s-0.921,0.232-1.449,0.232h-1.217V53z M17.385,44.168v3.992h1.504c0.2,0,0.398-0.034,0.595-0.103 c0.196-0.068,0.376-0.18,0.54-0.335c0.164-0.155,0.296-0.371,0.396-0.649c0.1-0.278,0.15-0.622,0.15-1.032 c0-0.164-0.023-0.354-0.068-0.567c-0.046-0.214-0.139-0.419-0.28-0.615c-0.142-0.196-0.34-0.36-0.595-0.492 c-0.255-0.132-0.593-0.198-1.012-0.198H17.385z\"/>\n          <path fill=\"#FFFFFF\" d=\"M31.316,42.924V53h-1.668l-3.951-6.945V53h-1.668V42.924h1.668l3.951,6.945v-6.945H31.316z\"/>\n          <path fill=\"#FFFFFF\" d={\"M41.16,47.805v3.896c-0.21,0.265-0.444,0.48-0.704,0.649s-0.533,0.308-0.82,0.417 \" +\n            \"S39.052,52.954,38.747,53c-0.306,0.046-0.608,0.068-0.909,0.068c-0.602,0-1.155-0.109-1.661-0.328s-0.948-0.542-1.326-0.971 \" +\n            \"c-0.378-0.429-0.675-0.966-0.889-1.613c-0.214-0.647-0.321-1.395-0.321-2.242s0.107-1.593,0.321-2.235 \" +\n            \"c0.214-0.643,0.51-1.178,0.889-1.606c0.378-0.429,0.822-0.754,1.333-0.978c0.51-0.224,1.062-0.335,1.654-0.335 \" +\n            \"c0.547,0,1.057,0.091,1.531,0.273c0.474,0.183,0.897,0.456,1.271,0.82l-1.135,1.012c-0.219-0.265-0.47-0.456-0.752-0.574 \" +\n            \"c-0.283-0.118-0.574-0.178-0.875-0.178c-0.337,0-0.659,0.063-0.964,0.191c-0.306,0.128-0.579,0.344-0.82,0.649 \" +\n            \"c-0.242,0.306-0.431,0.699-0.567,1.183s-0.21,1.075-0.219,1.777c0.009,0.684,0.08,1.276,0.212,1.777 \" +\n            \"c0.132,0.501,0.314,0.911,0.547,1.23s0.497,0.556,0.793,0.711c0.296,0.155,0.608,0.232,0.937,0.232c0.1,0,0.234-0.007,0.403-0.021 \" +\n            \"c0.168-0.014,0.337-0.036,0.506-0.068c0.168-0.032,0.33-0.075,0.485-0.13c0.155-0.055,0.269-0.132,0.342-0.232v-2.488h-1.709 v-1.121H41.16z\"}/>\n        </g>\n        <circle fill=\"#F3D55B\" cx=\"18.931\" cy=\"14.431\" r=\"4.569\"/>\n        <polygon fill=\"#88C057\" points=\"6.5,39 17.5,39 49.5,39 49.5,28 39.5,18.5 29,30 23.517,24.517 \t\"/>\n      </g>\n    </svg>;\n  }\n}\n\nexport default PNGIcon;\n","//https://www.flaticon.com/free-icon/jpg_136524\nimport React from 'react';\n\nclass JPGIcon extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    return <svg className=\"jpg-icon\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 56 56\">\n      <g>\n        <path fill=\"#E9E9E0\" d=\"M36.985,0H7.963C7.155,0,6.5,0.655,6.5,1.926V55c0,0.345,0.655,1,1.463,1h40.074 c0.808,0,1.463-0.655,1.463-1V12.978c0-0.696-0.093-0.92-0.257-1.085L37.607,0.257C37.442,0.093,37.218,0,36.985,0z\"/>\n        <polygon fill=\"#D9D7CA\" points=\"37.5,0.151 37.5,12 49.349,12 \t\"/>\n        <circle fill=\"#F3D55B\" cx=\"18.931\" cy=\"14.431\" r=\"4.569\"/>\n        <polygon fill=\"#26B99A\" points=\"6.5,39 17.5,39 49.5,39 49.5,28 39.5,18.5 29,30 23.517,24.517 \t\"/>\n        <path fill=\"#14A085\" d=\"M48.037,56H7.963C7.155,56,6.5,55.345,6.5,54.537V39h43v15.537C49.5,55.345,48.845,56,48.037,56z\"/>\n        <g>\n          <path fill=\"#FFFFFF\" d={\"M21.426,42.65v7.848c0,0.474-0.087,0.873-0.26,1.196c-0.173,0.323-0.406,0.583-0.697,0.779 \" +\n            \"c-0.292,0.196-0.627,0.333-1.005,0.41C19.085,52.961,18.696,53,18.295,53c-0.201,0-0.436-0.021-0.704-0.062 \" +\n            \"c-0.269-0.041-0.547-0.104-0.834-0.191s-0.563-0.185-0.827-0.294c-0.265-0.109-0.488-0.232-0.67-0.369l0.697-1.107 \" +\n            \"c0.091,0.063,0.221,0.13,0.39,0.198c0.168,0.068,0.353,0.132,0.554,0.191c0.2,0.06,0.41,0.111,0.629,0.157 \" +\n            \"s0.424,0.068,0.615,0.068c0.483,0,0.868-0.094,1.155-0.28s0.439-0.504,0.458-0.95V42.65H21.426z\"}/>\n          <path fill=\"#FFFFFF\" d={\"M25.514,52.932h-1.641V42.855h2.898c0.428,0,0.852,0.068,1.271,0.205 \" +\n            \"c0.419,0.137,0.795,0.342,1.128,0.615c0.333,0.273,0.602,0.604,0.807,0.991s0.308,0.822,0.308,1.306 \" +\n            \"c0,0.511-0.087,0.973-0.26,1.388c-0.173,0.415-0.415,0.764-0.725,1.046c-0.31,0.282-0.684,0.501-1.121,0.656 \" +\n            \"s-0.921,0.232-1.449,0.232h-1.217V52.932z M25.514,44.1v3.992h1.504c0.2,0,0.398-0.034,0.595-0.103 \" +\n            \"c0.196-0.068,0.376-0.18,0.54-0.335s0.296-0.371,0.396-0.649c0.1-0.278,0.15-0.622,0.15-1.032c0-0.164-0.023-0.354-0.068-0.567 \" +\n            \"c-0.046-0.214-0.139-0.419-0.28-0.615c-0.142-0.196-0.34-0.36-0.595-0.492C27.5,44.166,27.163,44.1,26.744,44.1H25.514z\"}/>\n          <path fill=\"#FFFFFF\" d={\"M39.5,47.736v3.896c-0.21,0.265-0.444,0.48-0.704,0.649s-0.533,0.308-0.82,0.417 \" +\n            \"s-0.583,0.187-0.889,0.232C36.781,52.978,36.479,53,36.178,53c-0.602,0-1.155-0.109-1.661-0.328s-0.948-0.542-1.326-0.971 \" +\n            \"c-0.378-0.429-0.675-0.966-0.889-1.613c-0.214-0.647-0.321-1.395-0.321-2.242s0.107-1.593,0.321-2.235 \" +\n            \"c0.214-0.643,0.51-1.178,0.889-1.606c0.378-0.429,0.822-0.754,1.333-0.978c0.51-0.224,1.062-0.335,1.654-0.335 \" +\n            \"c0.547,0,1.057,0.091,1.531,0.273c0.474,0.183,0.897,0.456,1.271,0.82l-1.135,1.012c-0.219-0.265-0.47-0.456-0.752-0.574 \" +\n            \"c-0.283-0.118-0.574-0.178-0.875-0.178c-0.337,0-0.659,0.063-0.964,0.191c-0.306,0.128-0.579,0.344-0.82,0.649 \" +\n            \"c-0.242,0.306-0.431,0.699-0.567,1.183s-0.21,1.075-0.219,1.777c0.009,0.684,0.08,1.276,0.212,1.777 \" +\n            \"c0.132,0.501,0.314,0.911,0.547,1.23s0.497,0.556,0.793,0.711c0.296,0.155,0.608,0.232,0.937,0.232c0.1,0,0.234-0.007,0.403-0.021 \" +\n            \"c0.168-0.014,0.337-0.036,0.506-0.068c0.168-0.032,0.33-0.075,0.485-0.13c0.155-0.055,0.269-0.132,0.342-0.232v-2.488h-1.709 \" +\n            \"v-1.121H39.5z\"}/>\n        </g>\n      </g>\n    </svg>;\n  }\n}\n\nexport default JPGIcon;\n","//https://www.flaticon.com/free-icon/json-file_136525\nimport React from 'react';\n\nclass JSONIcon extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    return <svg className=\"json-icon\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 56 56\">\n      <g>\n        <path fill=\"#E9E9E0\" d=\"M36.985,0H7.963C7.155,0,6.5,0.655,6.5,1.926V55c0,0.345,0.655,1,1.463,1h40.074 c0.808,0,1.463-0.655,1.463-1V12.978c0-0.696-0.093-0.92-0.257-1.085L37.607,0.257C37.442,0.093,37.218,0,36.985,0z\"/>\n        <polygon fill=\"#D9D7CA\" points=\"37.5,0.151 37.5,12 49.349,12 \t\"/>\n        <path fill=\"#9777A8\" d=\"M48.037,56H7.963C7.155,56,6.5,55.345,6.5,54.537V39h43v15.537C49.5,55.345,48.845,56,48.037,56z\"/>\n        <g>\n          <path fill=\"#FFFFFF\" d={\"M17.021,42.719v7.848c0,0.474-0.087,0.873-0.26,1.196s-0.405,0.583-0.697,0.779 \" +\n            \"s-0.627,0.333-1.005,0.41c-0.378,0.077-0.768,0.116-1.169,0.116c-0.2,0-0.436-0.021-0.704-0.062s-0.547-0.104-0.834-0.191 \" +\n            \"s-0.563-0.185-0.827-0.294s-0.487-0.232-0.67-0.369l0.697-1.107c0.091,0.063,0.221,0.13,0.39,0.198s0.354,0.132,0.554,0.191 \" +\n            \"s0.41,0.111,0.629,0.157s0.424,0.068,0.615,0.068c0.483,0,0.868-0.094,1.155-0.28s0.439-0.504,0.458-0.95v-7.711H17.021z\"}/>\n          <path fill=\"#FFFFFF\" d={\"M25.184,50.238c0,0.364-0.075,0.718-0.226,1.06s-0.362,0.643-0.636,0.902s-0.61,0.467-1.012,0.622 \" +\n            \"s-0.856,0.232-1.367,0.232c-0.219,0-0.444-0.012-0.677-0.034s-0.467-0.062-0.704-0.116c-0.237-0.055-0.463-0.13-0.677-0.226 \" +\n            \"s-0.398-0.212-0.554-0.349l0.287-1.176c0.128,0.073,0.289,0.144,0.485,0.212s0.398,0.132,0.608,0.191s0.419,0.107,0.629,0.144 \" +\n            \"s0.405,0.055,0.588,0.055c0.556,0,0.982-0.13,1.278-0.39s0.444-0.645,0.444-1.155c0-0.31-0.104-0.574-0.314-0.793 \" +\n            \"s-0.472-0.417-0.786-0.595s-0.654-0.355-1.019-0.533s-0.706-0.388-1.025-0.629s-0.583-0.526-0.793-0.854s-0.314-0.738-0.314-1.23 \" +\n            \"c0-0.446,0.082-0.843,0.246-1.189s0.385-0.641,0.663-0.882s0.602-0.426,0.971-0.554s0.759-0.191,1.169-0.191 \" +\n            \"c0.419,0,0.843,0.039,1.271,0.116s0.774,0.203,1.039,0.376c-0.055,0.118-0.118,0.248-0.191,0.39s-0.142,0.273-0.205,0.396 \" +\n            \"s-0.118,0.226-0.164,0.308s-0.073,0.128-0.082,0.137c-0.055-0.027-0.116-0.063-0.185-0.109s-0.166-0.091-0.294-0.137 \" +\n            \"s-0.296-0.077-0.506-0.096s-0.479-0.014-0.807,0.014c-0.183,0.019-0.355,0.07-0.52,0.157s-0.31,0.193-0.438,0.321 \" +\n            \"s-0.228,0.271-0.301,0.431s-0.109,0.313-0.109,0.458c0,0.364,0.104,0.658,0.314,0.882s0.47,0.419,0.779,0.588 \" +\n            \"s0.647,0.333,1.012,0.492s0.704,0.354,1.019,0.581s0.576,0.513,0.786,0.854S25.184,49.7,25.184,50.238z\"}/>\n          <path fill=\"#FFFFFF\" d={\"M35.082,47.914c0,0.848-0.107,1.595-0.321,2.242s-0.511,1.185-0.889,1.613s-0.82,0.752-1.326,0.971 \" +\n            \"s-1.06,0.328-1.661,0.328s-1.155-0.109-1.661-0.328s-0.948-0.542-1.326-0.971s-0.675-0.966-0.889-1.613s-0.321-1.395-0.321-2.242 \" +\n            \"s0.107-1.593,0.321-2.235s0.511-1.178,0.889-1.606s0.82-0.754,1.326-0.978s1.06-0.335,1.661-0.335s1.155,0.111,1.661,0.335 \" +\n            \"s0.948,0.549,1.326,0.978s0.675,0.964,0.889,1.606S35.082,47.066,35.082,47.914z M30.844,51.729c0.337,0,0.658-0.066,0.964-0.198 \" +\n            \"s0.579-0.349,0.82-0.649s0.431-0.695,0.567-1.183s0.21-1.082,0.219-1.784c-0.009-0.684-0.08-1.265-0.212-1.743 \" +\n            \"s-0.314-0.873-0.547-1.183s-0.497-0.533-0.793-0.67s-0.608-0.205-0.937-0.205c-0.337,0-0.658,0.063-0.964,0.191 \" +\n            \"s-0.579,0.344-0.82,0.649s-0.431,0.699-0.567,1.183c-0.137,0.483-0.21,1.075-0.219,1.777c0.009,0.684,0.08,1.267,0.212,1.75 \" +\n            \"s0.314,0.877,0.547,1.183s0.497,0.528,0.793,0.67S30.516,51.729,30.844,51.729z\"}/>\n          <path fill=\"#FFFFFF\" d=\"M44.68,42.924V53h-1.668l-3.951-6.945V53h-1.668V42.924h1.668l3.951,6.945v-6.945H44.68z\"/>\n        </g>\n        <g>\n          <path fill=\"#9777A8\" d=\"M19.5,19v-4c0-0.551,0.448-1,1-1c0.553,0,1-0.448,1-1s-0.447-1-1-1c-1.654,0-3,1.346-3,3v4 c0,1.103-0.897,2-2,2c-0.553,0-1,0.448-1,1s0.447,1,1,1c1.103,0,2,0.897,2,2v4c0,1.654,1.346,3,3,3c0.553,0,1-0.448,1-1 s-0.447-1-1-1c-0.552,0-1-0.449-1-1v-4c0-1.2-0.542-2.266-1.382-3C18.958,21.266,19.5,20.2,19.5,19z\"/>\n          <circle fill=\"#9777A8\" cx=\"27.5\" cy=\"18.5\" r=\"1.5\"/>\n          <path fill=\"#9777A8\" d=\"M39.5,21c-1.103,0-2-0.897-2-2v-4c0-1.654-1.346-3-3-3c-0.553,0-1,0.448-1,1s0.447,1,1,1 c0.552,0,1,0.449,1,1v4c0,1.2,0.542,2.266,1.382,3c-0.84,0.734-1.382,1.8-1.382,3v4c0,0.551-0.448,1-1,1c-0.553,0-1,0.448-1,1 s0.447,1,1,1c1.654,0,3-1.346,3-3v-4c0-1.103,0.897-2,2-2c0.553,0,1-0.448,1-1S40.053,21,39.5,21z\"/>\n          <path fill=\"#9777A8\" d=\"M27.5,24c-0.553,0-1,0.448-1,1v3c0,0.552,0.447,1,1,1s1-0.448,1-1v-3 C28.5,24.448,28.053,24,27.5,24z\"/>\n        </g>\n      </g>\n    </svg>;\n  }\n}\n\nexport default JSONIcon;\n","//https://www.flaticon.com/free-icon/xml_136526\nimport React from 'react';\n\nclass XMLIcon extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    return <svg className=\"xml-icon\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 56 56\">\n      <g>\n        <path fill=\"#E9E9E0\" d=\"M36.985,0H7.963C7.155,0,6.5,0.655,6.5,1.926V55c0,0.345,0.655,1,1.463,1h40.074 c0.808,0,1.463-0.655,1.463-1V12.978c0-0.696-0.093-0.92-0.257-1.085L37.607,0.257C37.442,0.093,37.218,0,36.985,0z\"/>\n        <polygon fill=\"#D9D7CA\" points=\"37.5,0.151 37.5,12 49.349,12 \t\"/>\n        <path fill=\"#F29C1F\" d=\"M48.037,56H7.963C7.155,56,6.5,55.345,6.5,54.537V39h43v15.537C49.5,55.345,48.845,56,48.037,56z\"/>\n        <g>\n          <path fill=\"#FFFFFF\" d=\"M19.379,48.105L21.936,53h-1.9l-1.6-3.801h-0.137L16.576,53h-1.9l2.557-4.895l-2.721-5.182h1.873 l1.777,4.102h0.137l1.928-4.102H22.1L19.379,48.105z\"/>\n          <path fill=\"#FFFFFF\" d=\"M31.998,42.924h1.668V53h-1.668v-6.932l-2.256,5.605h-1.449l-2.27-5.605V53h-1.668V42.924h1.668 l2.994,6.891L31.998,42.924z\"/>\n          <path fill=\"#FFFFFF\" d=\"M37.863,42.924v8.832h4.635V53h-6.303V42.924H37.863z\"/>\n        </g>\n        <path fill=\"#F29C1F\" d=\"M15.5,24c-0.256,0-0.512-0.098-0.707-0.293c-0.391-0.391-0.391-1.023,0-1.414l6-6 c0.391-0.391,1.023-0.391,1.414,0s0.391,1.023,0,1.414l-6,6C16.012,23.902,15.756,24,15.5,24z\"/>\n        <path fill=\"#F29C1F\" d=\"M21.5,30c-0.256,0-0.512-0.098-0.707-0.293l-6-6c-0.391-0.391-0.391-1.023,0-1.414 s1.023-0.391,1.414,0l6,6c0.391,0.391,0.391,1.023,0,1.414C22.012,29.902,21.756,30,21.5,30z\"/>\n        <path fill=\"#F29C1F\" d=\"M33.5,30c-0.256,0-0.512-0.098-0.707-0.293c-0.391-0.391-0.391-1.023,0-1.414l6-6 c0.391-0.391,1.023-0.391,1.414,0s0.391,1.023,0,1.414l-6,6C34.012,29.902,33.756,30,33.5,30z\"/>\n        <path fill=\"#F29C1F\" d=\"M39.5,24c-0.256,0-0.512-0.098-0.707-0.293l-6-6c-0.391-0.391-0.391-1.023,0-1.414 s1.023-0.391,1.414,0l6,6c0.391,0.391,0.391,1.023,0,1.414C40.012,23.902,39.756,24,39.5,24z\"/>\n        <path fill=\"#F29C1F\" d=\"M24.5,32c-0.11,0-0.223-0.019-0.333-0.058c-0.521-0.184-0.794-0.755-0.61-1.276l6-17 c0.185-0.521,0.753-0.795,1.276-0.61c0.521,0.184,0.794,0.755,0.61,1.276l-6,17C25.298,31.744,24.912,32,24.5,32z\"/>\n      </g>\n    </svg>;\n  }\n}\n\nexport default XMLIcon;\n","import React from 'react';\nimport '../Panel.css';\nimport './ExportingPanel.css';\n\nimport Downloader from 'util/Downloader.js';\nimport * as FlapSaver from 'util/FlapSaver.js';\nimport NodalGraphParser from 'graph/NodalGraphParser.js';\n\nimport IconButton from 'icons/IconButton.js';\nimport PNGIcon from 'icons/flat/PNGIcon.js';\nimport JPGIcon from 'icons/flat/JPGIcon.js';\nimport JSONIcon from 'icons/flat/JSONIcon.js';\nimport XMLIcon from 'icons/flat/XMLIcon.js';\n\nclass ExportingPanel extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.container = null;\n\n    this.onExportXML = this.onExportXML.bind(this);\n    this.onExportJSON = this.onExportJSON.bind(this);\n    this.onExportPNG = this.onExportPNG.bind(this);\n    this.onExportJPG = this.onExportJPG.bind(this);\n  }\n\n  onExportJSON(e)\n  {\n    const jsonString = JSON.stringify(FlapSaver.saveToJSON(this.props.graphController, this.props.machineController));\n    const machineName = this.props.machineController.getMachineName();\n    Downloader.downloadText(machineName + '.json', jsonString);\n  }\n\n  onExportXML(e)\n  {\n    const machineName = this.props.machineController.getMachineName();\n    const graph = this.props.graphController.getGraph();\n\n    const xmlString = new XMLSerializer().serializeToString(NodalGraphParser.toXML(graph));\n    Downloader.downloadText(machineName + '.jff', xmlString);\n  }\n\n  onExportPNG(e)\n  {\n    const machineName = this.props.machineController.getMachineName();\n\n    const app = this.props.app;\n    const workspace = app.workspace;\n    const workspaceDim = workspace.ref.viewBox.baseVal;\n    const width = workspaceDim.width;\n    const height = workspaceDim.height;\n    const svg = workspace.getSVGForExport(width, height);\n\n    Downloader.downloadSVG(machineName, 'png', svg, width, height);\n  }\n\n  onExportJPG(e)\n  {\n    const machineName = this.props.machineController.getMachineName();\n\n    const app = this.props.app;\n    const workspace = app.workspace;\n    const workspaceDim = workspace.ref.viewBox.baseVal;\n    const width = workspaceDim.width;\n    const height = workspaceDim.height;\n    const svg = workspace.getSVGForExport(width, height);\n\n    Downloader.downloadSVG(machineName, 'jpg', svg, width, height);\n  }\n\n  render()\n  {\n    return <div className=\"panel-container\" id=\"exporting\" ref={ref=>this.container=ref} style={this.props.style}>\n      <div className=\"panel-title\">\n        <h1>{I18N.toString(\"component.exporting.title\")}</h1>\n      </div>\n      <div className=\"panel-content\">\n        {/*JSON*/}\n        <IconButton className=\"export-button\" id=\"export-json\"\n          title={I18N.toString(\"file.export.machine.hint\")}\n          onClick={this.onExportJSON}>\n          <JSONIcon/>\n          <label>{I18N.toString(\"file.export.machine\")}</label>\n        </IconButton>\n        {/*PNG*/}\n        <IconButton className=\"export-button\" id=\"export-png\"\n          title={I18N.toString(\"file.export.png.hint\")}\n          onClick={this.onExportPNG}>\n          <PNGIcon/>\n          <label>{I18N.toString(\"file.export.png\")}</label>\n        </IconButton>\n        {/*JPG*/}\n        <IconButton className=\"export-button\" id=\"export-jpg\"\n          title={I18N.toString(\"file.export.jpg.hint\")}\n          onClick={this.onExportJPG}>\n          <JPGIcon/>\n          <label>{I18N.toString(\"file.export.jpg\")}</label>\n        </IconButton>\n        {/*XML*/}\n        <IconButton className=\"export-button\" id=\"export-xml\"\n          title={I18N.toString(\"file.export.jff.hint\")}\n          onClick={this.onExportXML}>\n          <XMLIcon/>\n          <label>{I18N.toString(\"file.export.jff\")}</label>\n        </IconButton>\n        <hr/>\n        {/*Save to E-mail*/}\n        <div className=\"export-email\">\n        </div>\n      </div>\n\n      <div className=\"panel-bottom\"></div>\n    </div>;\n  }\n}\nExportingPanel.UNLOCALIZED_NAME = \"component.exporting.title\";\n\nexport default ExportingPanel;\n","/* RGB and HSL conversions: https://gist.github.com/mjackson/5311256 */\nclass ColorHelper\n{\n  static HEXtoRGB(hex, dst=[])\n  {\n    if (hex.startsWith('#')) hex = hex.slice(1);\n    const red = hex.substring(0, 2);\n    const green = hex.substring(2, 4);\n    const blue = hex.substring(4, 6);\n    dst[0] = parseInt(red, 16);\n    dst[1] = parseInt(green, 16);\n    dst[2] = parseInt(blue, 16);\n    return dst;\n  }\n\n  static RGBtoHEX(r, g, b)\n  {\n    return '#' + (b | (g << 8) | (r << 16) | (1 << 24)).toString(16).slice(1);\n  }\n\n  static RGBtoHSV(r, g, b, dst=[])\n  {\n    r /= 255;\n    g /= 255;\n    b /= 255;\n    const max = Math.max(r, g, b);\n    const min = Math.min(r, g, b);\n\n    const d = max - min;\n\n    let h = 0;\n    const s = max == 0 ? 0 : d / max;\n    const v = max;\n\n    if (max == min)\n    {\n      h = 0;\n    }\n    else\n    {\n      switch(max)\n      {\n        case r: h = (g - b) / d + (g < b ? 6 : 0); break;\n        case g: h = (b - r) / d + 2; break;\n        case b: h = (r - g) / d + 4; break;\n      }\n\n      h /= 6;\n    }\n\n    dst[0] = h;\n    dst[1] = s;\n    dst[2] = v;\n    return dst;\n  }\n\n  static HSVtoRGB(h, s, v, dst=[])\n  {\n    let r = 0;\n    let g = 0;\n    let b = 0;\n\n    const i = Math.floor(h * 6);\n    const f = h * 6 - i;\n    const p = v * (1 - s);\n    const q = v * (1 - f * s);\n    const t = v * (1 - (1 - f) * s);\n\n    switch(i % 6)\n    {\n      case 0: r = v, g = t, b = p; break;\n      case 1: r = q, g = v, b = p; break;\n      case 2: r = p, g = v, b = t; break;\n      case 3: r = p, g = q, b = v; break;\n      case 4: r = t, g = p, b = v; break;\n      case 5: r = v, g = p, b = q; break;\n    }\n\n    dst[0] = r * 255;\n    dst[1] = g * 255;\n    dst[2] = b * 255;\n    return dst;\n  }\n}\n\nexport default ColorHelper;\n","class StyleOption\n{\n  constructor(elementSource, propName, inputType, groupName, callback)\n  {\n    //the html element that this css variable reflects\n    this.element = elementSource;\n    //the name of the css variable\n    this.prop = propName;\n    //the css variable type\n    this.type = inputType;\n    //the group that the variable belongs to (\"default\" if not specified)\n    this.group = groupName;\n\n    this._callback = callback;\n    this._value = null;\n    this._defaultValue = null;\n  }\n\n  /**\n   * Update the current value to reflect the computed style's value.\n   */\n  updateStyle(computedStyle=null, shouldPropagateChange=true)\n  {\n    if (!computedStyle)\n    {\n      computedStyle = window.getComputedStyle(this.element);\n    }\n    const newValue = computedStyle.getPropertyValue(this.prop);\n    if (!newValue)\n    {\n      throw new Error(\"Cannot find style option with prop name \\'\" + this.prop + \"\\' for element\");\n    }\n\n    this._value = newValue.trim();\n    this._defaultValue = this._value;\n    if (shouldPropagateChange && this._callback) this._callback(this, newValue);\n  }\n\n  /**\n   * Reset the current value to reflect the computed style's value.\n   */\n  resetStyle()\n  {\n    this.setStyle(this._defaultValue);\n  }\n\n  /**\n   * Changes the variable's value for prop name.\n   * These changes are reflected to the css source.\n   */\n  setStyle(val, shouldPropagateChange=true)\n  {\n    this._value = val;\n    this.element.style.setProperty(this.prop, val);\n\n    if (shouldPropagateChange && this._callback) this._callback.call(null, this, val);\n  }\n\n  /** Returns the variable's current value. Null if not yet initialized. */\n  getStyle()\n  {\n    return this._value;\n  }\n\n  isDefaultStyle()\n  {\n    return this._value == this._defaultValue;\n  }\n}\n\nclass StyleOptionRegistry\n{\n  constructor()\n  {\n    this._options = new Map();\n    this._groups = new Map();\n\n    this._init = false;\n  }\n\n  registerStyleOption(elementSource, propName, inputType=\"text\", groupName=\"default\", changeCallback=null)\n  {\n    if (this._options.has(propName))\n    {\n      throw new Error(\"Style option with prop name \\'\" + propName + \"\\' already registered\");\n    }\n\n    const result = new StyleOption(elementSource, propName, inputType, groupName, changeCallback);\n    this._options.set(propName, result);\n\n    let group;\n    if (!this._groups.has(groupName))\n    {\n      group = [];\n      this._groups.set(groupName, group);\n    }\n    else\n    {\n      group = this._groups.get(groupName);\n\n      if (group.indexOf(propName) != -1)\n      {\n        //Ignore it, it's already in here\n        return;\n      }\n    }\n    group.push(propName);\n  }\n\n  unregisterStyleOption(propName)\n  {\n    if (this._options.has(propName))\n    {\n      const option = this._options.get(propName);\n      this._options.delete(propName);\n      const groupName = option.group;\n      if (this._groups.has(groupName))\n      {\n        const group = this._groups.get(groupName);\n        const index = group.indexOf(propName);\n        if (index >= 0)\n        {\n          group.splice(index, 1);\n        }\n      }\n    }\n  }\n\n  initialize()\n  {\n    if (this._init)\n    {\n      throw new Error(\"Already initialized\");\n    }\n\n    //Compute the styles\n    const computedStyles = {};\n    let computedStyle;\n    for(let option of this._options.values())\n    {\n      const element = option.element;\n      computedStyle = computedStyles[element];\n      if (!computedStyle)\n      {\n        computedStyle = window.getComputedStyle(element);\n        computedStyles[element] = computedStyle;\n      }\n      option.updateStyle(computedStyle, false);\n    }\n\n    this._init = true;\n  }\n\n  terminate()\n  {\n    if (!this._init)\n    {\n      throw new Error(\"Not yet initialized\");\n    }\n\n    this._options.clear();\n    this._groups.clear();\n\n    this._init = false;\n  }\n\n  getOptionByProp(propName)\n  {\n    return this._options.get(propName);\n  }\n\n  getPropsByGroup(groupName)\n  {\n    return this._groups.get(groupName) || [];\n  }\n\n  getOptions()\n  {\n    return this._options.values();\n  }\n\n  isEmpty()\n  {\n    return this._options.size <= 0;\n  }\n}\n\nexport default StyleOptionRegistry;\n","import React from 'react';\n\nclass StyleInput extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.onChange = this.onChange.bind(this);\n  }\n\n  onChange(e)\n  {\n    const newValue = e.target.value;\n    const value = this.props.value;\n    const onChange = this.props.onChange;\n\n    value.setStyle(newValue);\n    if (onChange) onChange(value);\n  }\n\n  //Override\n  render()\n  {\n    const title = this.props.title;\n    const value = this.props.value;\n    const propName = value.prop;\n    const inputType = value.type;\n    const inputID = \"styleopt-\" + propName;\n\n    return <span id={this.props.id} className={this.props.className} style={this.props.style}>\n      <input id={inputID} type={inputType} value={value.getStyle()} onChange={this.onChange} disabled={this.props.disabled}/>\n      <label htmlFor={inputID}>{title}</label>\n    </span>;\n  }\n}\nexport default StyleInput;\n","import React from 'react';\nimport './OptionGroup.css';\n\nimport IconToggle from 'icons/IconToggle.js';\nimport DropDownIcon from 'icons/DropDownIcon.js';\n\nclass OptionGroup extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.dropdown = React.createRef();\n  }\n\n  isOpen()\n  {\n    return this.dropdown.state ? this.dropdown.state.open : false;\n  }\n\n  render()\n  {\n    return <div className={\"option-group \" + this.props.className}>\n      <div className=\"option-header\" onClick={(e)=>this.dropdown.onClick(e)}>\n        <label>{this.props.title}</label>\n        <label>({this.props.label})</label>\n        <IconToggle id=\"collapse\" ref={ref=>this.dropdown=ref} defaultValue={this.props.defaultValue}\n          style={{pointerEvents: \"none\"}}>\n          <DropDownIcon/>\n        </IconToggle>\n      </div>\n      <div className=\"option-content\"\n        style={{display: this.isOpen() ? \"block\" : \"none\"}}>\n        { this.props.children }\n      </div>\n    </div>;\n  }\n}\n\nexport default OptionGroup;\n","import React from 'react';\nimport './OptionHotkey.css';\n\nclass OptionHotkey extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    return <div className={\"option-container option-hotkey \" + this.props.className}>\n      <label>{this.props.label}</label>\n      <span>{this.props.keyName}</span>\n    </div>;\n  }\n}\n\nexport default OptionHotkey;\n","import React from 'react';\nimport '../Panel.css';\nimport './OptionsPanel.css';\n\nimport Config from 'config.js';\nimport { saveConfig } from 'config.js';\n\nimport LocalSave from 'system/localsave/LocalSave.js';\nimport ColorHelper from 'util/ColorHelper.js';\nimport StyleOptionRegistry from 'system/styleopt/StyleOptionRegistry.js';\nimport StyleInput from 'system/styleopt/components/StyleInput.js';\n\nimport OptionGroup from './OptionGroup.js';\nimport OptionHotkey from './OptionHotkey.js';\n\n//This should be the same as the one referred to by index.html\nconst LOCAL_STORAGE_ID = \"skipWelcome\";\n\nclass OptionsPanel extends React.Component\n{\n  constructor(props)\n  {\n    super(props)\n\n    this.container = React.createRef();\n    this.styleOpts = new StyleOptionRegistry();\n\n    this.state = {\n      theme: \"default\",\n      customTheme: false,\n      skipWelcome: LocalSave.getStringFromStorage(LOCAL_STORAGE_ID) == \"true\"\n    };\n\n    this.onChangeTheme = this.onChangeTheme.bind(this);\n  }\n\n  //Override\n  componentDidMount()\n  {\n    const root = document.getElementById(\"root\");\n    const opts = this.styleOpts;\n\n    const invertFunc = function(opt, value) {\n      const color = [];\n      ColorHelper.HEXtoRGB(value, color);\n      ColorHelper.RGBtoHSV(...color, color);\n      //INVERT HUE: color[0] = (color[0] + 0.5) % 1;\n      //INVERT BRIGHTNESS:\n      color[2] = 1 - color[2];\n      ColorHelper.HSVtoRGB(...color, color);\n      const result = ColorHelper.RGBtoHEX(...color);\n      //Set style\n      opts.getOptionByProp(opt.prop + \"-invert\").setStyle(result);\n    };\n\n    const darkFunc = function(opt, value) {\n      //v < 0.15 ? lighten : darken\n      const color = [];\n      ColorHelper.HEXtoRGB(value, color);\n      ColorHelper.RGBtoHSV(...color, color);\n      color[2] *= 0.8;\n      ColorHelper.HSVtoRGB(...color, color);\n      const result = ColorHelper.RGBtoHEX(...color);\n      //Set style\n      opts.getOptionByProp(opt.prop + \"-dark\").setStyle(result);\n    };\n\n    const subtleFunc = function(opt, value)\n    {\n      //v < 0.15 ? lighten : darken\n      const color = [];\n      ColorHelper.HEXtoRGB(value, color);\n      ColorHelper.RGBtoHSV(...color, color);\n      color[2] *= 0.61;\n      ColorHelper.HSVtoRGB(...color, color);\n      const result = ColorHelper.RGBtoHEX(...color);\n      //Set style\n      opts.getOptionByProp(opt.prop + \"-subtle\").setStyle(result);\n    };\n\n    const ghostFunc = function(opt, value)\n    {\n      //v < 0.15 ? lighten : darken\n      const color = [];\n      ColorHelper.HEXtoRGB(value, color);\n      ColorHelper.RGBtoHSV(...color, color);\n      color[2] *= 0.74;\n      ColorHelper.HSVtoRGB(...color, color);\n      const result = ColorHelper.RGBtoHEX(...color);\n      //Set style\n      opts.getOptionByProp(opt.prop + \"-ghost\").setStyle(result);\n    };\n\n    const backFunc = function(opt, value)\n    {\n      //v < 0.15 ? lighten : darken\n      const color = [];\n      ColorHelper.HEXtoRGB(value, color);\n      ColorHelper.RGBtoHSV(...color, color);\n      color[2] *= 0.87;\n      ColorHelper.HSVtoRGB(...color, color);\n      const result = ColorHelper.RGBtoHEX(...color);\n      //Set style\n      opts.getOptionByProp(opt.prop + \"-back\").setStyle(result);\n    };\n\n    //Toolbar\n    opts.registerStyleOption(root, \"--color-toolbar-main\", \"color\", \"toolbar\", darkFunc);\n    opts.registerStyleOption(root, \"--color-toolbar-main-dark\", \"color\", \"hidden\");\n    opts.registerStyleOption(root, \"--color-toolbar-accent\", \"color\", \"toolbar\", darkFunc);\n    opts.registerStyleOption(root, \"--color-toolbar-accent-dark\", \"color\", \"hidden\");\n    opts.registerStyleOption(root, \"--color-toolbar-text\", \"color\", \"toolbar\", invertFunc);\n    opts.registerStyleOption(root, \"--color-toolbar-text-invert\", \"color\", \"hidden\");\n\n    //Drawer\n    opts.registerStyleOption(root, \"--color-drawer-main\", \"color\", \"drawer\", darkFunc);\n    opts.registerStyleOption(root, \"--color-drawer-main-dark\", \"color\", \"hidden\");\n    opts.registerStyleOption(root, \"--color-drawer-accent\", \"color\", \"drawer\");\n    opts.registerStyleOption(root, \"--color-drawer-text\", \"color\", \"drawer\", (...args) => {\n      subtleFunc(...args);\n      ghostFunc(...args);\n      invertFunc(...args);\n      backFunc(...args);\n    });\n    opts.registerStyleOption(root, \"--color-drawer-text-subtle\", \"color\", \"hidden\");\n    opts.registerStyleOption(root, \"--color-drawer-text-ghost\", \"color\", \"hidden\");\n    opts.registerStyleOption(root, \"--color-drawer-text-invert\", \"color\", \"hidden\");\n    opts.registerStyleOption(root, \"--color-drawer-text-back\", \"color\", \"hidden\");\n    opts.registerStyleOption(root, \"--color-drawer-error\", \"color\", \"drawer\");\n\n    //Testing\n    opts.registerStyleOption(root, \"--color-testing-success\", \"color\", \"testing\");\n    opts.registerStyleOption(root, \"--color-testing-failure\", \"color\", \"testing\");\n    opts.registerStyleOption(root, \"--color-testing-working\", \"color\", \"testing\");\n    opts.registerStyleOption(root, \"--color-testing-text\", \"color\", \"testing\");\n\n    //Notification\n    opts.registerStyleOption(root, \"--color-notification-text\", \"color\", \"notification\");\n    opts.registerStyleOption(root, \"--color-notification-info\", \"color\", \"notification\", darkFunc);\n    opts.registerStyleOption(root, \"--color-notification-info-dark\", \"color\", \"hidden\");\n    opts.registerStyleOption(root, \"--color-notification-error\", \"color\", \"notification\", darkFunc);\n    opts.registerStyleOption(root, \"--color-notification-error-dark\", \"color\", \"hidden\");\n    opts.registerStyleOption(root, \"--color-notification-warning\", \"color\", \"notification\", darkFunc);\n    opts.registerStyleOption(root, \"--color-notification-warning-dark\", \"color\", \"hidden\");\n\n    //Workspace\n    opts.registerStyleOption(root, \"--color-graph-node\", \"color\", \"workspace\");\n    opts.registerStyleOption(root, \"--color-workspace-text\", \"color\", \"workspace\");\n    opts.registerStyleOption(root, \"--color-workspace-main\", \"color\", \"workspace\");\n\n    //Label editor\n    opts.registerStyleOption(root, \"--color-labeleditor-text\", \"color\", \"labeleditor\");\n    opts.registerStyleOption(root, \"--color-labeleditor-main\", \"color\", \"labeleditor\");\n\n    //Viewport\n    opts.registerStyleOption(root, \"--color-viewport-error\", \"color\", \"viewport\");\n    opts.registerStyleOption(root, \"--color-viewport-testing\", \"color\", \"viewport\");\n    opts.registerStyleOption(root, \"--color-viewport-warning\", \"color\", \"viewport\");\n    opts.registerStyleOption(root, \"--color-highlight-select\", \"color\", \"viewport\");\n\n    opts.initialize();\n\n    LocalSave.registerHandler(this);\n    this.onLoadSave();\n  }\n\n  //Override\n  componentWillUnmount()\n  {\n    registry.terminate();\n\n    LocalSave.unregisterHandler(this);\n  }\n\n  onLoadSave()\n  {\n    const opts = this.styleOpts;\n    const data = LocalSave.loadFromStorage(\"prefs-color\");\n    for(let prop in data)\n    {\n      const opt = opts.getOptionByProp(prop);\n      if (opt)\n      {\n        opt.setStyle(data[prop]);\n      }\n    }\n  }\n\n  onAutoSave()\n  {\n    const opts = this.styleOpts;\n    const data = {};\n    for(let opt of opts.getOptions())\n    {\n      if (!opt.isDefaultStyle())\n      {\n        data[opt.prop] = opt.getStyle();\n      }\n    }\n    LocalSave.saveToStorage(\"prefs-color\", data);\n  }\n\n  onChangeTheme(e)\n  {\n    const prevTheme = this.state.theme;\n    const theme = e.target.value;\n    console.log(prevTheme, theme);\n    if (prevTheme === theme) return;\n\n    if (theme === \"default\")\n    {\n      for(let option of this.styleOpts.getOptions())\n      {\n        option.resetStyle();\n      }\n    }\n\n    this.setState({theme: theme});\n  }\n\n  //Override\n  render()\n  {\n    const root = document.getElementById(\"root\");\n    const opts = this.styleOpts;\n\n    return <div className=\"panel-container\" id=\"option\" ref={ref=>this.container=ref} style={this.props.style}>\n      <div className=\"panel-title\">\n        <h1>{I18N.toString(\"component.options.title\")}</h1>\n      </div>\n      <div className=\"panel-content\">\n\n        <OptionGroup title={I18N.toString(\"component.workspace.title\")} label={I18N.toString(\"options.category.shortcuts\")}>\n          <OptionHotkey label={I18N.toString(\"action.toolbar.savemachine\")} keyName=\"Ctrl + S\"/>\n          <OptionHotkey label={I18N.toString(\"action.toolbar.undo.label\")} keyName=\"Ctrl + Z\"/>\n          <OptionHotkey label={I18N.toString(\"action.toolbar.redo.label\")} keyName=\"Ctrl + Shift + Z\"/>\n          <OptionHotkey label={I18N.toString(\"action.toolbar.saveimage\")} keyName=\"Ctrl + P\"/>\n        </OptionGroup>\n\n        <OptionGroup title={I18N.toString(\"component.testing.title\")} label={I18N.toString(\"options.category.shortcuts\")}>\n          <OptionHotkey label={\"Add test input\"} keyName=\"Enter\"/>\n          <OptionHotkey label={\"Run test input\"} keyName=\"Shift + Enter\"/>\n        </OptionGroup>\n\n        <OptionGroup title={I18N.toString(\"component.labeleditor.title\")} label={I18N.toString(\"options.category.shortcuts\")}>\n          <OptionHotkey label={I18N.toString(\"action.workspace.submit.label\")} keyName=\"Enter\"/>\n          <OptionHotkey label={I18N.toString(\"action.workspace.cancel.label\")} keyName=\"Escape\"/>\n        </OptionGroup>\n\n        <hr/>\n\n        <div>\n          <div id=\"options-theme-select-container\">\n            <label htmlFor=\"options-theme-select\">Theme</label>\n            <select id=\"options-theme-select\" className=\"panel-select\" value={this.state.theme} onChange={this.onChangeTheme} disabled={this.state.customTheme}>\n              <option value=\"default\">Default</option>\n              <option value=\"ucsd\" disabled=\"true\">UC San Diego (Coming Soon)</option>\n              <option value=\"duke\" disabled=\"true\">Duke University (Coming Soon)</option>\n            </select>\n            {\n              !this.state.customTheme &&\n              <button className=\"panel-button\" onClick={() => this.setState({customTheme: true})}>\n                {I18N.toString(\"action.options.changetheme\")}\n              </button>\n            }\n          </div>\n          {\n            this.state.customTheme && <div>\n              <OptionGroup title={I18N.toString(\"component.toolbar.title\")} label={I18N.toString(\"options.category.colors\")}>\n              { opts.getPropsByGroup(\"toolbar\").map(e => <div key={e}>\n                  <StyleInput className=\"option-container\" value={opts.getOptionByProp(e)} title={I18N.toString(\"options.\" + e)}/>\n                </div>) }\n              </OptionGroup>\n\n              <OptionGroup title={I18N.toString(\"component.drawer.title\")} label={I18N.toString(\"options.category.colors\")}>\n              { opts.getPropsByGroup(\"drawer\").map(e => <div key={e}>\n                  <StyleInput className=\"option-container\" value={opts.getOptionByProp(e)} title={I18N.toString(\"options.\" + e)}/>\n                </div>) }\n              </OptionGroup>\n\n              <OptionGroup title={I18N.toString(\"component.testing.title\")} label={I18N.toString(\"options.category.colors\")}>\n              { opts.getPropsByGroup(\"testing\").map(e => <div key={e}>\n                  <StyleInput className=\"option-container\" value={opts.getOptionByProp(e)} title={I18N.toString(\"options.\" + e)}/>\n                </div>) }\n              </OptionGroup>\n\n              <OptionGroup title={I18N.toString(\"component.notification.title\")} label={I18N.toString(\"options.category.colors\")}>\n              { opts.getPropsByGroup(\"notification\").map(e => <div key={e}>\n                  <StyleInput className=\"option-container\" value={opts.getOptionByProp(e)} title={I18N.toString(\"options.\" + e)}/>\n                </div>) }\n              </OptionGroup>\n\n              <OptionGroup title={I18N.toString(\"component.graph.title\")} label={I18N.toString(\"options.category.colors\")}>\n              { opts.getPropsByGroup(\"workspace\").map(e => <div key={e}>\n                  <StyleInput className=\"option-container\" value={opts.getOptionByProp(e)} title={I18N.toString(\"options.\" + e)}/>\n                </div>) }\n              </OptionGroup>\n\n              <OptionGroup title={I18N.toString(\"component.labeleditor.title\")} label={I18N.toString(\"options.category.colors\")}>\n              { opts.getPropsByGroup(\"labeleditor\").map(e => <div key={e}>\n                  <StyleInput className=\"option-container\" value={opts.getOptionByProp(e)} title={I18N.toString(\"options.\" + e)}/>\n                </div>) }\n              </OptionGroup>\n\n              <OptionGroup title={I18N.toString(\"options.category.general\")} label={I18N.toString(\"options.category.colors\")}>\n              { opts.getPropsByGroup(\"viewport\").map(e => <div key={e}>\n                  <StyleInput className=\"option-container\" value={opts.getOptionByProp(e)} title={I18N.toString(\"options.\" + e)}/>\n                </div>) }\n              </OptionGroup>\n\n              <button className=\"panel-button\" onClick={(e) => {\n                for(let option of this.styleOpts.getOptions())\n                {\n                  option.resetStyle();\n                }\n                this.setState({customTheme: false});\n              }}>{I18N.toString(\"action.options.reset\")}</button>\n            </div>\n          }\n\n          <hr/>\n        </div>\n\n        <div className=\"panel-checkbox\">\n          <input id=\"option-skipwelcome\" type=\"checkbox\" checked={this.state.skipWelcome}\n          onChange={(e) => {\n            const result = e.target.checked;\n            this.setState({skipWelcome: e.target.checked});\n            LocalSave.setStringToStorage(LOCAL_STORAGE_ID, result);\n          }}/>\n          <label htmlFor=\"option-skipwelcome\">{I18N.toString(\"options.skipwelcome\")}</label>\n        </div>\n\n      </div>\n\n      <div className=\"panel-bottom\"></div>\n    </div>;\n  }\n}\nOptionsPanel.UNLOCALIZED_NAME = \"component.options.title\";\n\nexport default OptionsPanel;\n","import React from 'react';\nimport './Drawer.css';\n\nimport DrawerExpander from './DrawerExpander.js';\n\nimport ExportingPanel from './panels/exporting/ExportingPanel.js';\nimport OptionsPanel from './panels/options/OptionsPanel.js';\n\nconst DEFAULT_PANELS = [ExportingPanel, OptionsPanel];\nconst DEFAULT_TAB_INDEX = 1;//TODO: Should be 0, try it :)\n\nconst MAX_PANEL_THRESHOLD = 50;\nconst MIN_PANEL_SIZE = 300;//180\n\nclass Drawer extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.state = {\n      tabIndex: DEFAULT_TAB_INDEX,\n      dragging: false\n    };\n\n    this.onTouchStart = this.onTouchStart.bind(this);\n    this.onMouseDown = this.onMouseDown.bind(this);\n    this.onScroll = this.onScroll.bind(this);\n\n    this._ontouchmove = null;\n    this._ontouchend = null;\n  }\n\n  setTab(index)\n  {\n    const app = this.props.app;\n\n    //Open drawer if it is closed\n    if (!app.state.isOpen)\n    {\n      app.openDrawer();\n    }\n    //Full drawer if clicked on same one\n    else\n    {\n      if (this.state.tabIndex === index)\n      {\n        app.openDrawer(!app.state.isFullscreen);\n      }\n    }\n\n    this.setState((prev, props) => {\n      return { tabIndex: index };\n    });\n  }\n\n  onStartDraggingDrawerBorder(x, y)\n  {\n    const app = this.props.app;\n    this.setState({dragging: true});\n\n    //Disable fullscreen if dragging off of it\n    if (app.state.isFullscreen)\n    {\n      app.openDrawer(false);\n    }\n\n    //Update panel to current click position\n    updatePanelSize(app, x, y);\n  }\n\n  onStopDraggingDrawerBorder()\n  {\n    this.setState({dragging: false});\n  }\n\n  onTouchStart(e)\n  {\n    e.stopPropagation();\n    e.preventDefault();\n\n    if (this._ontouchmove)\n    {\n      document.removeEventListener(\"touchmove\", this._ontouchmove);\n      this._ontouchmove = null;\n    }\n\n    if (this._ontouchend)\n    {\n      document.removeEventListener(\"touchend\", this._ontouchend);\n      this._ontouchend = null;\n    }\n\n    const app = this.props.app;\n    //Ignore drag move if closed\n    if (!app.state.isOpen)\n    {\n      /*\n      //Opens the drawer if dragging, but closed\n      this.props.app.openDrawer();\n      */\n      this.setState({dragging: false});\n      return;\n    }\n\n    const touch = e.changedTouches[0];\n    this.onStartDraggingDrawerBorder(touch.clientX, touch.clientY);\n\n    this._ontouchmove = function(ev)\n    {\n      e.stopPropagation();\n      e.preventDefault();\n\n      const touch = ev.changedTouches[0];\n      updatePanelSize(app, touch.clientX, touch.clientY);\n    };\n\n    document.addEventListener(this._ontouchmove);\n\n    this._ontouchend = function(ev)\n    {\n      e.stopPropagation();\n      e.preventDefault();\n\n      const touch = ev.changedTouches[0];\n      updatePanelSize(app, touch.clientX, touch.clientY);\n      this.onStopDraggingDrawerBorder();\n\n      //Remove listeners that are no longer needed\n      document.removeEventListener(\"touchend\", this._ontouchend);\n      document.removeEventListener(\"touchmove\", this._ontouchmove);\n    };\n\n    //Start listening to move and release events\n    document.addEventListener(\"touchend\", this._ontouchend);\n    document.addEventListener(\"touchmove\", this._ontouchmove);\n  }\n\n  onMouseDown(e)\n  {\n    e.stopPropagation();\n    e.preventDefault();\n\n    const app = this.props.app;\n    //Ignore drag move if closed\n    if (!app.state.isOpen)\n    {\n      /*\n      //Opens the drawer if dragging, but closed\n      this.props.app.openDrawer();\n      */\n      return;\n    }\n\n    this.onStartDraggingDrawerBorder(e.clientX, e.clientY);\n\n    const onMouseMove = (ev) => {\n      ev.stopPropagation();\n      ev.preventDefault();\n\n      updatePanelSize(app, ev.clientX, ev.clientY);\n    };\n\n    const onMouseUp = (ev) => {\n      ev.stopPropagation();\n      ev.preventDefault();\n\n      updatePanelSize(app, ev.clientX, ev.clientY);\n      this.onStopDraggingDrawerBorder();\n\n      //Remove listeners that are no longer needed\n      document.removeEventListener(\"mouseup\", onMouseUp);\n      document.removeEventListener(\"mousemove\", onMouseMove);\n    };\n\n    //Start listening to move and release events\n    document.addEventListener(\"mouseup\", onMouseUp);\n    document.addEventListener(\"mousemove\", onMouseMove);\n  }\n\n  onScroll(e)\n  {\n    //if (this.panel)\n    {\n      //TODO: this.panel.container.scrollBy(0, e.deltaY);\n      //TODO: return false;\n    }\n  }\n\n  render()\n  {\n    const app = this.props.app;\n    const currentModule = app.getCurrentModule();\n    const graphController = this.props.graphController;\n    const machineController = this.props.machineController;\n\n    const tabIndex = this.state.tabIndex;\n    const InfoPanel = currentModule ? currentModule.getModuleInfoPanel() : null;\n\n    return <div className={\"drawer-container\"} onWheel={this.onScroll}>\n      <div className=\"drawer-content\">\n      {\n        currentModule &&\n        currentModule.getModulePanels().map((PanelClass, i) => {\n          const panelID = i + 1;\n          return <PanelClass key={currentModule.getModuleName() + \":\" + panelID}\n            style={{display: tabIndex == panelID ? \"block\" : \"none\"}}\n            app={app}\n            graphController={graphController}\n            machineController={machineController}/>;\n        })\n      }\n      {\n        tabIndex == 0 && InfoPanel != null &&\n        <InfoPanel app={app}/>\n      }\n      {\n        DEFAULT_PANELS.map((PanelClass, i) => {\n          const panelID = -(i + 1);\n          return <PanelClass key={\"default:\" + panelID}\n            style={{display: tabIndex == panelID ? \"block\" : \"none\"}}\n            app={app}\n            graphController={graphController}\n            machineController={machineController}/>;\n        })\n      }\n      </div>\n      <div className=\"tab-list\">\n        <DrawerExpander app={app}/>\n        {\n          currentModule &&\n          currentModule.getModulePanels().map((PanelClass, i) => {\n            const panelID = i + 1;\n            return <button key={currentModule.getModuleName() + \":\" + panelID}\n              className={\"tab-link\" + (tabIndex === panelID ? \" active\" : \"\")}\n              onClick={ev=>this.setTab(panelID)}>\n              {I18N.toString(PanelClass.UNLOCALIZED_NAME || \"component.untitled.title\")}\n            </button>;\n          })\n        }\n        {\n          DEFAULT_PANELS.map((PanelClass, i) => {\n            const panelID = -(i + 1);\n            return <button key={\"default:\" + panelID}\n              className={\"tab-link\" + (tabIndex === panelID ? \" active\" : \"\")}\n              onClick={ev=>this.setTab(panelID)}>\n              {I18N.toString(PanelClass.UNLOCALIZED_NAME || \"component.untitled.title\")}\n            </button>;\n          })\n        }\n        <div className=\"tab-right\"></div>\n      </div>\n\n      <div className={\"drawer-border\" + (this.state.dragging ? \" dragging\" : \"\")}\n        onTouchStart={this.onTouchStart}\n        onMouseDown={this.onMouseDown}>\n      </div>\n    </div>;\n  }\n}\n\nfunction updatePanelSize(app, x, y)\n{\n  const container = app.container;\n  let fullscreen = false;\n  let size = 0;\n  //This is the same criteria as in App.css\n  if (window.matchMedia(\"(max-width: 420px)\").matches)\n  {\n    //Vertical slide\n    const viewportOffsetY = app.viewport.ref.getBoundingClientRect().y;\n    if (y - viewportOffsetY < MAX_PANEL_THRESHOLD)\n    {\n      //Enable fullscreen\n      app.setState((prev, props) => {\n        return {\n          isFullscreen: true\n        };\n      });\n    }\n    else\n    {\n      size = container.offsetHeight - y;\n\n      //Disable fullscreen\n      if (app.state.isFullscreen)\n      {\n        app.setState((prev, props) => {\n          return {\n            isFullscreen: false\n          };\n        });\n      }\n    }\n  }\n  else\n  {\n    //Horizontal slide\n    if (x < MAX_PANEL_THRESHOLD)\n    {\n      //Enable fullscreen\n      app.setState((prev, props) => {\n        return {\n          isFullscreen: true\n        };\n      });\n    }\n    else\n    {\n      size = container.offsetWidth - x;\n\n      //Disable fullscreen\n      if (app.state.isFullscreen)\n      {\n        app.setState((prev, props) => {\n          return {\n            isFullscreen: false\n          };\n        });\n      }\n    }\n  }\n\n  //Make sure is greater than minimum size and vice versa\n  if (size < MIN_PANEL_SIZE) size = MIN_PANEL_SIZE;\n\n  //Set panel size\n  container.style.setProperty(\"--panel-size\", size + \"px\");\n}\nDrawer.EXPORTING_PANEL_TAB_INDEX = -1;\nDrawer.OPTIONS_PANEL_TAB_INDEX = -2;\n\nexport default Drawer;\n","import React from 'react';\nimport './Toolbar.css';\n\nimport Config from 'config.js';\n\nimport UploadButton from \"./UploadButton.js\";\nimport HelpButton from \"./HelpButton.js\";\nimport MachineName from './MachineName.js';\n\nimport IconButton from 'icons/IconButton.js';\n\nimport MoreIcon from 'icons/MoreIcon.js';\nimport UploadIcon from 'icons/UploadIcon.js';\nimport CreateIcon from 'icons/PageNewIcon.js';\n//import CreateIcon from 'icons/CreateIcon.js';\nimport SaveIcon from 'icons/SaveIcon.js';\n//import SaveIcon from 'icons/DiskSaveIcon.js';\nimport UndoIcon from 'icons/UndoIcon.js';\nimport RedoIcon from 'icons/RedoIcon.js';\nimport HelpIcon from 'icons/HelpIcon.js';\nimport LanguageIcon from 'icons/LanguageIcon.js';\nimport OfflineIcon from 'icons/OfflineIcon.js';\nimport OfflinePinIcon from 'icons/OfflinePinIcon.js';\nimport BugReportIcon from 'icons/BugReportIcon.js';\n\nimport Drawer from 'content/drawer/Drawer.js';\n\nclass Toolbar extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.state = {\n      langOn: false\n    };\n\n    this.onMachineNameChange = this.onMachineNameChange.bind(this);\n    this.onMachineNameKeyDown = this.onMachineNameKeyDown.bind(this);\n    this.langOnClick = this.langOnClick.bind(this);\n  }\n\n  onMachineNameChange(e)\n  {\n    this.props.machineController.renameMachine(e.value);\n  }\n\n  onMachineNameKeyDown()\n  {\n\n  }\n\n  onMachineNameBlur()\n  {\n\n  }\n\n  langOnClick()\n  {\n    this.setState({langOn: !this.state.langOn});\n  }\n\n  render()\n  {\n    const graphController = this.props.graphController;\n    const machineController = this.props.machineController;\n    const eventManager = this.props.eventManager;\n    const drawer = this.props.drawer;\n\n    const graph = graphController.getGraph();\n    const machineBuilder = machineController.getMachineBuilder();\n    const events = eventManager.getLogger();\n\n    const offline = navigator && navigator.onLine;\n\n    return <div className=\"toolbar-container\">\n      <div className=\"toolbar-title\">\n        <div className=\"toolbar-title-name\">\n          {/*Machine Name*/}\n          <MachineName id=\"machine-name\" value={machineController.getMachineName()} onSubmit={this.onMachineNameChange}/>\n          {/*Toolbar Alt. Title*/}\n          <div className=\"toolbar-title-alt\">\n            {/*Offline Button*/}\n            <IconButton id=\"toolbar-lang\" title={I18N.toString(\"action.toolbar.lang\")}\n              onClick={() => {\n                if ('serviceWorker' in navigator)\n                {\n                  if (navigator.serviceWorker.getRegistration(\"./app.html\"))\n                  {\n                    alert(I18N.toString(\"message.offline.ready\"));\n                  }\n                  else\n                  {\n                    alert(I18N.toString(\"message.offline.failed\"));\n                  }\n                }\n                else\n                {\n                  alert(I18N.toString(\"message.offline.nosupport\"));\n                }\n              }} disabled={offline}>\n              <OfflineIcon/>\n            </IconButton>\n            {/*Upload Button\n            <div id=\"toolbar-upload-alt\"\n              title={I18N.toString(\"action.toolbar.uploadmachine\")}>\n              <MoreIcon/>\n            </div>\n            */}\n          </div>\n        </div>\n        {/*Machine Type*/}\n        <label id=\"machine-type\"\n          onClick={()=>drawer.setTab(0)}>\n          {machineBuilder.getMachineType()}\n        </label>\n      </div>\n\n      <div className=\"toolbar-tray\">\n        {/*New Button*/}\n        <IconButton className=\"navicon\" id=\"toolbar-new\" title={I18N.toString(\"action.toolbar.newmachine\")}\n          onClick={() => {\n            if (window.confirm(I18N.toString(\"alert.graph.clear\")))\n            {\n              graph.deleteAll();\n              events.clear();\n              machineController.setMachineName(null);\n            }\n          }}>\n          <CreateIcon/>\n        </IconButton>\n        {/*Upload Button*/}\n        <UploadButton className=\"navicon\" id=\"toolbar-upload\" title={I18N.toString(\"action.toolbar.uploadmachine\")}\n          graphController={graphController}>\n          <UploadIcon/>\n        </UploadButton>\n        {/*Undo Button*/}\n        <IconButton className=\"navicon\" id=\"toolbar-undo\" title={I18N.toString(\"action.toolbar.undo\")}\n          disabled={!events.canUndo()}\n          onClick={()=>events.undo()}>\n          <UndoIcon/>\n        </IconButton>\n        {/*Redo Button*/}\n        <IconButton className=\"navicon\" id=\"toolbar-redo\" title={I18N.toString(\"action.toolbar.redo\")}\n          disabled={!events.canRedo()}\n          onClick={()=>events.redo()}>\n          <RedoIcon/>\n        </IconButton>\n        {/*Save Button*/}\n        <IconButton className=\"navicon\" id=\"toolbar-save\" title={I18N.toString(\"action.toolbar.save\")}\n          onClick={()=>drawer.setTab(Drawer.EXPORTING_PANEL_TAB_INDEX)} disabled={graph.isEmpty()}>\n          <SaveIcon/>\n        </IconButton>\n\n        {/*Right Alt. Toolbar*/}\n        <div className=\"toolbar-tray-alt\">\n          {/*Report a Bug Button*/}\n          <IconButton className=\"navicon\" id=\"toolbar-bug\" title={I18N.toString(\"action.toolbar.bug\")}>\n            <BugReportIcon/>\n          </IconButton>\n          {/*Help Button*/}\n          <HelpButton className=\"navicon\" id=\"toolbar-help\" title={I18N.toString(\"action.toolbar.help\")}>\n            <HelpIcon/>\n          </HelpButton>\n          {/*Language Button*/}\n          <IconButton className=\"navicon\" id=\"toolbar-lang\" title={I18N.toString(\"action.toolbar.lang\")}\n            onClick={(e) => {document.activeElement.blur(); this.langOnClick();}} >\n            <LanguageIcon/>\n          </IconButton>\n          {/*Language Select*/}\n          <select id=\"toolbar-lang-select\" style={{maxWidth: (this.state.langOn ? \"10em\" : \"0\")}} onChange={(e) => {I18N.fetchLanguageFile(e.target.value);}}>\n            <option value=\"en_us\">English</option>\n            <option value=\"xx_pirate\">Pirate Speak</option>\n          </select>\n        </div>\n      </div>\n    </div>;\n  }\n}\n\nexport default Toolbar;\n","import React from 'react';\nimport './Subtitle.css';\n\nimport Config from 'config.js';\n\nclass Subtitle extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.state = { active: false };\n\n    this.messageTimer = null;\n  }\n\n  componentDidMount()\n  {\n    this.messageTimer = setTimeout(() => {\n      this.setState({ active: true });\n    }, Config.INIT_WAITTIME);\n  }\n\n  render()\n  {\n    const visible = this.state.active ? this.props.visible : false;\n    return <text y=\"-1em\" className={\"graph-ui subtitle\" + (visible ? \" visible\" : \"\")}\n      textAnchor=\"middle\">{I18N.toString(\"message.workspace.empty\")}</text>;\n  }\n}\n\nexport default Subtitle;\n","import React from 'react';\n\nimport Config from 'config.js';\n\nclass NodeRenderer extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    //TODO: Refer to app.css for comparable colors\n    const node = this.props.node;\n    return <g className=\"graph-node-container\">\n      {/*Outer circle*/}\n      <circle className=\"graph-node\"\n        cx={node.x}\n        cy={node.y}\n        r={Config.NODE_RADIUS}\n\n        fill=\"#FEE781\"\n        stroke=\"#000000\"/>\n\n      {/*Inner circle*/}\n      {node.accept &&\n        <circle className=\"graph-node-inner\"\n          cx={node.x}\n          cy={node.y}\n          r={Config.NODE_RADIUS_INNER}\n          fill=\"none\"\n\n          stroke=\"#000000\"/>}\n\n      //Label\n      <text className=\"graph-node-label\"\n        x={node.x} y={node.y + 4}\n        pointerEvents=\"none\"\n        style={{\n          userSelect: \"none\",\n          fontSize: (1 - Math.min(Math.max(node.getNodeLabel().length - 2, 0) / 6, 0.5)) + \"em\"\n        }}\n        textAnchor=\"middle\">\n        {node.getNodeLabel()}\n      </text>\n    </g>;\n  }\n}\n\nexport default NodeRenderer;\n","import React from 'react';\n\nimport Config from 'config.js';\n\nconst EDGE_SYMBOL_SEPARATOR = Config.EDGE_SYMBOL_SEPARATOR;\n\nclass EdgeRenderer extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    const SIXTH_PI = Math.PI / 6;\n\n    let arrowAngle = 0;\n    const edge = this.props.edge;\n    const start = edge.getStartPoint();\n    const end = edge.getEndPoint();\n    const center = edge.getCenterPoint();\n    const label = edge.getEdgeLabel();\n    const quad = edge.getQuadratic();\n    const quadCoords = edge.getQuadraticAsCoords();\n    const edgeDir = edge.getEdgeDirection();\n    const flipLabel = quadCoords.y > 0;\n\n    //Calculate curved lines...\n    let quadLine = null;\n    if (!edge.isQuadratic())\n    {\n      //Straight line\n      arrowAngle = Math.atan2(start.x - end.x, start.y - end.y) + Math.PI;\n      quadLine = \"L \" + end.x + \" \" + end.y;\n    }\n    else\n    {\n      //Quadratic curve\n      //center = (midpoint + the quadratic offset) + the quadratic offset\n      const cx = center.x + quadCoords.x;\n      const cy = center.y + quadCoords.y;\n      arrowAngle = Math.atan2(cx - end.x, cy - end.y) + Math.PI;\n      quadLine = \"Q \" + cx + \" \" + cy + \" \" + end.x + \" \" + end.y;\n    }\n\n    //Draw multiple labels\n    const labels = label.split(EDGE_SYMBOL_SEPARATOR);\n    let dy = 0;\n\n    const cx = (center && center.x || 0);\n    const cy = (center && center.y || 0);\n\n    return <g className=\"graph-edge-container\">\n      //Draw lines\n      <path className=\"graph-edge\" id={\"edge:\" + edge.getGraphElementID()}\n        d={\n          \"M \" + start.x + \" \" + start.y + \" \" +\n          quadLine + \" \" +\n          \"M \" +\n            (end.x - (Config.ARROW_WIDTH * Math.sin(arrowAngle - SIXTH_PI))) + \" \" +\n            (end.y - (Config.ARROW_WIDTH * Math.cos(arrowAngle - SIXTH_PI))) + \" \" +\n          \"L \" + end.x + \" \" + end.y + \" \" +\n          \"L \" +\n            (end.x - (Config.ARROW_WIDTH * Math.sin(arrowAngle + SIXTH_PI))) + \" \" +\n            (end.y - (Config.ARROW_WIDTH * Math.cos(arrowAngle + SIXTH_PI)))}\n        fill=\"none\"\n\n        stroke=\"#000000\"/>\n\n      {/*Draw labels*/}\n      <g transform={\"translate(\" + (cx) + \",\" + (cy) + \") rotate(\" + (edgeDir * 180 / Math.PI) + \")\"}>\n      { labels.length > 0 && labels.map((str, i) => {\n          const yy = (i + 1) * -15;\n\n          //TODO: ctx.clearRect(xx - cx - 2, yy - 5, (cx * 2) + 4, 10);\n          return <text\n            key={str + \".\" + i}\n            className=\"graph-edge-label\"\n            transform={\"translate(0, \" + yy + \")\" + (flipLabel ? \" scale(-1, -1)\" : \"\")}\n            alignmentBaseline=\"central\"\n            pointerEvents=\"none\"\n            style={{userSelect: \"none\"}}\n            textAnchor=\"middle\">\n            {str}\n          </text>;\n      })}\n      </g>\n    </g>;\n  }\n}\n\nexport default EdgeRenderer;\n","import React from 'react';\n\nimport Node from 'graph/Node.js';\n\nimport Config from 'config.js';\n\nclass InitialMarkerRenderer extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    const node = this.props.node;\n    //node.x + offset marker back to center if not a node (or is a pointer)\n    const x = node.x + (!(node instanceof Node) ? -Config.INITIAL_MARKER_OFFSET_X : 0);\n    const y = node.y;\n    const r = Config.NODE_RADIUS;\n    const d = r * 2;\n    return <g className=\"graph-initial-container\">\n      <path className=\"graph-initial\" d={\n        \"M\" + (x - r) + \" \" + (y) +\n        \" L\" + (x - d) + \" \" + (y - r) +\n        \" L\" + (x - d) + \" \" + (y + r) +\n        \" Z\"}\n        fill=\"none\"\n\n        stroke=\"#000000\"/>\n    </g>;\n  }\n}\n\nexport default InitialMarkerRenderer;\n","import React from 'react';\n\nimport NodeRenderer from './NodeRenderer.js';\nimport EdgeRenderer from './EdgeRenderer.js';\nimport InitialMarkerRenderer from './InitialMarkerRenderer.js';\n\nclass NodalGraphRenderer extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  //Override\n  render()\n  {\n    const graph = this.props.graph;\n    const inputController = this.props.inputController;\n    return <g>\n      {/* Nodes */}\n      {graph.nodes.map((e, i) => <NodeRenderer key={e.getGraphElementID() || i} node={e}/>)}\n\n      {/* Edges */}\n      {graph.edges.map((e, i) => <EdgeRenderer key={e.getGraphElementID() || i} edge={e}/>)}\n\n      {/* Initial marker and ghost */}\n      { graph.getStartNode() && (inputController.ghostInitialMarker == null ?\n        <InitialMarkerRenderer node={graph.getStartNode()}/> :\n        <InitialMarkerRenderer node={inputController.ghostInitialMarker}/>) }\n    </g>;\n  }\n}\n\nexport default NodalGraphRenderer;\n","import React from 'react';\n\nimport Config from 'config.js';\n\nclass SelectionBoxRenderer extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  //Override\n  render()\n  {\n    const visible = this.props.visible;\n    const fromX = this.props.fromX || 0;\n    const fromY = this.props.fromY || 0;\n    const toX = this.props.toX || fromX + 1;\n    const toY = this.props.toY || fromY + 1;\n\n    const dx = toX - fromX;\n    const dy = toY - fromY;\n\n    return <g className=\"graph-selection-container\">\n    { visible &&\n      <rect className=\"graph-selection\"\n        x={dx < 0 ? toX : fromX}\n        y={dy < 0 ? toY : fromY}\n        width={dx < 0 ? -dx : dx}\n        height={dy < 0 ? -dy : dy}/> }\n    </g>;\n  }\n}\n\nexport default SelectionBoxRenderer;\n","import React from 'react';\nimport Config from 'config.js';\n\nconst HIGHLIGHT_RADIUS_OFFSET = 4;\nconst HIGHLIGHT_LINE_WIDTH = 3;\nconst HIGHLIGHT_LINE_ARRAY = [8, 6];\n\nclass HighlightRenderer extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    const target = this.props.target;\n    const type = this.props.type;\n\n    let x = 0;\n    let y = 0;\n    let r = Config.CURSOR_RADIUS;\n    switch(type)\n    {\n      case \"node\":\n        x = target.x || 0;\n        y = target.y || 0;\n        r = Config.NODE_RADIUS;\n        break;\n      case \"edge\":\n        const center = target.getCenterPoint();\n        x = center.x || 0;\n        y = center.y || 0;\n        r = Config.EDGE_RADIUS;\n        break;\n      case \"endpoint\":\n        const endpoint = target.getEndPoint();\n        x = endpoint.x || 0;\n        y = endpoint.y || 0;\n        r = Config.ENDPOINT_RADIUS;\n        break;\n      case \"initial\":\n        x = target.x + Config.INITIAL_MARKER_OFFSET_X || 0;\n        y = target.y || 0;\n        r = Config.EDGE_RADIUS;\n        break;\n    }\n\n    return <g className=\"graph-highlight-container\">\n      <circle className={\"graph-highlight \" + this.props.className}\n        cx={x} cy={y}\n        r={r + HIGHLIGHT_RADIUS_OFFSET}\n        strokeDashoffset={this.props.offset || 0}\n        strokeDasharray={HIGHLIGHT_LINE_ARRAY}\n        strokeWidth={HIGHLIGHT_LINE_WIDTH}\n        fill=\"none\"/>\n    </g>;\n  }\n}\n\nexport default HighlightRenderer;\n","import React from 'react';\nimport './Workspace.css';\n\nimport Config from 'config.js';\n\nimport Subtitle from './Subtitle.js';\n\nimport NodalGraphRenderer from 'graph/renderer/NodalGraphRenderer.js';\nimport SelectionBoxRenderer from './renderer/SelectionBoxRenderer.js';\nimport HighlightRenderer from './renderer/HighlightRenderer.js';\n\nconst WORKSPACE_OFFSET_X = 0;\nconst WORKSPACE_OFFSET_Y = 0;\nconst EXPORT_PADDING_X = 30;\nconst EXPORT_PADDING_Y = 0;\n\nclass Workspace extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.ref = React.createRef();\n  }\n\n  getSVGForExport(width, height)\n  {\n    const svg = this.ref;\n    const viewport = this.props.inputController.getViewport();\n    const offsetX = viewport.getOffsetX();\n    const offsetY = viewport.getOffsetY();\n    const bounds = this.props.graphController.getGraph().getBoundingRect();\n    const dx = bounds.minX + offsetX - EXPORT_PADDING_X;\n    const dy = bounds.minY + offsetY - EXPORT_PADDING_Y;\n    const w = bounds.width + EXPORT_PADDING_X * 2;\n    const h = bounds.height + EXPORT_PADDING_Y * 2;\n    const clone = svg.cloneNode(true);\n    clone.setAttribute('viewBox', dx + \" \" + dy + \" \" + w + \" \" + h);\n    clone.setAttribute('width', width);\n    clone.setAttribute('height', height);\n\n    //Apply the workspace font (refer to Workspace.css)\n    clone.setAttribute('font-size', \"16px\");\n    clone.setAttribute('font-family', \"monospace\");\n\n    /*\n    //TODO: Link the font family to svg\n    const link = document.createElement(\"link\");\n    link.setAttribute(\"rel\", \"stylesheet\");\n    clone.appendChild(link);\n    */\n\n    //Remove unwanted ui elements from image\n    const uiElements = clone.getElementsByClassName(\"graph-ui\");\n    for(const e of uiElements)\n    {\n      e.remove();\n    }\n\n    return clone;\n  }\n\n  render()\n  {\n    const graphController = this.props.graphController;\n    const inputController = this.props.inputController;\n    const machineController = this.props.machineController;\n    const tester = this.props.tester;\n\n    const graph = graphController.getGraph();\n    const viewport = inputController.getViewport();\n    const machineBuilder = machineController.getMachineBuilder();\n    const picker = inputController.getPicker();\n    const selectionBox = picker.getSelectionBox();\n\n    let size = Config.DEFAULT_GRAPH_SIZE * Math.max(Number.MIN_VALUE, viewport.getScale());\n    const halfSize = size / 2;\n\n    //Must not be a block content (must inline)\n    return <svg id=\"workspace-content\" ref={ref=>this.ref=ref}\n      viewBox={(-halfSize + WORKSPACE_OFFSET_X) + \" \" + (-halfSize + WORKSPACE_OFFSET_Y) + \" \" + size + \" \" + size}\n      xmlns=\"http://www.w3.org/2000/svg\">\n\n      {/* Graph subtitle */}\n      <Subtitle visible={graph.isEmpty()}/>\n\n      {/* Graph elements */}\n      <g id=\"workspace-content-elements\" transform={\n        \"translate(\" +\n        viewport.getOffsetX() + \" \" +\n        viewport.getOffsetY() + \")\"}>\n\n        {/* Graph origin crosshair */}\n        <line className=\"graph-ui\" x1=\"0\" y1=\"-5\" x2=\"0\" y2=\"5\" stroke=\"rgba(0,0,0,0.04)\"/>\n        <line className=\"graph-ui\" x1=\"-5\" y1=\"0\" x2=\"5\" y2=\"0\" stroke=\"rgba(0,0,0,0.04)\"/>\n\n        {/* Graph objects */}\n        <NodalGraphRenderer graph={graph} inputController={inputController}/>\n\n        {/* Graph GUIs */}\n        <g>\n          {/* Selected elements */}\n          { picker.hasSelection() &&\n            picker.getSelection(graph).map((e, i) =>\n              <HighlightRenderer key={e.getGraphElementID()} className={inputController.isTrashMode() ? \"highlight-error\" : \"highlight-select\"} target={e} type=\"node\"/>) }\n\n          {/* Selection box */}\n          <SelectionBoxRenderer visible={selectionBox.visible}\n            fromX={selectionBox.fromX} fromY={selectionBox.fromY}\n            toX={selectionBox.toX} toY={selectionBox.toY}/>\n\n          {/* Node warning targets */}\n          { machineController.getMachineBuilder().machineErrorChecker.warningNodes.map((e, i) =>\n            <HighlightRenderer key={e.getGraphElementID()} className=\"highlight-warning graph-gui\" target={e} type=\"node\" offset=\"6\"/>) }\n\n          {/* Edge warning targets */}\n          { machineController.getMachineBuilder().machineErrorChecker.warningEdges.map((e, i) =>\n            <HighlightRenderer key={e.getGraphElementID()} className=\"highlight-warning graph-gui\" target={e} type=\"edge\" offset=\"6\"/>) }\n\n          {/* Node error targets */}\n          { machineController.getMachineBuilder().machineErrorChecker.errorNodes.map((e, i) =>\n            <HighlightRenderer key={e.getGraphElementID()} className=\"highlight-error graph-gui\" target={e} type=\"node\" offset=\"6\"/>) }\n\n          {/* Edge error targets */}\n          { machineController.getMachineBuilder().machineErrorChecker.errorEdges.map((e, i) =>\n            <HighlightRenderer key={e.getGraphElementID()} className=\"highlight-error graph-gui\" target={e} type=\"edge\" offset=\"6\"/>) }\n\n\n          {/* Node test targets */}\n          { tester.testMode.targets.map((e, i) => {\n              return <HighlightRenderer key={e.getGraphElementID()} className=\"highlight-test graph-gui\" target={e} type=\"node\" offset=\"6\"/>;\n            }) }\n\n          {/* Hover markers */}\n          { picker.hasTarget() &&\n            !picker.isTargetInSelection() &&\n            <HighlightRenderer className={inputController.isTrashMode() ? \"highlight-error\" : \"highlight-select\"} target={picker.target} type={picker.targetType}/> }\n\n        </g>\n      </g>\n    </svg>;\n  }\n}\n\nexport default Workspace;\n","import Notification from 'system/notification/Notification.js';\nimport LocalSave from 'system/localsave/LocalSave.js';\nimport Config from 'config.js';\n\nclass Tutorial\n{\n  constructor()\n  {\n    this.app = null;\n  }\n\n  start(app)\n  {\n    if (!LocalSave.existsInStorage(\"graph\"))\n    {\n      Notification.addMessage(I18N.toString(\"message.tutorial.1\"));\n      Notification.addMessage(I18N.toString(\"message.intro.2\"));\n    }\n  }\n}\n\nexport default Tutorial;\n","import React from 'react';\nimport './NotificationMessage.css';\n\nclass NotificationMessage extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.onExitMessage = this.onExitMessage.bind(this);\n  }\n\n  onExitMessage(e)\n  {\n    const message = this.props.value;\n    message.close();\n  }\n\n  //Override\n  render()\n  {\n    const message = this.props.value;\n    return <div className={\"notification-message-container notification-message-type-\" + message.getType() + \" \" + this.props.className}\n      id={this.props.id} style={this.props.style}>\n      { this.props.children || message.value.split(\"\\\\n\").map(e => <p key={e}>{e}</p>) || message }\n      <button onClick={this.onExitMessage}>{I18N.toString(\"message.action.close\")}</button>\n    </div>;\n  }\n}\nexport default NotificationMessage;\n","import React from 'react';\nimport './NotificationView.css';\n\nimport NotificationMessage from './NotificationMessage.js';\n\nclass NotificationView extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  //Override\n  render()\n  {\n    const notificationManager = this.props.notificationManager;\n    return <div className={\"notification-container \" + this.props.className} id={this.props.id} style={this.props.style}>\n    {\n      notificationManager.getMessages().map(e => {\n        const id = e.getID();\n        const ComponentClass = e.getComponentClass();\n        const componentProps = e.getComponentProps() || {};\n\n        return <NotificationMessage key={id} value={e}>\n        { ComponentClass && <ComponentClass message={e} {...componentProps}/> }\n        </NotificationMessage>;\n      })\n    }\n    </div>;\n  }\n}\nexport default NotificationView;\n","const MAX_HISTORY_LENGTH = 1000;\n\nclass EventLogger\n{\n  constructor()\n  {\n    this.history = [];\n    this.offsetIndex = 0;\n  }\n\n  handleEvent(event)\n  {\n    //Pop it all until current event\n    while(this.offsetIndex > 0)\n    {\n      this.history.pop();\n      --this.offsetIndex;\n    }\n\n    //Push the current event to the stack\n    this.history.push(event);\n\n    while(this.history.length > MAX_HISTORY_LENGTH)\n    {\n      this.history.unshift();\n    }\n  }\n\n  clear()\n  {\n    this.history.length = 0;\n    this.offsetIndex = 0;\n  }\n\n  undo()\n  {\n    if (!this.canUndo())\n    {\n      //Already the oldeset recorded event!\n      return;\n    }\n\n    const event = this.history[this.history.length - this.offsetIndex - 1];\n    ++this.offsetIndex;\n\n    event.applyUndo();\n  }\n\n  redo()\n  {\n    if (!this.canRedo())\n    {\n      //Already the most recent event!\n      return;\n    }\n\n    --this.offsetIndex;\n    const event = this.history[this.history.length - this.offsetIndex - 1];\n\n    event.applyRedo();\n  }\n\n  canUndo()\n  {\n    return this.offsetIndex < this.history.length;\n  }\n\n  canRedo()\n  {\n    return this.offsetIndex > 0;\n  }\n}\n\nexport default EventLogger;\n","class Event\n{\n  applyUndo()\n  {\n\n  }\n\n  applyRedo()\n  {\n\n  }\n}\n\nexport default Event;\n","import Event from './Event.js';\n\nclass GraphEdgeDestinationEvent extends Event\n{\n  constructor(graph, edge, nextDestination, prevDestination, prevQuad)\n  {\n    super();\n\n    this.graph = graph;\n    this.edge = edge;\n\n    this.nextDestination = nextDestination;\n    this.prevDestination = prevDestination;\n\n    const edgeQuad = edge.getQuadratic();\n    this.nextQuad = { radians: edgeQuad.radians, length: edgeQuad.length };\n    this.prevQuad = Object.assign({}, prevQuad);\n  }\n\n  //Override\n  applyUndo()\n  {\n    let radians = this.prevQuad.radians;\n    const length = this.prevQuad.length;\n\n    this.edge.changeDestinationNode(this.prevDestination);\n\n    //Flip them, since self loops are upside down\n    if (this.edge.isSelfLoop()) radians = -radians;\n    this.edge.setQuadratic(radians, length);\n  }\n\n  //Override\n  applyRedo()\n  {\n    let radians = this.nextQuad.radians;\n    const length = this.nextQuad.length;\n\n    this.edge.changeDestinationNode(this.nextDestination);\n\n    this.edge.setQuadratic(radians, length);\n  }\n}\n\nexport default GraphEdgeDestinationEvent;\n","import Event from './Event.js';\n\nclass GraphEdgeLabelEvent extends Event\n{\n  constructor(graph, edge, nextLabel, prevLabel)\n  {\n    super();\n\n    this.graph = graph;\n    this.edge = edge;\n    this.edgeID = edge.getGraphElementID();\n\n    this.nextLabel = nextLabel;\n    this.prevLabel = prevLabel;\n  }\n\n  //Override\n  applyUndo()\n  {\n    const graph = this.graph;\n    const edgeIndex = graph.getEdgeIndexByID(this.edgeID);\n    if (edgeIndex < 0) throw new Error(\"Unable to find target in graph\");\n    const edge = graph.edges[edgeIndex];\n\n    edge.setEdgeLabel(this.prevLabel);\n\n    graph.markDirty();\n  }\n\n  //Override\n  applyRedo()\n  {\n    const graph = this.graph;\n    const edgeIndex = graph.getEdgeIndexByID(this.edgeID);\n    if (edgeIndex < 0) throw new Error(\"Unable to find target in graph\");\n    const edge = graph.edges[edgeIndex];\n\n    edge.setEdgeLabel(this.nextLabel);\n\n    graph.markDirty();\n  }\n}\n\nexport default GraphEdgeLabelEvent;\n","import Event from './Event.js';\n\nclass GraphEdgeMoveEvent extends Event\n{\n  constructor(graph, edge, nextQuad, prevQuad)\n  {\n    super();\n\n    this.graph = graph;\n    this.edge = edge;\n\n    this.nextQuad = Object.assign({}, nextQuad);\n    this.prevQuad = Object.assign({}, prevQuad);\n  }\n\n  //Override\n  applyUndo()\n  {\n    this.edge.setQuadratic(this.prevQuad.radians, this.prevQuad.length);\n  }\n\n  //Override\n  applyRedo()\n  {\n    this.edge.setQuadratic(this.nextQuad.radians, this.nextQuad.length);\n  }\n}\n\nexport default GraphEdgeMoveEvent;\n","import Event from './Event.js';\n\nclass GraphNodeInitialEvent extends Event\n{\n  constructor(graph, nextInitial, prevInitial)\n  {\n    super();\n\n    this.graph = graph;\n\n    this.nodeID = nextInitial.getGraphElementID();\n    this.prevID = prevInitial.getGraphElementID();\n  }\n\n  //Override\n  applyUndo()\n  {\n    const graph = this.graph;\n    const nodeIndex = graph.getNodeIndexByID(this.prevID);\n    if (nodeIndex < 0) throw new Error(\"Unable to find target in graph\");\n    const node = graph.nodes[nodeIndex];\n\n    this.graph.setStartNode(node);\n  }\n\n  //Override\n  applyRedo()\n  {\n    const graph = this.graph;\n    const nodeIndex = graph.getNodeIndexByID(this.nodeID);\n    if (nodeIndex < 0) throw new Error(\"Unable to find target in graph\");\n    const node = graph.nodes[nodeIndex];\n\n    this.graph.setStartNode(node);\n  }\n}\n\nexport default GraphNodeInitialEvent;\n","import Event from './Event.js';\n\nclass GraphNodeMoveEvent extends Event\n{\n  constructor(graph, node, nextX, nextY, prevX, prevY)\n  {\n    super();\n\n    this.graph = graph;\n\n    this.nodeID = node.getGraphElementID();\n    this.nextX = nextX;\n    this.nextY = nextY;\n    this.prevX = prevX;\n    this.prevY = prevY;\n  }\n\n  //Override\n  applyUndo()\n  {\n    const graph = this.graph;\n    const nodeIndex = graph.getNodeIndexByID(this.nodeID);\n    if (nodeIndex < 0) throw new Error(\"Unable to find target in graph\");\n    const node = graph.nodes[nodeIndex];\n    node.x = this.prevX;\n    node.y = this.prevY;\n  }\n\n  //Override\n  applyRedo()\n  {\n    const graph = this.graph;\n    const nodeIndex = graph.getNodeIndexByID(this.nodeID);\n    if (nodeIndex < 0) throw new Error(\"Unable to find target in graph\");\n    const node = graph.nodes[nodeIndex];\n    node.x = this.nextX;\n    node.y = this.nextY;\n  }\n}\n\nexport default GraphNodeMoveEvent;\n","import Event from './Event.js';\n\nclass GraphNodeMoveAllEvent extends Event\n{\n  constructor(graph, nodes, dx, dy)\n  {\n    super();\n\n    this.graph = graph;\n\n    this.nodeIDs = [];\n    for(const node of nodes)\n    {\n      this.nodeIDs.push(node.getGraphElementID());\n    }\n    this.dx = dx;\n    this.dy = dy;\n  }\n\n  //Override\n  applyUndo()\n  {\n    const graph = this.graph;\n    let nodeIndex = -1;\n    let node = null;\n    for(const nodeID of this.nodeIDs)\n    {\n      nodeIndex = graph.getNodeIndexByID(nodeID);\n      if (nodeIndex < 0) throw new Error(\"Unable to find target in graph\");\n      node = graph.nodes[nodeIndex];\n\n      node.x -= this.dx;\n      node.y -= this.dy;\n    }\n  }\n\n  //Override\n  applyRedo()\n  {\n    const graph = this.graph;\n    let nodeIndex = -1;\n    let node = null;\n    for(const nodeID of this.nodeIDs)\n    {\n      nodeIndex = graph.getNodeIndexByID(nodeID);\n      if (nodeIndex < 0) throw new Error(\"Unable to find target in graph\");\n      node = graph.nodes[nodeIndex];\n\n      node.x += this.dx;\n      node.y += this.dy;\n    }\n  }\n}\n\nexport default GraphNodeMoveAllEvent;\n","class EventHandler\n{\n  constructor(eventLogger, controller, eventName, postEventName)\n  {\n    this.eventLogger = eventLogger;\n    this.controller = controller;\n    this.eventName = eventName;\n    this.postEventName = postEventName || null;\n\n    this.onEvent = this.onEvent.bind(this);\n\n    this.controller.on(this.eventName, this.onEvent);\n  }\n\n  destroy()\n  {\n    this.controller.removeEventListener(this.eventName, this.onEvent);\n  }\n\n  onEvent(...args)\n  {\n    const result = {};\n    result.applyUndo = this.applyUndo.bind(this, result);\n    result.applyRedo = this.applyRedo.bind(this, result);\n\n    result.eventData = this.captureEvent(...args);\n\n    if (this.postEventName)\n    {\n      //Wait for post event to finalize event\n      this.controller.once(this.postEventName, (...args) => {\n        result.postData = this.capturePostEvent(...args);\n\n        this.eventLogger.handleEvent(result);\n      });\n    }\n    else\n    {\n      result.postData = result.eventData;\n\n      //Finalize event right now\n      this.eventLogger.handleEvent(result);\n    }\n  }\n\n  captureEvent(...args)\n  {\n    return {};\n  }\n\n  capturePostEvent(...args)\n  {\n    return {};\n  }\n\n  applyUndo(e)\n  {\n\n  }\n\n  applyRedo(e)\n  {\n\n  }\n}\n\nexport default EventHandler;\n","import EventHandler from './EventHandler.js';\n\nclass UserCreateNodeEventHandler extends EventHandler\n{\n  constructor(eventLogger, graphController)\n  {\n    super(eventLogger, graphController, \"userPostCreateNode\");\n  }\n\n  //Override\n  captureEvent(graph, node)\n  {\n    return {\n      node: node,\n      nodeID: node.getGraphElementID(),\n      x: node.x,\n      y: node.y,\n      label: node.getNodeLabel(),\n      isCustom: node.hasCustomLabel()\n    };\n  }\n\n  //Override - this = event\n  applyUndo(e)\n  {\n    const graph = this.controller.getGraph();\n    const nodeIndex = graph.getNodeIndexByID(e.eventData.nodeID);\n    if (nodeIndex < 0) throw new Error(\"Unable to find target in graph\");\n    graph.nodes.splice(nodeIndex, 1);\n\n    graph.markDirty();\n  }\n\n  //Override - this = event\n  applyRedo(e)\n  {\n    const graph = this.controller.getGraph();\n    const nodeIndex = graph.getNodeIndexByID(e.postData.nodeID);\n    if (nodeIndex < 0)\n    {\n      const node = e.postData.node;\n      graph.nodes.push(node);\n\n      node.x = e.postData.x;\n      node.y = e.postData.y;\n      node.setNodeID(e.postData.nodeID);\n      if (e.postData.isCustom)\n      {\n        node.setCustomLabel(e.postData.label);\n      }\n      else\n      {\n        node.setNodeLabel(e.postData.label);\n      }\n    }\n\n    graph.markDirty();\n  }\n}\nexport default UserCreateNodeEventHandler;\n","import EventHandler from './EventHandler.js';\n\nclass UserToggleNodeEventHandler extends EventHandler\n{\n  constructor(eventLogger, graphController)\n  {\n    super(eventLogger, graphController, \"userToggleNode\");\n  }\n\n  //Override\n  captureEvent(graph, node, prevAccept)\n  {\n    return {\n      nodeID: node.getGraphElementID(),\n      prevAccept: prevAccept\n    };\n  }\n\n  //Override - this = event\n  applyUndo(e)\n  {\n    const graph = this.controller.getGraph();\n    const nodeIndex = graph.getNodeIndexByID(e.eventData.nodeID);\n    if (nodeIndex < 0) throw new Error(\"Unable to find target in graph\");\n    graph.nodes[nodeIndex].accept = e.eventData.prevAccept;\n\n    //graph.markDirty();\n  }\n\n  //Override - this = event\n  applyRedo(e)\n  {\n    const graph = this.controller.getGraph();\n    const nodeIndex = graph.getNodeIndexByID(e.eventData.nodeID);\n    if (nodeIndex < 0) throw new Error(\"Unable to find target in graph\");\n    graph.nodes[nodeIndex].accept = !e.eventData.prevAccept;\n\n    //graph.markDirty();\n  }\n}\nexport default UserToggleNodeEventHandler;\n","import EventHandler from './EventHandler.js';\n\nimport NodalGraph from 'graph/NodalGraph.js';\nimport NodalGraphParser from 'graph/NodalGraphParser.js';\n\nclass UserDeleteNodesEventHandler extends EventHandler\n{\n  constructor(eventLogger, graphController)\n  {\n    super(eventLogger, graphController, \"userPreDeleteNodes\", \"userPostDeleteNodes\");\n  }\n\n  //Override\n  captureEvent(graph, node, targetNodes, prevX, prevY)\n  {\n    const targets = [];\n    for(const target of targetNodes)\n    {\n      targets.push(target.getGraphElementID());\n    }\n    const dx = node.x - prevX;\n    const dy = node.y - prevY;\n\n    return {\n      graphData: NodalGraphParser.toJSON(graph),\n      targets: targets,\n      dx: dx,\n      dy: dy\n    };\n  }\n\n  //Override\n  capturePostEvent(graph, node, targetNodes, prevX, prevY)\n  {\n    return {\n      graphData: NodalGraphParser.toJSON(graph)\n    };\n  }\n\n  //Override - this = event\n  applyUndo(e)\n  {\n    const graph = this.controller.getGraph();\n    NodalGraphParser.parseJSON(e.eventData.graphData, this.controller.getGraph());\n    for(const targetID of e.eventData.targets)\n    {\n      const nodeIndex = graph.getNodeIndexByID(targetID);\n      if (nodeIndex < 0) throw new Error(\"Unable to find target in graph\");\n      graph.nodes[nodeIndex].x -= e.eventData.dx;\n      graph.nodes[nodeIndex].y -= e.eventData.dy;\n    }\n  }\n\n  //Override - this = event\n  applyRedo(e)\n  {\n    NodalGraphParser.parseJSON(e.postData.graphData, this.controller.getGraph());\n  }\n}\nexport default UserDeleteNodesEventHandler;\n","import EventHandler from './EventHandler.js';\n\nclass UserSwapNodesEventHandler extends EventHandler\n{\n  constructor(eventLogger, graphController)\n  {\n    super(eventLogger, graphController, \"userSwapNodes\");\n  }\n\n  //Override\n  captureEvent(graph, node, otherNode)\n  {\n    return {\n      nodeID: node.getGraphElementID(),\n      otherID: otherNode.getGraphElementID()\n    };\n  }\n\n  //Override - this = event\n  applyUndo(e)\n  {\n    const graph = this.controller.getGraph();\n    const nodeIndex = graph.getNodeIndexByID(e.eventData.nodeID);\n    if (nodeIndex < 0) throw new Error(\"Unable to find target in graph\");\n    const otherIndex = graph.getNodeIndexByID(e.eventData.otherID);\n    if (otherIndex < 0) throw new Error(\"Unable to find other target in graph\");\n\n    const node = graph.nodes[nodeIndex];\n    graph.nodes[nodeIndex] = graph.nodes[otherIndex];\n    graph.nodes[otherIndex] = node;\n\n    graph.markDirty();\n  }\n\n  //Override - this = event\n  applyRedo(e)\n  {\n    const graph = this.controller.getGraph();\n    const nodeIndex = graph.getNodeIndexByID(e.eventData.nodeID);\n    if (nodeIndex < 0) throw new Error(\"Unable to find target in graph\");\n    const otherIndex = graph.getNodeIndexByID(e.eventData.otherID);\n    if (otherIndex < 0) throw new Error(\"Unable to find other target in graph\");\n\n    const node = graph.nodes[nodeIndex];\n    graph.nodes[nodeIndex] = graph.nodes[otherIndex];\n    graph.nodes[otherIndex] = node;\n\n    graph.markDirty();\n  }\n}\nexport default UserSwapNodesEventHandler;\n","import EventHandler from './EventHandler.js';\n\nclass UserRenameNodeEventHandler extends EventHandler\n{\n  constructor(eventLogger, graphController)\n  {\n    super(eventLogger, graphController, \"userRenameNode\");\n  }\n\n  //Override\n  captureEvent(graph, node, nextLabel, prevLabel, isPrevCustom)\n  {\n    return {\n      node: node,\n      nodeID: node.getGraphElementID(),\n      nextLabel: nextLabel,\n      prevLabel: prevLabel,\n      prevCustom: isPrevCustom\n    };\n  }\n\n  //Override - this = event\n  applyUndo(e)\n  {\n    const graph = this.controller.getGraph();\n    const nodeIndex = graph.getNodeIndexByID(e.eventData.nodeID);\n    if (nodeIndex < 0) throw new Error(\"Unable to find target in graph\");\n    const node = graph.nodes[nodeIndex];\n    if (e.eventData.prevCustom)\n    {\n      node.setCustomLabel(e.eventData.prevLabel);\n    }\n    else\n    {\n      node.setNodeLabel(e.eventData.prevLabel);\n    }\n  }\n\n  //Override - this = event\n  applyRedo(e)\n  {\n    const graph = this.controller.getGraph();\n    const nodeIndex = graph.getNodeIndexByID(e.eventData.nodeID);\n    if (nodeIndex < 0) throw new Error(\"Unable to find target in graph\");\n    const node = graph.nodes[nodeIndex];\n    node.setCustomLabel(e.eventData.nextLabel);\n  }\n}\nexport default UserRenameNodeEventHandler;\n","import EventHandler from './EventHandler.js';\n\nclass UserCreateEdgeEventHandler extends EventHandler\n{\n  constructor(eventLogger, graphController)\n  {\n    super(eventLogger, graphController, \"userPostCreateEdge\");\n  }\n\n  //Override\n  captureEvent(graph, edge)\n  {\n    const edgeQuad = edge.getQuadratic();\n    return {\n      edge: edge,\n      edgeID: edge.getGraphElementID(),\n      fromID: edge.getSourceNode().getGraphElementID(),\n      toID: edge.getDestinationNode() ? edge.getDestinationNode().getGraphElementID() : null,\n      label: edge.getEdgeLabel(),\n      quad: { radians: edgeQuad.radians, length: edgeQuad.length }\n    };\n  }\n\n  //Override - this = event\n  applyUndo(e)\n  {\n    //TODO: when formatting edges change an edge different than this one, it does not revert them.\n    const graph = this.controller.getGraph();\n    const edgeIndex = graph.getEdgeIndexByID(e.eventData.edgeID);\n    if (edgeIndex < 0) throw new Error(\"Unable to find target in graph\");\n    graph.edges.splice(edgeIndex, 1);\n\n    graph.markDirty();\n  }\n\n  //Override - this = event\n  applyRedo(e)\n  {\n    const graph = this.controller.getGraph();\n    const edgeIndex = graph.getEdgeIndexByID(e.postData.edgeID);\n    if (edgeIndex < 0)\n    {\n      const edge = e.postData.edge;\n      graph.edges.push(edge);\n\n      const fromIndex = graph.getNodeIndexByID(e.postData.fromID);\n      if (fromIndex >= 0)\n      {\n        edge.setSourceNode(graph.nodes[fromIndex]);\n      }\n      else\n      {\n        throw new Error(\"Trying to create a sourceless edge\");\n      }\n\n      const toIndex = graph.getNodeIndexByID(e.postData.toID);\n      if (toIndex >= 0)\n      {\n        edge.setDestinationNode(graph.nodes[toIndex]);\n      }\n      else\n      {\n        edge.setDestinationNode(null);\n      }\n\n      edge.setEdgeLabel(e.postData.label);\n      edge.setQuadratic(e.postData.quad.radians, e.postData.quad.length);\n    }\n\n    graph.markDirty();\n  }\n}\nexport default UserCreateEdgeEventHandler;\n","import EventHandler from './EventHandler.js';\n\nclass UserDeleteEdgeEventHandler extends EventHandler\n{\n  constructor(eventLogger, graphController)\n  {\n    super(eventLogger, graphController, \"userPreDeleteEdge\");\n  }\n\n  //Override\n  captureEvent(graph, edge, prevTo, prevQuad)\n  {\n    return {\n      edge: edge,\n      edgeID: edge.getGraphElementID(),\n      fromID: edge.getSourceNode().getGraphElementID(),\n      toID: prevTo ? prevTo.getGraphElementID() : null,\n      quad: Object.assign({}, prevQuad)\n    };\n  }\n\n  //Override - this = event\n  applyUndo(e)\n  {\n    const graph = this.controller.getGraph();\n    const edgeIndex = graph.getEdgeIndexByID(e.eventData.edgeID);\n    if (edgeIndex < 0)\n    {\n      const edge = e.eventData.edge;\n      graph.edges.push(edge);\n\n      const fromIndex = graph.getNodeIndexByID(e.eventData.fromID);\n      if (fromIndex >= 0)\n      {\n        edge.setSourceNode(graph.nodes[fromIndex]);\n      }\n      else\n      {\n        throw new Error(\"Trying to create a sourceless edge\");\n      }\n\n      const toIndex = graph.getNodeIndexByID(e.eventData.toID);\n      if (toIndex >= 0)\n      {\n        edge.changeDestinationNode(graph.nodes[toIndex]);\n      }\n      else\n      {\n        edge.changeDestinationNode(null);\n      }\n\n      edge.setQuadratic(e.eventData.quad.radians, e.eventData.quad.length);\n    }\n\n    graph.markDirty();\n  }\n\n  //Override - this = event\n  applyRedo(e)\n  {\n    const graph = this.controller.getGraph();\n    const edgeIndex = graph.getEdgeIndexByID(e.postData.edgeID);\n    if (edgeIndex < 0) throw new Error(\"Unable to find target in graph\");\n    graph.edges.splice(edgeIndex, 1);\n\n    graph.markDirty();\n  }\n}\nexport default UserDeleteEdgeEventHandler;\n","import EventHandler from './EventHandler.js';\n\nimport NodalGraph from 'graph/NodalGraph.js';\nimport NodalGraphParser from 'graph/NodalGraphParser.js';\n\nclass UserImportGraphEventHandler extends EventHandler\n{\n  constructor(eventLogger, graphController, machineController)\n  {\n    super(eventLogger, graphController, \"userPreImportGraph\", \"userPostImportGraph\");\n\n    this.machineController = machineController;\n  }\n\n  //Override\n  captureEvent(graph)\n  {\n    return {\n      graphName: this.machineController.getMachineName(),\n      graphData: NodalGraphParser.toJSON(graph)\n    };\n  }\n\n  //Override\n  capturePostEvent(graph)\n  {\n    return {\n      graphName: this.machineController.getMachineName(),\n      graphData: NodalGraphParser.toJSON(graph)\n    };\n  }\n\n  //Override - this = event\n  applyUndo(e)\n  {\n    NodalGraphParser.parseJSON(e.eventData.graphData, this.controller.getGraph());\n\n    this.machineController.setMachineName(e.eventData.graphName);\n  }\n\n  //Override - this = event\n  applyRedo(e)\n  {\n    NodalGraphParser.parseJSON(e.postData.graphData, this.controller.getGraph());\n\n    this.machineController.setMachineName(e.postData.graphName);\n  }\n}\nexport default UserImportGraphEventHandler;\n","import EventHandler from './EventHandler.js';\n\nimport NodalGraph from 'graph/NodalGraph.js';\nimport NodalGraphParser from 'graph/NodalGraphParser.js';\n\nclass SafeGraphEventHandler extends EventHandler\n{\n  constructor(eventLogger, graphController, eventName, postEventName)\n  {\n    super(eventLogger, graphController, eventName, postEventName);\n  }\n\n  //Override\n  captureEvent(graph)\n  {\n    return {\n      graphData: NodalGraphParser.toJSON(graph)\n    };\n  }\n\n  //Override\n  capturePostEvent(graph)\n  {\n    return {\n      graphData: NodalGraphParser.toJSON(graph)\n    };\n  }\n\n  //Override - this = event\n  applyUndo(e)\n  {\n    NodalGraphParser.parseJSON(e.eventData.graphData, this.controller.getGraph());\n  }\n\n  //Override - this = event\n  applyRedo(e)\n  {\n    NodalGraphParser.parseJSON(e.postData.graphData, this.controller.getGraph());\n  }\n}\nexport default SafeGraphEventHandler;\n","import EventHandler from './EventHandler.js';\n\nclass UserChangeMachineEventHandler extends EventHandler\n{\n  constructor(eventLogger, machineController)\n  {\n    super(eventLogger, machineController, \"userChangeMachine\");\n  }\n\n  //Override\n  captureEvent(machineBuilder, nextMachineType, prevMachineType)\n  {\n    return {\n      prevType: prevMachineType,\n      nextType: nextMachineType\n    };\n  }\n\n  //Override - this = event\n  applyUndo(e)\n  {\n    this.controller.setMachineType(e.eventData.prevType);\n  }\n\n  //Override - this = event\n  applyRedo(e)\n  {\n    this.controller.setMachineType(e.postData.nextType);\n  }\n}\nexport default UserChangeMachineEventHandler;\n","import EventHandler from './EventHandler.js';\n\nimport NodalGraph from 'graph/NodalGraph.js';\nimport NodalGraphParser from 'graph/NodalGraphParser.js';\n\nclass UserConvertMachineEventHandler extends EventHandler\n{\n  constructor(eventLogger, machineController, graphController)\n  {\n    super(eventLogger, machineController, \"userPreConvertMachine\", \"userPostConvertMachine\");\n\n    this.graphController = graphController;\n  }\n\n  //Override\n  captureEvent(machineBuilder, nextMachineType, prevMachineType)\n  {\n    const graph = this.graphController.getGraph();\n\n    return {\n      graphData: NodalGraphParser.toJSON(graph),\n      prevType: prevMachineType\n    };\n  }\n\n  //Override\n  capturePostEvent(machineBuilder, nextMachineType, prevMachineType)\n  {\n    const graph = this.graphController.getGraph();\n\n    return {\n      graphData: NodalGraphParser.toJSON(graph),\n      nextType: nextMachineType\n    };\n  }\n\n  //Override - this = event\n  applyUndo(e)\n  {\n    NodalGraphParser.parseJSON(e.eventData.graphData, this.graphController.getGraph());\n    this.controller.setMachineType(e.eventData.prevType);\n  }\n\n  //Override - this = event\n  applyRedo(e)\n  {\n    NodalGraphParser.parseJSON(e.postData.graphData, this.graphController.getGraph());\n    this.controller.setMachineType(e.postData.nextType);\n  }\n}\nexport default UserConvertMachineEventHandler;\n","import EventHandler from './EventHandler.js';\n\nclass UserRenameMachineEventHandler extends EventHandler\n{\n  constructor(eventLogger, machineController)\n  {\n    super(eventLogger, machineController, \"userRenameMachine\");\n  }\n\n  //Override\n  captureEvent(machineBuilder, nextMachineName, prevMachineName)\n  {\n    return {\n      prevName: prevMachineName,\n      nextName: nextMachineName\n    };\n  }\n\n  //Override - this = event\n  applyUndo(e)\n  {\n    this.controller.setMachineName(e.eventData.prevName);\n  }\n\n  //Override - this = event\n  applyRedo(e)\n  {\n    this.controller.setMachineName(e.postData.nextName);\n  }\n}\nexport default UserRenameMachineEventHandler;\n","import EventHandler from './EventHandler.js';\n\nimport NodalGraph from 'graph/NodalGraph.js';\nimport NodalGraphParser from 'graph/NodalGraphParser.js';\n\nclass UserRenameSymbolEventHandler extends EventHandler\n{\n  constructor(eventLogger, machineController, graphController)\n  {\n    super(eventLogger, machineController, \"userPreRenameSymbol\", \"userPostRenameSymbol\");\n\n    this.graphController = graphController;\n  }\n\n  //Override\n  captureEvent(machineBuilder, symbol, prevSymbol)\n  {\n    const graph = this.graphController.getGraph();\n    return {\n      graphData: NodalGraphParser.toJSON(graph),\n      symbol: symbol,\n      prevSymbol: prevSymbol\n    };\n  }\n\n  //Override\n  capturePostEvent(machineBuilder, symbol, prevSymbol, targets)\n  {\n    const graph = this.graphController.getGraph();\n    const targetIDs = [];\n\n    for(const target of targets)\n    {\n      targetIDs.push(target.getGraphElementID());\n    }\n\n    return {\n      graphData: NodalGraphParser.toJSON(graph),\n      symbol: symbol,\n      prevSymbol: prevSymbol,\n      targets: targetIDs\n    };\n  }\n\n  //Override - this = event\n  applyUndo(e)\n  {\n    //TODO: restore machine custom alphabet\n    NodalGraphParser.parseJSON(e.eventData.graphData, this.graphController.getGraph());\n  }\n\n  //Override - this = event\n  applyRedo(e)\n  {\n    //TODO: restore machine custom alphabet\n    NodalGraphParser.parseJSON(e.postData.graphData, this.graphController.getGraph());\n  }\n}\nexport default UserRenameSymbolEventHandler;\n","import EventHandler from './EventHandler.js';\n\nimport NodalGraph from 'graph/NodalGraph.js';\nimport NodalGraphParser from 'graph/NodalGraphParser.js';\n\nclass UserDeleteSymbolEventHandler extends EventHandler\n{\n  constructor(eventLogger, machineController, graphController)\n  {\n    super(eventLogger, machineController, \"userPreDeleteSymbol\", \"userPostDeleteSymbol\");\n\n    this.graphController = graphController;\n  }\n\n  //Override\n  captureEvent(machineBuilder, symbol)\n  {\n    const graph = this.graphController.getGraph();\n    return {\n      graphData: NodalGraphParser.toJSON(graph),\n      symbol: symbol\n    };\n  }\n\n  //Override\n  capturePostEvent(machineBuilder, symbol, targets)\n  {\n    const graph = this.graphController.getGraph();\n    const targetIDs = [];\n\n    for(const target of targets)\n    {\n      targetIDs.push(target.getGraphElementID());\n    }\n\n    return {\n      graphData: NodalGraphParser.toJSON(graph),\n      symbol: symbol,\n      targets: targetIDs\n    };\n  }\n\n  //Override - this = event\n  applyUndo(e)\n  {\n    //TODO: restore machine custom alphabet\n    NodalGraphParser.parseJSON(e.eventData.graphData, this.graphController.getGraph());\n  }\n\n  //Override - this = event\n  applyRedo(e)\n  {\n    //TODO: restore machine custom alphabet\n    NodalGraphParser.parseJSON(e.postData.graphData, this.graphController.getGraph());\n  }\n}\nexport default UserDeleteSymbolEventHandler;\n","import EventLogger from 'events/EventLogger.js';\n\nimport GraphEdgeDestinationEvent from 'events/GraphEdgeDestinationEvent.js';\nimport GraphEdgeLabelEvent from 'events/GraphEdgeLabelEvent.js';\nimport GraphEdgeMoveEvent from 'events/GraphEdgeMoveEvent.js';\nimport GraphNodeInitialEvent from 'events/GraphNodeInitialEvent.js';\nimport GraphNodeMoveEvent from 'events/GraphNodeMoveEvent.js';\nimport GraphNodeMoveAllEvent from 'events/GraphNodeMoveAllEvent.js';\n\nimport UserCreateNodeEventHandler from 'controller/events/UserCreateNodeEventHandler.js';\nimport UserToggleNodeEventHandler from 'controller/events/UserToggleNodeEventHandler.js';\nimport UserDeleteNodesEventHandler from 'controller/events/UserDeleteNodesEventHandler.js';\nimport UserSwapNodesEventHandler from 'controller/events/UserSwapNodesEventHandler.js';\nimport UserRenameNodeEventHandler from 'controller/events/UserRenameNodeEventHandler.js';\n\nimport UserCreateEdgeEventHandler from 'controller/events/UserCreateEdgeEventHandler.js';\nimport UserDeleteEdgeEventHandler from 'controller/events/UserDeleteEdgeEventHandler.js';\nimport UserImportGraphEventHandler from 'controller/events/UserImportGraphEventHandler.js';\nimport SafeGraphEventHandler from 'controller/events/SafeGraphEventHandler.js';\n\nimport UserChangeMachineEventHandler from 'controller/events/UserChangeMachineEventHandler.js';\nimport UserConvertMachineEventHandler from 'controller/events/UserConvertMachineEventHandler.js';\nimport UserRenameMachineEventHandler from 'controller/events/UserRenameMachineEventHandler.js';\nimport UserRenameSymbolEventHandler from 'controller/events/UserRenameSymbolEventHandler.js';\nimport UserDeleteSymbolEventHandler from 'controller/events/UserDeleteSymbolEventHandler.js';\n\nclass EventManager\n{\n  constructor()\n  {\n    this.graphController = null;\n    this.machineController = null;\n\n    this.eventHandlers = [];\n\n    this.logger = new EventLogger();\n  }\n\n  initialize(app)\n  {\n    this.graphController = app.graphController;\n    this.machineController = app.machineController;\n\n    const graph = this.graphController.getGraph();\n    const events = this.logger;\n\n    this.graphController.on(\"nodeMove\", (targetNode, nextX, nextY, prevX, prevY) =>\n      events.handleEvent(new GraphNodeMoveEvent(graph, targetNode, nextX, nextY, prevX, prevY)));\n    this.graphController.on(\"nodeMoveAll\", (targetNodes, dx, dy) =>\n      events.handleEvent(new GraphNodeMoveAllEvent(graph, targetNodes, dx, dy)));\n    this.graphController.on(\"nodeInitial\", (nextInitial, prevInitial) =>\n      events.handleEvent(new GraphNodeInitialEvent(graph, nextInitial, prevInitial)));\n    this.graphController.on(\"edgeDestination\", (targetEdge, nextDestination, prevDestination, prevQuad) =>\n      events.handleEvent(new GraphEdgeDestinationEvent(graph, targetEdge, nextDestination, prevDestination, prevQuad)));\n    this.graphController.on(\"edgeMove\", (targetEdge, nextX, nextY, prevX, prevY) =>\n      events.handleEvent(new GraphEdgeMoveEvent(graph, targetEdge, nextX, nextY, prevX, prevY)));\n    this.graphController.on(\"edgeLabel\", (targetEdge, nextLabel, prevLabel) =>\n      events.handleEvent(new GraphEdgeLabelEvent(graph, targetEdge, nextLabel, prevLabel)));\n\n    this.eventHandlers.push(new UserCreateNodeEventHandler(events, this.graphController));\n    this.eventHandlers.push(new UserRenameNodeEventHandler(events, this.graphController));\n    this.eventHandlers.push(new UserSwapNodesEventHandler(events, this.graphController));\n    this.eventHandlers.push(new UserToggleNodeEventHandler(events, this.graphController));\n    this.eventHandlers.push(new UserDeleteNodesEventHandler(events, this.graphController));\n\n    this.eventHandlers.push(new UserCreateEdgeEventHandler(events, this.graphController));\n    this.eventHandlers.push(new UserDeleteEdgeEventHandler(events, this.graphController));\n\n    this.eventHandlers.push(new UserImportGraphEventHandler(events, this.graphController, this.machineController));\n    this.eventHandlers.push(new SafeGraphEventHandler(events, this.graphController, \"userPreChangeLayout\", \"userPostChangeLayout\"));\n\n    this.eventHandlers.push(new UserChangeMachineEventHandler(events, this.machineController));\n    this.eventHandlers.push(new UserConvertMachineEventHandler(events, this.machineController, this.graphController));\n    this.eventHandlers.push(new UserRenameMachineEventHandler(events, this.machineController));\n    this.eventHandlers.push(new UserRenameSymbolEventHandler(events, this.machineController, this.graphController));\n    this.eventHandlers.push(new UserDeleteSymbolEventHandler(events, this.machineController, this.graphController));\n  }\n\n  destroy()\n  {\n    for(const handler of this.eventHandlers)\n    {\n      handler.destroy();\n    }\n\n    //TODO: Remove all event listeners...\n    this.graphController.clearEventListeners();\n  }\n\n  getLogger()\n  {\n    return this.logger;\n  }\n}\n\nexport default EventManager;\n","import React from 'react';\nimport { hot } from 'react-hot-loader/root';\nimport './App.css';\n\nimport FSAModule from 'modules/fsa/FSAModule.js';\nimport TestingManager from 'modules/fsa/testing/TestingManager.js';\nimport MachineController from 'controller/MachineController.js';\nimport GraphController from 'controller/GraphController.js';\nimport InputController from 'controller/InputController.js';\n\nimport HotKeys from './HotKeys.js';\nimport LocalSave from 'system/localsave/LocalSave.js';\nimport * as FlapSaver from 'util/FlapSaver.js';\n\nimport Toolbar from './toolbar/Toolbar.js';\nimport Workspace from './workspace/Workspace.js';\nimport Drawer from './drawer/Drawer.js';\nimport Viewport from './viewport/Viewport.js';\nimport Tutorial from 'tutorial/Tutorial.js';\n\nimport Notification from 'system/notification/Notification.js';\nimport NotificationView from 'system/notification/components/NotificationView.js';\n\nimport EventManager from './EventManager.js';\n\nclass App extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    //Create references\n    this.container = null;\n    this.workspace = null;\n    this.viewport = null;\n    this.drawer = null;\n    this.toolbar = null;\n\n    this._module = new FSAModule();\n    this.testingManager = new TestingManager();\n\n    this.inputController = new InputController();\n    this.graphController = new GraphController();\n    this.machineController = new MachineController();\n\n    this.inputController.setModule(this._module);\n    this.graphController.setModule(this._module);\n    this.machineController.setModule(this._module);\n\n    this.eventManager = new EventManager();\n\n    this.hotKeys = new HotKeys();\n    this.tutorial = new Tutorial();\n\n    this.state = {\n      isOpen: true,\n      isDangerous: false,\n      isFullscreen: false,\n      isWaitingForFile: false\n    };\n\n    this.onDragOver = this.onDragOver.bind(this);\n    this.onDragEnter = this.onDragEnter.bind(this);\n    this.onDragLeave = this.onDragLeave.bind(this);\n    this.onFileDrop = this.onFileDrop.bind(this);\n\n    this._init = false;\n  }\n\n  componentDidMount()\n  {\n    //Initialize the module...\n    this._module.initialize(this);\n\n    //Initialize the controller to graph components\n    this.inputController.initialize(this);\n    this.graphController.initialize(this);\n    this.machineController.initialize(this);\n\n    //Notify on create in delete mode\n    const tryCreateWhileTrash = () => {\n      if (this.inputController.isTrashMode())\n      {\n        Notification.addMessage(I18N.toString(\"message.warning.cannotmodify\"), \"warning\", \"tryCreateWhileTrash\");\n      }\n    };\n    this.graphController.on(\"tryCreateWhileTrash\", tryCreateWhileTrash);\n\n    this.testingManager.initialize(this);\n    this.eventManager.initialize(this);\n    this.hotKeys.initialize(this);\n\n    //Upload drop zone\n    const workspaceDOM = this.workspace.ref;\n    workspaceDOM.addEventListener(\"drop\", this.onFileDrop);\n    workspaceDOM.addEventListener(\"dragover\", this.onDragOver);\n    workspaceDOM.addEventListener(\"dragenter\", this.onDragEnter);\n    workspaceDOM.addEventListener(\"dragleave\", this.onDragLeave);\n\n    //Begin tutorial\n    this.tutorial.start(this);\n\n    LocalSave.initialize();\n\n    LocalSave.registerHandler(this);\n    this.onLoadSave();\n\n    this._init = true;\n  }\n\n  componentWillUnmount()\n  {\n    LocalSave.unregisterHandler(this);\n\n    LocalSave.terminate();\n\n    this.hotKeys.destroy();\n    this.eventManager.destroy();\n\n    this.machineController.destroy();\n    this.graphController.destroy();\n    this.inputController.destroy();\n\n    this._module.destroy(this);\n\n    //Upload drop zone\n    const workspaceDOM = this.workspace.ref;\n    workspaceDOM.removeEventListener(\"drop\", this.onFileDrop);\n    workspaceDOM.removeEventListener(\"dragover\", this.onDragOver);\n    workspaceDOM.removeEventListener(\"dragenter\", this.onDragEnter);\n    workspaceDOM.removeEventListener(\"dragleave\", this.onDragLeave);\n\n    this._init = false;\n  }\n\n  onLoadSave()\n  {\n    const data = LocalSave.loadFromStorage(\"graph\");\n    if (data)\n    {\n      FlapSaver.loadFromJSON(data, this.graphController, this.machineController);\n    }\n  }\n\n  onAutoSave()\n  {\n    const data = FlapSaver.saveToJSON(this.graphController, this.machineController);\n    LocalSave.saveToStorage(\"graph\", data);\n  }\n\n  //Called to prevent default file open\n  onDragOver(ev)\n  {\n    ev.preventDefault();\n  }\n\n  onDragEnter(ev)\n  {\n    ev.preventDefault();\n\n    //Change state\n    this.setState({ isWaitingForFile: true });\n    this.viewport.setState((prev, props) => {\n      return {\n        prevMode: prev.mode,\n        mode: Viewport.DANGEROUS\n      };\n    });\n  }\n\n  onDragLeave(ev)\n  {\n    ev.preventDefault();\n\n    //Revert state\n    this.setState({ isWaitingForFile: false });\n    this.viewport.setState((prev, props) => {\n      return {\n        prevMode: prev.mode,\n        mode: prev.prevMode\n      };\n    });\n  }\n\n  onFileDrop(ev)\n  {\n    //Prevent file from being opened\n    ev.preventDefault();\n\n    //Revert state\n    this.setState({ isWaitingForFile: false });\n    this.viewport.setState((prev, props) => {\n      return {\n        prevMode: prev.mode,\n        mode: prev.prevMode\n      };\n    });\n\n    if (ev.dataTransfer.items)\n    {\n      const length = ev.dataTransfer.items.length;\n\n      //Just get the first one\n      if (length >= 1)\n      {\n        const file = ev.dataTransfer.items[0];\n        if (file.kind === 'file')\n        {\n          const data = file.getAsFile();\n          this.graphController.getUploader().uploadFileGraph(data);\n        }\n      }\n    }\n    else\n    {\n      const length = ev.dataTransfer.files.length;\n\n      //Just get the first one\n      if (length >= 1)\n      {\n        const data = ev.dataTransfer.files[0];\n        this.graphController.getUploader().uploadFileGraph(data);\n      }\n    }\n\n    if (ev.dataTransfer.items)\n    {\n      ev.dataTransfer.items.clear();\n    }\n    else\n    {\n      ev.dataTransfer.clearData();\n    }\n  }\n\n  openDrawer(full=null)\n  {\n    if (typeof full === 'boolean')\n    {\n      this.setState((prev, props) => {\n        return { isOpen: true, isFullscreen: full };\n      });\n    }\n    else\n    {\n      this.setState((prev, props) => {\n        return { isOpen: true };\n      });\n    }\n  }\n\n  closeDrawer()\n  {\n    this.setState((prev, props) => {\n      return { isOpen: false };\n    });\n  }\n\n  isDrawerOpen()\n  {\n    return this.state.isOpen;\n  }\n\n  shouldHideContent()\n  {\n    return this.state.isFullscreen && this.state.isOpen;\n  }\n\n  getCurrentModule()\n  {\n    return this._module;\n  }\n\n  render()\n  {\n    const inputController = this.inputController;\n    const graphController = this.graphController;\n    const machineController = this.machineController;\n\n    const tester = this.testingManager;\n    const screen = this.workspace ? this.workspace.ref : null;\n\n    if (this._init)\n    {\n      inputController.update();\n    }\n\n    return <div className=\"app-container\" ref={ref=>this.container=ref}>\n      <Toolbar ref={ref=>this.toolbar=ref}\n        eventManager={this.eventManager}\n        drawer={this.drawer}\n        graphController={graphController}\n        machineController={machineController}/>\n\n      <NotificationView notificationManager={Notification}/>\n\n      <div className=\"workspace-container\">\n        <div className={\"workspace-main\" +\n          (this.state.isOpen ? \" open\" : \"\")}\n          style={{\n            visibility: this.shouldHideContent() ? \"hidden\" : \"visible\",\n            opacity: this.state.isWaitingForFile ? \"0.1\" : \"1\"\n          }}>\n\n          <Workspace ref={ref=>this.workspace=ref}\n            tester={tester}\n            graphController={graphController}\n            inputController={inputController}\n            machineController={machineController}/>\n        </div>\n\n        <div className={\"workspace-viewport\" +\n          (this.state.isOpen ? \" open\" : \"\")}\n          style={{\n            visibility: this.shouldHideContent() ? \"hidden\" : \"visible\"\n          }}>\n\n          <Viewport ref={ref=>this.viewport=ref}\n            tester={tester}\n            screen={screen}\n            graphController={graphController}\n            inputController={inputController}\n            machineController={machineController}/>\n        </div>\n\n        <div className={\"workspace-drawer\" +\n          (this.state.isOpen ? \" open\" : \"\") +\n          (this.state.isFullscreen ? \" fullscreen\" : \"\")}>\n\n          <Drawer ref={ref=>this.drawer=ref}\n            app={this}\n            toolbar={this.toolbar}\n            graphController={graphController}\n            machineController={machineController}/>\n        </div>\n      </div>\n    </div>;\n  }\n}\n\n//For hotloading this class\nexport default hot(App);\n"],"sourceRoot":""}