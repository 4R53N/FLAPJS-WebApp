{"version":3,"sources":["webpack:///./src/app/config.js","webpack:///./src/app/icons/IconButton.js","webpack:///./src/app/machine/Symbols.js","webpack:///./src/app/system/notification/NotificationManager.js","webpack:///./src/app/system/notification/Notifications.js","webpack:///./src/app/system/localsave/LocalSave.js","webpack:///./src/app/system/localsave/LocalSaveManager.js","webpack:///./src/app/util/Downloader.js","webpack:///./src/app/modules/fsa/graph/FSAEdge.js","webpack:///./src/app/router.js","webpack:///./src/app/content/viewport/Viewport.js","webpack:///./src/app/util/MathHelper.js","webpack:///./src/app/graph/GraphNode.js","webpack:///./src/app/modules/abstract/exporter/AbstractGraphExporter.js","webpack:///./src/app/util/Eventable.js","webpack:///./src/app/machine/NFA.js","webpack:///./src/app/content/workspace/renderer/HighlightRenderer.js","webpack:///./src/app/content/HotKeys.js","webpack:///./src/app/content/toolbar/UploadButton.js","webpack:///./src/app/content/toolbar/HelpButton.js","webpack:///./src/app/content/toolbar/MachineName.js","webpack:///./src/app/icons/PageNewIcon.js","webpack:///./src/app/icons/HelpIcon.js","webpack:///./src/app/icons/LanguageIcon.js","webpack:///./src/app/icons/OfflineIcon.js","webpack:///./src/app/icons/BugReportIcon.js","webpack:///./src/app/content/drawer/DrawerExpander.js","webpack:///./src/app/content/drawer/Drawer.js","webpack:///./src/app/content/toolbar/Toolbar.js","webpack:///./src/app/content/workspace/Subtitle.js","webpack:///./src/app/content/workspace/Workspace.js","webpack:///./src/app/tutorial/Tutorial.js","webpack:///./src/app/content/App.js","webpack:///./src/app/modules/abstract/exporter/GraphImporter.js","webpack:///./src/app/icons/flat/PNGIcon.js","webpack:///./src/app/icons/flat/JPGIcon.js","webpack:///./src/app/icons/flat/SVGIcon.js","webpack:///./src/app/modules/abstract/exporter/GraphImageExporter.js","webpack:///./src/app/modules/abstract/panels/exporting/ExportingPanel.js","webpack:///./src/app/util/ColorHelper.js","webpack:///./src/app/system/styleopt/StyleOptionRegistry.js","webpack:///./src/app/system/styleopt/components/StyleInput.js","webpack:///./src/app/modules/abstract/panels/options/OptionGroup.js","webpack:///./src/app/modules/abstract/panels/options/OptionHotkey.js","webpack:///./src/app/modules/abstract/panels/options/OptionsPanel.js","webpack:///./src/app/modules/abstract/AbstractModule.js","webpack:///./src/app/modules/Modules.js","webpack:///./src/app/graph/GraphEdge.js","webpack:///./src/app/system/formattedinput/FormattedInput.js","webpack:///./src/app/icons/IconToggle.js","webpack:///./src/app/icons/DropDownIcon.js","webpack:///./src/app/modules/ModuleLoader.js","webpack:///./src/app/machine/FSA.js","webpack:///./src/app/icons/UploadIcon.js","webpack:///./src/app/icons/SaveIcon.js","webpack:///./src/app/graph/GraphElement.js","webpack:///./src/app/icons/UndoIcon.js","webpack:///./src/app/icons/RedoIcon.js","webpack:///./src/app/modules/fsa/panels/overview/infoblock/InfoBlock.js","webpack:///./src/app/icons/BoxAddIcon.js","webpack:///./src/app/icons/TriangleIcon.js","webpack:///./src/app/modules/fsa/panels/overview/stateslist/StateTag.js","webpack:///./src/app/modules/fsa/panels/overview/stateslist/StatesList.js","webpack:///./src/app/modules/fsa/panels/overview/alphabetlist/AlphabetTag.js","webpack:///./src/app/modules/fsa/panels/overview/alphabetlist/AlphabetList.js","webpack:///./src/app/modules/fsa/panels/overview/transitiontable/TransitionTable.js","webpack:///./src/app/modules/fsa/panels/overview/transitionfunction/TransitionFunction.js","webpack:///./src/app/modules/fsa/panels/overview/formaldefinition/FormalDefinition.js","webpack:///./src/app/modules/fsa/panels/overview/OverviewPanel.js","webpack:///./src/app/machine/util/solveNFA.js","webpack:///./src/app/machine/DFA.js","webpack:///./src/app/modules/fsa/testing/TestMode.js","webpack:///./src/app/modules/fsa/testing/TestingInputList.js","webpack:///./src/app/modules/fsa/testing/TestingManager.js","webpack:///./src/app/icons/AddIcon.js","webpack:///./src/app/icons/RemoveIcon.js","webpack:///./src/app/icons/SuccessIcon.js","webpack:///./src/app/icons/FailureIcon.js","webpack:///./src/app/icons/RunningManIcon.js","webpack:///./src/app/modules/fsa/panels/testing/StatusButton.js","webpack:///./src/app/modules/fsa/panels/testing/TestingInput.js","webpack:///./src/app/modules/fsa/panels/testing/components/UploadTestButton.js","webpack:///./src/app/icons/PageNewContentIcon.js","webpack:///./src/app/icons/CloseIcon.js","webpack:///./src/app/modules/fsa/panels/testing/TestingPanel.js","webpack:///./src/app/modules/fsa/panels/analysis/AnalysisPanel.js","webpack:///./src/app/modules/fsa/panels/about/AboutPanel.js","webpack:///./src/app/modules/fsa/controller/GraphPicker.js","webpack:///./src/app/modules/fsa/controller/inputhandler/InputHandler.js","webpack:///./src/app/modules/fsa/controller/inputhandler/GraphElementInputHandler.js","webpack:///./src/app/modules/fsa/controller/inputhandler/GraphNodeInputHandler.js","webpack:///./src/app/modules/fsa/controller/inputhandler/GraphEdgeInputHandler.js","webpack:///./src/app/modules/fsa/controller/inputhandler/GraphEndpointInputHandler.js","webpack:///./src/app/modules/fsa/controller/inputhandler/GraphInitialInputHandler.js","webpack:///./src/app/modules/fsa/controller/inputhandler/SelectionBoxInputHandler.js","webpack:///./src/app/modules/fsa/controller/inputhandler/GraphNodeCreateInputHandler.js","webpack:///./src/app/modules/fsa/controller/InputController.js","webpack:///./src/app/modules/fsa/graph/GraphLayout.js","webpack:///./src/app/modules/fsa/graph/FSANode.js","webpack:///./src/app/modules/fsa/graph/FSAGraph.js","webpack:///./src/app/modules/fsa/graph/FSAGraphLabeler.js","webpack:///./src/app/modules/fsa/controller/GraphController.js","webpack:///./src/app/modules/fsa/notifications/StateUnreachableWarningMessage.js","webpack:///./src/app/modules/fsa/notifications/TransitionErrorMessage.js","webpack:///./src/app/modules/fsa/notifications/StateMissingTransitionErrorMessage.js","webpack:///./src/app/modules/fsa/builder/FSAErrorChecker.js","webpack:///./src/app/modules/fsa/builder/FSABuilder.js","webpack:///./src/app/machine/util/convertNFA.js","webpack:///./src/app/modules/fsa/controller/MachineController.js","webpack:///./src/app/modules/fsa/renderer/NodeRenderer.js","webpack:///./src/app/modules/fsa/renderer/EdgeRenderer.js","webpack:///./src/app/modules/fsa/renderer/InitialMarkerRenderer.js","webpack:///./src/app/modules/fsa/renderer/FSAGraphRenderer.js","webpack:///./src/app/modules/fsa/renderer/FSAGraphOverlayRenderer.js","webpack:///./src/app/icons/PlayIcon.js","webpack:///./src/app/icons/PauseIcon.js","webpack:///./src/app/icons/StopIcon.js","webpack:///./src/app/modules/fsa/renderer/TestTray.js","webpack:///./src/app/modules/fsa/renderer/ViewportRenderer.js","webpack:///./src/app/modules/fsa/controller/events/EventHandler.js","webpack:///./src/app/modules/fsa/controller/events/GraphNodeInitialEventHandler.js","webpack:///./src/app/modules/fsa/controller/events/GraphNodeMoveEventHandler.js","webpack:///./src/app/modules/fsa/controller/events/GraphNodeMoveAllEventHandler.js","webpack:///./src/app/modules/fsa/controller/events/GraphEdgeMoveEventHandler.js","webpack:///./src/app/modules/fsa/controller/events/GraphEdgeDestinationEventHandler.js","webpack:///./src/app/modules/fsa/controller/events/GraphEdgeLabelEventHandler.js","webpack:///./src/app/modules/fsa/controller/events/UserCreateNodeEventHandler.js","webpack:///./src/app/modules/fsa/controller/events/UserToggleNodeEventHandler.js","webpack:///./src/app/modules/fsa/graph/FSAGraphParser.js","webpack:///./src/app/modules/fsa/controller/events/UserDeleteNodesEventHandler.js","webpack:///./src/app/modules/fsa/controller/events/UserRenameNodeEventHandler.js","webpack:///./src/app/modules/fsa/controller/events/UserCreateEdgeEventHandler.js","webpack:///./src/app/modules/fsa/controller/events/UserDeleteEdgeEventHandler.js","webpack:///./src/app/modules/fsa/controller/events/UserImportGraphEventHandler.js","webpack:///./src/app/modules/fsa/controller/events/SafeGraphEventHandler.js","webpack:///./src/app/modules/fsa/controller/events/UserChangeMachineEventHandler.js","webpack:///./src/app/modules/fsa/controller/events/UserConvertMachineEventHandler.js","webpack:///./src/app/modules/fsa/controller/events/UserRenameMachineEventHandler.js","webpack:///./src/app/modules/fsa/controller/events/UserRenameSymbolEventHandler.js","webpack:///./src/app/modules/fsa/controller/events/UserDeleteSymbolEventHandler.js","webpack:///./src/app/modules/fsa/EventManager.js","webpack:///./src/app/modules/fsa/editor/LabelEditor.js","webpack:///./src/app/experimental/panels/test/TapeContext.js","webpack:///./src/app/experimental/panels/test/StringTester.js","webpack:///./src/app/modules/fsa/exporter/FSAGraphExporter.js","webpack:///./src/app/modules/fsa/exporter/JFLAPGraphExporter.js","webpack:///./src/app/modules/fsa/FSAModule.js","webpack:///./src/app/icons/flat/XMLIcon.js","webpack:///./src/app/graph/QuadraticEdge.js","webpack:///./src/app/graph/NodalGraph.js","webpack:///./src/app/modules/abstract/AbstractModuleGraphController.js","webpack:///./src/app/graph/AbstractGraphLabeler.js","webpack:///./src/app/modules/abstract/AbstractModuleMachineController.js","webpack:///./src/app/modules/abstract/AbstractMachineBuilder.js","webpack:///./src/app/content/workspace/renderer/SelectionBoxRenderer.js","webpack:///./src/app/content/viewport/TrashCan.js","webpack:///./src/app/icons/flat/JSONIcon.js","webpack:///./src/app/icons/CreateIcon.js","webpack:///./src/app/icons/MoveIcon.js","webpack:///./src/app/content/viewport/CursorMode.js","webpack:///./src/app/system/inputadapter/AbstractInputHandler.js","webpack:///./src/app/modules/abstract/ViewportInputHandler.js","webpack:///./src/app/modules/abstract/AbstractModuleInputController.js","webpack:///./src/app/modules/fsa/notifications/NFAToDFAConversionWarningMessage.js","webpack:///./src/app/system/undomanager/UndoManager.js","webpack:///./src/app/system/inputadapter/InputPointer.js","webpack:///./src/app/system/inputadapter/ViewportAdapter.js","webpack:///./src/app/system/inputadapter/InputAdapter.js","webpack:///./src/app/system/notification/components/NotificationMessage.js","webpack:///./src/app/system/notification/components/NotificationView.js","webpack:///./src/app/changelog.js","webpack:///./src/app/landing/components/Logo.js","webpack:///./src/app/landing/components/Quote.js","webpack:///./src/app/landing/components/LandingPage.js","webpack:///./src/app/index.js"],"names":["__webpack_require__","d","__webpack_exports__","loadConfig","saveConfig","LOCAL_STORAGE_ID","cfg","jsonString","localStorage","getItem","console","log","jsonData","JSON","parse","clearConfig","Object","assign","e","arguments","length","undefined","_userDefined","_dirty","stringify","setItem","removeItem","_resetOnLoad","setValue","key","value","this","hasOwnProperty","Error","bind","MACHINE_ERRORS_MESSAGE_TAG","MACHINE_CONVERSION_MESSAGE_TAG","ERROR_CHECK_INTERVAL","GRAPH_IMMEDIATE_INTERVAL","SMOOTH_OFFSET_DAMPING","SCROLL_SENSITIVITY","MIN_SCALE","MAX_SCALE","INIT_WAITTIME","STR_TRANSITION_DEFAULT_LABEL","STR_STATE_LABEL","PARALLEL_EDGE_HEIGHT","SELF_LOOP_HEIGHT","SUBMIT_KEY","CLEAR_KEY","TAB_KEY","UP_KEY","DOWN_KEY","DELETE_KEY","DELETE_FORWARD_KEY","DEFAULT_GRAPH_SIZE","NODE_RADIUS","NODE_RADIUS_SQU","NODE_DIAMETER","NODE_RADIUS_INNER","INITIAL_MARKER_OFFSET_X","EDGE_RADIUS","EDGE_RADIUS_SQU","ARROW_WIDTH","PLACEHOLDER_LENGTH","ENDPOINT_RADIUS","ENDPOINT_RADIUS_SQU","HOVER_RADIUS_OFFSET","CURSOR_RADIUS","CURSOR_RADIUS_SQU","DOUBLE_TAP_TICKS","LONG_TAP_TICKS","SPAWN_RADIUS","DEFAULT_SHOULD_DESTROY_POINTLESS_EDGE","DRAGGING_BUFFER","DRAGGING_BUFFER_SQU","PADDING_RADIUS_SQU","IconButton","props","_classCallCheck","_possibleConstructorReturn","_getPrototypeOf","call","React","Component","react__WEBPACK_IMPORTED_MODULE_0___default","a","createElement","className","id","title","style","disabled","onClick","children","EMPTY","ARROW","EMPTY_SET","Message","handler","type","tags","componentClass","componentProps","_handler","_id","guid","_type","messages","getMessages","index","indexOf","splice","tag","INSTANCE","NotificationManager","_messageQueue","shouldReplaceRelated","clearMessages","result","unshift","addMessage","message","Array","isArray","i","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Symbol","iterator","next","done","hasTag","err","return","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","LocalSaveManager","_handlers","Set","_intervalID","_intervalMillis","_init","onIntervalUpdate","millis","has","onLoadSave","add","onUnloadSave","delete","doesSupportLocalStorage","setInterval","clearInterval","clear","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","onAutoSave","error","saveKey","stringData","hidden","document","msHidden","webkitHidden","_typeof","flag","Storage","FILE_TYPE_PNG","FILE_TYPE_JPG","FILE_TYPE_SVG","downloadText","downloadImageFromSVG","filename","textData","downloadURL","encodeURIComponent","filetype","svg","width","height","blob","svgString","XMLSerializer","serializeToString","Blob","createBlobFromSVG","url","URL","createObjectURL","canvas","ctx","getContext","pixelRatio","window","devicePixelRatio","setTransform","image","Image","onload","drawImage","revokeObjectURL","imageURI","toDataURL","replace","src","reader","FileReader","readAsDataURL","element","headerIndex","substring","setAttribute","display","body","appendChild","click","removeChild","SYMBOL_SEPARATOR","EMPTY_CHAR","FSAEdge","from","to","QuadraticEdge","label","_get","prototype","getEdgeLabel","split","ROUTER","_componentClass","_componentProps","routeTo","getCurrentPage","getCurrentPageProps","Viewport","_this","ref","labelEditor","state","prevMode","NORMAL","mode","_this2","currentModule","ViewportRenderer","getInputController","getGraphController","getMachineController","getRenderer","_extends","parent","WAITING","TESTING","DANGEROUS","s4","Math","floor","random","toString","stringHash","hash","len","imul","charCodeAt","GraphNode","x","y","_label","GraphElement","usePosition","AbstractGraphExporter","data","module","getFileType","fileBlob","getLabel","toUpperCase","Eventable","__eventListeners","mixin","targetClass","targetPrototype","registerEvent","eventName","Map","set","unregisterEvent","addEventListener","listener","get","push","removeEventListener","listeners","clearEventListeners","countEventListeners","getEventListeners","on","once","f","_len","args","_key","apply","emit","_len2","_key2","onEventProcessed","concat","NFA","FSA","_transitions","symbol","includes","transition","transitions","getOutgoingTransitions","dst","_iteratorNormalCompletion4","_didIteratorError4","_iteratorError4","_step4","_iterator4","states","doClosureTransition","_iteratorNormalCompletion5","_didIteratorError5","_iteratorError5","_step5","_iterator5","s","ps","nfaStates","getStates","j","HIGHLIGHT_LINE_ARRAY","HighlightRenderer","target","r","Config","center","getCenterPoint","endpoint","getEndPoint","cx","cy","strokeDashoffset","offset","strokeDasharray","strokeWidth","fill","HotKeys","app","workspace","toolbar","undoManager","graphController","machineController","onKeyDown","getUndoManager","event","which","metaKey","ctrlKey","exporter","getCurrentModule","getDefaultGraphExporter","machineName","getMachineName","exportToFile","preventDefault","stopPropagation","shiftKey","redo","undo","imageExporters","getImageExporters","imageExporter","getModuleName","UploadButton","UploadButton_classCallCheck","onUploadFileChange","_assertThisInitialized","files","getGraphImporter","importFile","catch","Notifications","addErrorMessage","inputID","react_default","name","onChange","accept","getImportFileTypes","join","htmlFor","HelpButton","HelpButton_classCallCheck","HelpButton_getPrototypeOf","HelpButton_assertThisInitialized","hasMessages","I18N","open","MachineName","MachineName_classCallCheck","MachineName_getPrototypeOf","MachineName_assertThisInitialized","onFocus","onBlur","setState","blur","onSubmit","PageNewIcon","PageNewIcon_classCallCheck","PageNewIcon_possibleConstructorReturn","PageNewIcon_getPrototypeOf","xmlns","viewBox","HelpIcon","HelpIcon_classCallCheck","HelpIcon_possibleConstructorReturn","HelpIcon_getPrototypeOf","LanguageIcon","LanguageIcon_classCallCheck","LanguageIcon_possibleConstructorReturn","LanguageIcon_getPrototypeOf","OfflineIcon","OfflineIcon_classCallCheck","OfflineIcon_possibleConstructorReturn","OfflineIcon_getPrototypeOf","BugReportIcon","BugReportIcon_classCallCheck","BugReportIcon_possibleConstructorReturn","BugReportIcon_getPrototypeOf","DrawerExpander","DrawerExpander_classCallCheck","DrawerExpander_getPrototypeOf","DrawerExpander_assertThisInitialized","isFullscreen","isOpen","closeDrawer","openDrawer","DEFAULT_TAB_INDEX","MAX_PANEL_THRESHOLD","MIN_PANEL_SIZE","Drawer","Drawer_classCallCheck","Drawer_getPrototypeOf","tabIndex","dragging","onTouchStart","Drawer_assertThisInitialized","onMouseDown","onScroll","_ontouchmove","_ontouchend","prev","updatePanelSize","touch","changedTouches","onStartDraggingDrawerBorder","clientX","clientY","ev","onStopDraggingDrawerBorder","onMouseMove","onMouseUp","_this3","InfoPanel","getModulePanels","onWheel","map","PanelClass","panelID","DEFAULT_PANELS","content_drawer_DrawerExpander","UNLOCALIZED_NAME","setTab","container","size","matchMedia","matches","viewport","getBoundingClientRect","offsetHeight","offsetWidth","setProperty","EXPORTING_PANEL_TAB_INDEX","OPTIONS_PANEL_TAB_INDEX","Toolbar","Toolbar_classCallCheck","Toolbar_getPrototypeOf","langOn","onMachineNameChange","Toolbar_assertThisInitialized","onMachineNameKeyDown","langOnClick","renameMachine","drawer","graph","getGraph","offline","navigator","onLine","toolbar_MachineName","serviceWorker","getRegistration","alert","icons_OfflineIcon","getLocalizedModuleName","confirm","setMachineName","icons_PageNewIcon","toolbar_UploadButton","UploadIcon","canUndo","UndoIcon","canRedo","RedoIcon","isEmpty","SaveIcon","icons_BugReportIcon","toolbar_HelpButton","icons_HelpIcon","activeElement","icons_LanguageIcon","maxWidth","fetchLanguageFile","Subtitle","Subtitle_classCallCheck","Subtitle_possibleConstructorReturn","Subtitle_getPrototypeOf","active","messageTimer","setTimeout","visible","textAnchor","Workspace","Workspace_classCallCheck","Workspace_possibleConstructorReturn","Workspace_getPrototypeOf","inputController","getInputAdapter","getViewport","offsetX","getOffsetX","offsetY","getOffsetY","bounds","getBoundingRect","dx","minX","dy","minY","w","EXPORT_PADDING_X","h","EXPORT_PADDING_Y","clone","cloneNode","uiElements","getElementsByClassName","remove","GraphRenderer","GraphOverlayRenderer","max","Number","MIN_VALUE","getScale","halfSize","content_workspace_Subtitle","transform","x1","y1","x2","y2","stroke","Tutorial","Tutorial_classCallCheck","LocalSave","getStringFromStorage","App","App_classCallCheck","App_getPrototypeOf","inputAdapter","InputAdapter","setMinScale","setMaxScale","setOffsetDamping","UndoManager","ModuleClass","moduleClass","Module","_module","App_assertThisInitialized","hotKeys","tutorial","isDangerous","isWaitingForFile","onDragOver","onDragEnter","onDragLeave","onFileDrop","workspaceDOM","initialize","start","registerHandler","unregisterHandler","destroy","moduleName","loadFromStorage","importFromData","exportToData","saveToStorage","dataTransfer","items","file","kind","getAsFile","clearData","full","screen","update","animation","ModuleLoader","isModuleLoading","content_toolbar_Toolbar","NotificationView","notificationManager","visibility","shouldHideContent","opacity","content_workspace_Workspace","content_drawer_Drawer","hot","GraphImporter","File","Promise","reject","fileName","exporters","getGraphExporters","_loop","canImport","doesSupportFile","endsWith","importFromFile","_loop2","doesSupportData","PNGIcon","PNGIcon_classCallCheck","points","JPGIcon","JPGIcon_classCallCheck","JPGIcon_possibleConstructorReturn","JPGIcon_getPrototypeOf","SVGIcon","SVGIcon_classCallCheck","SVGIcon_possibleConstructorReturn","SVGIcon_getPrototypeOf","GraphImageExporter","imageType","GraphImageExporter_classCallCheck","GraphImageExporter_possibleConstructorReturn","GraphImageExporter_getPrototypeOf","_imageType","_workspace","workspaceDim","baseVal","getSVGForExport","ExportingPanel","ExportingPanel_classCallCheck","ExportingPanel_possibleConstructorReturn","ExportingPanel_getPrototypeOf","getTitle","getIconClass","graphExporters","renderExporterButton","defineProperty","RGB_WHITE","RGB_BLACK","blendRGB","percent","rgb1","rgb2","blendAmount","abs","round","invertRGB","rgb","blackwhite","HEXtoRGB","hex","slice","red","green","blue","parseInt","RGBtoHEX","StyleOption","elementSource","propName","inputType","groupName","callback","StyleOptionRegistry_classCallCheck","prop","group","_callback","_value","_defaultValue","computedStyle","shouldPropagateChange","getComputedStyle","newValue","getPropertyValue","trim","setStyle","val","StyleOptionRegistry","_options","_groups","changeCallback","option","computedStyles","values","updateStyle","StyleInput","StyleInput_classCallCheck","StyleInput_getPrototypeOf","StyleInput_assertThisInitialized","getStyle","OptionGroup","OptionGroup_classCallCheck","OptionGroup_possibleConstructorReturn","OptionGroup_getPrototypeOf","dropdown","createRef","IconToggle","defaultValue","pointerEvents","DropDownIcon","OptionHotkey","OptionHotkey_classCallCheck","OptionHotkey_possibleConstructorReturn","OptionHotkey_getPrototypeOf","keyName","OptionsPanel","OptionsPanel_classCallCheck","OptionsPanel_getPrototypeOf","styleOpts","theme","customTheme","skipWelcome","disableExitWarning","onChangeTheme","OptionsPanel_assertThisInitialized","onChangeModule","root","getElementById","opts","invertFunc","opt","color","ColorHelper","getOptionByProp","darkFunc","inverted","registerStyleOption","terminate","getOptions","isDefaultStyle","prevTheme","resetStyle","loadModule","panels_options_OptionGroup","panels_options_OptionHotkey","marginTop","checked","setStringToStorage","getPropsByGroup","components_StyleInput","keys","Modules","mod","version","prompt","DEFAULT_GRAPH_EXPORTERS","DEFAULT_IMAGE_EXPORTERS","AbstractModule","AbstractModule_classCallCheck","_importer","renderLayer","fetch","all","then","_ref","_","default","resolve","_ref2","_ref3","GraphEdge","_from","_to","node","HALFPI","PI","isPlaceholder","atan2","halfPlaceholderLength","getPlaceholderLength","placeholderLength","getNodeSize","getHashString","FormattedInput","ignoreSaveOnExit","prevValue","onKeyUp","nextProps","hasFocus","select","focus","filter","captureOnExit","formatValue","resetValue","multiline","_this4","separator","selectionStart","selectionEnd","formatter","_this5","rows","MODULE_TIMEOUT","IS_DEFAULT_MODULE","_timeout","moduleID","moduleInfo","clearTimeout","Router","_states","_finalStates","_customAlphabet","fsa","final","oldState","newState","fromState","toState","_iteratorNormalCompletion6","_didIteratorError6","_iteratorError6","_step6","_iterator6","getStartState","isFinal","_iteratorNormalCompletion7","_didIteratorError7","_iteratorError7","_step7","_iterator7","_iteratorNormalCompletion8","_didIteratorError8","_iteratorError8","_step8","_iterator8","isUsedAlphabet","isAlphabet","_iteratorNormalCompletion9","_didIteratorError9","_iteratorError9","_step9","_iterator9","_iteratorNormalCompletion10","_didIteratorError10","_iteratorError10","_step10","_iterator10","_iteratorNormalCompletion11","_didIteratorError11","_iteratorError11","_step11","_iterator11","getUsedAlphabet","_iteratorNormalCompletion12","_didIteratorError12","_iteratorError12","_step12","_iterator12","alphabet","getAlphabet","foundSymbols","_iteratorNormalCompletion13","_didIteratorError13","_iteratorError13","_step13","_iterator13","_iteratorNormalCompletion14","_didIteratorError14","_iteratorError14","_step14","_iterator14","DFA","usedAlphabet","startState","finalStates","graphElementID","InfoBlock","BoxAddIcon","BoxAddIcon_classCallCheck","BoxAddIcon_possibleConstructorReturn","BoxAddIcon_getPrototypeOf","TriangleIcon","TriangleIcon_classCallCheck","TriangleIcon_possibleConstructorReturn","TriangleIcon_getPrototypeOf","StateTag","StateTag_classCallCheck","StateTag_getPrototypeOf","onValueChange","StateTag_assertThisInitialized","newLabel","getNodesByLabel","renameNode","deleteTargetNode","keyCode","nodes","isCustom","getNodeCustom","spellCheck","StatesList","StatesList_classCallCheck","StatesList_getPrototypeOf","onStateCreate","StatesList_assertThisInitialized","createNode","overview_infoblock_InfoBlock","icons_TriangleIcon","getNodes","overview_stateslist_StateTag","getGraphElementID","getNodeLabel","getNodeAccept","focusOnNode","icons_BoxAddIcon","AlphabetTag","AlphabetTag_classCallCheck","AlphabetTag_getPrototypeOf","AlphabetTag_assertThisInitialized","newSymbol","oldSymbol","renameSymbol","createSymbol","deleteSymbol","maxLength","AlphabetList","AlphabetList_classCallCheck","AlphabetList_getPrototypeOf","editingTag","editing","onSymbolCreate","AlphabetList_assertThisInitialized","onStopEditing","overview_alphabetlist_AlphabetTag","SRC","SYMBOL","DST","SYMBOL_AXIS","getDestinationFromSourceAndSymbol","machine","isSet","doTransition","TransitionTable","TransitionTable_classCallCheck","TransitionTable_possibleConstructorReturn","TransitionTable_getPrototypeOf","rowAxis","getMachineBuilder","getMachine","rowAxisType","getTransitions","isNFAMachine","getMachineType","hasEmptyColumn","scope","startsWith","getSymbolFromSourceAndDestination","TransitionFunction","TransitionFunction_classCallCheck","TransitionFunction_possibleConstructorReturn","TransitionFunction_getPrototypeOf","sort","isNFA","emptrans","empclassName","trans","FormalDefinition","FormalDefinition_classCallCheck","FormalDefinition_possibleConstructorReturn","FormalDefinition_getPrototypeOf","getFinalStates","DELTA","OverviewPanel","OverviewPanel_classCallCheck","OverviewPanel_getPrototypeOf","viewFormal","onChangeMachineType","OverviewPanel_assertThisInitialized","onAutoLayout","onChangeAutoRename","onSubmitAutoStatePrefix","onAutoStateFormat","switchDefinition","applyAutoLayout","changeMachineTo","setAutoRenameNodes","graphLabeler","getGraphLabeler","getDefaultNodeLabelPrefix","setDefaultNodeLabelPrefix","applyAutoRename","overview_formaldefinition_FormalDefinition","overview_stateslist_StatesList","overview_alphabetlist_AlphabetList","overview_transitionfunction_TransitionFunction","overview_transitiontable_TransitionTable","paddingBottom","marginBottom","flexDirection","background","outline","border","padding","margin","appearance","shouldAutoRenameNodes","solveNFAbyStep","nfa","cachedStates","cachedSymbols","checkedStates","nextStates","nextIndex","cstate","doTerminalTransition","nextState","isFinalState","DFA_classCallCheck","DFA_possibleConstructorReturn","DFA_getPrototypeOf","isValidDFA","TestMode","testingManager","TestMode_classCallCheck","targets","history","indexofString","running","started","skipToEnd","timer","onNodeDestroy","prepareForNewTest","hasNextStep","inputList","resetTests","step","onNextStep","onPause","hasPrevInput","previous","pop","prevInput","getCurrentInput","hasNextInput","testInput","setResult","nextInput","currentStep","getCurrentCache","nextChar","getFirstGraphNodeByLabel","skipFunc","curr_state","TestingInputList","TestingInputList_classCallCheck","addInput","inputIndex","input","currState","counter","solveNFA","testInputs","abort","readAsText","first","dirty","markDirty","TestingManager","TestingManager_classCallCheck","shouldCheckError","isImmediateErrorCheck","errorCheckMode","NO_ERROR_CHECK","stepByStepMode","testMode","setMachineType","DELAYED_ERROR_CHECK","IMMEDIATE_ERROR_CHECK","isStarted","onStop","onStart","AddIcon","AddIcon_classCallCheck","AddIcon_possibleConstructorReturn","AddIcon_getPrototypeOf","RemoveIcon","RemoveIcon_classCallCheck","RemoveIcon_possibleConstructorReturn","RemoveIcon_getPrototypeOf","SuccessIcon","SuccessIcon_classCallCheck","SuccessIcon_possibleConstructorReturn","SuccessIcon_getPrototypeOf","FailureIcon","FailureIcon_classCallCheck","FailureIcon_possibleConstructorReturn","FailureIcon_getPrototypeOf","RunningManIcon","RunningManIcon_classCallCheck","RunningManIcon_possibleConstructorReturn","RunningManIcon_getPrototypeOf","StatusButton","StatusButton_classCallCheck","StatusButton_possibleConstructorReturn","StatusButton_getPrototypeOf","icons_SuccessIcon","icons_FailureIcon","icons_RunningManIcon","TestingInput","TestingInput_classCallCheck","TestingInput_getPrototypeOf","onStatusClick","TestingInput_assertThisInitialized","onSubmitClick","testList","getInputByIndex","testByIndex","machineBuilder","isInputFirst","getInput","newTest","removeInputByIndex","getTests","shouldTestOnly","getCurrentInputIndex","panels_testing_StatusButton","placeholder","icons_AddIcon","icons_RemoveIcon","UploadTestButton","UploadTestButton_classCallCheck","UploadTestButton_possibleConstructorReturn","UploadTestButton_getPrototypeOf","uploadInput","PageNewContentIcon","PageNewContentIcon_classCallCheck","PageNewContentIcon_possibleConstructorReturn","PageNewContentIcon_getPrototypeOf","CloseIcon","CloseIcon_classCallCheck","CloseIcon_possibleConstructorReturn","CloseIcon_getPrototypeOf","TestingPanel","TestingPanel_classCallCheck","TestingPanel_getPrototypeOf","getTestingManager","getErrorCheckMode","noTestMode","_savedGraphHash","_ticksSinceHash","stepByStepModeChecked","onChangeErrorCheckMode","TestingPanel_assertThisInitialized","onGraphChange","onTestsRunAll","onTestsClear","onTestsSave","onTestsNew","onTestsUpload","getHashCode","g","importTests","innerHTML","tester","setErrorCheckMode","setStepByStepMode","clearTests","clearTestName","hideTestInputList","getTestsAsStrings","showTestInputList","isTestInvalid","isMachineValid","graphHash","icons_PageNewContentIcon","components_UploadTestButton","icons_CloseIcon","panels_testing_TestingInput","AnalysisPanel","AnalysisPanel_classCallCheck","AnalysisPanel_getPrototypeOf","optimizeUnreachOption","optimizeRedundOption","onConvertToDFA","AnalysisPanel_assertThisInitialized","onConvertToNFA","onOptimizeMachine","unreachableArray","getUnreachableNodes","deleteTargetNodes","messageTag","NFAToDFAConversionWarningMessage","convertMachineTo","onDeleteAllUnreachable","machineType","canOptimize","AboutPanel","AboutPanel_classCallCheck","AboutPanel_possibleConstructorReturn","AboutPanel_getPrototypeOf","GraphPicker","GraphPicker_classCallCheck","selectionBox","fromX","fromY","toX","toY","targetType","initialTarget","initialTargetType","getNodeByInitialMarkerAt","getEdgeByEndPointAt","getNodeAt","getEdgeAt","nodeSize","startNode","getStartNode","getEdges","edge","end","box","mx","my","lx","min","ly","clearSelection","getNodesWithin","getSelection","InputHandler","pointer","GraphElementInputHandler","GraphElementInputHandler_classCallCheck","GraphElementInputHandler_possibleConstructorReturn","GraphElementInputHandler_getPrototypeOf","_targetType","GraphNodeInputHandler","GraphNodeInputHandler_classCallCheck","GraphNodeInputHandler_possibleConstructorReturn","GraphNodeInputHandler_getPrototypeOf","picker","getPicker","isTrashMode","prevX","prevY","hasSelection","deleteSelectedNodes","isMoveMode","toggleNode","createEdge","setEdgeLabel","getDefaultEdgeLabel","setInitialTarget","isNewEdge","edgeQuad","getQuadratic","prevQuad","radians","prevEdgeTo","_snapToGrid","snapSize","_snapSize","moveMultipleNodesTo","moveNodeTo","GraphEdgeInputHandler","GraphEdgeInputHandler_classCallCheck","GraphEdgeInputHandler_possibleConstructorReturn","GraphEdgeInputHandler_getPrototypeOf","deleteTargetEdge","openLabelEditor","targetQuad","moveEdgeTo","GraphEndpointInputHandler","GraphEndpointInputHandler_classCallCheck","GraphEndpointInputHandler_possibleConstructorReturn","GraphEndpointInputHandler_getPrototypeOf","getDestinationNode","moveEndpointTo","formatEdge","deleteEdge","shouldDestroyPointlessEdges","changeDestinationNode","GraphInitialInputHandler","GraphInitialInputHandler_classCallCheck","GraphInitialInputHandler_possibleConstructorReturn","GraphInitialInputHandler_getPrototypeOf","ghostInitialMarker","prevInitial","setStartNode","SelectionBoxInputHandler","SelectionBoxInputHandler_classCallCheck","SelectionBoxInputHandler_possibleConstructorReturn","SelectionBoxInputHandler_getPrototypeOf","_picker","beginSelection","isSelecting","updateSelection","endSelection","GraphNodeCreateInputHandler","GraphNodeCreateInputHandler_classCallCheck","GraphNodeCreateInputHandler_possibleConstructorReturn","GraphNodeCreateInputHandler_getPrototypeOf","InputController","InputController_classCallCheck","InputController_possibleConstructorReturn","InputController_getPrototypeOf","_graphController","prevPointerX","prevPointerY","_swapMouseScheme","_trashMode","_disabled","_inputHandlers","AbstractModuleInputController","_inputAdapter","getPointerX","getPointerY","updateTarget","hasTarget","cursor","isTargetInSelection","getStepByStepMode","isTargetable","onAction","onDblAction","onDragStart","onDragMove","onDragStop","clearTarget","enabled","shouldInputFirst","isAltInput","isDragging","isPointerActive","GraphLayout","reachableNode","reachable","getReachableState","unreachableNode","numOfReachable","numOfUnreachable","numOfNode","maxNum","radius","degree","sin","cos","degree_re","degree_un","FSANode","FSANode_classCallCheck","FSANode_possibleConstructorReturn","FSANode_getPrototypeOf","_accept","_custom","FSANode_get","FSAGraph","FSAGraph_classCallCheck","FSAGraph_possibleConstructorReturn","FSAGraph_getPrototypeOf","NodalGraph","_nodes","edgeSource","getSourceNode","edgeDestination","edgeLabel","getEdgeSymbolsFromLabel","_edges","otherEdge","otherSymbols","isSelfLoop","isQuadratic","parallelEdgeHeight","setQuadratic","maxNodeSize","dist12sq","vertical","m","b","x0","y0","sqrt","DEFAULT_NODE_LABEL_PREFIX","edgeLabelFormatter","string","allowNull","symbols","symbolLength","subsymbol","FSAGraphLabeler","FSAGraphLabeler_classCallCheck","FSAGraphLabeler_possibleConstructorReturn","FSAGraphLabeler_getPrototypeOf","_prefix","AbstractGraphLabeler","prefix","otherNodes","nodeIndex","newNodeLabel","GraphController","GraphController_classCallCheck","GraphController_getPrototypeOf","labelEditorElement","shouldAutoLabel","onGraphNodeLabelChange","GraphController_assertThisInitialized","AbstractModuleGraphController","GraphController_get","applyLayout","_labeler","_graph","setNodeLabel","getDefaultNodeLabel","targetNodes","enable","isPrevCustom","setNodeCustom","setNodeAccept","selectedNode","selection","deleteNode","other","angle","diameter","nextDX","nextDY","pos","getInputEventPosition","changeInputEventPosition","setQuadraticByCoords","sourceNode","prevLabel","openEditor","setOffset","ax","ay","StateUnreachableWarningMessage","StateUnreachableWarningMessage_classCallCheck","StateUnreachableWarningMessage_getPrototypeOf","targetIndex","targetLabel","StateUnreachableWarningMessage_assertThisInitialized","buttonValue","close","TransitionErrorMessage","TransitionErrorMessage_classCallCheck","TransitionErrorMessage_getPrototypeOf","TransitionErrorMessage_assertThisInitialized","targetLength","focusOnEdge","deleteTargetEdges","text","StateMissingTransitionErrorMessage","StateMissingTransitionErrorMessage_classCallCheck","StateMissingTransitionErrorMessage_getPrototypeOf","StateMissingTransitionErrorMessage_assertThisInitialized","FSAErrorChecker","FSAErrorChecker_classCallCheck","errorNodes","errorEdges","warningNodes","warningEdges","shouldNotifyErrors","deterministic","warnNodes","warnEdges","nodeTransitionMap","unreachNodes","placeholderEdges","emptyEdges","dupeEdges","labels","currentAlphabet","missingNodes","nodeTransitions","fillFSA","setFinalState","Node","newTransition","setStartState","FSABuilder","FSABuilder_classCallCheck","FSABuilder_possibleConstructorReturn","FSABuilder_getPrototypeOf","_machine","_deterministic","_symbols","_errorChecker","AbstractMachineBuilder","toNFA","_errors","_warnings","checkErrors","prevSymbol","nextSymbol","expandPowersetStateToDFA","powerSetState","dfa","getStateFromSet","hasState","newDFAStateFromNFA","terminals","dfaState","MachineController","MachineController_classCallCheck","MachineController_possibleConstructorReturn","MachineController_getPrototypeOf","AbstractModuleMachineController","MachineController_get","_machineBuilder","isDeterministic","setDeterministic","read","currentMachineType","powerSetStates","getPowerSet","trapState","newAlphabet","convertToDFA","setGraphToMachine","getNodeCount","edges","shift","nextNodes","nextNode","isCustomSymbol","addCustomSymbol","removeCustomSymbol","renameCustomSymbol","NodeRenderer","NodeRenderer_classCallCheck","NodeRenderer_possibleConstructorReturn","NodeRenderer_getPrototypeOf","userSelect","fontSize","EdgeRenderer","EdgeRenderer_classCallCheck","EdgeRenderer_possibleConstructorReturn","EdgeRenderer_getPrototypeOf","SIXTH_PI","arrowAngle","getStartPoint","quadCoords","getQuadraticAsCoords","edgeDir","getEdgeDirection","flipLabel","quadLine","str","yy","alignmentBaseline","InitialMarkerRenderer","InitialMarkerRenderer_classCallCheck","InitialMarkerRenderer_possibleConstructorReturn","InitialMarkerRenderer_getPrototypeOf","FSAGraphRenderer","FSAGraphRenderer_classCallCheck","FSAGraphRenderer_possibleConstructorReturn","FSAGraphRenderer_getPrototypeOf","renderer_NodeRenderer","renderer_EdgeRenderer","renderer_InitialMarkerRenderer","FSAGraphOverlayRenderer","FSAGraphOverlayRenderer_classCallCheck","FSAGraphOverlayRenderer_possibleConstructorReturn","FSAGraphOverlayRenderer_getPrototypeOf","machineErrors","getMachineErrors","machineWarnings","getMachineWarnings","getSelectionBox","shouldShowErrors","SelectionBoxRenderer","PlayIcon","PlayIcon_classCallCheck","PlayIcon_possibleConstructorReturn","PlayIcon_getPrototypeOf","PauseIcon","PauseIcon_classCallCheck","PauseIcon_possibleConstructorReturn","PauseIcon_getPrototypeOf","StopIcon","StopIcon_classCallCheck","StopIcon_possibleConstructorReturn","StopIcon_getPrototypeOf","TestTray","TestTray_classCallCheck","TestTray_possibleConstructorReturn","TestTray_getPrototypeOf","testIndex","getCurrentTestStringIndex","testOffset","MAX_ELLIPSIS_COUNT","onResume","isRunning","icons_PlayIcon","icons_PauseIcon","onPreviousStep","hasPrevStep","isSkipping","icons_StopIcon","ViewportRenderer_classCallCheck","ViewportRenderer_possibleConstructorReturn","ViewportRenderer_getPrototypeOf","LabelEditor","getLabelEditor","fsa_renderer_TestTray","CursorMode","TrashCan","EventHandler","eventLogger","controller","postEventName","EventHandler_classCallCheck","onEvent","applyUndo","applyRedo","eventData","captureEvent","postData","capturePostEvent","GraphEdgeDestinationEventHandler","GraphNodeInitialEventHandler_classCallCheck","GraphNodeInitialEventHandler_possibleConstructorReturn","GraphNodeInitialEventHandler_getPrototypeOf","nextInitial","nodeID","prevID","getNodeByElementID","GraphNodeMoveEventHandler","GraphNodeMoveEventHandler_classCallCheck","GraphNodeMoveEventHandler_possibleConstructorReturn","GraphNodeMoveEventHandler_getPrototypeOf","targetNode","nextX","nextY","GraphNodeMoveAllEventHandler","GraphNodeMoveAllEventHandler_classCallCheck","GraphNodeMoveAllEventHandler_possibleConstructorReturn","GraphNodeMoveAllEventHandler_getPrototypeOf","nodeIDs","GraphEdgeMoveEventHandler","GraphEdgeMoveEventHandler_classCallCheck","GraphEdgeMoveEventHandler_possibleConstructorReturn","GraphEdgeMoveEventHandler_getPrototypeOf","targetEdge","nextQuad","edgeID","getEdgeByElementID","GraphEdgeDestinationEventHandler_classCallCheck","GraphEdgeDestinationEventHandler_possibleConstructorReturn","GraphEdgeDestinationEventHandler_getPrototypeOf","nextDestination","prevDestination","GraphEdgeLabelEventHandler","GraphEdgeLabelEventHandler_classCallCheck","GraphEdgeLabelEventHandler_possibleConstructorReturn","GraphEdgeLabelEventHandler_getPrototypeOf","nextLabel","UserCreateNodeEventHandler","UserCreateNodeEventHandler_classCallCheck","UserCreateNodeEventHandler_possibleConstructorReturn","UserCreateNodeEventHandler_getPrototypeOf","custom","UserToggleNodeEventHandler","UserToggleNodeEventHandler_classCallCheck","UserToggleNodeEventHandler_possibleConstructorReturn","UserToggleNodeEventHandler_getPrototypeOf","prevAccept","nodeDatas","nodeCount","edgeDatas","edgeCount","initialIndex","nodeIndices","nodeData","initialNode","edgeData","destinationNode","quadData","graphNodes","graphEdges","graphInitial","elementID","quad","sourceIndex","destinationIndex","initial","_version","XML","NULL","nodeElements","getElementsByTagName","edgeElements","nodeElementIDs","nodeElement","nodeElementID","getAttribute","xElements","xElement","hasChildNodes","xValue","childNodes","parseFloat","nodeValue","yElements","yElement","yValue","boundingRect","transitionMapping","edgeElement","sourceID","fromElements","fromElement","fromValue","destinationID","toElements","toElement","toValue","readElements","readElement","readValue","transitionID","transitionKey","doc","DOMParser","parseFromString","structure","automaton","UserDeleteNodesEventHandler","UserDeleteNodesEventHandler_classCallCheck","UserDeleteNodesEventHandler_possibleConstructorReturn","UserDeleteNodesEventHandler_getPrototypeOf","graphData","FSAGraphParser","targetID","UserRenameNodeEventHandler","UserRenameNodeEventHandler_classCallCheck","UserRenameNodeEventHandler_possibleConstructorReturn","UserRenameNodeEventHandler_getPrototypeOf","prevCustom","UserCreateEdgeEventHandler","UserCreateEdgeEventHandler_classCallCheck","UserCreateEdgeEventHandler_possibleConstructorReturn","UserCreateEdgeEventHandler_getPrototypeOf","fromID","toID","setSourceNode","UserDeleteEdgeEventHandler","UserDeleteEdgeEventHandler_classCallCheck","UserDeleteEdgeEventHandler_possibleConstructorReturn","UserDeleteEdgeEventHandler_getPrototypeOf","prevTo","UserImportGraphEventHandler","UserImportGraphEventHandler_classCallCheck","UserImportGraphEventHandler_possibleConstructorReturn","UserImportGraphEventHandler_getPrototypeOf","graphName","SafeGraphEventHandler","SafeGraphEventHandler_classCallCheck","SafeGraphEventHandler_possibleConstructorReturn","SafeGraphEventHandler_getPrototypeOf","UserChangeMachineEventHandler","UserChangeMachineEventHandler_classCallCheck","UserChangeMachineEventHandler_possibleConstructorReturn","UserChangeMachineEventHandler_getPrototypeOf","nextMachineType","prevMachineType","prevType","nextType","UserConvertMachineEventHandler","UserConvertMachineEventHandler_classCallCheck","UserConvertMachineEventHandler_possibleConstructorReturn","UserConvertMachineEventHandler_getPrototypeOf","UserRenameMachineEventHandler","UserRenameMachineEventHandler_classCallCheck","UserRenameMachineEventHandler_possibleConstructorReturn","UserRenameMachineEventHandler_getPrototypeOf","nextMachineName","prevMachineName","prevName","nextName","UserRenameSymbolEventHandler","UserRenameSymbolEventHandler_classCallCheck","UserRenameSymbolEventHandler_possibleConstructorReturn","UserRenameSymbolEventHandler_getPrototypeOf","targetIDs","UserDeleteSymbolEventHandler","UserDeleteSymbolEventHandler_classCallCheck","UserDeleteSymbolEventHandler_possibleConstructorReturn","UserDeleteSymbolEventHandler_getPrototypeOf","EventManager","EventManager_classCallCheck","eventHandlers","events","GraphNodeInitialEventHandler","RECOMMENDED_SYMBOLS","DEFAULT_SYMBOLS","LabelEditor_classCallCheck","LabelEditor_getPrototypeOf","parentElement","inputElement","_timer","onContextMenu","LabelEditor_assertThisInitialized","onFormat","defaultText","saveOnExit","appendValue","closeEditor","getEdgeLabelFormatter","targetStyle","screenPos","ctm","getScreenCTM","transformViewToScreen","top","left","appendSymbol","TapeContext","inputString","infiniteLeft","infiniteRight","TapeContext_classCallCheck","_tapeInput","_left","_right","_index","finish","reset","TestTapeContext","StringTester_classCallCheck","StringTester_possibleConstructorReturn","StringTester_getPrototypeOf","getTestString","_tester","_machineController","stepForward","stepBackward","resetPosition","runTest","stopTest","getNodesAtPosition","changePosition","getPosition","StringTester","_testString","_testIndex","_tapeContext","_cachePath","_cachedResult","_resolve","_reject","testString","testResult","thenStop","prevCache","nextCache","position","FSAGraphExporter","FSAGraphExporter_classCallCheck","FSAGraphExporter_possibleConstructorReturn","FSAGraphExporter_getPrototypeOf","newGraph","JSONGraphParser","machineData","customSymbols","clearCustomSymbols","statePrefix","process","getModuleVersion","timestamp","Date","getCustomSymbols","fromJSON","toJSON","onerror","code","JSONFileIcon","JFLAPGraphExporter","JFLAPGraphExporter_classCallCheck","JFLAPGraphExporter_possibleConstructorReturn","JFLAPGraphExporter_getPrototypeOf","xmlData","XMLGraphParser","xmlString","XMLFileIcon","PANELS","EXPORTERS","FSAModule","FSAModule_classCallCheck","FSAModule_getPrototypeOf","_inputController","FSAModule_assertThisInitialized","_eventManager","_testingManager","FSAModule_get","XMLIcon","GraphCurvedEdge","_quad","_coords","fromx","fromy","midpointx","midpointy","angleOffset","outrad","inrad","maxdr","getDirectionalVector","getSelfLoopHeight","prevDest","formatAsPlaceholder","formatAsSelfLoop","coords","px","py","getMidPoint","qcoords","qx","qy","dist","nodeClass","edgeClass","_nodeClass","_edgeClass","_nodeMapping","_edgeMapping","nullSourceEdges","_i","setGraphElementID","clearEdges","clearNodes","getEdgeCount","maxX","maxY","minNX","MAX_VALUE","minNY","maxNX","maxNY","minEX","minEY","maxEX","maxEY","startPoint","endPoint","centerPoint","sx","sy","ex","ey","labeler","setGraphController","_machineUpdateTicks","_machineUpdateRate","_cachedGraphHash","staticTrash","setTrashMode","isUsingTouch","onMouseEnter","onTrashEnter","onMouseLeave","onTrashLeave","onTrashClick","JSONIcon","CreateIcon","MoveIcon","MoveIcon_classCallCheck","MoveIcon_possibleConstructorReturn","MoveIcon_getPrototypeOf","CursorMode_classCallCheck","CursorMode_possibleConstructorReturn","CursorMode_getPrototypeOf","actionMode","isActionMode","setInputScheme","icons_CreateIcon","icons_MoveIcon","AbstractInputHandler","zoomValue","ViewportInputHandler","ViewportInputHandler_classCallCheck","_prevX","_prevY","getAdapter","addOffset","AbstractModuleInputController_classCallCheck","AbstractModuleInputController_getPrototypeOf","addInputHandler","AbstractModuleInputController_assertThisInitialized","onInputEvent","stateCount","countStates","pow","offsetIndex","eventHandler","InputPointer","adapter","_adapter","_element","_viewport","_active","_x","_y","_inputpos","ViewportAdapter","ViewportAdapter_classCallCheck","_offsetX","_offsetY","_nextOffsetX","_nextOffsetY","_offsetDamping","_scaleFactor","_minScale","_maxScale","scale","damping","dscale","InputAdapter_classCallCheck","_activeDragHandler","_cursor","_mousemove","_mouseup","_touchmove","_touchend","_pointer","_dragging","_altinput","_holdInputDelay","_dblInputDelay","_scrollSensitivity","_minTapRadius","_draggingRadiusSqu","_prevEmptyInput","_prevEmptyTime","_prevEmptyX","_prevEmptyY","onMouseDownThenMove","onMouseDownThenUp","onTouchStartThenMove","onTouchStartThenEnd","onDelayedInputDown","SVGElement","setElement","onTouchMove","eventArgs","hasInputHandlers","button","onInputDown","mouse","transformScreenToView","setPosition","onInputMove","onInputUp","deltaY","handleEvent","setScale","beginInput","getDistanceSquToInitial","cancelInputEvent","dt","now","endInput","isActive","NotificationMessage","onExitMessage","getType","NotificationView_classCallCheck","NotificationView_possibleConstructorReturn","NotificationView_getPrototypeOf","getID","ComponentClass","getComponentClass","getComponentProps","notification_components_NotificationMessage","changeLog","show","Logo","Quote","Quote_classCallCheck","Quote_possibleConstructorReturn","Quote_getPrototypeOf","QUOTES","QUOTE_INDEX","CONTENT_QUOTE","CONTENT_SUBQUOTE","LandingPage","LandingPage_classCallCheck","LandingPage_getPrototypeOf","footer","returnHome","onLaunchButton","LandingPage_assertThisInitialized","onTutorialButton","onReturnHomeButton","onReportBugButton","onAboutButton","onHelpButton","onGithubButton","onscroll","scrollHeight","documentElement","clientHeight","innerHeight","scroll","pageYOffset","bottom","scrollTo","behavior","launchText","components_Logo","landing_components_Quote","requestAnimationFrame","updateApplication","returnValue","isUpdateAvailable","hasUpdate","Changelog","FRAMES_PER_SECOND","prevtime","time","page","pageProps","ReactDOM","render"],"mappings":"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","file":"app.bundle.e213e49718e7b00d73d0.js","sourcesContent":["const LOCAL_STORAGE_ID = \"config\";\n\nconst cfg = {};\ncfg._resetOnLoad = false;\ncfg._userDefined = false;\ncfg._dirty = false;\ncfg.setValue = function(key, value) {\n  if (this.hasOwnProperty(key))\n  {\n    this._userDefined = true;\n    this._dirty = true;\n    this[key] = value;\n  }\n  else\n  {\n    throw new Error(\"Trying to assign value to non-existant key in config\");\n  }\n}.bind(cfg);\nexport default cfg;\n\n//Preferences\n\n//General\ncfg.MACHINE_ERRORS_MESSAGE_TAG = \"machineError\";\ncfg.MACHINE_CONVERSION_MESSAGE_TAG = \"machineConversion\";\n\ncfg.ERROR_CHECK_INTERVAL = 2000;\ncfg.GRAPH_IMMEDIATE_INTERVAL = 50;\n\n//Controller\ncfg.SMOOTH_OFFSET_DAMPING = 0.4;\ncfg.SCROLL_SENSITIVITY = 1.0 / 300.0;\ncfg.MIN_SCALE = 0.1;\ncfg.MAX_SCALE = 10;\n\n//Workspace\ncfg.INIT_WAITTIME = 1500;\n\n//NodalGraph\ncfg.STR_TRANSITION_DEFAULT_LABEL = \"\";\ncfg.STR_STATE_LABEL = \"q\";\ncfg.PARALLEL_EDGE_HEIGHT = 10;\ncfg.SELF_LOOP_HEIGHT = 40;\n\n//Input Fields\ncfg.SUBMIT_KEY = 13; //ENTER\ncfg.CLEAR_KEY = 27; //ESCAPE\ncfg.TAB_KEY = 9; //TAB\ncfg.UP_KEY = 38; //UP\ncfg.DOWN_KEY = 40; //DOWN\ncfg.DELETE_KEY = 8; //DELETE\n\n/** LEGACY CONFIG **/\n\n//Input\ncfg.DELETE_FORWARD_KEY = 46; //DELETE FORWARD\n\n//Geometry\ncfg.DEFAULT_GRAPH_SIZE = 300;\n\ncfg.NODE_RADIUS = 16;\ncfg.NODE_RADIUS_SQU = cfg.NODE_RADIUS * cfg.NODE_RADIUS;\ncfg.NODE_DIAMETER = cfg.NODE_RADIUS * 2;\ncfg.NODE_RADIUS_INNER = 12;\n\ncfg.INITIAL_MARKER_OFFSET_X = -(cfg.NODE_RADIUS + (cfg.NODE_RADIUS / 2));\n\ncfg.EDGE_RADIUS = 12;\ncfg.EDGE_RADIUS_SQU = cfg.EDGE_RADIUS * cfg.EDGE_RADIUS;\ncfg.ARROW_WIDTH = 10;\ncfg.PLACEHOLDER_LENGTH = cfg.NODE_RADIUS * 3;\ncfg.ENDPOINT_RADIUS = 6;\ncfg.ENDPOINT_RADIUS_SQU = cfg.ENDPOINT_RADIUS * cfg.ENDPOINT_RADIUS;\n\ncfg.HOVER_RADIUS_OFFSET = 4;\ncfg.CURSOR_RADIUS = 4;\ncfg.CURSOR_RADIUS_SQU = cfg.CURSOR_RADIUS * cfg.CURSOR_RADIUS;\n\n//Interface\ncfg.DOUBLE_TAP_TICKS = 600;\ncfg.LONG_TAP_TICKS = 600;\ncfg.SPAWN_RADIUS = 64;\ncfg.DEFAULT_SHOULD_DESTROY_POINTLESS_EDGE = true;\ncfg.DRAGGING_BUFFER = 18;\ncfg.DRAGGING_BUFFER_SQU = cfg.DRAGGING_BUFFER * cfg.DRAGGING_BUFFER;\n\n//Graph sorting\ncfg.PADDING_RADIUS_SQU = 2304;\n\n\n/** LOCAL STORAGE FUNCTIONS **/\n\n//check if browser support local storage\nexport function doesSupportLocalStorage()\n{\n  return typeof(Storage) !== 'undefined';\n}\n\nexport function loadConfig()\n{\n  const jsonString = localStorage.getItem(LOCAL_STORAGE_ID);\n  //If cannot find a config...\n  if (!jsonString)\n  {\n    //Just use the default one and don't save anything...\n    console.log(\"Using default config...\");\n    return;\n  }\n\n  try\n  {\n    console.log(\"Loading config...\");\n    const jsonData = JSON.parse(jsonString);\n    if (jsonData['_resetOnLoad'] == true)\n    {\n      //Reset the config\n      clearConfig();\n\n      //Save a new config\n      saveConfig();\n    }\n    else\n    {\n      Object.assign(cfg, jsonData);\n    }\n  }\n  catch (e)\n  {\n    //Reset the config\n    clearConfig();\n  }\n};\n\nexport function saveConfig(forceSave=false)\n{\n  if (forceSave || (cfg._userDefined && cfg._dirty))\n  {\n    try\n    {\n      console.log(\"Saving config...\");\n      const jsonString = JSON.stringify(cfg);\n      localStorage.setItem(LOCAL_STORAGE_ID, jsonString);\n\n      cfg._dirty = false;\n    }\n    catch (e)\n    {\n      //Reset the config\n      clearConfig();\n    }\n  }\n};\n\nexport function clearConfig()\n{\n  localStorage.removeItem(LOCAL_STORAGE_ID);\n\n  cfg._dirty = true;\n};\n","import React from 'react';\nimport './IconButton.css';\n\nclass IconButton extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    return <button\n      className={\"icon-button \" + this.props.className}\n      id={this.props.id}\n      title={this.props.title}\n      style={this.props.style}\n      disabled={this.props.disabled}\n      onClick={this.props.onClick}>\n      {this.props.children}\n    </button>;\n  }\n}\n\nexport default IconButton;\n","export const EMPTY = '\\u03B5';\nexport const ARROW = '\\u2192';\nexport const EMPTY_SET = '\\u2205';\n\n//'\\u03BB' = LAMBDA\n","import { guid } from 'util/MathHelper.js';\n\nclass Message\n{\n  constructor(handler, value, type, tags, componentClass, componentProps)\n  {\n    this._handler = handler;\n    this._id = guid();\n    this._type = type;\n\n    this.value = value;\n    this.tags = tags;\n    this.componentClass = componentClass;\n    this.componentProps = componentProps;\n  }\n\n  close()\n  {\n    const messages = this._handler.getMessages();\n    const index = messages.indexOf(this);\n    if (index < 0) throw new Error(\"Trying to close an unopened notification message\");\n    messages.splice(index, 1);\n  }\n\n  getType()\n  {\n    return this._type;\n  }\n\n  getID()\n  {\n    return this._id;\n  }\n\n  getComponentClass()\n  {\n    return this.componentClass;\n  }\n\n  getComponentProps()\n  {\n    return this.componentProps;\n  }\n\n  hasTag(tag)\n  {\n    return this.tags.indexOf(tag) >= 0;\n  }\n}\n\nclass NotificationManager\n{\n  constructor()\n  {\n    this._messageQueue = [];\n  }\n\n  addMessage(value, type=null, tags=null, componentClass=null, componentProps=null, shouldReplaceRelated=true)\n  {\n    if (tags && shouldReplaceRelated)\n    {\n      this.clearMessages(tags);\n    }\n\n    const result = new Message(this, value, type || \"default\", tags || [], componentClass, componentProps);\n    this._messageQueue.unshift(result);\n  }\n\n  addDefaultMessage(value, tags=null, componentClass=null, componentProps=null, shouldReplaceRelated=true)\n  {\n    this.addMessage(value, \"default\", tags, componentClass, componentProps, shouldReplaceRelated);\n  }\n\n  addErrorMessage(value, tags=null, componentClass=null, componentProps=null, shouldReplaceRelated=true)\n  {\n    this.addMessage(value, \"error\", tags, componentClass, componentProps, shouldReplaceRelated);\n  }\n\n  addWarningMessage(value, tags=null, componentClass=null, componentProps=null, shouldReplaceRelated=true)\n  {\n    this.addMessage(value, \"warning\", tags, componentClass, componentProps, shouldReplaceRelated);\n  }\n\n  clearMessages(tags=null)\n  {\n    if (!tags)\n    {\n      this._messageQueue.length = 0;\n    }\n    else\n    {\n      if (!Array.isArray(tags)) tags = [tags];\n\n      let message;\n      for(let i = this._messageQueue.length - 1; i >= 0; --i)\n      {\n        message = this._messageQueue[i];\n        for(const tag of tags)\n        {\n          if (message.hasTag(tag))\n          {\n            this._messageQueue.splice(i, 1);\n            break;\n          }\n        }\n      }\n    }\n  }\n\n  hasMessages(tags=null)\n  {\n    if (!tags)\n    {\n      return this._messageQueue.length >= 0;\n    }\n    else\n    {\n      if (!Array.isArray(tags)) tags = [tags];\n\n      for(let i = this._messageQueue.length - 1; i >= 0; --i)\n      {\n        message = this._messageQueue[i];\n        for(const tag of tags)\n        {\n          if (message.hasTag(tag))\n          {\n            return true;\n          }\n        }\n      }\n\n      return false;\n    }\n  }\n\n  getMessages()\n  {\n    return this._messageQueue;\n  }\n}\nexport default NotificationManager;\n","import NotificationManager from './NotificationManager.js';\n\n//Singleton pattern (I know, I'm sorry. But we must.)\nconst INSTANCE = new NotificationManager();\nexport default INSTANCE;\n","import LocalSaveManager from './LocalSaveManager.js';\n\n//Singleton pattern (I know, I'm sorry. But we must.)\nconst INSTANCE = new LocalSaveManager();\nexport default INSTANCE;\n","class LocalSaveManager\n{\n  constructor()\n  {\n    this._handlers = new Set();\n    this._intervalID = null;\n    this._intervalMillis = 1000;\n\n    this._init = false;\n\n    this.onIntervalUpdate = this.onIntervalUpdate.bind(this);\n  }\n\n  setAutoSaveInterval(millis)\n  {\n    if (!millis || millis <= 0) throw new Error(\"AutoSave interval must be greater than 0\");\n    this._intervalMillis = millis;\n  }\n\n  registerHandler(handler)\n  {\n    if (this._handlers.has(handler))\n    {\n      throw new Error(\"Cannot register handler, since it is already registered\");\n    }\n\n    if (this._init)\n    {\n      //NOTE: Due to duck typing, it might not exist...\n      if (typeof handler['onLoadSave'] === 'function')\n      {\n        handler.onLoadSave();\n      }\n    }\n\n    this._handlers.add(handler);\n  }\n\n  unregisterHandler(handler)\n  {\n    if (!this._handlers.has(handler))\n    {\n      throw new Error(\"Cannot remove handler, since it is not yet registered\");\n    }\n\n    if (this._init)\n    {\n      //NOTE: Due to duck typing, it might not exist...\n      if (typeof handler['onUnloadSave'] === 'function')\n      {\n        handler.onUnloadSave();\n      }\n    }\n\n    this._handlers.delete(handler);\n  }\n\n  initialize()\n  {\n    if (this._init) throw new Error(\"Cannot initialize LocalSave, since it is already initialized\");\n\n    if (this.doesSupportLocalStorage())\n    {\n      this._init = true;\n\n      for(const handler of this._handlers)\n      {\n        //NOTE: Due to duck typing, it might not exist...\n        if (typeof handler['onLoadSave'] === 'function')\n        {\n          handler.onLoadSave();\n        }\n      }\n\n      //Prepare autosave\n      this._intervalID = setInterval(this.onIntervalUpdate, this._intervalMillis);\n    }\n    else\n    {\n      //Does not support local storage, so ignore everything...\n    }\n  }\n\n  terminate()\n  {\n    if (!this._init) throw new Error(\"Cannot terminate LocalSave, since it is not yet initialized\");\n\n    clearInterval(this._intervalID);\n\n    for(const handler of this._handlers)\n    {\n      //NOTE: Due to duck typing, it might not exist...\n      if (typeof handler['onUnloadSave'] === 'function')\n      {\n        handler.onUnloadSave();\n      }\n    }\n\n    this._handlers.clear();\n    this._init = false;\n  }\n\n  onIntervalUpdate()\n  {\n    //Save most recent save for all registered handlers\n    for(let handler of this._handlers)\n    {\n      try\n      {\n        //NOTE: Due to duck typing, it might not exist...\n        if (typeof handler['onAutoSave'] === 'function')\n        {\n          handler.onAutoSave();\n        }\n      }\n      catch(e)\n      {\n        console.error(e);\n      }\n    }\n  }\n\n  setStringToStorage(saveKey, stringData)\n  {\n    if (!this.doesSupportLocalStorage()) return;\n    if (stringData.length > 0)\n    {\n      localStorage.setItem(saveKey, stringData);\n    }\n    else\n    {\n      localStorage.removeItem(saveKey);\n    }\n  }\n\n  getStringFromStorage(saveKey)\n  {\n    if (!this.doesSupportLocalStorage()) return \"\";\n    return localStorage.getItem(saveKey) || \"\";\n  }\n\n  loadFromStorage(saveKey)\n  {\n    if (!this.doesSupportLocalStorage()) return null;\n    try\n    {\n      const value = localStorage.getItem(saveKey);\n      if (value && value.length > 0)\n      {\n        return JSON.parse(value);\n      }\n      else\n      {\n        return null;\n      }\n    }\n    catch(e)\n    {\n      console.error(e);\n      return {};\n    }\n  }\n\n  saveToStorage(saveKey, jsonData)\n  {\n    if (!this.doesSupportLocalStorage()) return;\n\n    let hidden, visibilityChange;\n\n    // Opera 12.10 and Firefox 18 and later support\n    if (typeof document.hidden !== \"undefined\")\n    {\n      hidden = \"hidden\";\n      visibilityChange = \"visibilitychange\";\n    }\n    else if (typeof document.msHidden !== \"undefined\")\n    {\n      hidden = \"msHidden\";\n      visibilityChange = \"msvisibilitychange\";\n    }\n    else if (typeof document.webkitHidden !== \"undefined\")\n    {\n      hidden = \"webkitHidden\";\n      visibilityChange = \"webkitvisibilitychange\";\n    }\n\n    if (document[hidden])\n    {\n      //Don't save anything...\n      return;\n    }\n\n    try\n    {\n      if (typeof jsonData == 'object')\n      {\n        let flag = jsonData;\n        if (flag)\n        {\n          flag = false;\n\n          //Don't save empty objects, cause that is wasteful.\n          for(let key in jsonData)\n          {\n            if (jsonData.hasOwnProperty(key))\n            {\n              flag = true;\n              break;\n            }\n          }\n        }\n\n        //Save or remove the data...\n        if (flag)\n        {\n          localStorage.setItem(saveKey, JSON.stringify(jsonData));\n        }\n        else\n        {\n          localStorage.removeItem(saveKey);\n        }\n      }\n      else if (typeof jsonData == 'string')\n      {\n        const flag = jsonData.length <= 0;\n\n        //Save or remove the data...\n        if (flag)\n        {\n          localStorage.setItem(saveKey, jsonData);\n        }\n        else\n        {\n          localStorage.removeItem(saveKey);\n        }\n      }\n    }\n    catch(e)\n    {\n      console.error(e);\n    }\n  }\n\n  existsInStorage(saveKey)\n  {\n    if (!this.doesSupportLocalStorage()) return false;\n    return localStorage.getItem(saveKey) != null;\n  }\n\n  clearStorage()\n  {\n    if (!this.doesSupportLocalStorage()) return;\n\n    localStorage.clear();\n  }\n\n  doesSupportLocalStorage()\n  {\n    //check if browser support local storage\n    return typeof Storage !== 'undefined';\n  }\n}\nexport default LocalSaveManager;\n","export const FILE_TYPE_PNG = \"png\";\nexport const FILE_TYPE_JPG = \"jpg\";\nexport const FILE_TYPE_SVG = \"svg\";\n\nexport function downloadText(filename, textData)\n{\n  downloadURL(filename, getTextDataURI(textData));\n}\n\nfunction createBlobFromSVG(svg)\n{\n  const serializer = new XMLSerializer();\n  const svgString = serializer.serializeToString(svg);\n  const blob = new Blob([svgString], {type:'image/svg+xml'});\n  return blob\n}\n\nexport function downloadImageFromSVG(filename, filetype, svg, width, height)\n{\n  const blob = createBlobFromSVG(svg);\n  switch(filetype)\n  {\n    case FILE_TYPE_PNG:\n    case FILE_TYPE_JPG:\n    {\n      const url = URL.createObjectURL(blob);\n\n      const canvas = document.createElement('canvas');\n      const ctx = canvas.getContext(\"2d\");\n      const pixelRatio = window.devicePixelRatio || 1;\n      canvas.width = width * pixelRatio;\n      canvas.height = height * pixelRatio;\n      canvas.style.width = width + \"px\";\n      canvas.style.height = height + \"px\";\n      ctx.setTransform(pixelRatio, 0, 0, pixelRatio, 0, 0);\n\n      const image = new Image();\n      image.onload = () => {\n        ctx.drawImage(image, 0, 0);\n        URL.revokeObjectURL(url);\n\n        const imageURI = canvas.toDataURL('image/' + filetype).replace('image/' + filetype, 'image/octet-stream');\n        downloadURL(filename + '.' + filetype, imageURI);\n      };\n      image.src = url;\n    }\n    break;\n    case FILE_TYPE_SVG:\n    {\n      const reader = new FileReader();\n      reader.onload = () => {\n        downloadURL(filename + '.' + filetype, reader.result);\n      };\n      reader.readAsDataURL(blob);\n    }\n    break;\n    default:\n      throw new Error(\"Unknown file type \\'\" + filetype + \"\\'\");\n  }\n}\n\nexport function downloadURL(filename, url)\n{\n  const element = document.createElement('a');\n  const headerIndex = url.indexOf(\";\");\n  url = url.substring(0, headerIndex + 1) + \"headers=Content-Disposition%3A%20attachment%3B%20filename=\" + filename + \";\" + url.substring(headerIndex + 1);\n  element.setAttribute('href', url);\n  element.setAttribute('download', filename);\n\n  element.style.display = \"none\";\n  document.body.appendChild(element);\n\n  element.click();\n  document.body.removeChild(element);\n}\n\nfunction getTextDataURI(data)\n{\n  return 'data:text/plain; charset=utf-8,' + encodeURIComponent(data);\n}\n","import QuadraticEdge from 'graph/QuadraticEdge.js';\n\nexport const SYMBOL_SEPARATOR = ' ';\nexport const EMPTY_CHAR = '\\u03B5';\n\nclass FSAEdge extends QuadraticEdge\n{\n  constructor(id, from, to=null)\n  {\n    super(id, from, to);\n  }\n\n  //Override\n  setEdgeLabel(label)\n  {\n    if (typeof label === 'string')\n    {\n      super.setEdgeLabel(label);\n    }\n    else\n    {\n      super.setEdgeLabel(EMPTY_CHAR);\n    }\n  }\n\n  getEdgeSymbolsFromLabel()\n  {\n    return this.getEdgeLabel().split(SYMBOL_SEPARATOR);\n  }\n}\n\nexport default FSAEdge;\n","const ROUTER = {\n  _componentClass: null,\n  _componentProps: null,\n  routeTo(componentClass, componentProps={})\n  {\n    this._componentClass = componentClass;\n    this._componentProps = componentProps;\n  },\n  getCurrentPage()\n  {\n    return this._componentClass;\n  },\n  getCurrentPageProps()\n  {\n    return this._componentProps;\n  }\n};\n\nexport default ROUTER;\n","import React from 'react';\nimport './Viewport.css';\n\nconst VIEWPORT_RENDER_LAYER = \"viewport\";\n\nclass Viewport extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.ref = null;\n    this.labelEditor = null;\n\n    this.state = {\n      prevMode: Viewport.NORMAL,\n      mode: Viewport.NORMAL\n    };\n  }\n\n  //Override\n  render()\n  {\n    const currentModule = this.props.currentModule;\n    const inputController = currentModule.getInputController();\n    const graphController = currentModule.getGraphController();\n    const machineController = currentModule.getMachineController();\n\n    const ViewportRenderer = currentModule.getRenderer(VIEWPORT_RENDER_LAYER);\n\n    return <div className={\"viewport-container viewport-\" + this.state.mode} ref={ref=>this.ref=ref}>\n      { ViewportRenderer &&\n        <ViewportRenderer {...this.props} parent={this}/>}\n    </div>;\n  }\n}\nViewport.NORMAL = \"normal\";\nViewport.WAITING = \"waiting\";\nViewport.TESTING = \"testing\";\nViewport.DANGEROUS = \"dangerous\";\n\nexport default Viewport;\n","export function guid()\n{\n  function s4()\n  {\n    return Math.floor((1 + Math.random()) * 0x10000).toString(16).substring(1);\n  }\n  return s4() + s4() + '-' + s4() + '-' + s4() + '-' + s4() + '-' + s4() + s4() + s4();\n};\n\nexport function lerp(a, b, dt)\n{\n  return a * (1 - dt) + b * dt;\n};\n\nexport function stringHash(value=\"\")\n{\n  let hash = 0;\n  for(let i = 0, len = value.length; i < len; i++)\n  {\n    hash = Math.imul(31, hash) + value.charCodeAt(i) | 0;\n  }\n  return hash;\n};\n","import GraphElement from 'graph/GraphElement.js';\n\nclass GraphNode extends GraphElement\n{\n  constructor(id, x, y)\n  {\n    super(id);\n\n    this.x = x;\n    this.y = y;\n\n    this._label = \"\";\n  }\n\n  setNodeLabel(label)\n  {\n    this._label = label;\n    return this;\n  }\n\n  getNodeLabel()\n  {\n    return this._label;\n  }\n\n  getNodeSize()\n  {\n    return 16;\n  }\n\n  //Override\n  getHashString(usePosition=true)\n  {\n    if (usePosition)\n    {\n      return super.getHashString(usePosition) + \":\" + Math.floor(this.x) + \",\" + Math.floor(this.y) + \".\" + this._label;\n    }\n    else\n    {\n      return super.getHashString(usePosition) + \":\" + this._label;\n    }\n  }\n}\n\nexport default GraphNode;\n","class AbstractGraphExporter\n{\n  constructor() {}\n\n  importFromData(data, module)\n  {\n    throw new Error(\"Unsupported import for type \\'\" + this.getFileType() + \"\\'\");\n  }\n\n  exportToData(module)\n  {\n    throw new Error(\"Unsupported export for type \\'\" + this.getFileType() + \"\\'\");\n  }\n\n  doesSupportData()\n  {\n    return false;\n  }\n\n  importFromFile(fileBlob, module)\n  {\n    throw new Error(\"Unsupported import for type \\'\" + this.getFileType() + \"\\'\");\n  }\n\n  exportToFile(filename, module)\n  {\n    throw new Error(\"Unsupported export for type \\'\" + this.getFileType() + \"\\'\");\n  }\n\n  doesSupportFile()\n  {\n    return false;\n  }\n\n  canImport()\n  {\n    return false;\n  }\n\n  getTitle()\n  {\n    return this.getLabel();\n  }\n\n  getIconClass()\n  {\n    return null;\n  }\n\n  getLabel()\n  {\n    return \"Export as \" + this.getFileType().toUpperCase();\n  }\n\n  getFileType()\n  {\n    throw new Error(\"Unknown file type for exporter\");\n  }\n}\n\nexport default AbstractGraphExporter;\n","const ALLOW_AUTOMATIC_REGISTER = false;\n\nconst Eventable = {\n  __eventListeners: null,\n  mixin(targetClass)\n  {\n    const targetPrototype = targetClass.prototype;\n    Object.assign(targetPrototype, Eventable);\n    delete targetPrototype.mixin;\n  },\n\n  registerEvent(eventName)\n  {\n    if (!this.__eventListeners) this.__eventListeners = new Map();\n\n    if (!this.__eventListeners.has(eventName))\n    {\n      this.__eventListeners.set(eventName, []);\n    }\n    else\n    {\n      throw new Error(\"Already registered event \\'\" + eventName + \"\\'\");\n    }\n  },\n\n  unregisterEvent(eventName)\n  {\n    if (!this.__eventListeners) return;\n\n    if (this.__eventListeners.has(eventName))\n    {\n      this.__eventListeners.delete(eventName);\n    }\n    else\n    {\n      throw new Error(\"Unable to find event \\'\" + eventName + \"\\'\");\n    }\n  },\n\n  addEventListener(eventName, listener)\n  {\n    if (!this.__eventListeners) this.__eventListeners = new Map();\n\n    let listeners;\n    if (this.__eventListeners.has(eventName))\n    {\n      listeners = this.__eventListeners.get(eventName);\n    }\n    else if (ALLOW_AUTOMATIC_REGISTER)\n    {\n      listeners = [];\n      this.__eventListeners.set(eventName, listeners);\n    }\n    else\n    {\n      throw new Error(\"Unable to find event \\'\" + eventName + \"\\'\");\n    }\n\n    listeners.push(listener);\n  },\n\n  removeEventListener(eventName, listener)\n  {\n    if (!this.__eventListeners) return;\n\n    if (this.__eventListeners.has(eventName))\n    {\n      const listeners = this.__eventListeners.get(eventName);\n      let flag = false;\n      let i = listeners.length;\n      while(i--)\n      {\n        if (listeners[i] === listener)\n        {\n          listeners.splice(i, 1);\n          flag = true;\n        }\n      }\n\n      if (!flag)\n      {\n        throw new Error(\"Unable to find listener for event \\'\" + eventName + \"\\'\");\n      }\n    }\n    else\n    {\n      throw new Error(\"Unknown event \\'\" + eventName + \"\\'\");\n    }\n  },\n\n  clearEventListeners(eventName)\n  {\n    if (!this.__eventListeners) return;\n\n    if (!eventName)\n    {\n      this.__eventListeners.clear();\n    }\n    else if (this.__eventListeners.has(eventName))\n    {\n      const listeners = this.__eventListeners.get(eventName);\n      listeners.length = 0;\n    }\n    else if (ALLOW_AUTOMATIC_REGISTER)\n    {\n      listeners = [];\n      this.__eventListeners.set(eventName, listeners);\n    }\n    else\n    {\n      throw new Error(\"Unable to find event \\'\" + eventName + \"\\'\");\n    }\n  },\n\n  countEventListeners(eventName)\n  {\n    if (!this.__eventListeners) return 0;\n    return this.__eventListeners.has(eventName) ? this.__eventListeners.get(eventName).length : 0;\n  },\n\n  getEventListeners(eventName)\n  {\n    if (!this.__eventListeners) return null;\n    return this.__eventListeners.get(eventName);\n  },\n\n  on(eventName, listener)\n  {\n    this.addEventListener(eventName, listener);\n  },\n\n  once(eventName, listener)\n  {\n    const f = (...args) => {\n      try\n      {\n        listener.apply(null, args);\n      }\n      finally\n      {\n        this.removeEventListener(eventName, f);\n      }\n    };\n\n    this.addEventListener(eventName, f);\n  },\n\n  emit(eventName, ...args)\n  {\n    try\n    {\n      if (!this.__eventListeners) return;\n\n      let listeners;\n      if (!this.__eventListeners.has(eventName))\n      {\n        if (ALLOW_AUTOMATIC_REGISTER)\n        {\n          listeners = [];\n          this.__eventListeners.set(eventName, listeners);\n        }\n        else\n        {\n          throw new Error(\"Unable to find event \\'\" + eventName + \"\\'\");\n        }\n      }\n      else\n      {\n        listeners = this.__eventListeners.get(eventName);\n\n        let result = null;\n        let i = listeners.length;\n        while(i--)\n        {\n          try\n          {\n            result = listeners[i].apply(null, args);\n          }\n          catch(e)\n          {\n            console.error(e);\n          }\n\n          if (result === true) break;\n        }\n      }\n    }\n    finally\n    {\n      this.onEventProcessed(eventName, ...args);\n    }\n  },\n\n  onEventProcessed(eventName, ...args)\n  {\n    //Do nothing.\n  }\n};\n\nexport default Eventable;\n","import FSA from './FSA.js';\nimport { EMPTY } from './Symbols.js';\n\nconst SRC = 0;\nconst SYMBOL = 1;\nconst DST = 2;\n\nclass NFA extends FSA\n{\n  constructor()\n  {\n    super();\n  }\n\n  //Override\n  getUsedAlphabet(dst=[])\n  {\n    const result = dst;\n    for(const transition of this._transitions)\n    {\n      const symbol = transition[SYMBOL];\n      if (!result.includes(symbol) && symbol != EMPTY)\n      {\n        result.push(symbol);\n      }\n    }\n    return result;\n  }\n\n  //Override\n  doTransition(state, symbol, dst=[])\n  {\n    const result = dst;\n    for(const transition of this._transitions)\n    {\n      if (transition[SRC] == state && transition[SYMBOL] == symbol)\n      {\n        result.push(transition[DST]);\n      }\n    }\n    return result;\n  }\n\n  doClosureTransition(state, dst=[])\n  {\n    const result = dst;\n    result.push(state);\n    for(let i = 0; i < result.length; ++i)\n    {\n      const transitions = this.getOutgoingTransitions(result[i]);\n      for(const transition of transitions)\n      {\n        if (transition[SYMBOL] == EMPTY)\n        {\n          const dst = transition[DST];\n          if (!result.includes(dst))\n          {\n            result.push(dst);\n          }\n        }\n      }\n    }\n    return result;\n  }\n\n  doTerminalTransition(state, symbol, dst=[])\n  {\n    const result = dst;\n    for(const transition of this._transitions)\n    {\n      if (transition[SRC] == state && transition[SYMBOL] == symbol)\n      {\n        //Get closure on destination states\n        const states = this.doClosureTransition(transition[DST]);\n        for(const s of states)\n        {\n          if (!result.includes(s))\n          {\n            result.push(s);\n          }\n        }\n      }\n    }\n\n    return result;\n  }\n\n    getPowerSet() {\n        var ps = [[]];\n        var nfaStates = this.getStates();\n        for(var i=0; i < nfaStates.length; i++) {\n            for(var j=0, len = ps.length; j < len; j++) {\n                ps.push(ps[j].concat(nfaStates[i]));\n            }\n        }\n        return ps;\n    }\n}\n\nexport default NFA;\n","import React from 'react';\nimport Config from 'config.js';\n\nconst HIGHLIGHT_RADIUS_OFFSET = 4;\nconst HIGHLIGHT_LINE_WIDTH = 3;\nconst HIGHLIGHT_LINE_ARRAY = [8, 6];\n\nclass HighlightRenderer extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    const target = this.props.target;\n    const type = this.props.type;\n\n    let x = 0;\n    let y = 0;\n    let r = Config.CURSOR_RADIUS;\n    switch(type)\n    {\n      case \"node\":\n        x = target.x || 0;\n        y = target.y || 0;\n        r = Config.NODE_RADIUS;\n        break;\n      case \"edge\":\n        const center = target.getCenterPoint();\n        x = center.x || 0;\n        y = center.y || 0;\n        r = Config.EDGE_RADIUS;\n        break;\n      case \"endpoint\":\n        const endpoint = target.getEndPoint();\n        x = endpoint.x || 0;\n        y = endpoint.y || 0;\n        r = Config.ENDPOINT_RADIUS;\n        break;\n      case \"initial\":\n        x = target.x + Config.INITIAL_MARKER_OFFSET_X || 0;\n        y = target.y || 0;\n        r = Config.EDGE_RADIUS;\n        break;\n    }\n\n    return <g className=\"graph-highlight-container\">\n      <circle className={\"graph-highlight \" + this.props.className}\n        cx={x} cy={y}\n        r={r + HIGHLIGHT_RADIUS_OFFSET}\n        strokeDashoffset={this.props.offset || 0}\n        strokeDasharray={HIGHLIGHT_LINE_ARRAY}\n        strokeWidth={HIGHLIGHT_LINE_WIDTH}\n        fill=\"none\"/>\n    </g>;\n  }\n}\n\nexport default HighlightRenderer;\n","class HotKeys\n{\n  constructor()\n  {\n    this.app = null;\n    this.workspace = null;\n    this.toolbar = null;\n    this.undoManager = null;\n    this.graphController = null;\n    this.machineController = null;\n\n    this.onKeyDown = this.onKeyDown.bind(this);\n  }\n\n  initialize(app)\n  {\n    this.app = app;\n    this.workspace = app.workspace;\n    this.toolbar = app.toolbar;\n    this.undoManager = app.getUndoManager();\n    this.graphController = app.getGraphController();\n    this.machineController = app.getMachineController();\n\n    window.addEventListener('keydown', this.onKeyDown);\n  }\n\n  destroy()\n  {\n    window.removeEventListener('keydown', this.onKeyDown);\n  }\n\n  onKeyDown(e)\n  {\n    //Ctrl-S\n    if (event.which == 83 && (event.metaKey || event.ctrlKey))\n    {\n      //Save as machine file\n      const exporter = this.app.getCurrentModule().getDefaultGraphExporter();\n      const machineName = this.machineController.getMachineName();\n      exporter.exportToFile(machineName, this.app.getCurrentModule());\n\n      e.preventDefault();\n      e.stopPropagation();\n    }\n    //Ctrl-Z\n    else if (event.which == 90 && (event.metaKey || event.ctrlKey))\n    {\n      if (event.shiftKey)\n      {\n        //Redo\n        this.undoManager.redo();\n      }\n      else\n      {\n        //Undo\n        this.undoManager.undo();\n      }\n      e.preventDefault();\n      e.stopPropagation();\n    }\n    //Ctrl-P\n    else if (event.which == 80 && (event.metaKey || event.ctrlKey))\n    {\n      //Export to PNG\n      const imageExporters = this.app.getCurrentModule().getImageExporters();\n      if (imageExporter.length >= 1)\n      {\n        const exporter = imageExporters[0];\n        const machineName = this.machineController.getMachineName();\n        exporter.exportToFile(machineName, this.app.getCurrentModule());\n      }\n      else\n      {\n        throw new Error(\"Unable to find valid image exporter for module \\'\" + this.app.getCurrentModule().getModuleName() + \"\\'\");\n      }\n\n      e.preventDefault();\n      e.stopPropagation();\n    }\n  }\n}\n\nexport default HotKeys;\n","import React from 'react';\nimport Notifications from 'system/notification/Notifications.js';\n\nclass UploadButton extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.onUploadFileChange = this.onUploadFileChange.bind(this);\n  }\n\n  onUploadFileChange(e)\n  {\n    const files = e.target.files;\n    if (files.length > 0)\n    {\n      this.props.app.getCurrentModule().getGraphImporter().importFile(files[0], this.props.app.getCurrentModule())\n        .catch((e) => {\n          Notifications.addErrorMessage(\"ERROR: Unable to load invalid JSON file.\", \"errorUpload\");\n          console.error(e);\n        });\n\n      //Makes sure you can upload the same file again.\n      e.target.value = \"\";\n    }\n  }\n\n  render()\n  {\n    const inputID = this.props.id + \"-input\";\n    return <button\n      className={\"icon-button button-upload \" + this.props.className}\n      id={this.props.id}\n      title={this.props.title}\n      style={this.props.style}\n      disabled={this.props.disabled}\n      onClick={this.props.onClick}>\n      <input id={inputID} type=\"file\" name=\"import\"\n        style={{display:\"none\"}}\n        onChange={this.onUploadFileChange}\n        accept={this.props.app.getCurrentModule().getGraphImporter().getImportFileTypes().join(\",\")}/>\n      <label htmlFor={inputID}>\n        {this.props.children}\n      </label>\n    </button>;\n  }\n}\n\nexport default UploadButton;\n","import React from 'react';\nimport Notifications from 'system/notification/Notifications.js';\n\nclass HelpButton extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.onClick = this.onClick.bind(this);\n  }\n\n  onClick(e)\n  {\n    if (Notifications.hasMessages())\n    {\n      Notifications.addMessage(I18N.toString(\"message.help.3\"));\n      Notifications.addMessage(I18N.toString(\"message.help.1\"));\n    }\n    else\n    {\n      Notifications.addMessage(I18N.toString(\"message.help.2\"));\n    }\n\n    //The tutorial\n    const LINK = \"https://github.com/flapjs/FLAPJS-WebApp/blob/master/docs/HELP.md\";\n    const newTab = window.open(LINK, '_blank');\n\n    if (this.props.onClick)\n    {\n      this.props.onClick(e);\n    }\n  }\n\n  render()\n  {\n    return <button\n      className={\"icon-button button-help \" + this.props.className}\n      id={this.props.id}\n      title={this.props.title}\n      style={this.props.style}\n      disabled={this.props.disabled}\n      onClick={this.onClick}>\n      {this.props.children}\n    </button>;\n  }\n}\n\nexport default HelpButton;\n","import React from 'react';\n\nclass MachineName extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.state = {\n      value: null\n    };\n\n    this.onKeyDown = this.onKeyDown.bind(this);\n    this.onChange = this.onChange.bind(this);\n    this.onFocus = this.onFocus.bind(this);\n    this.onBlur = this.onBlur.bind(this);\n  }\n\n  onChange(e)\n  {\n    this.setState({value: e.target.value});\n  }\n\n  onKeyDown(e)\n  {\n    if (e.key === 'Escape')\n    {\n      const target = e.target;\n      this.setState({value: null}, () => target.blur());\n      return false;\n    }\n    else if (e.key === 'Enter')\n    {\n      e.target.blur();\n      return false;\n    }\n  }\n\n  onFocus(e)\n  {\n    this.setState({value: this.props.value});\n  }\n\n  onBlur(e)\n  {\n    if (this.state.value)\n    {\n      if (this.props.onSubmit) this.props.onSubmit({value: this.state.value});\n    }\n\n    this.setState({value: null});\n  }\n\n  render()\n  {\n    return <input type=\"text\"\n      className={this.props.className}\n      id={this.props.id}\n      value={this.state.value != null ? this.state.value : this.props.value}\n      onChange={this.onChange}\n      onKeyDown={this.onKeyDown}\n      onFocus={this.onFocus}\n      onBlur={this.onBlur}>\n    </input>;\n  }\n}\n\nexport default MachineName;\n","import React from 'react';\n\nclass PageNewIcon extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    return <svg className=\"pagenew-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n      <path d=\"M0 0h24v24H0z\" fill=\"none\"/>\n      <path d=\"M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 2zm-3-7V3.5L18.5 9H13z\"/>\n    </svg>;\n  }\n}\n\nexport default PageNewIcon;\n","import React from 'react';\n\nclass HelpIcon extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    return <svg className=\"help-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n      <path d=\"M0 0h24v24H0z\" fill=\"none\"/>\n      <path d=\"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 17h-2v-2h2v2zm2.07-7.75l-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z\"/>\n    </svg>;\n  }\n}\n\nexport default HelpIcon;\n","import React from 'react';\n\nclass LanguageIcon extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    return <svg className=\"language-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n        <path d=\"M0 0h24v24H0z\" fill=\"none\"/>\n        <path d={\"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 \" +\n        \"22 12S17.52 2 11.99 2zm6.93 6h-2.95c-.32-1.25-.78-2.45-1.38-3.56 1.84.63 \" +\n        \"3.37 1.91 4.33 3.56zM12 4.04c.83 1.2 1.48 2.53 1.91 3.96h-3.82c.43-1.43 \" +\n        \"1.08-2.76 1.91-3.96zM4.26 14C4.1 13.36 4 12.69 4 12s.1-1.36.26-2h3.38c-.08.66-.14 \" +\n        \"1.32-.14 2 0 .68.06 1.34.14 2H4.26zm.82 2h2.95c.32 1.25.78 2.45 \" +\n        \"1.38 3.56-1.84-.63-3.37-1.9-4.33-3.56zm2.95-8H5.08c.96-1.66 2.49-2.93 \" +\n        \"4.33-3.56C8.81 5.55 8.35 6.75 8.03 8zM12 19.96c-.83-1.2-1.48-2.53-1.91-3.96h3.82c-.43 \" +\n        \"1.43-1.08 2.76-1.91 3.96zM14.34 14H9.66c-.09-.66-.16-1.32-.16-2 \" +\n        \"0-.68.07-1.35.16-2h4.68c.09.65.16 1.32.16 2 0 .68-.07 1.34-.16 2zm.25 \" +\n        \"5.56c.6-1.11 1.06-2.31 1.38-3.56h2.95c-.96 1.65-2.49 2.93-4.33 3.56zM16.36 \" +\n        \"14c.08-.66.14-1.32.14-2 0-.68-.06-1.34-.14-2h3.38c.16.64.26 1.31.26 2s-.1 \" +\n        \"1.36-.26 2h-3.38z\"}/>\n    </svg>;\n  }\n}\n\nexport default LanguageIcon;\n","import React from 'react';\n\nclass OfflineIcon extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    return <svg className=\"offline-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n      <path fill=\"none\" d=\"M0 0h24v24H0z\"/>\n      <path d=\"M12 2.02c-5.51 0-9.98 4.47-9.98 9.98s4.47 9.98 9.98 9.98 9.98-4.47 9.98-9.98S17.51 2.02 12 2.02zM11.48 20v-6.26H8L13 4v6.26h3.35L11.48 20z\"/>\n    </svg>;\n  }\n}\n\nexport default OfflineIcon;\n","import React from 'react';\n\nclass BugReportIcon extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  //Override\n  render()\n  {\n    return <svg className=\"bugreport-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n      <path d={\"M20 8h-2.81c-.45-.78-1.07-1.45-1.82-1.96L17 4.41 15.59 \" +\n      \"3l-2.17 2.17C12.96 5.06 12.49 5 12 5s-.96.06-1.41.17L8.41 3 7 \" +\n      \"4.41l1.62 1.63C7.88 6.55 7.26 7.22 6.81 8H4v2h2.09c-.05.33-.09.66-.09 \" +\n      \"1v1H4v2h2v1c0 .34.04.67.09 1H4v2h2.81c1.04 1.79 2.97 3 5.19 \" +\n      \"3s4.15-1.21 5.19-3H20v-2h-2.09c.05-.33.09-.66.09-1v-1h2v-2h-2v-1c0-.\"\n      + \"34-.04-.67-.09-1H20V8zm-4 4v3c0 .22-.03.47-.07.7l-.1.65-.37.65c-.72 \" +\n      \"1.24-2.04 2-3.46 2s-2.74-.77-3.46-2l-.37-.64-.1-.65C8.03 \" +\n      \"15.48 8 15.23 8 15v-4c0-.23.03-.48.07-.7l.1-.65.37-.65c.3-.52.72-.97 \" +\n      \"1.21-1.31l.57-.39.74-.18c.31-.08.63-.12.94-.12.32 0 \" +\n      \".63.04.95.12l.68.16.61.42c.5.34.91.78 1.21 1.31l.38.65.1.65c.04.22.07\" +\n      \".47.07.69v1zm-6 2h4v2h-4zm0-4h4v2h-4z\"}/>\n    </svg>;\n  }\n}\n\nexport default BugReportIcon;\n","import React from 'react';\nimport './DrawerExpander.css';\n\nclass DrawerExpander extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.onClick = this.onClick.bind(this);\n  }\n\n  onClick(e)\n  {\n    const app = this.props.app;\n    if (app.state.isFullscreen)\n    {\n      app.setState({isFullscreen: false});\n    }\n    else if (app.state.isOpen)\n    {\n      app.closeDrawer();\n    }\n    else\n    {\n      app.openDrawer();\n    }\n  }\n\n  //Override\n  render()\n  {\n    const app = this.props.app;\n    const open = app.state.isOpen;\n\n    return <div className={\"drawer-expand\" + (open ? \" open\" : \"\")}\n      onClick={this.onClick}>\n      <svg viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\n        <path d=\"M5 3.737l12.395 8.263-12.395 8.263v-16.526zm-2-3.737v24l18-12-18-12z\"/>\n      </svg>\n    </div>;\n  }\n}\n\nexport default DrawerExpander;\n","import React from 'react';\nimport './Drawer.css';\n\nimport DrawerExpander from './DrawerExpander.js';\n\nimport { DEFAULT_PANELS } from 'modules/abstract/AbstractModule.js';\nconst DEFAULT_TAB_INDEX = 0;\n\nconst MAX_PANEL_THRESHOLD = 50;\nconst MIN_PANEL_SIZE = 300;//180\n\nclass Drawer extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.state = {\n      tabIndex: DEFAULT_TAB_INDEX,\n      dragging: false\n    };\n\n    this.onTouchStart = this.onTouchStart.bind(this);\n    this.onMouseDown = this.onMouseDown.bind(this);\n    this.onScroll = this.onScroll.bind(this);\n\n    this._ontouchmove = null;\n    this._ontouchend = null;\n  }\n\n  setTab(index)\n  {\n    const app = this.props.app;\n\n    //Open drawer if it is closed\n    if (!app.state.isOpen)\n    {\n      app.openDrawer();\n    }\n    //Full drawer if clicked on same one\n    else\n    {\n      if (this.state.tabIndex === index)\n      {\n        app.openDrawer(!app.state.isFullscreen);\n      }\n    }\n\n    this.setState((prev, props) => {\n      return { tabIndex: index };\n    });\n  }\n\n  onStartDraggingDrawerBorder(x, y)\n  {\n    const app = this.props.app;\n    this.setState({dragging: true});\n\n    //Disable fullscreen if dragging off of it\n    if (app.state.isFullscreen)\n    {\n      app.openDrawer(false);\n    }\n\n    //Update panel to current click position\n    updatePanelSize(app, x, y);\n  }\n\n  onStopDraggingDrawerBorder()\n  {\n    this.setState({dragging: false});\n  }\n\n  onTouchStart(e)\n  {\n    e.stopPropagation();\n    e.preventDefault();\n\n    if (this._ontouchmove)\n    {\n      document.removeEventListener(\"touchmove\", this._ontouchmove);\n      this._ontouchmove = null;\n    }\n\n    if (this._ontouchend)\n    {\n      document.removeEventListener(\"touchend\", this._ontouchend);\n      this._ontouchend = null;\n    }\n\n    const app = this.props.app;\n    //Ignore drag move if closed\n    if (!app.state.isOpen)\n    {\n      /*\n      //Opens the drawer if dragging, but closed\n      this.props.app.openDrawer();\n      */\n      this.setState({dragging: false});\n      return;\n    }\n\n    const touch = e.changedTouches[0];\n    this.onStartDraggingDrawerBorder(touch.clientX, touch.clientY);\n\n    this._ontouchmove = function(ev)\n    {\n      e.stopPropagation();\n      e.preventDefault();\n\n      const touch = ev.changedTouches[0];\n      updatePanelSize(app, touch.clientX, touch.clientY);\n    };\n\n    document.addEventListener(this._ontouchmove);\n\n    this._ontouchend = function(ev)\n    {\n      e.stopPropagation();\n      e.preventDefault();\n\n      const touch = ev.changedTouches[0];\n      updatePanelSize(app, touch.clientX, touch.clientY);\n      this.onStopDraggingDrawerBorder();\n\n      //Remove listeners that are no longer needed\n      document.removeEventListener(\"touchend\", this._ontouchend);\n      document.removeEventListener(\"touchmove\", this._ontouchmove);\n    };\n\n    //Start listening to move and release events\n    document.addEventListener(\"touchend\", this._ontouchend);\n    document.addEventListener(\"touchmove\", this._ontouchmove);\n  }\n\n  onMouseDown(e)\n  {\n    e.stopPropagation();\n    e.preventDefault();\n\n    const app = this.props.app;\n    //Ignore drag move if closed\n    if (!app.state.isOpen)\n    {\n      /*\n      //Opens the drawer if dragging, but closed\n      this.props.app.openDrawer();\n      */\n      return;\n    }\n\n    this.onStartDraggingDrawerBorder(e.clientX, e.clientY);\n\n    const onMouseMove = (ev) => {\n      ev.stopPropagation();\n      ev.preventDefault();\n\n      updatePanelSize(app, ev.clientX, ev.clientY);\n    };\n\n    const onMouseUp = (ev) => {\n      ev.stopPropagation();\n      ev.preventDefault();\n\n      updatePanelSize(app, ev.clientX, ev.clientY);\n      this.onStopDraggingDrawerBorder();\n\n      //Remove listeners that are no longer needed\n      document.removeEventListener(\"mouseup\", onMouseUp);\n      document.removeEventListener(\"mousemove\", onMouseMove);\n    };\n\n    //Start listening to move and release events\n    document.addEventListener(\"mouseup\", onMouseUp);\n    document.addEventListener(\"mousemove\", onMouseMove);\n  }\n\n  onScroll(e)\n  {\n    //if (this.panel)\n    {\n      //TODO: this.panel.container.scrollBy(0, e.deltaY);\n      //TODO: return false;\n    }\n  }\n\n  render()\n  {\n    const app = this.props.app;\n    const currentModule = this.props.currentModule;\n    const graphController = currentModule.getGraphController();\n    const machineController = currentModule.getMachineController();\n\n    const tabIndex = this.state.tabIndex;\n    const InfoPanel = currentModule ? currentModule.getModulePanels()[0] : null;\n\n    return <div className={\"drawer-container\"} onWheel={this.onScroll}>\n      <div className=\"drawer-content\">\n      {\n        currentModule &&\n        currentModule.getModulePanels().map((PanelClass, i) => {\n          const panelID = i + 1;\n          return <PanelClass key={currentModule.getModuleName() + \":\" + panelID}\n            style={{display: tabIndex == panelID ? \"block\" : \"none\"}}\n            currentModule={currentModule}/>;\n        })\n      }\n      {\n        tabIndex == 0 && InfoPanel != null &&\n        <InfoPanel currentModule={currentModule}/>\n      }\n      {\n        DEFAULT_PANELS.map((PanelClass, i) => {\n          const panelID = -(i + 1);\n          return <PanelClass key={\"default:\" + panelID}\n            style={{display: tabIndex == panelID ? \"block\" : \"none\"}}\n            currentModule={currentModule}/>;\n        })\n      }\n      </div>\n      <div className=\"tab-list\">\n        <DrawerExpander app={app}/>\n        {\n          currentModule &&\n          currentModule.getModulePanels().map((PanelClass, i) => {\n            //Hide panels with no name...\n            if (!PanelClass.UNLOCALIZED_NAME) return;\n\n            const panelID = i + 1;\n            return <button key={currentModule.getModuleName() + \":\" + panelID}\n              className={\"tab-link\" + (tabIndex === panelID ? \" active\" : \"\")}\n              onClick={ev=>this.setTab(panelID)}>\n              {I18N.toString(PanelClass.UNLOCALIZED_NAME || \"component.untitled.title\")}\n            </button>;\n          })\n        }\n        {\n          DEFAULT_PANELS.map((PanelClass, i) => {\n            const panelID = -(i + 1);\n            return <button key={\"default:\" + panelID}\n              className={\"tab-link\" + (tabIndex === panelID ? \" active\" : \"\")}\n              onClick={ev=>this.setTab(panelID)}>\n              {I18N.toString(PanelClass.UNLOCALIZED_NAME || \"component.untitled.title\")}\n            </button>;\n          })\n        }\n        <div className=\"tab-right\"></div>\n      </div>\n\n      <div className={\"drawer-border\" + (this.state.dragging ? \" dragging\" : \"\")}\n        onTouchStart={this.onTouchStart}\n        onMouseDown={this.onMouseDown}>\n      </div>\n    </div>;\n  }\n}\n\nfunction updatePanelSize(app, x, y)\n{\n  const container = app.container;\n  let fullscreen = false;\n  let size = 0;\n  //This is the same criteria as in App.css\n  if (window.matchMedia(\"(max-width: 420px)\").matches)\n  {\n    //Vertical slide\n    const viewportOffsetY = app.viewport.ref.getBoundingClientRect().y;\n    if (y - viewportOffsetY < MAX_PANEL_THRESHOLD)\n    {\n      //Enable fullscreen\n      app.setState((prev, props) => {\n        return {\n          isFullscreen: true\n        };\n      });\n    }\n    else\n    {\n      size = container.offsetHeight - y;\n\n      //Disable fullscreen\n      if (app.state.isFullscreen)\n      {\n        app.setState((prev, props) => {\n          return {\n            isFullscreen: false\n          };\n        });\n      }\n    }\n  }\n  else\n  {\n    //Horizontal slide\n    if (x < MAX_PANEL_THRESHOLD)\n    {\n      //Enable fullscreen\n      app.setState((prev, props) => {\n        return {\n          isFullscreen: true\n        };\n      });\n    }\n    else\n    {\n      size = container.offsetWidth - x;\n\n      //Disable fullscreen\n      if (app.state.isFullscreen)\n      {\n        app.setState((prev, props) => {\n          return {\n            isFullscreen: false\n          };\n        });\n      }\n    }\n  }\n\n  //Make sure is greater than minimum size and vice versa\n  if (size < MIN_PANEL_SIZE) size = MIN_PANEL_SIZE;\n\n  //Set panel size\n  container.style.setProperty(\"--panel-size\", size + \"px\");\n}\nDrawer.EXPORTING_PANEL_TAB_INDEX = -1;\nDrawer.OPTIONS_PANEL_TAB_INDEX = -2;\n\nexport default Drawer;\n","import React from 'react';\nimport './Toolbar.css';\n\nimport Config from 'config.js';\n\nimport UploadButton from \"./UploadButton.js\";\nimport HelpButton from \"./HelpButton.js\";\nimport MachineName from './MachineName.js';\n\nimport IconButton from 'icons/IconButton.js';\n\nimport MoreIcon from 'icons/MoreIcon.js';\nimport UploadIcon from 'icons/UploadIcon.js';\nimport CreateIcon from 'icons/PageNewIcon.js';\n//import CreateIcon from 'icons/CreateIcon.js';\nimport SaveIcon from 'icons/SaveIcon.js';\n//import SaveIcon from 'icons/DiskSaveIcon.js';\nimport UndoIcon from 'icons/UndoIcon.js';\nimport RedoIcon from 'icons/RedoIcon.js';\nimport HelpIcon from 'icons/HelpIcon.js';\nimport LanguageIcon from 'icons/LanguageIcon.js';\nimport OfflineIcon from 'icons/OfflineIcon.js';\nimport OfflinePinIcon from 'icons/OfflinePinIcon.js';\nimport BugReportIcon from 'icons/BugReportIcon.js';\n\nimport Drawer from 'content/drawer/Drawer.js';\n\nconst BUG_REPORT_URL = \"https://goo.gl/forms/XSil43Xl5xLHsa0E2\";\n\nclass Toolbar extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.state = {\n      langOn: false\n    };\n\n    this.onMachineNameChange = this.onMachineNameChange.bind(this);\n    this.onMachineNameKeyDown = this.onMachineNameKeyDown.bind(this);\n    this.langOnClick = this.langOnClick.bind(this);\n  }\n\n  onMachineNameChange(e)\n  {\n    this.props.currentModule.getMachineController().renameMachine(e.value);\n  }\n\n  onMachineNameKeyDown()\n  {\n\n  }\n\n  onMachineNameBlur()\n  {\n\n  }\n\n  langOnClick()\n  {\n    this.setState({langOn: !this.state.langOn});\n  }\n\n  render()\n  {\n    const app = this.props.app;\n    const currentModule = this.props.currentModule;\n    const drawer = this.props.drawer;\n    const graphController = currentModule.getGraphController();\n    const machineController = currentModule.getMachineController();\n    const undoManager = app.getUndoManager();\n\n    const graph = graphController.getGraph();\n\n    const offline = navigator && navigator.onLine;\n\n    return <div className=\"toolbar-container\">\n      <div className=\"toolbar-title\">\n        <div className=\"toolbar-title-name\">\n          {/*Machine Name*/}\n          <MachineName id=\"machine-name\" value={machineController.getMachineName()} onSubmit={this.onMachineNameChange}/>\n          {/*Toolbar Alt. Title*/}\n          <div className=\"toolbar-title-alt\">\n            {/*Offline Button*/}\n            <IconButton id=\"toolbar-lang\" title={I18N.toString(\"action.toolbar.lang\")}\n              onClick={() => {\n                if ('serviceWorker' in navigator)\n                {\n                  if (navigator.serviceWorker.getRegistration(\"./app.html\"))\n                  {\n                    alert(I18N.toString(\"message.offline.ready\"));\n                  }\n                  else\n                  {\n                    alert(I18N.toString(\"message.offline.failed\"));\n                  }\n                }\n                else\n                {\n                  alert(I18N.toString(\"message.offline.nosupport\"));\n                }\n              }} disabled={offline}>\n              <OfflineIcon/>\n            </IconButton>\n            {/*Upload Button\n            <div id=\"toolbar-upload-alt\"\n              title={I18N.toString(\"action.toolbar.uploadmachine\")}>\n              <MoreIcon/>\n            </div>\n            */}\n          </div>\n        </div>\n        {/*Machine Type*/}\n        <label id=\"machine-type\"\n          onClick={()=>drawer.setTab(0)}>\n          {currentModule.getLocalizedModuleName()}\n        </label>\n      </div>\n\n      <div className=\"toolbar-tray\">\n        {/*New Button*/}\n        <IconButton className=\"navicon\" id=\"toolbar-new\" title={I18N.toString(\"action.toolbar.newmachine\")}\n          onClick={() => {\n            if (window.confirm(I18N.toString(\"alert.graph.clear\")))\n            {\n              graph.clear();\n              undoManager.clear();\n              machineController.setMachineName(null);\n            }\n          }}>\n          <CreateIcon/>\n        </IconButton>\n        {/*Upload Button*/}\n        <UploadButton className=\"navicon\" id=\"toolbar-upload\" title={I18N.toString(\"action.toolbar.uploadmachine\")}\n          app={app}\n          graphController={graphController}>\n          <UploadIcon/>\n        </UploadButton>\n        {/*Undo Button*/}\n        <IconButton className=\"navicon\" id=\"toolbar-undo\" title={I18N.toString(\"action.toolbar.undo\")}\n          disabled={!undoManager.canUndo()}\n          onClick={()=>undoManager.undo()}>\n          <UndoIcon/>\n        </IconButton>\n        {/*Redo Button*/}\n        <IconButton className=\"navicon\" id=\"toolbar-redo\" title={I18N.toString(\"action.toolbar.redo\")}\n          disabled={!undoManager.canRedo()}\n          onClick={()=>undoManager.redo()}>\n          <RedoIcon/>\n        </IconButton>\n        {/*Save Button*/}\n        <IconButton className=\"navicon\" id=\"toolbar-save\" title={I18N.toString(\"action.toolbar.save\")}\n          onClick={()=>drawer.setTab(Drawer.EXPORTING_PANEL_TAB_INDEX)} disabled={graph.isEmpty()}>\n          <SaveIcon/>\n        </IconButton>\n\n        {/*Right Alt. Toolbar*/}\n        <div className=\"toolbar-tray-alt\">\n          {/*Report a Bug Button*/}\n          <IconButton className=\"navicon\" id=\"toolbar-bug\" title={I18N.toString(\"action.toolbar.bug\")}\n            onClick={e => window.open(BUG_REPORT_URL, '_blank')}>\n            <BugReportIcon/>\n          </IconButton>\n          {/*Help Button*/}\n          <HelpButton className=\"navicon\" id=\"toolbar-help\" title={I18N.toString(\"action.toolbar.help\")}>\n            <HelpIcon/>\n          </HelpButton>\n          {/*Language Button*/}\n          <IconButton className=\"navicon\" id=\"toolbar-lang\" title={I18N.toString(\"action.toolbar.lang\")}\n            onClick={(e) => {document.activeElement.blur(); this.langOnClick();}} >\n            <LanguageIcon/>\n          </IconButton>\n          {/*Language Select*/}\n          <select id=\"toolbar-lang-select\" style={{maxWidth: (this.state.langOn ? \"10em\" : \"0\")}} onChange={(e) => {I18N.fetchLanguageFile(e.target.value);}}>\n            <option value=\"en_us\">English</option>\n            <option value=\"xx_pirate\">Pirate Speak</option>\n          </select>\n        </div>\n      </div>\n    </div>;\n  }\n}\n\nexport default Toolbar;\n","import React from 'react';\nimport './Subtitle.css';\n\nimport Config from 'config.js';\n\nclass Subtitle extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.state = { active: false };\n\n    this.messageTimer = null;\n  }\n\n  componentDidMount()\n  {\n    this.messageTimer = setTimeout(() => {\n      this.setState({ active: true });\n    }, Config.INIT_WAITTIME);\n  }\n\n  render()\n  {\n    const visible = this.state.active ? this.props.visible : false;\n    return <text y=\"-1em\" className={\"graph-ui subtitle\" + (visible ? \" visible\" : \"\")}\n      textAnchor=\"middle\">{I18N.toString(\"message.workspace.empty\")}</text>;\n  }\n}\n\nexport default Subtitle;\n","import React from 'react';\nimport './Workspace.css';\n\nimport Config from 'config.js';\n\nimport Subtitle from './Subtitle.js';\n\nconst WORKSPACE_OFFSET_X = 0;\nconst WORKSPACE_OFFSET_Y = 0;\nconst EXPORT_PADDING_X = 30;\nconst EXPORT_PADDING_Y = 0;\n\nconst GRAPH_RENDER_LAYER = \"graph\";\nconst GRAPH_OVERLAY_RENDER_LAYER = \"graphoverlay\";\n\nclass Workspace extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.ref = null;\n  }\n\n  getSVGForExport(width, height)\n  {\n    const svg = this.ref;\n    if (!svg) return null;\n\n    const currentModule = this.props.currentModule;\n    const inputController = currentModule.getInputController();\n    const graphController = currentModule.getGraphController();\n\n    const viewport = inputController.getInputAdapter().getViewport();\n    const offsetX = viewport.getOffsetX();\n    const offsetY = viewport.getOffsetY();\n    const bounds = graphController.getGraph().getBoundingRect();\n    const dx = bounds.minX + offsetX - EXPORT_PADDING_X;\n    const dy = bounds.minY + offsetY - EXPORT_PADDING_Y;\n    const w = bounds.width + EXPORT_PADDING_X * 2;\n    const h = bounds.height + EXPORT_PADDING_Y * 2;\n    const clone = svg.cloneNode(true);\n    clone.setAttribute('viewBox', dx + \" \" + dy + \" \" + w + \" \" + h);\n    clone.setAttribute('width', width);\n    clone.setAttribute('height', height);\n\n    //Apply the workspace font (refer to Workspace.css)\n    clone.setAttribute('font-size', \"16px\");\n    clone.setAttribute('font-family', \"monospace\");\n    clone.setAttribute('style', \".graph-ui {display: none;}\");\n\n    /*\n    //TODO: Link the font family to svg\n    const link = document.createElement(\"link\");\n    link.setAttribute(\"rel\", \"stylesheet\");\n    clone.appendChild(link);\n    */\n\n    //Remove unwanted ui elements from image\n    const uiElements = clone.getElementsByClassName(\"graph-ui\");\n    while(uiElements.length > 0)\n    {\n      const e = uiElements[0];\n      e.remove();//This will propagate changes to uiElements, so be careful\n    }\n\n    return clone;\n  }\n\n  render()\n  {\n    const currentModule = this.props.currentModule;\n    const graphController = currentModule.getGraphController();\n    const inputController = currentModule.getInputController();\n    const machineController = currentModule.getMachineController();\n\n    const GraphRenderer = currentModule.getRenderer(GRAPH_RENDER_LAYER);\n    const GraphOverlayRenderer = currentModule.getRenderer(GRAPH_OVERLAY_RENDER_LAYER);\n\n    const graph = graphController.getGraph();\n    const viewport = inputController.getInputAdapter().getViewport();\n\n    let size = Config.DEFAULT_GRAPH_SIZE * Math.max(Number.MIN_VALUE, viewport.getScale());\n    const halfSize = size / 2;\n\n    //Must not be a block content (must inline)\n    return <svg id=\"workspace-content\" ref={ref=>this.ref=ref}\n      viewBox={(-halfSize + WORKSPACE_OFFSET_X) + \" \"\n        + (-halfSize + WORKSPACE_OFFSET_Y) + \" \"\n        + size + \" \" + size}\n      xmlns=\"http://www.w3.org/2000/svg\">\n\n      {/* Graph subtitle */}\n      <Subtitle visible={graph.isEmpty()}/>\n\n      {/* Graph elements */}\n      <g id=\"workspace-content-elements\" transform={\"translate(\"\n        + viewport.getOffsetX() + \" \"\n        + viewport.getOffsetY() + \")\"}>\n\n        {/* Graph origin crosshair */}\n        <g className=\"graph-ui\">\n          <line x1=\"0\" y1=\"-5\" x2=\"0\" y2=\"5\" stroke=\"#E6E6E6\"/>\n          <line x1=\"-5\" y1=\"0\" x2=\"5\" y2=\"0\" stroke=\"#E6E6E6\"/>\n        </g>\n\n        {/* Graph objects */}\n        { GraphRenderer &&\n          <GraphRenderer {...this.props} parent={this}/> }\n\n        {/* Graph overlays */}\n        { GraphOverlayRenderer &&\n          <GraphOverlayRenderer {...this.props} parent={this}/> }\n      </g>\n    </svg>;\n  }\n}\n\nexport default Workspace;\n","import Notifications from 'system/notification/Notifications.js';\nimport LocalSave from 'system/localsave/LocalSave.js';\nimport Config from 'config.js';\n\nclass Tutorial\n{\n  constructor()\n  {\n    this.app = null;\n  }\n\n  start(app)\n  {\n    if (LocalSave.getStringFromStorage(\"skipWelcome\") !== \"true\")\n    {\n      Notifications.addMessage(I18N.toString(\"message.tutorial.1\"));\n      Notifications.addMessage(I18N.toString(\"message.intro.2\"));\n    }\n  }\n}\n\nexport default Tutorial;\n","import React from 'react';\nimport { hot } from 'react-hot-loader/root';\nimport './App.css';\n\nimport Config from 'config.js';\n\n//import Modules from './Modules.js';\n//import Module from 'modules/default/DefaultModule.js';\nimport Module from 'modules/fsa/FSAModule.js';\nimport ModuleLoader from 'modules/ModuleLoader.js';\n\nimport HotKeys from './HotKeys.js';\nimport LocalSave from 'system/localsave/LocalSave.js';\n\nimport Toolbar from './toolbar/Toolbar.js';\nimport Workspace from './workspace/Workspace.js';\nimport Drawer from './drawer/Drawer.js';\nimport Viewport from './viewport/Viewport.js';\nimport Tutorial from 'tutorial/Tutorial.js';\n\nimport InputAdapter from 'system/inputadapter/InputAdapter.js';\nimport Notifications from 'system/notification/Notifications.js';\nimport NotificationView from 'system/notification/components/NotificationView.js';\nimport UndoManager from 'system/undomanager/UndoManager.js';\n\nconst SMOOTH_OFFSET_DAMPING = 0.4;\nconst MIN_SCALE = 0.1;\nconst MAX_SCALE = 10;\n\nclass App extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    //Create references\n    this.container = null;\n    this.workspace = null;\n    this.viewport = null;\n    this.drawer = null;\n    this.toolbar = null;\n\n    //These need to be initialized before module\n    this.inputAdapter = new InputAdapter();\n    this.inputAdapter.getViewport()\n      .setMinScale(MIN_SCALE)\n      .setMaxScale(MAX_SCALE)\n      .setOffsetDamping(SMOOTH_OFFSET_DAMPING);\n\n    this.undoManager = new UndoManager();\n\n    //Modules should handle its own initialization, regardless of web state\n    //Also, loading from file should be handled by modules themselves\n    const ModuleClass = props.moduleClass || Module;\n    this._module = new ModuleClass(this);\n\n    this.hotKeys = new HotKeys();\n    this.tutorial = new Tutorial();\n\n    this.state = {\n      isOpen: true,\n      isDangerous: false,\n      isFullscreen: false,\n      isWaitingForFile: false\n    };\n\n    this.onDragOver = this.onDragOver.bind(this);\n    this.onDragEnter = this.onDragEnter.bind(this);\n    this.onDragLeave = this.onDragLeave.bind(this);\n    this.onFileDrop = this.onFileDrop.bind(this);\n\n    this._init = false;\n  }\n\n  //Override\n  componentDidMount()\n  {\n    //Initialize input adapter\n    const workspaceDOM = this.workspace.ref;\n    this.inputAdapter.initialize(workspaceDOM);\n\n    //Initialize the module...\n    const module = this.getCurrentModule();\n    module.initialize(this);\n\n    this.hotKeys.initialize(this);\n\n    //Upload drop zone\n    workspaceDOM.addEventListener(\"drop\", this.onFileDrop);\n    workspaceDOM.addEventListener(\"dragover\", this.onDragOver);\n    workspaceDOM.addEventListener(\"dragenter\", this.onDragEnter);\n    workspaceDOM.addEventListener(\"dragleave\", this.onDragLeave);\n\n    //Begin tutorial\n    this.tutorial.start(this);\n\n    LocalSave.registerHandler(this);\n\n    this._init = true;\n  }\n\n  //Override\n  componentWillUnmount()\n  {\n    LocalSave.unregisterHandler(this);\n\n    this.hotKeys.destroy();\n\n    this._module.destroy(this);\n\n    this.inputAdapter.destroy();\n\n    //Upload drop zone\n    const workspaceDOM = this.workspace.ref;\n    workspaceDOM.removeEventListener(\"drop\", this.onFileDrop);\n    workspaceDOM.removeEventListener(\"dragover\", this.onDragOver);\n    workspaceDOM.removeEventListener(\"dragenter\", this.onDragEnter);\n    workspaceDOM.removeEventListener(\"dragleave\", this.onDragLeave);\n\n    this._init = false;\n  }\n\n  //Ducktype(AbstractLocalSaver)\n  onLoadSave()\n  {\n    const moduleName = this._module.getModuleName();\n\n    const data = LocalSave.loadFromStorage(\"graph-\" + moduleName);\n    if (data)\n    {\n      const exporter = this._module.getDefaultGraphExporter();\n      exporter.importFromData(data, this._module);\n    }\n  }\n\n  //Ducktype(AbstractLocalSaver)\n  onAutoSave()\n  {\n    const moduleName = this._module.getModuleName();\n\n    const exporter = this._module.getDefaultGraphExporter();\n    const data = exporter.exportToData(this._module);\n    LocalSave.saveToStorage(\"graph-\" + moduleName, data);\n  }\n\n  //Called to prevent default file open\n  onDragOver(ev)\n  {\n    ev.preventDefault();\n  }\n\n  onDragEnter(ev)\n  {\n    ev.preventDefault();\n\n    //Change state\n    this.setState({ isWaitingForFile: true });\n    this.viewport.setState((prev, props) => {\n      return {\n        prevMode: prev.mode,\n        mode: Viewport.DANGEROUS\n      };\n    });\n  }\n\n  onDragLeave(ev)\n  {\n    ev.preventDefault();\n\n    //Revert state\n    this.setState({ isWaitingForFile: false });\n    this.viewport.setState((prev, props) => {\n      return {\n        prevMode: prev.mode,\n        mode: prev.prevMode\n      };\n    });\n  }\n\n  onFileDrop(ev)\n  {\n    //Prevent file from being opened\n    ev.preventDefault();\n\n    //Revert state\n    this.setState({ isWaitingForFile: false });\n    this.viewport.setState((prev, props) => {\n      return {\n        prevMode: prev.mode,\n        mode: prev.prevMode\n      };\n    });\n\n    let fileBlob = null;\n    if (ev.dataTransfer.items)\n    {\n      const length = ev.dataTransfer.items.length;\n\n      //Just get the first one\n      if (length >= 1)\n      {\n        const file = ev.dataTransfer.items[0];\n        if (file.kind === 'file')\n        {\n          fileBlob = file.getAsFile();\n        }\n      }\n    }\n    else\n    {\n      const length = ev.dataTransfer.files.length;\n\n      //Just get the first one\n      if (length >= 1)\n      {\n        fileBlob = ev.dataTransfer.files[0];\n      }\n    }\n\n    if (fileBlob)\n    {\n      this.props.app.getCurrentModule().getGraphImporter().importFile(fileBlob, this._module)\n        .catch((e) => {\n          Notifications.addErrorMessage(\"ERROR: Unable to load invalid JSON file.\", \"errorUpload\");\n        });\n    }\n\n    if (ev.dataTransfer.items)\n    {\n      ev.dataTransfer.items.clear();\n    }\n    else\n    {\n      ev.dataTransfer.clearData();\n    }\n  }\n\n  openDrawer(full=null)\n  {\n    if (typeof full === 'boolean')\n    {\n      this.setState((prev, props) => {\n        return { isOpen: true, isFullscreen: full };\n      });\n    }\n    else\n    {\n      this.setState((prev, props) => {\n        return { isOpen: true };\n      });\n    }\n  }\n\n  closeDrawer()\n  {\n    this.setState((prev, props) => {\n      return { isOpen: false };\n    });\n  }\n\n  isDrawerOpen()\n  {\n    return this.state.isOpen;\n  }\n\n  shouldHideContent()\n  {\n    return this.state.isFullscreen && this.state.isOpen;\n  }\n\n  getCurrentModule()\n  {\n    return this._module;\n  }\n\n  getInputController()\n  {\n    return this._module.getInputController();\n  }\n\n  getGraphController()\n  {\n    return this._module.getGraphController();\n  }\n\n  getMachineController()\n  {\n    return this._module.getMachineController();\n  }\n\n  getInputAdapter()\n  {\n    return this.inputAdapter;\n  }\n\n  getUndoManager()\n  {\n    return this.undoManager;\n  }\n\n  //Override\n  render()\n  {\n    const currentModule = this._module;\n    const screen = this.workspace ? this.workspace.ref : null;\n\n    if (this._init)\n    {\n      this.inputAdapter.update();\n      currentModule.update(this);\n    }\n\n    return <div className=\"app-container\" ref={ref=>this.container=ref}\n      style={{animation: ModuleLoader.isModuleLoading() ? \"fadeout 1s\" : \"fadein 1s\"}}>\n      <Toolbar ref={ref=>this.toolbar=ref}\n        app={this}\n        currentModule={currentModule}\n        drawer={this.drawer}/>\n\n      <NotificationView notificationManager={Notifications}/>\n\n      <div className=\"workspace-container\">\n        <div className={\"workspace-main\" +\n          (this.state.isOpen ? \" open\" : \"\")}\n          style={{\n            visibility: this.shouldHideContent() ? \"hidden\" : \"visible\",\n            opacity: this.state.isWaitingForFile ? \"0.1\" : \"1\"\n          }}>\n\n          <Workspace ref={ref=>this.workspace=ref}\n            currentModule={currentModule}/>\n        </div>\n\n        <div className={\"workspace-viewport\" +\n          (this.state.isOpen ? \" open\" : \"\")}\n          style={{\n            visibility: this.shouldHideContent() ? \"hidden\" : \"visible\"\n          }}>\n\n          <Viewport ref={ref=>this.viewport=ref}\n            app={this}\n            currentModule={currentModule}\n            screen={screen}/>\n        </div>\n\n        <div className={\"workspace-drawer\" +\n          (this.state.isOpen ? \" open\" : \"\") +\n          (this.state.isFullscreen ? \" fullscreen\" : \"\")}>\n\n          <Drawer ref={ref=>this.drawer=ref}\n            app={this}\n            currentModule={currentModule}\n            toolbar={this.toolbar}/>\n        </div>\n      </div>\n    </div>;\n  }\n}\n\n//For hotloading this class\nexport default hot(App);\n","class GraphImporter\n{\n  constructor(module)\n  {\n    this._module = module;\n  }\n\n  importFile(fileBlob, module)\n  {\n    if (!fileBlob) throw new Error(\"Unable to import null file\");\n    if (!(fileBlob instanceof File)) throw new Error(\"Unable to import object as file\");\n\n    let result = Promise.reject();\n    const fileName = fileBlob.name;\n    const exporters = module.getGraphExporters();\n\n    for(const exporter of exporters)\n    {\n      if (exporter.canImport() && exporter.doesSupportFile() && fileName.endsWith(exporter.getFileType()))\n      {\n        result = result.catch(e => exporter.importFromFile(fileBlob, module));\n      }\n    }\n\n    return result.catch(e => {\n      console.error(e);\n      throw new Error(\"Cannot find valid exporter for file: \" + fileName);\n    });\n  }\n\n  importData(data, module)\n  {\n    if (!data) throw new Error(\"Unable to import null data\");\n\n    let result = Promise.reject();\n    const exporters = module.getGraphExporters();\n\n    for(const exporter of exporters)\n    {\n      if (exporter.canImport() && exporter.doesSupportData())\n      {\n        result = result.catch(e => exporter.importFromData(data, module));\n      }\n    }\n\n    return result.catch(e => {\n      throw new Error(\"Cannot find valid exporter for data: \" + JSON.stringify(data));\n    });\n  }\n\n  getImportFileTypes()\n  {\n    return this._module.getGraphExporters().map(e => {\n      if (!e.canImport() || !e.doesSupportFile()) return null;\n      return '.' + e.getFileType();\n    });\n  }\n}\n\nexport default GraphImporter;\n","//https://www.flaticon.com/free-icon/png_136523\nimport React from 'react';\n\nclass PNGIcon extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    return <svg className=\"png-icon\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 56 56\">\n      <g>\n        <path fill=\"#E9E9E0\" d=\"M36.985,0H7.963C7.155,0,6.5,0.655,6.5,1.926V55c0,0.345,0.655,1,1.463,1h40.074 c0.808,0,1.463-0.655,1.463-1V12.978c0-0.696-0.093-0.92-0.257-1.085L37.607,0.257C37.442,0.093,37.218,0,36.985,0z\"/>\n        <path fill=\"#659C35\" d=\"M48.037,56H7.963C7.155,56,6.5,55.345,6.5,54.537V39h43v15.537C49.5,55.345,48.845,56,48.037,56z\"/>\n        <polygon fill=\"#D9D7CA\" points=\"37.5,0.151 37.5,12 49.349,12 \t\"/>\n        <g>\n          <path fill=\"#FFFFFF\" d=\"M17.385,53h-1.641V42.924h2.898c0.428,0,0.852,0.068,1.271,0.205 c0.419,0.137,0.795,0.342,1.128,0.615c0.333,0.273,0.602,0.604,0.807,0.991s0.308,0.822,0.308,1.306 c0,0.511-0.087,0.973-0.26,1.388c-0.173,0.415-0.415,0.764-0.725,1.046c-0.31,0.282-0.684,0.501-1.121,0.656 s-0.921,0.232-1.449,0.232h-1.217V53z M17.385,44.168v3.992h1.504c0.2,0,0.398-0.034,0.595-0.103 c0.196-0.068,0.376-0.18,0.54-0.335c0.164-0.155,0.296-0.371,0.396-0.649c0.1-0.278,0.15-0.622,0.15-1.032 c0-0.164-0.023-0.354-0.068-0.567c-0.046-0.214-0.139-0.419-0.28-0.615c-0.142-0.196-0.34-0.36-0.595-0.492 c-0.255-0.132-0.593-0.198-1.012-0.198H17.385z\"/>\n          <path fill=\"#FFFFFF\" d=\"M31.316,42.924V53h-1.668l-3.951-6.945V53h-1.668V42.924h1.668l3.951,6.945v-6.945H31.316z\"/>\n          <path fill=\"#FFFFFF\" d={\"M41.16,47.805v3.896c-0.21,0.265-0.444,0.48-0.704,0.649s-0.533,0.308-0.82,0.417 \" +\n            \"S39.052,52.954,38.747,53c-0.306,0.046-0.608,0.068-0.909,0.068c-0.602,0-1.155-0.109-1.661-0.328s-0.948-0.542-1.326-0.971 \" +\n            \"c-0.378-0.429-0.675-0.966-0.889-1.613c-0.214-0.647-0.321-1.395-0.321-2.242s0.107-1.593,0.321-2.235 \" +\n            \"c0.214-0.643,0.51-1.178,0.889-1.606c0.378-0.429,0.822-0.754,1.333-0.978c0.51-0.224,1.062-0.335,1.654-0.335 \" +\n            \"c0.547,0,1.057,0.091,1.531,0.273c0.474,0.183,0.897,0.456,1.271,0.82l-1.135,1.012c-0.219-0.265-0.47-0.456-0.752-0.574 \" +\n            \"c-0.283-0.118-0.574-0.178-0.875-0.178c-0.337,0-0.659,0.063-0.964,0.191c-0.306,0.128-0.579,0.344-0.82,0.649 \" +\n            \"c-0.242,0.306-0.431,0.699-0.567,1.183s-0.21,1.075-0.219,1.777c0.009,0.684,0.08,1.276,0.212,1.777 \" +\n            \"c0.132,0.501,0.314,0.911,0.547,1.23s0.497,0.556,0.793,0.711c0.296,0.155,0.608,0.232,0.937,0.232c0.1,0,0.234-0.007,0.403-0.021 \" +\n            \"c0.168-0.014,0.337-0.036,0.506-0.068c0.168-0.032,0.33-0.075,0.485-0.13c0.155-0.055,0.269-0.132,0.342-0.232v-2.488h-1.709 v-1.121H41.16z\"}/>\n        </g>\n        <circle fill=\"#F3D55B\" cx=\"18.931\" cy=\"14.431\" r=\"4.569\"/>\n        <polygon fill=\"#88C057\" points=\"6.5,39 17.5,39 49.5,39 49.5,28 39.5,18.5 29,30 23.517,24.517 \t\"/>\n      </g>\n    </svg>;\n  }\n}\n\nexport default PNGIcon;\n","//https://www.flaticon.com/free-icon/jpg_136524\nimport React from 'react';\n\nclass JPGIcon extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    return <svg className=\"jpg-icon\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 56 56\">\n      <g>\n        <path fill=\"#E9E9E0\" d=\"M36.985,0H7.963C7.155,0,6.5,0.655,6.5,1.926V55c0,0.345,0.655,1,1.463,1h40.074 c0.808,0,1.463-0.655,1.463-1V12.978c0-0.696-0.093-0.92-0.257-1.085L37.607,0.257C37.442,0.093,37.218,0,36.985,0z\"/>\n        <polygon fill=\"#D9D7CA\" points=\"37.5,0.151 37.5,12 49.349,12 \t\"/>\n        <circle fill=\"#F3D55B\" cx=\"18.931\" cy=\"14.431\" r=\"4.569\"/>\n        <polygon fill=\"#26B99A\" points=\"6.5,39 17.5,39 49.5,39 49.5,28 39.5,18.5 29,30 23.517,24.517 \t\"/>\n        <path fill=\"#14A085\" d=\"M48.037,56H7.963C7.155,56,6.5,55.345,6.5,54.537V39h43v15.537C49.5,55.345,48.845,56,48.037,56z\"/>\n        <g>\n          <path fill=\"#FFFFFF\" d={\"M21.426,42.65v7.848c0,0.474-0.087,0.873-0.26,1.196c-0.173,0.323-0.406,0.583-0.697,0.779 \" +\n            \"c-0.292,0.196-0.627,0.333-1.005,0.41C19.085,52.961,18.696,53,18.295,53c-0.201,0-0.436-0.021-0.704-0.062 \" +\n            \"c-0.269-0.041-0.547-0.104-0.834-0.191s-0.563-0.185-0.827-0.294c-0.265-0.109-0.488-0.232-0.67-0.369l0.697-1.107 \" +\n            \"c0.091,0.063,0.221,0.13,0.39,0.198c0.168,0.068,0.353,0.132,0.554,0.191c0.2,0.06,0.41,0.111,0.629,0.157 \" +\n            \"s0.424,0.068,0.615,0.068c0.483,0,0.868-0.094,1.155-0.28s0.439-0.504,0.458-0.95V42.65H21.426z\"}/>\n          <path fill=\"#FFFFFF\" d={\"M25.514,52.932h-1.641V42.855h2.898c0.428,0,0.852,0.068,1.271,0.205 \" +\n            \"c0.419,0.137,0.795,0.342,1.128,0.615c0.333,0.273,0.602,0.604,0.807,0.991s0.308,0.822,0.308,1.306 \" +\n            \"c0,0.511-0.087,0.973-0.26,1.388c-0.173,0.415-0.415,0.764-0.725,1.046c-0.31,0.282-0.684,0.501-1.121,0.656 \" +\n            \"s-0.921,0.232-1.449,0.232h-1.217V52.932z M25.514,44.1v3.992h1.504c0.2,0,0.398-0.034,0.595-0.103 \" +\n            \"c0.196-0.068,0.376-0.18,0.54-0.335s0.296-0.371,0.396-0.649c0.1-0.278,0.15-0.622,0.15-1.032c0-0.164-0.023-0.354-0.068-0.567 \" +\n            \"c-0.046-0.214-0.139-0.419-0.28-0.615c-0.142-0.196-0.34-0.36-0.595-0.492C27.5,44.166,27.163,44.1,26.744,44.1H25.514z\"}/>\n          <path fill=\"#FFFFFF\" d={\"M39.5,47.736v3.896c-0.21,0.265-0.444,0.48-0.704,0.649s-0.533,0.308-0.82,0.417 \" +\n            \"s-0.583,0.187-0.889,0.232C36.781,52.978,36.479,53,36.178,53c-0.602,0-1.155-0.109-1.661-0.328s-0.948-0.542-1.326-0.971 \" +\n            \"c-0.378-0.429-0.675-0.966-0.889-1.613c-0.214-0.647-0.321-1.395-0.321-2.242s0.107-1.593,0.321-2.235 \" +\n            \"c0.214-0.643,0.51-1.178,0.889-1.606c0.378-0.429,0.822-0.754,1.333-0.978c0.51-0.224,1.062-0.335,1.654-0.335 \" +\n            \"c0.547,0,1.057,0.091,1.531,0.273c0.474,0.183,0.897,0.456,1.271,0.82l-1.135,1.012c-0.219-0.265-0.47-0.456-0.752-0.574 \" +\n            \"c-0.283-0.118-0.574-0.178-0.875-0.178c-0.337,0-0.659,0.063-0.964,0.191c-0.306,0.128-0.579,0.344-0.82,0.649 \" +\n            \"c-0.242,0.306-0.431,0.699-0.567,1.183s-0.21,1.075-0.219,1.777c0.009,0.684,0.08,1.276,0.212,1.777 \" +\n            \"c0.132,0.501,0.314,0.911,0.547,1.23s0.497,0.556,0.793,0.711c0.296,0.155,0.608,0.232,0.937,0.232c0.1,0,0.234-0.007,0.403-0.021 \" +\n            \"c0.168-0.014,0.337-0.036,0.506-0.068c0.168-0.032,0.33-0.075,0.485-0.13c0.155-0.055,0.269-0.132,0.342-0.232v-2.488h-1.709 \" +\n            \"v-1.121H39.5z\"}/>\n        </g>\n      </g>\n    </svg>;\n  }\n}\n\nexport default JPGIcon;\n","import React from 'react';\n\nclass SVGIcon extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  //Override\n  render()\n  {\n    return <svg className=\"svg-icon\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 56 56\">\n    \t<g>\n    \t\t<path fill=\"#E9E9E0\" d=\"M36.985,0H7.963C7.155,0,6.5,0.655,6.5,1.926V55c0,0.345,0.655,1,1.463,1h40.074\n    \t\tc0.808,0,1.463-0.655,1.463-1V12.978c0-0.696-0.093-0.92-0.257-1.085L37.607,0.257C37.442,0.093,37.218,0,36.985,0z\"/>\n    \t\t<polygon fill=\"#D9D7CA\" points=\"37.5,0.151 37.5,12 49.349,12 \t\"/>\n    \t\t<path fill=\"#E57E25\" d=\"M48.037,56H7.963C7.155,56,6.5,55.345,6.5,54.537V39h43v15.537C49.5,55.345,48.845,56,48.037,56z\"/>\n    \t\t<g>\n    \t\t\t<path fill=\"#FFFFFF\"\n    \t\t\t\td=\"M21.459,50.238c0,0.364-0.075,0.718-0.226,1.06s-0.362,0.643-0.636,0.902s-0.61,0.467-1.012,0.622\n    \t\t\ts-0.856,0.232-1.367,0.232c-0.219,0-0.444-0.012-0.677-0.034s-0.467-0.062-0.704-0.116s-0.463-0.13-0.677-0.226\n    \t\t\ts-0.398-0.212-0.554-0.349l0.287-1.176c0.128,0.073,0.289,0.144,0.485,0.212s0.398,0.132,0.608,0.191s0.419,0.107,0.629,0.144\n    \t\t\ts0.405,0.055,0.588,0.055c0.556,0,0.982-0.13,1.278-0.39c0.296-0.26,0.444-0.645,0.444-1.155c0-0.31-0.104-0.574-0.314-0.793\n    \t\t\ts-0.472-0.417-0.786-0.595s-0.654-0.355-1.019-0.533s-0.706-0.388-1.025-0.629s-0.583-0.526-0.793-0.854s-0.314-0.738-0.314-1.23\n    \t\t\tc0-0.446,0.082-0.843,0.246-1.189s0.385-0.641,0.663-0.882s0.602-0.426,0.971-0.554s0.759-0.191,1.169-0.191\n    \t\t\tc0.419,0,0.843,0.039,1.271,0.116s0.774,0.203,1.039,0.376c-0.055,0.118-0.118,0.248-0.191,0.39s-0.142,0.273-0.205,0.396\n    \t\t\ts-0.118,0.226-0.164,0.308s-0.073,0.128-0.082,0.137c-0.055-0.027-0.116-0.063-0.185-0.109s-0.166-0.091-0.294-0.137\n    \t\t\ts-0.296-0.077-0.506-0.096s-0.479-0.014-0.807,0.014c-0.183,0.019-0.355,0.07-0.52,0.157s-0.31,0.193-0.438,0.321\n    \t\t\ts-0.228,0.271-0.301,0.431s-0.109,0.313-0.109,0.458c0,0.364,0.104,0.658,0.314,0.882s0.47,0.419,0.779,0.588\n    \t\t\ts0.647,0.333,1.012,0.492s0.704,0.354,1.019,0.581s0.576,0.513,0.786,0.854S21.459,49.7,21.459,50.238z\"/>\n    \t\t\t<path fill=\"#FFFFFF\" d=\"M25.861,53.055L22.73,42.924h1.873l2.338,8.695l2.475-8.695h1.859l-3.281,10.131H25.861z\"/>\n    \t\t\t<path fill=\"#FFFFFF\"\n    \t\t\t\td=\"M40.668,47.805v3.896c-0.21,0.265-0.444,0.48-0.704,0.649s-0.533,0.308-0.82,0.417\n    \t\t\tS38.561,52.954,38.255,53s-0.608,0.068-0.909,0.068c-0.602,0-1.155-0.109-1.661-0.328s-0.948-0.542-1.326-0.971\n    \t\t\ts-0.675-0.966-0.889-1.613s-0.321-1.395-0.321-2.242s0.107-1.593,0.321-2.235s0.511-1.178,0.889-1.606s0.822-0.754,1.333-0.978\n    \t\t\ts1.062-0.335,1.654-0.335c0.547,0,1.058,0.091,1.531,0.273s0.897,0.456,1.271,0.82l-1.135,1.012\n    \t\t\tc-0.219-0.265-0.47-0.456-0.752-0.574s-0.574-0.178-0.875-0.178c-0.337,0-0.658,0.063-0.964,0.191s-0.579,0.344-0.82,0.649\n    \t\t\ts-0.431,0.699-0.567,1.183s-0.21,1.075-0.219,1.777c0.009,0.684,0.08,1.276,0.212,1.777s0.314,0.911,0.547,1.23\n    \t\t\ts0.497,0.556,0.793,0.711s0.608,0.232,0.937,0.232c0.101,0,0.234-0.007,0.403-0.021s0.337-0.036,0.506-0.068\n    \t\t\ts0.33-0.075,0.485-0.13s0.269-0.132,0.342-0.232v-2.488h-1.709v-1.121H40.668z\"/>\n    \t\t</g>\n    \t\t<path fill=\"#C8BDB8\"\n    \t\t\td=\"M45.5,22v-6h-6v2h-6v-4h-10v4h-6v-2h-6v6h6v-2h3.548c-4.566,2.636-7.548,7.588-7.548,13\n    \t\tc0,0.552,0.447,1,1,1s1-0.448,1-1c0-5.246,3.229-9.999,8-11.995V24h10v-2.995c4.771,1.997,8,6.75,8,11.995c0,0.552,0.447,1,1,1\n    \t\ts1-0.448,1-1c0-5.412-2.982-10.364-7.548-13H39.5v2H45.5z M15.5,20h-2v-2h2V20z M31.5,22h-6v-3.754V16h6v2.246V22z M41.5,18h2v2h-2\n    \t\tV18z\"/>\n    \t</g>\n    </svg>;\n  }\n}\n\nexport default SVGIcon;\n","import AbstractGraphExporter from './AbstractGraphExporter.js';\n\nimport PNGIcon from 'icons/flat/PNGIcon.js';\nimport JPGIcon from 'icons/flat/JPGIcon.js';\nimport XMLIcon from 'icons/flat/XMLIcon.js';\nimport SVGIcon from 'icons/flat/SVGIcon.js';\nimport { FILE_TYPE_PNG, FILE_TYPE_JPG, FILE_TYPE_SVG, downloadImageFromSVG } from 'util/Downloader.js';\n\nclass GraphImageExporter extends AbstractGraphExporter\n{\n  constructor(imageType=FILE_TYPE_PNG)\n  {\n    super();\n    this._imageType = imageType;\n  }\n\n  //Override\n  exportToFile(filename, module)\n  {\n    const workspace = module._workspace;\n    const workspaceDim = workspace.ref.viewBox.baseVal;\n    const width = workspaceDim.width;\n    const height = workspaceDim.height;\n    const svg = workspace.getSVGForExport(width, height);\n\n    downloadImageFromSVG(filename, this._imageType, svg, width, height);\n  }\n\n  //Override\n  doesSupportFile()\n  {\n    return true;\n  }\n\n  //Override\n  canImport()\n  {\n    return false;\n  }\n\n  //Override\n  getTitle()\n  {\n    switch(this._imageType)\n    {\n      case FILE_TYPE_PNG: return I18N.toString(\"file.export.png.hint\");\n      case FILE_TYPE_JPG: return I18N.toString(\"file.export.jpg.hint\");\n      case FILE_TYPE_SVG: return I18N.toString(\"file.export.svg.hint\");\n      default: return super.getTitle();\n    }\n  }\n\n  //Override\n  getLabel()\n  {\n    switch(this._imageType)\n    {\n      case FILE_TYPE_PNG: return I18N.toString(\"file.export.png\");\n      case FILE_TYPE_JPG: return I18N.toString(\"file.export.jpg\");\n      case FILE_TYPE_SVG: return I18N.toString(\"file.export.svg\");\n      default: return super.getLabel();\n    }\n  }\n\n  //Override\n  getFileType()\n  {\n    return this._imageType;\n  }\n\n  //Override\n  getIconClass()\n  {\n    switch(this._imageType)\n    {\n      case FILE_TYPE_PNG: return PNGIcon;\n      case FILE_TYPE_JPG: return JPGIcon;\n      case FILE_TYPE_SVG: return SVGIcon;\n      default: return null;\n    }\n  }\n}\n\nexport default GraphImageExporter;\n","import React from 'react';\nimport '../Panel.css';\nimport './ExportingPanel.css';\n\nimport IconButton from 'icons/IconButton.js';\n\nclass ExportingPanel extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.container = null;\n  }\n\n  renderExporterButton(exporter)\n  {\n    if (!exporter.doesSupportFile()) return null;\n\n    return <IconButton key={exporter.getFileType()}\n      className=\"export-button\"\n      id={\"export-\" + exporter.getFileType()}\n      title={exporter.getTitle()}\n      onClick={() => {\n        const module = this.props.currentModule;\n        const machineController = module.getMachineController();\n        const filename = machineController.getMachineName() || \"Untitled\";\n        exporter.exportToFile(filename, module);\n      }}>\n      { React.createElement(exporter.getIconClass()) }\n      <label>{ exporter.getLabel() }</label>\n    </IconButton>;\n  }\n\n  //Override\n  render()\n  {\n    const module = this.props.currentModule;\n    const graphExporters = module.getGraphExporters();\n    const imageExporters = module.getImageExporters();\n\n    return <div className={\"panel-container \" + this.props.className} id=\"exporting\" ref={ref=>this.container=ref} style={this.props.style}>\n      <div className=\"panel-title\">\n        <h1>{I18N.toString(\"component.exporting.title\")}</h1>\n      </div>\n      <div className=\"panel-content\">\n      {\n        graphExporters.map(e => this.renderExporterButton(e))\n      }\n      {\n        imageExporters.map(e => this.renderExporterButton(e))\n      }\n        <hr/>\n        {/*Save to E-mail*/}\n        <div className=\"export-email\">\n        </div>\n      </div>\n\n      <div className=\"panel-bottom\"></div>\n    </div>;\n  }\n}\nObject.defineProperty(ExportingPanel, 'TITLE', {\n  get: function() { return I18N.toString(\"component.exporting.title\"); }\n});\nExportingPanel.UNLOCALIZED_NAME = \"component.exporting.title\";\n\nexport default ExportingPanel;\n","const RGB_WHITE = [255, 255, 255];\nconst RGB_BLACK = [0, 0, 0];\n\nexport function blendRGB(percent, rgb1, rgb2=null, dst=[])\n{\n  const blendAmount = Math.abs(percent);\n  if (!rgb2) rgb2 = percent < 0 ? RGB_BLACK : RGB_WHITE;\n\n  dst[0] = rgb1[0] + Math.round(blendAmount * (rgb2[0] - rgb1[0]));\n  dst[1] = rgb1[1] + Math.round(blendAmount * (rgb2[1] - rgb1[1]));\n  dst[2] = rgb1[2] + Math.round(blendAmount * (rgb2[2] - rgb1[2]));\n  return dst;\n}\n\nexport function invertRGB(rgb, blackwhite=false, dst=[])\n{\n  if (blackwhite)\n  {\n    // http://stackoverflow.com/a/3943023/112731\n    if ((rgb[0] * 0.299 + rgb[1] * 0.587 + rgb[2] * 0.114) > 186)\n    {\n      dst[0] = 0;\n      dst[1] = 0;\n      dst[2] = 0;\n    }\n    else\n    {\n      dst[0] = 0xFF;\n      dst[1] = 0xFF;\n      dst[2] = 0xFF;\n    }\n  }\n  else\n  {\n    dst[0] = (255 - rgb[0]);\n    dst[1] = (255 - rgb[1]);\n    dst[2] = (255 - rgb[2]);\n  }\n  return dst;\n}\n\n/* RGB and HSL conversions: https://gist.github.com/mjackson/5311256 */\nexport function HEXtoRGB(hex, dst=[])\n{\n  if (hex.indexOf('#') === 0) hex = hex.slice(1);\n  if (hex.length === 3) hex = hex[0] + hex[0] + hex[1] + hex[1] + hex[2] + hex[2];\n  if (hex.length !== 6) throw new Error('Invalid hex color format');\n  const red = hex.substring(0, 2);\n  const green = hex.substring(2, 4);\n  const blue = hex.substring(4, 6);\n\n  dst[0] = parseInt(red, 16);\n  dst[1] = parseInt(green, 16);\n  dst[2] = parseInt(blue, 16);\n  return dst;\n}\nexport function RGBtoHEX(rgb)\n{\n  return '#' + (rgb[2] | (rgb[1] << 8) | (rgb[0] << 16) | (1 << 24)).toString(16).slice(1);\n}\nexport function RGBtoHSV(rgb, dst=[])\n{\n  let r = rgb[0] / 255;\n  let g = rgb[1] / 255;\n  let b = rgb[2] / 255;\n  const max = Math.max(r, g, b);\n  const min = Math.min(r, g, b);\n  const d = max - min;\n\n  let h = 0;\n  const s = max == 0 ? 0 : d / max;\n  const v = max;\n  if (max == min)\n  {\n    h = 0;\n  }\n  else\n  {\n    switch(max)\n    {\n      case r: h = (g - b) / d + (g < b ? 6 : 0); break;\n      case g: h = (b - r) / d + 2; break;\n      case b: h = (r - g) / d + 4; break;\n    }\n\n    h /= 6;\n  }\n\n  dst[0] = h;\n  dst[1] = s;\n  dst[2] = v;\n  return dst;\n}\nexport function HSVtoRGB(h, s, v, dst=[])\n{\n  let r = 0; let g = 0; let b = 0;\n  const i = Math.floor(h * 6);\n  const f = h * 6 - i;\n  const p = v * (1 - s);\n  const q = v * (1 - f * s);\n  const t = v * (1 - (1 - f) * s);\n  switch(i % 6)\n  {\n    case 0: r = v, g = t, b = p; break;\n    case 1: r = q, g = v, b = p; break;\n    case 2: r = p, g = v, b = t; break;\n    case 3: r = p, g = q, b = v; break;\n    case 4: r = t, g = p, b = v; break;\n    case 5: r = v, g = p, b = q; break;\n  }\n\n  dst[0] = r * 255;\n  dst[1] = g * 255;\n  dst[2] = b * 255;\n  return dst;\n}\n","class StyleOption\n{\n  constructor(elementSource, propName, inputType, groupName, callback)\n  {\n    //the html element that this css variable reflects\n    this.element = elementSource;\n    //the name of the css variable\n    this.prop = propName;\n    //the css variable type\n    this.type = inputType;\n    //the group that the variable belongs to (\"default\" if not specified)\n    this.group = groupName;\n\n    this._callback = callback;\n    this._value = null;\n    this._defaultValue = null;\n  }\n\n  /**\n   * Update the current value to reflect the computed style's value.\n   */\n  updateStyle(computedStyle=null, shouldPropagateChange=true)\n  {\n    if (!computedStyle)\n    {\n      computedStyle = window.getComputedStyle(this.element);\n    }\n    const newValue = computedStyle.getPropertyValue(this.prop);\n    if (!newValue)\n    {\n      throw new Error(\"Cannot find style option with prop name \\'\" + this.prop + \"\\' for element\");\n    }\n\n    this._value = newValue.trim();\n    this._defaultValue = this._value;\n    if (shouldPropagateChange && this._callback) this._callback(this, newValue);\n  }\n\n  /**\n   * Reset the current value to reflect the computed style's value.\n   */\n  resetStyle()\n  {\n    this.setStyle(this._defaultValue);\n  }\n\n  /**\n   * Changes the variable's value for prop name.\n   * These changes are reflected to the css source.\n   */\n  setStyle(val, shouldPropagateChange=true)\n  {\n    this._value = val;\n    this.element.style.setProperty(this.prop, val);\n\n    if (shouldPropagateChange && this._callback) this._callback.call(null, this, val);\n  }\n\n  /** Returns the variable's current value. Null if not yet initialized. */\n  getStyle()\n  {\n    return this._value;\n  }\n\n  isDefaultStyle()\n  {\n    return this._value == this._defaultValue;\n  }\n}\n\nclass StyleOptionRegistry\n{\n  constructor()\n  {\n    this._options = new Map();\n    this._groups = new Map();\n\n    this._init = false;\n  }\n\n  registerStyleOption(elementSource, propName, inputType=\"text\", groupName=\"default\", changeCallback=null)\n  {\n    if (this._options.has(propName))\n    {\n      throw new Error(\"Style option with prop name \\'\" + propName + \"\\' already registered\");\n    }\n\n    const result = new StyleOption(elementSource, propName, inputType, groupName, changeCallback);\n    this._options.set(propName, result);\n\n    let group;\n    if (!this._groups.has(groupName))\n    {\n      group = [];\n      this._groups.set(groupName, group);\n    }\n    else\n    {\n      group = this._groups.get(groupName);\n\n      if (group.indexOf(propName) != -1)\n      {\n        //Ignore it, it's already in here\n        return;\n      }\n    }\n    group.push(propName);\n  }\n\n  unregisterStyleOption(propName)\n  {\n    if (this._options.has(propName))\n    {\n      const option = this._options.get(propName);\n      this._options.delete(propName);\n      const groupName = option.group;\n      if (this._groups.has(groupName))\n      {\n        const group = this._groups.get(groupName);\n        const index = group.indexOf(propName);\n        if (index >= 0)\n        {\n          group.splice(index, 1);\n        }\n      }\n    }\n  }\n\n  initialize()\n  {\n    if (this._init)\n    {\n      throw new Error(\"Already initialized\");\n    }\n\n    //Compute the styles\n    const computedStyles = {};\n    let computedStyle;\n    for(let option of this._options.values())\n    {\n      const element = option.element;\n      computedStyle = computedStyles[element];\n      if (!computedStyle)\n      {\n        computedStyle = window.getComputedStyle(element);\n        computedStyles[element] = computedStyle;\n      }\n      option.updateStyle(computedStyle, false);\n    }\n\n    this._init = true;\n  }\n\n  terminate()\n  {\n    if (!this._init)\n    {\n      throw new Error(\"Not yet initialized\");\n    }\n\n    this._options.clear();\n    this._groups.clear();\n\n    this._init = false;\n  }\n\n  getOptionByProp(propName)\n  {\n    return this._options.get(propName);\n  }\n\n  getPropsByGroup(groupName)\n  {\n    return this._groups.get(groupName) || [];\n  }\n\n  getOptions()\n  {\n    return this._options.values();\n  }\n\n  isEmpty()\n  {\n    return this._options.size <= 0;\n  }\n}\n\nexport default StyleOptionRegistry;\n","import React from 'react';\n\nclass StyleInput extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.onChange = this.onChange.bind(this);\n  }\n\n  onChange(e)\n  {\n    const newValue = e.target.value;\n    const value = this.props.value;\n    const onChange = this.props.onChange;\n\n    value.setStyle(newValue);\n    if (onChange) onChange(value);\n  }\n\n  //Override\n  render()\n  {\n    const title = this.props.title;\n    const value = this.props.value;\n    const propName = value.prop;\n    const inputType = value.type;\n    const inputID = \"styleopt-\" + propName;\n\n    return <span id={this.props.id} className={this.props.className} style={this.props.style}>\n      <input id={inputID} type={inputType} value={value.getStyle()} onChange={this.onChange} disabled={this.props.disabled}/>\n      <label htmlFor={inputID}>{title}</label>\n    </span>;\n  }\n}\nexport default StyleInput;\n","import React from 'react';\nimport './OptionGroup.css';\n\nimport IconToggle from 'icons/IconToggle.js';\nimport DropDownIcon from 'icons/DropDownIcon.js';\n\nclass OptionGroup extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.dropdown = React.createRef();\n  }\n\n  isOpen()\n  {\n    return this.dropdown.state ? this.dropdown.state.open : false;\n  }\n\n  render()\n  {\n    return <div className={\"option-group \" + this.props.className}>\n      <div className=\"option-header\" onClick={(e)=>this.dropdown.onClick(e)}>\n        <label>{this.props.title}</label>\n        <label>({this.props.label})</label>\n        <IconToggle id=\"collapse\" ref={ref=>this.dropdown=ref} defaultValue={this.props.defaultValue}\n          style={{pointerEvents: \"none\"}}>\n          <DropDownIcon/>\n        </IconToggle>\n      </div>\n      <div className=\"option-content\"\n        style={{display: this.isOpen() ? \"block\" : \"none\"}}>\n        { this.props.children }\n      </div>\n    </div>;\n  }\n}\n\nexport default OptionGroup;\n","import React from 'react';\nimport './OptionHotkey.css';\n\nclass OptionHotkey extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    return <div className={\"option-container option-hotkey \" + this.props.className}>\n      <label>{this.props.label}</label>\n      <span>{this.props.keyName}</span>\n    </div>;\n  }\n}\n\nexport default OptionHotkey;\n","import React from 'react';\nimport '../Panel.css';\nimport './OptionsPanel.css';\n\nimport Config from 'config.js';\nimport { saveConfig } from 'config.js';\n\nimport LocalSave from 'system/localsave/LocalSave.js';\nimport * as ColorHelper from 'util/ColorHelper.js';\nimport StyleOptionRegistry from 'system/styleopt/StyleOptionRegistry.js';\nimport StyleInput from 'system/styleopt/components/StyleInput.js';\n\nimport OptionGroup from './OptionGroup.js';\nimport OptionHotkey from './OptionHotkey.js';\n\nimport Modules from 'modules/Modules.js'\nimport ModuleLoader from 'modules/ModuleLoader.js';\n\n//This should be the same as the one referred to by index.js\nconst LOCAL_STORAGE_ID = \"skipWelcome\";\nconst ENABLE_MODULES = process.env.NODE_ENV === 'development';\n\nclass OptionsPanel extends React.Component\n{\n  constructor(props)\n  {\n    super(props)\n\n    this.container = React.createRef();\n    this.styleOpts = new StyleOptionRegistry();\n\n    this.state = {\n      theme: \"default\",\n      customTheme: false,\n      skipWelcome: LocalSave.getStringFromStorage(LOCAL_STORAGE_ID) === \"true\",\n      disableExitWarning: LocalSave.getStringFromStorage(\"disableExitWarning\") === \"true\"\n    };\n\n    this.onChangeTheme = this.onChangeTheme.bind(this);\n    this.onChangeModule = this.onChangeModule.bind(this);\n  }\n\n  //Override\n  componentDidMount()\n  {\n    const root = document.getElementById(\"root\");\n    const opts = this.styleOpts;\n\n    const invertFunc = function(opt, value) {\n      const color = [];\n      ColorHelper.HEXtoRGB(value, color);\n      ColorHelper.invertRGB(color, false, color);\n      const result = ColorHelper.RGBtoHEX(color);\n      //Set style\n      opts.getOptionByProp(opt.prop + \"-invert\").setStyle(result);\n    };\n\n    const darkFunc = function(opt, value) {\n      //v < 0.15 ? lighten : darken\n      const color = [];\n      const inverted = [];\n      ColorHelper.HEXtoRGB(value, color);\n      ColorHelper.invertRGB(color, true, inverted);\n      ColorHelper.blendRGB(0.2, color, inverted, color);\n      const result = ColorHelper.RGBtoHEX(color);\n      //Set style\n      opts.getOptionByProp(opt.prop + \"-dark\").setStyle(result);\n    };\n\n    const subtleFunc = function(opt, value)\n    {\n      //v < 0.15 ? lighten : darken\n      const color = [];\n      const inverted = [];\n      ColorHelper.HEXtoRGB(value, color);\n      ColorHelper.invertRGB(color, true, inverted);\n      ColorHelper.blendRGB(0.39, color, inverted, color);\n      const result = ColorHelper.RGBtoHEX(color);\n      //Set style\n      opts.getOptionByProp(opt.prop + \"-subtle\").setStyle(result);\n    };\n\n    const ghostFunc = function(opt, value)\n    {\n      //v < 0.15 ? lighten : darken\n      const color = [];\n      const inverted = [];\n      ColorHelper.HEXtoRGB(value, color);\n      ColorHelper.invertRGB(color, true, inverted);\n      ColorHelper.blendRGB(0.26, color, inverted, color);\n      const result = ColorHelper.RGBtoHEX(color);\n      //Set style\n      opts.getOptionByProp(opt.prop + \"-ghost\").setStyle(result);\n    };\n\n    const backFunc = function(opt, value)\n    {\n      //v < 0.15 ? lighten : darken\n      const color = [];\n      const inverted = [];\n      ColorHelper.HEXtoRGB(value, color);\n      ColorHelper.invertRGB(color, true, inverted);\n      ColorHelper.blendRGB(0.13, color, inverted, color);\n      const result = ColorHelper.RGBtoHEX(color);\n      //Set style\n      opts.getOptionByProp(opt.prop + \"-back\").setStyle(result);\n    };\n\n    //Toolbar\n    opts.registerStyleOption(root, \"--color-toolbar-main\", \"color\", \"toolbar\", darkFunc);\n    opts.registerStyleOption(root, \"--color-toolbar-main-dark\", \"color\", \"hidden\");\n    opts.registerStyleOption(root, \"--color-toolbar-accent\", \"color\", \"toolbar\", darkFunc);\n    opts.registerStyleOption(root, \"--color-toolbar-accent-dark\", \"color\", \"hidden\");\n    opts.registerStyleOption(root, \"--color-toolbar-text\", \"color\", \"toolbar\", invertFunc);\n    opts.registerStyleOption(root, \"--color-toolbar-text-invert\", \"color\", \"hidden\");\n\n    //Drawer\n    opts.registerStyleOption(root, \"--color-drawer-main\", \"color\", \"drawer\", darkFunc);\n    opts.registerStyleOption(root, \"--color-drawer-main-dark\", \"color\", \"hidden\");\n    opts.registerStyleOption(root, \"--color-drawer-accent\", \"color\", \"drawer\");\n    opts.registerStyleOption(root, \"--color-drawer-text\", \"color\", \"drawer\", (...args) => {\n      subtleFunc(...args);\n      ghostFunc(...args);\n      invertFunc(...args);\n      backFunc(...args);\n    });\n    opts.registerStyleOption(root, \"--color-drawer-text-subtle\", \"color\", \"hidden\");\n    opts.registerStyleOption(root, \"--color-drawer-text-ghost\", \"color\", \"hidden\");\n    opts.registerStyleOption(root, \"--color-drawer-text-invert\", \"color\", \"hidden\");\n    opts.registerStyleOption(root, \"--color-drawer-text-back\", \"color\", \"hidden\");\n    opts.registerStyleOption(root, \"--color-drawer-error\", \"color\", \"drawer\");\n\n    //Testing\n    opts.registerStyleOption(root, \"--color-testing-success\", \"color\", \"testing\");\n    opts.registerStyleOption(root, \"--color-testing-failure\", \"color\", \"testing\");\n    opts.registerStyleOption(root, \"--color-testing-working\", \"color\", \"testing\");\n    opts.registerStyleOption(root, \"--color-testing-text\", \"color\", \"testing\");\n\n    //Notification\n    opts.registerStyleOption(root, \"--color-notification-text\", \"color\", \"notification\");\n    opts.registerStyleOption(root, \"--color-notification-info\", \"color\", \"notification\", darkFunc);\n    opts.registerStyleOption(root, \"--color-notification-info-dark\", \"color\", \"hidden\");\n    opts.registerStyleOption(root, \"--color-notification-error\", \"color\", \"notification\", darkFunc);\n    opts.registerStyleOption(root, \"--color-notification-error-dark\", \"color\", \"hidden\");\n    opts.registerStyleOption(root, \"--color-notification-warning\", \"color\", \"notification\", darkFunc);\n    opts.registerStyleOption(root, \"--color-notification-warning-dark\", \"color\", \"hidden\");\n\n    //Workspace\n    opts.registerStyleOption(root, \"--color-graph-node\", \"color\", \"workspace\");\n    opts.registerStyleOption(root, \"--color-workspace-text\", \"color\", \"workspace\");\n    opts.registerStyleOption(root, \"--color-workspace-main\", \"color\", \"workspace\");\n\n    //Label editor\n    opts.registerStyleOption(root, \"--color-labeleditor-text\", \"color\", \"labeleditor\");\n    opts.registerStyleOption(root, \"--color-labeleditor-main\", \"color\", \"labeleditor\");\n\n    //Viewport\n    opts.registerStyleOption(root, \"--color-viewport-error\", \"color\", \"viewport\");\n    opts.registerStyleOption(root, \"--color-viewport-testing\", \"color\", \"viewport\");\n    opts.registerStyleOption(root, \"--color-viewport-warning\", \"color\", \"viewport\");\n    opts.registerStyleOption(root, \"--color-highlight-select\", \"color\", \"viewport\");\n\n    opts.initialize();\n\n    LocalSave.registerHandler(this);\n    this.onLoadSave();\n  }\n\n  //Override\n  componentWillUnmount()\n  {\n    this.styleOpts.terminate();\n\n    LocalSave.unregisterHandler(this);\n  }\n\n  //Ducktype(AbstractLocalSaver)\n  onLoadSave()\n  {\n    const opts = this.styleOpts;\n    const data = LocalSave.loadFromStorage(\"prefs-color\");\n    for(let prop in data)\n    {\n      const opt = opts.getOptionByProp(prop);\n      if (opt)\n      {\n        opt.setStyle(data[prop]);\n      }\n    }\n  }\n\n  //Ducktype(AbstractLocalSaver)\n  onAutoSave()\n  {\n    const opts = this.styleOpts;\n    const data = {};\n    for(let opt of opts.getOptions())\n    {\n      if (!opt.isDefaultStyle())\n      {\n        data[opt.prop] = opt.getStyle();\n      }\n    }\n    LocalSave.saveToStorage(\"prefs-color\", data);\n  }\n\n  onChangeTheme(e)\n  {\n    const prevTheme = this.state.theme;\n    const theme = e.target.value;\n    if (prevTheme === theme) return;\n\n    if (theme === \"default\")\n    {\n      for(let option of this.styleOpts.getOptions())\n      {\n        option.resetStyle();\n      }\n    }\n\n    this.setState({theme: theme});\n  }\n\n  onChangeModule(e)\n  {\n    ModuleLoader.loadModule(e.target.value);\n  }\n\n  //Override\n  render()\n  {\n    const root = document.getElementById(\"root\");\n    const opts = this.styleOpts;\n\n    return <div className={\"panel-container \" + this.props.className} id=\"option\" ref={ref=>this.container=ref} style={this.props.style}>\n      <div className=\"panel-title\">\n        <h1>{I18N.toString(\"component.options.title\")}</h1>\n      </div>\n      <div className=\"panel-content\">\n\n        <OptionGroup title={I18N.toString(\"component.workspace.title\")} label={I18N.toString(\"options.category.shortcuts\")}>\n          <OptionHotkey label={I18N.toString(\"action.toolbar.savemachine\")} keyName=\"Ctrl + S\"/>\n          <OptionHotkey label={I18N.toString(\"action.toolbar.undo.label\")} keyName=\"Ctrl + Z\"/>\n          <OptionHotkey label={I18N.toString(\"action.toolbar.redo.label\")} keyName=\"Ctrl + Shift + Z\"/>\n          <OptionHotkey label={I18N.toString(\"action.toolbar.saveimage\")} keyName=\"Ctrl + P\"/>\n        </OptionGroup>\n\n        <OptionGroup title={I18N.toString(\"component.testing.title\")} label={I18N.toString(\"options.category.shortcuts\")}>\n          <OptionHotkey label={\"Add test input\"} keyName=\"Enter\"/>\n          <OptionHotkey label={\"Run test input\"} keyName=\"Shift + Enter\"/>\n        </OptionGroup>\n\n        <OptionGroup title={I18N.toString(\"component.labeleditor.title\")} label={I18N.toString(\"options.category.shortcuts\")}>\n          <OptionHotkey label={I18N.toString(\"action.workspace.submit.label\")} keyName=\"Enter\"/>\n          <OptionHotkey label={I18N.toString(\"action.workspace.cancel.label\")} keyName=\"Escape\"/>\n        </OptionGroup>\n\n        <div className=\"panel-checkbox\" style={{marginTop: \"10px\"}}>\n          <input id=\"option-skipwelcome\" type=\"checkbox\" checked={this.state.skipWelcome}\n          onChange={(e) => {\n            const result = e.target.checked;\n            this.setState({skipWelcome: e.target.checked});\n            LocalSave.setStringToStorage(LOCAL_STORAGE_ID, \"\" + result);\n          }}/>\n          <label htmlFor=\"option-skipwelcome\">{I18N.toString(\"options.skipwelcome\")}</label>\n        </div>\n\n        <hr/>\n\n        <div>\n          <div id=\"options-theme-select-container\">\n            <label htmlFor=\"options-theme-select\">Theme</label>\n            <select id=\"options-theme-select\" className=\"panel-select\" value={this.state.theme} onChange={this.onChangeTheme} disabled={this.state.customTheme}>\n              <option value=\"default\">Default</option>\n              <option value=\"ucsd\" disabled={true}>UC San Diego (Coming Soon)</option>\n              <option value=\"duke\" disabled={true}>Duke University (Coming Soon)</option>\n            </select>\n            {\n              !this.state.customTheme &&\n              <button className=\"panel-button\" onClick={() => this.setState({customTheme: true})}>\n                {I18N.toString(\"action.options.changetheme\")}\n              </button>\n            }\n          </div>\n          {\n            this.state.customTheme && <div>\n              <OptionGroup title={I18N.toString(\"component.toolbar.title\")} label={I18N.toString(\"options.category.colors\")}>\n              { opts.getPropsByGroup(\"toolbar\").map(e => <div key={e}>\n                  <StyleInput className=\"option-container\" value={opts.getOptionByProp(e)} title={I18N.toString(\"options.\" + e)}/>\n                </div>) }\n              </OptionGroup>\n\n              <OptionGroup title={I18N.toString(\"component.drawer.title\")} label={I18N.toString(\"options.category.colors\")}>\n              { opts.getPropsByGroup(\"drawer\").map(e => <div key={e}>\n                  <StyleInput className=\"option-container\" value={opts.getOptionByProp(e)} title={I18N.toString(\"options.\" + e)}/>\n                </div>) }\n              </OptionGroup>\n\n              <OptionGroup title={I18N.toString(\"component.testing.title\")} label={I18N.toString(\"options.category.colors\")}>\n              { opts.getPropsByGroup(\"testing\").map(e => <div key={e}>\n                  <StyleInput className=\"option-container\" value={opts.getOptionByProp(e)} title={I18N.toString(\"options.\" + e)}/>\n                </div>) }\n              </OptionGroup>\n\n              <OptionGroup title={I18N.toString(\"component.notification.title\")} label={I18N.toString(\"options.category.colors\")}>\n              { opts.getPropsByGroup(\"notification\").map(e => <div key={e}>\n                  <StyleInput className=\"option-container\" value={opts.getOptionByProp(e)} title={I18N.toString(\"options.\" + e)}/>\n                </div>) }\n              </OptionGroup>\n\n              <OptionGroup title={I18N.toString(\"component.graph.title\")} label={I18N.toString(\"options.category.colors\")}>\n              { opts.getPropsByGroup(\"workspace\").map(e => <div key={e}>\n                  <StyleInput className=\"option-container\" value={opts.getOptionByProp(e)} title={I18N.toString(\"options.\" + e)}/>\n                </div>) }\n              </OptionGroup>\n\n              <OptionGroup title={I18N.toString(\"component.labeleditor.title\")} label={I18N.toString(\"options.category.colors\")}>\n              { opts.getPropsByGroup(\"labeleditor\").map(e => <div key={e}>\n                  <StyleInput className=\"option-container\" value={opts.getOptionByProp(e)} title={I18N.toString(\"options.\" + e)}/>\n                </div>) }\n              </OptionGroup>\n\n              <OptionGroup title={I18N.toString(\"options.category.general\")} label={I18N.toString(\"options.category.colors\")}>\n              { opts.getPropsByGroup(\"viewport\").map(e => <div key={e}>\n                  <StyleInput className=\"option-container\" value={opts.getOptionByProp(e)} title={I18N.toString(\"options.\" + e)}/>\n                </div>) }\n              </OptionGroup>\n\n              <button className=\"panel-button\" onClick={(e) => {\n                for(let option of this.styleOpts.getOptions())\n                {\n                  option.resetStyle();\n                }\n                this.setState({customTheme: false});\n              }}>{I18N.toString(\"action.options.reset\")}</button>\n            </div>\n          }\n        </div>\n\n        <hr/>\n\n        <div>\n          <h2>Experimental</h2>\n\n          <select id=\"options-experimental-modules\"\n            className=\"panel-select\"\n            value={this.props.currentModule.getModuleName()}\n            onChange={this.onChangeModule}\n            disabled={!ENABLE_MODULES}>\n          {Object.keys(Modules).map(e => {\n            const mod = Modules[e];\n            return <option key={e} value={e}>{mod.name + \" (\" + mod.version + \")\"}</option>\n          })}\n          </select>\n\n          <div className=\"panel-checkbox\" style={{marginTop: \"10px\"}}>\n            <input id=\"option-disableexitwarning\" type=\"checkbox\" checked={this.state.disableExitWarning}\n            onChange={(e) => {\n              const result = e.target.checked;\n              this.setState({disableExitWarning: result});\n              LocalSave.setStringToStorage(\"disableExitWarning\", \"\" + result);\n            }}/>\n            <label htmlFor=\"option-disableexitwarning\">{\"Disable Exit Warning\"}</label>\n          </div>\n\n          <button className=\"panel-button\" style={{marginTop: \"10px\"}} onClick={(e) => {\n            if (LocalSave.getStringFromStorage(\"enableExperimental\") === \"true\")\n            {\n              window.alert(\"Please restart to begin the awakening...\");\n            }\n            else if (window.confirm(\"Be careful! This will PERMANENTLY change \" +\n              \"your app and is intended only for debugging purposes. You \" +\n              \"should only enable this if you know what you are doing. Are \" +\n              \"you sure about this?\"))\n            {\n              if (window.confirm(\"Seriously, THIS CAN BREAK THE APP \" +\n                \"PERMANENTLY! So only proceed if you are absolutely sure \" +\n                \"about this. Ask a member of the dev team for assistance.\"))\n              {\n                if (window.prompt(\"Well, at this point, you are either a \" +\n                \"member of the dev team (welcome to the team) or you have \" +\n                \"been instructed to do so by a member of the dev team \" +\n                \"(hello human). Please ask them for the password:\") === \"I solemnly swear I am up to no good.\")\n                {\n                  if (window.confirm(\"Alright, here we go. Last chance to \" +\n                  \"leave. Cancel it now or restart and face the consequences.\"))\n                  {\n                    LocalSave.setStringToStorage(\"enableExperimental\", \"true\");\n                  }\n                }\n                else\n                {\n                  window.alert(\"Sorry, it looks like you are a normal human. Have a hug. <3\");\n                }\n              }\n            }\n          }}>\n            {\"Enable Experimental Mode\"}\n          </button>\n\n        </div>\n\n      </div>\n\n      <div className=\"panel-bottom\"></div>\n    </div>;\n  }\n}\nObject.defineProperty(OptionsPanel, 'TITLE', {\n  get: function() { return I18N.toString(\"component.options.title\"); }\n});\nOptionsPanel.UNLOCALIZED_NAME = \"component.options.title\";\n\nexport default OptionsPanel;\n","import GraphImporter from './exporter/GraphImporter.js';\nimport GraphImageExporter from './exporter/GraphImageExporter.js';\n\nimport ExportingPanel from './panels/exporting/ExportingPanel.js';\nimport OptionsPanel from './panels/options/OptionsPanel.js';\n\nimport { FILE_TYPE_PNG, FILE_TYPE_JPG, FILE_TYPE_SVG } from 'util/Downloader.js';\n\nexport const DEFAULT_GRAPH_EXPORTERS = [];\nexport const DEFAULT_IMAGE_EXPORTERS = [\n  new GraphImageExporter(FILE_TYPE_PNG),\n  new GraphImageExporter(FILE_TYPE_JPG),\n  new GraphImageExporter(FILE_TYPE_SVG)\n];\n//TODO: This is inserted by Drawer.js, not used here. (which is weird)\nexport const DEFAULT_PANELS = [ExportingPanel, OptionsPanel];\n\nclass AbstractModule\n{\n  constructor(app)\n  {\n    if (!app) throw new Error(\"Missing app for module class\");\n\n    this._importer = new GraphImporter(this);\n  }\n\n  initialize(app)\n  {\n    if (!app) throw new Error(\"Missing app for module initialize\");\n\n    const inputController = this.getInputController();\n    const graphController = this.getGraphController();\n    const machineController = this.getMachineController();\n    inputController.initialize(this);\n    graphController.initialize(this);\n    machineController.initialize(this);\n  }\n\n  destroy(app)\n  {\n    if (!app) throw new Error(\"Missing app for module destroy\");\n\n    const inputController = this.getInputController();\n    const graphController = this.getGraphController();\n    const machineController = this.getMachineController();\n    machineController.destroy(this);\n    graphController.destroy(this);\n    inputController.destroy(this);\n  }\n\n  update(app)\n  {\n    if (!app) throw new Error(\"Missing app for module update\");\n\n    const inputController = this.getInputController();\n    const graphController = this.getGraphController();\n    const machineController = this.getMachineController();\n    inputController.update(this);\n    graphController.update(this);\n    machineController.update(this);\n  }\n\n  getRenderer(renderLayer) { return null; }\n  getInputController() { throw new Error(\"Missing input controller for module \\'\" + this.getModuleName() + \"\\'\"); }\n  getGraphController() { throw new Error(\"Missing graph controller for module \\'\" + this.getModuleName() + \"\\'\"); }\n  getMachineController() { throw new Error(\"Missing machine controller for module \\'\" + this.getModuleName() + \"\\'\"); }\n  getDefaultGraphExporter()\n  {\n    const exporters = this.getGraphExporters();\n    if (exporters.length > 0) return exporters[0];\n\n    throw new Error(\"Missing default graph exporter for module \\'\" + this.getModuleName() + \"\\'\");\n  }\n  getImageExporters() { return DEFAULT_IMAGE_EXPORTERS; }\n  getGraphExporters() { return DEFAULT_GRAPH_EXPORTERS; }\n  getGraphImporter() { return this._importer; }\n  getModulePanels() { return []; }\n  getModuleViews() { return []; }\n  getModuleMenus() { return []; }\n  getModuleVersion() { return '0.0.0'; }\n  getModuleName() { throw new Error(\"Missing module name\"); }\n  getLocalizedModuleName() { return \"Module\"; }\n}\n\nexport default AbstractModule;\n","const Modules = {};\n\nModules['default'] = {\n  name: \"Default\",\n  version: \"1.0.0\",\n  fetch: function(callback) { import(/* webpackChunkName: \"module_default\" */ 'modules/default/DefaultModule.js').then(({ default: _ }) => callback( _ )); }\n};\n\nModules['fsa'] = {\n  name: \"Finite State Automata\",\n  version: \"1.0.0\",\n  fetch: function(callback) { import(/* webpackChunkName: \"module_fsa\" */ 'modules/fsa/FSAModule.js').then(({ default: _ }) => callback( _ )); }\n};\n\nModules['pda'] = {\n  name: \"Pushdown Automata\",\n  version: \"1.0.0\",\n  fetch: function(callback) {\n    throw new Error(\"Module not yet implemented. Sorry :(\");\n  }\n};\n\nModules['tm'] = {\n  name: \"Turing Machine\",\n  version: \"1.0.0\",\n  fetch: function(callback) {\n    throw new Error(\"Module not yet implemented. Sorry :(\");\n  }\n};\n\nModules['dfs'] = {\n  name: \"Depth-First Search\",\n  version: \"1.0.0\",\n  fetch: function(callback) { import(/* webpackChunkName: \"module_dfs\" */ 'modules/dfs/DFSModule.js').then(({ default: _ }) => callback( _ )); }\n};\n\nModules['hlsm'] = {\n  name: \"High Level State Machine\",\n  version: \"1.0.0\",\n  fetch: function(callback) {\n    throw new Error(\"Module not yet implemented. Sorry :(\");\n  }\n};\n\nModules['rbt'] = {\n  name: \"Red-Black Tree\",\n  version: \"1.0.0\",\n  fetch: function(callback) {\n    throw new Error(\"Module not yet implemented. Sorry :(\");\n  }\n};\n\nModules['mealy'] = {\n  name: \"Mealy Machine\",\n  version: \"1.0.0\",\n  fetch: function(callback) {\n    throw new Error(\"Module not yet implemented. Sorry :(\");\n  }\n};\n\nModules['moore'] = {\n  name: \"Moore Machine\",\n  version: \"1.0.0\",\n  fetch: function(callback) {\n    throw new Error(\"Module not yet implemented. Sorry :(\");\n  }\n};\n\nexport default Modules;\n","import GraphElement from 'graph/GraphElement.js';\n\nclass GraphEdge extends GraphElement\n{\n  constructor(id, from, to=null)\n  {\n    super(id);\n\n    if (!from) throw new Error(\"Source of edge cannot be null.\");\n\n    this._from = from;\n    this._to = to;\n\n    this._label = \"\";\n  }\n\n  setSourceNode(node)\n  {\n    if (!node) throw new Error(\"Source of edge cannot be null.\");\n\n    this._from = node;\n    return this;\n  }\n\n  getSourceNode()\n  {\n    return this._from;\n  }\n\n  setDestinationNode(node)\n  {\n    this._to = node;\n    return this;\n  }\n\n  changeDestinationNode(node)\n  {\n    this._to = node;\n  }\n\n  getDestinationNode()\n  {\n    return this._to;\n  }\n\n  setEdgeLabel(label)\n  {\n    this._label = label;\n  }\n\n  getEdgeLabel()\n  {\n    return this._label;\n  }\n\n  getEdgeDirection()\n  {\n    const from = this._from;\n    const to = this._to;\n    const HALFPI = Math.PI / 2;\n    let result = 0;\n\n    if (this.isPlaceholder())\n    {\n      result = Math.PI / 4;\n    }\n    else\n    {\n      const dy = to.y - from.y;\n      const dx = to.x - from.x;\n      result = Math.atan2(dy, dx);\n    }\n\n    if (result > HALFPI || result < -HALFPI)\n    {\n      result += Math.PI;\n    }\n\n    return result;\n  }\n\n  getStartPoint(dst={x: 0, y: 0})\n  {\n    const from = this._from;\n    dst.x = from.x;\n    dst.y = from.y;\n    return dst;\n  }\n\n  getCenterPoint(dst={x: 0, y: 0})\n  {\n    const from = this._from;\n    const to = this._to;\n    if (this.isPlaceholder())\n    {\n      const halfPlaceholderLength = this.getPlaceholderLength() / 2;\n      dst.x = from.x + halfPlaceholderLength;\n      dst.y = from.y + halfPlaceholderLength;\n    }\n    else\n    {\n      dst.x = from.x + (to.x - from.x) / 2;\n      dst.y = from.y + (to.y - from.y) / 2;\n    }\n    return dst;\n  }\n\n  getEndPoint(dst={x: 0, y: 0})\n  {\n    if (this.isPlaceholder())\n    {\n      const from = this._from;\n      const placeholderLength = this.getPlaceholderLength();\n      dst.x = from.x + placeholderLength;\n      dst.y = from.y + placeholderLength;\n    }\n    else\n    {\n      const to = this._to;\n      dst.x = to.x;\n      dst.y = to.y;\n    }\n    return dst;\n  }\n\n  getPlaceholderLength()\n  {\n    return this._from.getNodeSize();\n  }\n\n  isPlaceholder()\n  {\n    return !this._to;\n  }\n\n  isSelfLoop()\n  {\n    return this._from === this._to;\n  }\n\n  //Override\n  getHashString(usePosition=true)\n  {\n    const src = this._from ? this._from.getHashString(usePosition) : \"\";\n    //HACK: to may be a pointer, which is not a node, so getHashString does not exist.\n    const dst = this._to ? this._to.getHashString ? this._to.getHashString(usePosition) : \"0\" : \"\";\n    return super.getHashString(usePosition) + \":\" + src + \",\" + dst + \".\" + this._label;\n  }\n}\n\nexport default GraphEdge;\n","import React from 'react';\n\nconst SUBMIT_KEY = \"Enter\";\nconst CANCEL_KEY = \"Escape\";\n\nexport const CAPTURE_NONE = \"none\";\nexport const CAPTURE_SAVE = \"save\";\nexport const CAPTURE_RESET = \"reset\";\n\nclass FormattedInput extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.element = null;\n    this.ignoreSaveOnExit = false;\n\n    const defaultValue = props.defaultValue || \"\";\n    this.state = {\n      value: defaultValue,\n      prevValue: defaultValue\n    };\n\n    this.onChange = this.onChange.bind(this);\n    this.onBlur = this.onBlur.bind(this);\n    this.onKeyUp = this.onKeyUp.bind(this);\n\n    //props:\n    //  filter - a filter function\n    //  formatter - a format function\n    //  captureOnExit - what to capture on blur (none, save, reset)\n    //  defaultValue - the default value for input\n    //  multiline - whether to allow multiple lines\n  }\n\n  //Override\n  componentWillReceiveProps(nextProps)\n  {\n    //Don't overwrite user input...\n    if (this.hasFocus()) return;\n\n    //TODO: This is a way to update the value if it is suppose to be the default value...\n    if (!this.state.value || this.state.value.length <= 0 || this.state.value === this.props.defaultValue)\n    {\n      this.setState({value: nextProps.defaultValue});\n    }\n  }\n\n  get value()\n  {\n    return this.state.value;\n  }\n\n  focus(replace=false)\n  {\n    if (replace)\n    {\n      this.element.select();\n    }\n    else\n    {\n      this.element.focus();\n    }\n  }\n\n  blur()\n  {\n    this.element.blur();\n  }\n\n  hasFocus()\n  {\n    return this.element === document.activeElement;\n  }\n\n  onChange(e)\n  {\n    if (this.props.filter)\n    {\n      const result = e.target.value.replace(this.props.filter, '');\n      this.setState({value: result});\n    }\n    else\n    {\n      this.setState({value: e.target.value});\n    }\n  }\n\n  onBlur(e)\n  {\n    if (this.ignoreSaveOnExit || this.props.captureOnExit === CAPTURE_NONE)\n    {\n      //For those you choose to handle exit, it's value should remain correct.\n      const result = this.formatValue(e.target.value);\n      this.setState({value: result});\n\n      //Don't ignore it for the future.\n      this.ignoreSaveOnExit = false;\n    }\n    else if (this.props.captureOnExit === CAPTURE_SAVE)\n    {\n      const prev = this.state.prevValue;\n      const next = e.target.value || this.props.defaultValue || \"\";\n      this.resetValue(next, () => {\n        if (this.props.onSubmit)\n        {\n          this.props.onSubmit(next, prev);\n        }\n      });\n    }\n    else if (this.props.captureOnExit === CAPTURE_RESET)\n    {\n      this.resetValue(null);\n    }\n  }\n\n  onKeyUp(e)\n  {\n    if (e.key === SUBMIT_KEY)\n    {\n      if (this.props.multiline && e.shiftKey)\n      {\n        return true;\n      }\n\n      const prev = this.state.prevValue;\n      const next = e.target.value || this.props.defaultValue || \"\";\n      this.setValue(next, () => {\n        this.ignoreSaveOnExit = true;\n\n        if (this.props.onSubmit)\n        {\n          this.props.onSubmit(next, prev);\n        }\n        this.element.blur();\n      });\n\n      e.preventDefault();\n      e.stopPropagation();\n      return false;\n    }\n    else if (e.key === CANCEL_KEY)\n    {\n      const prev = this.state.prevValue;\n      this.resetValue(prev, () => {\n        this.ignoreSaveOnExit = true;\n\n        if (this.props.onSubmit)\n        {\n          this.props.onSubmit(prev || \"\", prev);\n        }\n        this.element.blur();\n      });\n\n      e.preventDefault();\n      e.stopPropagation();\n      return false;\n    }\n  }\n\n  resetValue(newValue=null, callback=null)\n  {\n    if (newValue !== null)\n    {\n      const result = this.formatValue(newValue);\n      //NOTE: this uses newValue cause formatValue may introduce values\n      //which should be saved on exit. Therefore prev and next must be diff.\n      this.setState({value: result, prevValue: newValue}, callback);\n    }\n    else\n    {\n      this.setState((prev, props) => {\n        //NOTE: Although you CAN assume prev is valid, but what about when prev does not exist?\n        const result = this.formatValue(prev.prevValue);\n        return {value: result};\n      }, callback);\n    }\n  }\n\n  setValue(value, callback)\n  {\n    if (!value || value.length == 0)\n    {\n      value = this.props.defaultValue || \"\";\n    }\n    else\n    {\n      value = this.formatValue(value);\n    }\n\n    this.setState({value: value}, callback);\n  }\n\n  appendValue(value, separator=\",\")\n  {\n    let result = this.state.value;\n    //If the entire input is selected...\n    if (this.element.selectionStart == 0 &&\n      this.element.selectionEnd == value.length)\n    {\n      //Replace it!\n      result = value;\n    }\n    //Or just append to the end...\n    else\n    {\n      if (!result || result.length == 0)\n      {\n        result = value;\n      }\n      else\n      {\n        result = result + separator + value;\n      }\n    }\n\n    //If can filter input...\n    if (this.props.filter)\n    {\n      result = result.replace(this.props.filter, '');\n    }\n\n    this.setState({value: this.formatValue(result)});\n  }\n\n  formatValue(value)\n  {\n    const formatter = this.props.formatter;\n    const result = formatter(value);\n    return result || \"\";\n  }\n\n  //Override\n  render()\n  {\n    if (this.props.multiline)\n    {\n      return (\n        <textarea\n          id={this.props.id} className={this.props.className} style={this.props.style}\n          ref={ref=>this.element=ref}\n          type=\"text\" value={this.state.value}\n          rows=\"1\"\n          onChange={this.onChange}\n          onBlur={this.onBlur}\n          onKeyUp={this.onKeyUp}>\n        </textarea>\n      );\n    }\n    else\n    {\n      return (\n        <input\n          id={this.props.id} className={this.props.className} style={this.props.style}\n          ref={ref=>this.element=ref}\n          type=\"text\" value={this.state.value}\n          onChange={this.onChange}\n          onBlur={this.onBlur}\n          onKeyUp={this.onKeyUp}/>\n      );\n    }\n  }\n}\n\nexport default FormattedInput;\n","import React from 'react';\nimport './IconToggle.css';\n\nclass IconToggle extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.state = {\n      open: this.props.defaultValue || false\n    };\n\n    this.onClick = this.onClick.bind(this);\n  }\n\n  onClick(e)\n  {\n    //Toggle state\n    this.setState((prev, props) => {\n      return {open: !prev.open};\n    });\n\n    //Call passed-in onClick listener\n    if (this.props.onClick)\n    {\n      this.props.onClick(e);\n    }\n  }\n\n  render()\n  {\n    return <button\n      className={\"icon-button icon-toggle \" + (this.state.open ? \" open \" : \"\") + this.props.className}\n      id={this.props.id}\n      title={this.props.title}\n      style={this.props.style}\n      disabled={this.props.disabled}\n      onClick={this.onClick}>\n      {this.props.children}\n    </button>;\n  }\n}\n\nexport default IconToggle;\n","import React from 'react';\n\nclass DropDownIcon extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    return <svg className=\"dropdown-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n      <path d=\"M7 10l5 5 5-5z\"/>\n      <path d=\"M0 0h24v24H0z\" fill=\"none\"/>\n    </svg>;\n  }\n}\n\nexport default DropDownIcon;\n","import React from 'react';\nimport Router from 'router.js';\n\nimport App from 'content/App.js'\nimport Modules from 'modules/Modules.js';\n\nconst MODULE_LOAD_DELAY = 300;\nlet MODULE_LOADING = false;\nlet MODULE_TIMEOUT = null;\nlet IS_DEFAULT_MODULE = true;\n\nclass ModuleLoader extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this._timeout = null;\n  }\n\n  static loadModule(moduleID)\n  {\n    const moduleInfo = Modules[moduleID];\n    if (!moduleInfo)\n    {\n      window.alert(\"Cannot find module with id \\'\" + moduleID + \"\\'\");\n      return;\n    }\n\n    //Overwrite any past calls...\n    if (MODULE_TIMEOUT) clearTimeout(MODULE_TIMEOUT);\n\n    MODULE_TIMEOUT = setTimeout(() => {\n      moduleInfo.fetch((moduleClass) => {\n        MODULE_TIMEOUT = null;\n        IS_DEFAULT_MODULE = false;\n        Router.routeTo(ModuleLoader, {moduleClass: moduleClass});\n      });\n    }, MODULE_LOAD_DELAY);\n  }\n\n  static isDefaultModule()\n  {\n    return IS_DEFAULT_MODULE;\n  }\n\n  static isModuleLoading()\n  {\n    return MODULE_TIMEOUT !== null;\n  }\n\n  //Override\n  componentDidMount()\n  {\n    MODULE_TIMEOUT = setTimeout(() => {\n      MODULE_TIMEOUT = null;\n      Router.routeTo(App, {moduleClass: this.props.moduleClass});\n    }, MODULE_LOAD_DELAY);\n  }\n\n  //Override\n  render()\n  {\n    return (<div></div>);\n  }\n}\n\nexport default ModuleLoader;\n","const SRC = 0;\nconst SYMBOL = 1;\nconst DST = 2;\n\nclass FSA\n{\n  constructor()\n  {\n    this._states = [];\n    this._transitions = [];\n    this._finalStates = [];\n\n    this._customAlphabet = [];\n  }\n\n  clear()\n  {\n    this._states.length = 0;\n    this._transitions.length = 0;\n    this._finalStates.length = 0;\n\n    this._customAlphabet.length = 0;\n  }\n\n  copy(fsa)\n  {\n    this._states.length = 0;\n    for(let state of fsa._states)\n    {\n      this._states.push(state);\n    }\n    this._transitions.length = 0;\n    for(let transition of fsa._transitions)\n    {\n      this._transitions.push(transition.slice());\n    }\n    this._finalStates.length = 0;\n    for(let final of fsa._finalStates)\n    {\n      this._finalStates.push(final);\n    }\n    this._customAlphabet.length = 0;\n    for(let symbol of fsa._customAlphabet)\n    {\n      this._customAlphabet.push(symbol);\n    }\n  }\n\n  newState(state)\n  {\n    if (this._states.includes(state))\n    {\n      throw new Error(\"State \\'\" + state + \"\\' already added to states.\");\n    }\n\n    this._states.push(state);\n    return state;\n  }\n\n  deleteState(state)\n  {\n    if (!this._states.includes(state))\n    {\n      throw new Error(\"State \\'\" + state + \"\\' does not exist.\");\n    }\n\n    this._states.splice(this._states.indexOf(state), 1);\n  }\n\n  renameState(oldState, newState)\n  {\n    if (!this._states.includes(oldState))\n    {\n      throw new Error(\"State \\'\" + oldState + \"\\' does not exist.\");\n    }\n    if (this._states.includes(newState))\n    {\n      throw new Error(\"State \\'\" + newState + \"\\' already exists.\");\n    }\n\n    for(let transition of this._transitions)\n    {\n      if (transition[SRC] == oldState)\n      {\n        transition[SRC] = newState;\n      }\n      if (transition[DST] == oldState)\n      {\n        transition[DST] = newState;\n      }\n    }\n\n    const index = this._states.indexOf(oldState);\n    this._states[index] = newState;\n  }\n\n  newTransition(fromState, toState, symbol)\n  {\n    if (!this._states.includes(fromState))\n    {\n      throw new Error(\"State \\'\" + fromState + \"\\' does not exist.\");\n    }\n\n    if (!this._states.includes(toState))\n    {\n      throw new Error(\"State \\'\" + toState + \"\\' does not exist.\");\n    }\n\n    //Check if already exists...\n    for(const transition of this._transitions)\n    {\n      if (transition[SRC] == fromState && transition[SYMBOL] == symbol && transition[DST] == toState)\n      {\n        return;\n      }\n    }\n\n    //Create new transition\n    this._transitions.push([fromState, symbol, toState]);\n  }\n\n  deleteTransition(fromState, toState, symbol=null)\n  {\n    for(let i = this._transitions.length - 1; i >= 0; --i)\n    {\n      const transition = this._transitions[i];\n      if (transition[SRC] == fromState && transition[DST] == toState)\n      {\n        //Delete if src, dst, and symbols match... or if deleting all symbols\n        if (symbol == null || transition[SYMBOL] == symbol)\n        {\n          this._transitions.splice(i, 1);\n        }\n      }\n    }\n  }\n\n  newSymbol(symbol)\n  {\n    if (this._customAlphabet.includes(symbol))\n    {\n      throw new Error(\"Symbol \\'\" + symbol + \"\\' already added to alphabet.\");\n    }\n\n    this._customAlphabet.push(symbol);\n  }\n\n  deleteSymbol(symbol)\n  {\n    if (!this._customAlphabet.includes(symbol))\n    {\n      throw new Error(\"Unable to remove symbol \\'\" + symbol + \"\\'.\");\n    }\n\n    this._customAlphabet.splice(this._customAlphabet.indexOf(symbol), 1);\n  }\n\n  setStartState(state)\n  {\n    if (this._states.length <= 0)\n    {\n      throw new Error(\"Not enough states.\");\n    }\n\n    if (!this._states.includes(state))\n    {\n      throw new Error(\"State \\'\" + state + \"\\' does not exist.\");\n    }\n\n    if (this.getStartState() == state) return;\n\n    this._states.splice(this._states.indexOf(state), 1);\n    this._states.unshift(state);\n  }\n\n  setFinalState(state, isFinal=true)\n  {\n    if (!this._states.includes(state))\n    {\n      throw new Error(\"State \\'\" + state + \"\\' does not exist.\");\n    }\n\n    if (isFinal)\n    {\n      if (this._finalStates.includes(state)) return;\n\n      this._finalStates.push(state);\n    }\n    else\n    {\n      if (!this._finalStates.includes(state)) return;\n      this._finalStates.splice(this._finalStates.indexOf(state), 1);\n    }\n  }\n\n  doTransition(state, symbol)\n  {\n    for(const transition of this._transitions)\n    {\n      if (transition[SRC] == state && transition[SYMBOL] == symbol)\n      {\n        return transition[DST];\n      }\n    }\n    return null;\n  }\n\n  isFinalState(state)\n  {\n    return this._finalStates.includes(state);\n  }\n\n  hasState(state)\n  {\n    return this._states.includes(state);\n  }\n\n  getStates()\n  {\n    return this._states;\n  }\n\n  //Is the same as isAlphabet if the user did not add custom symbols\n  isUsedAlphabet(symbol)\n  {\n    for(const transition of this._transitions)\n    {\n      if (transition[SYMBOL] == symbol)\n      {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  isUsedSymbol(symbol)\n  {\n    return this.isUsedAlphabet(symbol);\n  }\n\n  isSymbol(symbol)\n  {\n    return this.isAlphabet(symbol);\n  }\n\n  //Includes custom user-defined symbols (from newSymbol)\n  isAlphabet(symbol)\n  {\n    for(const s of this._customAlphabet)\n    {\n      if (s == symbol) return true;\n    }\n\n    return this.isUsedAlphabet(symbol);\n  }\n\n  getUsedAlphabet(dst=[])\n  {\n    const result = dst;\n    for(const transition of this._transitions)\n    {\n      const symbol = transition[SYMBOL];\n      if (symbol.length > 0 && !result.includes(symbol))\n      {\n        result.push(symbol);\n      }\n    }\n    return result;\n  }\n\n  getAlphabet(dst=[])\n  {\n    const result = dst;\n    for(const s of this._customAlphabet)\n    {\n      result.push(s);\n    }\n    return this.getUsedAlphabet(result);\n  }\n\n  getOutgoingTransitions(state=null, dst=[])\n  {\n    const result = dst;\n    for(const transition of this._transitions)\n    {\n      if (transition[SRC] == state)\n      result.push(transition);\n    }\n    return result;\n  }\n\n  getTransitions()\n  {\n    return this._transitions;\n  }\n\n  getStartState()\n  {\n    return this._states.length <= 0 ? null : this._states[0];\n  }\n\n  getFinalStates()\n  {\n    return this._finalStates;\n  }\n\n  isValidDFA()\n  {\n    const alphabet = this.getAlphabet();\n    const foundSymbols = new Array(alphabet.length);\n    foundSymbols.fill(false);\n\n    for(const state of this._states)\n    {\n      //Get all outgoing transitions\n      const transitions = this.getOutgoingTransitions(state);\n      for(const transition of transitions)\n      {\n        const index = alphabet.indexOf(transition[1]);\n        if (foundSymbols[index] == false)\n        {\n          foundSymbols[index] = true;\n        }\n        else\n        {\n          //Found duplicate\n          return false;\n        }\n      }\n\n      //Reset foundSymbols for next state\n      const length = foundSymbols.length;\n      for(let i = 0; i < length; ++i)\n      {\n        if (foundSymbols[i] == false)\n        {\n          //Found missing symbol for state\n          return false;\n        }\n        foundSymbols[i] = false;\n      }\n    }\n\n    return true;\n  }\n\n  toJSON()\n  {\n    const result = {};\n    if (this instanceof DFA) result.type = \"DFA\";\n    else if (this instanceof NFA) result.type = \"NFA\";\n    else result.type = \"FSA\";\n    result.states = this._states.slice();\n    result.alphabet = this._customAlphabet.slice();\n    result.usedAlphabet = this.getUsedAlphabet();\n    result.transitions = this._transitions.slice();\n    result.startState = this.getStartState();\n    result.finalStates = this._finalStates.slice();\n\n    return result;\n  }\n}\n\nexport default FSA;\n","import React from 'react';\n\nclass UploadIcon extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    return <svg className=\"upload-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n      <path d=\"M9,16V10H5L12,3L19,10H15V16H9M5,20V18H19V20H5Z\"/>\n    </svg>;\n  }\n}\n\nexport default UploadIcon;\n","import React from 'react';\n\nclass SaveIcon extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    return <svg className=\"save-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n      <path d=\"M19 12v7H5v-7H3v7c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-7h-2zm-6 .67l2.59-2.58L17 11.5l-5 5-5-5 1.41-1.41L11 12.67V3h2z\"/>\n      <path fill=\"none\" d=\"M0 0h24v24H0z\"/>\n    </svg>;\n  }\n}\n\nexport default SaveIcon;\n","class GraphElement\n{\n  constructor(id)\n  {\n    this._id = id;\n  }\n\n  setGraphElementID(graphElementID)\n  {\n    this._id = graphElementID;\n    return this;\n  }\n\n  //A unique identifier for this graph element\n  getGraphElementID()\n  {\n    return this._id;\n  }\n\n  //Calls getHashString() to generate an integer hash generally unqiue to the instance.\n  //Should only be used to distinguish between other objects with the same\n  //hash function. In other words, every instance should only be compared to\n  //other instances of the same class.\n  //usePosition can be used to tell the hash function whether or not to consider\n  //aesthetic, or position, attributes of the element.\n  getHashString(usePosition=true)\n  {\n    return this._id;\n  }\n}\nexport default GraphElement;\n","import React from 'react';\n\nclass UndoIcon extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    return <svg className=\"undo-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n      <path d=\"M0 0h24v24H0z\" fill=\"none\"/>\n      <path d=\"M12.5 8c-2.65 0-5.05.99-6.9 2.6L2 7v9h9l-3.62-3.62c1.39-1.16 3.16-1.88 5.12-1.88 3.54 0 6.55 2.31 7.6 5.5l2.37-.78C21.08 11.03 17.15 8 12.5 8z\"/>\n    </svg>;\n  }\n}\n\nexport default UndoIcon;\n","import React from 'react';\n\nclass RedoIcon extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    return <svg className=\"redo-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n      <path d=\"M0 0h24v24H0z\" fill=\"none\"/>\n      <path d=\"M18.4 10.6C16.55 8.99 14.15 8 11.5 8c-4.65 0-8.58 3.03-9.96 7.22L3.9 16c1.05-3.19 4.05-5.5 7.6-5.5 1.95 0 3.73.72 5.12 1.88L13 16h9V7l-3.6 3.6z\"/>\n    </svg>;\n  }\n}\n\nexport default RedoIcon;\n","import React from 'react';\nimport './InfoBlock.css';\n\nimport IconToggle from 'icons/IconToggle.js';\nimport DropDownIcon from 'icons/DropDownIcon.js';\n\n//TODO: Should be deprecated to use OptionGroup (or something similar)\nclass InfoBlock extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.dropdown = React.createRef();\n  }\n\n  isOpen()\n  {\n    return this.dropdown.state ? this.dropdown.state.open : false;\n  }\n\n  render()\n  {\n    return <div className={\"infoblock-container \" + this.props.className}>\n      <div className=\"infoblock-header\" onClick={(e)=>this.dropdown.onClick(e)}>\n        <label>{this.props.title}</label>\n        <IconToggle id=\"collapse\" ref={ref=>this.dropdown=ref} defaultValue={this.props.defaultValue}\n          style={{pointerEvents: \"none\"}}>\n          <DropDownIcon/>\n        </IconToggle>\n      </div>\n      <div className=\"infoblock-content\"\n        style={{display: this.isOpen() ? \"block\" : \"none\"}}>\n        {this.props.children}\n      </div>\n    </div>;\n  }\n}\n\nexport default InfoBlock;\n","import React from 'react';\n\nclass BoxAddIcon extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    return <svg className=\"boxadd-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n      <path d=\"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10h-4v4h-2v-4H7v-2h4V7h2v4h4v2z\"/>\n      <path d=\"M0 0h24v24H0z\" fill=\"none\"/>\n    </svg>;\n  }\n}\n\nexport default BoxAddIcon;\n","import React from 'react';\n\nclass TriangleIcon extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    return <svg className=\"triangle-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n      <path d=\"M12 7.77L18.39 18H5.61L12 7.77M12 4L2 20h20L12 4z\"/>\n      <path fill=\"none\" d=\"M0 0h24v24H0V0z\"/>\n    </svg>;\n  }\n}\n\nexport default TriangleIcon;\n","import React from 'react';\nimport './StateTag.css';\n\nimport Config from 'config.js';\n\nclass StateTag extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.state = {\n      value: null,\n      error: false\n    };\n\n    this.onValueChange = this.onValueChange.bind(this);\n    this.onFocus = this.onFocus.bind(this);\n    this.onBlur = this.onBlur.bind(this);\n    this.onKeyDown = this.onKeyDown.bind(this);\n    this.onKeyUp = this.onKeyUp.bind(this);\n  }\n\n  onFocus(e)\n  {\n    const target = e.target;\n    //This is a prop, refer to StateList for the actual node.getNodeLabel()\n    this.setState({ value: this.props.label, error: false }, () => {\n      target.select()\n    });\n\n    //Call any listening focus\n    if (this.props.onFocus) this.props.onFocus(e);\n  }\n\n  onBlur(e)\n  {\n    const graphController = this.props.graphController;\n    const newLabel = this.state.value;\n\n    //The value is already processed, abort\n    if (newLabel != null)\n    {\n      const node = this.props.src;\n      const graph = graphController.getGraph();\n      if (newLabel.length > 0)\n      {\n        const nodes = graph.getNodesByLabel(newLabel);\n        if (nodes.length <= 0)\n        {\n          //Valid! Rename it!\n          graphController.renameNode(node, newLabel);\n        }\n        else\n        {\n          //Found something already named that! Ignore!\n        }\n      }\n      else\n      {\n        //Delete!\n        graphController.deleteTargetNode(this.props.src);\n      }\n\n      this.setState({ value: null, error: false });\n\n      //Call any listening blurs\n      if (this.props.onBlur) this.props.onBlur(e);\n    }\n  }\n\n  onKeyDown(e)\n  {\n    if (e.keyCode === Config.SUBMIT_KEY || e.keyCode === Config.CLEAR_KEY)\n    {\n      e.preventDefault();\n    }\n  }\n\n  onKeyUp(e)\n  {\n    if (e.keyCode === Config.SUBMIT_KEY)\n    {\n      e.target.blur();\n    }\n    else if (e.keyCode === Config.CLEAR_KEY)\n    {\n      const target = e.target;\n      this.setState({ value: null, error: false}, () => {\n        target.blur();\n      });\n    }\n  }\n\n  onValueChange(e)\n  {\n    const graph = this.props.graphController.getGraph();\n    const value = e.target.value.trim();\n    let error = false;\n    if (value.length > 0)\n    {\n      const nodes = graph.getNodesByLabel(value);\n      if (nodes.length > 0)\n      {\n        //If there are more than 1 that have the same name\n        //OR if it is NOT the one we have...\n        if (nodes.length > 1 || nodes[0] !== this.props.src)\n        {\n          error = true;\n        }\n      }\n    }\n\n    this.setState({\n      value: value,\n      error: error\n    });\n  }\n\n  render()\n  {\n    const isCustom = this.props.src.getNodeCustom();\n    const value = this.state.value != null ? this.state.value : this.props.label;\n    return <div className={\"statetag-container\" +\n      (isCustom ? \" customtag\" : \"\") +\n      (value.length == 0 ? \" emptytag\" : \"\") +\n      (this.state.value && this.state.error ? \" errortag\" : \"\")}>\n      <input type=\"text\" className={(this.props.accept ? \" accept\" : \"\")}\n        spellCheck=\"false\"\n        style={{width: value.length + \"ch\"}}\n        value={value}\n        onChange={this.onValueChange}\n        onFocus={this.onFocus}\n        onBlur={this.onBlur}\n        onKeyUp={this.onKeyUp}\n        onKeyDown={this.onKeyDown}/>\n    </div>;\n  }\n}\n\nexport default StateTag;\n","import React from 'react';\nimport './StatesList.css';\n\nimport InfoBlock from '../infoblock/InfoBlock.js';\nimport IconButton from 'icons/IconButton.js';\nimport BoxAddIcon from 'icons/BoxAddIcon.js';\nimport TriangleIcon from 'icons/TriangleIcon.js';\n\nimport StateTag from './StateTag.js';\n\nclass StatesList extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.onStateCreate = this.onStateCreate.bind(this);\n  }\n\n  onStateCreate(e)\n  {\n    const x = -100 + (Math.random() * 100 * 2);\n    const y = -100 + (Math.random() * 100 * 2);\n    this.props.graphController.createNode(x, y);\n  }\n\n  render()\n  {\n    const graphController = this.props.graphController;\n    const graph = graphController.getGraph();\n    return <InfoBlock title={I18N.toString(\"component.stateslist.title\")} defaultValue=\"true\">\n      <div className=\"statelist-container\">\n        <div className=\"statelist\">\n          <TriangleIcon/>\n          {\n            graph.getNodes().map((e, i) => {\n              return <StateTag key={e.getGraphElementID()} src={e} label={e.getNodeLabel()} accept={e.getNodeAccept()}\n                graphController={graphController}\n                onFocus={ev => graphController.focusOnNode(e)}/>\n            })\n          }\n        </div>\n        <IconButton onClick={this.onStateCreate}>\n          <BoxAddIcon/>\n        </IconButton>\n      </div>\n    </InfoBlock>;\n  }\n}\n\nexport default StatesList;\n","import React from 'react';\n\nimport './AlphabetTag.css';\nimport Config from 'config.js';\n\nclass AlphabetTag extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.ref = null;\n\n    this.state = {\n      symbol: null,\n      error: false\n    };\n\n    this.onValueChange = this.onValueChange.bind(this);\n    this.onFocus = this.onFocus.bind(this);\n    this.onBlur = this.onBlur.bind(this);\n    this.onKeyDown = this.onKeyDown.bind(this);\n    this.onKeyUp = this.onKeyUp.bind(this);\n  }\n\n  onFocus(e)\n  {\n    const target = e.target;\n    this.setState({\n      symbol: this.props.src,\n      error: false\n    }, () => target.select());\n\n    //Call any listening focus\n    if (this.props.onFocus) this.props.onFocus(e);\n  }\n\n  onBlur(e)\n  {\n    const machineController = this.props.machineController;\n    const newSymbol = this.state.symbol;\n\n    if (newSymbol != null)\n    {\n      const oldSymbol = this.props.src;\n      if (newSymbol.length > 0)\n      {\n        const alphabet = machineController.getAlphabet();\n        if (!alphabet.includes(newSymbol))\n        {\n          if (oldSymbol)\n          {\n            //Valid! Rename it!\n            machineController.renameSymbol(oldSymbol, newSymbol);\n          }\n          else\n          {\n            //Valid! Add it to the list!\n            machineController.createSymbol(newSymbol);\n          }\n        }\n        else\n        {\n          //Found something already named that! Ignore!\n        }\n      }\n      else if (oldSymbol)\n      {\n        //Delete!\n        machineController.deleteSymbol(oldSymbol);\n      }\n    }\n\n    this.setState({symbol: null, error: false});\n\n    //Call any listening blurs\n    if (this.props.onBlur) this.props.onBlur(e);\n  }\n\n  onKeyDown(e)\n  {\n    if (e.keyCode === Config.SUBMIT_KEY || e.keyCode === Config.CLEAR_KEY)\n    {\n      e.preventDefault();\n    }\n  }\n\n  onKeyUp(e)\n  {\n    if (e.keyCode === Config.SUBMIT_KEY)\n    {\n      e.target.blur();\n    }\n    else if (e.keyCode === Config.CLEAR_KEY)\n    {\n      const target = e.target;\n      this.setState({ symbol: null, error: false}, () => {\n        target.blur();\n      });\n    }\n  }\n\n  onValueChange(e)\n  {\n    const machineController = this.props.machineController;\n    const symbol = e.target.value.trim();\n    let error = false;\n    if (symbol.length > 0)\n    {\n      const alphabet = machineController.getAlphabet();\n      if (alphabet.includes(symbol) && symbol != this.props.src)\n      {\n        error = true;\n      }\n    }\n\n    this.setState({\n      symbol: symbol,\n      error: error\n    });\n  }\n\n  render()\n  {\n    const symbol = this.state.symbol != null ? this.state.symbol : this.props.src;\n    const isUsed = false;\n    //TODO: const isUsed = this.props.src && this.props.machineController.isUsedSymbol(symbol);\n    return <div className={\"alphatag-container\" +\n      (isUsed ? \" usedtag\" : \"\") +\n      (this.props.src && (!symbol || symbol.length == 0) ? \" emptytag\" : \"\") +\n      (this.state.symbol && this.state.error ? \" errortag\" : \"\")}>\n      <input type=\"text\" ref={ref=>this.ref=ref} className=\"alphatag-input\"\n        spellCheck=\"false\"\n        maxLength=\"1\"\n        value={symbol}\n        onChange={this.onValueChange}\n        onFocus = {this.onFocus}\n        onBlur={this.onBlur}\n        onKeyUp={this.onKeyUp}\n        onKeyDown={this.onKeyDown}/>\n    </div>;\n  }\n}\n\nexport default AlphabetTag;\n","import React from 'react';\nimport './AlphabetList.css';\n\nimport InfoBlock from '../infoblock/InfoBlock.js';\nimport IconButton from 'icons/IconButton.js';\nimport BoxAddIcon from 'icons/BoxAddIcon.js';\n\nimport AlphabetTag from './AlphabetTag.js';\n\nclass AlphabetList extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n    this.editingTag = null;\n\n    this.state = {\n      editing: false\n    };\n\n    this.onSymbolCreate = this.onSymbolCreate.bind(this);\n    this.onStopEditing = this.onStopEditing.bind(this);\n  }\n\n  onSymbolCreate(e)\n  {\n    this.setState({editing: true}, () => {\n      this.editingTag.ref.focus();\n    });\n  }\n\n  onStopEditing(e)\n  {\n    this.setState({editing: false});\n  }\n\n  render()\n  {\n    const machineController = this.props.machineController;\n    const alphabet = machineController.getAlphabet();\n\n    return <InfoBlock title={I18N.toString(\"component.alphabetlist.title\")}>\n      <div className=\"alphalist-container\">\n        <div className=\"alphalist\">\n          {\n            alphabet.map((e, i) => {\n              return <AlphabetTag key={e + \".\" + i} src={e} machineController={machineController}/>\n            })\n          }\n          {\n            this.state.editing &&\n            <AlphabetTag ref={ref=>this.editingTag=ref} src={\"\"} machineController={machineController}\n              onBlur={this.onStopEditing}/>\n          }\n        </div>\n\n        <IconButton onClick={this.onSymbolCreate}>\n          <BoxAddIcon/>\n        </IconButton>\n      </div>\n    </InfoBlock>;\n  }\n}\n\nexport default AlphabetList;\n","import React from 'react';\nimport './TransitionTable.css';\n\nimport InfoBlock from '../infoblock/InfoBlock.js';\nimport NFA from 'machine/NFA.js';\nimport { EMPTY } from 'machine/Symbols.js';\n\nconst SRC = 0;\nconst SYMBOL = 1;\nconst DST = 2;\n\nconst SYMBOL_AXIS = \"symbols\";\nconst STATE_AXIS = \"states\";\n\nclass TransitionTable extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.state = {\n      rowAxis: SYMBOL_AXIS\n    }\n  }\n\n  render()\n  {\n    const machineController = this.props.machineController;\n    const machine = machineController.getMachineBuilder().getMachine();\n    const states = machineController.getStates();\n    const alphabet = machineController.getAlphabet();\n    const transitions = machineController.getTransitions();\n    const rowAxisType = this.state.rowAxis;\n    const isNFAMachine = machineController.getMachineType() == \"NFA\";\n    const hasEmptyColumn = rowAxisType === SYMBOL_AXIS && isNFAMachine;\n\n    return <InfoBlock title={I18N.toString(\"component.transitiontable.title\")}>\n      <div className=\"transitiontable-container\">\n        <table className=\"transitiontable\">\n          <tbody>\n            <tr>\n              <th className=\"emptycell\">\n                <button className=\"panel-button\" onClick={()=>\n                  this.setState((prev, props)=>{\n                    return {\n                      rowAxis: prev.rowAxis == SYMBOL_AXIS ? STATE_AXIS : SYMBOL_AXIS\n                    };\n                  })}>\n                  {this.state.rowAxis == SYMBOL_AXIS ? \"Q/\\u03A3\" : \"Q/Q\"}\n                </button>\n              </th>\n              {\n                rowAxisType === SYMBOL_AXIS ?\n                  alphabet.map((e, i)=><th key={e} scope=\"col\" className=\"col\">{e}</th>) :\n                rowAxisType === STATE_AXIS ?\n                  states.map((e, i)=><th key={e} scope=\"col\" className=\"col\">{e}</th>) :\n                null\n              }\n              {\n                hasEmptyColumn &&\n                  <th scope=\"col\">{EMPTY}</th>\n              }\n            </tr>\n            {\n              states.map((e, i)=><tr key={e}>\n                <th scope=\"row\" className=\"row\">{e}</th>\n                {\n                  rowAxisType === SYMBOL_AXIS ?\n                    alphabet.map((symbol, i) => {\n                      let className = \"\";//TODO: machine.isFinalState(e) ? \"accept\" : \"\";\n                      const result = getDestinationFromSourceAndSymbol(machine, e, symbol, isNFAMachine);\n                      if (!isNFAMachine && (result.startsWith(\"{\") || result == \"-\"))\n                      {\n                        className += \" error\";\n                      }\n                      return <td key={e + \",\" + symbol} className={className}>\n                        {result}\n                      </td>;\n                    }) :\n                  rowAxisType === STATE_AXIS ?\n                    states.map((dst, i) => {\n                      const result = getSymbolFromSourceAndDestination(machine, e, dst);\n                      return <td key={e + \",\" + dst}>\n                        {result}\n                      </td>;\n                    }) :\n                  null\n                }\n                {\n                  hasEmptyColumn &&\n                    <td>{getDestinationFromSourceAndSymbol(machine, e, EMPTY)}</td>\n                }\n              </tr>)\n            }\n          </tbody>\n        </table>\n      </div>\n    </InfoBlock>;\n  }\n}\n\nfunction getDestinationFromSourceAndSymbol(machine, src, symbol, isSet=true)\n{\n  const result = machine.doTransition(src, symbol);\n\n  //Assumes that the machine is always an NFA, therefore the result is an array\n  if (Array.isArray(result))\n  {\n    return !isSet && result.length == 1 ?\n      result[0] :\n      result.length > 0 ?\n      \"{\" + result.join(\", \") + \"}\" : \"-\";\n  }\n  else\n  {\n    return result || \"-\";\n  }\n}\n\nfunction getSymbolFromSourceAndDestination(machine, src, dst)\n{\n  const result = [];\n  const transitions = machine.getTransitions();\n  for(const transition of transitions)\n  {\n    if (transition[SRC] == src && transition[DST] == dst)\n    {\n      result.push(transition[SYMBOL]);\n    }\n  }\n\n  if (result.length === 1)\n  {\n    return result[0];\n  }\n  else if (result.length > 0)\n  {\n    return \"{\" + result.join(\", \") + \"}\";\n  }\n  else\n  {\n    return \"-\";\n  }\n}\n\nexport default TransitionTable;\n","import React from 'react';\nimport './TransitionFunction.css';\n\nimport InfoBlock from '../infoblock/InfoBlock';\nimport { EMPTY } from 'machine/Symbols.js';\n\nclass TransitionFunction extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const machineController = this.props.machineController;\n    const machine = machineController.getMachineBuilder().getMachine();\n    const states = machineController.getStates();\n    const alphabet = machineController.getAlphabet().sort();\n    let isNFA = machineController.getMachineType() == \"NFA\";\n    return(\n        <InfoBlock title=\"Transition Chart\">\n          <div className=\"transitionfunction-container\">\n            <table className=\"transitionfunction-table\">\n              <tbody>\n                <tr>\n                  <th>Q{\"\\u00d7\"}&Sigma;</th>\n                  <th>{isNFA ? \"\\u2118(Q)\" : \"Q\"}</th>\n                </tr>\n                {\n                  states.map((state, i) => {\n                    let emptrans = machine.doTransition(state, EMPTY);\n                    let empclassName = \"\";\n\n                    let transitions = alphabet.map((symbol, j) => {\n                      let className = \"\";\n                      let trans = machine.doTransition(state, symbol);\n                      if(isNFA && !trans.length) return;\n                      if(!isNFA && !trans.length) {\n                        className = \"error\";\n                        trans = \"-\";\n                      }\n                      if(!isNFA && trans.length > 1) {\n                        className = \"error\";\n                        trans = \"{\" + trans + \"}\"\n                      }\n                      trans = isNFA ? \"{\" + trans + \"}\" : \"\" + trans;\n                      return <tr key={\"\"+state+symbol}>\n                          <td className=\"transitionfunction-key\">{\"(\" + state + \",\" + symbol + \")\"}</td>\n                          <td className={\"transitionfunction-value \" + className}>{trans}</td>\n                        </tr>\n                    });\n\n                    if(emptrans.length > 0) {\n                      if(!isNFA) {\n                        empclassName = \"error\";\n                      }\n                      const addBrac = isNFA || emptrans.length > 1;\n                      emptrans = addBrac ? \"{\" + emptrans + \"}\" : \"\" + emptrans;\n                      transitions.unshift(\n                          <tr key={\"\"+state+EMPTY}>\n                            <td className={\"transitionfunction-key \" + empclassName}>{\"(\" + state + \",\" + EMPTY + \")\"}</td>\n                            <td className=\"transitionfunction-value\">{emptrans}</td>\n                          </tr>\n                      );\n                    }\n                    return transitions;\n                  })\n                }\n              </tbody>\n            </table>\n          </div>\n        </InfoBlock>\n    );\n  }\n}\n\nexport default TransitionFunction;\n","import React from 'react';\nimport './FormalDefinition.css';\nimport { EMPTY } from 'machine/Symbols.js';\n\nimport { EMPTY_SET, ARROW } from 'machine/Symbols.js';\n\nconst EQUAL = \"=\";\nconst DELTA = \"\\u03b4\";\n\nclass FormalDefinition extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const machineController = this.props.machineController;\n    const machine = machineController.getMachineBuilder().getMachine();\n    const states = machineController.getStates();\n    const finalStates = machineController.getFinalStates();\n    const alphabet = machineController.getAlphabet().sort();\n    let isNFA = machineController.getMachineType() == \"NFA\";\n    return <div className=\"formaldef-container\">\n      <h2>{\"M = (Q, \\u03A3, \\u03b4, q0, F)\"}</h2>\n      <div>\n        <h3>Q =</h3>\n        <span className=\"formaldef-values\">\n          {states.length > 0 ? \"{ \" + states.join(\", \") + \" }\" : EMPTY_SET}\n        </span>\n      </div>\n      <div>\n        <h3>&Sigma; =</h3>\n        <span className=\"formaldef-values\">\n          {alphabet.length > 0 ? \"{ \" + alphabet.join(\", \") + \" }\" : EMPTY_SET}\n        </span>\n      </div>\n      <div>\n        <h3>{DELTA}</h3>\n        <div className=\"formaldef-values\">\n          {\n            states.map((state, i) => {\n              let emptrans = machine.doTransition(state, EMPTY);\n              let empclassName = \"\";\n\n              let transitions = alphabet.map((symbol, j) => {\n                let className = \"\";\n                let trans = machine.doTransition(state, symbol);\n                if(isNFA && !trans.length) return;\n                if(!isNFA && !trans.length) {\n                  className = \"error\";\n                  trans = \"-\";\n                }\n                if(!isNFA && trans.length > 1) {\n                  className = \"error\";\n                  trans = \"{ \" + trans + \" }\"\n                }\n                trans = isNFA ? \"{ \" + trans + \" }\" : \"\" + trans;\n                return <div key={\"\"+state+symbol} className={className}>\n                      {DELTA + \"( ( \" + state + \", \" + symbol + \" ) )\" + \" \" + EQUAL + \" \" + trans}\n                </div>\n              });\n\n              if(emptrans.length > 0) {\n                if(!isNFA) {\n                  empclassName = \"error\";\n                }\n                const addBrac = isNFA || emptrans.length > 1;\n                emptrans = addBrac ? \"{ \" + emptrans + \" }\" : \"\" + emptrans;\n                transitions.unshift(\n                    <div key={\"\" + state + EMPTY} className={empclassName}>\n                      {DELTA + \"( ( \" + state + \", \" + EMPTY + \" ) )\" + \" \" + EQUAL + \" \" + emptrans}\n                    </div>\n                );\n              }\n              return transitions;\n            })\n          }\n          {\n            isNFA && <div id=\"formaldef-otherinputs\">\n              <div>{\"For all other inputs (q, x),\"}</div>\n              <div>{DELTA + \"( (q, x) )\" + \" \" + EQUAL + \" \" + EMPTY_SET}</div>\n            </div>\n          }\n        </div>\n      </div>\n      <div>\n        <h3>q0 =</h3>\n        <span className=\"formaldef-values\">\n          {states[0]}\n        </span>\n      </div>\n      <div>\n        <h3>F =</h3>\n        <span className=\"formaldef-values\">\n          {finalStates.length > 0 ? \"{ \" + finalStates.join(\",\") + \" }\" : EMPTY_SET}\n        </span>\n      </div>\n    </div>;\n  }\n}\n\nexport default FormalDefinition;\n","import React from 'react';\nimport '../Panel.css';\nimport './OverviewPanel.css';\n\nimport Config from 'config.js';\n\nimport FormattedInput from 'system/formattedinput/FormattedInput.js';\n\nimport StatesList from './stateslist/StatesList.js';\nimport AlphabetList from './alphabetlist/AlphabetList.js';\nimport TransitionTable from './transitiontable/TransitionTable.js';\nimport TransitionFunction from './transitionfunction/TransitionFunction.js';\nimport FormalDefinition from \"./formaldefinition/FormalDefinition\";\n\nclass OverviewPanel extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.container = null;\n\n    this.state = {\n      viewFormal: false\n    };\n\n    this.onChangeMachineType = this.onChangeMachineType.bind(this);\n    this.onAutoLayout = this.onAutoLayout.bind(this);\n\n    this.onChangeAutoRename = this.onChangeAutoRename.bind(this);\n    this.onSubmitAutoStatePrefix = this.onSubmitAutoStatePrefix.bind(this);\n    this.onAutoStateFormat = this.onAutoStateFormat.bind(this);\n\n    this.switchDefinition = this.switchDefinition.bind(this);\n  }\n\n  onAutoLayout(e)\n  {\n    const graphController = this.props.currentModule.getGraphController();\n    graphController.applyAutoLayout();\n  }\n\n  onChangeMachineType(e)\n  {\n    const value = e.target.value;\n    const machineController = this.props.currentModule.getMachineController();\n    machineController.changeMachineTo(value);\n  }\n\n  onChangeAutoRename(e)\n  {\n    const graphController = this.props.currentModule.getGraphController();\n    graphController.setAutoRenameNodes(e.target.checked);\n  }\n\n  onSubmitAutoStatePrefix(next, prev)\n  {\n    const graphController = this.props.currentModule.getGraphController();\n    const graphLabeler = graphController.getGraphLabeler();\n\n    const prefix = graphLabeler.getDefaultNodeLabelPrefix();\n    if (prefix != next)\n    {\n      graphLabeler.setDefaultNodeLabelPrefix(next);\n      graphController.applyAutoRename();\n    }\n  }\n\n  onAutoStateFormat(value)\n  {\n    return value && value.length > 0 ? value : Config.STR_STATE_LABEL;\n  }\n\n  switchDefinition()\n  {\n    this.setState((prev, props) => {\n      return { viewFormal: !prev.viewFormal };\n    });\n  }\n\n  render()\n  {\n    const currentModule = this.props.currentModule;\n    const graphController = currentModule.getGraphController();\n    const machineController = currentModule.getMachineController();\n\n    const graph = graphController.getGraph();\n\n    return <div className={\"panel-container \" + this.props.className} id=\"overview\" ref={ref=>this.container=ref} style={this.props.style}>\n      <div className=\"panel-title\">\n        <h1>{I18N.toString(\"component.overview.title\")}</h1>\n      </div>\n        <div className=\"panel-content\">\n          <select className=\"machine-type panel-select\"\n            value={machineController.getMachineType()}\n            onChange={this.onChangeMachineType}>\n            <option value=\"DFA\">DFA</option>\n            <option value=\"NFA\">NFA</option>\n          </select>\n\n          {this.state.viewFormal &&\n            <FormalDefinition machineController={machineController}/>}\n\n          {\n            !this.state.viewFormal &&\n            <div>\n              <div>\n                <div className=\"graphinfo-important\">\n                  <StatesList graphController={graphController}/>\n                  <AlphabetList machineController={machineController}/>\n                </div>\n                <div className=\"graphinfo\">\n                  <TransitionFunction machineController={machineController}/>\n                  <TransitionTable machineController={machineController}/>\n                </div>\n              </div>\n              <hr/>\n\n              {/*State Labeling*/}\n              <div style={{paddingBottom: \"0.5em\"}}>\n                <h3 style={{marginBottom: \"0\"}}>State Labels</h3>\n                <div style={{display: \"flex\", flexDirection: \"row\"}}>\n                  <div className=\"statetag-container\">\n                    <FormattedInput defaultValue={graphController.getGraphLabeler().getDefaultNodeLabelPrefix()} style={{width: \"4em\"}} formatter={this.onAutoStateFormat} captureOnExit=\"save\" onSubmit={this.onSubmitAutoStatePrefix}/>\n                  </div>\n                  <select style={{\n                      background: \"none\",\n                      outline: \"none\",\n                      border: \"none\",\n                      padding: \"0\",\n                      margin: \"0\",\n                      appearance: \"none\",\n                      color: \"white\"\n                    }} disabled={true}>\n                    <option>{\"0-9\"}</option>\n                    <option>{\"a-z\"}</option>\n                    <option>{\"A-Z\"}</option>\n                  </select>\n                </div>\n                <div className=\"panel-checkbox\">\n\n                  <input type=\"checkbox\" id=\"auto-statename\"\n                    onChange={this.onChangeAutoRename}\n                    checked={graphController.shouldAutoRenameNodes()}/>\n                  <label htmlFor=\"auto-statename\">{I18N.toString(\"options.autolabel\")}</label>\n                </div>\n              </div>\n\n              <hr/>\n\n              <button className=\"panel-button\" onClick={this.onAutoLayout} disabled={graph.isEmpty()}>\n                {I18N.toString(\"action.overview.autolayout\")}\n              </button>\n            </div>\n          }\n\n          <button className=\"panel-button\" onClick={this.switchDefinition}>\n            {this.state.viewFormal ? \"Back\" : \"View Definition\"}\n          </button>\n        </div>\n      <div className=\"panel-bottom\"></div>\n    </div>;\n  }\n}\nObject.defineProperty(OverviewPanel, 'TITLE', {\n  get: function() { return I18N.toString(\"component.overview.title\"); }\n});\nOverviewPanel.UNLOCALIZED_NAME = \"component.overview.title\";\n\nexport default OverviewPanel;\n","import { EMPTY } from 'machine/Symbols.js';\nimport NFA from 'machine/NFA.js'\n\n//This ASSUMES that the passed-in machine is an NFA! (and not a DFA)\nexport function solveNFA(nfa, input)\n{\n  if (typeof input === 'string') input = input[Symbol.iterator]();\n\n  let cachedStates = [];\n  let cachedSymbols = [];\n  cachedStates.push({state: nfa.getStartState(), index: 0});\n  for (let currState of nfa.doClosureTransition(nfa.getStartState()))\n  {\n    cachedStates.push({state: currState , index: 0});\n  }\n  let checkedStates = [];\n  let symbol = null;\n\n  let counter = 0;\n\n  while(cachedStates.length > 0)\n  {\n    symbol = input.next().value;\n    let res = solveNFAbyStep(nfa, symbol, cachedStates, cachedSymbols, checkedStates);\n    if (res) return true;\n\n    //HACK: This is to stop any infinite loops! This will be fixed in the future!\n    ++counter;\n    if (counter > 1000)\n    {\n      return false;\n    }\n  }\n\n  return false;\n}\n\n//TODO: When an empty transition occurs, it does a closure transition.\n//The closure chain will be stored as a group\n//Any future transitions must not re-enter the group\nexport function solveNFAbyStep(nfa, symbol, cachedStates, cachedSymbols, checkedStates)\n{\n  //initialize variables\n  let state = null;\n  let nextStates = [];\n  let nextIndex = 0;\n\n  if (symbol != null)\n  {\n    cachedSymbols.push(symbol);\n  }\n\n  for(let cstate of cachedStates)\n  {\n    state = cstate.state;\n    symbol = cstate.index < cachedSymbols.length ? cachedSymbols[cstate.index] : null;\n\n    if (symbol != null)\n    {\n      //Read to next state...\n      nextIndex = cstate.index + 1;\n      for(let nextState of nfa.doTerminalTransition(state, symbol))\n      {\n        nextStates.push({state: nextState, index: nextIndex});\n      }\n    }\n    else\n    {\n      if (nfa.isFinalState(state)) return true;\n      checkedStates.push(state);\n    }\n\n    //Read none to next state...\n    nextIndex = cstate.index;\n    /*for(let nextState of nfa.doTransition(state,EMPTY))\n    {\n      if (checkedStates.includes(nextState)) continue;\n      if (symbol == null && nfa.isFinalState(nextState)) return true;\n\n      nextStates.push({state: nextState, index: nextIndex});\n    }*/\n  }\n  cachedStates.length = 0\n  cachedStates.push(...nextStates);\n  return false;\n}\n","import FSA from './FSA.js';\n\nconst SRC = 0;\nconst SYMBOL = 1;\nconst DST = 2;\n\nclass DFA extends FSA\n{\n  constructor()\n  {\n    super();\n  }\n\n  validate()\n  {\n    //TODO: Deprecate this\n    console.error(\"This is deprecated, please use FSA.isValidDFA()\");\n    return this.isValidDFA();\n  }\n\n  //Override default behavior\n  newTransition(fromState, toState, symbol)\n  {\n    if (!this._states.includes(fromState))\n    {\n      throw new Error(\"State \\'\" + fromState + \"\\' does not exist.\");\n    }\n\n    if (!this._states.includes(toState))\n    {\n      throw new Error(\"State \\'\" + toState + \"\\' does not exist.\");\n    }\n\n    for(const transition of this._transitions)\n    {\n      //Check if already exists...\n      if (transition[SRC] == fromState && transition[SYMBOL] == symbol && transition[DST] == toState)\n      {\n        return;\n      }\n      //Check if valid deterministic transition...\n      else if (transition[SRC] == fromState && transition[SYMBOL] == symbol)\n      {\n        throw new Error(\"Unable to create illegal nondeterministic transition for DFA.\");\n      }\n    }\n\n    //Create new transition\n    this._transitions.push([fromState, symbol, toState]);\n  }\n}\n\nexport default DFA;\n","//FIXME: FSABUILDER: these should be the other ones\nimport { solveDFA } from 'machine/util/solveDFA.js';\nimport { solveNFA, solveNFAbyStep } from 'machine/util/solveNFA.js';\n\nimport { DFA } from 'machine/DFA.js';\n\nconst STEPTIME = 500;\nconst SKIPTIME = 50;\n\nclass TestMode\n{\n  constructor(testingManager)\n  {\n    this.graphController = null;\n    this.machineController = null;\n\n    this.testingManager = testingManager;\n\n    this.targets = [];\n\n    this.history = [];\n    this.indexofString = -1;\n    this.result = false;\n\n    //for nfa use\n    this.cachedStates = [];\n    this.cachedSymbols = [];\n    this.checkedStates = [];\n    this.running = false;\n    this.started = false;\n    this.skipToEnd = false;\n\n    this.timer = null;\n\n    this.onNodeDestroy = this.onNodeDestroy.bind(this);\n  }\n\n  initialize(module)\n  {\n    this.graphController = module.getGraphController();\n    this.machineController = module.getMachineController();\n\n    //NOTE: This is not necessary because you can edit once in stepbystep mode\n    //this.graphController.getGraph().on(\"nodeDestroy\", this.onNodeDestroy);\n  }\n\n  destroy()\n  {\n    //this.graphController.getGraph().removeEventListener(\"nodeDestroy\", this.onNodeDestroy);\n  }\n\n  onNodeDestroy(node)\n  {\n    //this.targets.splice(this.targets.indexOf(node), 1);\n  }\n\n  onStart()\n  {\n    this.prepareForNewTest();\n    this.started = true;\n    this.skipToEnd = false;\n  }\n\n  onResume()\n  {\n    //If at the end, restart!\n    if (!this.hasNextStep())\n    {\n      this.testingManager.inputList.resetTests(false);\n    }\n\n    this.running = true;\n\n    const step = () => {\n      if (this.running)\n      {\n        if (this.hasNextStep())\n        {\n          this.onNextStep();\n          this.timer = setTimeout(step, STEPTIME);\n        }\n        else\n        {\n          this.onPause();\n        }\n      }\n    };\n    this.timer = setTimeout(step, STEPTIME);\n  }\n\n  onPause()\n  {\n    this.running = false;\n  }\n\n  onStop()\n  {\n    this.targets.length = 0;\n\n    this.running = false;\n    this.started = false;\n    this.skipToEnd = false;\n  }\n\n  isRunning()\n  {\n    return this.running;\n  }\n\n  isStarted()\n  {\n    return this.started;\n  }\n\n  isSkipping()\n  {\n    return this.skipToEnd;\n  }\n\n  hasPrevStep()\n  {\n    return this.history.length > 0 ||\n      this.testingManager.inputList.hasPrevInput();\n  }\n\n  onPreviousStep()\n  {\n    if (this.history.length > 0)\n    {\n      const previous = this.history.pop();\n      this.targets.length = 0;\n      this.cachedStates.length = 0;\n      this.cachedSymbols.length = 0;\n      this.checkedStates.length = 0;\n\n      //Copy the old step\n      for(const target of previous.targets)\n      {\n        if (!target) throw new Error(\"Found null target\");\n\n        this.targets.push(target);\n      }\n      for(const state of previous.cachedStates)\n      {\n        this.cachedStates.push(state);\n      }\n      for(const symbol of previous.cachedSymbols)\n      {\n        this.cachedSymbols.push(symbol);\n      }\n      for(const state of previous.checkedStates)\n      {\n        this.checkedStates.push(state);\n      }\n\n      this.indexofString--;\n    }\n    else\n    {\n      this.indexofString = -1;\n      this.testingManager.inputList.prevInput();\n    }\n  }\n\n  hasNextStep()\n  {\n    return this.indexofString < this.testingManager.inputList.getCurrentInput().value.length ||\n      this.testingManager.inputList.hasNextInput();\n  }\n\n  onNextStep()\n  {\n    const testInput = this.testingManager.inputList.getCurrentInput();\n    const fsa = this.machineController.getMachineBuilder().getMachine();\n\n    //Get next character of current test string\n    this.indexofString += 1;\n\n    //If no more characters to get...\n    if(this.indexofString >= testInput.value.length)\n    {\n      //End of test string\n      //Run it one more time...\n      this.result = solveNFAbyStep(fsa, null, this.cachedStates, this.cachedSymbols, this.checkedStates);\n      testInput.setResult(this.result);\n\n      //If this is the last test input...\n      if (!this.testingManager.inputList.hasNextInput())\n      {\n        //End of test!\n        this.onPause();\n        return false;\n      }\n      else\n      {\n        const result = this.testingManager.inputList.nextInput();\n\n        //Stop the resume at each string\n        //this.running = false;\n\n        this.prepareForNewTest();\n        return true;\n      }\n    }\n    else\n    {\n      //Update history\n      const currentStep = this.getCurrentCache();\n      this.history.push(currentStep);\n\n      //Run it\n      let nextChar = testInput.value[this.indexofString];\n\n      this.result = solveNFAbyStep(fsa, nextChar, this.cachedStates, this.cachedSymbols, this.checkedStates);\n      //Update targets\n      this.targets.length = 0;\n\n      for(const state of this.cachedStates)\n      {\n        let node = this.machineController.getFirstGraphNodeByLabel(this.graphController.getGraph(), state.state);\n        if (!node) throw new Error(\"Found null target\");\n\n        if (!this.targets.includes(node)) this.targets.push(node);\n      }\n\n      if (this.targets.length <= 0 && !this.running)\n      {\n        this.skipToEnd = true;\n        const skipFunc = () => {\n          if (this.skipToEnd)\n          {\n            this.indexofString += 1;\n            if (this.indexofString >= testInput.value.length)\n            {\n              this.skipToEnd = false;\n            }\n            else\n            {\n              setTimeout(skipFunc, SKIPTIME);\n            }\n          }\n        };\n        setTimeout(skipFunc, SKIPTIME);\n      }\n\n      return true;\n    }\n  }\n\n  getCurrentCache()\n  {\n    return {\n      targets: this.targets.slice(),\n      cachedStates: this.cachedStates.slice(),\n      cachedSymbols: this.cachedSymbols.slice(),\n      checkedStates: this.checkedStates.slice()\n    };\n  }\n\n  getCurrentTestStringIndex()\n  {\n    return this.indexofString + 1;\n  }\n\n  prepareForNewTest()\n  {\n    this.cachedStates.length = 0;\n\n    const graph = this.graphController.getGraph();\n    if (graph.isEmpty()) return;\n\n    const machine = this.machineController.getMachineBuilder().getMachine();\n\n    this.targets.length = 0;\n\n    let startState = machine.getStartState();\n    for (let curr_state of machine.doClosureTransition(startState))\n    {\n      //FIXME: FSABUILDER: when converting, getFirstGraphNodeByLabel should be by id\n      this.cachedStates.push({state: curr_state, index: 0});\n      const node = this.machineController.getFirstGraphNodeByLabel(graph, curr_state);\n      if (!node) throw new Error(\"Found null target\");\n      this.targets.push(node);\n    }\n\n    this.cachedSymbols.length = 0;\n    this.checkedStates.length = 0;\n    this.indexofString = -1;\n    this.history.length = 0;\n\n    this.skipToEnd = false;\n  }\n}\n\nexport default TestMode;\n","import { guid } from 'util/MathHelper.js';\n\nimport { solveNFA } from 'machine/util/solveNFA.js';\n\nconst SUCCESS = true;\nconst FAILURE = false;\nconst PENDING = null;\n\n//Only refer to input by index, NEVER by reference!\nclass TestingInputList\n{\n  constructor()\n  {\n    this.inputList = [];\n    this.addInput(\"\");\n\n    this.inputIndex = 0;\n  }\n\n  isEmpty()\n  {\n    for(const input of this.inputList)\n    {\n      if (input.value.length > 0)\n      {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  testByIndex(index, machine)\n  {\n    if (index < 0 || index >= this.inputList.length)\n    {\n      throw new Error(\"Cannot find test input for index\");\n    }\n\n    const input = this.inputList[index];\n    input.setResult(null);\n    //TODO: make this a promise\n    const result = solveNFA(machine, input.value);\n    input.setResult(result);\n    return result;\n  }\n\n  importTests(file)\n  {\n    const reader = new FileReader();\n    reader.onload = (event) => {\n      try\n      {\n        //The only time the first element is being removed (then replaced)\n        this.inputList.length = 0;\n        this.inputIndex = 0;\n\n        const testInputs = event.target.result.split(\"\\n\");\n        for(let testInput of testInputs)\n        {\n          testInput = testInput.trim();\n          if (testInput.length > 0)\n          {\n            this.addInput(testInput);\n          }\n        }\n\n        //Make sure a first element exists\n        if (this.inputList.length < 0)\n        {\n          this.addInput(\"\");\n        }\n      }\n      catch(e)\n      {\n        reader.abort();\n      }\n    };\n    reader.readAsText(file);\n  }\n\n  getTestsAsStrings()\n  {\n    return this.inputList.map((e, i) => e.value);\n  }\n\n  clearTests()\n  {\n    //Reset first element\n    const first = this.inputList[0];\n    first.value = \"\";\n    first.result = null;\n    first.dirty = true;\n\n    //Reset list\n    this.inputList.length = 1;\n    this.inputIndex = 0;\n  }\n\n  resetTests(markDirty=true)\n  {\n    this.inputIndex = 0;\n\n    if (markDirty)\n    {\n      for(const input of this.inputList)\n      {\n        input.dirty = true;\n      }\n    }\n  }\n\n  getTests()\n  {\n    return this.inputList;\n  }\n\n  addInput(value)\n  {\n    const input = {\n      value: value,\n      result: null,\n      dirty: true,\n      id: guid(),\n      setResult(result)\n      {\n        this.dirty = false;\n        this.result = result;\n      }\n    };\n\n    this.inputList.push(input);\n    return input;\n  }\n\n  getInputByIndex(index)\n  {\n    if (index < 0 || index >= this.inputList.length)\n    {\n      throw new Error(\"Cannot find test input for index\");\n    }\n\n    return this.inputList[index];\n  }\n\n  removeInputByIndex(index)\n  {\n    if (index < 0 || index >= this.inputList.length)\n    {\n      throw new Error(\"Cannot find test input for index\");\n    }\n\n    if (index === 0)\n    {\n      //Cannot delete the first input element\n      throw new Error(\"Cannot delete the first test input\");\n    }\n\n    if (index <= this.inputIndex)\n    {\n      --this.inputIndex;\n    }\n\n    this.inputList.splice(index, 1);\n  }\n\n  nextInput()\n  {\n    ++this.inputIndex;\n    if (this.inputIndex >= this.inputList.length)\n    {\n      this.inputIndex = 0;\n    }\n\n    return this.inputList[this.inputIndex];\n  }\n\n  prevInput()\n  {\n    --this.inputIndex;\n    if (this.inputIndex < 0)\n    {\n      this.inputIndex = this.inputList.length - 1;\n    }\n\n    return this.inputList[this.inputIndex];\n  }\n\n  resetInput()\n  {\n    this.inputIndex = 0;\n  }\n\n  hasNextInput()\n  {\n    return this.inputIndex < this.inputList.length;\n  }\n\n  hasPrevInput()\n  {\n    return this.inputIndex > 0;\n  }\n\n  getCurrentInput()\n  {\n    return this.inputList[this.inputIndex];\n  }\n\n  getCurrentInputIndex()\n  {\n    return this.inputIndex;\n  }\n}\n\nexport default TestingInputList;\n","import Viewport from 'content/viewport/Viewport.js';\nimport TestMode from './TestMode.js';\nimport TestingInputList from './TestingInputList.js';\n\nclass TestingManager\n{\n  constructor()\n  {\n    this.machineController = null;\n    this.viewport = null;\n\n    this.inputList = new TestingInputList();\n\n    this.shouldCheckError = false;\n    this.isImmediateErrorCheck = false;\n    this.errorCheckMode = TestingManager.NO_ERROR_CHECK;\n    this.stepByStepMode = false;\n\n    this.testMode = new TestMode(this);\n  }\n\n  initialize(module, viewport)\n  {\n    this.machineController = module.getMachineController();\n    this.viewport = viewport;\n\n    this.testMode.initialize(module);\n  }\n\n  destroy()\n  {\n\n  }\n\n  setErrorCheckMode(mode)\n  {\n    //Update machine builder error checker\n    this.machineController.setMachineType(this.machineController.getMachineType());\n\n    if (mode == TestingManager.NO_ERROR_CHECK)\n    {\n      this.shouldCheckError = false;\n      this.errorCheckMode = mode;\n    }\n    else if (mode == TestingManager.DELAYED_ERROR_CHECK)\n    {\n      this.shouldCheckError = true;\n      this.isImmediateErrorCheck = false;\n      this.errorCheckMode = mode;\n    }\n    else if (mode == TestingManager.IMMEDIATE_ERROR_CHECK)\n    {\n      this.shouldCheckError = true;\n      this.isImmediateErrorCheck = true;\n      this.errorCheckMode = mode;\n    }\n    else\n    {\n      throw new Error(\"Unknown error check mode \\'\" + mode + \"\\'\");\n    }\n  }\n\n  getErrorCheckMode()\n  {\n    return this.errorCheckMode;\n  }\n\n  setStepByStepMode(mode)\n  {\n    this.stepByStepMode = mode ? true : false;\n    if (mode)\n    {\n      if (this.testMode.isStarted()) this.testMode.onStop();\n      this.testMode.onStart();\n      this.viewport.setState((prev, props) => {\n        if (prev.mode != Viewport.TESTING)\n        {\n          return {\n            prevMode: prev.mode,\n            mode: Viewport.TESTING\n          };\n        }\n        else\n        {\n          //It's already the correct viewport mode\n        }\n      });\n    }\n    else\n    {\n      if (this.testMode.isStarted()) this.testMode.onStop();\n      this.viewport.setState((prev, props) => {\n        return {mode: prev.prevMode};\n      });\n    }\n  }\n\n  getStepByStepMode()\n  {\n    return this.stepByStepMode;\n  }\n}\nTestingManager.NO_ERROR_CHECK = \"none\";\nTestingManager.DELAYED_ERROR_CHECK = \"delayed\";\nTestingManager.IMMEDIATE_ERROR_CHECK = \"immediate\";\n\nexport default TestingManager;\n","import React from 'react';\n\nclass AddIcon extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    return <svg className=\"add-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n      <path d=\"M0 0h24v24H0z\" fill=\"none\"/>\n      <path d=\"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5 11h-4v4h-2v-4H7v-2h4V7h2v4h4v2z\"/>\n    </svg>;\n  }\n}\n\nexport default AddIcon;\n","import React from 'react';\n\nclass RemoveIcon extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    return <svg className=\"remove-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n      <path d=\"M0 0h24v24H0z\" fill=\"none\"/>\n      <path d=\"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5 11H7v-2h10v2z\"/>\n    </svg>;\n  }\n}\n\nexport default RemoveIcon;\n","import React from 'react';\n\nclass SuccessIcon extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    return <svg className=\"success-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n      <path fill=\"none\" d=\"M0 0h24v24H0V0zm0 0h24v24H0V0z\"/>\n      <path d=\"M16.59 7.58L10 14.17l-3.59-3.58L5 12l5 5 8-8zM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z\"/>\n    </svg>;\n  }\n}\n\nexport default SuccessIcon;\n","import React from 'react';\n\nclass FailureIcon extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    return <svg className=\"failure-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n      <path d=\"M0 0h24v24H0z\" fill=\"none\"/>\n      <path d=\"M14.59 8L12 10.59 9.41 8 8 9.41 10.59 12 8 14.59 9.41 16 12 13.41 14.59 16 16 14.59 13.41 12 16 9.41 14.59 8zM12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z\"/>\n    </svg>;\n  }\n}\n\nexport default FailureIcon;\n","import React from 'react';\n\nclass RunningManIcon extends React.Component\n{\n    constructor(props)\n    {\n        super(props);\n    }\n    render() {\n        return <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n                <path fill=\"none\" d=\"M0 0h24v24H0z\"/>\n                <path d=\"M13.49 5.48c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm-3.6 13.9l1-4.4 2.1 2v6h2v-7.5l-2.1-2 .6-3c1.3 1.5 3.3 2.5 5.5 2.5v-2c-1.9 0-3.5-1-4.3-2.4l-1-1.6c-.4-.6-1-1-1.7-1-.3 0-.5.1-.8.1l-5.2 2.2v4.7h2v-3.4l1.8-.7-1.6 8.1-4.9-1-.4 2 7 1.4z\"/>\n            </svg>;\n    }\n}\n\nexport default RunningManIcon;\n","import React from 'react';\nimport './StatusButton.css';\n\nimport IconButton from 'icons/IconButton.js';\nimport SuccessIcon from 'icons/SuccessIcon.js';\nimport FailureIcon from 'icons/FailureIcon.js';\nimport WorkingIcon from 'icons/WorkingIcon.js';\nimport RunningManIcon from 'icons/RunningManIcon.js';\n\nclass StatusButton extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    const active = this.props.active;\n    if (this.props.mode === true)\n    {\n      //Success icon\n      return <IconButton className={\"status-icon success\" + (active ? \" active\" : \"\")}\n        onClick={this.props.onClick}>\n        <SuccessIcon/>\n      </IconButton>;\n    }\n    else if (this.props.mode === false)\n    {\n      //Failure icon\n      return <IconButton className={\"status-icon failure\" + (active ? \" active\" : \"\")}\n        onClick={this.props.onClick}>\n        <FailureIcon/>\n      </IconButton>;\n    }\n    else\n    {\n      //Pending icon\n      return <IconButton className={\"status-icon\" + (active ? \" active\" : \"\")}\n        onClick={this.props.onClick}>\n        <RunningManIcon/>\n      </IconButton>;\n    }\n  }\n}\n\nexport default StatusButton;\n","import React from 'react';\nimport './TestingInput.css';\n\nimport Config from 'config.js';\nimport { EMPTY } from 'machine/Symbols.js';\n\nimport IconButton from 'icons/IconButton.js';\nimport AddIcon from 'icons/AddIcon.js';\nimport RemoveIcon from 'icons/RemoveIcon.js';\n\nimport StatusButton from './StatusButton.js';\n\nclass TestingInput extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.ref = React.createRef();\n\n    this.onStatusClick = this.onStatusClick.bind(this);\n    this.onSubmitClick = this.onSubmitClick.bind(this);\n    this.onValueChange = this.onValueChange.bind(this);\n    this.onKeyDown = this.onKeyDown.bind(this);\n    this.onKeyUp = this.onKeyUp.bind(this);\n  }\n\n  getInput()\n  {\n    return this.props.testList.getInputByIndex(this.props.index);\n  }\n\n  isInputFirst()\n  {\n    return this.props.index === 0;\n  }\n\n  onStatusClick(e)\n  {\n    this.props.testList.testByIndex(this.props.index, this.props.machineBuilder.getMachine());\n  }\n\n  onSubmitClick(e)\n  {\n    if (this.isInputFirst())\n    {\n      const src = this.getInput();\n\n      //Add test input to list\n      const newTest = this.props.testList.addInput(src.value);\n      //Copy result to new test (should not be setResult)\n      newTest.result = src.result;\n      newTest.dirty = src.dirty;\n\n      //Delete already processed test\n      src.value = \"\";\n      src.result = null;\n      src.dirty = true;\n\n      //Reselect the target\n      this.ref.focus();\n    }\n    else\n    {\n      //Remove test input from list\n      this.props.testList.removeInputByIndex(this.props.index);\n    }\n  }\n\n  onValueChange(e)\n  {\n    const value = e.target.value.trim();\n    const src = this.getInput();\n    src.value = value;\n    src.dirty = true;\n  }\n\n  onKeyDown(e)\n  {\n    //If it is an 'enter', don't put in a new line...\n    if (e.keyCode === Config.SUBMIT_KEY)\n    {\n      e.preventDefault();\n    }\n    //Delete it if there is no value in it\n    else if (e.keyCode === Config.DELETE_KEY)\n    {\n      const src = this.getInput();\n      if (src.value.length <= 0)\n      {\n        const nextIndex = this.props.index + 1;\n        //Replace this input with the next one if there is one...\n        //Also, cannot delete first input, but this will never get there :)\n        if (this.props.testList.getTests().length > nextIndex)\n        {\n          const nextInput = this.props.testList.getInputByIndex(nextIndex);\n          src.value = nextInput.value;\n          src.result = nextInput.result;\n          src.dirty = nextInput.dirty;\n\n          this.props.testList.removeInputByIndex(nextIndex);\n        }\n      }\n    }\n  }\n\n  onKeyUp(e)\n  {\n    if (e.keyCode === Config.SUBMIT_KEY)\n    {\n      const shouldTestOnly = e.shiftKey;\n\n      //Should try to add and NOT run\n      if (this.isInputFirst() && !shouldTestOnly)\n      {\n        const src = this.getInput();\n\n        //Add test input to list\n        const newTest = this.props.testList.addInput(src.value);\n        //Copy result to new test (should not be setResult)\n        newTest.result = src.result;\n        newTest.dirty = src.dirty;\n\n        //Delete already processed test\n        src.value = \"\";\n        src.result = null;\n        src.dirty = true;\n\n        //Refocus the target\n        this.ref.focus();\n      }\n      //Should try to run ONLY\n      else\n      {\n        this.props.testList.testByIndex(this.props.index, this.props.machineBuilder.getMachine());\n\n        //Select everything again\n        this.ref.select();\n      }\n    }\n    else if (e.keyCode === Config.CLEAR_KEY)\n    {\n      e.target.blur();\n    }\n  }\n\n  render()\n  {\n    const src = this.getInput();\n    const first = this.isInputFirst();\n    return <div className={\"testinginput-container \" +\n      (this.props.testList.getCurrentInputIndex() === this.props.index ? \" active\" : \"\")}>\n\n      <StatusButton active={!src.dirty} mode={src.result} onClick={this.onStatusClick}/>\n\n      <input ref={ref=>this.ref=ref} className=\"testinginput-field\"\n        value={src.value}\n        placeholder={EMPTY}\n        onChange={this.onValueChange}\n        onKeyDown={this.onKeyDown}\n        onKeyUp={this.onKeyUp}\n        onFocus={(e)=>e.target.select()}/>\n\n      <IconButton className=\"testinginput-submit\" onClick={this.onSubmitClick}>\n        {first ? <AddIcon/> : <RemoveIcon/>}\n      </IconButton>\n    </div>;\n  }\n}\n\nexport default TestingInput;\n","import React from 'react';\n\nclass UploadTestButton extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    return <button\n      className={\"icon-button \" + this.props.className}\n      id={this.props.id}\n      title={this.props.title}\n      style={this.props.style}\n      disabled={this.props.disabled}\n      onClick={this.props.onClick}>\n      <input ref={ref=>this.uploadInput=ref}\n        id=\"test-upload-input\" type=\"file\" name=\"import\"\n        style={{display: \"none\"}}\n        onChange={this.props.onChange} accept=\".txt\"/>\n      <label htmlFor=\"test-upload-input\">\n        {this.props.children}\n      </label>\n    </button>;\n  }\n}\n\nexport default UploadTestButton;\n","import React from 'react';\n\nclass PageNewContentIcon extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    return <svg className=\"pagenewcontent-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n      <path d=\"M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 16H8v-2h8v2zm0-4H8v-2h8v2zm-3-5V3.5L18.5 9H13z\"/>\n    </svg>;\n  }\n}\n\nexport default PageNewContentIcon;\n","import React from 'react';\n\nclass CloseIcon extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    return <svg className=\"close-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n      <path d=\"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\"/>\n      <path d=\"M0 0h24v24H0z\" fill=\"none\"/>\n    </svg>;\n  }\n}\n\nexport default CloseIcon;\n","import React from 'react';\nimport '../Panel.css';\nimport './TestingPanel.css';\n\nimport { downloadText } from 'util/Downloader.js';\n\nimport TestingManager from 'modules/fsa/testing/TestingManager.js';\nimport TestingInput from './TestingInput.js';\n\nimport IconButton from 'icons/IconButton.js';\nimport UploadTestButton from './components/UploadTestButton.js';\n\nimport UploadIcon from 'icons/UploadIcon.js';\nimport CreateIcon from 'icons/PageNewContentIcon.js';\nimport SaveIcon from 'icons/SaveIcon.js';\nimport CloseIcon from 'icons/CloseIcon.js';\n\nconst TEST_FILENAME = \"test.txt\";\n\n//TODO: This is faster, since it's pretty easy to tell latency here. But really it shouldn't.\nconst REFRESH_TEST_TICKS = 30;\n\nclass TestingPanel extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.container = React.createRef();\n    this.uploadInput = React.createRef();\n\n    this.state = {\n      errorCheckMode: this.props.currentModule.getTestingManager().getErrorCheckMode(),\n      noTestMode: true\n    };\n\n    this._savedGraphHash = 0;\n    this._ticksSinceHash = 0;\n    this.stepByStepModeChecked = false;\n\n    this.onChangeErrorCheckMode = this.onChangeErrorCheckMode.bind(this);\n    this.onUploadFileChange = this.onUploadFileChange.bind(this);\n    this.onGraphChange = this.onGraphChange.bind(this);\n    this.onTestsRunAll = this.onTestsRunAll.bind(this);\n    this.onTestsClear = this.onTestsClear.bind(this);\n    this.onTestsSave = this.onTestsSave.bind(this);\n    this.onTestsNew = this.onTestsNew.bind(this);\n    this.onTestsUpload = this.onTestsUpload.bind(this);\n  }\n\n  componentWillMount()\n  {\n    const graphController = this.props.currentModule.getGraphController();\n    const graph = graphController.getGraph();\n\n    //HACK: this should be in FSABuilder and listen for machine changes instead\n    this._savedGraphHash = graph.getHashCode();\n    this._ticksSinceHash = 0;\n  }\n\n  componentWillUnmount()\n  {\n    const graphController = this.props.currentModule.getGraphController();\n    const graph = graphController.getGraph();\n    this._savedGraphHash = 0;\n  }\n\n  onGraphChange(g)\n  {\n    const tester = this.props.currentModule.getTestingManager();\n    tester.inputList.resetTests();\n  }\n\n  onUploadFileChange(e)\n  {\n    const files = e.target.files;\n    if (files.length > 0)\n    {\n      const tester = this.props.currentModule.getTestingManager();\n      tester.inputList.importTests(files[0]);\n      document.getElementById(\"test-name\").innerHTML = files[0].name;\n\n      //Makes sure you can upload the same file again.\n      e.target.value = \"\";\n    }\n  }\n\n  onChangeErrorCheckMode(e)\n  {\n    const value = e.target.value;\n\n    const currentModule = this.props.currentModule;\n    const graphController = currentModule.getGraphController();\n    const machineController = currentModule.getMachineController();\n    const tester = currentModule.getTestingManager();\n\n    const graph = graphController.getGraph();\n    const machineBuilder = machineController.getMachineBuilder();\n    tester.setErrorCheckMode(value);\n\n    //HACK: this should automatically be updated by testing manager on set error check mode\n    if (tester.shouldCheckError)\n    {\n      machineBuilder.onGraphChange(graph);\n    }\n\n    this.setState({errorCheckMode: value});\n  }\n\n  onTestsRunAll(e)\n  {\n    const currentModule = this.props.currentModule;\n    const machine = currentModule.getMachineController().getMachineBuilder().getMachine();\n    const tester = currentModule.getTestingManager();\n    if (tester.testMode.isStarted())\n    {\n      tester.setStepByStepMode(false);\n    }\n    else\n    {\n      const testList = tester.inputList;\n      const length = testList.getTests().length;\n      tester.setStepByStepMode(this.stepByStepModeChecked);\n      for(let i = 0; i < length; ++i)\n      {\n        testList.testByIndex(i, machine);\n      }\n    }\n  }\n\n  onTestsClear(e)\n  {\n    const tester = this.props.currentModule.getTestingManager();\n    tester.inputList.clearTests();\n    this.clearTestName();\n    this.hideTestInputList();\n    this.setState({noTestMode: true});\n  }\n\n  onTestsSave(e)\n  {\n    const tester = this.props.currentModule.getTestingManager();\n    downloadText(TEST_FILENAME, tester.inputList.getTestsAsStrings().join(\"\\n\"));\n  }\n\n  onTestsNew(e)\n  {\n      this.onTestsClear();\n      this.showTestInputList();\n      this.clearTestName();\n      this.setState({noTestMode: false});\n  }\n\n  onTestsUpload(e)\n  {\n      this.onTestsNew();\n      this.showTestInputList();\n  }\n\n  showTestInputList() {\n      document.getElementById(\"test-inputlist-container\").style.display = \"block\";\n  }\n\n  hideTestInputList() {\n      document.getElementById(\"test-inputlist-container\").style.display = \"none\";\n  }\n\n  clearTestName() {\n      document.getElementById(\"test-name\").innerHTML = \"\";\n  }\n\n  //Override\n  render()\n  {\n    const currentModule = this.props.currentModule;\n    const tester = currentModule.getTestingManager();\n    const testList = tester.inputList;\n    const machineBuilder = currentModule.getMachineController().getMachineBuilder();\n\n    const isTestInvalid = !machineBuilder.isMachineValid();\n\n    if (--this._ticksSinceHash <= 0)\n    {\n      this._ticksSinceHash = REFRESH_TEST_TICKS;\n      const graph = currentModule.getGraphController().getGraph();\n      const graphHash = graph.getHashCode();\n      if (this._savedGraphHash !== graphHash)\n      {\n        this.onGraphChange(graph);\n        this._savedGraphHash = graphHash;\n      }\n    }\n\n    return <div className={\"panel-container \" + this.props.className} id=\"testing\" ref={ref=>this.container=ref} style={this.props.style}>\n      <div className=\"panel-title\">\n        <h1>{I18N.toString(\"component.testing.title\")}</h1>\n      </div>\n\n      <div className=\"test-icon-row\">\n\n          <IconButton className=\"testicon\" id=\"testing-new\" title={I18N.toString(\"action.testing.new\")}\n            onClick={this.onTestsNew}>\n            <CreateIcon/>\n          </IconButton>\n\n          {/*Import Test Button*/}\n          <UploadTestButton className=\"testicon\" id=\"testing-upload\" title={I18N.toString(\"action.testing.import\")}\n            onClick={this.onTestsUpload} onChange={this.onUploadFileChange}>\n            <UploadIcon/>\n          </UploadTestButton>\n\n          {/*Save Test Button*/}\n          <IconButton className=\"testicon\" id=\"testing-save\" title={I18N.toString(\"action.testing.save\")}\n            onClick={this.onTestsSave} disabled={tester.inputList.isEmpty()}>\n            <SaveIcon/>\n          </IconButton>\n\n          <IconButton className=\"testicon\" id=\"testing-clear\" title={I18N.toString(\"action.testing.clear\")}\n            onClick={this.onTestsClear}\n            disabled={this.state.noTestMode}>\n            <CloseIcon/>\n          </IconButton>\n\n      </div>\n\n      <div className=\"panel-content\">\n\n        <div className=\"test-inputlist-container\" id=\"test-inputlist-container\" style={{\"display\": \"none\"}}>\n\n\n          <div className=\"scrollbar-container\">\n            <h3 id=\"test-name\">Test Name</h3>\n            <div className=\"test-inputlist-content\">\n              {\n                isTestInvalid &&\n                <label className=\"test-inputlist-content-warning\">Not a valid machine!</label>\n              }\n              {\n                testList.getTests().map((e, i) =>\n                  <TestingInput key={e.id} index={i}\n                    testList={testList}\n                    machineBuilder={machineBuilder}/>)\n              }\n              {\n                /*\n                <button className=\"panel-button\" onClick={() => testList.addInput(\"\")}>\n                  {I18N.toString(\"action.testing.add\")}\n                </button>\n                */\n              }\n            </div>\n          </div>\n\n          <button className=\"panel-button\" onClick={this.onTestsRunAll}>\n            {tester.testMode.isStarted() ? I18N.toString(\"action.testing.stoprun\") : I18N.toString(\"action.testing.runall\")}\n          </button>\n\n          <div className=\"panel-checkbox\">\n            <input id=\"test-step\" type=\"checkbox\"\n              checked={this.stepByStepModeChecked}\n              onChange={(e) => {\n                this.stepByStepModeChecked = e.target.checked;\n                if(!this.stepByStepModeChecked) tester.setStepByStepMode(false);\n              }}\n              disabled={tester.testMode.isStarted()}/>\n            <label htmlFor=\"test-step\">{I18N.toString(\"options.testing.stepmode\")}</label>\n          </div>\n\n        </div>\n\n        <hr />\n\n        <div id=\"test-errorcheck\">\n          <label>{I18N.toString(\"options.checkerrors\")}</label>\n          <select className=\"panel-select\"\n            value={this.state.errorCheckMode}\n            onChange={this.onChangeErrorCheckMode}>\n            <option value={TestingManager.NO_ERROR_CHECK}>{I18N.toString(\"options.checkerrors.mode.none\")}</option>\n            <option value={TestingManager.DELAYED_ERROR_CHECK}>{I18N.toString(\"options.checkerrors.mode.delayed\")}</option>\n            <option value={TestingManager.IMMEDIATE_ERROR_CHECK}>{I18N.toString(\"options.checkerrors.mode.immediate\")}</option>\n          </select>\n        </div>\n\n      </div>\n\n      <div className=\"panel-bottom\"></div>\n    </div>;\n  }\n}\nObject.defineProperty(TestingPanel, 'TITLE', {\n  get: function() { return I18N.toString(\"component.testing.title\"); }\n});\nTestingPanel.UNLOCALIZED_NAME = \"component.testing.title\";\n\nexport default TestingPanel;\n","import React from 'react';\nimport Config from 'config.js';\n\nimport Notifications from 'system/notification/Notifications.js';\nimport NFAToDFAConversionWarningMessage from 'modules/fsa/notifications/NFAToDFAConversionWarningMessage.js';\n\nclass AnalysisPanel extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.container = null;\n    this.optimizeUnreachOption = null;\n    this.optimizeRedundOption = null;\n\n    this.onConvertToDFA = this.onConvertToDFA.bind(this);\n    this.onConvertToNFA = this.onConvertToNFA.bind(this);\n\n    this.onOptimizeMachine = this.onOptimizeMachine.bind(this);\n  }\n\n  onDeleteAllUnreachable(e)\n  {\n    const currentModule = this.props.currentModule;\n    const graphController = currentModule.getGraphController();\n    const machineController = currentModule.getMachineController();\n    const unreachableArray = machineController.getUnreachableNodes();\n    graphController.deleteTargetNodes(unreachableArray);\n  }\n\n  onConvertToDFA(e)\n  {\n    const currentModule = this.props.currentModule;\n    const graphController = currentModule.getGraphController();\n    const machineController = currentModule.getMachineController();\n    const props = {graphController: graphController, machineController: machineController};\n    const messageTag = Config.MACHINE_CONVERSION_MESSAGE_TAG;\n\n    //machineController.convertMachineTo(\"DFA\");\n    Notifications.addMessage(I18N.toString(\"message.warning.convertNFAToDFA\"),\n      \"warning\", messageTag, NFAToDFAConversionWarningMessage, props);\n  }\n\n  onConvertToNFA(e)\n  {\n    const machineController = this.props.currentModule.getMachineController();\n    machineController.convertMachineTo(\"NFA\");\n  }\n\n  onOptimizeMachine(e)\n  {\n    if (this.optimizeUnreachOption.checked)\n    {\n      this.onDeleteAllUnreachable(e);\n    }\n  }\n\n  canOptimize()\n  {\n    return (this.optimizeRedundOption && this.optimizeRedundOption.checked) ||\n    (this.optimizeUnreachOption && this.optimizeUnreachOption.checked);\n  }\n\n  render()\n  {\n    const currentModule = this.props.currentModule;\n    const graphController = currentModule.getGraphController();\n    const machineController = currentModule.getMachineController();\n\n    const graph = graphController.getGraph();\n    const machineType = machineController.getMachineType();\n\n    return <div className={\"panel-container \" + this.props.className} id=\"analysis\" ref={ref=>this.container=ref} style={this.props.style}>\n      <div className=\"panel-title\"><h1>{I18N.toString(\"component.analysis.title\")}</h1></div>\n      <div className=\"panel-content\">\n\n        {/*Optimize*/}\n        <div style={{paddingBottom: \"0.5em\"}}>\n          <h3 style={{marginBottom: \"0\"}}>Optimizations</h3>\n          <div style={{paddingBottom: \"0.5em\"}}>\n            <div>\n              <input ref={ref=>this.optimizeUnreachOption=ref} id=\"opt-unreach\" type=\"checkbox\"/>\n              <label htmlFor=\"opt-unreach\">Unreachables</label>\n            </div>\n            <div>\n              <input ref={ref=>this.optimizeRedundOption=ref} id=\"opt-redund\" type=\"checkbox\" disabled={true}/>\n              <label htmlFor=\"opt-redund\">Redundant States</label>\n            </div>\n          </div>\n          <button className=\"panel-button\" onClick={this.onOptimizeMachine} disabled={!this.canOptimize()}>Optimize</button>\n        </div>\n\n        <hr/>\n        {\n          machineType == \"DFA\" ?\n            <button className=\"panel-button\" onClick={this.onConvertToNFA}\n             disabled={this.props.currentModule.getGraphController().getGraph().isEmpty()}>\n              {I18N.toString(\"action.overview.convertnfa\")}\n            </button>\n          : machineType == \"NFA\" ?\n            <button className=\"panel-button\" onClick={this.onConvertToDFA}\n             disabled={this.props.currentModule.getGraphController().getGraph().isEmpty()}>\n              {I18N.toString(\"action.overview.convertdfa\")}\n            </button>\n          : null\n        }\n\n      </div>\n      <div className=\"panel-bottom\"></div>\n    </div>;\n  }\n}\nObject.defineProperty(AnalysisPanel, 'TITLE', {\n  get: function() { return I18N.toString(\"component.analysis.title\"); }\n});\nAnalysisPanel.UNLOCALIZED_NAME = \"component.analysis.title\";\n\nexport default AnalysisPanel;\n","import React from 'react';\n\nclass AboutPanel extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.container = null;\n  }\n\n  //Override\n  render()\n  {\n    return <div className={\"panel-container \" + this.props.className} id=\"about\" ref={ref=>this.container=ref} style={this.props.style}>\n      <div className=\"panel-title\">\n        <h1>Finite State Automata</h1>\n      </div>\n      <div className=\"panel-content\">\n        <p>{\"Brought to you with \\u2764 by the Flap.js team.\"}</p>\n        <p>{\"<- Tap on a tab to begin!\"}</p>\n      </div>\n      <div className=\"panel-bottom\"></div>\n    </div>;\n  }\n}\n\nexport default AboutPanel;\n","const EDGE_RADIUS = 12;\nconst EDGE_RADIUS_SQU = EDGE_RADIUS * EDGE_RADIUS;\nconst ENDPOINT_RADIUS = 6;\nconst ENDPOINT_RADIUS_SQU = ENDPOINT_RADIUS * ENDPOINT_RADIUS;\n\nclass GraphPicker\n{\n  constructor()\n  {\n    this.selectionBox = {\n      fromX: 0, fromY: 0,\n      toX: 0, toY: 0,\n      visible: false\n    };\n    this.targets = [];\n\n    this.target = null;\n    this.targetType = \"\";\n\n    this.initialTarget = null;\n    this.initialTargetType = \"\";\n  }\n\n  setInitialTarget(target, type)\n  {\n    this.initialTarget = target;\n    this.initialTargetType = type;\n  }\n\n  updateTarget(graph, x, y)\n  {\n    if (this.target = this.getNodeByInitialMarkerAt(graph, x, y))\n    {\n      //Clicked on initial marker\n      this.targetType = \"initial\";\n    }\n    else if (this.target = this.getEdgeByEndPointAt(graph, x, y))\n    {\n      //Clicked on endpoint\n      this.targetType = \"endpoint\";\n    }\n    else if (this.target = this.getNodeAt(graph, x, y))\n    {\n      //Clicked on node\n      this.targetType = \"node\";\n    }\n    else if (this.target = this.getEdgeAt(graph, x, y))\n    {\n      //Clicked on edge\n      this.targetType = \"edge\";\n    }\n    else\n    {\n      //Clicked on graph\n      this.target = null;\n      this.targetType = \"none\";\n    }\n\n    return this.target;\n  }\n\n  clearTarget()\n  {\n    this.target = null;\n    this.targetType = \"none\";\n  }\n\n  hasTarget()\n  {\n    return this.target != null;\n  }\n\n  getNodeAt(graph, x, y)\n  {\n    //Search graph\n    for(const node of graph.getNodes())\n    {\n      const nodeSize = node.getNodeSize();\n      const dx = x - node.x;\n      const dy = y - node.y;\n      if (dx * dx + dy * dy < nodeSize * nodeSize)\n      {\n        return node;\n      }\n    }\n    return null;\n  }\n\n  getNodeByInitialMarkerAt(graph, x, y)\n  {\n    const startNode = graph.getStartNode();\n    if (!startNode) return null;\n\n    const nodeSize = startNode.getNodeSize();\n    const offset = -(nodeSize + (nodeSize / 2));\n    const dx = x - (startNode.x + offset);\n    const dy = y - startNode.y;\n    if (dx * dx + dy * dy < EDGE_RADIUS_SQU)\n    {\n      return startNode;\n    }\n\n    return null;\n  }\n\n  getEdgeAt(graph, x, y)\n  {\n    const center = {x: 0, y: 0};\n\n    //Search graph\n    for(const edge of graph.getEdges())\n    {\n      edge.getCenterPoint(center);\n      const dx = x - center.x;\n      const dy = y - center.y;\n      if (dx * dx + dy * dy < EDGE_RADIUS_SQU)\n      {\n        return edge;\n      }\n    }\n    return null;\n  }\n\n  getEdgeByEndPointAt(graph, x, y)\n  {\n    const end = {x: 0, y: 0};\n    //Search graph\n    for(const edge of graph.getEdges())\n    {\n      edge.getEndPoint(end);\n      const dx = x - end.x;\n      const dy = y - end.y;\n      if (dx * dx + dy * dy < ENDPOINT_RADIUS_SQU)\n      {\n        return edge;\n      }\n    }\n    return null;\n  }\n\n  getSelectionBox()\n  {\n    return this.selectionBox;\n  }\n\n  getSelection(graph, forceUpdate=false)\n  {\n    if (forceUpdate)\n    {\n      const box = this.selectionBox;\n      const mx = Math.max(box.toX, box.fromX);\n      const my = Math.max(box.toY, box.fromY);\n      const lx = Math.min(box.toX, box.fromX);\n      const ly = Math.min(box.toY, box.fromY);\n      this.clearSelection();\n      getNodesWithin(graph, lx, ly, mx, my, this.targets);\n    }\n\n    return this.targets;\n  }\n\n  hasSelection()\n  {\n    return this.targets.length > 0;\n  }\n\n  clearSelection()\n  {\n    this.targets.length = 0;\n  }\n\n  isTargetInSelection(target)\n  {\n    return this.targets.includes(target || this.target);\n  }\n\n  isTarget(target)\n  {\n    return this.target == target;\n  }\n\n  beginSelection(graph, x, y)\n  {\n    const box = this.selectionBox;\n    box.fromX = box.toX = x;\n    box.fromY = box.toY = y;\n    this.clearSelection();\n\n    box.visible = true;\n  }\n\n  updateSelection(graph, x, y)\n  {\n    const box = this.selectionBox;\n    box.toX = x;\n    box.toY = y;\n    this.getSelection(graph, true);\n  }\n\n  endSelection(graph, x, y)\n  {\n    const box = this.selectionBox;\n    box.toX = x;\n    box.toY = y;\n    this.getSelection(graph, true);\n\n    box.visible = false;\n  }\n\n  isSelecting()\n  {\n    return this.selectionBox.visible;\n  }\n}\n\nfunction getNodesWithin(graph, x1, y1, x2, y2, dst)\n{\n  const fromX = Math.min(x1, x2);\n  const fromY = Math.min(y1, y2);\n  const toX = Math.max(x1, x2);\n  const toY = Math.max(y1, y2);\n\n  for(const node of graph.getNodes())\n  {\n    if (node.x >= fromX && node.x < toX &&\n        node.y >= fromY && node.y < toY)\n    {\n      dst.push(node);\n    }\n  }\n  return dst;\n}\n\nexport default GraphPicker;\n","class InputHandler\n{\n  isTargetable(inputController, pointer, target, targetType)\n  {\n    return false;\n  }\n\n  onAction(inputController, graphController, pointer, target)\n  {\n    return false;\n  }\n\n  onDblAction(inputController, graphController, pointer, target)\n  {\n    return false;\n  }\n\n  onDragStart(inputController, graphController, pointer, target)\n  {\n    return false;\n  }\n\n  onDragMove(inputController, graphController, pointer, target)\n  {\n    return false;\n  }\n\n  onDragStop(inputController, graphController, pointer, target)\n  {\n    return false;\n  }\n}\nexport default InputHandler;\n","import InputHandler from './InputHandler.js';\n\nclass GraphElementInputHandler extends InputHandler\n{\n  constructor(targetType)\n  {\n    super();\n\n    if (!targetType)\n    {\n      throw new Error(\"Missing target type for graph element input handler\");\n    }\n\n    this._targetType = targetType;\n  }\n\n  //Override\n  isTargetable(inputController, pointer, target, targetType)\n  {\n    if (targetType === this._targetType)\n    {\n      return true;\n    }\n\n    return false;\n  }\n  \n  getTargetType()\n  {\n    return this._targetType;\n  }\n}\n\nexport default GraphElementInputHandler;\n","import GraphElementInputHandler from './GraphElementInputHandler.js';\n\nconst SNAP_TO_GRID = true;\nconst SNAP_SIZE = 48;\n\nclass GraphNodeInputHandler extends GraphElementInputHandler\n{\n  constructor()\n  {\n    super(\"node\");\n  }\n\n  //Override\n  onAction(inputController, graphController, pointer, target)\n  {\n    const picker = inputController.getPicker();\n\n    //Click to delete node\n    if (inputController.isTrashMode())\n    {\n      //So that the emitted 'delete' events can use this\n      graphController.prevX = target.x;\n      graphController.prevY = target.y;\n\n      //If there exists selected states, delete them all!\n      if (picker.hasSelection())\n      {\n        //Delete all selected nodes\n        graphController.deleteSelectedNodes(target);\n      }\n      else\n      {\n        //Delete a single node\n        graphController.deleteTargetNode(target);\n      }\n      return true;\n    }\n    //Edit click to toggle node\n    else if (!inputController.isMoveMode())\n    {\n      graphController.toggleNode(target);\n      return true;\n    }\n\n    return false;\n  }\n\n  //Override\n  onDragStart(inputController, graphController, pointer, target)\n  {\n    if (inputController.isMoveMode())\n    {\n      //Moving node (and selected nodes)\n      graphController.prevX = target.x;\n      graphController.prevY = target.y;\n    }\n    else\n    {\n      const picker = inputController.getPicker();\n      const graph = graphController.getGraph();\n      const edge = graph.createEdge(target, pointer);\n      edge.setEdgeLabel(graphController.getGraphLabeler().getDefaultEdgeLabel());\n\n      //Redirect pointer to refer to the edge as the new target\n      picker.setInitialTarget(edge, \"endpoint\");\n      inputController.isNewEdge = true;\n\n      //Reset previous quad values for new proxy edge\n      const edgeQuad = edge.getQuadratic();\n      graphController.prevQuad.radians = edgeQuad.radians;\n      graphController.prevQuad.length = edgeQuad.length;\n      graphController.prevEdgeTo = null;\n\n      //Ready to move proxy edge to pointer...\n    }\n    return true;\n  }\n\n  //Override\n  onDragMove(inputController, graphController, pointer, target)\n  {\n    const picker = inputController.getPicker();\n    const graph = graphController.getGraph();\n    let x = pointer.x;\n    let y = pointer.y;\n\n    if (inputController._snapToGrid)\n    {\n      const snapSize = inputController._snapSize;\n      x = Math.round(x / snapSize) * snapSize;\n      y = Math.round(y / snapSize) * snapSize;\n    }\n\n    if (picker.hasSelection())\n    {\n      graphController.moveMultipleNodesTo(pointer, picker.getSelection(graph), x, y);\n    }\n    else\n    {\n      graphController.moveNodeTo(pointer, target, x, y);\n    }\n    return true;\n  }\n\n  //Override\n  onDragStop(inputController, graphController, pointer, target)\n  {\n    const picker = inputController.getPicker();\n    const graph = graphController.getGraph();\n    const x = pointer.x;\n    const y = pointer.y;\n\n    //Delete it if withing trash area...\n    if (inputController.isTrashMode())\n    {\n      //If there exists selected states, delete them all!\n      if (picker.hasSelection())\n      {\n        graphController.deleteSelectedNodes(target);\n      }\n      else\n      {\n        //Delete a single node\n        graphController.deleteTargetNode(target);\n      }\n\n      return true;\n    }\n    //If dragged to an empty space (not trash)\n    else\n    {\n      //Do nothing, since should have moved to position\n      if (picker.hasSelection())\n      {\n        const dx = x - graphController.prevX;\n        const dy = y - graphController.prevY;\n        graphController.emit(\"nodeMoveAll\", graph, picker.getSelection(graph), dx, dy);\n      }\n      else\n      {\n        graphController.emit(\"nodeMove\", graph, target, x, y, graphController.prevX, graphController.prevY);\n      }\n      return true;\n    }\n\n    return false;\n  }\n}\n\nexport default GraphNodeInputHandler;\n","import GraphElementInputHandler from './GraphElementInputHandler.js';\n\nclass GraphEdgeInputHandler extends GraphElementInputHandler\n{\n  constructor()\n  {\n    super(\"edge\");\n  }\n\n  //Override\n  onAction(inputController, graphController, pointer, target)\n  {\n    if (inputController.isTrashMode())\n    {\n      //Delete a single edge\n      graphController.deleteTargetEdge(target);\n    }\n    else\n    {\n      //Edit label for selected edge\n      graphController.openLabelEditor(target, pointer.x, pointer.y);\n    }\n    return true;\n  }\n\n  //Override\n  onDragStart(inputController, graphController, pointer, target)\n  {\n    //Makes sure that placeholders are not quadratics!\n    if (target.isPlaceholder())\n    {\n      return false;\n    }\n\n    //Save previous quadratics\n    const targetQuad = target.getQuadratic();\n    graphController.prevQuad.radians = targetQuad.radians;\n    graphController.prevQuad.length = targetQuad.length;\n\n    //Ready to move the edge vertex to pointer...\n    return true;\n  }\n\n  //Override\n  onDragMove(inputController, graphController, pointer, target)\n  {\n    graphController.moveEdgeTo(pointer, target, pointer.x, pointer.y);\n    return true;\n  }\n\n  //Override\n  onDragStop(inputController, graphController, pointer, target)\n  {\n    const graph = graphController.getGraph();\n\n    //Delete it if withing trash area...\n    if (inputController.isTrashMode())\n    {\n      graphController.deleteTargetEdge(target);\n    }\n    else\n    {\n      //Do nothing, since should have moved to position\n      graphController.emit(\"edgeMove\", graph, target, target.getQuadratic(), graphController.prevQuad);\n    }\n    return true;\n  }\n}\n\nexport default GraphEdgeInputHandler;\n","import GraphElementInputHandler from './GraphElementInputHandler.js';\nimport GraphNode from 'graph/GraphNode.js';\n\nclass GraphEndpointInputHandler extends GraphElementInputHandler\n{\n  constructor()\n  {\n    super(\"endpoint\");\n  }\n\n  //Override\n  onAction(inputController, graphController, pointer, target)\n  {\n    if (inputController.isTrashMode())\n    {\n      //Delete a single edge\n      graphController.deleteTargetEdge(target);\n      return true;\n    }\n    return false;\n  }\n\n  //Override\n  onDragStart(inputController, graphController, pointer, target)\n  {\n    const targetQuad = target.getQuadratic();\n    graphController.prevQuad.radians = targetQuad.radians;\n    graphController.prevQuad.length = targetQuad.length;\n    graphController.prevEdgeTo = target.getDestinationNode();\n\n    inputController.isNewEdge = false;\n\n    //Ready to move the edge endpoint to pointer...\n    return true;\n  }\n\n  //Override\n  onDragMove(inputController, graphController, pointer, target)\n  {\n    graphController.moveEndpointTo(pointer, target, pointer.x, pointer.y);\n    return true;\n  }\n\n  //Override\n  onDragStop(inputController, graphController, pointer, target)\n  {\n    const graph = graphController.getGraph();\n    const x = pointer.x;\n    const y = pointer.y;\n\n    //Delete it if withing trash area...\n    if (inputController.isTrashMode())\n    {\n      graphController.deleteTargetEdge(target);\n      return true;\n    }\n    //If hovering over a node...\n    else if (target.getDestinationNode() instanceof GraphNode)\n    {\n      const result = graph.formatEdge(target);\n\n      //If a different edge is the result of the target...\n      if (result !== target)\n      {\n        //Allow the user to edit the merged labels\n        graphController.openLabelEditor(result, x, y, result.getEdgeLabel(), false);\n\n        //Delete the merged label\n        graph.deleteEdge(target);\n        return true;\n      }\n      //Open label editor if a new edge...\n      else\n      {\n        if (inputController.isNewEdge)\n        {\n          graphController.openLabelEditor(target, x, y, null, true, () => {\n            graphController.emit(\"userPostCreateEdge\", graph, target);\n          });\n        }\n        else\n        {\n          graphController.openLabelEditor(target, x, y);\n        }\n      }\n\n      if (inputController.isNewEdge)\n      {\n        //Must be after openLabelEditor() to allow the function to check it...\n        inputController.isNewEdge = false;\n\n        //Emit event\n        graphController.emit(\"userCreateEdge\", graph, target);\n      }\n      else if (graphController.prevEdgeTo !== null)\n      {\n        //Emit event\n        graphController.emit(\"edgeDestination\", graph, target, target.getDestinationNode(), graphController.prevEdgeTo, graphController.prevQuad);\n      }\n\n      return true;\n    }\n    //If hovering over anything else...\n    else\n    {\n      //Destroy any edge that no longer have a destination\n      if (inputController.shouldDestroyPointlessEdges)\n      {\n        if (!inputController.isNewEdge)\n        {\n          graphController.deleteTargetEdge(target);\n        }\n        else\n        {\n          graph.deleteEdge(target);\n        }\n        return true;\n      }\n      //Keep edges as placeholders (used in DFA's)\n      else\n      {\n        target.changeDestinationNode(null);\n\n        //Open label editor if default edge...\n        if (target.getEdgeLabel().length <= 0)\n        {\n          graphController.openLabelEditor(target, x, y);\n        }\n        return true;\n      }\n    }\n  }\n}\n\nexport default GraphEndpointInputHandler;\n","import GraphElementInputHandler from './GraphElementInputHandler.js';\nimport GraphNode from 'graph/GraphNode.js';\n\nclass GraphInitialInputHandler extends GraphElementInputHandler\n{\n  constructor()\n  {\n    super(\"initial\");\n  }\n\n  //Override\n  onDragStart(inputController, graphController, pointer, target)\n  {\n    //Ready to move the initial marker to another state...\n    inputController.ghostInitialMarker = pointer;\n    return true;\n  }\n\n  //Override\n  onDragMove(inputController, graphController, pointer, target)\n  {\n    const picker = inputController.getPicker();\n    const graph = graphController.getGraph();\n    const x = pointer.x;\n    const y = pointer.y;\n    //Move initial marker to node or pointer\n    const dst = picker.getNodeAt(graph, x, y) || pointer;\n    inputController.ghostInitialMarker = dst;\n    return true;\n  }\n\n  //Override\n  onDragStop(inputController, graphController, pointer, target)\n  {\n    const graph = graphController.getGraph();\n\n    //If valid initial object to mark...\n    if (inputController.ghostInitialMarker instanceof GraphNode)\n    {\n      const prevInitial = graph.getStartNode();\n\n      //Set the new object as the initial node\n      graph.setStartNode(inputController.ghostInitialMarker);\n      graphController.applyAutoRename();\n\n      //Emit event\n      graphController.emit(\"nodeInitial\", graph, inputController.ghostInitialMarker, prevInitial);\n    }\n\n    //Reset ghost initial marker\n    inputController.ghostInitialMarker = null;\n    return true;\n  }\n}\n\nexport default GraphInitialInputHandler;\n","import InputHandler from './InputHandler.js';\n\nclass SelectionBoxInputHandler extends InputHandler\n{\n  constructor(picker)\n  {\n    super();\n\n    this._picker = picker;\n  }\n\n  //Override\n  isTargetable(inputController, pointer, target, targetType)\n  {\n    return targetType === 'none';\n  }\n\n  //Override\n  onDragStart(inputController, graphController, pointer, target)\n  {\n    if (!inputController.isMoveMode())\n    {\n      //Begin selection box...\n      this._picker.beginSelection(graphController.getGraph(), pointer.x, pointer.y);\n      return true;\n    }\n\n    return false;\n  }\n\n  onDragMove(inputController, graphController, pointer, target)\n  {\n    //If the selection box is active...\n    if (this._picker.isSelecting())\n    {\n      //Update the selection box\n      this._picker.updateSelection(graphController.getGraph(), pointer.x, pointer.y);\n      return true;\n    }\n\n    return false;\n  }\n\n  //Override\n  onDragStop(inputController, graphController, pointer, target)\n  {\n    //If was trying to select...\n    if (this._picker.isSelecting())\n    {\n      //Stop selecting stuff, fool.\n      this._picker.endSelection(graphController.getGraph(), pointer.x, pointer.y);\n      return true;\n    }\n\n    return false;\n  }\n}\n\nexport default SelectionBoxInputHandler;\n","import InputHandler from './InputHandler.js';\n\nclass GraphNodeCreateInputHandler extends InputHandler\n{\n  constructor()\n  {\n    super();\n  }\n\n  //Override\n  isTargetable(inputController, pointer, target, targetType)\n  {\n    return targetType === 'none';\n  }\n\n  //Override\n  onDblAction(inputController, graphController, pointer, target)\n  {\n    let x = pointer.x;\n    let y = pointer.y;\n\n    if (inputController._snapToGrid)\n    {\n      const snapSize = inputController._snapSize;\n      x = Math.round(x / snapSize) * snapSize;\n      y = Math.round(y / snapSize) * snapSize;\n    }\n\n    //Create node at position\n    const node = graphController.createNode(x, y);\n    //TODO: this allows nodes to move away from other nodes\n    //But undoManager does not recognize it.\n    //graphController.moveNodeTo(pointer, node, x, y);\n    return true;\n  }\n}\n\nexport default GraphNodeCreateInputHandler;\n","import AbstractModuleInputController from 'modules/abstract/AbstractModuleInputController.js';\n\nimport GraphPicker from './GraphPicker.js';\n\nimport GraphNodeInputHandler from './inputhandler/GraphNodeInputHandler.js';\nimport GraphEdgeInputHandler from './inputhandler/GraphEdgeInputHandler.js';\nimport GraphEndpointInputHandler from './inputhandler/GraphEndpointInputHandler.js';\nimport GraphInitialInputHandler from './inputhandler/GraphInitialInputHandler.js';\nimport SelectionBoxInputHandler from './inputhandler/SelectionBoxInputHandler.js';\nimport GraphNodeCreateInputHandler from './inputhandler/GraphNodeCreateInputHandler.js';\n\nconst DEFAULT_SHOULD_DESTROY_POINTLESS_EDGE = true;\n\nclass InputController extends AbstractModuleInputController\n{\n  constructor(module, inputAdapter)\n  {\n    super(module, inputAdapter);\n\n    this._picker = new GraphPicker();\n\n    this._graphController = null;\n\n    //Used to check if target needs to be updated for the hover effect\n    this.prevPointerX = 0;\n    this.prevPointerY = 0;\n\n    //Make sure this is always false when moving endpoints\n    this.isNewEdge = false;\n\n    //Used to change render to follow pointer when moving initial marker\n    this.ghostInitialMarker = null;\n\n    //Whether to destroy pointless edges\n    this.shouldDestroyPointlessEdges = DEFAULT_SHOULD_DESTROY_POINTLESS_EDGE;\n\n    //Swap left to right clicks and vice versa on anything else but Macs\n    this._swapMouseScheme = true;//!navigator.platform.startsWith(\"Mac\");\n\n    //Used to determine whether the target should be destroyed because of trash mode\n    this._trashMode = false;\n\n    this._disabled = false;\n\n    //TODO: this works, it's just not attached to anything\n    this._snapToGrid = false;\n    this._snapSize = 48;\n\n    this._inputHandlers = [\n      new GraphNodeInputHandler(),\n      new GraphEdgeInputHandler(),\n      new GraphEndpointInputHandler(),\n      new GraphInitialInputHandler(),\n      new SelectionBoxInputHandler(this._picker),\n      new GraphNodeCreateInputHandler()\n    ];\n  }\n\n  //Override\n  initialize(module)\n  {\n    super.initialize(module);\n\n    this._graphController = module.getGraphController();\n  }\n\n  //Override\n  destroy(module)\n  {\n    super.destroy(module);\n  }\n\n  //Override\n  update(module)\n  {\n    super.update(module);\n\n    const graph = this._graphController.getGraph();\n    const picker = this._picker;\n    const x = this._inputAdapter.getPointerX();\n    const y = this._inputAdapter.getPointerY();\n\n    if (x != this.prevPointerX || y != this.prevPointerY)\n    {\n      this.prevPointerX = x;\n      this.prevPointerY = y;\n\n      //Update target\n      picker.updateTarget(graph, x, y);\n\n      //HACK: to make the cursor look like a pointer when targeting\n      if (picker.hasTarget())\n      {\n        document.body.style.cursor = \"pointer\";\n      }\n      else\n      {\n        document.body.style.cursor = \"auto\";\n      }\n    }\n  }\n\n  setDisabled(disabled)\n  {\n    this._disabled = disabled;\n  }\n\n  isDisabled()\n  {\n    return this._disabled;\n  }\n\n  //Override\n  onPreInputEvent(pointer)\n  {\n    if (this._disabled) return super.onPreInputEvent(pointer);\n\n    const inputController = this;\n    const graphController = this._graphController;\n\n    const graph = graphController.getGraph();\n    const picker = inputController.getPicker();\n    picker.updateTarget(graph, pointer.x, pointer.y);\n    picker.setInitialTarget(picker.target, picker.targetType);\n\n    const target = picker.initialTarget;\n    const targetType = picker.initialTargetType;\n\n    if (picker.hasSelection())\n    {\n      //Unselect everything is clicked on something other than nodes...\n      if (targetType != \"node\" || !picker.isTargetInSelection(target))\n      {\n        picker.clearSelection();\n      }\n    }\n\n    //Disable all graph input when in step-by-step mode\n    if (graphController.tester.getStepByStepMode())\n    {\n      //Consume event!\n      return true;\n    }\n\n    //Override\n    return super.onPreInputEvent(pointer);\n  }\n\n  //Override\n  onInputEvent(pointer)\n  {\n    if (this._disabled) return super.onInputEvent(pointer);\n\n    const inputController = this;\n    const graphController = this._graphController;\n    const picker = inputController.getPicker();\n    picker.updateTarget(graphController.getGraph(), pointer.x, pointer.y);\n    const target = picker.initialTarget;\n    const targetType = picker.initialTargetType;\n\n    for(const handler of this._inputHandlers)\n    {\n      if (handler.isTargetable(inputController, pointer, target, targetType) &&\n        handler.onAction(inputController, graphController, pointer, target))\n      {\n        return true;\n      }\n    }\n\n    //Override\n    return super.onInputEvent(pointer);\n  }\n\n  //Override\n  onDblInputEvent(pointer)\n  {\n    if (this._disabled) return super.onDblInputEvent(pointer);\n\n    const inputController = this;\n    const graphController = this._graphController;\n    const picker = inputController.getPicker();\n    const target = picker.initialTarget;\n    const targetType = picker.initialTargetType;\n\n    //Make sure it is not in trash mode\n    if (inputController.isTrashMode())\n    {\n      graphController.emit(\"tryCreateWhileTrash\");\n      return false;\n    }\n\n    for(const handler of this._inputHandlers)\n    {\n      if (handler.isTargetable(inputController, pointer, target, targetType) &&\n        handler.onDblAction(inputController, graphController, pointer, target))\n      {\n        return true;\n      }\n    }\n\n    //Override\n    return super.onDblInputEvent(pointer);\n  }\n\n  //Override\n  onDragStart(pointer)\n  {\n    if (this._disabled) return super.onDragStart(pointer);\n\n    const inputController = this;\n    const graphController = this._graphController;\n    const picker = inputController.getPicker();\n    const target = picker.initialTarget;\n    const targetType = picker.initialTargetType;\n\n    //Make sure it is not in new edge mode\n    inputController.isNewEdge = false;\n\n    //Make sure it is not in trash mode\n    if (inputController.isTrashMode())\n    {\n      graphController.emit(\"tryCreateWhileTrash\");\n      return false;\n    }\n\n    for(const handler of this._inputHandlers)\n    {\n      if (handler.isTargetable(inputController, pointer, target, targetType) &&\n        handler.onDragStart(inputController, graphController, pointer, target))\n      {\n        return true;\n      }\n    }\n\n    //Override\n    return super.onDragStart(pointer);\n  }\n\n  //Override\n  onDragMove(pointer)\n  {\n    if (this._disabled) return super.onDragMove(pointer);\n\n    const inputController = this;\n    const graphController = this._graphController;\n    const picker = inputController.getPicker();\n    const target = picker.initialTarget;\n    const targetType = picker.initialTargetType;\n\n    for(const handler of this._inputHandlers)\n    {\n      if (handler.isTargetable(inputController, pointer, target, targetType) &&\n        handler.onDragMove(inputController, graphController, pointer, target))\n      {\n        return true;\n      }\n    }\n\n    //Override\n    return super.onDragMove(pointer);\n  }\n\n  //Override\n  onDragStop(pointer)\n  {\n    if (this._disabled) return super.onDragStop(pointer);\n\n    const inputController = this;\n    const graphController = this._graphController;\n    const picker = inputController.getPicker();\n    picker.updateTarget(graphController.getGraph(), pointer.x, pointer.y);\n    const target = picker.initialTarget;\n    const targetType = picker.initialTargetType;\n\n    for(const handler of this._inputHandlers)\n    {\n      if (handler.isTargetable(inputController, pointer, target, targetType) &&\n        handler.onDragStop(inputController, graphController, pointer, target))\n      {\n        return true;\n      }\n    }\n\n    //Override\n    return super.onDragStop(pointer);\n  }\n\n  //Override\n  onPostInputEvent(pointer)\n  {\n    if (this._disabled) return super.onPostInputEvent(pointer);\n\n    const inputController = this;\n    const graphController = this._graphController;\n    const graph = graphController.getGraph();\n    const picker = inputController.getPicker();\n\n    picker.clearTarget();\n    picker.updateTarget(graph, pointer.x, pointer.y);\n\n    //Override\n    super.onPostInputEvent(pointer);\n  }\n\n  setTrashMode(enabled)\n  {\n    this._trashMode = enabled;\n  }\n\n  isTrashMode()\n  {\n    return this._trashMode;\n  }\n\n  setInputScheme(shouldInputFirst)\n  {\n    this._swapMouseScheme = !shouldInputFirst;\n  }\n\n  getInputScheme()\n  {\n    return this._swapMouseScheme;\n  }\n\n  isMoveMode()\n  {\n    const result = this._inputAdapter.isAltInput();\n    return this._swapMouseScheme ? !result : result;\n  }\n\n  isDragging()\n  {\n    return this._inputAdapter.isDragging();\n  }\n\n  isActionMode()\n  {\n    return this._inputAdapter.isPointerActive() ?\n      //Is considered an input when NOT moving or when creating a new edge...\n      this.isNewEdge || !this.isMoveMode() :\n      //If not active, just show default input...\n      !this._swapMouseScheme;\n  }\n\n  getPicker()\n  {\n    return this._picker;\n  }\n}\n\nexport default InputController;\n","\nfunction getReachableState(graph)\n{\n  let reachable = [];\n  let startNode = graph.getStartNode();\n  reachable.push(startNode);\n  for(let i = 0; i < reachable.length; i++)\n  {\n    for (const edge of graph.getEdges())\n    {\n      if(edge._from == reachable[i])\n      {\n        if(!reachable.includes(edge._to))\n        {\n          reachable.push(edge._to);\n        }\n      }\n    }\n  }\n  return reachable;\n}\n\nclass GraphLayout\n{\n  static applyLayout(graph, type=\"circle\")\n  {\n    if (type != \"circle\") throw new Error(\"Invalid layout type\");\n    //seperate node to reachable and unreachable\n    const reachableNode= getReachableState(graph);\n    function unreachable(node)\n    {\n      return !reachableNode.includes(node)\n    }\n    const unreachableNode = graph.getNodes().filter(unreachable)\n\n    //get num of nodes\n    const numOfReachable = reachableNode.length;\n    const numOfUnreachable = unreachableNode.length;\n    const numOfNode = graph.getNodes().length;\n    const maxNum = Math.max(numOfReachable, numOfUnreachable)\n    if(numOfNode == 0)\n    {\n      return;\n    }\n    //set radius\n    var radius;\n    if(numOfReachable < 10 && numOfUnreachable < 10){\n      radius = maxNum/4 * 50 + 30;\n    }\n    else{\n      radius = (maxNum/5) * 40 + 30;\n    }\n\n    let currentStep = 0\n    if (numOfReachable == 1)\n    {\n      let degree = 2* Math.PI/numOfNode\n      for(const node of graph.getNodes())\n      {\n        node.y = Math.sin(degree*currentStep + Math.PI)*radius;\n        node.x = Math.cos(degree*currentStep + Math.PI)*radius;\n        currentStep += 1\n      }\n    }\n    else {\n      const degree_re = 2* Math.PI/numOfReachable;\n      const degree_un = 2* Math.PI/numOfUnreachable;\n\n      currentStep = 0\n      for(const node of reachableNode)\n      {\n        node.y = Math.sin(degree_re*currentStep + Math.PI)*radius;\n        node.x = Math.cos(degree_re*currentStep + Math.PI)*radius;\n        currentStep += 1\n      }\n      currentStep = 0\n      for(const node of unreachableNode)\n      {\n        node.y = Math.sin(degree_un*currentStep + Math.PI)*(radius + 100);\n        node.x = Math.cos(degree_un*currentStep + Math.PI)*(radius + 100);\n        currentStep += 1\n      }\n    }\n    /*for(const node of graph.getNodes())\n    {\n      node.y = Math.sin(degree*currentStep + Math.PI)*radius;\n      node.x = Math.cos(degree*currentStep + Math.PI)*radius;\n      currentStep += 1\n    }*/\n  }\n\n\n}\n\nexport default GraphLayout;\n","import GraphNode from 'graph/GraphNode.js';\nimport Config from 'config.js';\n\nclass FSANode extends GraphNode\n{\n  constructor(id, x, y)\n  {\n    super(id, x, y);\n\n    this._accept = false;\n\n    //this is not saved to hash since it is an aesthetic option\n    this._custom = false;\n  }\n\n  setNodeAccept(value)\n  {\n    this._accept = value;\n  }\n\n  getNodeAccept()\n  {\n    return this._accept;\n  }\n\n  setNodeCustom(value)\n  {\n    this._custom = value;\n  }\n\n  getNodeCustom()\n  {\n    return this._custom;\n  }\n\n  //Override\n  getNodeSize()\n  {\n    return Config.NODE_RADIUS;\n  }\n\n  //Override\n  getHashString(usePosition=true)\n  {\n    return super.getHashString(usePosition) + \":\" + (this._accept ? \"1\" : \"0\");\n  }\n}\n\nexport default FSANode;\n","import NodalGraph from 'graph/NodalGraph.js';\nimport FSANode from './FSANode.js';\nimport FSAEdge, { SYMBOL_SEPARATOR } from './FSAEdge.js';\n\nconst PARALLEL_EDGE_HEIGHT = 10;\n\nclass FSAGraph extends NodalGraph\n{\n  constructor()\n  {\n    super(FSANode, FSAEdge);\n  }\n\n  setStartNode(node)\n  {\n    if (this._nodes.length <= 0) throw new Error(\"Cannot set start node to empty graph\");\n\n    //There is only one node, and that is already the start node\n    if (this._nodes.length === 1) return;\n\n    const i = this._nodes.indexOf(node);\n    if (i > 0)\n    {\n      //This does a swap; we could do a prepend but that's more costly...\n      const prev = this._nodes[0];\n      this._nodes[0] = node;\n      this._nodes[i] = prev;\n    }\n    else if (i < 0)\n    {\n      throw new Error(\"Cannot set start node for unknown node\");\n    }\n  }\n\n  getStartNode()\n  {\n    return this._nodes.length > 0 ? this._nodes[0] : null;\n  }\n\n  //This is more like addEdge() without adding it to the graph and just returns the result\n  //This should only be called once when completing an edge\n  formatEdge(edge)\n  {\n    const edgeSource = edge.getSourceNode();\n    const edgeDestination = edge.getDestinationNode();\n    const edgeLabel = edge.getEdgeSymbolsFromLabel();\n\n    //Look for an existing edge with similar from and to\n    for(const otherEdge of this._edges)\n    {\n      if (otherEdge === edge) continue;\n      if (otherEdge.getSourceNode() === edgeSource && otherEdge.getDestinationNode() === edgeDestination)\n      {\n        const otherSymbols = otherEdge.getEdgeSymbolsFromLabel();\n        if (edgeLabel.length > 0)\n        {\n          const result = otherSymbols.concat(edgeLabel);\n          otherEdge.setEdgeLabel(result.join(SYMBOL_SEPARATOR));\n        }\n\n        //Merged with newfound edge...\n        return otherEdge;\n      }\n    }\n\n    //Otherwise, format the current edge\n\n    if (!edge.isSelfLoop())\n    {\n      let flag = false;\n\n      //Bend away if there is another edge not bent with the same src/dst\n      const parallelEdgeHeight = PARALLEL_EDGE_HEIGHT;\n      const HALFPI = Math.PI / 2;\n      for(const otherEdge of this._edges)\n      {\n        if (otherEdge.isQuadratic() && Math.abs(otherEdge.getQuadratic().length) >= parallelEdgeHeight * 2) continue;\n        if ((otherEdge.getDestinationNode() === edgeSource && otherEdge.getSourceNode() === edgeDestination))\n        {\n          edge.setQuadratic(HALFPI, parallelEdgeHeight);\n          otherEdge.setQuadratic(HALFPI, parallelEdgeHeight);\n          flag = true;\n\n          //ASSUMES that there will only ever be 2 edges that are parallel...\n          break;\n        }\n      }\n\n      //Try to move the edge away from intersecting nodes...\n      if (!flag)\n      {\n        const maxNodeSize = Math.max(edgeSource.getNodeSize(), edgeDestination.getNodeSize());\n        const x1 = edgeSource.x;\n        const y1 = edgeSource.y;\n        const x2 = edgeDestination.x;\n        const y2 = edgeDestination.y;\n        const dist12sq = (x2 - x1) * (x2 - x1) + (y2 - y1) * (y2 - y1);\n        let vertical = false;\n        let m = 0;\n        let b = 0;\n\n        if(x1 > x2)\n        {\n          m = (y1-y2) / (x1-x2);\n          b = y2-m*x2;\n        }\n        else if (x1 < x2)\n        {\n          m = (y2-y1) / (x2-x1);\n          b = y1-m*x1;\n        }\n        else\n        {\n          vertical = true;\n        }\n\n        for(const node of this._nodes)\n        {\n          if(node === edgeSource || node === edgeDestination) continue;\n\n          const x0 = node.x;\n          const y0 = node.y;\n\n          const dist01sq = (x1-x0)*(x1-x0) + (y1-y0)*(y1-y0);\n          const dist02sq = (x2-x0)*(x2-x0) + (y2-y0)*(y2-y0);\n          if(dist01sq > dist12sq || dist02sq > dist12sq) continue;\n\n          let dist = 0;\n          if(vertical) {\n            dist = Math.abs(x1-x0);\n          } else {\n            dist = Math.abs(b+ m*x0 - y0) / Math.sqrt(1+m*m);\n          }\n\n          if(dist < node.getNodeSize())\n          {\n            flag = true;\n            break;\n          }\n        }\n\n        if (flag)\n        {\n          edge.setQuadratic(-Math.PI / 2, maxNodeSize + 10);\n        }\n      }\n    }\n\n    return edge;\n  }\n}\n\nexport default FSAGraph;\n","import AbstractGraphLabeler from 'graph/AbstractGraphLabeler.js';\n\nimport { SYMBOL_SEPARATOR } from 'modules/fsa/graph/FSAEdge.js';\nimport { EMPTY } from 'machine/Symbols.js';\n\nconst DEFAULT_NODE_LABEL_PREFIX = \"q\";\n\nclass FSAGraphLabeler extends AbstractGraphLabeler\n{\n  constructor()\n  {\n    super();\n\n    this._prefix = DEFAULT_NODE_LABEL_PREFIX;\n  }\n\n  setDefaultNodeLabelPrefix(prefix)\n  {\n    this._prefix = prefix;\n  }\n\n  getDefaultNodeLabelPrefix()\n  {\n    return this._prefix;\n  }\n\n  //Override\n  getDefaultNodeLabel()\n  {\n    const graph = this.getGraphController().getGraph();\n    const otherNodes = [];\n    let nodeIndex = 0;\n\n    const startNode = graph.getStartNode();\n    if (startNode && startNode.getNodeCustom()) nodeIndex = 1;\n\n    let newNodeLabel = this.getDefaultNodeLabelPrefix() + nodeIndex;\n    while(graph.getNodesByLabel(newNodeLabel, otherNodes).length > 0)\n    {\n      otherNodes.length = 0;\n      ++nodeIndex;\n      newNodeLabel = this.getDefaultNodeLabelPrefix() + nodeIndex;\n    }\n\n    return newNodeLabel;\n  }\n\n  //Override\n  getDefaultEdgeLabel()\n  {\n    return \"\";\n  }\n\n  //Override\n  getEdgeLabelFormatter()\n  {\n    return edgeLabelFormatter;\n  }\n}\n\nfunction edgeLabelFormatter(string, allowNull=false)\n{\n  const symbols = string.split(SYMBOL_SEPARATOR);\n  const result = new Set();\n\n  let symbol = \"\";\n  let symbolLength = 0;\n  const length = symbols.length;\n  for(let i = 0; i < length; ++i)\n  {\n    symbol = symbols[i].trim();\n    symbolLength = symbol.length;\n    //If the symbol has none or more than 1 char\n    if (symbolLength !== 1)\n    {\n      //Remove symbol (by not adding to result)\n\n      //Divide multi-char symbol into smaller single char symbols\n      if (symbolLength > 1)\n      {\n        for(let subsymbol of symbol.split(\"\"))\n        {\n          subsymbol = subsymbol.trim();\n          if (!result.has(subsymbol))\n          {\n            result.add(subsymbol);\n          }\n        }\n      }\n    }\n    else\n    {\n      result.add(symbol);\n    }\n  }\n\n  //If it is an empty string...\n  if (result.size <= 0) return allowNull ? null : EMPTY;\n  return Array.from(result).join(SYMBOL_SEPARATOR);\n}\n\nexport default FSAGraphLabeler;\n","import AbstractModuleGraphController from 'modules/abstract/AbstractModuleGraphController.js';\n\nimport Eventable from 'util/Eventable.js';\nimport GraphLayout from 'modules/fsa/graph/GraphLayout.js';\nimport FSAGraph from 'modules/fsa/graph/FSAGraph.js';\nimport FSAGraphLabeler from 'modules/fsa/graph/FSAGraphLabeler.js';\n\nconst NODE_SPAWN_RADIUS = 64;\nconst DEFAULT_AUTO_RENAME = true;\n\nclass GraphController extends AbstractModuleGraphController\n{\n  constructor(module)\n  {\n    super(module, new FSAGraph(), new FSAGraphLabeler());\n\n    this.inputController = null;\n    this.machineController = null;\n\n    this.labelEditorElement = null;\n    this.tester = null;\n\n    this.prevQuad = {\n      radians: 0, length: 0,\n      x: 0, y: 0\n    };\n    this.prevEdgeTo = null;\n    this.prevX = 0;\n    this.prevY = 0;\n\n\n    this.shouldAutoLabel = false;\n    this.onGraphNodeLabelChange = this.onGraphNodeLabelChange.bind(this);\n\n    //The difference between controller events vs graph events is: controller has user-intent\n\n    //userCreateNode(graph, node) - When user creates a node\n    this.registerEvent(\"userCreateNode\");\n    this.registerEvent(\"userPreCreateNode\");//(graph, nextNodeID, x, y)\n    this.registerEvent(\"userPostCreateNode\");//(graph, node)\n\n    //userToggleNode(graph, node, prevAccept) - When user toggles the accept state\n    this.registerEvent(\"userToggleNode\");\n\n    //userDeleteNodes(graph, node, targetNodes, prevX, prevY) - When user deletes one or more nodes\n    this.registerEvent(\"userDeleteNodes\");\n    this.registerEvent(\"userPreDeleteNodes\");\n    this.registerEvent(\"userPostDeleteNodes\");\n\n    //userDeleteEdge(graph, edge, prevTo, prevQuad) - When user deletes an edge\n    this.registerEvent(\"userDeleteEdge\");\n    this.registerEvent(\"userPreDeleteEdge\");\n    this.registerEvent(\"userPostDeleteEdge\");\n\n    //userCreateEdge(graph, edge) - When user creates an edge, after naming it\n    this.registerEvent(\"userCreateEdge\");\n    //this.registerEvent(\"userPreCreateEdge\");\n    this.registerEvent(\"userPostCreateEdge\");\n\n    /*\n    //userMoveNodes(graph, nodes, dx, dy) - When user moves one or more nodes\n    this.registerEvent(\"userMoveNodes\");\n    //userMoveInitial(graph, node, prevNode) - When user moves the initial marker to another\n    this.registerEvent(\"userMoveInitial\");\n    //userPreCreateEdge(graph, edge) - When user is about to create an edge, before src\n    this.registerEvent(\"userPreCreateEdge\");\n    //userBeginEdge(graph, edge, src) - When user begins to create an edge, after src and before naming it\n    this.registerEvent(\"userBeginEdge\");\n    //userEndEdge(graph, edge, src, dst) - When user finishes creating an edge, after dst and before naming it (dst could be null for deletion)\n    this.registerEvent(\"userEndEdge\");\n    //userPostCreateEdge(graph, edge) - When user is finished creating an edge, after dst and after quad changes\n    this.registerEvent(\"userPostCreateEdge\");\n    //userMoveEdge(graph, edge, prevDest) - When user changes the dst of edge\n    this.registerEvent(\"userChangeEdge\");\n    //userBendEdge(graph, edge, prevQuad) - When user bends the edge\n    this.registerEvent(\"userBendEdge\");\n    //userLabelEdge(graph, edge, prevLabel) - When user re-labels the edge\n    this.registerEvent(\"userLabelEdge\");\n    */\n\n    //userRenameNode(graph, node, nextLabel, prevLabel, isPrevCustom) - When user sets the label of node\n    this.registerEvent(\"userRenameNode\");\n\n    //userChangeLayout(graph, prevLayout) - When user re-layouts the graph\n    this.registerEvent(\"userChangeLayout\");\n    this.registerEvent(\"userPreChangeLayout\");//before any changes\n    this.registerEvent(\"userPostChangeLayout\");//after all changes\n\n    //userImportGraph(graph) - When user imports a graph\n    this.registerEvent(\"userImportGraph\");\n    this.registerEvent(\"userPreImportGraph\");//before any changes\n    this.registerEvent(\"userPostImportGraph\");//after all changes\n\n    //nodeMove(targetNode, nextX, nextY, prevX, prevY)\n    this.registerEvent(\"nodeMove\");\n    //nodeMoveAll(targetNodes, dx, dy)\n    this.registerEvent(\"nodeMoveAll\");\n    //nodeInitial(nextInitial, prevInitial)\n    this.registerEvent(\"nodeInitial\");\n    //edgeDestination(targetEdge, nextDestination, prevDestination, prevQuad)\n    this.registerEvent(\"edgeDestination\");\n    //edgeMove(targetEdge, nextQuad, prevQuad)\n    this.registerEvent(\"edgeMove\");\n    //edgeLabel(targetEdge, nextLabel, prevLabel)\n    this.registerEvent(\"edgeLabel\");\n    //tryCreateWhileTrash()\n    this.registerEvent(\"tryCreateWhileTrash\");\n  }\n\n  //Override\n  initialize(module)\n  {\n    super.initialize(module);\n    this.tester = module.getTestingManager();\n\n    this.inputController = module.getInputController();\n    this.machineController = module.getMachineController();\n\n    this.setAutoRenameNodes(DEFAULT_AUTO_RENAME);\n  }\n\n  //Override\n  destroy(module)\n  {\n    super.destroy(module);\n  }\n\n  applyAutoLayout()\n  {\n    this.emit(\"userPreChangeLayout\", this.getGraph());\n    GraphLayout.applyLayout(this.getGraph());\n\n    this.emit(\"userChangeLayout\", this.getGraph());\n    this.emit(\"userPostChangeLayout\", this.getGraph());\n  }\n\n  applyAutoRename()\n  {\n    const graphLabeler = this._labeler;\n    const graph = this._graph;\n\n    if (graph.isEmpty()) return;\n\n    //Reset all default labels...\n    for(const node of graph.getNodes())\n    {\n      if (!node.getNodeCustom()) node.setNodeLabel(\"\");\n    }\n\n    //Rename all default labels appropriately...\n    for(const node of graph.getNodes())\n    {\n      if (!node.getNodeCustom())\n      {\n        node.setNodeLabel(graphLabeler.getDefaultNodeLabel());\n      }\n    }\n  }\n\n  //Auto renaming\n  onGraphNodeLabelChange(graph, node, targetNodes, prevX, prevY)\n  {\n    this.applyAutoRename();\n  }\n  setAutoRenameNodes(enable)\n  {\n    const prev = this.shouldAutoLabel;\n    this.shouldAutoLabel = enable;\n    if (prev != enable && enable)\n    {\n      this.on(\"userDeleteNodes\", this.onGraphNodeLabelChange);\n    }\n    else\n    {\n      this.removeEventListener(\"userDeleteNodes\", this.onGraphNodeLabelChange);\n    }\n  }\n  shouldAutoRenameNodes()\n  {\n    return this.shouldAutoLabel;\n  }\n\n  renameNode(node, name)\n  {\n    const prev = node.getNodeLabel();\n    const isPrevCustom = node.getNodeCustom();\n\n    node.setNodeLabel(name);\n    node.setNodeCustom(true);\n\n    this.emit(\"userRenameNode\", this.getGraph(), node, name, prev, isPrevCustom);\n  }\n\n  createNode(x, y)\n  {\n    const newNodeLabel = this.getGraphLabeler().getDefaultNodeLabel();\n\n    if (typeof x === 'undefined') x = (Math.random() * NODE_SPAWN_RADIUS * 2) - NODE_SPAWN_RADIUS;\n    if (typeof y === 'undefined') y = (Math.random() * NODE_SPAWN_RADIUS * 2) - NODE_SPAWN_RADIUS;\n\n    this.emit(\"userPreCreateNode\", this.getGraph(), newNodeLabel, x, y);\n\n    const node = this.getGraph().createNode(x, y);\n    node.setNodeLabel(newNodeLabel);\n\n    this.emit(\"userCreateNode\", this.getGraph(), node);\n\n    this.emit(\"userPostCreateNode\", this.getGraph(), node);\n    return node;\n  }\n\n  toggleNode(node)\n  {\n    const prev = node.getNodeAccept();\n    const result = !prev;\n    //Toggle accept for selected node\n    node.setNodeAccept(result);\n\n    //Emit event\n    this.emit(\"userToggleNode\", this.getGraph(), node, prev);\n  }\n\n  deleteSelectedNodes(selectedNode)\n  {\n    const picker = this.inputController.getPicker();\n    const selection = picker.getSelection(this.getGraph()).slice();\n\n    this.emit(\"userPreDeleteNodes\", this.getGraph(), selectedNode, selection, this.prevX, this.prevY);\n\n    //Remove from graph\n    for(const node of selection)\n    {\n      this.getGraph().deleteNode(node);\n    }\n\n    //Remove from selection\n    picker.clearSelection();\n\n    //Emit event\n    this.emit(\"userDeleteNodes\", this.getGraph(), selectedNode, selection, this.prevX, this.prevY);\n    this.emit(\"userPostDeleteNodes\", this.getGraph(), selectedNode, selection, this.prevX, this.prevY);\n  }\n\n  deleteTargetNode(target)\n  {\n    this.emit(\"userPreDeleteNodes\", this.getGraph(), target, [target], this.prevX, this.prevY);\n\n    this.getGraph().deleteNode(target);\n\n    //Emit event\n    this.emit(\"userDeleteNodes\", this.getGraph(), target, [target], this.prevX, this.prevY);\n    this.emit(\"userPostDeleteNodes\", this.getGraph(), target, [target], this.prevX, this.prevY);\n  }\n\n  deleteTargetNodes(targets)\n  {\n    if (!targets || targets.length <= 0) return;\n\n    this.emit(\"userPreDeleteNodes\", this.getGraph(), targets[0], targets, this.prevX, this.prevY);\n\n    const graph = this.getGraph();\n    for(const node of targets)\n    {\n      graph.deleteNode(node);\n    }\n\n    //Emit event\n    this.emit(\"userDeleteNodes\", this.getGraph(), targets[0], targets, this.prevX, this.prevY);\n    this.emit(\"userPostDeleteNodes\", this.getGraph(), targets[0], targets, this.prevX, this.prevY);\n  }\n\n  deleteTargetEdge(target)\n  {\n    this.emit(\"userPreDeleteEdge\", this.getGraph(), target, this.prevEdgeTo, this.prevQuad);\n    this.getGraph().deleteEdge(target);\n\n    //Emit event\n    this.emit(\"userDeleteEdge\", this.getGraph(), target, this.prevEdgeTo, this.prevQuad);\n    this.emit(\"userPostDeleteEdge\", this.getGraph(), target, this.prevEdgeTo, this.prevQuad);\n  }\n\n  deleteTargetEdges(targets)\n  {\n    if (!targets || targets.length <= 0) return;\n\n    for(const target of targets)\n    {\n      this.deleteTargetEdge(target);\n    }\n  }\n\n  moveNodeTo(pointer, node, x, y)\n  {\n    const nodeSize = node.getNodeSize();\n    for(const other of this.getGraph().getNodes())\n    {\n      //Update node collision\n      if (node === other) continue;\n\n      const dx = x - other.x;\n      const dy = y - other.y;\n      const angle = Math.atan2(dy, dx);\n\n      const diameter = (nodeSize * 2);\n      const nextDX = other.x + (Math.cos(angle) * diameter) - x;\n      const nextDY = other.y + (Math.sin(angle) * diameter) - y;\n\n      if (dx * dx + dy * dy < nodeSize * nodeSize * 4)\n      {\n        x += nextDX;\n        y += nextDY;\n      }\n    }\n\n    node.x = x;\n    node.y = y;\n  }\n\n  moveMultipleNodesTo(pointer, nodes, x, y)\n  {\n    //Moves all nodes by difference between initial position with passed-in x and y\n    const pos = pointer.getInputEventPosition();\n    const dx = x - pos.x;\n    const dy = y - pos.y;\n    for(const node of nodes)\n    {\n      node.x += dx;\n      node.y += dy;\n    }\n\n    //Updates initial position to passed-in x and y to maintain relative position\n    pointer.changeInputEventPosition(x, y);\n  }\n\n  moveEdgeTo(pointer, edge, x, y)\n  {\n    edge.setQuadraticByCoords(x, y);\n  }\n\n  moveEndpointTo(pointer, edge, x, y)\n  {\n    //Get ONLY node at x and y (cannot use hover target, since it is not ONLY nodes)\n    const picker = this.inputController.getPicker();\n    const dst = picker.getNodeAt(this.getGraph(), x, y) || pointer;\n\n    edge.changeDestinationNode(dst);\n\n    //If the cursor returns to the state after leaving it...\n    if (edge.isSelfLoop())\n    {\n      //Make it a self loop\n      const sourceNode = edge.getSourceNode();\n      const dx = sourceNode.x - x;\n      const dy = sourceNode.y - y;\n      const radians = Math.atan2(dy, dx) + Math.PI;\n      edge.setQuadratic(radians);\n    }\n    //Otherwise, maintain original curve\n    else\n    {\n      //TODO: This also causes self-loops to act weird when no longer a self loop\n      edge.setQuadratic(this.prevQuad.radians, this.prevQuad.length);\n    }\n  }\n\n  openLabelEditor(target, x, y, placeholder=null, replace=true, callback=null)\n  {\n    if (!this.labelEditorElement)\n    {\n      if (callback) callback();\n      return;\n    }\n\n    const prevLabel = placeholder || target.getEdgeLabel();\n    this.labelEditorElement.openEditor(target, placeholder, replace, () => {\n      const label = target.getEdgeLabel();\n      if (prevLabel.length > 0 && label != prevLabel)\n      {\n        this.emit(\"edgeLabel\", this.getGraph(), target, label, prevLabel);\n      }\n\n      if (callback)\n      {\n        callback();\n      }\n    });\n  }\n\n  focusOnNode(node)\n  {\n    //Center workspace at focused node; inverted due to graph-to-screen space\n    this.inputController.getInputAdapter().getViewport().setOffset(-node.x, -node.y);\n  }\n\n  focusOnEdge(edge)\n  {\n    //Center workspace at focused edge; inverted due to graph-to-screen space\n    const center = edge.getCenterPoint();\n    this.inputController.getInputAdapter().getViewport().setOffset(-center.x, -center.y);\n  }\n\n  focusOnNodes(nodes)\n  {\n    //Center workspace at the average of focused nodes; inverted due to graph-to-screen space\n    const length = nodes.length;\n    let ax = 0;\n    let ay = 0;\n    for(const node of nodes)\n    {\n      ax += node.x;\n      ay += node.y;\n    }\n    this.inputController.getInputAdapter().getViewport().setOffset(-ax / length, -ay / length);\n  }\n}\n//Mixin Eventable\nEventable.mixin(GraphController);\n\nfunction moveNodesOutOfEdges(target, graph)\n{\n\n  const x1 = target.getSourceNode().x;\n  const y1 = target.getSourceNode().y;\n  const x2 = target.getDestinationNode().x;\n  const y2 = target.getDestinationNode().y;\n  const dist12sq = (x2-x1)*(x2-x1) + (y2-y1)*(y2-y1);\n  let vertical = false;\n  let m = 0;\n  let b = 0;\n  if(x1 > x2) {\n    m = (y1-y2) / (x1-x2);\n    b = y2-m*x2;\n  } else if (x1 < x2) {\n    m = (y2-y1) / (x2-x1);\n    b = y1-m*x1;\n  } else {\n    vertical = true;\n  }\n\n  for(const node of graph.getNodes())\n  {\n    if(node === target.getSourceNode() || node === target.getDestinationNode()) continue;\n\n    const nodeSize = node.getNodeSize();\n    const x0 = node.x;\n    const y0 = node.y;\n\n    const dist01sq = (x1-x0)*(x1-x0) + (y1-y0)*(y1-y0);\n    const dist02sq = (x2-x0)*(x2-x0) + (y2-y0)*(y2-y0);\n    if(dist01sq > dist12sq || dist02sq > dist12sq) continue;\n\n\n    let dist = 0;\n    let xint = 0;\n    let yint = 0;\n    let m0 = 0;\n    let horizontal = false;\n    if(vertical) {\n      dist = Math.abs(x1-x0);\n      xint = x1;\n      yint = y0;\n      m0 = 0;\n    } else {\n      dist = Math.abs(b+ m*x0 - y0) / Math.sqrt(1+m*m);\n      xint = (x0 + m*y0 - m*b) / (m*m + 1);\n      yint = m * xint + b;\n      if(m !== 0) {\n        m0 = 1 / m;\n      } else {\n        horizontal = true;\n      }\n    }\n\n    if(dist < nodeSize) {\n      const toMove = nodeSize - dist + 10;\n      const distx = x0 - xint;\n      const disty = y0 - yint;\n      let signx = -1;\n      let signy = -1;\n      if(distx > 0) signx = 1;\n      if(disty > 0) signy = 1;\n\n      if(horizontal) {\n        node.y = y0 + signy * toMove;\n      } else {\n        let toMovex = toMove / Math.sqrt(m0*m0 + 1);\n        let toMovey = Math.abs(m0) * toMovex;\n        node.x = x0 + signx * toMovex;\n        node.y = y0 + signy * toMovey;\n      }\n    }\n  }\n}\n\nexport default GraphController;\n","import React from 'react';\n\nclass StateUnreachableWarningMessage extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.targetIndex = 0;\n    this.targetLabel = \"\";\n    const targets = props.message.value;\n    for(const target of targets)\n    {\n      if (this.targetLabel.length > 0)\n      {\n        this.targetLabel += \", \";\n      }\n      this.targetLabel += target.getNodeLabel();\n    }\n\n    this.onClick = this.onClick.bind(this);\n  }\n\n  onClick(e)\n  {\n    const graphController = this.props.graphController;\n    const machineController = this.props.machineController;\n    const buttonValue = e.target.value;\n    const message = this.props.message;\n    switch(buttonValue)\n    {\n      case \"locate\":\n      {\n        //Locate the target node\n        const target = message.value[this.targetIndex++];\n        if (this.targetIndex >= message.value.length)\n        {\n          this.targetIndex = 0;\n        }\n\n        //Move pointer to target\n        graphController.focusOnNode(target);\n      }\n      break;\n      case \"deleteall\":\n      {\n        const targets = message.value;\n        //Delete all target nodes\n        graphController.deleteTargetNodes(targets);\n\n        //Sort the nodes after deleting if enabled...\n        graphController.applyAutoRename();\n\n        //Exit the message\n        message.close();\n      }\n      break;\n      default:\n        throw new Error(\"Unknown button value for message\");\n    }\n  }\n\n  //Override\n  render()\n  {\n    return <div>\n      <p>{I18N.toString(\"message.warning.unreachable\") + \": \" + this.targetLabel}</p>\n      <button value=\"locate\" onClick={this.onClick}>{I18N.toString(\"message.action.locate\")}</button>\n      <button value=\"deleteall\" onClick={this.onClick}>{I18N.toString(\"message.action.deleteall\")}</button>\n    </div>;\n  }\n}\n\nexport default StateUnreachableWarningMessage;\n","import React from 'react';\n\nimport { ARROW } from 'machine/Symbols.js';\n\nclass TransitionErrorMessage extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.targetIndex = 0;\n    this.targetLabel = \"\";\n    const targets = props.message.value.targets;\n    for(const target of targets)\n    {\n      if (this.targetLabel.length > 0)\n      {\n        this.targetLabel += \", \";\n      }\n      this.targetLabel += \"(\" + target.getSourceNode().getNodeLabel() + \", \" + (target.getDestinationNode() ? target.getDestinationNode().getNodeLabel() : \"null\") + \") \" + ARROW + \" \" + target.getEdgeLabel();\n    }\n\n    this.onClick = this.onClick.bind(this);\n  }\n\n  onClick(e)\n  {\n    const graphController = this.props.graphController;\n    const machineController = this.props.machineController;\n    const buttonValue = e.target.value;\n    const message = this.props.message;\n    switch(buttonValue)\n    {\n      case \"locate\":\n      {\n        const targets = message.value.targets;\n        const targetLength = targets.length;\n        if (targetLength > 0 && this.targetIndex < targetLength)\n        {\n          //Locate the target edge\n          const target = targets[this.targetIndex++];\n          if (this.targetIndex >= targetLength) this.targetIndex = 0;\n\n          //Move pointer to target\n          graphController.focusOnEdge(target);\n        }\n      }\n      break;\n      case \"deleteall\":\n      {\n        const targets = message.value.targets;\n        //Delete all target edges\n        graphController.deleteTargetEdges(targets);\n\n        //Exit the message\n        message.close();\n      }\n      break;\n      default:\n        throw new Error(\"Unknown button value for message\");\n    }\n  }\n\n  //Override\n  render()\n  {\n    return <div>\n      <p>{this.props.message.value.text + \": \" + this.targetLabel}</p>\n      <button value=\"locate\" onClick={this.onClick}>{I18N.toString(\"message.action.locate\")}</button>\n      <button value=\"deleteall\" onClick={this.onClick}>{I18N.toString(\"message.action.deleteall\")}</button>\n    </div>;\n  }\n}\n\nexport default TransitionErrorMessage;\n","import React from 'react';\n\nclass StateMissingTransitionErrorMessage extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.targetIndex = 0;\n    this.targetLabel = \"\";\n    const targets = props.message.value.targets;\n    for(const target of targets)\n    {\n      if (this.targetLabel.length > 0)\n      {\n        this.targetLabel += \", \";\n      }\n      this.targetLabel += target.getNodeLabel();\n    }\n\n    this.onClick = this.onClick.bind(this);\n  }\n\n  onClick(e)\n  {\n    const graphController = this.props.graphController;\n    const machineController = this.props.machineController;\n    const buttonValue = e.target.value;\n    const message = this.props.message;\n    switch(buttonValue)\n    {\n      case \"locate\":\n      {\n        const targets = message.value.targets;\n        const targetLength = targets.length;\n        if (targetLength > 0 && this.targetIndex < targetLength)\n        {\n          //Locate the target edge\n          const target = targets[this.targetIndex++];\n          if (this.targetIndex >= targetLength) this.targetIndex = 0;\n\n          //Move pointer to target\n          graphController.focusOnNode(target);\n        }\n      }\n      break;\n      default:\n        throw new Error(\"Unknown button value for message\");\n    }\n  }\n\n  //Override\n  render()\n  {\n    return <div>\n      <p>{I18N.toString(\"message.error.missing\") + \": \" + this.targetLabel}</p>\n      <button value=\"locate\" onClick={this.onClick}>{I18N.toString(\"message.action.locate\")}</button>\n    </div>;\n  }\n}\n\nexport default StateMissingTransitionErrorMessage;\n","import Config from 'config.js';\nimport { EMPTY } from 'machine/Symbols.js';\n\nimport Notifications from 'system/notification/Notifications.js';\nimport StateUnreachableWarningMessage from 'modules/fsa/notifications/StateUnreachableWarningMessage.js';\nimport TransitionErrorMessage from 'modules/fsa/notifications/TransitionErrorMessage.js';\n\nimport StateMissingTransitionErrorMessage from 'modules/fsa/notifications/StateMissingTransitionErrorMessage.js';\nimport StateErrorMessage from 'modules/fsa/notifications/StateErrorMessage.js';\n\nclass FSAErrorChecker\n{\n  constructor()\n  {\n    this.errorNodes = [];\n    this.errorEdges = [];\n    this.warningNodes = [];\n    this.warningEdges = [];\n  }\n\n  clear()\n  {\n    this.errorNodes.length = 0;\n    this.errorEdges.length = 0;\n    this.warningNodes.length = 0;\n    this.warningEdges.length = 0;\n  }\n\n  checkErrors(shouldNotifyErrors, graphController, machineController)\n  {\n    const deterministic = machineController.getMachineType() === \"DFA\";\n    const machineBuilder = machineController.getMachineBuilder();\n\n    const machine = machineBuilder.getMachine();\n    const graph = graphController.getGraph();\n    const alphabet = machine.getAlphabet();\n    const errorNodes = this.errorNodes;\n    const errorEdges = this.errorEdges;\n    const warnNodes = this.warningNodes;\n    const warnEdges = this.warningEdges;\n    this.clear();\n\n    let nodeTransitionMap = new Map();\n    let startNode = graph.getStartNode();\n\n    //Get Unreachable nodes...\n    const unreachNodes = machineController.getUnreachableNodes();\n    for(const node of unreachNodes)\n    {\n      warnNodes.push(node);\n    }\n\n    //Get placeholder / empty / dupe edges...\n    const placeholderEdges = [];\n    const emptyEdges = [];\n    const dupeEdges = [];\n    for(const edge of graph.getEdges())\n    {\n      //check incomplete edges\n      if (edge.isPlaceholder())\n      {\n        //Update cached error targets\n        placeholderEdges.push(edge);\n        if (errorEdges.indexOf(edge) == -1) errorEdges.push(edge);\n      }\n      //Ignore dupe/empty edges for nondeterministic\n      else if (deterministic)\n      {\n        const from = edge.getSourceNode();\n        const to = edge.getDestinationNode();\n        const labels = edge.getEdgeSymbolsFromLabel();\n\n        for(const label of labels)\n        {\n          //check for empty transitions\n          if(label == EMPTY)\n          {\n            //Update cached error targets\n            emptyEdges.push(edge);\n            if (errorEdges.indexOf(edge) == -1) errorEdges.push(edge);\n          }\n          else\n          {\n            if(!nodeTransitionMap.has(from))\n            {\n              nodeTransitionMap.set(from, [label]);\n            }\n            else\n            {\n              //check for duplicate transitions\n              const currentAlphabet = nodeTransitionMap.get(from);\n              if(currentAlphabet.includes(label))\n              {\n                //Update cached error targets\n                dupeEdges.push(edge);\n                if (errorEdges.indexOf(edge) == -1) errorEdges.push(edge);\n              }\n              else\n              {\n                currentAlphabet.push(label);\n              }\n            }\n          }\n        }\n      }\n    }\n\n    //Get missing nodes...\n    const missingNodes = [];\n    if (deterministic)\n    {\n      //Check for missing transitions\n      for(const node of graph.getNodes())\n      {\n        const nodeTransitions = nodeTransitionMap.get(node);\n        if (!nodeTransitions && alphabet.length != 0 ||\n          nodeTransitions && nodeTransitions.length < alphabet.length)\n        {\n          //Get the required missing symbols\n          /*\n          let array;\n          if (nodeTransitions)\n          {\n            array = [];\n            for(const symbol of alphabet)\n            {\n              if (!nodeTransitions.includes(symbol))\n              {\n                array.push(symbol);\n              }\n            }\n          }\n          else\n          {\n            array = alphabet.slice();\n          }\n          */\n\n          //Update cached error targets\n          missingNodes.push(node);\n          if (errorNodes.indexOf(node) == -1) errorNodes.push(node);\n        }\n      }\n    }\n\n    const result = !(errorNodes.length === 0 && errorEdges.length === 0 &&\n      warnNodes.length === 0 && warnEdges.length === 0);\n\n    //Callbacks for all collected errors\n    if (shouldNotifyErrors)\n    {\n      const messageTag = Config.MACHINE_ERRORS_MESSAGE_TAG;\n      //Clear the existing messages\n      Notifications.clearMessages(messageTag);\n\n      //No errors!\n      if (!result)\n      {\n        Notifications.addMessage(I18N.toString(\"message.error.none\"), \"success\", messageTag, null, null, false);\n      }\n      //There are some errors/warnings...\n      else\n      {\n        const props = {graphController: graphController, machineController: machineController};\n\n        //Add new warning messages\n        if (unreachNodes.length > 0)\n        {\n          Notifications.addMessage(unreachNodes,\n            \"warning\", messageTag, StateUnreachableWarningMessage, props, false);\n        }\n        //Add new error messages\n        if (placeholderEdges.length > 0)\n        {\n          Notifications.addMessage({text: I18N.toString(\"message.error.incomplete\"), targets: placeholderEdges},\n            \"error\", messageTag, TransitionErrorMessage, props, false);\n        }\n        if (emptyEdges.length > 0)\n        {\n          Notifications.addMessage({text: I18N.toString(\"message.error.empty\"), targets: emptyEdges},\n            \"error\", messageTag, TransitionErrorMessage, props, false);\n        }\n        if (dupeEdges.length > 0)\n        {\n          Notifications.addMessage({text: I18N.toString(\"message.error.dupe\"), targets: dupeEdges},\n            \"error\", messageTag, TransitionErrorMessage, props, false);\n        }\n        if (missingNodes.length > 0)\n        {\n          Notifications.addMessage({targets: missingNodes},\n            \"error\", messageTag, StateMissingTransitionErrorMessage, props, false);\n        }\n      }\n    }\n\n    return result;\n  }\n}\n\nexport default FSAErrorChecker;\n","import AbstractMachineBuilder from 'modules/abstract/AbstractMachineBuilder.js';\n\nimport FSAErrorChecker from './FSAErrorChecker.js';\nimport DFA from 'machine/DFA.js';\nimport NFA from 'machine/NFA.js';\nimport Node from 'modules/fsa/graph/FSANode.js';\n\nclass FSABuilder extends AbstractMachineBuilder\n{\n  constructor()\n  {\n    super();\n\n    this._machine = new NFA();\n    this._deterministic = true;\n    this._symbols = [];\n\n    this._errorChecker = new FSAErrorChecker();\n\n    this.tester = null;\n    this.graphController = null;\n    this.machineController = null;\n  }\n\n  initialize(module)\n  {\n    this.tester = module.getTestingManager();\n    this.graphController = module.getGraphController();\n    this.machineController = module.getMachineController();\n  }\n\n  //Override\n  onGraphChange(graph=null)\n  {\n    if (!this.tester) return;\n\n    this._machine.clear();\n    const result = this.toNFA(this._machine);\n    for(const s of this._symbols)\n    {\n      this._machine.newSymbol(s);\n    }\n\n    this._errors.length = 0;\n    this._warnings.length = 0;\n    this._errorChecker.checkErrors(this.tester.shouldCheckError, this.graphController, this.machineController);\n    for(const node of this._errorChecker.errorNodes)\n    {\n      this._errors.push({target: node, targetType: 'node'});\n    }\n    for(const edge of this._errorChecker.errorEdges)\n    {\n      this._errors.push({target: edge, targetType: 'edge'});\n    }\n    for(const node of this._errorChecker.warningNodes)\n    {\n      this._warnings.push({target: node, targetType: 'node'});\n    }\n    for(const edge of this._errorChecker.warningEdges)\n    {\n      this._warnings.push({target: edge, targetType: 'edge'});\n    }\n  }\n\n  setDeterministic(deterministic)\n  {\n    if (this._deterministic === deterministic) return;\n    this._deterministic = deterministic;\n\n    this.onGraphChange();\n  }\n\n  isDeterministic()\n  {\n    return this._deterministic;\n  }\n\n  addCustomSymbol(symbol)\n  {\n    this._symbols.push(symbol);\n\n    this.onGraphChange();\n  }\n\n  removeCustomSymbol(symbol)\n  {\n    this._symbols.splice(this._symbols.indexOf(symbol), 1);\n\n    this.onGraphChange();\n  }\n\n  renameCustomSymbol(prevSymbol, nextSymbol)\n  {\n    const i = this._symbols.indexOf(prevSymbol);\n    if (i <= 0) throw new Error(\"Trying to rename unknown symbol \\'\" + prevSymbol + \"\\'\");\n    this._symbols[i] = nextSymbol;\n\n    this.onGraphChange();\n  }\n\n  isCustomSymbol(symbol)\n  {\n    return this._symbols.includes(symbol);\n  }\n\n  toDFA(dst = null)\n  {\n    const result = dst || new DFA();\n    if (!(result instanceof DFA))\n      throw new Error(\"Trying to parse graph mismatched machine type.\");\n    const graph = this.graphController.getGraph();\n    fillFSA(graph, result);\n    return result;\n  }\n\n  toNFA(dst=null)\n  {\n    const result = dst || new NFA();\n    if (!(result instanceof NFA))\n      throw new Error(\"Trying to parse graph mismatched machine type.\");\n    const graph = this.graphController.getGraph();\n    fillFSA(graph, result);\n    return result;\n  }\n\n  //Override\n  getMachine()\n  {\n    return this._machine;\n  }\n}\n\nfunction fillFSA(graph, fsa)\n{\n  if (graph.getNodes().length <= 0) return fsa;\n  //Create all the nodes\n  for(const node of graph.getNodes())\n  {\n    try\n    {\n      let state = node.getNodeLabel();\n      fsa.newState(state);\n\n      //Set final state\n      if (node.getNodeAccept())\n      {\n        fsa.setFinalState(state, true);\n      }\n    }\n    catch(e)\n    {\n      throw e;\n    }\n  }\n\n  //Create all the edges\n  for(const edge of graph.getEdges())\n  {\n    //Ignore any incomplete edges\n    if (edge.isPlaceholder()) continue;\n    const from = edge.getSourceNode();\n    const to = edge.getDestinationNode();\n    if (from instanceof Node && to instanceof Node)\n    {\n      const labels = edge.getEdgeSymbolsFromLabel();\n      for(const label of labels)\n      {\n        try\n        {\n          fsa.newTransition(from.getNodeLabel(), to.getNodeLabel(), label);\n        }\n        catch(e)\n        {\n          throw e;\n        }\n      }\n    }\n  }\n\n  //Set start state\n  let startState = graph.getStartNode().getNodeLabel();\n  fsa.setStartState(startState);\n\n  return fsa;\n}\n\nexport default FSABuilder;\n","import DFA from 'machine/DFA.js';\nimport { EMPTY } from 'machine/Symbols.js';\n\nexport function convertToDFA(nfa, dst=null)\n{\n\n  //Avoid runtime errors for empty nfas\n  if(nfa.getStates().length == 0) return;\n\n  const result = dst || new DFA();\n\n  const alphabet = nfa.getAlphabet();\n  const startState = nfa.getStartState();\n\n  //Make new DFA start state\n  let nextStates = nfa.doClosureTransition(startState);\n  const newStartState = newDFAStateFromNFA(result, nfa, nextStates);\n\n  //For every state from the NFA's powerset, add it to DFA with correct transitions\n  const powerSetStates = nfa.getPowerSet();\n  for(const powerSetState of powerSetStates) {\n      console.log(\"Adding to DFA: \" + getStateFromSet(powerSetState));\n      if(powerSetState.length != 0)\n        expandPowersetStateToDFA(powerSetState, nfa, result);\n  }\n\n  //Create trap state\n  const trapState = result.newState(\"{}\");\n  let flag = false;\n\n  //Check for the new alphabet...\n  const newAlphabet = result.getAlphabet();\n  for(const state of result.getStates())\n  {\n    for(const symbol of newAlphabet)\n    {\n      //If transition for this symbol does not exist...\n      if (!result.doTransition(state, symbol))\n      {\n        //Create it\n        result.newTransition(state, trapState, symbol);\n\n        if (state !== trapState) flag = true;\n      }\n    }\n  }\n\n  return result;\n}\n\n/* Inspired by expandNFAStateToDFA, it takes a powerSetState, which is a set\n * of NFA states from the powerset (e.g. [q1, q1]) and adds it to the DFA as a\n * single state (e.g. {q1, q2}) and adds its transitions\n */\nfunction expandPowersetStateToDFA(powerSetState, nfa, dfa) {\n    const result = [];\n    const alphabet = nfa.getAlphabet();\n    const state = getStateFromSet(powerSetState);\n\n    if(!dfa.hasState(state)) {\n        result.push(newDFAStateFromNFA(dfa, nfa, powerSetState));\n    }\n\n    let terminals = [];\n    let dfaState = null;\n\n    for(const symbol of alphabet)\n    {\n      //Get all closed reachable states...\n      for(const s of powerSetState)\n      {\n        nfa.doTerminalTransition(s, symbol, terminals);\n      }\n\n      //If has reachable states...\n      if (terminals.length > 0)\n      {\n        dfaState = getStateFromSet(terminals);\n\n        //Create state if it does not exist...\n        if (!dfa.hasState(dfaState))\n        {\n          dfaState = newDFAStateFromNFA(dfa, nfa, terminals);\n          result.push(dfaState);\n        }\n\n        //Create transition for reachable state\n        dfa.newTransition(state, dfaState, symbol);\n      }\n\n      //Reset list\n      terminals.length = 0;\n    }\n\n    return result;\n}\n\nfunction expandNFAStateToDFA(state, nfa, dfa)\n{\n  const result = [];\n  const alphabet = nfa.getAlphabet();\n\n  let terminals = [];\n  let nfaStates = null;\n  let dfaState = null;\n\n  for(const symbol of alphabet)\n  {\n    //Get all closed reachable states...\n    nfaStates = getSetFromState(state);\n    for(const s of nfaStates)\n    {\n      nfa.doTerminalTransition(s, symbol, terminals);\n    }\n\n    //If has reachable states...\n    if (terminals.length > 0)\n    {\n      dfaState = getStateFromSet(terminals);\n\n      //Create state if it does not exist...\n      if (!dfa.hasState(dfaState))\n      {\n        dfaState = newDFAStateFromNFA(dfa, nfa, terminals);\n        result.push(dfaState);\n      }\n\n      //Create transition for reachable state\n      dfa.newTransition(state, dfaState, symbol);\n    }\n\n    //Reset list\n    terminals.length = 0;\n  }\n\n  return result;\n}\n\nfunction newDFAStateFromNFA(dfa, nfa, nfaStates)\n{\n  const result = dfa.newState(getStateFromSet(nfaStates));\n\n  //If the NFA states contain a final, then DFA state should be final\n  for(const s of nfaStates)\n  {\n    if (nfa.isFinalState(s))\n    {\n      dfa.setFinalState(result);\n      break;\n    }\n  }\n\n  return result;\n}\n\nfunction getStateFromSet(nfaStates)\n{\n  nfaStates.sort();\n  return \"{\" + nfaStates.join(\",\") + \"}\";\n}\n\nfunction getSetFromState(dfaState)\n{\n  return dfaState.substring(1, dfaState.length - 1).split(\",\");\n}\n","import AbstractModuleMachineController from 'modules/abstract/AbstractModuleMachineController.js';\nimport Eventable from 'util/Eventable.js';\n\n//import FSABuilder from 'modules/fsa/machine/FSABuilder.js';\n//HACK: this is only to support the old FSABuilder (remove this once finished)\nimport FSABuilder from 'modules/fsa/builder/FSABuilder.js';\n\nimport GraphLayout from 'modules/fsa/graph/GraphLayout.js';\nimport { convertToDFA } from 'machine/util/convertNFA.js';\nimport DFA from 'machine/DFA.js';\n\nclass MachineController extends AbstractModuleMachineController\n{\n  constructor(module)\n  {\n    super(module, new FSABuilder());\n\n    this.machineName = null;\n\n    this.graphController = null;\n\n    //userChangeMachine(machineBuilder, nextMachineType, prevMachineType) - when user changes machine type\n    this.registerEvent(\"userChangeMachine\");\n    //userConvertMachine(machineBuilder, nextMachineType, prevMachineType) - when user converts machine type\n    this.registerEvent(\"userConvertMachine\");\n    this.registerEvent(\"userPreConvertMachine\");//Before changes\n    this.registerEvent(\"userPostConvertMachine\");//After all changes\n    //userRenameMachine(machineBuilder, nextMachineName, prevMachineName) - when machine name is changed\n    this.registerEvent(\"userRenameMachine\");\n    //userCreateSymbol(machineBuilder, symbol) - When user adds a custom symbol\n    this.registerEvent(\"userCreateSymbol\");\n    //userDeleteSymbol(machineBuilder, symbol, prevEdges) - When user delets a symbol (and affects the edges)\n    this.registerEvent(\"userDeleteSymbol\");\n    this.registerEvent(\"userPreDeleteSymbol\");//userPreDeleteSymbol(machineBuilder, symbol)\n    this.registerEvent(\"userPostDeleteSymbol\");\n    //userRenameSymbol(machineBuilder, symbol, prevSymbol, targetEdges) - When user renames a used symbol (and affects the edges)\n    this.registerEvent(\"userRenameSymbol\");\n    this.registerEvent(\"userPreRenameSymbol\");//userPreDeleteSymbol(machineBuilder, symbol, prevSymbol)\n    this.registerEvent(\"userPostRenameSymbol\");\n  }\n\n  //Override\n  initialize(module)\n  {\n    super.initialize(module);\n\n    this.graphController = module.getGraphController();\n\n    //HACK: this is only to support the old FSABuilder (remove this once finished)\n    this.getMachineBuilder().initialize(module);\n  }\n\n  //Override\n  destroy(module)\n  {\n    super.destroy(module);\n  }\n\n  //Override\n  update(module)\n  {\n    super.update(module);\n  }\n\n  getMachineType()\n  {\n    //return this._machineBuilder.getMachine().isDeterministic() ? \"DFA\" : \"NFA\";\n    //HACK: this is only to support the old FSABuilder (remove this once finished)\n    return this._machineBuilder.isDeterministic() ? \"DFA\" : \"NFA\";\n  }\n\n  setMachineType(machineType)\n  {\n    //this._machineBuilder.getMachine().setDeterministic(machineType === 'DFA');\n    //HACK: this is only to support the old FSABuilder (remove this once finished)\n    this._machineBuilder.setDeterministic(machineType === 'DFA');\n  }\n\n  getMachineName()\n  {\n    return this.machineName || I18N.toString(\"file.untitled\");\n  }\n\n  setMachineName(machineName)\n  {\n    if (!machineName || machineName.length <= 0)\n    {\n      this.machineName = null;\n    }\n    else\n    {\n      this.machineName = machineName;\n    }\n\n    const value = this.getMachineName();\n    const element = document.getElementById('window-title');\n    const string = element.innerHTML;\n    const separator = string.indexOf('-');\n    if (separator !== -1)\n    {\n      element.innerHTML = value + \" - \" + string.substring(separator + 1).trim();\n    }\n    else\n    {\n      element.innerHTML = value + \" - \" + string;\n    }\n  }\n\n  renameMachine(machineName)\n  {\n    const prev = this.machineName;\n    this.setMachineName(machineName);\n\n    //Emit a user rename machine event\n    this.emit(\"userRenameMachine\", this.getMachineBuilder(), machineName, prev);\n  }\n\n  changeMachineTo(machineType)\n  {\n    const prev = this.getMachineType();\n    if (prev != machineType)\n    {\n      this.setMachineType(machineType);\n\n      //Emit event\n      this.emit(\"userChangeMachine\", this.getMachineBuilder(), machineType, prev);\n    }\n  }\n\n  getFirstGraphNodeByLabel(graph, label)\n  {\n    for(const node of graph.getNodes())\n    {\n      if (node.getNodeLabel() == label)\n      {\n        return node;\n      }\n    }\n\n    return null;\n  }\n\n  setGraphToMachine(graph, machine)\n  {\n    graph.clear();\n\n    //Add all states\n    let node;\n    for(const state of machine.getStates())\n    {\n      node = graph.createNode(0, 0);\n      node.setNodeLabel(state);\n      if (machine.isFinalState(state))\n      {\n        node.setNodeAccept(true);\n      }\n    }\n\n    //Add all transitions\n    let edge, from, to, read, labels, flag;\n    for(let transition of machine.getTransitions())\n    {\n      from = this.getFirstGraphNodeByLabel(graph, transition[0]);\n      read = transition[1];\n      to = this.getFirstGraphNodeByLabel(graph, transition[2]);\n      edge = graph.createEdge(from, to);\n      edge.setEdgeLabel(read);\n      const formattedEdge = graph.formatEdge(edge);\n      if (edge != formattedEdge) graph.deleteEdge(edge);\n    }\n\n    //Set start state\n    const startState = machine.getStartState();\n    graph.setStartNode(this.getFirstGraphNodeByLabel(graph, startState));\n\n    //Auto layout graph\n    GraphLayout.applyLayout(graph);\n  }\n\n  convertMachineTo(machineType)\n  {\n    const currentMachineType = this.getMachineType();\n\n    //Already converted machine...\n    if (currentMachineType === machineType) return;\n\n    if (machineType == \"DFA\" && currentMachineType == \"NFA\")\n    {\n      this.emit(\"userPreConvertMachine\", this.getMachineBuilder(), machineType, currentMachineType);\n\n      const result = convertToDFA(this.getMachineBuilder().getMachine(), new DFA());\n      this.setGraphToMachine(this.graphController.getGraph(), result);\n      this.setMachineType(machineType);\n\n      this.emit(\"userConvertMachine\", this.getMachineBuilder(), machineType, currentMachineType);\n      this.emit(\"userPostConvertMachine\", this.getMachineBuilder(), machineType, currentMachineType);\n    }\n    else if (machineType == \"NFA\" && currentMachineType == \"DFA\")\n    {\n      this.changeMachineTo(machineType);\n    }\n    else\n    {\n      throw new Error(\"Conversion scheme between \\'\" + currentMachineType + \"\\' to \\'\" + machineType + \"\\' is not supported\");\n    }\n  }\n\n  getUnreachableNodes()\n  {\n    const graphController = this.graphController;\n    const graph = graphController.getGraph();\n    if (graph.getNodeCount() <= 1) return [];\n\n    const edges = graph.getEdges();\n    const nodes = graph.getNodes().slice();\n    const startNode = nodes.shift();\n    let nextNodes = [];\n    nextNodes.push(startNode);\n\n    while(nextNodes.length > 0)\n    {\n      const node = nextNodes.pop();\n      for(const edge of edges)\n      {\n        if (edge.getSourceNode() === node)\n        {\n          const i = nodes.indexOf(edge.getDestinationNode());\n          if (i >= 0)\n          {\n            const nextNode = nodes.splice(i, 1)[0];\n            nextNodes.push(nextNode);\n          }\n        }\n      }\n    }\n\n    return nodes;\n  }\n\n  getStates()\n  {\n    return this._machineBuilder.getMachine().getStates();\n  }\n\n  countStates()\n  {\n    return this.getStates().length;\n  }\n\n  getFinalStates()\n  {\n    return this._machineBuilder.getMachine().getFinalStates();\n  }\n\n  getTransitions()\n  {\n    return this._machineBuilder.getMachine().getTransitions();\n  }\n\n  getAlphabet()\n  {\n    const machine = this._machineBuilder.getMachine();\n    const result = [];\n    machine.getAlphabet(result);\n    return result;\n  }\n\n  isUsedSymbol(symbol)\n  {\n    return !this.isCustomSymbol(symbol);\n  }\n\n  createSymbol(symbol)\n  {\n    this.getMachineBuilder().addCustomSymbol(symbol);\n\n    this.emit(\"userCreateSymbol\", this.getMachineBuilder(), symbol);\n  }\n\n  deleteSymbol(symbol)\n  {\n    let edge = null;\n    let index = null;\n    let result = null;\n    const targets = [];\n\n    this.emit(\"userPreDeleteSymbol\", this.getMachineBuilder(), symbol);\n\n    const graph = this.graphController.getGraph();\n    for(let i = graph.getEdges().length - 1; i >= 0; --i)\n    {\n      edge = graph.getEdges()[i];\n      index = edge.getEdgeLabel().indexOf(symbol);\n      if (index >= 0)\n      {\n        result = edge.getEdgeLabel().substring(0, index) + edge.getEdgeLabel().substring(index + 1);\n        if (result.length > 0)\n        {\n          edge.setEdgeLabel(result);\n        }\n        else\n        {\n          edge.setEdgeLabel(\"\");\n          graph.deleteEdge(edge);\n        }\n        targets.push(edge);\n      }\n    }\n\n    if (targets.length <= 0)\n    {\n      this.getMachineBuilder().removeCustomSymbol(symbol);\n    }\n\n    this.emit(\"userDeleteSymbol\", this.getMachineBuilder(), symbol, targets);\n    this.emit(\"userPostDeleteSymbol\", this.getMachineBuilder(), symbol, targets);\n  }\n\n  renameSymbol(prevSymbol, nextSymbol)\n  {\n    let edge = null;\n    let result = null;\n    const targets = [];\n\n    this.emit(\"userPreRenameSymbol\", this.getMachineBuilder(), nextSymbol, prevSymbol);\n\n    const graph = this.graphController.getGraph();\n    const length = graph.getEdges().length;\n    for(let i = 0; i < length; ++i)\n    {\n      edge = graph.getEdges()[i];\n      let result = edge.getEdgeLabel().replace(prevSymbol, nextSymbol);\n      if (result != edge.getEdgeLabel())\n      {\n        targets.push(edge);\n      }\n      edge.setEdgeLabel(result);\n    }\n\n    if (targets.length <= 0)\n    {\n      this.getMachineBuilder().renameCustomSymbol(prevSymbol, nextSymbol);\n    }\n\n    this.emit(\"userRenameSymbol\", this.getMachineBuilder(), nextSymbol, prevSymbol, targets);\n    this.emit(\"userPostRenameSymbol\", this.getMachineBuilder(), nextSymbol, prevSymbol, targets);\n  }\n\n  getCustomSymbols()\n  {\n    //return Array.from(this._machineBuilder.getMachine().getCustomSymbols());\n    //HACK: this is only to support the old FSABuilder (remove this once finished)\n    return this.getMachineBuilder()._symbols;\n  }\n\n  isCustomSymbol(symbol)\n  {\n    return this._machineBuilder.isCustomSymbol(symbol);\n  }\n\n  addCustomSymbol(symbol)\n  {\n    //this._machineBuilder.getMachine().setCustomSymbol(symbol);\n    //HACK: this is only to support the old FSABuilder (remove this once finished)\n    this._machineBuilder.addCustomSymbol(symbol);\n  }\n\n  clearCustomSymbols()\n  {\n    //this._machineBuilder.getMachine().clearCustomSymbols();\n    //HACK: this is only to support the old FSABuilder (remove this once finished)\n    this.getMachineBuilder()._symbols.length = 0;\n  }\n}\nEventable.mixin(MachineController);\n\nexport default MachineController;\n","import React from 'react';\n\nimport Config from 'config.js';\n\nclass NodeRenderer extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    //TODO: Refer to app.css for comparable colors\n    const node = this.props.node;\n    return <g className=\"graph-node-container\">\n      {/*Outer circle*/}\n      <circle className=\"graph-node\"\n        cx={node.x}\n        cy={node.y}\n        r={Config.NODE_RADIUS}\n\n        fill=\"#FEE781\"\n        stroke=\"#000000\"/>\n\n      {/*Inner circle*/}\n      {node.getNodeAccept() &&\n        <circle className=\"graph-node-inner\"\n          cx={node.x}\n          cy={node.y}\n          r={Config.NODE_RADIUS_INNER}\n          fill=\"none\"\n\n          stroke=\"#000000\"/>}\n\n      //Label\n      <text className=\"graph-node-label\"\n        x={node.x} y={node.y + 4}\n        pointerEvents=\"none\"\n        style={{\n          userSelect: \"none\",\n          fontSize: (1 - Math.min(Math.max(node.getNodeLabel().length - 2, 0) / 6, 0.5)) + \"em\"\n        }}\n        textAnchor=\"middle\">\n        {node.getNodeLabel()}\n      </text>\n    </g>;\n  }\n}\n\nexport default NodeRenderer;\n","import React from 'react';\n\nimport Config from 'config.js';\n\nclass EdgeRenderer extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    const SIXTH_PI = Math.PI / 6;\n\n    let arrowAngle = 0;\n    const edge = this.props.edge;\n    const start = edge.getStartPoint();\n    const end = edge.getEndPoint();\n    const center = edge.getCenterPoint();\n    const label = edge.getEdgeLabel();\n    const quad = edge.getQuadratic();\n    const quadCoords = edge.getQuadraticAsCoords();\n    const edgeDir = edge.getEdgeDirection();\n    const flipLabel = quadCoords.y > 0;\n\n    //Calculate curved lines...\n    let quadLine = null;\n    if (!edge.isQuadratic())\n    {\n      //Straight line\n      arrowAngle = Math.atan2(start.x - end.x, start.y - end.y) + Math.PI;\n      quadLine = \"L \" + end.x + \" \" + end.y;\n    }\n    else\n    {\n      //Quadratic curve\n      //center = (midpoint + the quadratic offset) + the quadratic offset\n      const cx = center.x + quadCoords.x;\n      const cy = center.y + quadCoords.y;\n      arrowAngle = Math.atan2(cx - end.x, cy - end.y) + Math.PI;\n      quadLine = \"Q \" + cx + \" \" + cy + \" \" + end.x + \" \" + end.y;\n    }\n\n    //Draw multiple labels\n    const labels = edge.getEdgeSymbolsFromLabel();\n    let dy = 0;\n\n    const cx = (center && center.x || 0);\n    const cy = (center && center.y || 0);\n\n    return <g className=\"graph-edge-container\">\n      //Draw lines\n      <path className=\"graph-edge\" id={\"edge:\" + edge.getGraphElementID()}\n        d={\n          \"M \" + start.x + \" \" + start.y + \" \" +\n          quadLine + \" \" +\n          \"M \" +\n            (end.x - (Config.ARROW_WIDTH * Math.sin(arrowAngle - SIXTH_PI))) + \" \" +\n            (end.y - (Config.ARROW_WIDTH * Math.cos(arrowAngle - SIXTH_PI))) + \" \" +\n          \"L \" + end.x + \" \" + end.y + \" \" +\n          \"L \" +\n            (end.x - (Config.ARROW_WIDTH * Math.sin(arrowAngle + SIXTH_PI))) + \" \" +\n            (end.y - (Config.ARROW_WIDTH * Math.cos(arrowAngle + SIXTH_PI)))}\n        fill=\"none\"\n\n        stroke=\"#000000\"/>\n\n      {/*Draw labels*/}\n      <g transform={\"translate(\" + (cx) + \",\" + (cy) + \") rotate(\" + (edgeDir * 180 / Math.PI) + \")\"}>\n      { labels.length > 0 && labels.map((str, i) => {\n          const yy = (i + 1) * -15;\n\n          //TODO: ctx.clearRect(xx - cx - 2, yy - 5, (cx * 2) + 4, 10);\n          return <text\n            key={str + \".\" + i}\n            className=\"graph-edge-label\"\n            transform={\"translate(0, \" + yy + \")\" + (flipLabel ? \" scale(-1, -1)\" : \"\")}\n            alignmentBaseline=\"central\"\n            pointerEvents=\"none\"\n            style={{userSelect: \"none\"}}\n            textAnchor=\"middle\">\n            {str}\n          </text>;\n      })}\n      </g>\n    </g>;\n  }\n}\n\nexport default EdgeRenderer;\n","import React from 'react';\n\nimport Node from 'modules/fsa/graph/FSANode.js';\n\nimport Config from 'config.js';\n\nclass InitialMarkerRenderer extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    const node = this.props.node;\n    //node.x + offset marker back to center if not a node (or is a pointer)\n    const x = node.x + (!(node instanceof Node) ? -Config.INITIAL_MARKER_OFFSET_X : 0);\n    const y = node.y;\n    const r = Config.NODE_RADIUS;\n    const d = r * 2;\n    return <g className=\"graph-initial-container\">\n      <path className=\"graph-initial\" d={\n        \"M\" + (x - r) + \" \" + (y) +\n        \" L\" + (x - d) + \" \" + (y - r) +\n        \" L\" + (x - d) + \" \" + (y + r) +\n        \" Z\"}\n        fill=\"none\"\n\n        stroke=\"#000000\"/>\n    </g>;\n  }\n}\n\nexport default InitialMarkerRenderer;\n","import React from 'react';\nimport './FSAGraphRenderer.css';\n\nimport NodeRenderer from './NodeRenderer.js';\nimport EdgeRenderer from './EdgeRenderer.js';\nimport InitialMarkerRenderer from './InitialMarkerRenderer.js';\n\nclass FSAGraphRenderer extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  //Override\n  render()\n  {\n    //Inherits props from parent\n    const currentModule = this.props.currentModule;\n    const inputController = currentModule.getInputController();\n    const graphController = currentModule.getGraphController();\n    const graph = graphController.getGraph();\n\n    return <g>\n      {/* Nodes */}\n      {graph.getNodes().map((e, i) => <NodeRenderer key={e.getGraphElementID() || i} node={e}/>)}\n\n      {/* Edges */}\n      {graph.getEdges().map((e, i) => <EdgeRenderer key={e.getGraphElementID() || i} edge={e}/>)}\n\n      {/* Initial marker and ghost */}\n      { graph.getStartNode() && (inputController.ghostInitialMarker == null ?\n        <InitialMarkerRenderer node={graph.getStartNode()}/> :\n        <InitialMarkerRenderer node={inputController.ghostInitialMarker}/>) }\n    </g>;\n  }\n}\n\nexport default FSAGraphRenderer;\n","import React from 'react';\n\nimport SelectionBoxRenderer from 'content/workspace/renderer/SelectionBoxRenderer.js';\nimport HighlightRenderer from 'content/workspace/renderer/HighlightRenderer.js';\n\nclass FSAGraphOverlayRenderer extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  //Override\n  render()\n  {\n    //Inherits props from parent\n    const parent = this.props.parent;\n    const currentModule = this.props.currentModule;\n\n    const graphController = currentModule.getGraphController();\n    const inputController = currentModule.getInputController();\n    const machineController = currentModule.getMachineController();\n    const tester = currentModule.getTestingManager();\n\n    const graph = graphController.getGraph();\n    const viewport = inputController.getInputAdapter().getViewport();\n    const machineBuilder = machineController.getMachineBuilder();\n    const machineErrors = machineBuilder.getMachineErrors();\n    const machineWarnings = machineBuilder.getMachineWarnings();\n    const picker = inputController.getPicker();\n    const selectionBox = picker.getSelectionBox();\n    const shouldShowErrors = tester.shouldCheckError;\n\n    return <g>\n      {/* Selected elements */}\n      { picker.hasSelection() &&\n        picker.getSelection(graph).map((e, i) =>\n          <HighlightRenderer key={e.getGraphElementID()} className={inputController.isTrashMode() ? \"highlight-error\" : \"highlight-select\"} target={e} type=\"node\"/>) }\n\n      {/* Selection box */}\n      <SelectionBoxRenderer visible={selectionBox.visible}\n        fromX={selectionBox.fromX} fromY={selectionBox.fromY}\n        toX={selectionBox.toX} toY={selectionBox.toY}/>\n\n      {shouldShowErrors &&\n        machineWarnings.map(e => {\n          const target = e['target'];\n          const targetType = e['targetType'];\n          if (!target) return;\n          return <HighlightRenderer key={target.getGraphElementID()} className=\"highlight-warning graph-gui\" target={target} type={targetType} offset={6}/>;\n        })}\n      {shouldShowErrors &&\n        machineErrors.map(e => {\n          const target = e['target'];\n          const targetType = e['targetType'];\n          if (!target) return;\n          return <HighlightRenderer key={target.getGraphElementID()} className=\"highlight-error graph-gui\" target={target} type={targetType} offset={6}/>;\n        })}\n\n      {/* Node test targets */}\n      { tester.testMode.targets.map((e, i) => {\n          return <HighlightRenderer key={e.getGraphElementID()} className=\"highlight-test graph-gui\" target={e} type=\"node\" offset=\"6\"/>;\n        }) }\n\n      {/* Hover markers */}\n      { picker.hasTarget() &&\n        !picker.isTargetInSelection() &&\n        <HighlightRenderer className={inputController.isTrashMode() ? \"highlight-error\" : \"highlight-select\"} target={picker.target} type={picker.targetType}/> }\n    </g>;\n  }\n}\n\nexport default FSAGraphOverlayRenderer;\n","import React from 'react';\n\nclass PlayIcon extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    return <svg className=\"play-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n      <path d=\"M8 5v14l11-7z\"/>\n      <path d=\"M0 0h24v24H0z\" fill=\"none\"/>\n    </svg>;\n  }\n}\n\nexport default PlayIcon;\n","import React from 'react';\n\nclass PauseIcon extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    return <svg className=\"pause-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n      <path d=\"M6 19h4V5H6v14zm8-14v14h4V5h-4z\"/>\n      <path d=\"M0 0h24v24H0z\" fill=\"none\"/>\n    </svg>;\n  }\n}\n\nexport default PauseIcon;\n","import React from 'react';\n\nclass StopIcon extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    return <svg className=\"stop-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n      <path d=\"M0 0h24v24H0z\" fill=\"none\"/>\n      <path d=\"M6 6h12v12H6z\"/>\n    </svg>;\n  }\n}\n\nexport default StopIcon;\n","import React from 'react';\nimport './TestTray.css';\n\nimport IconButton from 'icons/IconButton.js';\nimport PlayIcon from 'icons/PlayIcon.js';\nimport PauseIcon from 'icons/PauseIcon.js';\nimport StopIcon from 'icons/StopIcon.js';\nimport UndoIcon from 'icons/UndoIcon.js';\nimport RedoIcon from 'icons/RedoIcon.js';\n\nconst MAX_STRING_PREV_LENGTH = 2;\nconst MAX_ELLIPSIS_COUNT = 3;\n\nclass TestTray extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    const graphController = this.props.graphController;\n    const tester = this.props.tester;\n    const testList = this.props.tester.inputList;\n    const testMode = this.props.tester.testMode;\n    const testInput = testList.getCurrentInput();\n    const testIndex = testMode.getCurrentTestStringIndex();\n\n    return <div className=\"test-tray-container\">\n      <div className=\"test-tray-input-string-container\">\n      {\n        testInput && testIndex >= 0 &&\n        testInput.value.split('').map((e, i) => {\n          const testOffset = testIndex - i;\n          if (testOffset > MAX_ELLIPSIS_COUNT + MAX_STRING_PREV_LENGTH) return;\n          if (testOffset > MAX_STRING_PREV_LENGTH)\n          {\n            return <span key={e + \".\" + i} className=\"test-tray-input-placeholder\">.</span>;\n          }\n          return <span key={e + \".\" + i}\n            className={\"test-tray-input-char\" +\n            (testIndex == i ? \" active\" : \"\")}>\n            {e}\n            </span>;\n        })\n      }\n      </div>\n      <div className=\"test-tray-control\">\n\n        <IconButton onClick={(e)=>{\n          testMode.onResume();\n        }} disabled={testMode.isRunning()}>\n          <PlayIcon/>\n        </IconButton>\n\n        <IconButton onClick = {(e)=>{\n          testMode.onPause();\n        }} disabled={!testMode.isRunning()}>\n          <PauseIcon/>\n        </IconButton>\n\n        <IconButton onClick = {(e)=>{\n          testMode.onPreviousStep();\n          /*if (testMode.targets.length > 0)\n          {\n            graphController.focusOnNodes(testMode.targets);\n          }*/\n        }} disabled={!testMode.hasPrevStep() || testMode.isSkipping()}>\n          <UndoIcon/>\n        </IconButton>\n\n        <IconButton onClick = {(e)=>{\n          testMode.onNextStep();\n          /*if (testMode.targets.length > 0)\n          {\n            graphController.focusOnNodes(testMode.targets);\n          }*/\n        }} disabled={!tester.testMode.hasNextStep() || testMode.isSkipping()}>\n          <RedoIcon/>\n        </IconButton>\n\n        <IconButton onClick={(e)=>{\n          tester.setStepByStepMode(false);\n        }}>\n          <StopIcon/>\n        </IconButton>\n\n        <div className=\"trash-placeholder\">{/*PLACEHOLDER for TRASH*/}</div>\n      </div>\n    </div>;\n  }\n}\n\nexport default TestTray;\n","import React from 'react';\n\nimport TrashCan from 'content/viewport/TrashCan.js';\nimport TestTray from './TestTray.js';\nimport CursorMode from 'content/viewport/CursorMode.js';\n\nclass ViewportRenderer extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  //Override\n  render()\n  {\n    //Inherits props from parent\n    const parent = this.props.parent;\n    const currentModule = this.props.currentModule;\n    const screen = this.props.screen;\n\n    const inputController = currentModule.getInputController();\n    const graphController = currentModule.getGraphController();\n    const machineController = currentModule.getMachineController();\n    const tester = currentModule.getTestingManager();\n\n    const LabelEditor = currentModule.getLabelEditor();\n\n    return <span>\n    { LabelEditor &&\n      <LabelEditor ref={ref=>graphController.labelEditorElement=ref}\n      inputController={inputController}\n      graphController={graphController}\n      machineController={machineController}\n      screen={screen}/> }\n    {\n      tester.getStepByStepMode() ?\n      <div className=\"anchor-bottom-left\" style={{width: \"100%\"}}>\n        <TestTray tester={tester} graphController={graphController}/>\n      </div>\n      :\n      <span>\n        <div className=\"anchor-bottom-left\" style={{width: \"100%\"}}>\n          <CursorMode inputController={inputController} graphController={graphController}/>\n        </div>\n        <div className=\"anchor-bottom-right\">\n          <TrashCan inputController={inputController} viewport={parent}/>\n        </div>\n      </span>\n    }\n    </span>;\n  }\n}\nexport default ViewportRenderer;\n","class EventHandler\n{\n  constructor(eventLogger, controller, eventName, postEventName)\n  {\n    this.eventLogger = eventLogger;\n    this.controller = controller;\n    this.eventName = eventName;\n    this.postEventName = postEventName || null;\n\n    this.onEvent = this.onEvent.bind(this);\n\n    this.controller.on(this.eventName, this.onEvent);\n  }\n\n  destroy()\n  {\n    this.controller.removeEventListener(this.eventName, this.onEvent);\n  }\n\n  onEvent(...args)\n  {\n    const result = {};\n    result.applyUndo = this.applyUndo.bind(this, result);\n    result.applyRedo = this.applyRedo.bind(this, result);\n\n    result.eventData = this.captureEvent(...args);\n\n    if (this.postEventName)\n    {\n      //Wait for post event to finalize event\n      this.controller.once(this.postEventName, (...args) => {\n        result.postData = this.capturePostEvent(...args);\n\n        this.eventLogger.captureEvent(result);\n      });\n    }\n    else\n    {\n      result.postData = result.eventData;\n\n      //Finalize event right now\n      this.eventLogger.captureEvent(result);\n    }\n  }\n\n  captureEvent(...args)\n  {\n    return {};\n  }\n\n  capturePostEvent(...args)\n  {\n    return {};\n  }\n\n  applyUndo(e)\n  {\n\n  }\n\n  applyRedo(e)\n  {\n\n  }\n}\n\nexport default EventHandler;\n","import EventHandler from './EventHandler.js';\n\nclass GraphEdgeDestinationEventHandler extends EventHandler\n{\n  constructor(eventLogger, graphController)\n  {\n    super(eventLogger, graphController, \"nodeInitial\");\n  }\n\n  //Override\n  captureEvent(graph, nextInitial, prevInitial)\n  {\n    return {\n      graph: graph,\n      nodeID: nextInitial.getGraphElementID(),\n      prevID: prevInitial.getGraphElementID()\n    };\n  }\n\n  //Override - this = event\n  applyUndo(e)\n  {\n    const graph = this.controller.getGraph();\n    const node = graph.getNodeByElementID(e.eventData.nodeID);\n    if (!node) throw new Error(\"Unable to find target in graph\");\n\n    graph.setStartNode(node);\n    this.controller.applyAutoRename();\n  }\n\n  //Override - this = event\n  applyRedo(e)\n  {\n    const graph = this.controller.getGraph();\n    const node = graph.getNodeByElementID(e.eventData.nodeID);\n    if (!node) throw new Error(\"Unable to find target in graph\");\n\n    graph.setStartNode(node);\n    this.controller.applyAutoRename();\n  }\n}\nexport default GraphEdgeDestinationEventHandler;\n","import EventHandler from './EventHandler.js';\n\nclass GraphNodeMoveEventHandler extends EventHandler\n{\n  constructor(eventLogger, graphController)\n  {\n    super(eventLogger, graphController, \"nodeMove\");\n  }\n\n  //Override\n  captureEvent(graph, targetNode, nextX, nextY, prevX, prevY)\n  {\n    return {\n      graph: graph,\n      nodeID: targetNode.getGraphElementID(),\n      nextX: nextX,\n      nextY: nextY,\n      prevX: prevX,\n      prevY: prevY\n    };\n  }\n\n  //Override - this = event\n  applyUndo(e)\n  {\n    const graph = this.controller.getGraph();\n    const node = graph.getNodeByElementID(e.eventData.nodeID);\n    if (!node) throw new Error(\"Unable to find target in graph\");\n\n    node.x = e.eventData.prevX;\n    node.y = e.eventData.prevY;\n  }\n\n  //Override - this = event\n  applyRedo(e)\n  {\n    const graph = this.controller.getGraph();\n    const node = graph.getNodeByElementID(e.eventData.nodeID);\n    if (!node) throw new Error(\"Unable to find target in graph\");\n    \n    node.x = e.eventData.nextX;\n    node.y = e.eventData.nextY;\n  }\n}\nexport default GraphNodeMoveEventHandler;\n","import EventHandler from './EventHandler.js';\n\nclass GraphNodeMoveAllEventHandler extends EventHandler\n{\n  constructor(eventLogger, graphController)\n  {\n    super(eventLogger, graphController, \"nodeMoveAll\");\n  }\n\n  //Override\n  captureEvent(graph, nodes, dx, dy)\n  {\n    return {\n      graph: graph,\n      nodeIDs: nodes.map(e => e.getGraphElementID()),\n      dx: dx,\n      dy: dy\n    };\n  }\n\n  //Override - this = event\n  applyUndo(e)\n  {\n    const graph = this.controller.getGraph();\n    let node = null;\n    for(const nodeID of e.eventData.nodeIDs)\n    {\n      node = graph.getNodeByElementID(nodeID);\n      if (!node) throw new Error(\"Unable to find target in graph\");\n\n      node.x -= e.eventData.dx;\n      node.y -= e.eventData.dy;\n    }\n  }\n\n  //Override - this = event\n  applyRedo(e)\n  {\n    const graph = this.controller.getGraph();\n    let node = null;\n    for(const nodeID of e.eventData.nodeIDs)\n    {\n      node = graph.getNodeByElementID(nodeID);\n      if (!node) throw new Error(\"Unable to find target in graph\");\n\n      node.x += e.eventData.dx;\n      node.y += e.eventData.dy;\n    }\n  }\n}\nexport default GraphNodeMoveAllEventHandler;\n","import EventHandler from './EventHandler.js';\n\nclass GraphEdgeMoveEventHandler extends EventHandler\n{\n  constructor(eventLogger, graphController)\n  {\n    super(eventLogger, graphController, \"edgeMove\");\n  }\n\n  //Override\n  captureEvent(graph, targetEdge, nextQuad, prevQuad)\n  {\n    return {\n      graph: graph,\n      edgeID: targetEdge.getGraphElementID(),\n      nextQuad: Object.assign({}, nextQuad),\n      prevQuad: Object.assign({}, prevQuad)\n    };\n  }\n\n  //Override - this = event\n  applyUndo(e)\n  {\n    const graph = this.controller.getGraph();\n    const edge = graph.getEdgeByElementID(e.eventData.edgeID);\n    if (!edge) throw new Error(\"Unable to find target in graph\");\n\n    edge.setQuadratic(e.eventData.prevQuad.radians, e.eventData.prevQuad.length);\n  }\n\n  //Override - this = event\n  applyRedo(e)\n  {\n    const graph = this.controller.getGraph();\n    const edge = graph.getEdgeByElementID(e.eventData.edgeID);\n    if (!edge) throw new Error(\"Unable to find target in graph\");\n\n    edge.setQuadratic(e.eventData.nextQuad.radians, e.eventData.nextQuad.length);\n  }\n}\nexport default GraphEdgeMoveEventHandler;\n","import EventHandler from './EventHandler.js';\n\nclass GraphEdgeDestinationEventHandler extends EventHandler\n{\n  constructor(eventLogger, graphController)\n  {\n    super(eventLogger, graphController, \"edgeDestination\");\n  }\n\n  //Override\n  captureEvent(graph, targetEdge, nextDestination, prevDestination, prevQuad)\n  {\n    return {\n      graph: graph,\n      edgeID: targetEdge.getGraphElementID(),\n      nextDestination: nextDestination,\n      prevDestination: prevDestination,\n      nextQuad: Object.assign({}, targetEdge.getQuadratic()),\n      prevQuad: Object.assign({}, prevQuad),\n    };\n  }\n\n  //Override - this = event\n  applyUndo(e)\n  {\n    const graph = this.controller.getGraph();\n    const edge = graph.getEdgeByElementID(e.eventData.edgeID);\n    if (!edge) throw new Error(\"Unable to find target in graph\");\n\n    let radians = e.eventData.prevQuad.radians;\n    const length = e.eventData.prevQuad.length;\n\n    edge.changeDestinationNode(e.eventData.prevDestination);\n    //Flip them, since self loops are upside down\n    if (edge.isSelfLoop()) radians = -radians;\n    edge.setQuadratic(radians, length);\n  }\n\n  //Override - this = event\n  applyRedo(e)\n  {\n    const graph = this.controller.getGraph();\n    const edge = graph.getEdgeByElementID(e.eventData.edgeID);\n    if (!edge) throw new Error(\"Unable to find target in graph\");\n\n    let radians = e.eventData.nextQuad.radians;\n    const length = e.eventData.nextQuad.length;\n\n    edge.changeDestinationNode(e.eventData.nextDestination);\n    edge.setQuadratic(radians, length);\n  }\n}\nexport default GraphEdgeDestinationEventHandler;\n","import EventHandler from './EventHandler.js';\n\nclass GraphEdgeLabelEventHandler extends EventHandler\n{\n  constructor(eventLogger, graphController)\n  {\n    super(eventLogger, graphController, \"edgeLabel\");\n  }\n\n  //Override\n  captureEvent(graph, targetEdge, nextLabel, prevLabel)\n  {\n    return {\n      graph: graph,\n      edgeID: targetEdge.getGraphElementID(),\n      nextLabel: nextLabel,\n      prevLabel: prevLabel\n    };\n  }\n\n  //Override - this = event\n  applyUndo(e)\n  {\n    const graph = this.controller.getGraph();\n    const edge = graph.getEdgeByElementID(e.eventData.edgeID);\n    if (!edge) throw new Error(\"Unable to find target in graph\");\n\n    edge.setEdgeLabel(e.eventData.prevLabel);\n  }\n\n  //Override - this = event\n  applyRedo(e)\n  {\n    const graph = this.controller.getGraph();\n    const edge = graph.getEdgeByElementID(e.eventData.edgeID);\n    if (!edge) throw new Error(\"Unable to find target in graph\");\n\n    edge.setEdgeLabel(e.eventData.nextLabel);\n  }\n}\nexport default GraphEdgeLabelEventHandler;\n","import EventHandler from './EventHandler.js';\n\nclass UserCreateNodeEventHandler extends EventHandler\n{\n  constructor(eventLogger, graphController)\n  {\n    super(eventLogger, graphController, \"userPostCreateNode\");\n  }\n\n  //Override\n  captureEvent(graph, node)\n  {\n    return {\n      nodeID: node.getGraphElementID(),\n      x: node.x,\n      y: node.y,\n      accept: node.getNodeAccept(),\n      label: node.getNodeLabel(),\n      custom: node.getNodeCustom()\n    };\n  }\n\n  //Override - this = event\n  applyUndo(e)\n  {\n    const graph = this.controller.getGraph();\n    const node = graph.getNodeByElementID(e.eventData.nodeID);\n    if (!node) throw new Error(\"Unable to find target in graph\");\n\n    graph.deleteNode(node);\n  }\n\n  //Override - this = event\n  applyRedo(e)\n  {\n    const graph = this.controller.getGraph();\n    let node = graph.getNodeByElementID(e.eventData.nodeID);\n    if (!node)\n    {\n      node = graph.createNode(e.postData.x, e.postData.y, e.postData.nodeID);\n    }\n    else\n    {\n      node.x = e.postData.x;\n      node.y = e.postData.y;\n    }\n    node.setNodeLabel(e.postData.label);\n    node.setNodeAccept(e.postData.accept);\n    node.setNodeCustom(e.postData.custom);\n  }\n}\nexport default UserCreateNodeEventHandler;\n","import EventHandler from './EventHandler.js';\n\nclass UserToggleNodeEventHandler extends EventHandler\n{\n  constructor(eventLogger, graphController)\n  {\n    super(eventLogger, graphController, \"userToggleNode\");\n  }\n\n  //Override\n  captureEvent(graph, node, prevAccept)\n  {\n    return {\n      nodeID: node.getGraphElementID(),\n      prevAccept: prevAccept\n    };\n  }\n\n  //Override - this = event\n  applyUndo(e)\n  {\n    const graph = this.controller.getGraph();\n    const node = graph.getNodeByElementID(e.eventData.nodeID);\n    if (!node) throw new Error(\"Unable to find target in graph\");\n\n    node.setNodeAccept(e.eventData.prevAccept);\n  }\n\n  //Override - this = event\n  applyRedo(e)\n  {\n    const graph = this.controller.getGraph();\n    const node = graph.getNodeByElementID(e.eventData.nodeID);\n    if (!node) throw new Error(\"Unable to find target in graph\");\n\n    node.setNodeAccept(!e.eventData.prevAccept);\n  }\n}\nexport default UserToggleNodeEventHandler;\n","import FSAGraph from './FSAGraph.js';\nimport { SYMBOL_SEPARATOR } from './FSAEdge.js';\n\nconst GRAPH_PARSER_VERSION = \"1.0.0\";\n\nexport const JSON = {\n  parse(data, dst=null)\n  {\n    if (!dst) dst = new FSAGraph();\n    else dst.clear();\n\n    const nodeDatas = data['nodes'] || [];\n    const nodeCount = Math.min(nodeDatas.length || 0, data['nodeCount'] || 0);\n    const edgeDatas = data['edges'] || [];\n    const edgeCount = Math.min(edgeDatas.length || 0, data['edgeCount'] || 0);\n    const initialIndex = data['initial'] || 0;\n\n    const nodeIndices = new Map();\n    for(let i = 0; i < nodeCount; ++i)\n    {\n      const nodeData = nodeDatas[i];\n      if (!nodeData) continue;\n\n      //NOTE: Assumes createNode will maintain order\n      const node = dst.createNode(nodeData['x'] || 0, nodeData['y'] || 0, nodeData['id']);\n      node.setNodeLabel(nodeData['label'] || \"\");\n      node.setNodeAccept(nodeData['accept'] || false);\n      node.setNodeCustom(nodeData['custom'] || false);\n\n      nodeIndices.set(i, node);\n    }\n\n    const initialNode = nodeIndices.get(initialIndex);\n    if (initialNode)\n    {\n      dst.setStartNode(initialNode);\n    }\n\n    for(let i = 0; i < edgeCount; ++i)\n    {\n      const edgeData = edgeDatas[i];\n      if (!edgeData) continue;\n      const sourceNode = nodeIndices.get(edgeData['from']) || null;\n      //Cannot create source-less edges\n      if (!sourceNode) continue;\n      const destinationNode = nodeIndices.get(edgeData['to']) || null;\n      //NOTE: Assumes createEdge will maintain order\n      const edge = dst.createEdge(sourceNode, destinationNode, edgeData['id']);\n      const quadData = edgeData['quad'] || {};\n      edge.setEdgeLabel(edgeData['label'] || \"\");\n      edge.setQuadratic(quadData['radians'] || 0, quadData['length'] || 0);\n    }\n\n    return dst;\n  },\n  objectify(graph)\n  {\n    const graphNodes = graph.getNodes() || [];\n    const nodeCount = graphNodes.length || 0;\n    const graphEdges = graph.getEdges() || [];\n    const edgeCount = graphEdges.length || 0;\n    const graphInitial = graph.getStartNode();\n\n    const nodeDatas = new Array(nodeCount);\n    const nodeIndices = new Map();\n    for(let i = 0; i < nodeCount; ++i)\n    {\n      const node = graphNodes[i];\n      if (node)\n      {\n        //NOTE: Assumes node must have an id\n        const elementID = node.getGraphElementID();\n\n        nodeIndices.set(node, i);\n        nodeDatas[i] = {\n          id: elementID,\n          x: node.x || 0, y: node.y || 0,\n          label: node.getNodeLabel() || \"\",\n          accept: node.getNodeAccept() || false,\n          custom: node.getNodeCustom() || false\n        };\n      }\n    }\n\n    const edgeDatas = new Array(edgeCount);\n    for(let i = 0; i < edgeCount; ++i)\n    {\n      const edge = graphEdges[i];\n      if (edge)\n      {\n        //NOTE: Assumes edge must have an id\n        const elementID = edge.getGraphElementID();\n\n        const quad = edge.getQuadratic() || {};\n        const edgeSource = edge.getSourceNode();\n        const edgeDestination = edge.getDestinationNode();\n        const sourceIndex = nodeIndices.has(edgeSource) ? nodeIndices.get(edgeSource) : -1;\n        const destinationIndex = nodeIndices.has(edgeDestination) ? nodeIndices.get(edgeDestination) : -1;\n        edgeDatas[i] = {\n          id: elementID,\n          from: sourceIndex,\n          to: destinationIndex,\n          quad: { radians: quad['radians'] || 0, length: quad['length'] || 0 },\n          label: edge.getEdgeLabel() || \"\"\n        };\n      }\n    }\n\n    const initialIndex = nodeIndices.get(graphInitial) || 0;\n\n    return {\n      nodeCount: nodeCount,\n      nodes: nodeDatas,\n      edgeCount: edgeCount,\n      edges: edgeDatas,\n      initial: initialIndex,\n      _version: GRAPH_PARSER_VERSION\n    };\n  }\n};\n\nexport const XML = {\n  parse(data, dst=NULL)\n  {\n    if (!dst) dst = new FSAGraph();\n    else dst.clear();\n\n    const nodeElements = data.getElementsByTagName('state') || [];\n    const nodeCount = nodeElements.length;\n    const edgeElements = data.getElementsByTagName('transition') || [];\n    const edgeCount = edgeElements.length;\n    let initialIndex = \"0\";\n\n    //Get the nodes...\n    const nodeElementIDs = new Map();\n    for(let i = 0; i < nodeCount; ++i)\n    {\n      const nodeElement = nodeElements[i];\n      if (!nodeElement) continue;\n      const nodeElementID = nodeElement.getAttribute('id');\n      if (!nodeElementID) continue;\n\n      //Get x value\n      let x = 0;\n      const xElements = nodeElement.getElementsByTagName('x');\n      //If no elements exists, we are guaranteed an empty list...\n      if (xElements.length > 0)\n      {\n        const xElement = xElements[0];\n        if (xElement.hasChildNodes())\n        {\n          //hasChildNodes() guarantees at least 1 element\n          const xValue = xElement.childNodes[0];\n          if (xValue)\n          {\n            try\n            {\n              x = parseFloat(xValue.nodeValue) || 0;\n            }\n            catch (e)\n            {\n              x = 0;\n            }\n          }\n        }\n      }\n\n      //Get y value\n      let y = 0;\n      const yElements = nodeElement.getElementsByTagName('y');\n      //If no elements exists, we are guaranteed an empty list...\n      if (yElements.length > 0)\n      {\n        const yElement = yElements[0];\n        if (yElement.hasChildNodes())\n        {\n          //hasChildNodes() guarantees at least 1 element\n          const yValue = yElement.childNodes[0];\n          if (yValue)\n          {\n            try\n            {\n              y = parseFloat(yValue.nodeValue) || 0;\n            }\n            catch (e)\n            {\n              y = 0;\n            }\n          }\n        }\n      }\n\n      //Get initial flag\n      const initialElements = nodeElement.getElementsByTagName('initial');\n      //If no elements exists, we are guaranteed an empty list...\n      const initial = initialElements.length > 0;\n\n      //Get final flag\n      const finalElements = nodeElement.getElementsByTagName('final');\n      //If no elements exists, we are guaranteed an empty list...\n      const final = finalElements.length > 0;\n\n      //NOTE: Assumes createNode will maintain order\n      const node = dst.createNode(x, y);\n      node.setNodeLabel(nodeElement.getAttribute('name') || \"\");\n      node.setNodeAccept(final);\n\n      if (initial) initialIndex = nodeElementID;\n      nodeElementIDs.set(nodeElementID, node);\n    }\n\n    //Set the initial node...\n    const initialNode = nodeElementIDs.get(initialIndex);\n    if (initialNode)\n    {\n      dst.setStartNode(initialNode);\n    }\n\n    //Readjust the center of graph...\n    const boundingRect = dst.getBoundingRect();\n    const minX = boundingRect.minX;\n    const minY = boundingRect.minY;\n    const width = boundingRect.width;\n    const height = boundingRect.height;\n    const graphNodes = dst.getNodes();\n    for(let i = 0, len = graphNodes.length; i < len; ++i)\n    {\n      graphNodes[i].x -= minX + width / 2;\n      graphNodes[i].y -= minY + height / 2;\n    }\n\n    //Get the transitions...\n    const transitionMapping = new Map();\n    for(let i = 0; i < edgeCount; ++i)\n    {\n      const edgeElement = edgeElements[i];\n      if (!edgeElement) continue;\n\n      //Get from value\n      let sourceID = null;\n      const fromElements = edgeElement.getElementsByTagName('from');\n      //If no elements exists, we are guaranteed an empty list...\n      if (fromElements.length > 0)\n      {\n        const fromElement = fromElements[0];\n        if (fromElement.hasChildNodes())\n        {\n          //hasChildNodes() guarantees at least 1 element\n          const fromValue = fromElement.childNodes[0];\n          if (fromValue)\n          {\n            sourceID = fromValue.nodeValue;\n          }\n        }\n      }\n\n      //Cannot create source-less edges\n      if (!nodeElementIDs.has(sourceID)) continue;\n\n      //Get to value\n      let destinationID = \"\";\n      const toElements = edgeElement.getElementsByTagName('to');\n      //If no elements exists, we are guaranteed an empty list...\n      if (toElements.length > 0)\n      {\n        const toElement = toElements[0];\n        if (toElement.hasChildNodes())\n        {\n          //hasChildNodes() guarantees at least 1 element\n          const toValue = toElement.childNodes[0];\n          if (toValue)\n          {\n            destinationID = toValue.nodeValue || \"\";\n          }\n        }\n      }\n\n      //Get read value\n      let symbol = \"\";\n      const readElements = edgeElement.getElementsByTagName('read');\n      //If no elements exists, we are guaranteed an empty list...\n      if (readElements.length > 0)\n      {\n        const readElement = readElements[0];\n        if (readElement.hasChildNodes())\n        {\n          //hasChildNodes() guarantees at least 1 element\n          const readValue = readElement.childNodes[0];\n          if (readValue)\n          {\n            symbol = readValue.nodeValue || \"\";\n          }\n        }\n      }\n\n      const transitionID = sourceID + \"\\n\" + destinationID;\n      let symbols;\n      if (transitionMapping.has(transitionID))\n      {\n        symbols = transitionMapping.get(transitionID);\n      }\n      else\n      {\n        symbols = [];\n        transitionMapping.set(transitionID, symbols);\n      }\n      symbols.push(symbol);\n    }\n\n    for(const transitionKey of transitionMapping.keys())\n    {\n      const key = transitionKey.split(\"\\n\");\n      if (key.length !== 2) continue;\n\n      const symbols = transitionMapping.get(transitionKey);\n      const label = symbols.join(SYMBOL_SEPARATOR);\n      //Should never be null, since it was checked before...\n      const sourceNode = nodeElementIDs.get(key[0]);\n      const destinationNode = nodeElementIDs.get(key[1]);\n\n      //NOTE: Assumes createEdge will maintain order\n      const edge = dst.createEdge(sourceNode, destinationNode);\n      edge.setEdgeLabel(label);\n    }\n\n    return dst;\n  },\n  objectify(graph)\n  {\n    const graphNodes = graph.getNodes() || [];\n    const nodeCount = graphNodes.length || 0;\n    const graphEdges = graph.getEdges() || [];\n    const edgeCount = graphEdges.length || 0;\n    const graphInitial = graph.getStartNode();\n\n    const header = \"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\" standalone=\\\"no\\\"?>\" +\n      \"<!--Created with flap.js \" + GRAPH_PARSER_VERSION + \"-->\" +\n      \"<structure></structure>\";\n    const parser = new DOMParser();\n    const doc = parser.parseFromString(header, \"application/xml\");\n    const structure = doc.getElementsByTagName(\"structure\")[0];\n\n    const type = doc.createElement(\"type\");\n    type.innerHTML = \"fa\"; //finite automata\n    structure.appendChild(type);\n\n    const automaton = doc.createElement(\"automaton\");\n    structure.appendChild(automaton);\n\n    const nodeIndices = new Map();\n    for(let i = 0; i < nodeCount; ++i)\n    {\n      const node = graphNodes[i];\n      nodeIndices.set(node, i);\n\n      //state tag\n      const state = doc.createElement(\"state\");\n      state.id = \"\" + i;\n      state.setAttribute(\"name\", node.getNodeLabel());\n      automaton.appendChild(state);\n\n      //x tag\n      const x = doc.createElement(\"x\");\n      x.innerHTML = \"\" + (node.x || 0);\n      state.appendChild(x);\n\n      //y tag\n      const y = doc.createElement(\"y\");\n      y.innerHTML = \"\" + (node.y || 0);\n      state.appendChild(y);\n\n      //initial tag\n      if (graphInitial === node)\n      {\n        state.appendChild(doc.createElement(\"initial\"));\n      }\n\n      //final tag\n      if (node.getNodeAccept())\n      {\n        state.appendChild(doc.createElement(\"final\"));\n      }\n    }\n\n    for(let edge of graphEdges)\n    {\n      const symbols = edge.getEdgeSymbolsFromLabel();\n      for(let symbol of symbols)\n      {\n        //transition tag\n        const transition = doc.createElement(\"transition\");\n        automaton.appendChild(transition);\n\n        //from tag\n        const from = doc.createElement(\"from\");\n        from.innerHTML = \"\" + (nodeIndices.get(edge.getSourceNode()) || 0);\n        transition.appendChild(from);\n\n        //to tag\n        const to = doc.createElement(\"to\");\n        to.innerHTML = \"\" + (nodeIndices.get(edge.getDestinationNode()) || 0);\n        transition.appendChild(to);\n\n        //read tag\n        const read = doc.createElement(\"read\");\n        read.innerHTML = \"\" + (symbol || \"\");\n        transition.appendChild(read);\n      }\n    }\n\n    return doc;\n  }\n};\n","import EventHandler from './EventHandler.js';\n\nimport * as FSAGraphParser from 'modules/fsa/graph/FSAGraphParser.js';\n\nclass UserDeleteNodesEventHandler extends EventHandler\n{\n  constructor(eventLogger, graphController)\n  {\n    super(eventLogger, graphController, \"userPreDeleteNodes\", \"userPostDeleteNodes\");\n  }\n\n  //Override\n  captureEvent(graph, node, targetNodes, prevX, prevY)\n  {\n    const targets = [];\n    for(const target of targetNodes)\n    {\n      targets.push(target.getGraphElementID());\n    }\n    const dx = node.x - prevX;\n    const dy = node.y - prevY;\n\n    return {\n      graphData: FSAGraphParser.JSON.objectify(graph),\n      targets: targets,\n      dx: dx,\n      dy: dy\n    };\n  }\n\n  //Override\n  capturePostEvent(graph, node, targetNodes, prevX, prevY)\n  {\n    return {\n      graphData: FSAGraphParser.JSON.objectify(graph)\n    };\n  }\n\n  //Override - this = event\n  applyUndo(e)\n  {\n    const graph = this.controller.getGraph();\n    FSAGraphParser.JSON.parse(e.eventData.graphData, this.controller.getGraph());\n    for(const targetID of e.eventData.targets)\n    {\n      const node = graph.getNodeByElementID(targetID);\n      if (!node) throw new Error(\"Unable to find target in graph\");\n\n      node.x -= e.eventData.dx;\n      node.y -= e.eventData.dy;\n    }\n  }\n\n  //Override - this = event\n  applyRedo(e)\n  {\n    FSAGraphParser.JSON.parse(e.postData.graphData, this.controller.getGraph());\n  }\n}\nexport default UserDeleteNodesEventHandler;\n","import EventHandler from './EventHandler.js';\n\nclass UserRenameNodeEventHandler extends EventHandler\n{\n  constructor(eventLogger, graphController)\n  {\n    super(eventLogger, graphController, \"userRenameNode\");\n  }\n\n  //Override\n  captureEvent(graph, node, nextLabel, prevLabel, isPrevCustom)\n  {\n    return {\n      node: node,\n      nodeID: node.getGraphElementID(),\n      nextLabel: nextLabel,\n      prevLabel: prevLabel,\n      prevCustom: isPrevCustom\n    };\n  }\n\n  //Override - this = event\n  applyUndo(e)\n  {\n    const graph = this.controller.getGraph();\n    const node = graph.getNodeByElementID(e.eventData.nodeID);\n    if (!node) throw new Error(\"Unable to find target in graph\");\n\n    node.setNodeLabel(e.eventData.prevLabel);\n    node.setNodeCustom(e.eventData.prevCustom);\n  }\n\n  //Override - this = event\n  applyRedo(e)\n  {\n    const graph = this.controller.getGraph();\n    const node = graph.getNodeByElementID(e.eventData.nodeID);\n    if (!node) throw new Error(\"Unable to find target in graph\");\n\n    node.setNodeLabel(e.eventData.nextLabel);\n    node.setNodeCustom(true);\n  }\n}\nexport default UserRenameNodeEventHandler;\n","import EventHandler from './EventHandler.js';\n\nclass UserCreateEdgeEventHandler extends EventHandler\n{\n  constructor(eventLogger, graphController)\n  {\n    super(eventLogger, graphController, \"userPostCreateEdge\");\n  }\n\n  //Override\n  captureEvent(graph, edge)\n  {\n    const edgeQuad = edge.getQuadratic();\n    return {\n      edge: edge,\n      edgeID: edge.getGraphElementID(),\n      fromID: edge.getSourceNode().getGraphElementID(),\n      toID: edge.getDestinationNode() ? edge.getDestinationNode().getGraphElementID() : null,\n      label: edge.getEdgeLabel(),\n      quad: { radians: edgeQuad.radians, length: edgeQuad.length }\n    };\n  }\n\n  //Override - this = event\n  applyUndo(e)\n  {\n    //TODO: when formatting edges change an edge different than this one, it does not revert them.\n    const graph = this.controller.getGraph();\n    const edge = graph.getEdgeByElementID(e.eventData.edgeID);\n    if (!edge) throw new Error(\"Unable to find target in graph\");\n\n    graph.deleteEdge(edge);\n  }\n\n  //Override - this = event\n  applyRedo(e)\n  {\n    const graph = this.controller.getGraph();\n    let edge = graph.getEdgeByElementID(e.postData.edgeID);\n\n    const from = graph.getNodeByElementID(e.postData.fromID);\n    if (!from) throw new Error(\"Trying to create a sourceless edge\");\n    const to = graph.getNodeByElementID(e.postData.toID) || null;\n\n    if (!edge)\n    {\n      edge = graph.createEdge(from, to, e.postData.edgeID);\n    }\n    else\n    {\n      edge.setSourceNode(from);\n      edge.changeDestinationNode(to);\n    }\n\n    edge.setEdgeLabel(e.postData.label);\n    edge.setQuadratic(e.postData.quad.radians, e.postData.quad.length);\n  }\n}\nexport default UserCreateEdgeEventHandler;\n","import EventHandler from './EventHandler.js';\n\nclass UserDeleteEdgeEventHandler extends EventHandler\n{\n  constructor(eventLogger, graphController)\n  {\n    super(eventLogger, graphController, \"userPreDeleteEdge\");\n  }\n\n  //Override\n  captureEvent(graph, edge, prevTo, prevQuad)\n  {\n    return {\n      edge: edge,\n      edgeID: edge.getGraphElementID(),\n      fromID: edge.getSourceNode().getGraphElementID(),\n      toID: prevTo ? prevTo.getGraphElementID() : null,\n      label: edge.getEdgeLabel(),\n      quad: Object.assign({}, prevQuad)\n    };\n  }\n\n  //Override - this = event\n  applyUndo(e)\n  {\n    const graph = this.controller.getGraph();\n    let edge = graph.getEdgeByElementID(e.eventData.edgeID);\n\n    const from = graph.getNodeByElementID(e.eventData.fromID);\n    if (!from) throw new Error(\"Trying to create a sourceless edge\");\n    const to = graph.getNodeByElementID(e.eventData.toID) || null;\n\n    if (!edge)\n    {\n      edge = graph.createEdge(from, to, e.eventData.edgeID);\n    }\n    else\n    {\n      edge.setSourceNode(from);\n      edge.changeDestinationNode(to);\n    }\n\n    edge.setEdgeLabel(e.eventData.label);\n    edge.setQuadratic(e.eventData.quad.radians, e.eventData.quad.length);\n  }\n\n  //Override - this = event\n  applyRedo(e)\n  {\n    const graph = this.controller.getGraph();\n    const edge = graph.getEdgeByElementID(e.eventData.edgeID);\n    if (!edge) throw new Error(\"Unable to find target in graph\");\n\n    graph.deleteEdge(edge);\n  }\n}\nexport default UserDeleteEdgeEventHandler;\n","import EventHandler from './EventHandler.js';\n\nimport * as FSAGraphParser from 'modules/fsa/graph/FSAGraphParser.js';\n\nclass UserImportGraphEventHandler extends EventHandler\n{\n  constructor(eventLogger, graphController, machineController)\n  {\n    super(eventLogger, graphController, \"userPreImportGraph\", \"userPostImportGraph\");\n\n    this.machineController = machineController;\n  }\n\n  //Override\n  captureEvent(graph)\n  {\n    return {\n      graphName: this.machineController.getMachineName(),\n      graphData: FSAGraphParser.JSON.objectify(graph)\n    };\n  }\n\n  //Override\n  capturePostEvent(graph)\n  {\n    return {\n      graphName: this.machineController.getMachineName(),\n      graphData: FSAGraphParser.JSON.objectify(graph)\n    };\n  }\n\n  //Override - this = event\n  applyUndo(e)\n  {\n    FSAGraphParser.JSON.parse(e.eventData.graphData, this.controller.getGraph());\n\n    this.machineController.setMachineName(e.eventData.graphName);\n  }\n\n  //Override - this = event\n  applyRedo(e)\n  {\n    FSAGraphParser.JSON.parse(e.postData.graphData, this.controller.getGraph());\n\n    this.machineController.setMachineName(e.postData.graphName);\n  }\n}\nexport default UserImportGraphEventHandler;\n","import EventHandler from './EventHandler.js';\n\nimport * as FSAGraphParser from 'modules/fsa/graph/FSAGraphParser.js';\n\nclass SafeGraphEventHandler extends EventHandler\n{\n  constructor(eventLogger, graphController, eventName, postEventName)\n  {\n    super(eventLogger, graphController, eventName, postEventName);\n  }\n\n  //Override\n  captureEvent(graph)\n  {\n    return {\n      graphData: FSAGraphParser.JSON.objectify(graph)\n    };\n  }\n\n  //Override\n  capturePostEvent(graph)\n  {\n    return {\n      graphData: FSAGraphParser.JSON.objectify(graph)\n    };\n  }\n\n  //Override - this = event\n  applyUndo(e)\n  {\n    FSAGraphParser.JSON.parse(e.eventData.graphData, this.controller.getGraph());\n  }\n\n  //Override - this = event\n  applyRedo(e)\n  {\n    FSAGraphParser.JSON.parse(e.postData.graphData, this.controller.getGraph());\n  }\n}\nexport default SafeGraphEventHandler;\n","import EventHandler from './EventHandler.js';\n\nclass UserChangeMachineEventHandler extends EventHandler\n{\n  constructor(eventLogger, machineController)\n  {\n    super(eventLogger, machineController, \"userChangeMachine\");\n  }\n\n  //Override\n  captureEvent(machineBuilder, nextMachineType, prevMachineType)\n  {\n    return {\n      prevType: prevMachineType,\n      nextType: nextMachineType\n    };\n  }\n\n  //Override - this = event\n  applyUndo(e)\n  {\n    this.controller.setMachineType(e.eventData.prevType);\n  }\n\n  //Override - this = event\n  applyRedo(e)\n  {\n    this.controller.setMachineType(e.postData.nextType);\n  }\n}\nexport default UserChangeMachineEventHandler;\n","import EventHandler from './EventHandler.js';\n\nimport * as FSAGraphParser from 'modules/fsa/graph/FSAGraphParser.js';\n\nclass UserConvertMachineEventHandler extends EventHandler\n{\n  constructor(eventLogger, machineController, graphController)\n  {\n    super(eventLogger, machineController, \"userPreConvertMachine\", \"userPostConvertMachine\");\n\n    this.graphController = graphController;\n  }\n\n  //Override\n  captureEvent(machineBuilder, nextMachineType, prevMachineType)\n  {\n    const graph = this.graphController.getGraph();\n\n    return {\n      graphData: FSAGraphParser.JSON.objectify(graph),\n      prevType: prevMachineType\n    };\n  }\n\n  //Override\n  capturePostEvent(machineBuilder, nextMachineType, prevMachineType)\n  {\n    const graph = this.graphController.getGraph();\n\n    return {\n      graphData: FSAGraphParser.JSON.objectify(graph),\n      nextType: nextMachineType\n    };\n  }\n\n  //Override - this = event\n  applyUndo(e)\n  {\n    FSAGraphParser.JSON.parse(e.eventData.graphData, this.graphController.getGraph());\n    this.controller.setMachineType(e.eventData.prevType);\n  }\n\n  //Override - this = event\n  applyRedo(e)\n  {\n    FSAGraphParser.JSON.parse(e.postData.graphData, this.graphController.getGraph());\n    this.controller.setMachineType(e.postData.nextType);\n  }\n}\nexport default UserConvertMachineEventHandler;\n","import EventHandler from './EventHandler.js';\n\nclass UserRenameMachineEventHandler extends EventHandler\n{\n  constructor(eventLogger, machineController)\n  {\n    super(eventLogger, machineController, \"userRenameMachine\");\n  }\n\n  //Override\n  captureEvent(machineBuilder, nextMachineName, prevMachineName)\n  {\n    return {\n      prevName: prevMachineName,\n      nextName: nextMachineName\n    };\n  }\n\n  //Override - this = event\n  applyUndo(e)\n  {\n    this.controller.setMachineName(e.eventData.prevName);\n  }\n\n  //Override - this = event\n  applyRedo(e)\n  {\n    this.controller.setMachineName(e.postData.nextName);\n  }\n}\nexport default UserRenameMachineEventHandler;\n","import EventHandler from './EventHandler.js';\n\nimport * as FSAGraphParser from 'modules/fsa/graph/FSAGraphParser.js';\n\nclass UserRenameSymbolEventHandler extends EventHandler\n{\n  constructor(eventLogger, machineController, graphController)\n  {\n    super(eventLogger, machineController, \"userPreRenameSymbol\", \"userPostRenameSymbol\");\n\n    this.graphController = graphController;\n  }\n\n  //Override\n  captureEvent(machineBuilder, symbol, prevSymbol)\n  {\n    const graph = this.graphController.getGraph();\n    return {\n      graphData: FSAGraphParser.JSON.objectify(graph),\n      symbol: symbol,\n      prevSymbol: prevSymbol\n    };\n  }\n\n  //Override\n  capturePostEvent(machineBuilder, symbol, prevSymbol, targets)\n  {\n    const graph = this.graphController.getGraph();\n    const targetIDs = [];\n\n    for(const target of targets)\n    {\n      targetIDs.push(target.getGraphElementID());\n    }\n\n    return {\n      graphData: FSAGraphParser.JSON.objectify(graph),\n      symbol: symbol,\n      prevSymbol: prevSymbol,\n      targets: targetIDs\n    };\n  }\n\n  //Override - this = event\n  applyUndo(e)\n  {\n    //TODO: restore machine custom alphabet\n    FSAGraphParser.JSON.parse(e.eventData.graphData, this.graphController.getGraph());\n  }\n\n  //Override - this = event\n  applyRedo(e)\n  {\n    //TODO: restore machine custom alphabet\n    FSAGraphParser.JSON.parse(e.postData.graphData, this.graphController.getGraph());\n  }\n}\nexport default UserRenameSymbolEventHandler;\n","import EventHandler from './EventHandler.js';\n\nimport * as FSAGraphParser from 'modules/fsa/graph/FSAGraphParser.js';\n\nclass UserDeleteSymbolEventHandler extends EventHandler\n{\n  constructor(eventLogger, machineController, graphController)\n  {\n    super(eventLogger, machineController, \"userPreDeleteSymbol\", \"userPostDeleteSymbol\");\n\n    this.graphController = graphController;\n  }\n\n  //Override\n  captureEvent(machineBuilder, symbol)\n  {\n    const graph = this.graphController.getGraph();\n    return {\n      graphData: FSAGraphParser.JSON.objectify(graph),\n      symbol: symbol\n    };\n  }\n\n  //Override\n  capturePostEvent(machineBuilder, symbol, targets)\n  {\n    const graph = this.graphController.getGraph();\n    const targetIDs = [];\n\n    for(const target of targets)\n    {\n      targetIDs.push(target.getGraphElementID());\n    }\n\n    return {\n      graphData: FSAGraphParser.JSON.objectify(graph),\n      symbol: symbol,\n      targets: targetIDs\n    };\n  }\n\n  //Override - this = event\n  applyUndo(e)\n  {\n    //TODO: restore machine custom alphabet\n    FSAGraphParser.JSON.parse(e.eventData.graphData, this.graphController.getGraph());\n  }\n\n  //Override - this = event\n  applyRedo(e)\n  {\n    //TODO: restore machine custom alphabet\n    FSAGraphParser.JSON.parse(e.postData.graphData, this.graphController.getGraph());\n  }\n}\nexport default UserDeleteSymbolEventHandler;\n","import GraphNodeInitialEventHandler from './controller/events/GraphNodeInitialEventHandler.js';\nimport GraphNodeMoveEventHandler from './controller/events/GraphNodeMoveEventHandler.js';\nimport GraphNodeMoveAllEventHandler from './controller/events/GraphNodeMoveAllEventHandler.js';\nimport GraphEdgeMoveEventHandler from './controller/events/GraphEdgeMoveEventHandler.js';\nimport GraphEdgeDestinationEventHandler from './controller/events/GraphEdgeDestinationEventHandler.js';\nimport GraphEdgeLabelEventHandler from './controller/events/GraphEdgeLabelEventHandler.js';\n\nimport UserCreateNodeEventHandler from './controller/events/UserCreateNodeEventHandler.js';\nimport UserToggleNodeEventHandler from './controller/events/UserToggleNodeEventHandler.js';\nimport UserDeleteNodesEventHandler from './controller/events/UserDeleteNodesEventHandler.js';\nimport UserRenameNodeEventHandler from './controller/events/UserRenameNodeEventHandler.js';\n\nimport UserCreateEdgeEventHandler from './controller/events/UserCreateEdgeEventHandler.js';\nimport UserDeleteEdgeEventHandler from './controller/events/UserDeleteEdgeEventHandler.js';\nimport UserImportGraphEventHandler from './controller/events/UserImportGraphEventHandler.js';\nimport SafeGraphEventHandler from './controller/events/SafeGraphEventHandler.js';\n\nimport UserChangeMachineEventHandler from './controller/events/UserChangeMachineEventHandler.js';\nimport UserConvertMachineEventHandler from './controller/events/UserConvertMachineEventHandler.js';\nimport UserRenameMachineEventHandler from './controller/events/UserRenameMachineEventHandler.js';\nimport UserRenameSymbolEventHandler from './controller/events/UserRenameSymbolEventHandler.js';\nimport UserDeleteSymbolEventHandler from './controller/events/UserDeleteSymbolEventHandler.js';\n\nclass EventManager\n{\n  constructor(undoManager)\n  {\n    this.graphController = null;\n    this.machineController = null;\n\n    this.eventHandlers = [];\n\n    this.undoManager = undoManager;\n  }\n\n  initialize(module)\n  {\n    this.graphController = module.getGraphController();\n    this.machineController = module.getMachineController();\n\n    const graph = this.graphController.getGraph();\n    const events = this.undoManager;\n\n    this.eventHandlers.push(new GraphNodeMoveEventHandler(events, this.graphController));\n    this.eventHandlers.push(new GraphNodeMoveAllEventHandler(events, this.graphController));\n    this.eventHandlers.push(new GraphEdgeMoveEventHandler(events, this.graphController));\n    this.eventHandlers.push(new GraphEdgeDestinationEventHandler(events, this.graphController));\n    this.eventHandlers.push(new GraphNodeInitialEventHandler(events, this.graphController));\n    this.eventHandlers.push(new GraphEdgeLabelEventHandler(events, this.graphController));\n\n    this.eventHandlers.push(new UserCreateNodeEventHandler(events, this.graphController));\n    this.eventHandlers.push(new UserRenameNodeEventHandler(events, this.graphController));\n    this.eventHandlers.push(new UserToggleNodeEventHandler(events, this.graphController));\n    this.eventHandlers.push(new UserDeleteNodesEventHandler(events, this.graphController));\n\n    this.eventHandlers.push(new UserCreateEdgeEventHandler(events, this.graphController));\n    this.eventHandlers.push(new UserDeleteEdgeEventHandler(events, this.graphController));\n\n    this.eventHandlers.push(new UserImportGraphEventHandler(events, this.graphController, this.machineController));\n    this.eventHandlers.push(new SafeGraphEventHandler(events, this.graphController, \"userPreChangeLayout\", \"userPostChangeLayout\"));\n\n    this.eventHandlers.push(new UserChangeMachineEventHandler(events, this.machineController));\n    this.eventHandlers.push(new UserConvertMachineEventHandler(events, this.machineController, this.graphController));\n    this.eventHandlers.push(new UserRenameMachineEventHandler(events, this.machineController));\n    this.eventHandlers.push(new UserRenameSymbolEventHandler(events, this.machineController, this.graphController));\n    this.eventHandlers.push(new UserDeleteSymbolEventHandler(events, this.machineController, this.graphController));\n  }\n\n  destroy()\n  {\n    for(const handler of this.eventHandlers)\n    {\n      handler.destroy();\n    }\n\n    //TODO: Remove all event listeners...\n    this.graphController.clearEventListeners();\n  }\n}\n\nexport default EventManager;\n","import React from 'react';\nimport './LabelEditor.css';\n\nimport Config from 'config.js';\nimport { SYMBOL_SEPARATOR, EMPTY_CHAR } from 'modules/fsa/graph/FSAEdge.js';\n\nimport FormattedInput from 'system/formattedinput/FormattedInput.js';\n\n//TODO: This is equivalent to 4em for toolbar height\nconst LABEL_OFFSET_Y = -64;\nconst EDITOR_OFFSET_Y = -36;\nconst DELETE_KEY = 8;\nconst DELETE_FORWARD_KEY = 46;\n\nconst RECOMMENDED_SYMBOLS = [\"0\", \"1\"];\nconst DEFAULT_SYMBOLS = [EMPTY_CHAR];\nconst DELETE_ON_EMPTY = true;\n\nclass LabelEditor extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.parentElement = null;\n    this.inputElement = null;\n\n    //HACK: this is so if the click is focused back to the label editor, then it will NOT close\n    this._timer = null;\n\n    this.state = {\n      target: null,\n      callback: null\n    };\n\n    this.onContextMenu = this.onContextMenu.bind(this);\n    this.onFormat = this.onFormat.bind(this);\n    this.onSubmit = this.onSubmit.bind(this);\n  }\n\n  openEditor(targetEdge, defaultText=null, replace=true, callback=null)\n  {\n    //If not yet initilized, ignore any editor access\n    if (!this.inputElement || !this.parentElement)\n    {\n      throw new Error(\"Trying to open editor that has not yet mounted\");\n    }\n\n    this.setState((prev, props) => {\n      return {\n        target: targetEdge,\n        callback: callback\n      };\n    });\n\n    const edgeLabel = targetEdge.getEdgeLabel();\n    this.inputElement.resetValue(edgeLabel, () => {\n      if (defaultText) this.inputElement.setValue(defaultText);\n\n      this.parentElement.focus();\n      this.inputElement.focus(replace);\n    });\n  }\n\n  closeEditor(saveOnExit=false)\n  {\n    //If not yet initilized, ignore any editor access\n    if (!this.inputElement || !this.parentElement)\n    {\n      throw new Error(\"Trying to open editor that has not yet mounted\");\n    }\n\n    //Save data\n    if (this.state.target !== null)\n    {\n      if (saveOnExit)\n      {\n        let value = this.inputElement.value;\n        this.state.target.setEdgeLabel(value);\n      }\n      else\n      {\n        if (!this.state.target.getEdgeLabel())\n        {\n          //Make sure its empty (and let edge handle default labels)\n          this.state.target.setEdgeLabel(null);\n\n          //Delete it since it is not a valid edge\n          if (DELETE_ON_EMPTY)\n          {\n            this.props.graphController.getGraph().deleteEdge(this.state.target);\n          }\n        }\n      }\n\n      this.setState({target: null});\n\n      if (this.state.callback) this.state.callback();\n    }\n\n    //Reset label editor\n    this.inputElement.blur();\n  }\n\n  hasFocus()\n  {\n    return this.inputElement.hasFocus();\n  }\n\n  isEditorOpen()\n  {\n    return this.state.target !== null;\n  }\n\n  onContextMenu(e)\n  {\n    e.preventDefault();\n    e.stopPropagation();\n  }\n\n  appendSymbol(symbol)\n  {\n    this.inputElement.appendValue(symbol, SYMBOL_SEPARATOR);\n    this.inputElement.focus(false);\n  }\n\n  onSubmit(newValue, prevValue)\n  {\n    //If the value has changed or the value remained empty...\n    if (newValue !== prevValue)\n    {\n      //this.closeEditor(true);\n    }\n    else\n    {\n      //TODO: This was commented out for some reason...\n      //Will close due to timer...\n      this.closeEditor(false);\n    }\n  }\n\n  onFormat(value)\n  {\n    return this.props.graphController.getGraphLabeler().getEdgeLabelFormatter().call(null, value);\n  }\n\n  render()\n  {\n    const inputController = this.props.inputController;\n    const viewport = inputController.getInputAdapter().getViewport();\n    const graphController = this.props.graphController;//This is used in closeEditor()\n    const machineController = this.props.machineController;//This is also used in callbacks\n    const screen = this.props.screen;\n\n    const targetStyle = {\n      visibility: \"hidden\"\n    };\n\n    const target = this.state.target;\n\n    if (target)\n    {\n      targetStyle.visibility = \"visible\";\n\n      //Assumes target is an instance of Edge\n      const center = target.getCenterPoint();\n      const screenPos = transformViewToScreen(screen,\n        center.x + viewport.getOffsetX(),\n        center.y + viewport.getOffsetY());\n      const x = screenPos.x;\n      const y = screenPos.y + LABEL_OFFSET_Y + EDITOR_OFFSET_Y;\n      const offsetX = -(this.parentElement.offsetWidth / 2);\n      const offsetY = -(this.parentElement.offsetHeight / 2);\n\n      targetStyle.top = (y + offsetY) + \"px\";\n      targetStyle.left = (x + offsetX) + \"px\";\n    }\n\n    const usedAlphabet = machineController.getAlphabet();\n\n    return <div className=\"bubble\" id=\"label-editor\" ref={ref=>this.parentElement=ref}\n      tabIndex={\"0\"/*This is to allow div's to focus/blur*/}\n      style={targetStyle}\n      onContextMenu={this.onContextMenu}\n      onFocus={(e)=>{\n        //HACK: delete the timer that will exit labelEditor\n        clearTimeout(this._timer);\n      }}\n      onBlur={(e)=>{\n        //HACK: start the timer that will exit labelEditor if not return focus\n        this._timer = setTimeout(() => this.closeEditor(true), 10);\n      }}>\n      <FormattedInput className=\"label-editor-input\" ref={ref=>this.inputElement=ref}\n        formatter={this.onFormat}\n        onSubmit={this.onSubmit}\n        captureOnExit={\"none\"}/>\n      <div className=\"label-editor-tray\">\n        {\n          usedAlphabet &&\n          <span className=\"label-editor-tray-used\">\n            {\n              usedAlphabet.map((e, i) => {\n                if (e.length < 1) return null;\n                return <button key={i} onClick={ev=>this.appendSymbol(e)}>{e}</button>\n              })\n            }\n          </span>\n        }\n        <span className=\"label-editor-tray-default\">\n          {\n            usedAlphabet &&\n            usedAlphabet.length <= 1 &&\n            RECOMMENDED_SYMBOLS.map((e, i) => {\n              return <button key={i} onClick={ev=>this.appendSymbol(e)}>\n              {e}\n              </button>;\n            })\n          }\n          {\n            DEFAULT_SYMBOLS.map((e, i) => {\n              return <button key={i} onClick={ev=>this.appendSymbol(e)}>\n              {e}\n              </button>;\n            })\n          }\n        </span>\n      </div>\n    </div>;\n  }\n}\n\nfunction transformViewToScreen(svg, x, y)\n{\n  const ctm = svg.getScreenCTM();\n  return {\n    x: (x * ctm.a) + ctm.e,\n    y: (y * ctm.d) + ctm.f\n  };\n}\n\nexport default LabelEditor;\n","class TapeContext\n{\n  constructor(inputString, infiniteLeft=false, infiniteRight=false)\n  {\n    this._tapeInput = inputString ? inputString.split('') : [];\n    this._left = infiniteLeft;\n    this._right = infiniteRight;\n\n    this._index = 0;\n  }\n\n  stepForward()\n  {\n    ++this._index;\n  }\n\n  stepBackward()\n  {\n    --this._index;\n  }\n\n  finish()\n  {\n    this._index = (this._tapeInput.length * 2);\n  }\n\n  reset()\n  {\n    this._index = -1;\n  }\n\n  stop()\n  {\n    this.finish();\n    this.reset();\n  }\n\n  changeTapeSymbol(index, symbol=\"\")\n  {\n    this._tapeInput[index] = symbol;\n  }\n\n  getTapeSourceStatesByIndex(index)\n  {\n    return null;\n  }\n\n  getTapeSymbolByIndex(index)\n  {\n    if (index < 0 || index >= this._tapeInput.length) return \"\";\n    return this._tapeInput[index] || \"\";\n  }\n\n  isTapeLeftInfinite()\n  {\n    return this._left;\n  }\n\n  isTapeRightInfinite()\n  {\n    return this._right;\n  }\n\n  setCurrentTapeIndex(index)\n  {\n    this._index = index;\n  }\n\n  getCurrentTapeIndex()\n  {\n    return this._index;\n  }\n\n  getTapeInput()\n  {\n    return this._tapeInput;\n  }\n}\n\nexport default TapeContext;\n","import Eventable from 'util/Eventable.js';\n//FIXME: FSABUILDER: these should be the other ones\nimport { solveNFAbyStep } from 'machine/util/solveNFA.js';\n\nimport TapeContext from './TapeContext.js';\n\nclass TestTapeContext extends TapeContext\n{\n  constructor(tester, graphController, machineController)\n  {\n    super(tester.getTestString(), false, true);\n\n    this._tester = tester;\n    this._graphController = graphController;\n    this._machineController = machineController;\n  }\n\n  //Override\n  stepForward()\n  {\n    const graphController = this._graphController;\n    const machineController = this._machineController;\n    this._tester.stepForward(graphController, machineController);\n  }\n\n  //Override\n  stepBackward()\n  {\n    const graphController = this._graphController;\n    const machineController = this._machineController;\n    this._tester.stepBackward(graphController, machineController);\n  }\n\n  //Override\n  reset()\n  {\n    this._tester.resetPosition();\n  }\n\n  //Override\n  finish()\n  {\n    const graphController = this._graphController;\n    const machineController = this._machineController;\n    this._tester.runTest(graphController, machineController, false);\n  }\n\n  //Override\n  stop()\n  {\n    this._tester.stopTest();\n  }\n\n  //Override\n  changeTapeSymbol(index, symbol=\"\")\n  {\n    throw new Error(\"Operation not yet supported\");\n  }\n\n  //Override\n  getTapeSourceStatesByIndex(index)\n  {\n    if (index < 0 || index >= this._tapeInput.length) return null;\n    return this._tester.getNodesAtPosition(index);\n  }\n\n  //Override\n  getTapeSymbolByIndex(index)\n  {\n    if (index < 0 || index >= this._tapeInput.length) return [];\n    return this._tapeInput[index] || \"\";\n  }\n\n  //Override\n  setCurrentTapeIndex(index)\n  {\n    this._tester.changePosition(index);\n  }\n\n  //Override\n  getCurrentTapeIndex()\n  {\n    return this._tester.getPosition();\n  }\n}\n\nclass StringTester\n{\n  constructor()\n  {\n    this._testString = null;\n    this._testIndex = -1;\n\n    this._tapeContext = null;\n\n    //For nfa solver use\n    this._cachePath = [];\n    this._cachedResult = null;\n    this._resolve = null;\n    this._reject = null;\n\n    this.registerEvent(\"startTest\");\n    this.registerEvent(\"stepTest\");\n    this.registerEvent(\"stopTest\");\n  }\n\n  startTest(testString, graphController, machineController)\n  {\n    if (!testString) testString = \"\";\n    if (this._tapeContext) throw new Error(\"Unable to start an already running test\");\n\n    const graph = graphController.getGraph();\n    if (graph.isEmpty()) return Promise.reject();\n\n    this._testString = testString;\n    this._testIndex = -1;\n    this._cachePath.length = 0;\n    this._cachedResult = null;\n    this._tapeContext = new TestTapeContext(this, graphController, machineController);\n\n    this.emit(\"startTest\", this);\n\n    return new Promise((resolve, reject) => {\n      this._resolve = resolve;\n      this._reject = reject;\n    });\n  }\n\n  stopTest()\n  {\n    if (!this._tapeContext) throw new Error(\"Unable to stop null test\");\n\n    this.emit(\"stopTest\", this);\n\n    if (!this._resolve) throw new Error(\"Must call startTest() before anything else\");\n    if (!this._reject) throw new Error(\"Must call startTest() before anything else\");\n\n    let testResult = null;\n    if (this._cachePath.length >= this._testString.length)\n    {\n      testResult = this._cachedResult;\n      this._resolve(testResult);\n    }\n    else\n    {\n      testResult = null;\n      this._reject();\n    }\n\n    this._testString = null;\n    this._testIndex = -1;\n    this._cachePath.length = 0;\n    this._cachedResult = null;\n    this._tapeContext = null;\n\n    return Promise.resolve(testResult);\n  }\n\n  runTest(graphController, machineController, thenStop=false)\n  {\n    if (!this._tapeContext) throw new Error(\"Unable to run null test\");\n\n    return new Promise((resolve, reject) => {\n      let result = false;\n      do\n      {\n        result = this.stepForward(graphController, machineController, !thenStop);\n      }\n      while (result);\n\n      resolve(this._cachedResult);\n    }).then((result) => {\n      if (thenStop) return this.stopTest();\n      else return result;\n    });\n  }\n\n  stepForward(graphController, machineController, cacheStep=true)\n  {\n    if (this._testIndex >= this._testString.length) return false;\n    ++this._testIndex;\n\n    if (this._cachePath.length <= this._testIndex)\n    {\n      //Calculate current step...\n      const targets = new Set();\n      let cachedStates, cachedSymbols, checkedStates = null;\n\n      if (this._testIndex === this._testString.length && this._cachedResult === null)\n      {\n        //Run the solver one last time for the result...\n\n        //If it's also the first time though...\n        if (this._testIndex <= 0)\n        {\n          cachedStates = [];\n          cachedSymbols = [];\n          checkedStates = [];\n\n          const graph = graphController.getGraph();\n          const machine = machineController.getMachineBuilder().getMachine();\n          const startState = machine.getStartState();\n          for (let curr_state of machine.doClosureTransition(startState))\n          {\n            cachedStates.push({state: curr_state, index: 0});\n          }\n        }\n        else\n        {\n          const prevCache = this._cachePath[this._testIndex - 1];\n          cachedStates = prevCache.states.slice();\n          cachedSymbols = prevCache.symbols.slice();\n          checkedStates = prevCache.checked.slice();\n        }\n\n        const machine = machineController.getMachineBuilder().getMachine();\n        const graph = graphController.getGraph();\n        this._cachedResult = solveNFAbyStep(machine, null, cachedStates, cachedSymbols, checkedStates);\n        for(const state of cachedStates)\n        {\n          //TODO: This is dangerous, cause states with the same name?\n          const node = machineController.getFirstGraphNodeByLabel(graph, state.state);\n\n          //Couldn't find the node that was solved for this step...\n          if (!node) throw new Error(\"Could not find node by label \\'\" + state.state + \"\\'\");\n\n          targets.add(node);\n        }\n      }\n      else\n      {\n        const nextSymbol = this._testString[this._testIndex];\n\n        //Initialize first step...\n        if (this._testIndex <= 0)\n        {\n          cachedStates = [];\n          cachedSymbols = [];\n          checkedStates = [];\n\n          const graph = graphController.getGraph();\n          const machine = machineController.getMachineBuilder().getMachine();\n          const startState = machine.getStartState();\n          for (let curr_state of machine.doClosureTransition(startState))\n          {\n            cachedStates.push({state: curr_state, index: 0});\n            const node = machineController.getFirstGraphNodeByLabel(graph, curr_state);\n\n            //Couldn't find the node that was solved for this step...\n            if (!node) throw new Error(\"Could not find node by label \\'\" + state.state + \"\\'\");\n\n            targets.add(node);\n          }\n        }\n        //Do the remaining steps...\n        else\n        {\n          const prevCache = this._cachePath[this._testIndex - 1];\n          cachedStates = prevCache.states.slice();\n          cachedSymbols = prevCache.symbols.slice();\n          checkedStates = prevCache.checked.slice();\n\n          const machine = machineController.getMachineBuilder().getMachine();\n          const graph = graphController.getGraph();\n          solveNFAbyStep(machine, nextSymbol, cachedStates, cachedSymbols, checkedStates);\n          for(const state of cachedStates)\n          {\n            const node = machineController.getFirstGraphNodeByLabel(graph, state.state);\n\n            //Couldn't find the node that was solved for this step...\n            if (!node) throw new Error(\"Could not find node by label \\'\" + state.state + \"\\'\");\n\n            targets.add(node);\n          }\n        }\n      }\n\n      //Store current step...\n      const nextCache = {\n        targets: Array.from(targets),\n        states: cachedStates,\n        symbols: cachedSymbols,\n        checked: checkedStates\n      };\n      this._cachePath.push(nextCache);\n    }\n    else\n    {\n      //Go forward a previously calculated step...by doing nothing...\n    }\n\n    this.emit(\"stepTest\");\n    return true;\n  }\n\n  stepBackward(graphController, machineController)\n  {\n    if (this._testIndex <= 0) return false;\n    --this._testIndex;\n\n    //Go back a step...by doing nothing...\n    this.emit(\"stepTest\");\n    return true;\n  }\n\n  isTesting()\n  {\n    return this._testString !== null;\n  }\n\n  changePosition(position)\n  {\n    if (position >= this._cachePath.length)\n    {\n      this._testIndex = this._cachePath.length - 1;\n    }\n    else\n    {\n      if (position < 0)\n      {\n        this._testIndex = 0;\n      }\n      else if (position >= this._testString.length)\n      {\n        this._testIndex = this._testString.length - 1;\n      }\n      else\n      {\n        this._testIndex = position;\n      }\n    }\n  }\n\n  resetPosition()\n  {\n    this._testIndex = -1;\n  }\n\n  getPosition()\n  {\n    return this._testIndex;\n  }\n\n  isComputedPosition(position)\n  {\n    return this._cachePath.length > position;\n  }\n\n  getCurrentNodes()\n  {\n    if (this._testIndex >= 0 && this._testIndex < this._cachePath.length)\n    {\n      return this._cachePath[this._testIndex];\n    }\n    else\n    {\n      return null;\n    }\n  }\n\n  getNodesAtPosition(position)\n  {\n    if (position >= 0 && position < this._cachePath.length)\n    {\n      return this._cachePath[position].targets;\n    }\n    else\n    {\n      return null;\n    }\n  }\n\n  getTestString()\n  {\n    return this._testString;\n  }\n\n  getTapeContext()\n  {\n    return this._tapeContext;\n  }\n}\nEventable.mixin(StringTester);\n\nexport default StringTester;\n","import AbstractGraphExporter from 'modules/abstract/exporter/AbstractGraphExporter.js';\n\nimport JSONFileIcon from 'icons/flat/JSONIcon.js';\nimport { JSON as JSONGraphParser } from 'modules/fsa/graph/FSAGraphParser.js';\nimport { downloadText } from 'util/Downloader.js';\n\nclass FSAGraphExporter extends AbstractGraphExporter\n{\n  constructor() { super(); }\n\n  fromJSON(data, module)\n  {\n    const graphController = module.getGraphController();\n    const machineController = module.getMachineController();\n    const graph = graphController.getGraph();\n\n    const metadata = '_metadata' in data ? data['_metadata'] : {};\n    const newGraph = JSONGraphParser.parse(data.graphData, graph);\n\n    //HACK: this should be calculated elsewhere\n    const machineData = data.machineData;\n    const machineName = machineData.name;\n    if (machineName) machineController.setMachineName(machineName);\n    const machineType = machineData.type;\n    if (machineType) machineController.setMachineType(machineType);\n    const customSymbols = machineData.symbols;\n    if (customSymbols && Array.isArray(customSymbols))\n    {\n      machineController.clearCustomSymbols();\n      for(const symbol of customSymbols)\n      {\n        machineController.addCustomSymbol(symbol);\n      }\n    }\n    const statePrefix = machineData.statePrefix;\n    if (statePrefix)\n    {\n      graphController.getGraphLabeler().setDefaultNodeLabelPrefix(statePrefix);\n    }\n\n    return newGraph;\n  }\n\n  toJSON(graphData, module)\n  {\n    const graphController = module.getGraphController();\n    const machineController = module.getMachineController();\n\n    const dst = {};\n    dst[\"_metadata\"] = {\n      module: module.getModuleName(),\n      version: process.env.VERSION + \":\" + module.getModuleVersion(),\n      timestamp: new Date().toString()\n    };\n    dst[\"graphData\"] = graphData;\n    dst[\"machineData\"] = {\n      name: machineController.getMachineName(),\n      type: machineController.getMachineType(),\n      symbols: machineController.getCustomSymbols(),\n      statePrefix: graphController.getGraphLabeler().getDefaultNodeLabelPrefix()\n    };\n    return dst;\n  }\n\n  //Override\n  importFromData(data, module)\n  {\n    this.fromJSON(data, module);\n  }\n\n  //Override\n  exportToData(module)\n  {\n    const graph = module.getGraphController().getGraph();\n    const graphData = JSONGraphParser.objectify(graph);\n    const result = this.toJSON(graphData, module);\n    return result;\n  }\n\n  //Override\n  doesSupportData()\n  {\n    return true;\n  }\n\n  //Override\n  importFromFile(fileBlob, module)\n  {\n    return new Promise((resolve, reject) => {\n      const filename = fileBlob.name;\n      if (!filename.endsWith(this.getFileType()))\n      {\n        throw new Error(\"Trying to import invalid file type for \\'\" + this.getFileType() + \"\\': \" + filename);\n      }\n\n      const reader = new FileReader();\n      reader.onload = e => {\n        const graphController = module.getGraphController();\n        const machineController = module.getMachineController();\n        const data = e.target.result;\n        const name = filename.substring(0, filename.length - this.getFileType().length - 1);\n        const graph = graphController.getGraph();\n\n        //TODO: this should not be here, this should exist somewhere in graphController\n        graphController.emit(\"userPreImportGraph\", graph);\n\n        try\n        {\n          const jsonData = JSON.parse(data);\n\n          this.fromJSON(jsonData, module);\n\n          graphController.emit(\"userImportGraph\", graph);\n\n          if (machineController)\n          {\n            machineController.setMachineName(name);\n          }\n\n          resolve();\n        }\n        catch (e)\n        {\n          reader.abort();\n          reject(e);\n        }\n        finally\n        {\n          graphController.emit(\"userPostImportGraph\", graph);\n        }\n      };\n\n      reader.onerror = e => {\n        reject(new Error(\"Unable to import file: \" + e.target.error.code));\n      }\n\n      reader.readAsText(fileBlob);\n    });\n  }\n\n  //Override\n  exportToFile(filename, module)\n  {\n    const graph = module.getGraphController().getGraph();\n    const graphData = JSONGraphParser.objectify(graph);\n    const dst = this.toJSON(graphData, module);\n    const jsonString = JSON.stringify(dst);\n    downloadText(filename + '.' + this.getFileType(), jsonString);\n  }\n\n  //Override\n  doesSupportFile()\n  {\n    return true;\n  }\n\n  //Override\n  canImport()\n  {\n    return true;\n  }\n\n  //Override\n  getTitle()\n  {\n    return I18N.toString(\"file.export.machine.hint\");\n  }\n\n  //Override\n  getLabel()\n  {\n    return I18N.toString(\"file.export.machine\");\n  }\n\n  //Override\n  getFileType()\n  {\n    return \"json\";\n  }\n\n  //Override\n  getIconClass()\n  {\n    return JSONFileIcon;\n  }\n}\n\nexport default FSAGraphExporter;\n","import AbstractGraphExporter from 'modules/abstract/exporter/AbstractGraphExporter.js';\n\nimport XMLFileIcon from 'icons/flat/XMLIcon.js';\nimport { XML as XMLGraphParser } from 'modules/fsa/graph/FSAGraphParser.js';\nimport { downloadText } from 'util/Downloader.js';\n\nclass JFLAPGraphExporter extends AbstractGraphExporter\n{\n  constructor() { super(); }\n\n  //Override\n  importFromFile(fileBlob, module)\n  {\n    return new Promise((resolve, reject) => {\n      const filename = fileBlob.name;\n      if (!filename.endsWith(this.getFileType()))\n      {\n        throw new Error(\"Trying to import invalid file type for \\'\" + this.getFileType() + \"\\': \" + filename);\n      }\n\n      const reader = new FileReader();\n      reader.onload = e => {\n        const graphController = module.getGraphController();\n        const machineController = module.getMachineController();\n        const data = e.target.result;\n        const name = filename.substring(0, filename.length - this.getFileType().length - 1);\n        const graph = graphController.getGraph();\n\n        //TODO: this should not be here, this should exist somewhere in graphController\n        graphController.emit(\"userPreImportGraph\", graph);\n\n        try\n        {\n          const xmlData = new DOMParser().parseFromString(data, \"text/xml\");\n          XMLGraphParser.parse(xmlData, graph);\n\n          graphController.emit(\"userImportGraph\", graph);\n\n          if (machineController)\n          {\n            machineController.setMachineName(name);\n          }\n\n          resolve();\n        }\n        catch (e)\n        {\n          reader.abort();\n          reject(e);\n        }\n        finally\n        {\n          graphController.emit(\"userPostImportGraph\", graph);\n        }\n      };\n\n      reader.onerror = e => {\n        reject(new Error(\"Unable to import file: \" + e.target.error.code));\n      }\n\n      reader.readAsText(fileBlob);\n    });\n  }\n\n  //Override\n  exportToFile(filename, module)\n  {\n    const graph = module.getGraphController().getGraph();\n    const graphData = XMLGraphParser.objectify(graph);\n    const xmlString = new XMLSerializer().serializeToString(graphData);\n    downloadText(filename + '.' + this.getFileType(), xmlString);\n  }\n\n  //Override\n  doesSupportFile()\n  {\n    return true;\n  }\n\n  //Override\n  canImport()\n  {\n    return true;\n  }\n\n  //Override\n  getTitle()\n  {\n    return I18N.toString(\"file.export.jff.hint\");\n  }\n\n  //Override\n  getLabel()\n  {\n    return I18N.toString(\"file.export.jff\");\n  }\n\n  //Override\n  getFileType()\n  {\n    return \"jff\";\n  }\n\n  //Override\n  getIconClass()\n  {\n    return XMLFileIcon;\n  }\n}\n\nexport default JFLAPGraphExporter;\n","import AbstractModule from 'modules/abstract/AbstractModule.js';\n\nimport Notifications from 'system/notification/Notifications.js';\n\nimport OverviewPanel from './panels/overview/OverviewPanel.js';\nimport TestingPanel from './panels/testing/TestingPanel.js';\nimport AnalysisPanel from './panels/analysis/AnalysisPanel.js';\nimport AboutPanel from './panels/about/AboutPanel.js';\n\nimport InputController from './controller/InputController.js';\nimport GraphController from './controller/GraphController.js';\nimport MachineController from './controller/MachineController.js';\n\nimport FSAGraphRenderer from './renderer/FSAGraphRenderer.js';\nimport FSAGraphOverlayRenderer from './renderer/FSAGraphOverlayRenderer.js';\nimport ViewportRenderer from './renderer/ViewportRenderer.js';\n\nimport GraphLayout from './graph/GraphLayout.js';\nimport EventManager from './EventManager.js';\nimport LabelEditor from './editor/LabelEditor.js';\nimport TestingManager from './testing/TestingManager.js';\n\nimport StringTester from 'experimental/panels/test/StringTester.js';\n\nimport FSAGraphExporter from './exporter/FSAGraphExporter.js';\nimport JFLAPGraphExporter from './exporter/JFLAPGraphExporter.js';\n\nconst VERSION = \"0.0.1\";\nconst PANELS = [AboutPanel, TestingPanel, OverviewPanel, AnalysisPanel];\nconst EXPORTERS = [\n  new FSAGraphExporter(),\n  new JFLAPGraphExporter()\n];\n\nclass FSAModule extends AbstractModule\n{\n  constructor(app)\n  {\n    super(app);\n\n    this._workspace = null;\n\n    this._inputController = new InputController(this, app.getInputAdapter());\n    this._graphController = new GraphController(this);\n    this._machineController = new MachineController(this);\n\n    //Deprecated (should be anyways)\n    this._eventManager = new EventManager(app.getUndoManager());\n    //Deprecated\n    this._testingManager = new TestingManager();\n    //Use this instead\n    this._tester = new StringTester();\n  }\n\n  //Override\n  initialize(app)\n  {\n    const viewport = app.viewport;\n    const workspace = app.workspace;\n\n    this._workspace = workspace;\n\n    super.initialize(app);\n\n    this._eventManager.initialize(this);\n\n    this._testingManager.initialize(this, viewport);\n\n    //Notify on create in delete mode\n    const tryCreateWhileTrash = () => {\n      if (this._inputController.isTrashMode())\n      {\n        Notifications.addMessage(I18N.toString(\"message.warning.cannotmodify\"), \"warning\", \"tryCreateWhileTrash\");\n      }\n    };\n    this._graphController.on(\"tryCreateWhileTrash\", tryCreateWhileTrash);\n  }\n\n  //Override\n  destroy(app)\n  {\n    this._testingManager.destroy();\n\n    this._eventManager.destroy();\n\n    super.destroy(app);\n  }\n\n  //Override\n  update(app)\n  {\n    super.update(app);\n  }\n\n  getGraph()\n  {\n    return this._graphController.getGraph();\n  }\n\n  getTestingManager()\n  {\n    return this._testingManager;\n  }\n\n  getDefaultGraphLayout()\n  {\n    return GraphLayout;\n  }\n\n  getLabelEditor()\n  {\n    return LabelEditor;\n  }\n\n  //Override\n  getRenderer(renderLayer)\n  {\n    switch(renderLayer)\n    {\n      case \"graph\":\n        return FSAGraphRenderer;\n      case \"graphoverlay\":\n        return FSAGraphOverlayRenderer;\n      case \"viewport\":\n        return ViewportRenderer;\n    }\n    return null;\n  }\n  //Override\n  getInputController() { return this._inputController; }\n  //Override\n  getGraphController() { return this._graphController; }\n  //Override\n  getMachineController() { return this._machineController; }\n  //Override\n  getGraphExporters() { return EXPORTERS; }\n  //Override\n  getModuleVersion() { return VERSION; }\n  //Override\n  getModulePanels() { return PANELS; }\n  //Override\n  getModuleName() { return \"fsa\"; }\n  //Override\n  getLocalizedModuleName() { return this._machineController.getMachineType(); }\n}\nexport default FSAModule;\n","//https://www.flaticon.com/free-icon/xml_136526\nimport React from 'react';\n\nclass XMLIcon extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    return <svg className=\"xml-icon\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 56 56\">\n      <g>\n        <path fill=\"#E9E9E0\" d=\"M36.985,0H7.963C7.155,0,6.5,0.655,6.5,1.926V55c0,0.345,0.655,1,1.463,1h40.074 c0.808,0,1.463-0.655,1.463-1V12.978c0-0.696-0.093-0.92-0.257-1.085L37.607,0.257C37.442,0.093,37.218,0,36.985,0z\"/>\n        <polygon fill=\"#D9D7CA\" points=\"37.5,0.151 37.5,12 49.349,12 \t\"/>\n        <path fill=\"#F29C1F\" d=\"M48.037,56H7.963C7.155,56,6.5,55.345,6.5,54.537V39h43v15.537C49.5,55.345,48.845,56,48.037,56z\"/>\n        <g>\n          <path fill=\"#FFFFFF\" d=\"M19.379,48.105L21.936,53h-1.9l-1.6-3.801h-0.137L16.576,53h-1.9l2.557-4.895l-2.721-5.182h1.873 l1.777,4.102h0.137l1.928-4.102H22.1L19.379,48.105z\"/>\n          <path fill=\"#FFFFFF\" d=\"M31.998,42.924h1.668V53h-1.668v-6.932l-2.256,5.605h-1.449l-2.27-5.605V53h-1.668V42.924h1.668 l2.994,6.891L31.998,42.924z\"/>\n          <path fill=\"#FFFFFF\" d=\"M37.863,42.924v8.832h4.635V53h-6.303V42.924H37.863z\"/>\n        </g>\n        <path fill=\"#F29C1F\" d=\"M15.5,24c-0.256,0-0.512-0.098-0.707-0.293c-0.391-0.391-0.391-1.023,0-1.414l6-6 c0.391-0.391,1.023-0.391,1.414,0s0.391,1.023,0,1.414l-6,6C16.012,23.902,15.756,24,15.5,24z\"/>\n        <path fill=\"#F29C1F\" d=\"M21.5,30c-0.256,0-0.512-0.098-0.707-0.293l-6-6c-0.391-0.391-0.391-1.023,0-1.414 s1.023-0.391,1.414,0l6,6c0.391,0.391,0.391,1.023,0,1.414C22.012,29.902,21.756,30,21.5,30z\"/>\n        <path fill=\"#F29C1F\" d=\"M33.5,30c-0.256,0-0.512-0.098-0.707-0.293c-0.391-0.391-0.391-1.023,0-1.414l6-6 c0.391-0.391,1.023-0.391,1.414,0s0.391,1.023,0,1.414l-6,6C34.012,29.902,33.756,30,33.5,30z\"/>\n        <path fill=\"#F29C1F\" d=\"M39.5,24c-0.256,0-0.512-0.098-0.707-0.293l-6-6c-0.391-0.391-0.391-1.023,0-1.414 s1.023-0.391,1.414,0l6,6c0.391,0.391,0.391,1.023,0,1.414C40.012,23.902,39.756,24,39.5,24z\"/>\n        <path fill=\"#F29C1F\" d=\"M24.5,32c-0.11,0-0.223-0.019-0.333-0.058c-0.521-0.184-0.794-0.755-0.61-1.276l6-17 c0.185-0.521,0.753-0.795,1.276-0.61c0.521,0.184,0.794,0.755,0.61,1.276l-6,17C25.298,31.744,24.912,32,24.5,32z\"/>\n      </g>\n    </svg>;\n  }\n}\n\nexport default XMLIcon;\n","import GraphEdge from 'graph/GraphEdge.js';\n\nclass GraphCurvedEdge extends GraphEdge\n{\n  constructor(id, from, to=null)\n  {\n    super(id, from, null);\n\n    //radians = the angle in radians, where 0 is the normal of midpoint\n    //length = the distance from midpoint\n    this._quad = {\n      radians: 0,\n      length: 0,\n      _coords: {x: 0, y: 0}\n    };\n\n    //Make sure to format it correctly when creating...\n    this.changeDestinationNode(to);\n  }\n\n  setQuadratic(radians, length=undefined)\n  {\n    this._quad.radians = radians;\n    if (typeof length === 'number')\n    {\n      this._quad.length = length;\n    }\n    return this;\n  }\n\n  getQuadratic()\n  {\n    return this._quad;\n  }\n\n  isQuadratic()\n  {\n    return !this.isPlaceholder() && this._quad.length != 0;\n  }\n\n  setQuadraticByCoords(x, y)\n  {\n    const from = this._from;\n    const to = this._to;\n    const fromx = from.x;\n    const fromy = from.y;\n    const tox = to.x;\n    const toy = to.y;\n\n    let dx = tox - fromx;\n    let dy = toy - fromy;\n    const midpointx = fromx + dx / 2;\n    const midpointy = fromy + dy / 2;\n\n    //Remember: y-axis is flipped because canvas coord-space is -y => +y\n    //Therefore, dy needs to be flipped\n    const angleOffset = Math.atan2(-dy, dx);\n    dx = x - midpointx;\n    dy = y - midpointy;\n\n    const PI = Math.PI;\n    const PI2 = PI * 2;\n    const HALFPI = PI / 2;\n    //0 rad = to the right\n    //Also: angleOffset is the offset from midpoint angle, the orthogonal base vector\n    //This is because the from and to could be flipped, and\n    //therefore give a negative, or at least a reversed angle.\n    let radians = Math.atan2(dy, dx) + angleOffset;\n    let length = Math.sqrt(dx * dx + dy * dy);\n    if (length < 0) length = 0;\n\n    const outrad = radians - (-HALFPI);//-PI / 2 is outward\n    const inrad = radians - (HALFPI);//PI / 2 is inward\n    //TODO: Should be dependent on length\n    const maxdr = PI / 20;\n\n    if (Math.abs(length) < 8)\n    {\n      radians = 0;\n      length = 0;\n    }\n    else if (outrad < maxdr && outrad > -maxdr)\n    {\n      radians = -HALFPI;//-PI / 2 is outward\n    }\n    else if (-inrad < maxdr && -inrad > -maxdr)\n    {\n      radians = HALFPI;//PI / 2 is inward\n    }\n\n    this._quad.radians = radians;\n    this._quad.length = length;\n  }\n\n  getQuadraticAsCoords()\n  {\n    const from = this._from;\n    const to = this._to;\n    const dst = this._quad._coords;\n    if (from == null || to == null)\n    {\n      dst.x = 0;\n      dst.y = 0;\n    }\n    else\n    {\n      /*\n      //To mark dirty...\n      _capture: {\n        fx: 0, fy: 0,\n        tx: 0, ty: 0,\n        ql: 0, qr: 0\n      }\n      */\n      getDirectionalVector(from.x, from.y, to.x, to.y, this._quad.length, this._quad.radians, dst);\n    }\n    return dst;\n  }\n\n  getSelfLoopHeight()\n  {\n    return this._from.getNodeSize();\n  }\n\n  formatAsSelfLoop()\n  {\n    this.setQuadratic(-Math.PI / 2, this._from.getNodeSize() + this.getSelfLoopHeight());\n  }\n\n  formatAsPlaceholder(prevDest)\n  {\n    //Quad is re-used to determine edge angle for placeholder\n    //This can be used specifically for quad since regular quad is\n    //dependent on this._to != null, which placeholder assumes this._to == null.\n    //Also, quad.length is ignored, because the length should always be\n    //getPlaceholderLength(). This is resolved by getStartPoint(), etc.\n    if (prevDest)\n    {\n      const dx = this._from.x - prevDest.x;\n      const dy = this._from.y - prevDest.y;\n      const angle = -Math.atan2(dx, dy) - (Math.PI / 2);\n      this._quad.radians = angle;\n    }\n    else\n    {\n      this._quad.radians = 0;\n    }\n  }\n\n  //Override\n  changeDestinationNode(node)\n  {\n    const prevDest = this._to;\n\n    //Just to optimize this a little :)\n    if (prevDest === node) return;\n\n    super.changeDestinationNode(node);\n\n    if (this.isPlaceholder())\n    {\n      this.formatAsPlaceholder(prevDest);\n    }\n    else if (this.isSelfLoop())\n    {\n      this.formatAsSelfLoop();\n    }\n  }\n\n  //Override\n  getEdgeDirection()\n  {\n    let result = 0;\n    if (this.isQuadratic())\n    {\n      const coords = this.getQuadraticAsCoords();\n      result = Math.atan2(coords.y, coords.x) + Math.PI / 2;\n    }\n    else\n    {\n      result = super.getEdgeDirection();\n    }\n\n    return result;\n  }\n\n  //Override\n  getStartPoint(dst={x: 0, y: 0})\n  {\n    const from = this._from;\n    const to = this._to;\n\n    if (!from) throw new Error(\"Source of edge cannot be null.\");\n    if (!to)\n    {\n      //Make sure to use quad for placeholder direction (not magnitude)\n      const px = Math.cos(this._quad.radians);\n      const py = Math.sin(this._quad.radians);\n      const nodeSize = from.getNodeSize();\n      dst.x = from.x + px * nodeSize;\n      dst.y = from.y + py * nodeSize;\n      return dst;\n    }\n\n    //Check if edge is following something other than a node...then remain flat\n    if (!to.getNodeSize || !this.isQuadratic())\n    {\n      getDirectionalVector(from.x, from.y, to.x, to.y, from.getNodeSize(), 0, dst);\n      dst.x += from.x;\n      dst.y += from.y;\n      return dst;\n    }\n    else\n    {\n      getMidPoint(from.x, from.y, to.x, to.y, dst);\n      const qcoords = this.getQuadraticAsCoords();\n      const qx = dst.x + qcoords.x;\n      const qy = dst.y + qcoords.y;\n      getDirectionalVector(from.x, from.y, qx, qy, from.getNodeSize(), this.isSelfLoop() ? (Math.PI / 4) : 0, dst);\n      dst.x += from.x;\n      dst.y += from.y;\n      return dst;\n    }\n  }\n\n  //Override\n  getEndPoint(dst={x: 0, y: 0})\n  {\n    const from = this._from;\n    const to = this._to;\n\n    if (!from) throw new Error(\"Source of edge cannot be null.\");\n    if (!to)\n    {\n      //Make sure to use quadCoords for placeholder direction (not magnitude)\n      const px = Math.cos(this._quad.radians);\n      const py = Math.sin(this._quad.radians);\n      const placeholderLength = from.getNodeSize() + this.getPlaceholderLength();\n      dst.x = from.x + px * placeholderLength;\n      dst.y = from.y + py * placeholderLength;\n      return dst;\n    }\n\n    //Get end point for non-nodes...\n    if (!to.getNodeSize)\n    {\n      return to;\n    }\n    //Get end point for straight edges...\n    else if (!this.isQuadratic())\n    {\n      getDirectionalVector(to.x, to.y, from.x, from.y, to.getNodeSize(), 0, dst);\n      dst.x += to.x;\n      dst.y += to.y;\n      return dst;\n    }\n    //Get end point for quadratics...\n    else\n    {\n      getMidPoint(from.x, from.y, to.x, to.y, dst);\n      const qcoords = this.getQuadraticAsCoords();\n      const qx = dst.x + qcoords.x;\n      const qy = dst.y + qcoords.y;\n      getDirectionalVector(to.x, to.y, qx, qy, to.getNodeSize(), this.isSelfLoop() ? -(Math.PI / 4.0) : 0, dst);\n      dst.x += to.x;\n      dst.y += to.y;\n      return dst;\n    }\n  }\n\n  //Override\n  getCenterPoint(dst={x: 0, y: 0})\n  {\n    const from = this._from;\n    const to = this._to;\n\n    if (!from) throw new Error(\"Source of edge cannot be null.\");\n    if (!to)\n    {\n      //Make sure to use quad for placeholder direction (not magnitude)\n      const px = Math.cos(this._quad.radians);\n      const py = Math.sin(this._quad.radians);\n      const placeholderLength = from.getNodeSize() + this.getPlaceholderLength() / 2;\n      dst.x = from.x + px * placeholderLength;\n      dst.y = from.y + py * placeholderLength;\n      return dst;\n    }\n\n    getMidPoint(from.x, from.y, to.x, to.y, dst);\n\n    if (this.isQuadratic())\n    {\n      const qcoords = this.getQuadraticAsCoords();\n      dst.x += qcoords.x;\n      dst.y += qcoords.y;\n    }\n\n    return dst;\n  }\n\n  //Override\n  getHashString(usePosition=true)\n  {\n    if (usePosition)\n    {\n      return super.getHashString(usePosition) + \":\" + this._quad.radians + \",\" + this._quad.length;\n    }\n    else\n    {\n      return super.getHashString(usePosition);\n    }\n  }\n}\n\nfunction getDirectionalVector(x1, y1, x2, y2, dist, angleOffset=0, dst={x: 0, y: 0})\n{\n  const dx = x2 - x1;\n  const dy = y2 - y1;\n  const angle = Math.atan2(dy, dx) + angleOffset;\n  dst.x = Math.cos(angle) * dist;\n  dst.y = Math.sin(angle) * dist;\n  return dst;\n}\n\nfunction getMidPoint(x1, y1, x2, y2, dst={x: 0, y: 0})\n{\n  dst.x = x1 + (x2 - x1) / 2;\n  dst.y = y1 + (y2 - y1) / 2;\n  return dst;\n}\n\nexport default GraphCurvedEdge;\n","import GraphNode from './GraphNode.js';\nimport GraphEdge from './GraphEdge.js';\nimport { guid, stringHash } from 'util/MathHelper.js';\n\nclass NodalGraph\n{\n  constructor(nodeClass=GraphNode, edgeClass=GraphEdge)\n  {\n    this._nodeClass = nodeClass;\n    this._edgeClass = edgeClass;\n\n    this._nodes = [];\n    this._edges = [];\n    this._nodeMapping = new Map();\n    this._edgeMapping = new Map();\n  }\n\n  /** NODES **/\n\n  createNode(x=0, y=0, id=null)\n  {\n    const result = new (this._nodeClass)(id || guid(), x, y);\n    const i = this._nodes.length;\n    this._nodes.push(result);\n    this._nodeMapping.set(result.getGraphElementID(), i);\n    return result;\n  }\n  deleteNode(node)\n  {\n    const elementID = node.getGraphElementID();\n    const i = this._nodeMapping.get(elementID);\n    if (i >= 0)\n    {\n      this._nodes.splice(i, 1);\n      this._nodeMapping.delete(elementID);\n\n      //HACK: This is inefficient, you should convert everything to use only\n      //the map so the indicies would not need to be fixed in the array.\n      //Basically, get rid of this._nodes (you will have to change how setStartNode works)\n      for(let j = i, len = this._nodes.length; j < len; ++j)\n      {\n        this._nodeMapping.set(this._nodes[j].getGraphElementID(), j);\n      }\n\n      const nullSourceEdges = [];\n\n      //Remove connected edges\n      for(const edge of this._edges)\n      {\n        if (edge.getSourceNode() === node)\n        {\n          nullSourceEdges.push(edge);\n        }\n        else if (edge.getDestinationNode() === node)\n        {\n          edge.changeDestinationNode(null);\n        }\n      }\n      for(const edge of nullSourceEdges)\n      {\n        this.deleteEdge(edge);\n      }\n    }\n  }\n  addNode(node)\n  {\n    if (!node.getGraphElementID()) node.setGraphElementID(guid());\n\n    const i = this._nodes.length;\n    this._nodes.push(node);\n    this._nodeMapping.set(node.getGraphElementID(), i);\n    return node;\n  }\n  clearNodes() { this._nodes.length = 0; this._nodeMapping.clear(); }\n  getNodeByElementID(elementID)\n  {\n    const index = this._nodeMapping.get(elementID);\n    return index >= 0 ? this._nodes[index] : null;\n  }\n  getNodesByLabel(label, dst=[])\n  {\n    for(const node of this._nodes)\n    {\n      if (node.getNodeLabel() == label) dst.push(node);\n    }\n    return dst;\n  }\n  getNodes() { return this._nodes; }\n  getNodeCount() { return this._nodes.length; }\n  getNodeClass() { return this._nodeClass; }\n\n  /** EDGES **/\n\n  createEdge(from, to=null, id=null)\n  {\n    const result = new (this._edgeClass)(id || guid(), from, to);\n    const i = this._edges.length;\n    this._edges.push(result);\n    this._edgeMapping.set(result.getGraphElementID(), i);\n    return result;\n  }\n  deleteEdge(edge)\n  {\n    const elementID = edge.getGraphElementID();\n    const i = this._edgeMapping.get(elementID);\n    if (i >= 0)\n    {\n      this._edges.splice(i, 1);\n      this._edgeMapping.delete(elementID);\n\n      //HACK: This is inefficient, refer to deleteNode().\n      for(let j = i, len = this._edges.length; j < len; ++j)\n      {\n        this._edgeMapping.set(this._edges[j].getGraphElementID(), j);\n      }\n    }\n  }\n  addEdge(edge)\n  {\n    if (!edge.getGraphElementID()) edge.setGraphElementID(guid());\n\n    const i = this._edges.length;\n    this._edges.push(edge);\n    this._edgeMapping.set(edge.getGraphElementID(), i);\n    return edge;\n  }\n  clearEdges() { this._edges.length = 0; this._edgeMapping.clear(); }\n  getEdgeByElementID(elementID)\n  {\n    const index = this._edgeMapping.get(elementID);\n    return index >= 0 ? this._edges[index] : null;\n  }\n  getEdges() { return this._edges; }\n  getEdgeCount() { return this._edges.length; }\n  getEdgeClass() { return this._edgeClass; }\n\n  /** HELPER **/\n\n  clear()\n  {\n    this.clearEdges();\n    this.clearNodes();\n  }\n\n  isEmpty()\n  {\n    return this.getNodeCount() <= 0 && this.getEdgeCount() <= 0;\n  }\n\n  getBoundingRect()\n  {\n    if (this._nodes.length <= 0) return {\n      minX: 0,\n      minY: 0,\n      maxX: 1,\n      maxY: 1,\n      width: 1,\n      height: 1\n    };\n\n    var minNX = Number.MAX_VALUE;\n    var minNY = Number.MAX_VALUE;\n    var maxNX = Number.MIN_VALUE;\n    var maxNY = Number.MIN_VALUE;\n\n    var maxNodeSize = 0;\n    for(const node of this._nodes)\n    {\n      const x = node.x;\n      const y = node.y;\n      const size = node.getNodeSize();\n      if (size > maxNodeSize) maxNodeSize = size;\n\n      minNX = Math.min(minNX, x);\n      maxNX = Math.max(maxNX, x);\n\n      minNY = Math.min(minNY, y);\n      maxNY = Math.max(maxNY, y);\n    }\n\n    minNX -= maxNodeSize;\n    minNY -= maxNodeSize;\n    maxNX += maxNodeSize;\n    maxNY += maxNodeSize;\n\n    var minEX = Number.MAX_VALUE;\n    var minEY = Number.MAX_VALUE;\n    var maxEX = Number.MIN_VALUE;\n    var maxEY = Number.MIN_VALUE;\n\n    const startPoint = {x: 0, y: 0};\n    const endPoint = {x: 0, y: 0};\n    const centerPoint = {x: 0, y: 0};\n    for(const edge of this._edges)\n    {\n      //Will store into point objects...\n      edge.getStartPoint(startPoint);\n      edge.getEndPoint(endPoint);\n      edge.getCenterPoint(centerPoint);\n\n      const sx = startPoint.x;\n      const sy = startPoint.y;\n      const ex = endPoint.x;\n      const ey = endPoint.y;\n      const cx = centerPoint.x;\n      const cy = centerPoint.y;\n\n      minEX = Math.min(minEX, sx, ex, cx);\n      maxEX = Math.max(maxEX, sx, ex, cx);\n\n      minEY = Math.min(minEY, sy, ey, cy);\n      maxEY = Math.max(maxEY, sy, ey, cy);\n    }\n\n    const result = {\n      minX: Math.min(minNX, minEX),\n      minY: Math.min(minNY, minEY),\n      maxX: Math.max(maxNX, maxEX),\n      maxY: Math.max(maxNY, maxEY),\n      width: 0,\n      height: 0\n    };\n    result.width = result.maxX - result.minX;\n    result.height = result.maxY - result.minY;\n    return result;\n  }\n\n  //Gets a hash of the graph's current state. Can generally assume the hash will\n  //change if the graph's content has changed (including nodes and edges).\n  getHashCode(usePosition=true)\n  {\n    let string = \"\";\n    for(const node of this._nodes)\n    {\n      string += node.getHashString(usePosition) + \",\";\n    }\n    string += \"|\";\n    for(const edge of this._edges)\n    {\n      string += edge.getHashString(usePosition) + \",\";\n    }\n    return stringHash(string);\n  }\n}\n\nexport default NodalGraph;\n","class AbstractModuleGraphController\n{\n  constructor(module, graph, labeler)\n  {\n    if (!module) throw new Error(\"Missing module for graph controller\");\n    if (!graph) throw new Error(\"Missing graph for graph controller\");\n    if (!labeler) throw new Error(\"Missing graph labeler for graph controller\");\n\n    this._module = module;\n    this._graph = graph;\n    this._labeler = labeler;\n    this._labeler.setGraphController(this);\n  }\n\n  initialize(module) {}\n  destroy(module) {}\n  update(module) {}\n\n  getGraphLabeler()\n  {\n    return this._labeler;\n  }\n\n  getGraph()\n  {\n    return this._graph;\n  }\n\n  getModule()\n  {\n    return this._module;\n  }\n}\n\nexport default AbstractModuleGraphController;\n","class AbstractGraphLabeler\n{\n  constructor()\n  {\n    this._graphController = null;\n  }\n\n  setGraphController(graphController)\n  {\n    this._graphController = graphController;\n    return this;\n  }\n\n  getDefaultNodeLabel()\n  {\n    return \"\";\n  }\n\n  getDefaultEdgeLabel()\n  {\n    return \"\";\n  }\n\n  getNodeLabelFormatter()\n  {\n    throw new Error(\"Node label formatting is not supported\");\n  }\n\n  getEdgeLabelFormatter()\n  {\n    throw new Error(\"Edge label formatting is not supported\");\n  }\n\n  getGraphController()\n  {\n    return this._graphController;\n  }\n}\n\nexport default AbstractGraphLabeler;\n","class AbstractModuleMachineController\n{\n  constructor(module, machineBuilder)\n  {\n    if (!module) throw new Error(\"Missing module for machine controller\");\n    if (!machineBuilder) throw new Error(\"Missing machine builder for machine controller\");\n\n    this._module = module;\n    this._machineBuilder = machineBuilder;\n    this._machineUpdateTicks = 0;\n    this._machineUpdateRate = 30;\n  }\n\n  initialize(module) {}\n  destroy(module) {}\n\n  update(module)\n  {\n    if (--this._machineUpdateTicks <= 0)\n    {\n      this._machineBuilder.update(module);\n      this._machineUpdateTicks = this._machineUpdateRate;\n    }\n  }\n\n  getMachineBuilder()\n  {\n    return this._machineBuilder;\n  }\n\n  getModule()\n  {\n    return this._module;\n  }\n}\n\nexport default AbstractModuleMachineController;\n","class AbstractMachineBuilder\n{\n  constructor()\n  {\n\t\tthis._graph = null;\n\t\tthis._cachedGraphHash = 0;\n\n    this._errors = [];\n    this._warnings = [];\n  }\n\n  update(module)\n  {\n    const graphController = module.getGraphController();\n    const machineController = module.getMachineController();\n    const graph = this._graph = graphController.getGraph();\n    const graphHash = graph.getHashCode(false);\n    if (graphHash !== this._cachedGraphHash)\n    {\n      this._cachedGraphHash = graphHash;\n      this.onGraphChange(graph);\n    }\n  }\n\n  onGraphChange(graph)\n  {\n    throw new Error(\"Missing machine update operation for graph change\");\n  }\n\n  getMachineErrors()\n  {\n    return this._errors;\n  }\n\n  getMachineWarnings()\n  {\n    return this._warnings;\n  }\n\n  isMachineValid()\n  {\n    return this._errors.length <= 0;\n  }\n\n  getMachine()\n  {\n    throw new Error(\"Missing machine for builder\");\n  }\n}\n\nexport default AbstractMachineBuilder;\n","import React from 'react';\n\nimport Config from 'config.js';\n\nclass SelectionBoxRenderer extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  //Override\n  render()\n  {\n    const visible = this.props.visible;\n    const fromX = this.props.fromX || 0;\n    const fromY = this.props.fromY || 0;\n    const toX = this.props.toX || fromX + 1;\n    const toY = this.props.toY || fromY + 1;\n\n    const dx = toX - fromX;\n    const dy = toY - fromY;\n\n    return <g className=\"graph-selection-container\">\n    { visible &&\n      <rect className=\"graph-selection\"\n        x={dx < 0 ? toX : fromX}\n        y={dy < 0 ? toY : fromY}\n        width={dx < 0 ? -dx : dx}\n        height={dy < 0 ? -dy : dy}/> }\n    </g>;\n  }\n}\n\nexport default SelectionBoxRenderer;\n","import React from 'react';\nimport './TrashCan.css';\n\nimport Viewport from './Viewport.js';\n\nclass TrashCan extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.state = {\n      staticTrash: false\n    };\n  }\n\n  onTrashEnter(e)\n  {\n    if (this.state.staticTrash) return;\n    this.props.inputController.setTrashMode(true);\n\n    //Enable mode: dangerous\n    this.props.viewport.setState((prev, props) => {\n      return {mode: Viewport.DANGEROUS};\n    });\n  }\n\n  onTrashLeave(e)\n  {\n    if (this.state.staticTrash) return;\n    this.props.inputController.setTrashMode(false);\n\n    //Disable mode: dangerous\n    this.props.viewport.setState((prev, props) => {\n      return {mode: Viewport.NORMAL};\n    });\n  }\n\n  onTrashClick(e)\n  {\n    e.stopPropagation();\n    e.preventDefault();\n\n    this.setState((prev, props) => {\n      const result = !prev.staticTrash;\n      this.props.inputController.setTrashMode(result);\n\n      //Enable mode: dangerous\n      this.props.viewport.setState((prev, props) => {\n        return {mode: result ? Viewport.DANGEROUS : Viewport.NORMAL};\n      })\n\n      return {\n        staticTrash: result\n      };\n    });\n  }\n\n  render()\n  {\n    const inputController = this.props.inputController;\n    const inputAdapter = inputController.getInputAdapter();\n\n    return <svg id=\"trash-btn\"\n      className={(inputController.isTrashMode() ? \"danger \" : \"\") +\n        (inputAdapter.isUsingTouch() && inputAdapter.isDragging() ? \"hidden\" : \"\")}\n      width=\"24\" height=\"24\"\n      viewBox=\"0 0 24 24\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      onMouseEnter={this.onTrashEnter.bind(this)}\n      onMouseLeave={this.onTrashLeave.bind(this)}\n      onClick={this.onTrashClick.bind(this)}>\n      <path d={\"M3 6v18h18v-18h-18zm5 14c0 .552-.448 1-1 1s-1-.448-1-1v-10c0-.552.448-1 \" +\n      \"1-1s1 .448 1 1v10zm5 0c0 .552-.448 1-1 1s-1-.448-1-1v-10c0-.552.448-1 1-1s1 .448 1 \" +\n      \"1v10zm5 0c0 .552-.448 1-1 1s-1-.448-1-1v-10c0-.552.448-1 1-1s1 .448 1 \" +\n      \"1v10zm4-18v2h-20v-2h5.711c.9 0 1.631-1.099 1.631-2h5.315c0 .901.73 2 1.631 2h5.712z\"}/>\n    </svg>;\n  }\n}\n\nexport default TrashCan;\n","//https://www.flaticon.com/free-icon/json-file_136525\nimport React from 'react';\n\nclass JSONIcon extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    return <svg className=\"json-icon\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 56 56\">\n      <g>\n        <path fill=\"#E9E9E0\" d=\"M36.985,0H7.963C7.155,0,6.5,0.655,6.5,1.926V55c0,0.345,0.655,1,1.463,1h40.074 c0.808,0,1.463-0.655,1.463-1V12.978c0-0.696-0.093-0.92-0.257-1.085L37.607,0.257C37.442,0.093,37.218,0,36.985,0z\"/>\n        <polygon fill=\"#D9D7CA\" points=\"37.5,0.151 37.5,12 49.349,12 \t\"/>\n        <path fill=\"#9777A8\" d=\"M48.037,56H7.963C7.155,56,6.5,55.345,6.5,54.537V39h43v15.537C49.5,55.345,48.845,56,48.037,56z\"/>\n        <g>\n          <path fill=\"#FFFFFF\" d={\"M17.021,42.719v7.848c0,0.474-0.087,0.873-0.26,1.196s-0.405,0.583-0.697,0.779 \" +\n            \"s-0.627,0.333-1.005,0.41c-0.378,0.077-0.768,0.116-1.169,0.116c-0.2,0-0.436-0.021-0.704-0.062s-0.547-0.104-0.834-0.191 \" +\n            \"s-0.563-0.185-0.827-0.294s-0.487-0.232-0.67-0.369l0.697-1.107c0.091,0.063,0.221,0.13,0.39,0.198s0.354,0.132,0.554,0.191 \" +\n            \"s0.41,0.111,0.629,0.157s0.424,0.068,0.615,0.068c0.483,0,0.868-0.094,1.155-0.28s0.439-0.504,0.458-0.95v-7.711H17.021z\"}/>\n          <path fill=\"#FFFFFF\" d={\"M25.184,50.238c0,0.364-0.075,0.718-0.226,1.06s-0.362,0.643-0.636,0.902s-0.61,0.467-1.012,0.622 \" +\n            \"s-0.856,0.232-1.367,0.232c-0.219,0-0.444-0.012-0.677-0.034s-0.467-0.062-0.704-0.116c-0.237-0.055-0.463-0.13-0.677-0.226 \" +\n            \"s-0.398-0.212-0.554-0.349l0.287-1.176c0.128,0.073,0.289,0.144,0.485,0.212s0.398,0.132,0.608,0.191s0.419,0.107,0.629,0.144 \" +\n            \"s0.405,0.055,0.588,0.055c0.556,0,0.982-0.13,1.278-0.39s0.444-0.645,0.444-1.155c0-0.31-0.104-0.574-0.314-0.793 \" +\n            \"s-0.472-0.417-0.786-0.595s-0.654-0.355-1.019-0.533s-0.706-0.388-1.025-0.629s-0.583-0.526-0.793-0.854s-0.314-0.738-0.314-1.23 \" +\n            \"c0-0.446,0.082-0.843,0.246-1.189s0.385-0.641,0.663-0.882s0.602-0.426,0.971-0.554s0.759-0.191,1.169-0.191 \" +\n            \"c0.419,0,0.843,0.039,1.271,0.116s0.774,0.203,1.039,0.376c-0.055,0.118-0.118,0.248-0.191,0.39s-0.142,0.273-0.205,0.396 \" +\n            \"s-0.118,0.226-0.164,0.308s-0.073,0.128-0.082,0.137c-0.055-0.027-0.116-0.063-0.185-0.109s-0.166-0.091-0.294-0.137 \" +\n            \"s-0.296-0.077-0.506-0.096s-0.479-0.014-0.807,0.014c-0.183,0.019-0.355,0.07-0.52,0.157s-0.31,0.193-0.438,0.321 \" +\n            \"s-0.228,0.271-0.301,0.431s-0.109,0.313-0.109,0.458c0,0.364,0.104,0.658,0.314,0.882s0.47,0.419,0.779,0.588 \" +\n            \"s0.647,0.333,1.012,0.492s0.704,0.354,1.019,0.581s0.576,0.513,0.786,0.854S25.184,49.7,25.184,50.238z\"}/>\n          <path fill=\"#FFFFFF\" d={\"M35.082,47.914c0,0.848-0.107,1.595-0.321,2.242s-0.511,1.185-0.889,1.613s-0.82,0.752-1.326,0.971 \" +\n            \"s-1.06,0.328-1.661,0.328s-1.155-0.109-1.661-0.328s-0.948-0.542-1.326-0.971s-0.675-0.966-0.889-1.613s-0.321-1.395-0.321-2.242 \" +\n            \"s0.107-1.593,0.321-2.235s0.511-1.178,0.889-1.606s0.82-0.754,1.326-0.978s1.06-0.335,1.661-0.335s1.155,0.111,1.661,0.335 \" +\n            \"s0.948,0.549,1.326,0.978s0.675,0.964,0.889,1.606S35.082,47.066,35.082,47.914z M30.844,51.729c0.337,0,0.658-0.066,0.964-0.198 \" +\n            \"s0.579-0.349,0.82-0.649s0.431-0.695,0.567-1.183s0.21-1.082,0.219-1.784c-0.009-0.684-0.08-1.265-0.212-1.743 \" +\n            \"s-0.314-0.873-0.547-1.183s-0.497-0.533-0.793-0.67s-0.608-0.205-0.937-0.205c-0.337,0-0.658,0.063-0.964,0.191 \" +\n            \"s-0.579,0.344-0.82,0.649s-0.431,0.699-0.567,1.183c-0.137,0.483-0.21,1.075-0.219,1.777c0.009,0.684,0.08,1.267,0.212,1.75 \" +\n            \"s0.314,0.877,0.547,1.183s0.497,0.528,0.793,0.67S30.516,51.729,30.844,51.729z\"}/>\n          <path fill=\"#FFFFFF\" d=\"M44.68,42.924V53h-1.668l-3.951-6.945V53h-1.668V42.924h1.668l3.951,6.945v-6.945H44.68z\"/>\n        </g>\n        <g>\n          <path fill=\"#9777A8\" d=\"M19.5,19v-4c0-0.551,0.448-1,1-1c0.553,0,1-0.448,1-1s-0.447-1-1-1c-1.654,0-3,1.346-3,3v4 c0,1.103-0.897,2-2,2c-0.553,0-1,0.448-1,1s0.447,1,1,1c1.103,0,2,0.897,2,2v4c0,1.654,1.346,3,3,3c0.553,0,1-0.448,1-1 s-0.447-1-1-1c-0.552,0-1-0.449-1-1v-4c0-1.2-0.542-2.266-1.382-3C18.958,21.266,19.5,20.2,19.5,19z\"/>\n          <circle fill=\"#9777A8\" cx=\"27.5\" cy=\"18.5\" r=\"1.5\"/>\n          <path fill=\"#9777A8\" d=\"M39.5,21c-1.103,0-2-0.897-2-2v-4c0-1.654-1.346-3-3-3c-0.553,0-1,0.448-1,1s0.447,1,1,1 c0.552,0,1,0.449,1,1v4c0,1.2,0.542,2.266,1.382,3c-0.84,0.734-1.382,1.8-1.382,3v4c0,0.551-0.448,1-1,1c-0.553,0-1,0.448-1,1 s0.447,1,1,1c1.654,0,3-1.346,3-3v-4c0-1.103,0.897-2,2-2c0.553,0,1-0.448,1-1S40.053,21,39.5,21z\"/>\n          <path fill=\"#9777A8\" d=\"M27.5,24c-0.553,0-1,0.448-1,1v3c0,0.552,0.447,1,1,1s1-0.448,1-1v-3 C28.5,24.448,28.053,24,27.5,24z\"/>\n        </g>\n      </g>\n    </svg>;\n  }\n}\n\nexport default JSONIcon;\n","import React from 'react';\n\nclass CreateIcon extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    return <svg className=\"create-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n      <path d=\"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z\"/>\n      <path d=\"M0 0h24v24H0z\" fill=\"none\"/>\n    </svg>;\n  }\n}\n\nexport default CreateIcon;\n","import React from 'react';\n\nclass MoveIcon extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    return <svg className=\"move-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n      <path d=\"M0 0h24v24H0z\" fill=\"none\"/>\n      <path d=\"M13,6V11H18V7.75L22.25,12L18,16.25V13H13V18H16.25L12,22.25L7.75,18H11V13H6V16.25L1.75,12L6,7.75V11H11V6H7.75L12,1.75L16.25,6H13Z\" />\n    </svg>;\n  }\n}\n\nexport default MoveIcon;\n","import React from 'react';\nimport './CursorMode.css';\n\nimport IconButton from 'icons/IconButton.js';\nimport CreateIcon from 'icons/CreateIcon.js';\nimport MoveIcon from 'icons/MoveIcon.js';\n\nclass CursorMode extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    const inputController = this.props.inputController;\n    const graphController = this.props.graphController;\n    const actionMode = inputController.isActionMode();\n\n    return <div id=\"cursor-btn\">\n      <IconButton id=\"action-mode\" className={actionMode ? \"active\" : \"\"}\n        onClick={() => inputController.setInputScheme(true)}\n        title={I18N.toString(\"cursor.actionmode\")}>\n        <CreateIcon/>\n      </IconButton>\n      <IconButton id=\"move-mode\" className={!actionMode ? \"active\" : \"\"}\n        onClick={() => inputController.setInputScheme(false)}\n        title={I18N.toString(\"cursor.movemode\")}>\n        <MoveIcon/>\n      </IconButton>\n    </div>;\n  }\n}\n\nexport default CursorMode;\n","/**\n * Used by InputAdapter to handle input event logic.\n */\nclass AbstractInputHandler\n{\n  constructor() {}\n\n  /**\n   * Called by InputAdapter before an InputEvent begins.\n   * Returns true if the event should be consumed. If consumed, the event will\n   * not begin.\n   */\n  onPreInputEvent(pointer) { return false; }\n\n  /**\n   * Called by InputAdapter when an InputEvent resolves and is not an Alt input.\n   * To handle events for Alt inputs, refer to onAltInputEvent().\n   * Returns true if the event should be consumed. If consumed, the event will\n   * not propagate to other trigger other events.\n   */\n  onInputEvent(pointer) { return false; }\n\n  /**\n   * Called by InputAdapter when an InputEvent resolves and is an Alt input.\n   * To handle events for non-Alt inputs, refer to onInputEvent().\n   * Returns true if the event should be consumed. If consumed, the event will\n   * not propagate to other trigger other events.\n   */\n  onAltInputEvent(pointer) { return false; }\n\n  /**\n   * Called by InputAdapter when a DblInputEvent resolves. The input is\n   * assumed by a non-Alt input, since only non-Alt inputs can trigger this\n   * event.\n   * Returns true if the event should be consumed. If consumed, the event will\n   * not propagate to other trigger other events.\n   */\n  onDblInputEvent(pointer) { return false; }\n\n  /**\n   * Called by InputAdapter before a drag begins. The input could be either\n   * an Alt or non-Alt input.\n   * Returns true if the event should be consumed. If consumed, the event will\n   * not propagate to other trigger other events, nor continue the drag input.\n   */\n  onDragStart(pointer) { return false; }\n\n  /**\n   * Called by InputAdapter while dragging moves. The input could be either\n   * an Alt or non-Alt input.\n   * Will always be called after onDragStart() and will be followed by\n   * onDragStop() when complete.\n   */\n  onDragMove(pointer) {}\n\n  /**\n   * Called by InputAdapter after a drag ends. The input could be either an\n   * Alt or non-Alt input.\n   * Will always be called after onDragStart(). Although onDragMove may be\n   * called in-between, it is not guaranteed.\n   */\n  onDragStop(pointer) {}\n\n  /**\n   * Called by InputAdapter after an InputEvent ends.\n   */\n  onPostInputEvent(pointer) {}\n\n  /**\n   * Called by InputAdapter when zoom changes.\n   * Returns true if event is consumed (zoom will not be applied)\n   */\n  onZoomChange(pointer, zoomValue, prevValue)\n  {\n    return false;\n  }\n}\n\nexport default AbstractInputHandler;\n","import AbstractInputHandler from 'system/inputadapter/AbstractInputHandler.js';\n\nclass ViewportInputHandler extends AbstractInputHandler\n{\n  constructor()\n  {\n    super();\n\n    this._prevX = 0;\n    this._prevY = 0;\n  }\n\n  //Override\n  onDragStart(pointer)\n  {\n    this._prevX = pointer.x;\n    this._prevY = pointer.y;\n    return true;\n  }\n\n  //Override\n  onDragMove(pointer)\n  {\n    const dx = pointer.x - this._prevX;\n    const dy = pointer.y - this._prevY;\n    const adapter = pointer.getAdapter();\n    const viewport = adapter.getViewport();\n    viewport.addOffset(dx, dy, true);\n    return true;\n  }\n\n  //Override\n  onDragStop(pointer)\n  {\n    //Do nothing. It should already be moved.\n    return true;\n  }\n}\n\nexport default ViewportInputHandler;\n","import AbstractInputHandler from 'system/inputadapter/AbstractInputHandler.js';\n\nimport ViewportInputHandler from './ViewportInputHandler.js';\n\nclass AbstractModuleInputController extends AbstractInputHandler\n{\n  constructor(module, inputAdapter)\n  {\n    super();\n\n    if (!module) throw new Error(\"Missing module for input controller\");\n    if (!inputAdapter) throw new Error(\"Missing inputAdapter for input controller\");\n\n    this._module = module;\n    this._inputAdapter = inputAdapter;\n    inputAdapter.addInputHandler(this);\n    inputAdapter.addInputHandler(new ViewportInputHandler());\n  }\n\n  initialize(module) {}\n  destroy(module) {}\n  update(module) {}\n\n  //Override\n  onPreInputEvent(pointer) { return false; }\n  //Override\n  onInputEvent(pointer) { return false; }\n  //Override\n  onAltInputEvent(pointer) { return this.onInputEvent(pointer); }\n  //Override\n  onDblInputEvent(pointer) { return false; }\n  //Override\n  onDragStart(pointer) { return false; }\n  //Override\n  onDragMove(pointer) { return false; }\n  //Override\n  onDragStop(pointer) { return false; }\n  //Override\n  onPostInputEvent(pointer) {}\n  //Override\n  onZoomChange(pointer, zoomValue, prevValue) { return false; }\n\n  getInputAdapter()\n  {\n    return this._inputAdapter;\n  }\n\n  getModule()\n  {\n    return this._module;\n  }\n}\n\nexport default AbstractModuleInputController;\n","import React from 'react';\n\nclass NFAToDFAConversionWarningMessage extends React.Component\n{\n    constructor(props)\n    {\n        super(props);\n        this.onClick = this.onClick.bind(this);\n    }\n\n    onClick(e)\n    {\n        const message = this.props.message;\n        const buttonValue = e.target.value;\n\n        switch(buttonValue)\n        {\n            case \"convert\":\n                {//FIXME: FSABUILDER: convertMachineTo needs to change?\n                    const machineController = this.props.machineController;\n                    machineController.convertMachineTo(\"DFA\");\n                    message.close();\n                }\n            break;\n            default:\n              throw new Error(\"Unknown button value for message\");\n        }\n    }\n\n    render()\n    {\n        const machineController = this.props.machineController;\n        const stateCount = machineController.countStates();\n\n        return <div>\n          <p>{I18N.toString(\"message.warning.convertNFAToDFA\")}</p>\n          <p>{`${stateCount} states -> ${Math.pow(2, stateCount)} states`}</p>\n          <button value=\"convert\" onClick={this.onClick}>{I18N.toString(\"message.action.convert\")}</button>\n        </div>;\n    }\n}\n\nexport default NFAToDFAConversionWarningMessage;\n","const MAX_HISTORY_LENGTH = 1000;\n\nclass UndoManager\n{\n  constructor()\n  {\n    this.history = [];\n    this.offsetIndex = 0;\n  }\n\n  clear()\n  {\n    this.history.length = 0;\n    this.offsetIndex = 0;\n  }\n\n  captureEvent(eventHandler)\n  {\n    //Pop it all until current event\n    while(this.offsetIndex > 0)\n    {\n      this.history.pop();\n      --this.offsetIndex;\n    }\n\n    //Push the current event to the stack\n    this.history.push(eventHandler);\n\n    while(this.history.length > MAX_HISTORY_LENGTH)\n    {\n      this.history.unshift();\n    }\n  }\n\n  getPreviousEvent()\n  {\n    if (!this.canUndo()) return null;\n    return this.history[this.history.length - this.offsetIndex - 1];\n  }\n\n  getNextEvent()\n  {\n    if (!this.canRedo()) return null;\n    return this.history[this.history.length - this.offsetIndex + 1];\n  }\n\n  undo()\n  {\n    if (!this.canUndo())\n    {\n      //Already the oldest recorded event!\n      return;\n    }\n\n    const event = this.history[this.history.length - this.offsetIndex - 1];\n    ++this.offsetIndex;\n\n    event.applyUndo(this);\n  }\n\n  canUndo()\n  {\n    return this.offsetIndex < this.history.length;\n  }\n\n  redo()\n  {\n    if (!this.canRedo())\n    {\n      //Already the most recent event!\n      return;\n    }\n\n    --this.offsetIndex;\n    const event = this.history[this.history.length - this.offsetIndex - 1];\n\n    event.applyRedo(this);\n  }\n\n  canRedo()\n  {\n    return this.offsetIndex > 0;\n  }\n}\n\nexport default UndoManager;\n","/**\n * Used by InputAdapter to hold input event data.\n */\nclass InputPointer\n{\n  constructor(adapter, element, viewport)\n  {\n    this._adapter = adapter;\n    this._element = element;\n    this._viewport = viewport;\n\n    this._active = false;\n    this._x = 0;\n    this._y = 0;\n\n    this._inputpos = {x: 0, y: 0};\n  }\n\n  get x() { return this._x; }\n  get y() { return this._y; }\n\n  setPosition(x, y)\n  {\n    this._x = x;\n    this._y = y;\n    return this;\n  }\n\n  beginInput()\n  {\n    this._active = true;\n    this._inputpos.x = this._x;\n    this._inputpos.y = this._y;\n  }\n\n  /**\n   * Returns the position which the input began at. This is mutable.\n   */\n  getInputEventPosition()\n  {\n    return this._inputpos;\n  }\n\n  changeInputEventPosition(x, y)\n  {\n    this._inputpos.x = x;\n    this._inputpos.y = y;\n  }\n\n  endInput()\n  {\n    this._active = false;\n  }\n\n  isActive()\n  {\n    return this._active;\n  }\n\n  getDistanceSquToInitial()\n  {\n    const pos = this._inputpos;\n    const dx = pos.x - this._x;\n    const dy = pos.y - this._y;\n    return dx * dx + dy * dy;\n  }\n\n  /**\n   * The DOM element for which this pointer provides context for; this should be\n   * the same element as in the input adapter.\n   */\n  getElement()\n  {\n    return this._element;\n  }\n\n  /**\n   * The viewport for this pointer operates within; this should be the same\n   * viewport as in the input adapter.\n   */\n  getViewport()\n  {\n    return this._viewport;\n  }\n\n  /**\n   * The input adapter that controls this pointer's properties\n   */\n  getAdapter()\n  {\n    return this._adapter;\n  }\n}\n\nexport default InputPointer;\n","/**\n * Represents and handles the transformations to the interactible viewport of\n * the SVG element.\n */\nclass ViewportAdapter\n{\n  constructor()\n  {\n    this._element = null;\n    this._offsetX = 0;\n    this._offsetY = 0;\n    this._nextOffsetX = 0;\n    this._nextOffsetY = 0;\n    this._offsetDamping = 0.1;\n\n    this._scaleFactor = 1;\n    this._minScale = 1;\n    this._maxScale = 1;\n  }\n\n  setElement(element)\n  {\n    this._element = element;\n    return this;\n  }\n\n  setMinScale(scale)\n  {\n    this._minScale = scale;\n    if (this._scaleFactor < this._minScale) this._scaleFactor = this._minScale;\n    return this;\n  }\n\n  setMaxScale(scale)\n  {\n    this._maxScale = scale;\n    if (this._scaleFactor > this._maxScale) this._scaleFactor = this._maxScale;\n    return this;\n  }\n\n  setOffsetDamping(damping)\n  {\n    this._offsetDamping = damping;\n    return this;\n  }\n\n  update()\n  {\n    const dx = this._nextOffsetX - this._offsetX;\n    this._offsetX += dx * this._offsetDamping;\n    const dy = this._nextOffsetY - this._offsetY;\n    this._offsetY += dy * this._offsetDamping;\n  }\n\n  transformScreenToView(clientX, clientY)\n  {\n    if (!this._element) return {x: clientX - this._offsetX, y: clientY - this._offsetY};\n\n    const ctm = this._element.getScreenCTM();\n    return {\n      x: (clientX - ctm.e) / ctm.a - this._offsetX,\n      y: (clientY - ctm.f) / ctm.d - this._offsetY\n    };\n  }\n\n  setOffset(x, y, immediate=false)\n  {\n    if (immediate)\n    {\n      this._nextOffsetX = this._offsetX = x;\n      this._nextOffsetY = this._offsetY = y;\n    }\n    else\n    {\n      this._nextOffsetX = x;\n      this._nextOffsetY = y;\n    }\n  }\n\n  addOffset(dx, dy, immediate=false)\n  {\n    if (immediate)\n    {\n      this._offsetX += dx;\n      this._offsetY += dy;\n      this._nextOffsetX = this._offsetX;\n      this._nextOffsetY = this._offsetY;\n    }\n    else\n    {\n      this._nextOffsetX += dx;\n      this._nextOffsetY += dy;\n    }\n  }\n\n  setScale(scale)\n  {\n    this._scaleFactor = Math.min(this._maxScale, Math.max(this._minScale, scale));\n  }\n\n  addScale(dscale)\n  {\n    this._scaleFactor += dscale;\n\n    if (this._scaleFactor > this._maxScale) this._scaleFactor = this._maxScale;\n    else if (this._scaleFactor < this._minScale) this._scaleFactor = this._minScale;\n  }\n\n  getOffsetX()\n  {\n    return this._offsetX;\n  }\n\n  getOffsetY()\n  {\n    return this._offsetY;\n  }\n\n  getOffsetDamping()\n  {\n    return this._offsetDamping;\n  }\n\n  getScale()\n  {\n    return this._scaleFactor;\n  }\n\n  getMinScale()\n  {\n    return this._minScale;\n  }\n\n  getMaxScale()\n  {\n    return this._maxScale;\n  }\n\n  getElement()\n  {\n    return this._element;\n  }\n}\n\nexport default ViewportAdapter;\n","import InputPointer from './InputPointer.js';\nimport ViewportAdapter from './ViewportAdapter.js';\n\nconst LONG_TAP_TICKS = 600;\nconst DOUBLE_TAP_TICKS = 600;\nconst SCROLL_SENSITIVITY = 1.0 / 300.0;\nconst CURSOR_RADIUS = 4;\nconst CURSOR_RADIUS_SQU = CURSOR_RADIUS * CURSOR_RADIUS;\nconst DRAGGING_BUFFER = 18;\nconst DRAGGING_BUFFER_SQU = DRAGGING_BUFFER * DRAGGING_BUFFER;\n\n/**\n * Provides an interface for input handlers to interact with a HTMLElement.\n * Each listenable element should correspond to only a single InputAdapter.\n */\nclass InputAdapter\n{\n  constructor()\n  {\n    this._handlers = [];\n    this._activeDragHandler = null;\n\n    this._element = null;\n    this._cursor = {\n      _mousemove: null,\n      _mouseup: null,\n      _touchmove: null,\n      _touchend: null,\n      _timer: null\n    };\n    this._pointer = null;\n\n    this._viewport = new ViewportAdapter();\n\n    //Although dragging could be in pointer, it should be here to allow\n    //the adapter to be independent of pointer.\n    this._dragging = false;\n    this._altinput = false;\n\n    this._holdInputDelay = LONG_TAP_TICKS;\n    this._dblInputDelay = DOUBLE_TAP_TICKS;\n    this._scrollSensitivity = SCROLL_SENSITIVITY;\n    this._minTapRadius = CURSOR_RADIUS_SQU * 16;\n    this._draggingRadiusSqu = CURSOR_RADIUS_SQU + DRAGGING_BUFFER_SQU;\n\n    this._prevEmptyInput = false;\n    this._prevEmptyTime = 0;\n    this._prevEmptyX = 0;\n    this._prevEmptyY = 0;\n\n    this.onContextMenu = this.onContextMenu.bind(this);\n    this.onMouseDown = this.onMouseDown.bind(this);\n    this.onMouseMove = this.onMouseMove.bind(this);\n    this.onTouchStart = this.onTouchStart.bind(this);\n    this.onWheel = this.onWheel.bind(this);\n\n    this.onMouseDownThenMove = this.onMouseDownThenMove.bind(this);\n    this.onMouseDownThenUp = this.onMouseDownThenUp.bind(this);\n    this.onTouchStartThenMove = this.onTouchStartThenMove.bind(this);\n    this.onTouchStartThenEnd = this.onTouchStartThenEnd.bind(this);\n\n    this.onDelayedInputDown = this.onDelayedInputDown.bind(this);\n  }\n\n  addInputHandler(handler)\n  {\n    this._handlers.push(handler);\n    return this;\n  }\n\n  removeInputHandler(handler)\n  {\n    const index = this._handlers.indexOf(handler);\n    if (index < 0) return false;\n    this._handlers.splice(index, 1);\n    return true;\n  }\n\n  clearInputHandlers()\n  {\n    this._handlers.clear();\n  }\n\n  hasInputHandlers()\n  {\n    return this._handlers.length > 0;\n  }\n\n  initialize(element)\n  {\n    if (!(element instanceof SVGElement)) throw new Error(\"Missing SVG element for input adapter's viewport\");\n    if (this._element) throw new Error(\"Trying to initialize an InputAdapter already initialized\");\n\n    this._viewport.setElement(this._element = element);\n    this._pointer = new InputPointer(this, this._element, this._viewport);\n\n    this._element.addEventListener('mousedown', this.onMouseDown);\n    this._element.addEventListener('mousemove', this.onMouseMove);\n    this._element.addEventListener('touchstart', this.onTouchStart);\n    this._element.addEventListener('touchmove', this.onTouchMove);\n    this._element.addEventListener('contextmenu', this.onContextMenu);\n    this._element.addEventListener('wheel', this.onWheel);\n  }\n\n  destroy()\n  {\n    if (!this._element) throw new Error(\"Trying to destroy an InputAdapter that is not yet initialized\");\n\n    this._element.removeEventListener('mousedown', this.onMouseDown);\n    this._element.removeEventListener('mousemove', this.onMouseMove);\n    this._element.removeEventListener('touchstart', this.onTouchStart);\n    this._element.removeEventListener('contextmenu', this.onContextMenu);\n    this._element.removeEventListener('wheel', this.onWheel);\n\n    this._element = null;\n  }\n\n  update()\n  {\n    //Smooth transition offset\n    this._viewport.update();\n  }\n\n  handleEvent(eventName, ...eventArgs)\n  {\n    //Let others handle this event...\n    for(const handler of this._handlers)\n    {\n      if (handler[eventName](...eventArgs))\n      {\n        return handler;\n      }\n    }\n\n    return null;\n  }\n\n  onMouseDown(e)\n  {\n    if (!this.hasInputHandlers()) return false;\n\n    e.stopPropagation();\n    e.preventDefault();\n\n    const cursor = this._cursor;\n\n    //Blur any element in focus\n    document.activeElement.blur();\n    this._element.focus();\n\n    //Make sure mouse move is deleted, just in case\n    if (cursor._mousemove)\n    {\n      document.removeEventListener('mousemove', cursor._mousemove);\n      cursor._mousemove = null;\n    }\n    //Make sure mouse up is deleted, just in case\n    if (cursor._mouseup)\n    {\n      document.removeEventListener('mouseup', cursor._mouseup);\n      cursor._mouseup = null;\n    }\n\n    //HACK: To allow Mac's to use ctrl+click as right clicks\n    const button = e.ctrlKey ? 2 : e.button;\n\n    //Is this a valid mouse down?\n    if (this.onInputDown(e.clientX, e.clientY, button))\n    {\n      //Start mouse down logic...\n      cursor._mousemove = this.onMouseDownThenMove;\n      cursor._mouseup = this.onMouseDownThenUp;\n\n      document.addEventListener('mousemove', cursor._mousemove);\n      document.addEventListener('mouseup', cursor._mouseup);\n    }\n\n    return false;\n  }\n\n  onMouseMove(e)\n  {\n    if (!this.hasInputHandlers()) return false;\n\n    const mouse = this._viewport.transformScreenToView(e.clientX, e.clientY);\n    this._pointer.setPosition(mouse.x, mouse.y);\n\n    //Can update target here for hover effects...\n  }\n\n  onMouseDownThenMove(e)\n  {\n    if (!this.hasInputHandlers()) return false;\n\n    e.stopPropagation();\n    e.preventDefault();\n\n    this.onInputMove(e.clientX, e.clientY);\n\n    return false;\n  }\n\n  onMouseDownThenUp(e)\n  {\n    if (!this.hasInputHandlers()) return false;\n\n    e.stopPropagation();\n    e.preventDefault();\n\n    const cursor = this._cursor;\n\n    //Make sure mouse move is deleted, just in case\n    if (cursor._mousemove)\n    {\n      document.removeEventListener('mousemove', cursor._mousemove);\n      cursor._mousemove = null;\n    }\n    //Make sure mouse up is deleted, just in case\n    if (cursor._mouseup)\n    {\n      document.removeEventListener('mouseup', cursor._mouseup);\n      cursor._mouseup = null;\n    }\n\n    this.onInputUp(e.clientX, e.clientY);\n\n    return false;\n  }\n\n  onTouchStart(e)\n  {\n    if (!this.hasInputHandlers()) return false;\n\n    if (e.changedTouches.length == 1)\n    {\n      e.stopPropagation();\n      e.preventDefault();\n\n      const cursor = this._cursor;\n\n      //Blur any element in focus\n      document.activeElement.blur();\n      this._element.focus();\n\n      //Make sure touch move is deleted, just in case\n      if (cursor._touchmove)\n      {\n        document.removeEventListener('touchmove', cursor._touchmove);\n        cursor._touchmove = null;\n      }\n      //Make sure touch end is deleted, just in case\n      if (cursor._touchend)\n      {\n        document.removeEventListener('touchend', cursor._touchend);\n        cursor._touchend = null;\n      }\n\n      const touch = e.changedTouches[0];\n      //Is this a valid touch start?\n      if (this.onInputDown(touch.clientX, touch.clientY, 0))\n      {\n        //Start touch start logic...\n        cursor._touchmove = this.onTouchStartThenMove;\n        cursor._touchend = this.onTouchStartThenEnd;\n\n        document.addEventListener('touchmove', cursor._touchmove);\n        document.addEventListener('touchend', cursor._touchend);\n      }\n\n      return false;\n    }\n  }\n\n  onTouchStartThenEnd(e)\n  {\n    if (!this.hasInputHandlers()) return false;\n\n    e.stopPropagation();\n    e.preventDefault();\n\n    const cursor = this._cursor;\n\n    //Make sure mouse move is deleted, just in case\n    if (cursor._touchmove)\n    {\n      document.removeEventListener('touchmove', cursor._touchmove);\n      cursor._touchmove = null;\n    }\n    //Make sure mouse up is deleted, just in case\n    if (cursor._touchend)\n    {\n      document.removeEventListener('touchend', cursor._touchend);\n      cursor._touchend = null;\n    }\n\n    const touch = e.changedTouches[0];\n    this.onInputUp(touch.clientX, touch.clientY);\n\n    return false;\n  }\n\n  onTouchStartThenMove(e)\n  {\n    if (!this.hasInputHandlers()) return false;\n\n    e.stopPropagation();\n    e.preventDefault();\n\n    const touch = e.changedTouches[0];\n    this.onInputMove(touch.clientX, touch.clientY);\n\n    return false;\n  }\n\n  onContextMenu(e)\n  {\n    if (!this.hasInputHandlers()) return false;\n\n    e.stopPropagation();\n    e.preventDefault();\n\n    return false;\n  }\n\n  onWheel(e)\n  {\n    if (!this.hasInputHandlers()) return false;\n\n    e.stopPropagation();\n    e.preventDefault();\n\n    const pointer = this._pointer;\n    const dy = e.deltaY * this._scrollSensitivity;\n    const prev = this._viewport.getScale();\n    const next = prev + dy;\n\n    //Let others handle this event...\n    if (!this.handleEvent('onZoomChange', pointer, next, prev))\n    {\n      this._viewport.setScale(next);\n    }\n\n    return false;\n  }\n\n  onInputDown(x, y, button)\n  {\n    if (!this.hasInputHandlers()) throw new Error(\"Missing handlers for input adapter\");\n\n    //Setup for hold timer...\n    const cursor = this._cursor;\n    const pointer = this._pointer;\n    const mouse = this._viewport.transformScreenToView(x, y);\n    pointer.setPosition(mouse.x, mouse.y);\n\n    this._dragging = false;\n    this._altinput = button == 2;\n\n    //Let others handle this event...\n    if (!this.handleEvent('onPreInputEvent', pointer))\n    {\n      pointer.beginInput();\n      cursor._timer = setTimeout(this.onDelayedInputDown, this._holdInputDelay);\n      return true;\n    }\n\n    return false;\n  }\n\n  onDelayedInputDown()\n  {\n    if (!this.hasInputHandlers()) throw new Error(\"Missing handlers for input adapter\");\n\n    //That means the input is remaining still (like a hold)...\n    if (!this._dragging)\n    {\n      this._altinput = true;\n    }\n  }\n\n  onInputMove(x, y)\n  {\n    if (!this.hasInputHandlers()) throw new Error(\"Missing handlers for input adapter\");\n\n    const pointer = this._pointer;\n    const mouse = this._viewport.transformScreenToView(x, y);\n    pointer.setPosition(mouse.x, mouse.y);\n\n    if (!this._dragging)\n    {\n      if (pointer.getDistanceSquToInitial() > this._draggingRadiusSqu)\n      {\n        this._dragging = true;\n\n        //Let others handle this event...\n        const result = this.handleEvent('onDragStart', pointer);\n        if (!result)\n        {\n          this._dragging = false;\n\n          //TODO: you could NOT cancel the event and just update the target?\n          //If so, who is the initial target then?\n\n          //Stop the input event early...\n          this.cancelInputEvent();\n        }\n        else\n        {\n          this._activeDragHandler = result;\n        }\n      }\n      else\n      {\n        //Still a click or hold...\n      }\n    }\n    else\n    {\n      //Continue to drag...\n      if (this._activeDragHandler)\n      {\n        this._activeDragHandler.onDragMove(pointer);\n      }\n    }\n  }\n\n  onInputUp(x, y)\n  {\n    if (!this.hasInputHandlers()) throw new Error(\"Missing handlers for input adapter\");\n\n    const cursor = this._cursor;\n    const timer = cursor._timer;\n    if (timer)\n    {\n      clearTimeout(timer);\n      cursor._timer = null;\n    }\n\n    //Update pointer target to final position\n    const pointer = this._pointer;\n    const mouse = this._viewport.transformScreenToView(x, y);\n    pointer.setPosition(mouse.x, mouse.y);\n\n    if (this._dragging)\n    {\n      //Stop dragging!\n      if (this._activeDragHandler)\n      {\n        this._activeDragHandler.onDragStop(pointer);\n        this._activeDragHandler = null;\n      }\n    }\n    else\n    {\n      if (this._altinput)\n      {\n        //Alt Tap!\n        this.handleEvent('onAltInputEvent', pointer);\n      }\n      else\n      {\n        //If the input was not consumed...\n        if (!this.handleEvent('onInputEvent', pointer))\n        {\n          //Try for double tap...\n          const dx = x - this._prevEmptyX;\n          const dy = y - this._prevEmptyY;\n          const dist = dx * dx + dy * dy;\n          const dt = Date.now() - this._prevEmptyTime;\n          if (this._prevEmptyInput &&\n            dist < this._minTapRadius &&\n            dt < this._dblInputDelay)\n          {\n            //Double tap!\n            this.handleEvent('onDblInputEvent', pointer);\n\n            this._prevEmptyInput = false;\n          }\n          else\n          {\n            this._prevEmptyInput = true;\n            this._prevEmptyTime = Date.now();\n            this._prevEmptyX = x;\n            this._prevEmptyY = y;\n          }\n        }\n      }\n    }\n\n    pointer.endInput();\n    this.handleEvent('onPostInputEvent', pointer);\n  }\n\n  cancelInputEvent()\n  {\n    const pointer = this._pointer;\n    const cursor = this._cursor;\n\n    //Make sure mouse move is deleted, just in case\n    if (cursor._mousemove)\n    {\n      document.removeEventListener('mousemove', cursor._mousemove);\n      cursor._mousemove = null;\n    }\n    //Make sure mouse up is deleted, just in case\n    if (cursor._mouseup)\n    {\n      document.removeEventListener('mouseup', cursor._mouseup);\n      cursor._mouseup = null;\n    }\n\n    const timer = cursor._timer;\n    if (timer)\n    {\n      clearTimeout(timer);\n      cursor._timer = null;\n    }\n\n    pointer.endInput();\n    this.handleEvent('onPostInputEvent', pointer);\n  }\n\n  getActiveElement()\n  {\n    return this._element;\n  }\n\n  getViewport()\n  {\n    return this._viewport;\n  }\n\n  getPointerX()\n  {\n    return this._pointer ? this._pointer.x : 0;\n  }\n\n  getPointerY()\n  {\n    return this._pointer ? this._pointer.y : 0;\n  }\n\n  isPointerActive()\n  {\n    return this._pointer ? this._pointer.isActive() : false;\n  }\n\n  isUsingTouch()\n  {\n    return this._cursor._touchmove || this._cursor._touchend;\n  }\n\n  isAltInput()\n  {\n    return this._altinput;\n  }\n\n  isDragging()\n  {\n    return this._dragging;\n  }\n}\n\nexport default InputAdapter;\n","import React from 'react';\nimport './NotificationMessage.css';\n\nclass NotificationMessage extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.onExitMessage = this.onExitMessage.bind(this);\n  }\n\n  onExitMessage(e)\n  {\n    const message = this.props.value;\n    message.close();\n  }\n\n  //Override\n  render()\n  {\n    const message = this.props.value;\n    return <div className={\"notification-message-container notification-message-type-\" + message.getType() + \" \" + this.props.className}\n      id={this.props.id} style={this.props.style}>\n      { this.props.children || message.value.split(\"\\\\n\").map(e => <p key={e}>{e}</p>) || message }\n      <button onClick={this.onExitMessage}>{I18N.toString(\"message.action.close\")}</button>\n    </div>;\n  }\n}\nexport default NotificationMessage;\n","import React from 'react';\nimport './NotificationView.css';\n\nimport NotificationMessage from './NotificationMessage.js';\n\nclass NotificationView extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  //Override\n  render()\n  {\n    const notificationManager = this.props.notificationManager;\n    return <div className={\"notification-container \" + this.props.className} id={this.props.id} style={this.props.style}>\n    {\n      notificationManager.getMessages().map(e => {\n        const id = e.getID();\n        const ComponentClass = e.getComponentClass();\n        const componentProps = e.getComponentProps() || {};\n\n        return <NotificationMessage key={id} value={e}>\n        { ComponentClass && <ComponentClass message={e} {...componentProps}/> }\n        </NotificationMessage>;\n      })\n    }\n    </div>;\n  }\n}\nexport default NotificationView;\n","//Version 0.3.3\nconst changeLog = [\n  \"ADDED: SVG export option (thanks to moreheadm).\",\n  \"FIXED: Edge cannot be created with default symbols.\",\n  \"FIXED: Action mode does not show edge creation as an edit.\",\n  \"FIXED: Wrong undo state for changing initial marker.\"\n];\n\n/*\n  //Version 0.3.2\n  const changeLog = [\n    \"FIXED: Allow cross-platform bundle building.\",\n    \"FIXED: Corrected 'development' mode while in production.\",\n    \"FIXED: NFA unreachable node checking is wrong.\",\n    \"FIXED: Unreachable node warnings were not treated as notification warnings.\",\n    \"Disabled service worker while in 'development' mode.\"\n  ];\n\n  //Version 0.3.1\n  const changeLog = [\n    \"FIXED: Renaming an uploaded file does not download file with new name.\",\n    \"This is our first user-reported bug! Hooray!\",\n    \"Thank you and have a hug whoever you are <3.\"\n  ];\n*/\n\nconst changeVersion = process.env.VERSION;\nconst result = {\n  show: changeLog && changeLog.length > 0,\n  log: \"\\nChangelog v\" + changeVersion + \":\\n - \" + changeLog.join(\"\\n - \"),\n  version: changeVersion\n}\nexport default result;\n","import React from 'react';\n\nclass Logo extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  //Override\n  render()\n  {\n    return <svg version=\"1.1\" id={this.props.id} xmlns=\"http://www.w3.org/2000/svg\" x=\"0px\" y=\"0px\"\n    \t viewBox=\"0 0 300 100\">\n      <style type=\"text/css\">\n      {\n      \t`.st0{fill:none;stroke:#000000;stroke-miterlimit:10;}\n      \t.st1{fill:#FFC82C;stroke:#7E55F3;stroke-width:2;stroke-miterlimit:10;}\n      \t.st2{fill:none;stroke:#000000;stroke-width:2;stroke-miterlimit:10;}\n      \t.st3{font-family:'PTSans-Regular';}\n      \t.st4{font-size:90px;}\n      \t.st5{fill:none;}`\n      }\n      </style>\n      <path className=\"st0\" d=\"M43.7,20.1c0-9.4-8.5-17.1-19.1-17.1\"/>\n      <circle className=\"st1\" cx=\"44.1\" cy=\"45.3\" r=\"29.6\"/>\n      <polygon className=\"st2\" points=\"44.1,42.1 20.2,83.5 68,83.5 \"/>\n      <text transform=\"matrix(1 0 0 1 74.1533 77.1901)\" className=\"st3 st4\">flap.js</text>\n      <path className=\"st5\" d=\"M40.9,89c0,2.9,73.6,5.2,164.6,5.2\"/>\n      <path className=\"st5\" d=\"M228.2,65.6c0,15.8-10.1,28.6-22.7,28.6\"/>\n      <path className=\"st5\" d=\"M42.4,83.9c0,7,73,12.6,163.1,12.6\"/>\n      <path className=\"st5\" d=\"M228.2,65.6c0,15.8-10.1,28.6-22.7,28.6\"/>\n      <path className=\"st5\" d=\"M228.2,65.6c0,15.8-10.1,28.6-22.7,28.6\"/>\n      <path className=\"st0\" d=\"M227.6,72.1c0,13.7-22.7,24.8-50.7,24.8\"/>\n      <path className=\"st0\" d=\"M6,20.1C6,10.7,14.5,3.1,25,3.1\"/>\n      <line className=\"st0\" x1=\"6\" y1=\"20.1\" x2=\"6\" y2=\"77.2\"/>\n      <path className=\"st0\" d=\"M6,77.2C6,88.1,27,96.9,53,96.9\"/>\n      <line className=\"st0\" x1=\"57.3\" y1=\"96.9\" x2=\"177.4\" y2=\"96.9\"/>\n      <line className=\"st0\" x1=\"53\" y1=\"96.9\" x2=\"64.5\" y2=\"96.9\"/>\n    </svg>;\n  }\n}\n\nexport default Logo;\n","import React from 'react';\nimport './Quote.css';\n\nclass Quote extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n  }\n\n  render()\n  {\n    return <div className=\"quote-container\">\n      <div className=\"quote\">\n        {this.props.value}\n      </div>\n      <div className=\"subquote\">\n        {this.props.label}\n      </div>\n    </div>;\n  }\n}\n\nexport default Quote;\n","import React from 'react';\nimport { hot } from 'react-hot-loader/root';\nimport './LandingPage.css';\n\nimport Router from 'router.js';\n\nimport Logo from './Logo.js';\nimport Quote from './Quote.js';\n\nimport App from 'content/App.js';\n\nconst LAUNCH_BUTTON_TEXT = \"Launch Workspace\";\nconst SMALL_LAUNCH_BUTTON_TEXT = \"Get Started!\";\nconst SMALLER_LAUNCH_BUTTON_TEXT = \"Proceed.\";\nconst TUTORIAL_BUTTON_TEXT = \"= Want to try our awesome tutorial? =\";\n\nconst QUOTES = [\n  [\"Explore what it means to be \\'computable\\'.\", \"- Prof. Mia Minnes\"],\n  [\"Lush has an interactive background in Mozilla\", \"- David\"],\n  [\"Good almost afternoon (I totally didn’t just wake up).\", \"- Noah\"],\n  [\"RONALDO IS MY GOD\", \"- David\"],\n  [\"If you dream it, you can do it.\", \"- Walt Disney\"],\n  [\"Never, never, never give up.\", \"- Winston Churchill\"],\n  [\"Don't wait. The time will never be just right.\", \"- Napolean Hill\"],\n  [\"I can, therefore I am.\", \"- Simone Wei\"],\n  [\"Turn your wounds into wisdom.\", \"- Oprah Winfrey\"],\n  [\"Believe you can and you're halfway there.\", \"- Theodore Roosevelt\"],\n  [\"80% of success is showing up.\", \"- Woody Allen\"],\n  [\"A jug fills drop by drop.\", \"- Buddha\"],\n  [\"If you have never failed you have never lived.\", \"- Human\"],\n  [\"Dream big and dare to fail.\", \"- Norman Vaughan\"],\n  [\"Have faith in yourself and in the future.\", \"- Ted Kennedy\"],\n  [\"It's kind of fun to do the impossible.\", \"- Walt Disney\"],\n  [\"Find out who you are and do it on purpose.\", \"- Dolly Parton\"],\n  [\"The only journey is the one within.\", \"- Rainer Maria Rilke\"],\n  [\"Every moment is a fresh beginning.\", \"- T.S. Eliot\"],\n  [\"Be willing to be a beginner every single morning.\", \"- Meister Eckhart\"]\n];\nconst QUOTE_INDEX = Math.floor(Math.random() * QUOTES.length);\nconst [CONTENT_QUOTE, CONTENT_SUBQUOTE] = QUOTES[QUOTE_INDEX];\n\nconst TUTORIAL_LINK = \"https://github.com/flapjs/FLAPJS-WebApp/blob/master/docs/HELP.md\";\nconst HELP_LINK = \"https://github.com/flapjs/FLAPJS-WebApp/blob/master/docs/HELP.md\";\nconst ABOUT_LINK = \"https://github.com/flapjs/FLAPJS-WebApp/blob/master/README.md\";\nconst REPORT_BUG_LINK = \"https://goo.gl/forms/XSil43Xl5xLHsa0E2\";\nconst GITHUB_LINK = \"https://github.com/flapjs/FLAPJS-WebApp/\";\n\nconst PROFMINNES_LINK = \"http://cseweb.ucsd.edu/~minnes/\";\nconst MAYA_LINK = \"https://www.linkedin.com/in/maya-bello-6b8637a7/\";\nconst NOAH_LINK = \"https://www.linkedin.com/in/noah-solomon-9a8526129/\";\nconst DAVID_LINK = \"https://www.linkedin.com/in/osunadavid/\";\nconst ERIK_LINK = \"https://www.linkedin.com/in/xuanqiang-zhao-364225153/\";\nconst LIXUAN_LINK = \"https://www.linkedin.com/in/lixuan-lang-3ba206143/\";\nconst ANDREW_LINK = \"https://www.linkedin.com/in/andrew-kuo-790243132/\";\nconst SETH_LINK = \"\";\nconst RAVNEET_LINK = \"\";\n\nclass LandingPage extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.footer = null;\n    this.returnHome = null;\n\n    this.onLaunchButton = this.onLaunchButton.bind(this);\n    this.onTutorialButton = this.onTutorialButton.bind(this);\n    this.onReturnHomeButton = this.onReturnHomeButton.bind(this);\n    this.onReportBugButton = this.onReportBugButton.bind(this);\n    this.onAboutButton = this.onAboutButton.bind(this);\n    this.onHelpButton = this.onHelpButton.bind(this);\n    this.onGithubButton = this.onGithubButton.bind(this);\n  }\n\n  componentDidMount()\n  {\n    //Parallax effect for footer\n    window.onscroll = (e) => {\n      let height = Math.max(\n        document.body.scrollHeight, document.documentElement.scrollHeight,\n        document.body.offsetHeight, document.documentElement.offsetHeight,\n        document.body.clientHeight, document.documentElement.clientHeight\n      ) - window.innerHeight;\n      let scroll = window.pageYOffset;\n      const value = Math.round(height - scroll) / 5;\n\n      if (this.footer && this.returnHome)\n      {\n        this.footer.style.bottom = value + \"px\";\n        this.returnHome.style.opacity = (scroll / height);\n      }\n    };\n  }\n\n  onLaunchButton(e)\n  {\n    //import(/* webpackChunkName: \"content\" */ 'content/App.js').then(({ default: _ }) => { Router.routeTo( _ ); });\n    Router.routeTo(App);\n  }\n\n  onTutorialButton(e)\n  {\n    const newTab = window.open(TUTORIAL_LINK, '_blank');\n    newTab.focus();\n  }\n\n  onReturnHomeButton(e)\n  {\n    window.scrollTo({ top: 0, behavior: 'smooth' });\n  }\n\n  onReportBugButton(e)\n  {\n    const newTab = window.open(REPORT_BUG_LINK, '_blank');\n    newTab.focus();\n  }\n\n  onAboutButton(e)\n  {\n    const newTab = window.open(ABOUT_LINK, '_blank');\n    newTab.focus();\n  }\n\n  onHelpButton(e)\n  {\n    const newTab = window.open(HELP_LINK, '_blank');\n    newTab.focus();\n  }\n\n  onGithubButton(e)\n  {\n    const newTab = window.open(GITHUB_LINK, '_blank');\n    newTab.focus();\n  }\n\n  render()\n  {\n    let launchText;\n\n    //Smallest\n    if (window.matchMedia(\"(max-width: 400px)\").matches)\n    {\n      launchText = \"\";\n    }\n    //Smaller\n    else if (window.matchMedia(\"(max-width: 760px)\").matches)\n    {\n      launchText = SMALLER_LAUNCH_BUTTON_TEXT;\n    }\n    //Small\n    else if (window.matchMedia(\"(max-width: 68em)\").matches)\n    {\n      launchText = SMALL_LAUNCH_BUTTON_TEXT;\n    }\n    //Default\n    else\n    {\n      launchText = LAUNCH_BUTTON_TEXT;\n    }\n\n    return <div className=\"landing-container\">\n\n      <div className=\"content-container\">\n\n        {/* HEADER*/}\n        <header>\n          <Logo id=\"logo\"/>\n        </header>\n\n        {/* CONTENT */}\n        <div className=\"content\">\n          <div className=\"content-quote-container\">\n            <Quote value={CONTENT_QUOTE} label={CONTENT_SUBQUOTE} />\n          </div>\n          <div className=\"launch-container\">\n            <div className=\"set-container\">\n              <span className=\"openset\">{\"{\"}</span>\n              <button id=\"launch-button\" onClick={this.onLaunchButton}>\n                {launchText}\n              </button>\n              <span className=\"closeset\">{\"}\"}</span>\n            </div>\n            <div id=\"tutorial-button-container\">\n              <button id=\"tutorial-button\" onClick={this.onTutorialButton}>\n                {TUTORIAL_BUTTON_TEXT}\n              </button>\n            </div>\n          </div>\n        </div>\n\n        <div ref={ref=>this.returnHome=ref} id=\"return-home\">\n          <svg xmlns=\"http://www.w3.org/2000/svg\"\n            width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"\n            onClick={this.onReturnHomeButton}>\n              <path fill=\"none\" d=\"M0 0h24v24H0V0z\"/>\n              <path d=\"M4 12l1.41 1.41L11 7.83V20h2V7.83l5.58 5.59L20 12l-8-8-8 8z\"/>\n          </svg>\n        </div>\n      </div>\n\n      {/* FOOTER */}\n      <footer ref={ref=>this.footer=ref}>\n        <div className=\"utility\">\n          <div><a className=\"info\" onClick={this.onReportBugButton}>Report a Bug</a></div>\n          <div><a className=\"info\" onClick={this.onAboutButton}>About</a></div>\n          <div><a className=\"info\" onClick={this.onHelpButton}>Help</a></div>\n        </div>\n        <div className=\"credits\">\n          <span className=\"space\"></span>\n          <span className=\"left\">\n            <div>Professor</div>\n            <a className=\"nobreak\" onClick={()=>window.open(PROFMINNES_LINK, '_blank').focus()}>Mia Minnes</a>\n          </span>\n          <span className=\"right\">\n            <div>Developers</div>\n            <a onClick={()=>window.open(ANDREW_LINK, '_blank').focus()}>Andrew</a>\n            <a onClick={()=>window.open(LIXUAN_LINK, '_blank').focus()}>Lixuan</a>\n            <a onClick={()=>window.open(RAVNEET_LINK, '_blank').focus()}>Ravneet</a>\n            <a onClick={()=>window.open(SETH_LINK, '_blank').focus()}>Seth</a>\n            <div>+</div>\n            <a onClick={()=>window.open(MAYA_LINK, '_blank').focus()}>Maya</a>\n            <a onClick={()=>window.open(NOAH_LINK, '_blank').focus()}>Noah</a>\n            <a onClick={()=>window.open(DAVID_LINK, '_blank').focus()}>David</a>\n            <a onClick={()=>window.open(ERIK_LINK, '_blank').focus()}>Erik</a>\n          </span>\n          <span className=\"space\"></span>\n        </div>\n\n        <div>\n          <a className=\"info\" onClick={this.onGithubButton}>\n            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n              <path fill=\"none\" d=\"M0 0h24v24H0V0z\"/>\n              <path d=\"M9.4 16.6L4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0l4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z\"/>\n            </svg>\n            Find it on <b>GitHub</b>\n          </a>\n        </div>\n\n        <div className=\"subtitle-container\">\n          <div className=\"subtitle\">\n            {\"\\u00A9 2018 University of California, San Diego. All rights reserved.\"}\n          </div>\n          <div className=\"subtitle\">\n            <label>{\"Thank you for reading me! Stay amazing!\"}</label>\n          </div>\n        </div>\n      </footer>\n    </div>;\n  }\n}\n\n//For hotloading this class\nexport default hot(LandingPage);\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\n//Changelog: imports\nimport Changelog from 'changelog.js';\n\n//Router: imports\nimport Router from 'router.js';\nimport App from 'content/App.js';\nimport LandingPage from 'landing/components/LandingPage.js';\n\n//Config: imports\nimport Config from 'config.js';\nimport { loadConfig, saveConfig } from 'config.js';\nconst AUTOSAVE_CONFIG = true;\n//LocalSave: imports\nimport LocalSave from 'system/localsave/LocalSave.js';\n\nconst SHOULD_WARN_USERS_ON_EXIT = true;\n\n//Setup viewport\nwindow.addEventListener('load', (event) => {\n  console.log(\"Preparing for \\'\" + process.env.NODE_ENV + \"\\' environment...\");\n  console.log(\"Loading web app version \\'\" + process.env.VERSION + \"\\'...\");\n  loadApplication();\n  window.requestAnimationFrame(updateApplication);\n});\n\n//Warn user before exit\nwindow.addEventListener('beforeunload', (event) => {\n  //Config: Only save if changes were made\n  if (AUTOSAVE_CONFIG) saveConfig();\n\n  if (SHOULD_WARN_USERS_ON_EXIT && LocalSave.getStringFromStorage(\"disableExitWarning\") !== \"true\")\n  {\n    const message = I18N.toString(\"alert.window.exit\");\n    event = event || window.event;\n    // For IE and Firefox\n    if (event) event.returnValue = message;\n\n    //For Safari\n    return message;\n  }\n\n  unloadApplication();\n});\n\n//Tell the client that an update is available\nwindow.isUpdateAvailable.then(hasUpdate => {\n  if (hasUpdate)\n  {\n    let message = \"\";\n    if (Changelog && Changelog['show'])\n    {\n      message += Changelog['log'];\n    }\n\n    console.log(\"[App] Found update for version \" + process.env.VERSION + \"...\");\n    window.alert(\"*** New update available! *** \\n Please restart the browser.\" +\n      (message ? \"\\n\" + message : \"\"));\n  }\n});\n\n//Setup application\nconst FRAMES_PER_SECOND = 60;\nvar prevtime = 0;\nvar root;\nvar dt;\n\n//Load application\nfunction loadApplication()\n{\n  LocalSave.initialize();\n\n  loadConfig();\n  root = document.getElementById(\"root\");\n\n  //This should be the same as the one referred to by OptionsPanel\n  if (LocalSave.getStringFromStorage(\"enableExperimental\") === \"true\")\n  {\n    import(/* webpackChunkName: \"experimental\" */ 'experimental/App.js')\n      .then(({ default: _ }) => Router.routeTo( _ ));\n  }\n  else if (LocalSave.getStringFromStorage(\"skipWelcome\") === \"true\")\n  {\n    Router.routeTo(App);\n  }\n  else\n  {\n    Router.routeTo(LandingPage);\n  }\n}\n\n//Update application\nfunction updateApplication(time)\n{\n  dt = (time - prevtime) / FRAMES_PER_SECOND;\n  {\n    const page = Router.getCurrentPage();\n    const pageProps = Router.getCurrentPageProps();\n    if (page)\n    {\n      ReactDOM.render(React.createElement(page, pageProps), root);\n    }\n  }\n  prevtime = time;\n  window.requestAnimationFrame(updateApplication);\n}\n\n//Unload application\nfunction unloadApplication()\n{\n  LocalSave.terminate();\n}\n"],"sourceRoot":""}