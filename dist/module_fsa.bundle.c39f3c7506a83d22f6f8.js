(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{104:function(e,t,n){"use strict";n.r(t);var r=n(26),o=n(4),i=n(0),a=n.n(i),l=(n(87),n(88),n(3));function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var h=function(e){function t(e){var n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=c(t).call(this,e))||"object"!==u(o)&&"function"!=typeof o?p(r):o).element=null,n.ignoreSaveOnExit=!1;var i=e.defaultValue||"";return n.state={value:i,prevValue:i},n.onChange=n.onChange.bind(p(p(n))),n.onBlur=n.onBlur.bind(p(p(n))),n.onKeyUp=n.onKeyUp.bind(p(p(n))),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(t,a.a.Component),n=t,(r=[{key:"componentWillReceiveProps",value:function(e){this.hasFocus()||(!this.state.value||this.state.value.length<=0||this.state.value===this.props.defaultValue)&&this.setState({value:e.defaultValue})}},{key:"focus",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]?this.element.select():this.element.focus()}},{key:"blur",value:function(){this.element.blur()}},{key:"hasFocus",value:function(){return this.element===document.activeElement}},{key:"onChange",value:function(e){if(this.props.filter){var t=e.target.value.replace(this.props.filter,"");this.setState({value:t})}else this.setState({value:e.target.value})}},{key:"onBlur",value:function(e){var t=this;if(this.ignoreSaveOnExit||"none"==this.props.captureOnExit){var n=this.formatValue(e.target.value);return this.setState({value:n}),void(this.ignoreSaveOnExit=!1)}if("save"==this.props.captureOnExit){var r=this.state.prevValue,o=e.target.value||this.props.defaultValue||"";this.resetValue(o,function(){t.props.onSubmit&&t.props.onSubmit(o,r)})}else"reset"==this.props.captureOnExit&&this.resetValue(null)}},{key:"onKeyUp",value:function(e){var t=this;if("Enter"==e.key){var n=this.state.prevValue,r=e.target.value||this.props.defaultValue||"";return this.resetValue(r,function(){t.ignoreSaveOnExit=!0,t.props.onSubmit&&t.props.onSubmit(r,n),t.element.blur()}),!1}if("Escape"==e.key){var o=this.state.prevValue;return this.resetValue(o,function(){t.ignoreSaveOnExit=!0,t.props.onSubmit&&t.props.onSubmit(o||"",o),t.element.blur()}),!1}}},{key:"resetValue",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;if(null!=t){var r=this.formatValue(t);this.setState({value:r,prevValue:r},n)}else this.setState(function(t,n){return{value:e.formatValue(t.prevValue)}},n)}},{key:"setValue",value:function(e,t){e=e&&0!=e.length?this.formatValue(e):this.props.defaultValue||"",this.setState({value:e},t)}},{key:"appendValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:",",n=this.state.value;n=0==this.element.selectionStart&&this.element.selectionEnd==e.length?e:n&&0!=n.length?n+t+e:e,this.props.filter&&(n=n.replace(this.props.filter,"")),this.setState({value:this.formatValue(n)})}},{key:"formatValue",value:function(e){return(0,this.props.formatter)(e)||""}},{key:"render",value:function(){var e=this;return a.a.createElement("input",{id:this.props.id,className:this.props.className,style:this.props.style,ref:function(t){return e.element=t},type:"text",value:this.state.value,onChange:this.onChange,onBlur:this.onBlur,onKeyUp:this.onKeyUp})}},{key:"value",get:function(){return this.state.value}}])&&s(n.prototype,r),o&&s(n,o),t}(),y=(n(89),n(90),n(24)),v=n(25);function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t){return!t||"object"!==g(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var E=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=b(this,m(t).call(this,e))).dropdown=a.a.createRef(),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}(t,a.a.Component),n=t,(r=[{key:"isOpen",value:function(){return!!this.dropdown.state&&this.dropdown.state.open}},{key:"render",value:function(){var e=this;return a.a.createElement("div",{className:"infoblock-container "+this.props.className},a.a.createElement("div",{className:"infoblock-header",onClick:function(t){return e.dropdown.onClick(t)}},a.a.createElement("label",null,this.props.title),a.a.createElement(y.a,{id:"collapse",ref:function(t){return e.dropdown=t},defaultValue:this.props.defaultValue,style:{pointerEvents:"none"}},a.a.createElement(v.a,null))),a.a.createElement("div",{className:"infoblock-content",style:{display:this.isOpen()?"block":"none"}},this.props.children))}}])&&d(n.prototype,r),o&&d(n,o),t}(),S=n(5);function _(e){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function k(e,t){return!t||"object"!==_(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function N(e,t){return(N=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var j=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),k(this,C(t).call(this,e))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&N(e,t)}(t,a.a.Component),n=t,(r=[{key:"render",value:function(){return a.a.createElement("svg",{className:"boxadd-icon",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},a.a.createElement("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10h-4v4h-2v-4H7v-2h4V7h2v4h4v2z"}),a.a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}))}}])&&O(n.prototype,r),o&&O(n,o),t}();function P(e){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function x(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function T(e,t){return!t||"object"!==P(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function M(e){return(M=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function D(e,t){return(D=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var I=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),T(this,M(t).call(this,e))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&D(e,t)}(t,a.a.Component),n=t,(r=[{key:"render",value:function(){return a.a.createElement("svg",{className:"triangle-icon",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},a.a.createElement("path",{d:"M12 7.77L18.39 18H5.61L12 7.77M12 4L2 20h20L12 4z"}),a.a.createElement("path",{fill:"none",d:"M0 0h24v24H0V0z"}))}}])&&x(n.prototype,r),o&&x(n,o),t}();n(91);function L(e){return(L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function A(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function R(e){return(R=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function G(e,t){return(G=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function B(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var F=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=R(t).call(this,e))||"object"!==L(o)&&"function"!=typeof o?B(r):o).state={value:null,error:!1},n.onValueChange=n.onValueChange.bind(B(B(n))),n.onFocus=n.onFocus.bind(B(B(n))),n.onBlur=n.onBlur.bind(B(B(n))),n.onKeyDown=n.onKeyDown.bind(B(B(n))),n.onKeyUp=n.onKeyUp.bind(B(B(n))),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&G(e,t)}(t,a.a.Component),n=t,(r=[{key:"onFocus",value:function(e){var t=e.target;this.setState({value:this.props.label,error:!1},function(){t.select()}),this.props.onFocus&&this.props.onFocus(e)}},{key:"onBlur",value:function(e){var t=this.props.graphController,n=this.state.value;if(null!=n){var r=this.props.src,o=t.getGraph();if(n.length>0)o.getNodesByLabel(n).length<=0&&t.renameNode(r,n);else t.deleteTargetNode(this.props.src);this.setState({value:null,error:!1}),this.props.onBlur&&this.props.onBlur(e)}}},{key:"onKeyDown",value:function(e){e.keyCode!==l.a.SUBMIT_KEY&&e.keyCode!==l.a.CLEAR_KEY||e.preventDefault()}},{key:"onKeyUp",value:function(e){if(e.keyCode===l.a.SUBMIT_KEY)e.target.blur();else if(e.keyCode===l.a.CLEAR_KEY){var t=e.target;this.setState({value:null,error:!1},function(){t.blur()})}}},{key:"onValueChange",value:function(e){var t=this.props.graphController.getGraph(),n=e.target.value.trim(),r=!1;if(n.length>0){var o=t.getNodesByLabel(n);o.length>0&&(o.length>1||o[0]!==this.props.src)&&(r=!0)}this.setState({value:n,error:r})}},{key:"render",value:function(){var e=this.props.src.getNodeCustom(),t=null!=this.state.value?this.state.value:this.props.label;return a.a.createElement("div",{className:"statetag-container"+(e?" customtag":"")+(0==t.length?" emptytag":"")+(this.state.value&&this.state.error?" errortag":"")},a.a.createElement("input",{type:"text",className:this.props.accept?" accept":"",spellCheck:"false",style:{width:t.length+"ch"},value:t,onChange:this.onValueChange,onFocus:this.onFocus,onBlur:this.onBlur,onKeyUp:this.onKeyUp,onKeyDown:this.onKeyDown}))}}])&&A(n.prototype,r),o&&A(n,o),t}();function U(e){return(U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function H(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function z(e){return(z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function V(e,t){return(V=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Q(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var K=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=z(t).call(this,e))||"object"!==U(o)&&"function"!=typeof o?Q(r):o).onStateCreate=n.onStateCreate.bind(Q(Q(n))),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&V(e,t)}(t,a.a.Component),n=t,(r=[{key:"onStateCreate",value:function(e){var t=100*Math.random()*2-100,n=100*Math.random()*2-100;this.props.graphController.createNode(t,n)}},{key:"render",value:function(){var e=this.props.graphController,t=e.getGraph();return a.a.createElement(E,{title:I18N.toString("component.stateslist.title"),defaultValue:"true"},a.a.createElement("div",{className:"statelist-container"},a.a.createElement("div",{className:"statelist"},a.a.createElement(I,null),t.getNodes().map(function(t,n){return a.a.createElement(F,{key:t.getGraphElementID(),src:t,label:t.getNodeLabel(),accept:t.getNodeAccept(),graphController:e,onFocus:function(n){return e.focusOnNode(t)}})})),a.a.createElement(S.a,{onClick:this.onStateCreate},a.a.createElement(j,null))))}}])&&H(n.prototype,r),o&&H(n,o),t}();n(92),n(93);function Y(e){return(Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function X(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function q(e){return(q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function W(e,t){return(W=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function J(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var Z=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=q(t).call(this,e))||"object"!==Y(o)&&"function"!=typeof o?J(r):o).ref=null,n.state={symbol:null,error:!1},n.onValueChange=n.onValueChange.bind(J(J(n))),n.onFocus=n.onFocus.bind(J(J(n))),n.onBlur=n.onBlur.bind(J(J(n))),n.onKeyDown=n.onKeyDown.bind(J(J(n))),n.onKeyUp=n.onKeyUp.bind(J(J(n))),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&W(e,t)}(t,a.a.Component),n=t,(r=[{key:"onFocus",value:function(e){var t=e.target;this.setState({symbol:this.props.src,error:!1},function(){return t.select()}),this.props.onFocus&&this.props.onFocus(e)}},{key:"onBlur",value:function(e){var t=this.props.machineController,n=this.state.symbol;if(null!=n){var r=this.props.src;if(n.length>0)t.getAlphabet().includes(n)||(r?t.renameSymbol(r,n):t.createSymbol(n));else r&&t.deleteSymbol(r)}this.setState({symbol:null,error:!1}),this.props.onBlur&&this.props.onBlur(e)}},{key:"onKeyDown",value:function(e){e.keyCode!==l.a.SUBMIT_KEY&&e.keyCode!==l.a.CLEAR_KEY||e.preventDefault()}},{key:"onKeyUp",value:function(e){if(e.keyCode===l.a.SUBMIT_KEY)e.target.blur();else if(e.keyCode===l.a.CLEAR_KEY){var t=e.target;this.setState({symbol:null,error:!1},function(){t.blur()})}}},{key:"onValueChange",value:function(e){var t=this.props.machineController,n=e.target.value.trim(),r=!1;n.length>0&&(t.getAlphabet().includes(n)&&n!=this.props.src&&(r=!0));this.setState({symbol:n,error:r})}},{key:"render",value:function(){var e=this,t=null!=this.state.symbol?this.state.symbol:this.props.src;return a.a.createElement("div",{className:"alphatag-container"+(!this.props.src||t&&0!=t.length?"":" emptytag")+(this.state.symbol&&this.state.error?" errortag":"")},a.a.createElement("input",{type:"text",ref:function(t){return e.ref=t},className:"alphatag-input",spellCheck:"false",maxLength:"1",value:t,onChange:this.onValueChange,onFocus:this.onFocus,onBlur:this.onBlur,onKeyUp:this.onKeyUp,onKeyDown:this.onKeyDown}))}}])&&X(n.prototype,r),o&&X(n,o),t}();function $(e){return($="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ee(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function te(e){return(te=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ne(e,t){return(ne=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function re(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var oe=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=te(t).call(this,e))||"object"!==$(o)&&"function"!=typeof o?re(r):o).editingTag=null,n.state={editing:!1},n.onSymbolCreate=n.onSymbolCreate.bind(re(re(n))),n.onStopEditing=n.onStopEditing.bind(re(re(n))),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ne(e,t)}(t,a.a.Component),n=t,(r=[{key:"onSymbolCreate",value:function(e){var t=this;this.setState({editing:!0},function(){t.editingTag.ref.focus()})}},{key:"onStopEditing",value:function(e){this.setState({editing:!1})}},{key:"render",value:function(){var e=this,t=this.props.machineController,n=t.getAlphabet();return a.a.createElement(E,{title:I18N.toString("component.alphabetlist.title")},a.a.createElement("div",{className:"alphalist-container"},a.a.createElement("div",{className:"alphalist"},n.map(function(e,n){return a.a.createElement(Z,{key:e+"."+n,src:e,machineController:t})}),this.state.editing&&a.a.createElement(Z,{ref:function(t){return e.editingTag=t},src:"",machineController:t,onBlur:this.onStopEditing})),a.a.createElement(S.a,{onClick:this.onSymbolCreate},a.a.createElement(j,null))))}}])&&ee(n.prototype,r),o&&ee(n,o),t}();n(94);function ie(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var ae=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._states=[],this._transitions=[],this._finalStates=[],this._customAlphabet=[]}var t,n,r;return t=e,(n=[{key:"clear",value:function(){this._states.length=0,this._transitions.length=0,this._finalStates.length=0,this._customAlphabet.length=0}},{key:"copy",value:function(e){this._states.length=0;var t=!0,n=!1,r=void 0;try{for(var o,i=e._states[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var a=o.value;this._states.push(a)}}catch(e){n=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}this._transitions.length=0;var l=!0,u=!1,s=void 0;try{for(var c,f=e._transitions[Symbol.iterator]();!(l=(c=f.next()).done);l=!0){var p=c.value;this._transitions.push(p.slice())}}catch(e){u=!0,s=e}finally{try{l||null==f.return||f.return()}finally{if(u)throw s}}this._finalStates.length=0;var h=!0,y=!1,v=void 0;try{for(var g,d=e._finalStates[Symbol.iterator]();!(h=(g=d.next()).done);h=!0){var b=g.value;this._finalStates.push(b)}}catch(e){y=!0,v=e}finally{try{h||null==d.return||d.return()}finally{if(y)throw v}}this._customAlphabet.length=0;var m=!0,w=!1,E=void 0;try{for(var S,_=e._customAlphabet[Symbol.iterator]();!(m=(S=_.next()).done);m=!0){var O=S.value;this._customAlphabet.push(O)}}catch(e){w=!0,E=e}finally{try{m||null==_.return||_.return()}finally{if(w)throw E}}}},{key:"newState",value:function(e){if(this._states.includes(e))throw new Error("State '"+e+"' already added to states.");return this._states.push(e),e}},{key:"deleteState",value:function(e){if(!this._states.includes(e))throw new Error("State '"+e+"' does not exist.");this._states.splice(this._states.indexOf(e),1)}},{key:"renameState",value:function(e,t){if(!this._states.includes(e))throw new Error("State '"+e+"' does not exist.");if(this._states.includes(t))throw new Error("State '"+t+"' already exists.");var n=!0,r=!1,o=void 0;try{for(var i,a=this._transitions[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var l=i.value;l[0]==e&&(l[0]=t),l[2]==e&&(l[2]=t)}}catch(e){r=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}var u=this._states.indexOf(e);this._states[u]=t}},{key:"newTransition",value:function(e,t,n){if(!this._states.includes(e))throw new Error("State '"+e+"' does not exist.");if(!this._states.includes(t))throw new Error("State '"+t+"' does not exist.");var r=!0,o=!1,i=void 0;try{for(var a,l=this._transitions[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var u=a.value;if(u[0]==e&&u[1]==n&&u[2]==t)return}}catch(e){o=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw i}}this._transitions.push([e,n,t])}},{key:"deleteTransition",value:function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=this._transitions.length-1;r>=0;--r){var o=this._transitions[r];o[0]==e&&o[2]==t&&(null!=n&&o[1]!=n||this._transitions.splice(r,1))}}},{key:"newSymbol",value:function(e){if(this._customAlphabet.includes(e))throw new Error("Symbol '"+e+"' already added to alphabet.");this._customAlphabet.push(e)}},{key:"deleteSymbol",value:function(e){if(!this._customAlphabet.includes(e))throw new Error("Unable to remove symbol '"+e+"'.");this._customAlphabet.splice(this._customAlphabet.indexOf(e),1)}},{key:"setStartState",value:function(e){if(this._states.length<=0)throw new Error("Not enough states.");if(!this._states.includes(e))throw new Error("State '"+e+"' does not exist.");this.getStartState()!=e&&(this._states.splice(this._states.indexOf(e),1),this._states.unshift(e))}},{key:"setFinalState",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!this._states.includes(e))throw new Error("State '"+e+"' does not exist.");if(t){if(this._finalStates.includes(e))return;this._finalStates.push(e)}else{if(!this._finalStates.includes(e))return;this._finalStates.splice(this._finalStates.indexOf(e),1)}}},{key:"doTransition",value:function(e,t){var n=!0,r=!1,o=void 0;try{for(var i,a=this._transitions[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var l=i.value;if(l[0]==e&&l[1]==t)return l[2]}}catch(e){r=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}return null}},{key:"isFinalState",value:function(e){return this._finalStates.includes(e)}},{key:"hasState",value:function(e){return this._states.includes(e)}},{key:"getStates",value:function(){return this._states}},{key:"isUsedAlphabet",value:function(e){var t=!0,n=!1,r=void 0;try{for(var o,i=this._transitions[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){if(o.value[1]==e)return!0}}catch(e){n=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}return!1}},{key:"isAlphabet",value:function(e){var t=!0,n=!1,r=void 0;try{for(var o,i=this._customAlphabet[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){if(o.value==e)return!0}}catch(e){n=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}return this.isUsedAlphabet(e)}},{key:"getUsedAlphabet",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=!0,n=!1,r=void 0;try{for(var o,i=this._transitions[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var a=o.value[1];a.length>0&&!e.includes(a)&&e.push(a)}}catch(e){n=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}return e}},{key:"getAlphabet",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=!0,n=!1,r=void 0;try{for(var o,i=this._customAlphabet[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var a=o.value;e.push(a)}}catch(e){n=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}return this.getUsedAlphabet(e)}},{key:"getOutgoingTransitions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=!0,r=!1,o=void 0;try{for(var i,a=this._transitions[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var l=i.value;l[0]==e&&t.push(l)}}catch(e){r=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}return t}},{key:"getTransitions",value:function(){return this._transitions}},{key:"getStartState",value:function(){return this._states.length<=0?null:this._states[0]}},{key:"getFinalStates",value:function(){return this._finalStates}},{key:"isValidDFA",value:function(){var e=this.getAlphabet(),t=new Array(e.length);t.fill(!1);var n=!0,r=!1,o=void 0;try{for(var i,a=this._states[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var l=i.value,u=this.getOutgoingTransitions(l),s=!0,c=!1,f=void 0;try{for(var p,h=u[Symbol.iterator]();!(s=(p=h.next()).done);s=!0){var y=p.value,v=e.indexOf(y[1]);if(0!=t[v])return!1;t[v]=!0}}catch(e){c=!0,f=e}finally{try{s||null==h.return||h.return()}finally{if(c)throw f}}for(var g=t.length,d=0;d<g;++d){if(0==t[d])return!1;t[d]=!1}}}catch(e){r=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}return!0}},{key:"toJSON",value:function(){var e={};return this instanceof DFA?e.type="DFA":this instanceof NFA?e.type="NFA":e.type="FSA",e.states=this._states.slice(),e.alphabet=this._customAlphabet.slice(),e.usedAlphabet=this.getUsedAlphabet(),e.transitions=this._transitions.slice(),e.startState=this.getStartState(),e.finalStates=this._finalStates.slice(),e}}])&&ie(t.prototype,n),r&&ie(t,r),e}(),le="→";function ue(e){return(ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function se(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ce(e,t){return!t||"object"!==ue(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function fe(e){return(fe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function pe(e,t){return(pe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var he=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ce(this,fe(t).call(this))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pe(e,t)}(t,ae),n=t,(r=[{key:"getUsedAlphabet",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=!0,n=!1,r=void 0;try{for(var o,i=this._transitions[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var a=o.value[1];e.includes(a)||"ε"==a||e.push(a)}}catch(e){n=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}return e}},{key:"doTransition",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=!0,o=!1,i=void 0;try{for(var a,l=this._transitions[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var u=a.value;u[0]==e&&u[1]==t&&n.push(u[2])}}catch(e){o=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw i}}return n}},{key:"doClosureTransition",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];t.push(e);for(var n=0;n<t.length;++n){var r=this.getOutgoingTransitions(t[n]),o=!0,i=!1,a=void 0;try{for(var l,u=r[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var s=l.value;if("ε"==s[1]){var c=s[2];t.includes(c)||t.push(c)}}}catch(e){i=!0,a=e}finally{try{o||null==u.return||u.return()}finally{if(i)throw a}}}return t}},{key:"doTerminalTransition",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=!0,o=!1,i=void 0;try{for(var a,l=this._transitions[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var u=a.value;if(u[0]==e&&u[1]==t){var s=this.doClosureTransition(u[2]),c=!0,f=!1,p=void 0;try{for(var h,y=s[Symbol.iterator]();!(c=(h=y.next()).done);c=!0){var v=h.value;n.includes(v)||n.push(v)}}catch(e){f=!0,p=e}finally{try{c||null==y.return||y.return()}finally{if(f)throw p}}}}}catch(e){o=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw i}}return n}},{key:"getPowerSet",value:function(){for(var e=[[]],t=this.getStates(),n=0;n<t.length;n++)for(var r=0,o=e.length;r<o;r++)e.push(e[r].concat(t[n]));return e}}])&&se(n.prototype,r),o&&se(n,o),t}();function ye(e){return(ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ve(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ge(e,t){return!t||"object"!==ye(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function de(e){return(de=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function be(e,t){return(be=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var me=0,we=1,Ee=2,Se="symbols";function _e(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=e.doTransition(t,n);return Array.isArray(o)?r||1!=o.length?o.length>0?"{"+o.join(", ")+"}":"-":o[0]:o||"-"}var Oe=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=ge(this,de(t).call(this,e))).state={rowAxis:Se},n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&be(e,t)}(t,a.a.Component),n=t,(r=[{key:"render",value:function(){var e=this,t=this.props.machineBuilder,n=t.getMachine(),r=n.getStates(),o=n.getAlphabet(),i=(n.getTransitions(),this.state.rowAxis),l="NFA"==t.getMachineType(),u=i===Se&&l;return a.a.createElement(E,{title:I18N.toString("component.transitiontable.title")},a.a.createElement("div",{className:"transitiontable-container"},a.a.createElement("table",{className:"transitiontable"},a.a.createElement("tbody",null,a.a.createElement("tr",null,a.a.createElement("th",{className:"emptycell"},a.a.createElement("button",{className:"panel-button",onClick:function(){return e.setState(function(e,t){return{rowAxis:e.rowAxis==Se?"states":Se}})}},this.state.rowAxis==Se?"Q/Σ":"Q/Q")),i===Se?o.map(function(e,t){return a.a.createElement("th",{key:e,scope:"col",className:"col"},e)}):"states"===i?r.map(function(e,t){return a.a.createElement("th",{key:e,scope:"col",className:"col"},e)}):null,u&&a.a.createElement("th",{scope:"col"},"ε")),r.map(function(e,t){return a.a.createElement("tr",{key:e},a.a.createElement("th",{scope:"row",className:"row"},e),i===Se?o.map(function(t,r){var o="",i=_e(n,e,t,l);return l||!i.startsWith("{")&&"-"!=i||(o+=" error"),a.a.createElement("td",{key:e+","+t,className:o},i)}):"states"===i?r.map(function(t,r){var o=function(e,t,n){var r=[],o=e.getTransitions(),i=!0,a=!1,l=void 0;try{for(var u,s=o[Symbol.iterator]();!(i=(u=s.next()).done);i=!0){var c=u.value;c[me]==t&&c[Ee]==n&&r.push(c[we])}}catch(e){a=!0,l=e}finally{try{i||null==s.return||s.return()}finally{if(a)throw l}}return 1===r.length?r[0]:r.length>0?"{"+r.join(", ")+"}":"-"}(n,e,t);return a.a.createElement("td",{key:e+","+t},o)}):null,u&&a.a.createElement("td",null,_e(n,e,"ε")))})))))}}])&&ve(n.prototype,r),o&&ve(n,o),t}();n(95);function ke(e){return(ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ce(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ne(e,t){return!t||"object"!==ke(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function je(e){return(je=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Pe(e,t){return(Pe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var xe=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Ne(this,je(t).call(this,e))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Pe(e,t)}(t,a.a.Component),n=t,(r=[{key:"render",value:function(){var e=this.props.machineBuilder,t=e.getMachine(),n=t.getStates(),r=t.getAlphabet().sort(),o="NFA"==e.getMachineType();return a.a.createElement(E,{title:"Transition Chart"},a.a.createElement("div",{className:"transitionfunction-container"},a.a.createElement("table",{className:"transitionfunction-table"},a.a.createElement("tbody",null,a.a.createElement("tr",null,a.a.createElement("th",null,"Q","×","Σ"),a.a.createElement("th",null,o?"℘(Q)":"Q")),n.map(function(e,n){var i=t.doTransition(e,"ε"),l="",u=r.map(function(n,r){var i="",l=t.doTransition(e,n);if(!o||l.length)return o||l.length||(i="error",l="-"),!o&&l.length>1&&(i="error",l="{"+l+"}"),l=o?"{"+l+"}":""+l,a.a.createElement("tr",{key:""+e+n},a.a.createElement("td",{className:"transitionfunction-key"},"("+e+","+n+")"),a.a.createElement("td",{className:"transitionfunction-value "+i},l))});i.length>0&&(o||(l="error"),i=o||i.length>1?"{"+i+"}":""+i,u.unshift(a.a.createElement("tr",{key:e+"ε"},a.a.createElement("td",{className:"transitionfunction-key "+l},"("+e+",ε)"),a.a.createElement("td",{className:"transitionfunction-value"},i))));return u})))))}}])&&Ce(n.prototype,r),o&&Ce(n,o),t}();n(96);function Te(e){return(Te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Me(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function De(e,t){return!t||"object"!==Te(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ie(e){return(Ie=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Le(e,t){return(Le=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ae=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),De(this,Ie(t).call(this,e))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Le(e,t)}(t,a.a.Component),n=t,(r=[{key:"render",value:function(){var e=this.props.machineBuilder,t=e.getMachine(),n=t.getStates(),r=t.getFinalStates(),o=t.getAlphabet().sort(),i="NFA"==e.getMachineType();return a.a.createElement("div",{className:"formaldef-container"},a.a.createElement("h2",null,"M = (Q, Σ, δ, q0, F)"),a.a.createElement("div",null,a.a.createElement("h3",null,"Q ="),a.a.createElement("span",{className:"formaldef-values"},n.length>0?"{ "+n.join(", ")+" }":"∅")),a.a.createElement("div",null,a.a.createElement("h3",null,"Σ ="),a.a.createElement("span",{className:"formaldef-values"},o.length>0?"{ "+o.join(", ")+" }":"∅")),a.a.createElement("div",null,a.a.createElement("h3",null,"δ"),a.a.createElement("div",{className:"formaldef-values"},n.map(function(e,n){var r=t.doTransition(e,"ε"),l="",u=o.map(function(n,r){var o="",l=t.doTransition(e,n);if(!i||l.length)return i||l.length||(o="error",l="-"),!i&&l.length>1&&(o="error",l="{ "+l+" }"),l=i?"{ "+l+" }":""+l,a.a.createElement("div",{key:""+e+n,className:o},"δ( ( "+e+", "+n+" ) ) = "+l)});r.length>0&&(i||(l="error"),r=i||r.length>1?"{ "+r+" }":""+r,u.unshift(a.a.createElement("div",{key:e+"ε",className:l},"δ( ( "+e+", ε ) ) = "+r)));return u}),i&&a.a.createElement("div",{id:"formaldef-otherinputs"},a.a.createElement("div",null,"For all other inputs (q, x),"),a.a.createElement("div",null,"δ( (q, x) ) = ∅")))),a.a.createElement("div",null,a.a.createElement("h3",null,"q0 ="),a.a.createElement("span",{className:"formaldef-values"},n[0])),a.a.createElement("div",null,a.a.createElement("h3",null,"F ="),a.a.createElement("span",{className:"formaldef-values"},r.length>0?"{ "+r.join(",")+" }":"∅")))}}])&&Me(n.prototype,r),o&&Me(n,o),t}();function Re(e){return(Re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ge(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Be(e){return(Be=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Fe(e,t){return(Fe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ue(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var He=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=Be(t).call(this,e))||"object"!==Re(o)&&"function"!=typeof o?Ue(r):o).container=null,n.state={viewFormal:!1},n.onChangeMachineType=n.onChangeMachineType.bind(Ue(Ue(n))),n.onAutoLayout=n.onAutoLayout.bind(Ue(Ue(n))),n.onChangeAutoRename=n.onChangeAutoRename.bind(Ue(Ue(n))),n.onSubmitAutoStatePrefix=n.onSubmitAutoStatePrefix.bind(Ue(Ue(n))),n.onAutoStateFormat=n.onAutoStateFormat.bind(Ue(Ue(n))),n.switchDefinition=n.switchDefinition.bind(Ue(Ue(n))),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Fe(e,t)}(t,a.a.Component),n=t,(r=[{key:"onAutoLayout",value:function(e){this.props.graphController.applyAutoLayout()}},{key:"onChangeMachineType",value:function(e){var t=e.target.value;this.props.machineController.changeMachineTo(t)}},{key:"onChangeAutoRename",value:function(e){this.props.machineController.getMachineBuilder().setAutoRenameNodes(e.target.checked)}},{key:"onSubmitAutoStatePrefix",value:function(e,t){var n=this.props.machineController.getMachineBuilder().getLabeler();n.prefix!=e&&(n.prefix=e,n.sortDefaultNodeLabels())}},{key:"onAutoStateFormat",value:function(e){return e&&e.length>0?e:l.a.STR_STATE_LABEL}},{key:"switchDefinition",value:function(){this.setState(function(e,t){return{viewFormal:!e.viewFormal}})}},{key:"render",value:function(){var e=this,t=this.props.graphController,n=this.props.machineController,r=t.getGraph(),o=n.getMachineBuilder();return a.a.createElement("div",{className:"panel-container",id:"overview",ref:function(t){return e.container=t},style:this.props.style},a.a.createElement("div",{className:"panel-title"},a.a.createElement("h1",null,I18N.toString("component.overview.title"))),a.a.createElement("div",{className:"panel-content"},a.a.createElement("select",{className:"machine-type panel-select",value:o.getMachineType(),onChange:this.onChangeMachineType},a.a.createElement("option",{value:"DFA"},"DFA"),a.a.createElement("option",{value:"NFA"},"NFA")),this.state.viewFormal&&a.a.createElement(Ae,{machineBuilder:o}),!this.state.viewFormal&&a.a.createElement("div",null,a.a.createElement("div",null,a.a.createElement("div",{className:"graphinfo-important"},a.a.createElement(K,{graphController:t}),a.a.createElement(oe,{machineController:n})),a.a.createElement("div",{className:"graphinfo"},a.a.createElement(xe,{machineBuilder:o}),a.a.createElement(Oe,{machineBuilder:o}))),a.a.createElement("hr",null),a.a.createElement("div",{style:{paddingBottom:"0.5em"}},a.a.createElement("h3",{style:{marginBottom:"0"}},"State Labels"),a.a.createElement("div",{style:{display:"flex",flexDirection:"row"}},a.a.createElement("div",{className:"statetag-container"},a.a.createElement(h,{defaultValue:o.getLabeler().prefix,style:{width:"4em"},formatter:this.onAutoStateFormat,captureOnExit:"save",onSubmit:this.onSubmitAutoStatePrefix})),a.a.createElement("select",{style:{background:"none",outline:"none",border:"none",padding:"0",margin:"0",appearance:"none",color:"white"},disabled:!0},a.a.createElement("option",null,"0-9"),a.a.createElement("option",null,"a-z"),a.a.createElement("option",null,"A-Z"))),a.a.createElement("div",{className:"panel-checkbox"},a.a.createElement("input",{type:"checkbox",id:"auto-statename",onChange:this.onChangeAutoRename,checked:o.shouldAutoRenameNodes()}),a.a.createElement("label",{htmlFor:"auto-statename"},I18N.toString("options.autolabel")))),a.a.createElement("hr",null),a.a.createElement("button",{className:"panel-button",onClick:this.onAutoLayout,disabled:r.isEmpty()},I18N.toString("action.overview.autolayout"))),a.a.createElement("button",{className:"panel-button",onClick:this.switchDefinition},this.state.viewFormal?"Back":"View Definition")),a.a.createElement("div",{className:"panel-bottom"}))}}])&&Ge(n.prototype,r),o&&Ge(n,o),t}();He.UNLOCALIZED_NAME="component.overview.title";var ze=He,Ve=(n(97),n(10)),Qe=n(11);function Ke(e,t,n,r,o){var i=null,a=[],l=0;null!=t&&r.push(t);var u=!0,s=!1,c=void 0;try{for(var f,p=n[Symbol.iterator]();!(u=(f=p.next()).done);u=!0){var h=f.value;if(i=h.state,null!=(t=h.index<r.length?r[h.index]:null)){l=h.index+1;var y=!0,v=!1,g=void 0;try{for(var d,b=e.doTerminalTransition(i,t)[Symbol.iterator]();!(y=(d=b.next()).done);y=!0){var m=d.value;a.push({state:m,index:l})}}catch(e){v=!0,g=e}finally{try{y||null==b.return||b.return()}finally{if(v)throw g}}}else{if(e.isFinalState(i))return!0;o.push(i)}l=h.index}}catch(e){s=!0,c=e}finally{try{u||null==p.return||p.return()}finally{if(s)throw c}}return n.length=0,n.push.apply(n,a),!1}function Ye(e){return(Ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Xe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function qe(e,t){return!t||"object"!==Ye(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function We(e){return(We=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Je(e,t){return(Je=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ze=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),qe(this,We(t).call(this))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Je(e,t)}(t,ae),n=t,(r=[{key:"validate",value:function(){return console.error("This is deprecated, please use FSA.isValidDFA()"),this.isValidDFA()}},{key:"newTransition",value:function(e,t,n){if(!this._states.includes(e))throw new Error("State '"+e+"' does not exist.");if(!this._states.includes(t))throw new Error("State '"+t+"' does not exist.");var r=!0,o=!1,i=void 0;try{for(var a,l=this._transitions[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var u=a.value;if(u[0]==e&&u[1]==n&&u[2]==t)return;if(u[0]==e&&u[1]==n)throw new Error("Unable to create illegal nondeterministic transition for DFA.")}}catch(e){o=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw i}}this._transitions.push([e,n,t])}}])&&Xe(n.prototype,r),o&&Xe(n,o),t}();function $e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var et=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.graphController=null,this.machineController=null,this.testingManager=t,this.targets=[],this.history=[],this.indexofString=-1,this.result=!1,this.cachedStates=[],this.cachedSymbols=[],this.checkedStates=[],this.running=!1,this.started=!1,this.skipToEnd=!1,this.timer=null,this.onNodeDestroy=this.onNodeDestroy.bind(this)}var t,n,r;return t=e,(n=[{key:"initialize",value:function(e){this.graphController=e.getGraphController(),this.machineController=e.getMachineController()}},{key:"destroy",value:function(){}},{key:"onNodeDestroy",value:function(e){}},{key:"onStart",value:function(){this.prepareForNewTest(),this.started=!0,this.skipToEnd=!1}},{key:"onResume",value:function(){var e=this;this.hasNextStep()||this.testingManager.inputList.resetTests(!1),this.running=!0;this.timer=setTimeout(function t(){e.running&&(e.hasNextStep()?(e.onNextStep(),e.timer=setTimeout(t,500)):e.onPause())},500)}},{key:"onPause",value:function(){this.running=!1}},{key:"onStop",value:function(){this.targets.length=0,this.running=!1,this.started=!1,this.skipToEnd=!1}},{key:"isRunning",value:function(){return this.running}},{key:"isStarted",value:function(){return this.started}},{key:"isSkipping",value:function(){return this.skipToEnd}},{key:"hasPrevStep",value:function(){return this.history.length>0||this.testingManager.inputList.hasPrevInput()}},{key:"onPreviousStep",value:function(){if(this.history.length>0){var e=this.history.pop();this.targets.length=0,this.cachedStates.length=0,this.cachedSymbols.length=0,this.checkedStates.length=0;var t=!0,n=!1,r=void 0;try{for(var o,i=e.targets[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var a=o.value;if(!a)throw new Error("Found null target");this.targets.push(a)}}catch(e){n=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}var l=!0,u=!1,s=void 0;try{for(var c,f=e.cachedStates[Symbol.iterator]();!(l=(c=f.next()).done);l=!0){var p=c.value;this.cachedStates.push(p)}}catch(e){u=!0,s=e}finally{try{l||null==f.return||f.return()}finally{if(u)throw s}}var h=!0,y=!1,v=void 0;try{for(var g,d=e.cachedSymbols[Symbol.iterator]();!(h=(g=d.next()).done);h=!0){var b=g.value;this.cachedSymbols.push(b)}}catch(e){y=!0,v=e}finally{try{h||null==d.return||d.return()}finally{if(y)throw v}}var m=!0,w=!1,E=void 0;try{for(var S,_=e.checkedStates[Symbol.iterator]();!(m=(S=_.next()).done);m=!0){var O=S.value;this.checkedStates.push(O)}}catch(e){w=!0,E=e}finally{try{m||null==_.return||_.return()}finally{if(w)throw E}}this.indexofString--}else this.indexofString=-1,this.testingManager.inputList.prevInput()}},{key:"hasNextStep",value:function(){return this.indexofString<this.testingManager.inputList.getCurrentInput().value.length||this.testingManager.inputList.hasNextInput()}},{key:"onNextStep",value:function(){var e=this,t=this.testingManager.inputList.getCurrentInput(),n=this.machineController.getMachineBuilder().getMachine();if(this.indexofString+=1,this.indexofString>=t.value.length){if(this.result=Ke(n,null,this.cachedStates,this.cachedSymbols,this.checkedStates),t.setResult(this.result),this.testingManager.inputList.hasNextInput()){this.testingManager.inputList.nextInput();return this.prepareForNewTest(),!0}return this.onPause(),!1}var r=this.getCurrentCache();this.history.push(r);var o=t.value[this.indexofString];this.result=Ke(n,o,this.cachedStates,this.cachedSymbols,this.checkedStates),this.targets.length=0;var i=!0,a=!1,l=void 0;try{for(var u,s=this.cachedStates[Symbol.iterator]();!(i=(u=s.next()).done);i=!0){var c=u.value,f=this.machineController.getFirstGraphNodeByLabel(this.graphController.getGraph(),c.state);if(!f)throw new Error("Found null target");this.targets.includes(f)||this.targets.push(f)}}catch(e){a=!0,l=e}finally{try{i||null==s.return||s.return()}finally{if(a)throw l}}if(this.targets.length<=0&&!this.running){this.skipToEnd=!0;setTimeout(function n(){e.skipToEnd&&(e.indexofString+=1,e.indexofString>=t.value.length?e.skipToEnd=!1:setTimeout(n,50))},50)}return!0}},{key:"getCurrentCache",value:function(){return{targets:this.targets.slice(),cachedStates:this.cachedStates.slice(),cachedSymbols:this.cachedSymbols.slice(),checkedStates:this.checkedStates.slice()}}},{key:"getCurrentTestStringIndex",value:function(){return this.indexofString+1}},{key:"prepareForNewTest",value:function(){this.cachedStates.length=0;var e=this.graphController.getGraph();if(!e.isEmpty()){var t=this.machineController.getMachineBuilder().getMachine();this.targets.length=0;var n=t.getStartState(),r=!0,o=!1,i=void 0;try{for(var a,l=t.doClosureTransition(n)[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var u=a.value;this.cachedStates.push({state:u,index:0});var s=this.machineController.getFirstGraphNodeByLabel(e,u);if(!s)throw new Error("Found null target");this.targets.push(s)}}catch(e){o=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw i}}this.cachedSymbols.length=0,this.checkedStates.length=0,this.indexofString=-1,this.history.length=0,this.skipToEnd=!1}}}])&&$e(t.prototype,n),r&&$e(t,r),e}(),tt=n(6);function nt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var rt=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.inputList=[],this.addInput(""),this.inputIndex=0}var t,n,r;return t=e,(n=[{key:"isEmpty",value:function(){var e=!0,t=!1,n=void 0;try{for(var r,o=this.inputList[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){if(r.value.value.length>0)return!1}}catch(e){t=!0,n=e}finally{try{e||null==o.return||o.return()}finally{if(t)throw n}}return!0}},{key:"testByIndex",value:function(e,t){if(e<0||e>=this.inputList.length)throw new Error("Cannot find test input for index");var n=this.inputList[e];n.setResult(null);var r=function(e,t){"string"==typeof t&&(t=t[Symbol.iterator]());var n=[],r=[];n.push({state:e.getStartState(),index:0});var o=!0,i=!1,a=void 0;try{for(var l,u=e.doClosureTransition(e.getStartState())[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var s=l.value;n.push({state:s,index:0})}}catch(e){i=!0,a=e}finally{try{o||null==u.return||u.return()}finally{if(i)throw a}}for(var c=[],f=0;n.length>0;){if(Ke(e,t.next().value,n,r,c))return!0;if(++f>1e3)return!1}return!1}(t,n.value);return n.setResult(r),r}},{key:"importTests",value:function(e){var t=this,n=new FileReader;n.onload=function(e){try{t.inputList.length=0,t.inputIndex=0;var r=e.target.result.split("\n"),o=!0,i=!1,a=void 0;try{for(var l,u=r[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var s=l.value;(s=s.trim()).length>0&&t.addInput(s)}}catch(e){i=!0,a=e}finally{try{o||null==u.return||u.return()}finally{if(i)throw a}}t.inputList.length<0&&t.addInput("")}catch(e){n.abort()}},n.readAsText(e)}},{key:"getTestsAsStrings",value:function(){return this.inputList.map(function(e,t){return e.value})}},{key:"clearTests",value:function(){var e=this.inputList[0];e.value="",e.result=null,e.dirty=!0,this.inputList.length=1,this.inputIndex=0}},{key:"resetTests",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.inputIndex=0,e){var t=!0,n=!1,r=void 0;try{for(var o,i=this.inputList[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){o.value.dirty=!0}}catch(e){n=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}}}},{key:"getTests",value:function(){return this.inputList}},{key:"addInput",value:function(e){var t={value:e,result:null,dirty:!0,id:Object(tt.a)(),setResult:function(e){this.dirty=!1,this.result=e}};return this.inputList.push(t),t}},{key:"getInputByIndex",value:function(e){if(e<0||e>=this.inputList.length)throw new Error("Cannot find test input for index");return this.inputList[e]}},{key:"removeInputByIndex",value:function(e){if(e<0||e>=this.inputList.length)throw new Error("Cannot find test input for index");if(0===e)throw new Error("Cannot delete the first test input");e<=this.inputIndex&&--this.inputIndex,this.inputList.splice(e,1)}},{key:"nextInput",value:function(){return++this.inputIndex,this.inputIndex>=this.inputList.length&&(this.inputIndex=0),this.inputList[this.inputIndex]}},{key:"prevInput",value:function(){return--this.inputIndex,this.inputIndex<0&&(this.inputIndex=this.inputList.length-1),this.inputList[this.inputIndex]}},{key:"resetInput",value:function(){this.inputIndex=0}},{key:"hasNextInput",value:function(){return this.inputIndex<this.inputList.length}},{key:"hasPrevInput",value:function(){return this.inputIndex>0}},{key:"getCurrentInput",value:function(){return this.inputList[this.inputIndex]}},{key:"getCurrentInputIndex",value:function(){return this.inputIndex}}])&&nt(t.prototype,n),r&&nt(t,r),e}();function ot(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var it=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.machineController=null,this.viewport=null,this.inputList=new rt,this.shouldCheckError=!1,this.isImmediateErrorCheck=!1,this.errorCheckMode=e.NO_ERROR_CHECK,this.stepByStepMode=!1,this.testMode=new et(this)}var t,n,r;return t=e,(n=[{key:"initialize",value:function(e){this.machineController=e.getMachineController(),this.viewport=e.viewport,this.testMode.initialize(e)}},{key:"destroy",value:function(){}},{key:"setErrorCheckMode",value:function(t){var n=this.machineController.getMachineBuilder();if(n.setMachineType(n.getMachineType()),t==e.NO_ERROR_CHECK)this.shouldCheckError=!1,this.errorCheckMode=t;else if(t==e.DELAYED_ERROR_CHECK)this.shouldCheckError=!0,this.isImmediateErrorCheck=!1,this.errorCheckMode=t;else{if(t!=e.IMMEDIATE_ERROR_CHECK)throw new Error("Unknown error check mode '"+t+"'");this.shouldCheckError=!0,this.isImmediateErrorCheck=!0,this.errorCheckMode=t}}},{key:"getErrorCheckMode",value:function(){return this.errorCheckMode}},{key:"setStepByStepMode",value:function(e){this.stepByStepMode=!!e,e?(this.testMode.isStarted()&&this.testMode.onStop(),this.testMode.onStart(),this.viewport.setState(function(e,t){if(e.mode!=Ve.a.TESTING)return{prevMode:e.mode,mode:Ve.a.TESTING}})):(this.testMode.isStarted()&&this.testMode.onStop(),this.viewport.setState(function(e,t){return{mode:e.prevMode}}))}},{key:"getStepByStepMode",value:function(){return this.stepByStepMode}}])&&ot(t.prototype,n),r&&ot(t,r),e}();it.NO_ERROR_CHECK="none",it.DELAYED_ERROR_CHECK="delayed",it.IMMEDIATE_ERROR_CHECK="immediate";var at=it;n(98);function lt(e){return(lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ut(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function st(e,t){return!t||"object"!==lt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ct(e){return(ct=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ft(e,t){return(ft=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var pt=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),st(this,ct(t).call(this,e))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ft(e,t)}(t,a.a.Component),n=t,(r=[{key:"render",value:function(){return a.a.createElement("svg",{className:"add-icon",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},a.a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),a.a.createElement("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5 11h-4v4h-2v-4H7v-2h4V7h2v4h4v2z"}))}}])&&ut(n.prototype,r),o&&ut(n,o),t}();function ht(e){return(ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function vt(e,t){return!t||"object"!==ht(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function gt(e){return(gt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function dt(e,t){return(dt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var bt=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),vt(this,gt(t).call(this,e))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&dt(e,t)}(t,a.a.Component),n=t,(r=[{key:"render",value:function(){return a.a.createElement("svg",{className:"remove-icon",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},a.a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),a.a.createElement("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5 11H7v-2h10v2z"}))}}])&&yt(n.prototype,r),o&&yt(n,o),t}();n(99);function mt(e){return(mt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Et(e,t){return!t||"object"!==mt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function St(e){return(St=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _t(e,t){return(_t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ot=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Et(this,St(t).call(this,e))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_t(e,t)}(t,a.a.Component),n=t,(r=[{key:"render",value:function(){return a.a.createElement("svg",{className:"success-icon",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},a.a.createElement("path",{fill:"none",d:"M0 0h24v24H0V0zm0 0h24v24H0V0z"}),a.a.createElement("path",{d:"M16.59 7.58L10 14.17l-3.59-3.58L5 12l5 5 8-8zM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}))}}])&&wt(n.prototype,r),o&&wt(n,o),t}();function kt(e){return(kt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ct(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Nt(e,t){return!t||"object"!==kt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function jt(e){return(jt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Pt(e,t){return(Pt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var xt=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Nt(this,jt(t).call(this,e))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Pt(e,t)}(t,a.a.Component),n=t,(r=[{key:"render",value:function(){return a.a.createElement("svg",{className:"failure-icon",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},a.a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),a.a.createElement("path",{d:"M14.59 8L12 10.59 9.41 8 8 9.41 10.59 12 8 14.59 9.41 16 12 13.41 14.59 16 16 14.59 13.41 12 16 9.41 14.59 8zM12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"}))}}])&&Ct(n.prototype,r),o&&Ct(n,o),t}();function Tt(e){return(Tt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Mt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Dt(e,t){return!t||"object"!==Tt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function It(e){return(It=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Lt(e,t){return(Lt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var At=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Dt(this,It(t).call(this,e))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Lt(e,t)}(t,a.a.Component),n=t,(r=[{key:"render",value:function(){return a.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},a.a.createElement("path",{fill:"none",d:"M0 0h24v24H0z"}),a.a.createElement("path",{d:"M13.49 5.48c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm-3.6 13.9l1-4.4 2.1 2v6h2v-7.5l-2.1-2 .6-3c1.3 1.5 3.3 2.5 5.5 2.5v-2c-1.9 0-3.5-1-4.3-2.4l-1-1.6c-.4-.6-1-1-1.7-1-.3 0-.5.1-.8.1l-5.2 2.2v4.7h2v-3.4l1.8-.7-1.6 8.1-4.9-1-.4 2 7 1.4z"}))}}])&&Mt(n.prototype,r),o&&Mt(n,o),t}();function Rt(e){return(Rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Gt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Bt(e,t){return!t||"object"!==Rt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ft(e){return(Ft=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ut(e,t){return(Ut=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ht=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Bt(this,Ft(t).call(this,e))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ut(e,t)}(t,a.a.Component),n=t,(r=[{key:"render",value:function(){var e=this.props.active;return!0===this.props.mode?a.a.createElement(S.a,{className:"status-icon success"+(e?" active":""),onClick:this.props.onClick},a.a.createElement(Ot,null)):!1===this.props.mode?a.a.createElement(S.a,{className:"status-icon failure"+(e?" active":""),onClick:this.props.onClick},a.a.createElement(xt,null)):a.a.createElement(S.a,{className:"status-icon"+(e?" active":""),onClick:this.props.onClick},a.a.createElement(At,null))}}])&&Gt(n.prototype,r),o&&Gt(n,o),t}();function zt(e){return(zt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Vt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Qt(e){return(Qt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Kt(e,t){return(Kt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Yt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var Xt=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=Qt(t).call(this,e))||"object"!==zt(o)&&"function"!=typeof o?Yt(r):o).ref=a.a.createRef(),n.onStatusClick=n.onStatusClick.bind(Yt(Yt(n))),n.onSubmitClick=n.onSubmitClick.bind(Yt(Yt(n))),n.onValueChange=n.onValueChange.bind(Yt(Yt(n))),n.onKeyDown=n.onKeyDown.bind(Yt(Yt(n))),n.onKeyUp=n.onKeyUp.bind(Yt(Yt(n))),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Kt(e,t)}(t,a.a.Component),n=t,(r=[{key:"getInput",value:function(){return this.props.testList.getInputByIndex(this.props.index)}},{key:"isInputFirst",value:function(){return 0===this.props.index}},{key:"onStatusClick",value:function(e){this.props.testList.testByIndex(this.props.index,this.props.machineBuilder.getMachine())}},{key:"onSubmitClick",value:function(e){if(this.isInputFirst()){var t=this.getInput(),n=this.props.testList.addInput(t.value);n.result=t.result,n.dirty=t.dirty,t.value="",t.result=null,t.dirty=!0,this.ref.focus()}else this.props.testList.removeInputByIndex(this.props.index)}},{key:"onValueChange",value:function(e){var t=e.target.value.trim(),n=this.getInput();n.value=t,n.dirty=!0}},{key:"onKeyDown",value:function(e){if(e.keyCode===l.a.SUBMIT_KEY)e.preventDefault();else if(e.keyCode===l.a.DELETE_KEY){var t=this.getInput();if(t.value.length<=0){var n=this.props.index+1;if(this.props.testList.getTests().length>n){var r=this.props.testList.getInputByIndex(n);t.value=r.value,t.result=r.result,t.dirty=r.dirty,this.props.testList.removeInputByIndex(n)}}}}},{key:"onKeyUp",value:function(e){if(e.keyCode===l.a.SUBMIT_KEY){var t=e.shiftKey;if(this.isInputFirst()&&!t){var n=this.getInput(),r=this.props.testList.addInput(n.value);r.result=n.result,r.dirty=n.dirty,n.value="",n.result=null,n.dirty=!0,this.ref.focus()}else this.props.testList.testByIndex(this.props.index,this.props.machineBuilder.getMachine()),this.ref.select()}else e.keyCode===l.a.CLEAR_KEY&&e.target.blur()}},{key:"render",value:function(){var e=this,t=this.getInput(),n=this.isInputFirst();return a.a.createElement("div",{className:"testinginput-container "+(this.props.testList.getCurrentInputIndex()===this.props.index?" active":"")},a.a.createElement(Ht,{active:!t.dirty,mode:t.result,onClick:this.onStatusClick}),a.a.createElement("input",{ref:function(t){return e.ref=t},className:"testinginput-field",value:t.value,placeholder:"ε",onChange:this.onValueChange,onKeyDown:this.onKeyDown,onKeyUp:this.onKeyUp,onFocus:function(e){return e.target.select()}}),a.a.createElement(S.a,{className:"testinginput-submit",onClick:this.onSubmitClick},n?a.a.createElement(pt,null):a.a.createElement(bt,null)))}}])&&Vt(n.prototype,r),o&&Vt(n,o),t}();function qt(e){return(qt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Wt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Jt(e,t){return!t||"object"!==qt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Zt(e){return(Zt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $t(e,t){return($t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var en=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Jt(this,Zt(t).call(this,e))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$t(e,t)}(t,a.a.Component),n=t,(r=[{key:"render",value:function(){var e=this;return a.a.createElement("button",{className:"icon-button "+this.props.className,id:this.props.id,title:this.props.title,style:this.props.style,disabled:this.props.disabled,onClick:this.props.onClick},a.a.createElement("input",{ref:function(t){return e.uploadInput=t},id:"test-upload-input",type:"file",name:"import",style:{display:"none"},onChange:this.props.onChange,accept:".txt"}),a.a.createElement("label",{htmlFor:"test-upload-input"},this.props.children))}}])&&Wt(n.prototype,r),o&&Wt(n,o),t}(),tn=n(19);function nn(e){return(nn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function rn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function on(e,t){return!t||"object"!==nn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function an(e){return(an=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ln(e,t){return(ln=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var un=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),on(this,an(t).call(this,e))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ln(e,t)}(t,a.a.Component),n=t,(r=[{key:"render",value:function(){return a.a.createElement("svg",{className:"pagenewcontent-icon",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},a.a.createElement("path",{d:"M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 16H8v-2h8v2zm0-4H8v-2h8v2zm-3-5V3.5L18.5 9H13z"}))}}])&&rn(n.prototype,r),o&&rn(n,o),t}(),sn=n(20);function cn(e){return(cn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function pn(e,t){return!t||"object"!==cn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function hn(e){return(hn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function yn(e,t){return(yn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var vn=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),pn(this,hn(t).call(this,e))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&yn(e,t)}(t,a.a.Component),n=t,(r=[{key:"render",value:function(){return a.a.createElement("svg",{className:"close-icon",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},a.a.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),a.a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}))}}])&&fn(n.prototype,r),o&&fn(n,o),t}();function gn(e){return(gn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function dn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function bn(e){return(bn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function mn(e,t){return(mn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function wn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var En=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=bn(t).call(this,e))||"object"!==gn(o)&&"function"!=typeof o?wn(r):o).container=a.a.createRef(),n.uploadInput=a.a.createRef(),n.state={errorCheckMode:n.props.app.getCurrentModule().getTestingManager().getErrorCheckMode(),noTestMode:!0},n._savedGraphHash=0,n._ticksSinceHash=0,n.stepByStepModeChecked=!1,n.onChangeErrorCheckMode=n.onChangeErrorCheckMode.bind(wn(wn(n))),n.onUploadFileChange=n.onUploadFileChange.bind(wn(wn(n))),n.onGraphChange=n.onGraphChange.bind(wn(wn(n))),n.onTestsRunAll=n.onTestsRunAll.bind(wn(wn(n))),n.onTestsClear=n.onTestsClear.bind(wn(wn(n))),n.onTestsSave=n.onTestsSave.bind(wn(wn(n))),n.onTestsNew=n.onTestsNew.bind(wn(wn(n))),n.onTestsUpload=n.onTestsUpload.bind(wn(wn(n))),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&mn(e,t)}(t,a.a.Component),n=t,(r=[{key:"componentWillMount",value:function(){var e=this.props.graphController.getGraph();this._savedGraphHash=e.getHashCode(),this._ticksSinceHash=0}},{key:"componentWillUnmount",value:function(){this.props.graphController.getGraph();this._savedGraphHash=0}},{key:"onGraphChange",value:function(e){this.props.app.getCurrentModule().getTestingManager().inputList.resetTests()}},{key:"onUploadFileChange",value:function(e){var t=e.target.files;t.length>0&&(this.props.app.getCurrentModule().getTestingManager().inputList.importTests(t[0]),document.getElementById("test-name").innerHTML=t[0].name,e.target.value="")}},{key:"onChangeErrorCheckMode",value:function(e){var t=e.target.value,n=this.props.graphController,r=this.props.machineController,o=this.props.app.getCurrentModule().getTestingManager(),i=n.getGraph(),a=r.getMachineBuilder();o.setErrorCheckMode(t),o.shouldCheckError?a.onGraphChange(i):a.machineErrorChecker.clear(),this.setState({errorCheckMode:t})}},{key:"onTestsRunAll",value:function(e){var t=this.props.machineController.getMachineBuilder().getMachine(),n=this.props.app.getCurrentModule().getTestingManager();if(n.testMode.isStarted())n.setStepByStepMode(!1);else{var r=n.inputList,o=r.getTests().length;n.setStepByStepMode(this.stepByStepModeChecked);for(var i=0;i<o;++i)r.testByIndex(i,t)}}},{key:"onTestsClear",value:function(e){this.props.app.getCurrentModule().getTestingManager().inputList.clearTests(),this.clearTestName(),this.hideTestInputList(),this.setState({noTestMode:!0})}},{key:"onTestsSave",value:function(e){var t=this.props.app.getCurrentModule().getTestingManager();Qe.a.downloadText("test.txt",t.inputList.getTestsAsStrings().join("\n"))}},{key:"onTestsNew",value:function(e){this.onTestsClear(),this.showTestInputList(),this.clearTestName(),this.setState({noTestMode:!1})}},{key:"onTestsUpload",value:function(e){this.onTestsNew(),this.showTestInputList()}},{key:"showTestInputList",value:function(){document.getElementById("test-inputlist-container").style.display="block"}},{key:"hideTestInputList",value:function(){document.getElementById("test-inputlist-container").style.display="none"}},{key:"clearTestName",value:function(){document.getElementById("test-name").innerHTML=""}},{key:"render",value:function(){var e=this,t=this.props.app,n=(t.viewport,t.getCurrentModule().getTestingManager()),r=n.inputList,o=this.props.machineController.getMachineBuilder(),i=!o.isValidMachine();if(--this._ticksSinceHash<=0){this._ticksSinceHash=30;var l=this.props.graphController.getGraph(),u=l.getHashCode();this._savedGraphHash!==u&&(this.onGraphChange(l),this._savedGraphHash=u)}return a.a.createElement("div",{className:"panel-container",id:"testing",ref:function(t){return e.container=t},style:this.props.style},a.a.createElement("div",{className:"panel-title"},a.a.createElement("h1",null,I18N.toString("component.testing.title"))),a.a.createElement("div",{className:"test-icon-row"},a.a.createElement(S.a,{className:"testicon",id:"testing-new",title:I18N.toString("action.testing.new"),onClick:this.onTestsNew},a.a.createElement(un,null)),a.a.createElement(en,{className:"testicon",id:"testing-upload",title:I18N.toString("action.testing.import"),onClick:this.onTestsUpload,onChange:this.onUploadFileChange},a.a.createElement(tn.a,null)),a.a.createElement(S.a,{className:"testicon",id:"testing-save",title:I18N.toString("action.testing.save"),onClick:this.onTestsSave,disabled:n.inputList.isEmpty()},a.a.createElement(sn.a,null)),a.a.createElement(S.a,{className:"testicon",id:"testing-clear",title:I18N.toString("action.testing.clear"),onClick:this.onTestsClear,disabled:this.state.noTestMode},a.a.createElement(vn,null))),a.a.createElement("div",{className:"panel-content"},a.a.createElement("div",{className:"test-inputlist-container",id:"test-inputlist-container",style:{display:"none"}},a.a.createElement("div",{className:"scrollbar-container"},a.a.createElement("h3",{id:"test-name"},"Test Name"),a.a.createElement("div",{className:"test-inputlist-content"},i&&a.a.createElement("label",{className:"test-inputlist-content-warning"},"Not a valid machine!"),r.getTests().map(function(e,t){return a.a.createElement(Xt,{key:e.id,index:t,testList:r,machineBuilder:o})}))),a.a.createElement("button",{className:"panel-button",onClick:this.onTestsRunAll},n.testMode.isStarted()?I18N.toString("action.testing.stoprun"):I18N.toString("action.testing.runall")),a.a.createElement("div",{className:"panel-checkbox"},a.a.createElement("input",{id:"test-step",type:"checkbox",checked:this.stepByStepModeChecked,onChange:function(t){e.stepByStepModeChecked=t.target.checked,e.stepByStepModeChecked||n.setStepByStepMode(!1)},disabled:n.testMode.isStarted()}),a.a.createElement("label",{htmlFor:"test-step"},I18N.toString("options.testing.stepmode")))),a.a.createElement("hr",null),a.a.createElement("div",{id:"test-errorcheck"},a.a.createElement("label",null,I18N.toString("options.checkerrors")),a.a.createElement("select",{className:"panel-select",value:this.state.errorCheckMode,onChange:this.onChangeErrorCheckMode},a.a.createElement("option",{value:at.NO_ERROR_CHECK},I18N.toString("options.checkerrors.mode.none")),a.a.createElement("option",{value:at.DELAYED_ERROR_CHECK},I18N.toString("options.checkerrors.mode.delayed")),a.a.createElement("option",{value:at.IMMEDIATE_ERROR_CHECK},I18N.toString("options.checkerrors.mode.immediate"))))),a.a.createElement("div",{className:"panel-bottom"}))}}])&&dn(n.prototype,r),o&&dn(n,o),t}();En.UNLOCALIZED_NAME="component.testing.title";var Sn=En;function _n(e){return(_n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function On(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function kn(e){return(kn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Cn(e,t){return(Cn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Nn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var jn=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=kn(t).call(this,e))||"object"!==_n(o)&&"function"!=typeof o?Nn(r):o).onClick=n.onClick.bind(Nn(Nn(n))),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Cn(e,t)}(t,a.a.Component),n=t,(r=[{key:"onClick",value:function(e){var t=this.props.message;switch(e.target.value){case"convert":this.props.machineController.convertMachineTo("DFA"),t.close();break;default:throw new Error("Unknown button value for message")}}},{key:"render",value:function(){var e=this.props.machineController.getMachineBuilder().getMachine().getStates().length;return a.a.createElement("div",null,a.a.createElement("p",null,I18N.toString("message.warning.convertNFAToDFA")),a.a.createElement("p",null,"".concat(e," states -> ").concat(Math.pow(2,e)," states")),a.a.createElement("button",{value:"convert",onClick:this.onClick},I18N.toString("message.action.convert")))}}])&&On(n.prototype,r),o&&On(n,o),t}();function Pn(e){return(Pn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Tn(e){return(Tn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Mn(e,t){return(Mn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Dn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var In=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=Tn(t).call(this,e))||"object"!==Pn(o)&&"function"!=typeof o?Dn(r):o).container=null,n.optimizeUnreachOption=null,n.optimizeRedundOption=null,n.onConvertToDFA=n.onConvertToDFA.bind(Dn(Dn(n))),n.onConvertToNFA=n.onConvertToNFA.bind(Dn(Dn(n))),n.onOptimizeMachine=n.onOptimizeMachine.bind(Dn(Dn(n))),n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Mn(e,t)}(t,a.a.Component),n=t,(r=[{key:"onDeleteAllUnreachable",value:function(e){var t=this.props.machineController,n=t.getMachineBuilder().machineErrorChecker.getUnreachableNodes();t.graphController.deleteTargetNodes(n)}},{key:"onConvertToDFA",value:function(e){var t=this.props.machineController,n={graphController:this.props.graphController,machineController:t},r=l.a.MACHINE_CONVERSION_MESSAGE_TAG;o.a.addMessage(I18N.toString("message.warning.convertNFAToDFA"),"warning",r,jn,n)}},{key:"onConvertToNFA",value:function(e){this.props.machineController.convertMachineTo("NFA")}},{key:"onOptimizeMachine",value:function(e){this.optimizeUnreachOption.checked&&this.onDeleteAllUnreachable(e)}},{key:"canOptimize",value:function(){return this.optimizeRedundOption&&this.optimizeRedundOption.checked||this.optimizeUnreachOption&&this.optimizeUnreachOption.checked}},{key:"render",value:function(){var e=this,t=this.props.graphController,n=this.props.machineController,r=(t.getGraph(),n.getMachineBuilder());return a.a.createElement("div",{className:"panel-container",id:"analysis",ref:function(t){return e.container=t},style:this.props.style},a.a.createElement("div",{className:"panel-title"},a.a.createElement("h1",null,I18N.toString("component.analysis.title"))),a.a.createElement("div",{className:"panel-content"},a.a.createElement("div",{style:{paddingBottom:"0.5em"}},a.a.createElement("h3",{style:{marginBottom:"0"}},"Optimizations"),a.a.createElement("div",{style:{paddingBottom:"0.5em"}},a.a.createElement("div",null,a.a.createElement("input",{ref:function(t){return e.optimizeUnreachOption=t},id:"opt-unreach",type:"checkbox"}),a.a.createElement("label",{htmlFor:"opt-unreach"},"Unreachables")),a.a.createElement("div",null,a.a.createElement("input",{ref:function(t){return e.optimizeRedundOption=t},id:"opt-redund",type:"checkbox",disabled:!0}),a.a.createElement("label",{htmlFor:"opt-redund"},"Redundant States"))),a.a.createElement("button",{className:"panel-button",onClick:this.onOptimizeMachine,disabled:!this.canOptimize()},"Optimize")),a.a.createElement("hr",null),"DFA"==r.getMachineType()?a.a.createElement("button",{className:"panel-button",onClick:this.onConvertToNFA},I18N.toString("action.overview.convertnfa")):"NFA"==r.getMachineType()?a.a.createElement("button",{className:"panel-button",onClick:this.onConvertToDFA},I18N.toString("action.overview.convertdfa")):null),a.a.createElement("div",{className:"panel-bottom"}))}}])&&xn(n.prototype,r),i&&xn(n,i),t}();In.UNLOCALIZED_NAME="component.analysis.title";var Ln=In;function An(e){return(An="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Rn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Gn(e,t){return!t||"object"!==An(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Bn(e){return(Bn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Fn(e,t){return(Fn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Un=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Gn(this,Bn(t).call(this,e))).container=null,n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Fn(e,t)}(t,a.a.Component),n=t,(r=[{key:"render",value:function(){var e=this;return a.a.createElement("div",{className:"panel-container",id:"about",ref:function(t){return e.container=t},style:this.props.style},a.a.createElement("div",{className:"panel-title"},a.a.createElement("h1",null,"Finite State Automata")),a.a.createElement("div",{className:"panel-content"},a.a.createElement("p",null,"Brought to you with ❤ by the Flap.js team."),a.a.createElement("p",null,"<- Tap on a tab to begin!")),a.a.createElement("div",{className:"panel-bottom"}))}}])&&Rn(n.prototype,r),o&&Rn(n,o),t}(),Hn=n(14);function zn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Vn=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.selectionBox={fromX:0,fromY:0,toX:0,toY:0,visible:!1},this.targets=[],this.target=null,this.targetType="",this.initialTarget=null,this.initialTargetType=""}var t,n,r;return t=e,(n=[{key:"setInitialTarget",value:function(e,t){this.initialTarget=e,this.initialTargetType=t}},{key:"updateTarget",value:function(e,t,n){return(this.target=this.getNodeByInitialMarkerAt(e,t,n))?this.targetType="initial":(this.target=this.getEdgeByEndPointAt(e,t,n))?this.targetType="endpoint":(this.target=this.getNodeAt(e,t,n))?this.targetType="node":(this.target=this.getEdgeAt(e,t,n))?this.targetType="edge":(this.target=null,this.targetType="none"),this.target}},{key:"clearTarget",value:function(){this.target=null,this.targetType="none"}},{key:"hasTarget",value:function(){return null!=this.target}},{key:"getNodeAt",value:function(e,t,n){var r=!0,o=!1,i=void 0;try{for(var a,u=e.getNodes()[Symbol.iterator]();!(r=(a=u.next()).done);r=!0){var s=a.value,c=t-s.x,f=n-s.y;if(c*c+f*f<l.a.NODE_RADIUS_SQU)return s}}catch(e){o=!0,i=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return null}},{key:"getNodeByInitialMarkerAt",value:function(e,t,n){var r=e.getStartNode();if(!r)return null;var o=t-(r.x+l.a.INITIAL_MARKER_OFFSET_X),i=n-r.y;return o*o+i*i<l.a.EDGE_RADIUS_SQU?r:null}},{key:"getEdgeAt",value:function(e,t,n){var r={x:0,y:0},o=!0,i=!1,a=void 0;try{for(var u,s=e.getEdges()[Symbol.iterator]();!(o=(u=s.next()).done);o=!0){var c=u.value;c.getCenterPoint(r);var f=t-r.x,p=n-r.y;if(f*f+p*p<l.a.EDGE_RADIUS_SQU)return c}}catch(e){i=!0,a=e}finally{try{o||null==s.return||s.return()}finally{if(i)throw a}}return null}},{key:"getEdgeByEndPointAt",value:function(e,t,n){var r={x:0,y:0},o=!0,i=!1,a=void 0;try{for(var u,s=e.getEdges()[Symbol.iterator]();!(o=(u=s.next()).done);o=!0){var c=u.value;c.getEndPoint(r);var f=t-r.x,p=n-r.y;if(f*f+p*p<l.a.ENDPOINT_RADIUS_SQU)return c}}catch(e){i=!0,a=e}finally{try{o||null==s.return||s.return()}finally{if(i)throw a}}return null}},{key:"getSelectionBox",value:function(){return this.selectionBox}},{key:"getSelection",value:function(e){if(arguments.length>1&&void 0!==arguments[1]&&arguments[1]){var t=this.selectionBox,n=Math.max(t.toX,t.fromX),r=Math.max(t.toY,t.fromY),o=Math.min(t.toX,t.fromX),i=Math.min(t.toY,t.fromY);this.clearSelection(),function(e,t,n,r,o,i){var a=Math.min(t,r),l=Math.min(n,o),u=Math.max(t,r),s=Math.max(n,o),c=!0,f=!1,p=void 0;try{for(var h,y=e.getNodes()[Symbol.iterator]();!(c=(h=y.next()).done);c=!0){var v=h.value;v.x>=a&&v.x<u&&v.y>=l&&v.y<s&&i.push(v)}}catch(e){f=!0,p=e}finally{try{c||null==y.return||y.return()}finally{if(f)throw p}}}(e,o,i,n,r,this.targets)}return this.targets}},{key:"hasSelection",value:function(){return this.targets.length>0}},{key:"clearSelection",value:function(){this.targets.length=0}},{key:"isTargetInSelection",value:function(e){return this.targets.includes(e||this.target)}},{key:"isTarget",value:function(e){return this.target==e}},{key:"beginSelection",value:function(e,t,n){var r=this.selectionBox;r.fromX=r.toX=t,r.fromY=r.toY=n,this.clearSelection(),r.visible=!0}},{key:"updateSelection",value:function(e,t,n){var r=this.selectionBox;r.toX=t,r.toY=n,this.getSelection(e,!0)}},{key:"endSelection",value:function(e,t,n){var r=this.selectionBox;r.toX=t,r.toY=n,this.getSelection(e,!0),r.visible=!1}},{key:"isSelecting",value:function(){return this.selectionBox.visible}}])&&zn(t.prototype,n),r&&zn(t,r),e}(),Qn=n(17);function Kn(e){return(Kn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Yn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Xn(e,t){return!t||"object"!==Kn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function qn(e,t,n){return(qn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Wn(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Wn(e){return(Wn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Jn(e,t){return(Jn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Zn=function(e){function t(e,n,r){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=Xn(this,Wn(t).call(this,e,n,r)))._accept=!1,o._custom=!1,o}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Jn(e,t)}(t,Qn["a"]),n=t,(r=[{key:"setNodeAccept",value:function(e){this._accept=e}},{key:"getNodeAccept",value:function(){return this._accept}},{key:"setNodeCustom",value:function(e){this._custom=e}},{key:"getNodeCustom",value:function(){return this._custom}},{key:"getNodeSize",value:function(){return l.a.NODE_RADIUS}},{key:"getHashString",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return qn(Wn(t.prototype),"getHashString",this).call(this,e)+":"+(this._accept?"1":"0")}}])&&Yn(n.prototype,r),o&&Yn(n,o),t}(),$n=n(18);function er(e){return(er="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function nr(e,t){return!t||"object"!==er(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function rr(e,t,n){return(rr="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=or(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function or(e){return(or=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ir(e,t){return(ir=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ar(e,t,n,r,o){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{x:0,y:0},l=n-e,u=r-t,s=Math.atan2(u,l)+i;return a.x=Math.cos(s)*o,a.y=Math.sin(s)*o,a}function lr(e,t,n,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{x:0,y:0};return o.x=e+(n-e)/2,o.y=t+(r-t)/2,o}var ur=function(e){function t(e,n){var r,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=nr(this,or(t).call(this,e,n,null)))._quad={radians:0,length:0,_coords:{x:0,y:0}},r.changeDestinationNode(o),r}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ir(e,t)}(t,$n["a"]),n=t,(r=[{key:"setQuadratic",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return this._quad.radians=e,"number"==typeof t&&(this._quad.length=t),this}},{key:"getQuadratic",value:function(){return this._quad}},{key:"isQuadratic",value:function(){return!this.isPlaceholder()&&0!=this._quad.length}},{key:"setQuadraticByCoords",value:function(e,t){var n=this._from,r=this._to,o=n.x,i=n.y,a=r.x-o,l=r.y-i,u=o+a/2,s=i+l/2,c=Math.atan2(-l,a);a=e-u,l=t-s;var f=Math.PI,p=f/2,h=Math.atan2(l,a)+c,y=Math.sqrt(a*a+l*l);y<0&&(y=0);var v=h- -p,g=h-p,d=f/20;Math.abs(y)<8?(h=0,y=0):v<d&&v>-d?h=-p:-g<d&&-g>-d&&(h=p),this._quad.radians=h,this._quad.length=y}},{key:"getQuadraticAsCoords",value:function(){var e=this._from,t=this._to,n=this._quad._coords;return null==e||null==t?(n.x=0,n.y=0):ar(e.x,e.y,t.x,t.y,this._quad.length,this._quad.radians,n),n}},{key:"getSelfLoopHeight",value:function(){return this._from.getNodeSize()}},{key:"formatAsSelfLoop",value:function(){this.setQuadratic(-Math.PI/2,this._from.getNodeSize()+this.getSelfLoopHeight())}},{key:"formatAsPlaceholder",value:function(e){if(e){var t=this._from.x-e.x,n=this._from.y-e.y,r=-Math.atan2(t,n)-Math.PI/2;this._quad.radians=r}else this._quad.radians=0}},{key:"changeDestinationNode",value:function(e){var n=this._to;n!==e&&(rr(or(t.prototype),"changeDestinationNode",this).call(this,e),this.isPlaceholder()?this.formatAsPlaceholder(n):this.isSelfLoop()&&this.formatAsSelfLoop())}},{key:"getEdgeDirection",value:function(){var e=0;if(this.isQuadratic()){var n=this.getQuadraticAsCoords();e=Math.atan2(n.y,n.x)+Math.PI/2}else e=rr(or(t.prototype),"getEdgeDirection",this).call(this);return e}},{key:"getStartPoint",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{x:0,y:0},t=this._from,n=this._to;if(!t)throw new Error("Source of edge cannot be null.");if(!n){var r=Math.cos(this._quad.radians),o=Math.sin(this._quad.radians),i=t.getNodeSize();return e.x=t.x+r*i,e.y=t.y+o*i,e}if(n.getNodeSize&&this.isQuadratic()){lr(t.x,t.y,n.x,n.y,e);var a=this.getQuadraticAsCoords(),l=e.x+a.x,u=e.y+a.y;return ar(t.x,t.y,l,u,t.getNodeSize(),this.isSelfLoop()?Math.PI/4:0,e),e.x+=t.x,e.y+=t.y,e}return ar(t.x,t.y,n.x,n.y,t.getNodeSize(),0,e),e.x+=t.x,e.y+=t.y,e}},{key:"getEndPoint",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{x:0,y:0},t=this._from,n=this._to;if(!t)throw new Error("Source of edge cannot be null.");if(!n){var r=Math.cos(this._quad.radians),o=Math.sin(this._quad.radians),i=t.getNodeSize()+this.getPlaceholderLength();return e.x=t.x+r*i,e.y=t.y+o*i,e}if(n.getNodeSize){if(this.isQuadratic()){lr(t.x,t.y,n.x,n.y,e);var a=this.getQuadraticAsCoords(),l=e.x+a.x,u=e.y+a.y;return ar(n.x,n.y,l,u,n.getNodeSize(),this.isSelfLoop()?-Math.PI/4:0,e),e.x+=n.x,e.y+=n.y,e}return ar(n.x,n.y,t.x,t.y,n.getNodeSize(),0,e),e.x+=n.x,e.y+=n.y,e}return n}},{key:"getCenterPoint",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{x:0,y:0},t=this._from,n=this._to;if(!t)throw new Error("Source of edge cannot be null.");if(!n){var r=Math.cos(this._quad.radians),o=Math.sin(this._quad.radians),i=t.getNodeSize()+this.getPlaceholderLength()/2;return e.x=t.x+r*i,e.y=t.y+o*i,e}if(lr(t.x,t.y,n.x,n.y,e),this.isQuadratic()){var a=this.getQuadraticAsCoords();e.x+=a.x,e.y+=a.y}return e}},{key:"getHashString",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return e?rr(or(t.prototype),"getHashString",this).call(this,e)+":"+this._quad.radians+","+this._quad.length:rr(or(t.prototype),"getHashString",this).call(this,e)}}])&&tr(n.prototype,r),o&&tr(n,o),t}();function sr(e){return(sr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function cr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function fr(e,t){return!t||"object"!==sr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function pr(e,t,n){return(pr="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=hr(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function hr(e){return(hr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function yr(e,t){return(yr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var vr=function(e){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),fr(this,hr(t).call(this,e,n,r))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&yr(e,t)}(t,ur),n=t,(r=[{key:"setEdgeLabel",value:function(e){"string"==typeof e?pr(hr(t.prototype),"setEdgeLabel",this).call(this,e):pr(hr(t.prototype),"setEdgeLabel",this).call(this,"ε")}},{key:"getEdgeSymbolsFromLabel",value:function(){return this.getEdgeLabel().split(" ")}}])&&cr(n.prototype,r),o&&cr(n,o),t}();function gr(e){return(gr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function dr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function br(e,t){return!t||"object"!==gr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function mr(e,t,n){return(mr="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=wr(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function wr(e){return(wr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Er(e,t){return(Er=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Sr=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=br(this,wr(t).call(this,e,n)))._picker=new Vn,r._graphController=null,r.prevPointerX=0,r.prevPointerY=0,r.isNewEdge=!1,r.ghostInitialMarker=null,r.shouldDestroyPointlessEdges=l.a.DEFAULT_SHOULD_DESTROY_POINTLESS_EDGE,r._swapMouseScheme=!0,//!navigator.platform.startsWith("Mac");
r._trashMode=!1,r}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Er(e,t)}(t,Hn["a"]),n=t,(r=[{key:"initialize",value:function(e){mr(wr(t.prototype),"initialize",this).call(this,e),this._graphController=e.getGraphController()}},{key:"destroy",value:function(e){mr(wr(t.prototype),"destroy",this).call(this,e)}},{key:"update",value:function(e){var t=this._graphController.getGraph(),n=this._picker,r=this._inputAdapter.getPointerX(),o=this._inputAdapter.getPointerY();r==this.prevPointerX&&o==this.prevPointerY||(this.prevPointerX=r,this.prevPointerY=o,n.updateTarget(t,r,o),n.hasTarget()?document.body.style.cursor="pointer":document.body.style.cursor="auto")}},{key:"onPreInputEvent",value:function(e){var t=this._graphController,n=t.getGraph(),r=this.getPicker();r.updateTarget(n,e.x,e.y),r.setInitialTarget(r.target,r.targetType);var o=r.initialTarget,i=r.initialTargetType;return r.hasSelection()&&("node"==i&&r.isTargetInSelection(o)||r.clearSelection()),!!t.tester.getStepByStepMode()}},{key:"onInputEvent",value:function(e){var t=this._graphController,n=e.x,r=e.y,o=t.getGraph(),i=this.getPicker();i.updateTarget(o,n,r);var a=i.initialTarget,l=i.initialTargetType;return this.isTrashMode()?"node"===l?(t.prevX=a.x,t.prevY=a.y,i.hasSelection()?t.deleteSelectedNodes(a):t.deleteTargetNode(a),!0):("edge"===l||"endpoint"===l)&&(t.deleteTargetEdge(a),!0):"node"===l?(t.toggleNode(a),!0):"edge"===l&&(t.openLabelEditor(a,n,r),!0)}},{key:"onAltInputEvent",value:function(e){return this.onInputEvent(e)}},{key:"onDblInputEvent",value:function(e){var t=this._graphController,n=e.x,r=e.y;return this.isTrashMode()?(t.emit("tryCreateWhileTrash"),!0):(t.createNode(n,r),!0)}},{key:"onDragStart",value:function(e){var t=this._graphController,n=t.getGraph(),r=this.getPicker(),o=e.x,i=e.y,a=r.initialTarget,u=r.initialTargetType;this.getInputAdapter().getViewport();if(this.isMoveMode()){if(this.isTrashMode())return t.emit("tryCreateWhileTrash"),!1;if(this.isNewEdge=!1,"edge"===u&&a.isPlaceholder())return!1;if("node"===u){if(!(a instanceof Zn))throw new Error("Invalid target "+a+" for type '"+u+"'. Must be an instance of Node.");return t.prevX=a.x,t.prevY=a.y,!0}if("edge"===u){if(!(a instanceof vr))throw new Error("Invalid target "+a+" for type '"+u+"'. Must be an instance of Edge.");if(a.isPlaceholder())return!1;var s=a.getQuadratic();return t.prevQuad.radians=s.radians,t.prevQuad.length=s.length,!0}if("initial"===u)return this.ghostInitialMarker=e,!0;if("none"===u)return t.prevX=o,t.prevY=i,!0}else{if("node"===u){if(this.isTrashMode())return t.emit("tryCreateWhileTrash"),!1;var c=n.createEdge(a,e);c.setEdgeLabel(l.a.STR_TRANSITION_DEFAULT_LABEL),r.setInitialTarget(c,"endpoint"),this.isNewEdge=!0;var f=c.getQuadratic();return t.prevQuad.radians=f.radians,t.prevQuad.length=f.length,!0}if("edge"==u)return!1;if("none"===u)return r.beginSelection(n,o,i),!0}if("endpoint"===u){if(!(a instanceof vr))throw new Error("Invalid target "+a+" for type '"+u+"'. Must be an instance of Edge.");var p=a.getQuadratic();return t.prevQuad.radians=p.radians,t.prevQuad.length=p.length,t.prevEdgeTo=a.getDestinationNode(),this.isNewEdge=!this.isMoveMode(),!0}return!1}},{key:"onDragMove",value:function(e){var t=this._graphController,n=t.getGraph(),r=this.getPicker(),o=e.x,i=e.y,a=r.initialTarget,l=r.initialTargetType;if(this.isMoveMode()){if("node"===l)return r.hasSelection()?t.moveMultipleNodesTo(e,r.getSelection(n),o,i):t.moveNodeTo(e,a,o,i),!0;if("edge"===l)return t.moveEdgeTo(e,a,o,i),!0;if("endpoint"===l)return t.moveEndpointTo(e,a,o,i),!0;if("initial"===l){var u=r.getNodeAt(n,o,i)||e;return this.ghostInitialMarker=u,!0}if("none"===l){var s=o-t.prevX,c=i-t.prevY;return this.getInputAdapter().getViewport().addOffset(s,c,!0),!0}throw new Error("Unknown target type '"+l+"'.")}return this.isNewEdge?(t.moveEndpointTo(e,a,o,i),!0):r.isSelecting()?(r.updateSelection(n,o,i),!0):void 0}},{key:"onDragStop",value:function(e){var t=this._graphController,n=t.getGraph(),r=this.getPicker(),o=e.x,i=e.y;r.updateTarget(n,o,i);var a=r.initialTarget,l=r.initialTargetType;if(this.isMoveMode()||this.isNewEdge){if("node"===l){if(this.isTrashMode())return r.hasSelection()?t.deleteSelectedNodes(a):t.deleteTargetNode(a),!0;if(r.hasSelection()){var u=o-t.prevX,s=i-t.prevY;t.emit("nodeMoveAll",n,r.getSelection(n),u,s)}else t.emit("nodeMove",n,a,o,i,t.prevX,t.prevY);return!0}if("edge"===l)return this.isTrashMode()?t.deleteTargetEdge(a):t.emit("edgeMove",n,a,a.getQuadratic(),t.prevQuad),!0;if(this.isNewEdge||"endpoint"===l){if(this.isTrashMode())return t.deleteTargetEdge(a),!0;if(a.getDestinationNode()instanceof Zn){var c=n.formatEdge(a);return c!==a?(t.openLabelEditor(c,o,i,c.getEdgeLabel(),!1),n.deleteEdge(a),!0):(this.isNewEdge?t.openLabelEditor(a,o,i,null,!0,function(){t.emit("userPostCreateEdge",n,a)}):t.openLabelEditor(a,o,i),this.isNewEdge?(this.isNewEdge=!1,t.emit("userCreateEdge",n,a)):null!==t.prevEdgeTo&&t.emit("edgeDestination",n,a,a.getDestinationNode(),t.prevEdgeTo,t.prevQuad),!0)}return this.shouldDestroyPointlessEdges?(this.isNewEdge?n.deleteEdge(a):t.deleteTargetEdge(a),!0):(a.changeDestinationNode(null),a.getEdgeLabel().length<=0&&t.openLabelEditor(a,o,i),!0)}if("initial"===l){if(this.ghostInitialMarker instanceof Zn){var f=n.getStartNode();n.setStartNode(this.ghostInitialMarker),t.emit("nodeInitial",n,this.ghostInitialMarker,f)}return this.ghostInitialMarker=null,!0}if("none"===l)return!0;throw new Error("Unknown target type '"+l+"'.")}return!!r.isSelecting()&&(r.endSelection(n,o,i),!0)}},{key:"onPostInputEvent",value:function(e){var t=this._graphController.getGraph(),n=this.getPicker();n.clearTarget(),n.updateTarget(t,e.x,e.y)}},{key:"onZoomChange",value:function(e,t,n){return!0}},{key:"setTrashMode",value:function(e){this._trashMode=e}},{key:"isTrashMode",value:function(){return this._trashMode}},{key:"setInputScheme",value:function(e){this._swapMouseScheme=!e}},{key:"getInputScheme",value:function(){return this._swapMouseScheme}},{key:"isMoveMode",value:function(){var e=this._inputAdapter.isAltInput();return this._swapMouseScheme?!e:e}},{key:"isDragging",value:function(){return this._inputAdapter.isDragging()}},{key:"isActionMode",value:function(e){return this._inputAdapter.isPointerActive()?e.isNewEdge||!this.isMoveMode():!this._swapMouseScheme}},{key:"getPicker",value:function(){return this._picker}}])&&dr(n.prototype,r),o&&dr(n,o),t}(),_r=n(15),Or={__eventListeners:null,mixin:function(e){var t=e.prototype;Object.assign(t,Or),delete t.mixin},registerEvent:function(e){if(this.__eventListeners||(this.__eventListeners=new Map),this.__eventListeners.has(e))throw new Error("Already registered event '"+e+"'");this.__eventListeners.set(e,[])},unregisterEvent:function(e){if(this.__eventListeners){if(!this.__eventListeners.has(e))throw new Error("Unable to find event '"+e+"'");this.__eventListeners.delete(e)}},addEventListener:function(e,t){if(this.__eventListeners||(this.__eventListeners=new Map),!this.__eventListeners.has(e))throw new Error("Unable to find event '"+e+"'");this.__eventListeners.get(e).push(t)},removeEventListener:function(e,t){if(this.__eventListeners){if(!this.__eventListeners.has(e))throw new Error("Unknown event '"+e+"'");for(var n=this.__eventListeners.get(e),r=!1,o=n.length;o--;)n[o]===t&&(n.splice(o,1),r=!0);if(!r)throw new Error("Unable to find listener for event '"+e+"'")}},clearEventListeners:function(e){if(this.__eventListeners){if(!this.__eventListeners.has(e))throw new Error("Unable to find event '"+e+"'");this.__eventListeners.get(e).length=0}},countEventListeners:function(e){return this.__eventListeners&&this.__eventListeners.has(e)?this.__eventListeners.get(e).length:0},getEventListeners:function(e){return this.__eventListeners?this.__eventListeners.get(e):null},on:function(e,t){this.addEventListener(e,t)},once:function(e,t){var n=this;this.addEventListener(e,function r(){try{for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];t.apply(null,i)}finally{n.removeEventListener(e,r)}})},emit:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];try{if(!this.__eventListeners)return;var o;if(!this.__eventListeners.has(e))throw new Error("Unable to find event '"+e+"'");o=this.__eventListeners.get(e);for(var i=null,a=o.length;a--;){try{i=o[a].apply(null,n)}catch(e){console.error(e)}if(!0===i)break}}finally{this.onEventProcessed.apply(this,[e].concat(n))}},onEventProcessed:function(e){}},kr=Or;function Cr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Nr=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"applyLayout",value:function(e){if("circle"!=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"circle"))throw new Error("Invalid layout type");var t=function(e){var t=[],n=e.getStartNode();t.push(n);for(var r=0;r<t.length;r++){var o=!0,i=!1,a=void 0;try{for(var l,u=e.getEdges()[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var s=l.value;s.from==t[r]&&(t.includes(s.to)||t.push(s.to))}}catch(e){i=!0,a=e}finally{try{o||null==u.return||u.return()}finally{if(i)throw a}}}return t}(e);var n=e.getNodes().filter(function(e){return!t.includes(e)}),r=t.length,o=n.length,i=e.getNodes().length,a=Math.max(r,o);if(0!=i){var l;l=r<10&&o<10?a/4*50+10:a/5*40+10;var u=2*Math.PI/r,s=2*Math.PI/o,c=0,f=!0,p=!1,h=void 0;try{for(var y,v=t[Symbol.iterator]();!(f=(y=v.next()).done);f=!0){var g=y.value;g.y=Math.sin(u*c+Math.PI)*l,g.x=Math.cos(u*c+Math.PI)*l,c+=1}}catch(e){p=!0,h=e}finally{try{f||null==v.return||v.return()}finally{if(p)throw h}}c=0;var d=!0,b=!1,m=void 0;try{for(var w,E=n[Symbol.iterator]();!(d=(w=E.next()).done);d=!0){var S=w.value;S.y=Math.sin(s*c+Math.PI)*(l+100),S.x=Math.cos(s*c+Math.PI)*(l+100),c+=1}}catch(e){b=!0,m=e}finally{try{d||null==E.return||E.return()}finally{if(b)throw m}}}}}],(n=null)&&Cr(t.prototype,n),r&&Cr(t,r),e}(),jr=n(16);function Pr(e){return(Pr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Tr(e,t){return!t||"object"!==Pr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Mr(e){return(Mr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Dr(e,t){return(Dr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ir=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Tr(this,Mr(t).call(this))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Dr(e,t)}(t,jr["a"]),n=t,(r=[{key:"createNode",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return this.addNode(new Zn(n,e,t))}},{key:"createEdge",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return this.addEdge(new vr(n,e,t))}},{key:"setStartNode",value:function(e){if(this._nodes.length<=0)throw new Error("Cannot set start node to empty graph");if(1!==this._nodes.length){var t=this._nodes.indexOf(e);if(t>0){var n=this._nodes[0];this._nodes[0]=e,this._nodes[t]=n}else if(t<0)throw new Error("Cannot set start node for unknown node")}}},{key:"getStartNode",value:function(){return this._nodes.length>0?this._nodes[0]:null}},{key:"formatEdge",value:function(e){var t=e.getSourceNode(),n=e.getDestinationNode(),r=e.getEdgeSymbolsFromLabel(),o=!0,i=!1,a=void 0;try{for(var l,u=this._edges[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var s=l.value;if(s!==e&&(s.getSourceNode()===t&&s.getDestinationNode()===n)){var c=s.getEdgeSymbolsFromLabel();if(r.length>0){var f=c.concat(r);s.setEdgeLabel(f.join(" "))}return s}}}catch(e){i=!0,a=e}finally{try{o||null==u.return||u.return()}finally{if(i)throw a}}if(!e.isSelfLoop()){var p=!1,h=Math.PI/2,y=!0,v=!1,g=void 0;try{for(var d,b=this._edges[Symbol.iterator]();!(y=(d=b.next()).done);y=!0){var m=d.value;if(!(m.isQuadratic()&&Math.abs(m.getQuadratic().length)>=20)&&(m.getDestinationNode()===t&&m.getSourceNode()===n)){e.setQuadratic(h,10),m.setQuadratic(h,10),p=!0;break}}}catch(e){v=!0,g=e}finally{try{y||null==b.return||b.return()}finally{if(v)throw g}}if(!p){var w=Math.max(t.getNodeSize(),n.getNodeSize()),E=t.x,S=t.y,_=n.x,O=n.y,k=(_-E)*(_-E)+(O-S)*(O-S),C=!1,N=0,j=0;E>_?j=O-(N=(S-O)/(E-_))*_:E<_?j=S-(N=(O-S)/(_-E))*E:C=!0;var P=!0,x=!1,T=void 0;try{for(var M,D=this._nodes[Symbol.iterator]();!(P=(M=D.next()).done);P=!0){var I=M.value;if(I!==t&&I!==n){var L=I.x,A=I.y;if(!((E-L)*(E-L)+(S-A)*(S-A)>k||(_-L)*(_-L)+(O-A)*(O-A)>k)){if((C?Math.abs(E-L):Math.abs(j+N*L-A)/Math.sqrt(1+N*N))<I.getNodeSize()){p=!0;break}}}}}catch(e){x=!0,T=e}finally{try{P||null==D.return||D.return()}finally{if(x)throw T}}p&&e.setQuadratic(-Math.PI/2,w+10)}}return e}}])&&xr(n.prototype,r),o&&xr(n,o),t}();function Lr(e){return(Lr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ar(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Rr(e,t){return!t||"object"!==Lr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Gr(e){return(Gr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Br(e,t){return(Br=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Fr=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Rr(this,Gr(t).call(this,e,new Ir))).inputController=null,n.machineController=null,n.viewportElement=null,n.tester=null,n.prevQuad={radians:0,length:0,x:0,y:0},n.prevEdgeTo=null,n.prevX=0,n.prevY=0,n.registerEvent("userCreateNode"),n.registerEvent("userPreCreateNode"),n.registerEvent("userPostCreateNode"),n.registerEvent("userToggleNode"),n.registerEvent("userDeleteNodes"),n.registerEvent("userPreDeleteNodes"),n.registerEvent("userPostDeleteNodes"),n.registerEvent("userDeleteEdge"),n.registerEvent("userPreDeleteEdge"),n.registerEvent("userPostDeleteEdge"),n.registerEvent("userCreateEdge"),n.registerEvent("userPostCreateEdge"),n.registerEvent("userRenameNode"),n.registerEvent("userChangeLayout"),n.registerEvent("userPreChangeLayout"),n.registerEvent("userPostChangeLayout"),n.registerEvent("userImportGraph"),n.registerEvent("userPreImportGraph"),n.registerEvent("userPostImportGraph"),n.registerEvent("nodeMove"),n.registerEvent("nodeMoveAll"),n.registerEvent("nodeInitial"),n.registerEvent("edgeDestination"),n.registerEvent("edgeMove"),n.registerEvent("edgeLabel"),n.registerEvent("tryCreateWhileTrash"),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Br(e,t)}(t,_r["a"]),n=t,(r=[{key:"initialize",value:function(e){this.viewportElement=e.viewport,this.tester=e.getCurrentModule().getTestingManager(),this.inputController=e.getInputController(),this.machineController=e.getMachineController()}},{key:"destroy",value:function(){}},{key:"applyAutoLayout",value:function(){this.emit("userPreChangeLayout",this.getGraph()),Nr.applyLayout(this.getGraph()),this.emit("userChangeLayout",this.getGraph()),this.emit("userPostChangeLayout",this.getGraph())}},{key:"renameNode",value:function(e,t){var n=e.getNodeLabel(),r=e.getNodeCustom();e.setNodeLabel(t),e.setNodeCustom(!0),this.emit("userRenameNode",this.getGraph(),e,t,n,r)}},{key:"createNode",value:function(e,t){var n=this.machineController.getMachineBuilder().getLabeler().getNextDefaultNodeLabel();void 0===e&&(e=Math.random()*l.a.SPAWN_RADIUS*2-l.a.SPAWN_RADIUS),void 0===t&&(t=Math.random()*l.a.SPAWN_RADIUS*2-l.a.SPAWN_RADIUS),this.emit("userPreCreateNode",this.getGraph(),n,e,t);var r=this.getGraph().createNode(e,t);return r.setNodeLabel(n),this.emit("userCreateNode",this.getGraph(),r),this.emit("userPostCreateNode",this.getGraph(),r),r}},{key:"toggleNode",value:function(e){var t=e.getNodeAccept(),n=!t;e.setNodeAccept(n),this.emit("userToggleNode",this.getGraph(),e,t)}},{key:"deleteSelectedNodes",value:function(e){var t=this.inputController.getPicker(),n=t.getSelection(this.getGraph()).slice();this.emit("userPreDeleteNodes",this.getGraph(),e,n,this.prevX,this.prevY);var r=!0,o=!1,i=void 0;try{for(var a,l=n[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var u=a.value;this.getGraph().deleteNode(u)}}catch(e){o=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw i}}t.clearSelection(),this.emit("userDeleteNodes",this.getGraph(),e,n,this.prevX,this.prevY),this.emit("userPostDeleteNodes",this.getGraph(),e,n,this.prevX,this.prevY)}},{key:"deleteTargetNode",value:function(e){this.emit("userPreDeleteNodes",this.getGraph(),e,[e],this.prevX,this.prevY),this.getGraph().deleteNode(e),this.emit("userDeleteNodes",this.getGraph(),e,[e],this.prevX,this.prevY),this.emit("userPostDeleteNodes",this.getGraph(),e,[e],this.prevX,this.prevY)}},{key:"deleteTargetNodes",value:function(e){if(e&&!(e.length<=0)){this.emit("userPreDeleteNodes",this.getGraph(),e[0],e,this.prevX,this.prevY);var t=this.getGraph(),n=!0,r=!1,o=void 0;try{for(var i,a=e[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var l=i.value;t.deleteNode(l)}}catch(e){r=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}this.emit("userDeleteNodes",this.getGraph(),e[0],e,this.prevX,this.prevY),this.emit("userPostDeleteNodes",this.getGraph(),e[0],e,this.prevX,this.prevY)}}},{key:"deleteTargetEdge",value:function(e){this.emit("userPreDeleteEdge",this.getGraph(),e,this.prevEdgeTo,this.prevQuad),this.getGraph().deleteEdge(e),this.emit("userDeleteEdge",this.getGraph(),e,this.prevEdgeTo,this.prevQuad),this.emit("userPostDeleteEdge",this.getGraph(),e,this.prevEdgeTo,this.prevQuad)}},{key:"deleteTargetEdges",value:function(e){if(e&&!(e.length<=0)){var t=!0,n=!1,r=void 0;try{for(var o,i=e[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var a=o.value;this.deleteTargetEdge(a)}}catch(e){n=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}}}},{key:"moveNodeTo",value:function(e,t,n,r){var o=!0,i=!1,a=void 0;try{for(var u,s=this.getGraph().getNodes()[Symbol.iterator]();!(o=(u=s.next()).done);o=!0){var c=u.value;if(t!==c){var f=n-c.x,p=r-c.y,h=Math.atan2(p,f),y=2*l.a.NODE_RADIUS,v=c.x+Math.cos(h)*y-n,g=c.y+Math.sin(h)*y-r;f*f+p*p<4*l.a.NODE_RADIUS_SQU&&(n+=v,r+=g)}}}catch(e){i=!0,a=e}finally{try{o||null==s.return||s.return()}finally{if(i)throw a}}t.x=n,t.y=r}},{key:"moveMultipleNodesTo",value:function(e,t,n,r){var o=e.getInputEventPosition(),i=n-o.x,a=r-o.y,l=!0,u=!1,s=void 0;try{for(var c,f=t[Symbol.iterator]();!(l=(c=f.next()).done);l=!0){var p=c.value;p.x+=i,p.y+=a}}catch(e){u=!0,s=e}finally{try{l||null==f.return||f.return()}finally{if(u)throw s}}e.changeInputEventPosition(n,r)}},{key:"moveEdgeTo",value:function(e,t,n,r){t.setQuadraticByCoords(n,r)}},{key:"moveEndpointTo",value:function(e,t,n,r){var o=this.inputController.getPicker().getNodeAt(this.getGraph(),n,r)||e;if(t.changeDestinationNode(o),t.isSelfLoop()){var i=t.getSourceNode(),a=i.x-n,l=i.y-r,u=Math.atan2(l,a)+Math.PI;t.setQuadratic(u)}else t.setQuadratic(this.prevQuad.radians,this.prevQuad.length)}},{key:"openLabelEditor",value:function(e,t,n){var r=this,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,l=o||e.getEdgeLabel();this.viewportElement.labelEditor.openEditor(e,o,i,function(){var t=e.getEdgeLabel();l.length>0&&t!=l&&r.emit("edgeLabel",r.getGraph(),e,t,l),a&&a()})}},{key:"focusOnNode",value:function(e){this.inputController.getInputAdapter().getViewport().setOffset(-e.x,-e.y)}},{key:"focusOnEdge",value:function(e){var t=e.getCenterPoint();this.inputController.getInputAdapter().getViewport().setOffset(-t.x,-t.y)}},{key:"focusOnNodes",value:function(e){var t=e.length,n=0,r=0,o=!0,i=!1,a=void 0;try{for(var l,u=e[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var s=l.value;n+=s.x,r+=s.y}}catch(e){i=!0,a=e}finally{try{o||null==u.return||u.return()}finally{if(i)throw a}}this.inputController.getInputAdapter().getViewport().setOffset(-n/t,-r/t)}}])&&Ar(n.prototype,r),o&&Ar(n,o),t}();kr.mixin(Fr);var Ur=Fr;function Hr(e,t,n){var r=[],o=t.getAlphabet(),i=Vr(e);n.hasState(i)||r.push(zr(n,t,e));var a=[],l=null,u=!0,s=!1,c=void 0;try{for(var f,p=o[Symbol.iterator]();!(u=(f=p.next()).done);u=!0){var h=f.value,y=!0,v=!1,g=void 0;try{for(var d,b=e[Symbol.iterator]();!(y=(d=b.next()).done);y=!0){var m=d.value;t.doTerminalTransition(m,h,a)}}catch(e){v=!0,g=e}finally{try{y||null==b.return||b.return()}finally{if(v)throw g}}a.length>0&&(l=Vr(a),n.hasState(l)||(l=zr(n,t,a),r.push(l)),n.newTransition(i,l,h)),a.length=0}}catch(e){s=!0,c=e}finally{try{u||null==p.return||p.return()}finally{if(s)throw c}}return r}function zr(e,t,n){var r=e.newState(Vr(n)),o=!0,i=!1,a=void 0;try{for(var l,u=n[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var s=l.value;if(t.isFinalState(s)){e.setFinalState(r);break}}}catch(e){i=!0,a=e}finally{try{o||null==u.return||u.return()}finally{if(i)throw a}}return r}function Vr(e){return e.sort(),"{"+e.join(",")+"}"}function Qr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Kr=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._module=t,this.machineName=null,this.graphController=null,this.registerEvent("userChangeMachine"),this.registerEvent("userConvertMachine"),this.registerEvent("userPreConvertMachine"),this.registerEvent("userPostConvertMachine"),this.registerEvent("userRenameMachine"),this.registerEvent("userCreateSymbol"),this.registerEvent("userDeleteSymbol"),this.registerEvent("userPreDeleteSymbol"),this.registerEvent("userPostDeleteSymbol"),this.registerEvent("userRenameSymbol"),this.registerEvent("userPreRenameSymbol"),this.registerEvent("userPostRenameSymbol")}var t,n,r;return t=e,(n=[{key:"setModule",value:function(e){this._module=e}},{key:"getModule",value:function(){return this._module}},{key:"initialize",value:function(e){this.graphController=e.getGraphController()}},{key:"destroy",value:function(){}},{key:"getLabelFormatter",value:function(){return this._module.getLabelFormatter()}},{key:"getMachineBuilder",value:function(){return this._module.getMachineBuilder()}},{key:"getMachineType",value:function(){return this.getMachineBuilder().getMachineType()}},{key:"setMachineType",value:function(e){this.getMachineBuilder().setMachineType(e)}},{key:"getMachineName",value:function(){return this.machineName||I18N.toString("file.untitled")}},{key:"setMachineName",value:function(e){!e||e.length<=0?this.machineName=null:this.machineName=e;var t=this.getMachineName(),n=document.getElementById("window-title"),r=n.innerHTML,o=r.indexOf("-");n.innerHTML=-1!==o?t+" - "+r.substring(o+1).trim():t+" - "+r}},{key:"renameMachine",value:function(e){var t=this.machineName;this.setMachineName(e),this.emit("userRenameMachine",this.getMachineBuilder(),e,t)}},{key:"changeMachineTo",value:function(e){var t=this.getMachineBuilder().getMachineType();t!=e&&(this.setMachineType(e),this.emit("userChangeMachine",this.getMachineBuilder(),e,t))}},{key:"getFirstGraphNodeByLabel",value:function(e,t){var n=!0,r=!1,o=void 0;try{for(var i,a=e.getNodes()[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var l=i.value;if(l.getNodeLabel()==t)return l}}catch(e){r=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}return null}},{key:"setGraphToMachine",value:function(e,t){var n;e.clear();var r,o,i,a,l=!0,u=!1,s=void 0;try{for(var c,f=t.getStates()[Symbol.iterator]();!(l=(c=f.next()).done);l=!0){var p=c.value;(n=e.createNode(0,0)).setNodeLabel(p),t.isFinalState(p)&&n.setNodeAccept(!0)}}catch(e){u=!0,s=e}finally{try{l||null==f.return||f.return()}finally{if(u)throw s}}var h=!0,y=!1,v=void 0;try{for(var g,d=t.getTransitions()[Symbol.iterator]();!(h=(g=d.next()).done);h=!0){var b=g.value;o=this.getFirstGraphNodeByLabel(e,b[0]),a=b[1],i=this.getFirstGraphNodeByLabel(e,b[2]),(r=e.createEdge(o,i)).setEdgeLabel(a),r!=e.formatEdge(r)&&e.deleteEdge(r)}}catch(e){y=!0,v=e}finally{try{h||null==d.return||d.return()}finally{if(y)throw v}}var m=t.getStartState();e.setStartNode(this.getFirstGraphNodeByLabel(e,m)),Nr.applyLayout(e)}},{key:"convertMachineTo",value:function(e){var t=this.getMachineType();if(t!==e)if("DFA"==e&&"NFA"==t){this.emit("userPreConvertMachine",this.getMachineBuilder(),e,t);var n=function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:null)||new Ze,n=(e.getAlphabet(),e.getStartState()),r=e.doClosureTransition(n),o=(zr(t,e,r),e.getPowerSet()),i=!0,a=!1,l=void 0;try{for(var u,s=o[Symbol.iterator]();!(i=(u=s.next()).done);i=!0){var c=u.value;console.log("Adding to DFA: "+Vr(c)),0!=c.length&&Hr(c,e,t)}}catch(e){a=!0,l=e}finally{try{i||null==s.return||s.return()}finally{if(a)throw l}}var f=t.newState("{}"),p=t.getAlphabet(),h=!0,y=!1,v=void 0;try{for(var g,d=t.getStates()[Symbol.iterator]();!(h=(g=d.next()).done);h=!0){var b=g.value,m=!0,w=!1,E=void 0;try{for(var S,_=p[Symbol.iterator]();!(m=(S=_.next()).done);m=!0){var O=S.value;t.doTransition(b,O)||t.newTransition(b,f,O)}}catch(e){w=!0,E=e}finally{try{m||null==_.return||_.return()}finally{if(w)throw E}}}}catch(e){y=!0,v=e}finally{try{h||null==d.return||d.return()}finally{if(y)throw v}}return t}(this.getMachineBuilder().getMachine(),new Ze);this.setGraphToMachine(this.graphController.getGraph(),n),this.setMachineType(e),this.emit("userConvertMachine",this.getMachineBuilder(),e,t),this.emit("userPostConvertMachine",this.getMachineBuilder(),e,t)}else{if("NFA"!=e||"DFA"!=t)throw new Error("Conversion scheme between '"+t+"' to '"+e+"' is not supported");this.changeMachineTo(e)}}},{key:"getAlphabet",value:function(){return this.getMachineBuilder().getAlphabet()}},{key:"createSymbol",value:function(e){this.getMachineBuilder().addCustomSymbol(e),this.emit("userCreateSymbol",this.getMachineBuilder(),e)}},{key:"deleteSymbol",value:function(e){var t=null,n=null,r=null,o=[];this.emit("userPreDeleteSymbol",this.getMachineBuilder(),e);for(var i=this.graphController.getGraph(),a=i.getEdges().length-1;a>=0;--a)(n=(t=i.getEdges()[a]).getEdgeLabel().indexOf(e))>=0&&((r=t.getEdgeLabel().substring(0,n)+t.getEdgeLabel().substring(n+1)).length>0?t.setEdgeLabel(r):(t.setEdgeLabel(""),i.deleteEdge(t)),o.push(t));o.length<=0&&this.getMachineBuilder().removeCustomSymbol(e),this.emit("userDeleteSymbol",this.getMachineBuilder(),e,o),this.emit("userPostDeleteSymbol",this.getMachineBuilder(),e,o)}},{key:"renameSymbol",value:function(e,t){var n=null,r=[];this.emit("userPreRenameSymbol",this.getMachineBuilder(),t,e);for(var o=this.graphController.getGraph(),i=o.getEdges().length,a=0;a<i;++a){var l=(n=o.getEdges()[a]).getEdgeLabel().replace(e,t);l!=n.getEdgeLabel()&&r.push(n),n.setEdgeLabel(l)}r.length<=0&&this.getMachineBuilder().renameCustomSymbol(e,t),this.emit("userRenameSymbol",this.getMachineBuilder(),t,e,r),this.emit("userPostRenameSymbol",this.getMachineBuilder(),t,e,r)}},{key:"getCustomSymbols",value:function(){return this.getMachineBuilder()._symbols}},{key:"isCustomSymbol",value:function(e){return this.getMachineBuilder().isCustomSymbol(e)}}])&&Qr(t.prototype,n),r&&Qr(t,r),e}();kr.mixin(Kr);var Yr=Kr;function Xr(e){return(Xr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Wr(e,t){return!t||"object"!==Xr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Jr(e){return(Jr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Zr(e,t){return(Zr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var $r=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Wr(this,Jr(t).call(this,e))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Zr(e,t)}(t,a.a.Component),n=t,(r=[{key:"render",value:function(){var e=this.props.node;return a.a.createElement("g",{className:"graph-node-container"},a.a.createElement("circle",{className:"graph-node",cx:e.x,cy:e.y,r:l.a.NODE_RADIUS,fill:"#FEE781",stroke:"#000000"}),e.getNodeAccept()&&a.a.createElement("circle",{className:"graph-node-inner",cx:e.x,cy:e.y,r:l.a.NODE_RADIUS_INNER,fill:"none",stroke:"#000000"}),"//Label",a.a.createElement("text",{className:"graph-node-label",x:e.x,y:e.y+4,pointerEvents:"none",style:{userSelect:"none",fontSize:1-Math.min(Math.max(e.getNodeLabel().length-2,0)/6,.5)+"em"},textAnchor:"middle"},e.getNodeLabel()))}}])&&qr(n.prototype,r),o&&qr(n,o),t}();function eo(e){return(eo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function to(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function no(e,t){return!t||"object"!==eo(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ro(e){return(ro=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function oo(e,t){return(oo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var io=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),no(this,ro(t).call(this,e))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&oo(e,t)}(t,a.a.Component),n=t,(r=[{key:"render",value:function(){var e=Math.PI/6,t=0,n=this.props.edge,r=n.getStartPoint(),o=n.getEndPoint(),i=n.getCenterPoint(),u=(n.getEdgeLabel(),n.getQuadratic(),n.getQuadraticAsCoords()),s=n.getEdgeDirection(),c=u.y>0,f=null;if(n.isQuadratic()){var p=i.x+u.x,h=i.y+u.y;t=Math.atan2(p-o.x,h-o.y)+Math.PI,f="Q "+p+" "+h+" "+o.x+" "+o.y}else t=Math.atan2(r.x-o.x,r.y-o.y)+Math.PI,f="L "+o.x+" "+o.y;var y=n.getEdgeSymbolsFromLabel(),v=i&&i.x||0,g=i&&i.y||0;return a.a.createElement("g",{className:"graph-edge-container"},"//Draw lines",a.a.createElement("path",{className:"graph-edge",id:"edge:"+n.getGraphElementID(),d:"M "+r.x+" "+r.y+" "+f+" M "+(o.x-l.a.ARROW_WIDTH*Math.sin(t-e))+" "+(o.y-l.a.ARROW_WIDTH*Math.cos(t-e))+" L "+o.x+" "+o.y+" L "+(o.x-l.a.ARROW_WIDTH*Math.sin(t+e))+" "+(o.y-l.a.ARROW_WIDTH*Math.cos(t+e)),fill:"none",stroke:"#000000"}),a.a.createElement("g",{transform:"translate("+v+","+g+") rotate("+180*s/Math.PI+")"},y.length>0&&y.map(function(e,t){var n=-15*(t+1);return a.a.createElement("text",{key:e+"."+t,className:"graph-edge-label",transform:"translate(0, "+n+")"+(c?" scale(-1, -1)":""),alignmentBaseline:"central",pointerEvents:"none",style:{userSelect:"none"},textAnchor:"middle"},e)})))}}])&&to(n.prototype,r),o&&to(n,o),t}();function ao(e){return(ao="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function uo(e,t){return!t||"object"!==ao(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function so(e){return(so=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function co(e,t){return(co=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var fo=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),uo(this,so(t).call(this,e))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&co(e,t)}(t,a.a.Component),n=t,(r=[{key:"render",value:function(){var e=this.props.node,t=e.x+(e instanceof Zn?0:-l.a.INITIAL_MARKER_OFFSET_X),n=e.y,r=l.a.NODE_RADIUS,o=2*r;return a.a.createElement("g",{className:"graph-initial-container"},a.a.createElement("path",{className:"graph-initial",d:"M"+(t-r)+" "+n+" L"+(t-o)+" "+(n-r)+" L"+(t-o)+" "+(n+r)+" Z",fill:"none",stroke:"#000000"}))}}])&&lo(n.prototype,r),o&&lo(n,o),t}();function po(e){return(po="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ho(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function yo(e,t){return!t||"object"!==po(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function vo(e){return(vo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function go(e,t){return(go=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var bo=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),yo(this,vo(t).call(this,e))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&go(e,t)}(t,a.a.Component),n=t,(r=[{key:"render",value:function(){var e=this.props.graph,t=this.props.inputController;return a.a.createElement("g",null,e.getNodes().map(function(e,t){return a.a.createElement($r,{key:e.getGraphElementID()||t,node:e})}),e.getEdges().map(function(e,t){return a.a.createElement(io,{key:e.getGraphElementID()||t,edge:e})}),e.getStartNode()&&(null==t.ghostInitialMarker?a.a.createElement(fo,{node:e.getStartNode()}):a.a.createElement(fo,{node:t.ghostInitialMarker})))}}])&&ho(n.prototype,r),o&&ho(n,o),t}();function mo(e){return(mo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Eo(e,t){return!t||"object"!==mo(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function So(e){return(So=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _o(e,t){return(_o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Oo=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Eo(this,So(t).call(this,e))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_o(e,t)}(t,a.a.Component),n=t,(r=[{key:"render",value:function(){var e=this.props.visible,t=this.props.fromX||0,n=this.props.fromY||0,r=this.props.toX||t+1,o=this.props.toY||n+1,i=r-t,l=o-n;return a.a.createElement("g",{className:"graph-selection-container"},e&&a.a.createElement("rect",{className:"graph-selection",x:i<0?r:t,y:l<0?o:n,width:i<0?-i:i,height:l<0?-l:l}))}}])&&wo(n.prototype,r),o&&wo(n,o),t}();function ko(e){return(ko="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Co(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function No(e,t){return!t||"object"!==ko(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function jo(e){return(jo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Po(e,t){return(Po=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var xo=[8,6],To=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),No(this,jo(t).call(this,e))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Po(e,t)}(t,a.a.Component),n=t,(r=[{key:"render",value:function(){var e=this.props.target,t=this.props.type,n=0,r=0,o=l.a.CURSOR_RADIUS;switch(t){case"node":n=e.x||0,r=e.y||0,o=l.a.NODE_RADIUS;break;case"edge":var i=e.getCenterPoint();n=i.x||0,r=i.y||0,o=l.a.EDGE_RADIUS;break;case"endpoint":var u=e.getEndPoint();n=u.x||0,r=u.y||0,o=l.a.ENDPOINT_RADIUS;break;case"initial":n=e.x+l.a.INITIAL_MARKER_OFFSET_X||0,r=e.y||0,o=l.a.EDGE_RADIUS}return a.a.createElement("g",{className:"graph-highlight-container"},a.a.createElement("circle",{className:"graph-highlight "+this.props.className,cx:n,cy:r,r:o+4,strokeDashoffset:this.props.offset||0,strokeDasharray:xo,strokeWidth:3,fill:"none"}))}}])&&Co(n.prototype,r),o&&Co(n,o),t}();function Mo(e){return(Mo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Do(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Io(e,t){return!t||"object"!==Mo(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Lo(e){return(Lo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ao(e,t){return(Ao=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ro=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Io(this,Lo(t).call(this,e))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ao(e,t)}(t,a.a.Component),n=t,(r=[{key:"render",value:function(){var e=this.props.app,t=e.getCurrentModule(),n=e.getGraphController(),r=e.getInputController(),o=e.getMachineController(),i=t.getTestingManager(),l=n.getGraph(),u=(r.getInputAdapter().getViewport(),o.getMachineBuilder(),r.getPicker()),s=u.getSelectionBox();return a.a.createElement("g",null,u.hasSelection()&&u.getSelection(l).map(function(e,t){return a.a.createElement(To,{key:e.getGraphElementID(),className:r.isTrashMode()?"highlight-error":"highlight-select",target:e,type:"node"})}),a.a.createElement(Oo,{visible:s.visible,fromX:s.fromX,fromY:s.fromY,toX:s.toX,toY:s.toY}),o.getMachineBuilder().machineErrorChecker.warningNodes.map(function(e,t){return a.a.createElement(To,{key:e.getGraphElementID(),className:"highlight-warning graph-gui",target:e,type:"node",offset:"6"})}),o.getMachineBuilder().machineErrorChecker.warningEdges.map(function(e,t){return a.a.createElement(To,{key:e.getGraphElementID(),className:"highlight-warning graph-gui",target:e,type:"edge",offset:"6"})}),o.getMachineBuilder().machineErrorChecker.errorNodes.map(function(e,t){return a.a.createElement(To,{key:e.getGraphElementID(),className:"highlight-error graph-gui",target:e,type:"node",offset:"6"})}),o.getMachineBuilder().machineErrorChecker.errorEdges.map(function(e,t){return a.a.createElement(To,{key:e.getGraphElementID(),className:"highlight-error graph-gui",target:e,type:"edge",offset:"6"})}),i.testMode.targets.map(function(e,t){return a.a.createElement(To,{key:e.getGraphElementID(),className:"highlight-test graph-gui",target:e,type:"node",offset:"6"})}),u.hasTarget()&&!u.isTargetInSelection()&&a.a.createElement(To,{className:r.isTrashMode()?"highlight-error":"highlight-select",target:u.target,type:u.targetType}))}}])&&Do(n.prototype,r),o&&Do(n,o),t}();n(100);function Go(e){return(Go="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Bo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Fo(e,t){return!t||"object"!==Go(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Uo(e){return(Uo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ho(e,t){return(Ho=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var zo=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Fo(this,Uo(t).call(this,e))).state={staticTrash:!1},n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ho(e,t)}(t,a.a.Component),n=t,(r=[{key:"onTrashEnter",value:function(e){this.state.staticTrash||(this.props.inputController.setTrashMode(!0),this.props.viewport.setState(function(e,t){return{mode:Ve.a.DANGEROUS}}))}},{key:"onTrashLeave",value:function(e){this.state.staticTrash||(this.props.inputController.setTrashMode(!1),this.props.viewport.setState(function(e,t){return{mode:Ve.a.NORMAL}}))}},{key:"onTrashClick",value:function(e){var t=this;e.stopPropagation(),e.preventDefault(),this.setState(function(e,n){var r=!e.staticTrash;return t.props.inputController.setTrashMode(r),t.props.viewport.setState(function(e,t){return{mode:r?Ve.a.DANGEROUS:Ve.a.NORMAL}}),{staticTrash:r}})}},{key:"render",value:function(){var e=this.props.inputController,t=e.getInputAdapter();return a.a.createElement("svg",{id:"trash-btn",className:(e.isTrashMode()?"danger ":"")+(t.isUsingTouch()&&t.isDragging()?"hidden":""),width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",onMouseEnter:this.onTrashEnter.bind(this),onMouseLeave:this.onTrashLeave.bind(this),onClick:this.onTrashClick.bind(this)},a.a.createElement("path",{d:"M3 6v18h18v-18h-18zm5 14c0 .552-.448 1-1 1s-1-.448-1-1v-10c0-.552.448-1 1-1s1 .448 1 1v10zm5 0c0 .552-.448 1-1 1s-1-.448-1-1v-10c0-.552.448-1 1-1s1 .448 1 1v10zm5 0c0 .552-.448 1-1 1s-1-.448-1-1v-10c0-.552.448-1 1-1s1 .448 1 1v10zm4-18v2h-20v-2h5.711c.9 0 1.631-1.099 1.631-2h5.315c0 .901.73 2 1.631 2h5.712z"}))}}])&&Bo(n.prototype,r),o&&Bo(n,o),t}();n(101);function Vo(e){return(Vo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Qo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ko(e,t){return!t||"object"!==Vo(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Yo(e){return(Yo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Xo(e,t){return(Xo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var qo=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Ko(this,Yo(t).call(this,e))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Xo(e,t)}(t,a.a.Component),n=t,(r=[{key:"render",value:function(){return a.a.createElement("svg",{className:"play-icon",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},a.a.createElement("path",{d:"M8 5v14l11-7z"}),a.a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}))}}])&&Qo(n.prototype,r),o&&Qo(n,o),t}();function Wo(e){return(Wo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Jo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Zo(e,t){return!t||"object"!==Wo(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function $o(e){return($o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ei(e,t){return(ei=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ti=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Zo(this,$o(t).call(this,e))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ei(e,t)}(t,a.a.Component),n=t,(r=[{key:"render",value:function(){return a.a.createElement("svg",{className:"pause-icon",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},a.a.createElement("path",{d:"M6 19h4V5H6v14zm8-14v14h4V5h-4z"}),a.a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}))}}])&&Jo(n.prototype,r),o&&Jo(n,o),t}();function ni(e){return(ni="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ri(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function oi(e,t){return!t||"object"!==ni(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ii(e){return(ii=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ai(e,t){return(ai=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var li=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),oi(this,ii(t).call(this,e))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ai(e,t)}(t,a.a.Component),n=t,(r=[{key:"render",value:function(){return a.a.createElement("svg",{className:"stop-icon",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},a.a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),a.a.createElement("path",{d:"M6 6h12v12H6z"}))}}])&&ri(n.prototype,r),o&&ri(n,o),t}(),ui=n(21),si=n(22);function ci(e){return(ci="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function pi(e,t){return!t||"object"!==ci(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function hi(e){return(hi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function yi(e,t){return(yi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var vi=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),pi(this,hi(t).call(this,e))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&yi(e,t)}(t,a.a.Component),n=t,(r=[{key:"render",value:function(){this.props.graphController;var e=this.props.tester,t=this.props.tester.inputList,n=this.props.tester.testMode,r=t.getCurrentInput(),o=n.getCurrentTestStringIndex();return a.a.createElement("div",{className:"test-tray-container"},a.a.createElement("div",{className:"test-tray-input-string-container"},r&&o>=0&&r.value.split("").map(function(e,t){var n=o-t;if(!(n>5))return n>2?a.a.createElement("span",{key:e+"."+t,className:"test-tray-input-placeholder"},"."):a.a.createElement("span",{key:e+"."+t,className:"test-tray-input-char"+(o==t?" active":"")},e)})),a.a.createElement("div",{className:"test-tray-control"},a.a.createElement(S.a,{onClick:function(e){n.onResume()},disabled:n.isRunning()},a.a.createElement(qo,null)),a.a.createElement(S.a,{onClick:function(e){n.onPause()},disabled:!n.isRunning()},a.a.createElement(ti,null)),a.a.createElement(S.a,{onClick:function(e){n.onPreviousStep()},disabled:!n.hasPrevStep()||n.isSkipping()},a.a.createElement(ui.a,null)),a.a.createElement(S.a,{onClick:function(e){n.onNextStep()},disabled:!e.testMode.hasNextStep()||n.isSkipping()},a.a.createElement(si.a,null)),a.a.createElement(S.a,{onClick:function(t){e.setStepByStepMode(!1)}},a.a.createElement(li,null)),a.a.createElement("div",{className:"trash-placeholder"})))}}])&&fi(n.prototype,r),o&&fi(n,o),t}();n(102);function gi(e){return(gi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function di(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function bi(e,t){return!t||"object"!==gi(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function mi(e){return(mi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function wi(e,t){return(wi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ei=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),bi(this,mi(t).call(this,e))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&wi(e,t)}(t,a.a.Component),n=t,(r=[{key:"render",value:function(){return a.a.createElement("svg",{className:"create-icon",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},a.a.createElement("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"}),a.a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}))}}])&&di(n.prototype,r),o&&di(n,o),t}();function Si(e){return(Si="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Oi(e,t){return!t||"object"!==Si(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ki(e){return(ki=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ci(e,t){return(Ci=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ni=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Oi(this,ki(t).call(this,e))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ci(e,t)}(t,a.a.Component),n=t,(r=[{key:"render",value:function(){return a.a.createElement("svg",{className:"move-icon",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},a.a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),a.a.createElement("path",{d:"M13,6V11H18V7.75L22.25,12L18,16.25V13H13V18H16.25L12,22.25L7.75,18H11V13H6V16.25L1.75,12L6,7.75V11H11V6H7.75L12,1.75L16.25,6H13Z"}))}}])&&_i(n.prototype,r),o&&_i(n,o),t}();function ji(e){return(ji="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function xi(e,t){return!t||"object"!==ji(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ti(e){return(Ti=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Mi(e,t){return(Mi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Di=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),xi(this,Ti(t).call(this,e))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Mi(e,t)}(t,a.a.Component),n=t,(r=[{key:"render",value:function(){var e=this.props.inputController,t=this.props.graphController,n=e.isActionMode(t);return a.a.createElement("div",{id:"cursor-btn"},a.a.createElement(S.a,{id:"action-mode",className:n?"active":"",onClick:function(){return e.setInputScheme(!0)},title:I18N.toString("cursor.actionmode")},a.a.createElement(Ei,null)),a.a.createElement(S.a,{id:"move-mode",className:n?"":"active",onClick:function(){return e.setInputScheme(!1)},title:I18N.toString("cursor.movemode")},a.a.createElement(Ni,null)))}}])&&Pi(n.prototype,r),o&&Pi(n,o),t}();function Ii(e){return(Ii="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Li(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ai(e,t){return!t||"object"!==Ii(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ri(e){return(Ri=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Gi(e,t){return(Gi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Bi=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Ai(this,Ri(t).call(this,e))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Gi(e,t)}(t,a.a.Component),n=t,(r=[{key:"render",value:function(){var e=this.props.viewport,t=this.props.app,n=t.getInputController(),r=t.getGraphController(),o=(t.getMachineController(),t.getCurrentModule().getTestingManager());return a.a.createElement("span",null,o.getStepByStepMode()?a.a.createElement("div",{className:"anchor-bottom-left",style:{width:"100%"}},a.a.createElement(vi,{tester:o,graphController:r})):a.a.createElement("span",null,a.a.createElement("div",{className:"anchor-bottom-left",style:{width:"100%"}},a.a.createElement(Di,{inputController:n,graphController:r})),a.a.createElement("div",{className:"anchor-bottom-right"},a.a.createElement(zo,{inputController:n,viewport:e}))))}}])&&Li(n.prototype,r),o&&Li(n,o),t}();function Fi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Ui=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.graph=t,this.prefix=l.a.STR_STATE_LABEL,this.shouldAutoLabel=!1}var t,n,r;return t=e,(n=[{key:"sortDefaultNodeLabels",value:function(){var e=this.graph.getStartNode();if(e){var t=!e.getNodeCustom(),n=[],r=[],o=!0,i=!1,a=void 0;try{for(var l,u=this.graph.getNodes()[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var s=l.value;s.getNodeCustom()?r.push(s.getNodeLabel()):n.push(s)}}catch(e){i=!0,a=e}finally{try{o||null==u.return||u.return()}finally{if(i)throw a}}for(var c=t?0:1,f=0;f<n.length;f++){for(var p=n[f],h=null;r.includes(h=this.getDefaultNodeLabelByIndex(c++)););p.setNodeLabel(h)}}}},{key:"getNextDefaultNodeLabel",value:function(){for(var e=0,t=this.getDefaultNodeLabelByIndex(e);!this.isUniqueNodeLabel(t);)++e,t=this.getDefaultNodeLabelByIndex(e);return t}},{key:"getDefaultNodeLabelByIndex",value:function(e){return this.prefix+e}},{key:"isUniqueNodeLabel",value:function(e){var t=!0,n=!1,r=void 0;try{for(var o,i=this.graph.getNodes()[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){if(o.value.getNodeLabel()==e)return!1}}catch(e){n=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}return!0}}])&&Fi(t.prototype,n),r&&Fi(t,r),e}();function Hi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var zi=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.graph=t,this.graphController=null,this.labeler=new Ui(t),this.onGraphNodeLabelChange=this.onGraphNodeLabelChange.bind(this)}var t,n,r;return t=e,(n=[{key:"initialize",value:function(e){this.graphController=e.getGraphController(),this.setAutoRenameNodes(!0)}},{key:"destroy",value:function(){}},{key:"onGraphNodeLabelChange",value:function(e,t,n,r,o){this.labeler.sortDefaultNodeLabels()}},{key:"setAutoRenameNodes",value:function(e){var t=this.labeler.shouldAutoLabel;this.labeler.shouldAutoLabel=e,t!=e&&e?this.graphController.on("userDeleteNodes",this.onGraphNodeLabelChange):this.graphController.removeEventListener("userDeleteNodes",this.onGraphNodeLabelChange)}},{key:"shouldAutoRenameNodes",value:function(){return this.labeler.shouldAutoLabel}},{key:"getLabeler",value:function(){return this.labeler}}])&&Hi(t.prototype,n),r&&Hi(t,r),e}();function Vi(e){return(Vi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Qi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ki(e){return(Ki=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Yi(e,t){return(Yi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Xi(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var qi=function(e){function t(e){var n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=Ki(t).call(this,e))||"object"!==Vi(o)&&"function"!=typeof o?Xi(r):o).targetIndex=0,n.targetLabel="";var i=e.message.value,a=!0,l=!1,u=void 0;try{for(var s,c=i[Symbol.iterator]();!(a=(s=c.next()).done);a=!0){var f=s.value;n.targetLabel.length>0&&(n.targetLabel+=", "),n.targetLabel+=f.getNodeLabel()}}catch(e){l=!0,u=e}finally{try{a||null==c.return||c.return()}finally{if(l)throw u}}return n.onClick=n.onClick.bind(Xi(Xi(n))),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Yi(e,t)}(t,a.a.Component),n=t,(r=[{key:"onClick",value:function(e){var t=this.props.graphController,n=this.props.machineController,r=e.target.value,o=this.props.message;switch(r){case"locate":var i=o.value[this.targetIndex++];this.targetIndex>=o.value.length&&(this.targetIndex=0),t.focusOnNode(i);break;case"deleteall":var a=o.value;t.deleteTargetNodes(a),n.getMachineBuilder().labeler.sortDefaultNodeLabels(),o.close();break;default:throw new Error("Unknown button value for message")}}},{key:"render",value:function(){return a.a.createElement("div",null,a.a.createElement("p",null,I18N.toString("message.warning.unreachable")+": "+this.targetLabel),a.a.createElement("button",{value:"locate",onClick:this.onClick},I18N.toString("message.action.locate")),a.a.createElement("button",{value:"deleteall",onClick:this.onClick},I18N.toString("message.action.deleteall")))}}])&&Qi(n.prototype,r),o&&Qi(n,o),t}();function Wi(e){return(Wi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ji(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Zi(e){return(Zi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $i(e,t){return($i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ea(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var ta=function(e){function t(e){var n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=Zi(t).call(this,e))||"object"!==Wi(o)&&"function"!=typeof o?ea(r):o).targetIndex=0,n.targetLabel="";var i=e.message.value.targets,a=!0,l=!1,u=void 0;try{for(var s,c=i[Symbol.iterator]();!(a=(s=c.next()).done);a=!0){var f=s.value;n.targetLabel.length>0&&(n.targetLabel+=", "),n.targetLabel+=f.getNodeLabel()}}catch(e){l=!0,u=e}finally{try{a||null==c.return||c.return()}finally{if(l)throw u}}return n.onClick=n.onClick.bind(ea(ea(n))),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$i(e,t)}(t,a.a.Component),n=t,(r=[{key:"onClick",value:function(e){var t=this.props.graphController,n=(this.props.machineController,e.target.value),r=this.props.message;switch(n){case"locate":var o=r.value.targets,i=o.length;if(i>0&&this.targetIndex<i){var a=o[this.targetIndex++];this.targetIndex>=i&&(this.targetIndex=0),t.focusOnNode(a)}break;default:throw new Error("Unknown button value for message")}}},{key:"render",value:function(){return a.a.createElement("div",null,a.a.createElement("p",null,I18N.toString("message.error.missing")+": "+this.targetLabel),a.a.createElement("button",{value:"locate",onClick:this.onClick},I18N.toString("message.action.locate")))}}])&&Ji(n.prototype,r),o&&Ji(n,o),t}();function na(e){return(na="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ra(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function oa(e){return(oa=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ia(e,t){return(ia=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function aa(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var la=function(e){function t(e){var n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=oa(t).call(this,e))||"object"!==na(o)&&"function"!=typeof o?aa(r):o).targetIndex=0,n.targetLabel="";var i=e.message.value.targets,a=!0,l=!1,u=void 0;try{for(var s,c=i[Symbol.iterator]();!(a=(s=c.next()).done);a=!0){var f=s.value;n.targetLabel.length>0&&(n.targetLabel+=", "),n.targetLabel+="("+f.getSourceNode().getNodeLabel()+", "+(f.getDestinationNode()?f.getDestinationNode().getNodeLabel():"null")+") "+le+" "+f.getEdgeLabel()}}catch(e){l=!0,u=e}finally{try{a||null==c.return||c.return()}finally{if(l)throw u}}return n.onClick=n.onClick.bind(aa(aa(n))),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ia(e,t)}(t,a.a.Component),n=t,(r=[{key:"onClick",value:function(e){var t=this.props.graphController,n=(this.props.machineController,e.target.value),r=this.props.message;switch(n){case"locate":var o=r.value.targets,i=o.length;if(i>0&&this.targetIndex<i){var a=o[this.targetIndex++];this.targetIndex>=i&&(this.targetIndex=0),t.focusOnEdge(a)}break;case"deleteall":var l=r.value.targets;t.deleteTargetEdges(l),r.close();break;default:throw new Error("Unknown button value for message")}}},{key:"render",value:function(){return a.a.createElement("div",null,a.a.createElement("p",null,this.props.message.value.text+": "+this.targetLabel),a.a.createElement("button",{value:"locate",onClick:this.onClick},I18N.toString("message.action.locate")),a.a.createElement("button",{value:"deleteall",onClick:this.onClick},I18N.toString("message.action.deleteall")))}}])&&ra(n.prototype,r),o&&ra(n,o),t}();function ua(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var sa=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.machineBuilder=t,this.graph=n,this.errorNodes=[],this.errorEdges=[],this.warningNodes=[],this.warningEdges=[]}var t,n,r;return t=e,(n=[{key:"clear",value:function(){this.errorNodes.length=0,this.errorEdges.length=0,this.warningNodes.length=0,this.warningEdges.length=0}},{key:"checkErrors",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if("DFA"!=this.machineBuilder.getMachineType())throw new Error("Invalid machine type to check for DFA errors");var r=this.machineBuilder.getMachine(),i=this.graph,a=r.getAlphabet(),u=this.errorNodes,s=this.errorEdges,c=this.warningNodes,f=this.warningEdges;this.clear();var p=new Map,h=(i.getStartNode(),[]),y=[],v=[],g=!0,d=!1,b=void 0;try{for(var m,w=i.getEdges()[Symbol.iterator]();!(g=(m=w.next()).done);g=!0){var E=m.value;if(E.isPlaceholder())h.push(E),-1==s.indexOf(E)&&s.push(E);else{var S=E.getSourceNode(),_=(E.getDestinationNode(),E.getEdgeSymbolsFromLabel()),O=!0,k=!1,C=void 0;try{for(var N,j=_[Symbol.iterator]();!(O=(N=j.next()).done);O=!0){var P=N.value;if("ε"==P)y.push(E),-1==s.indexOf(E)&&s.push(E);else if(p.has(S)){var x=p.get(S);x.includes(P)?(v.push(E),-1==s.indexOf(E)&&s.push(E)):x.push(P)}else p.set(S,[P])}}catch(e){k=!0,C=e}finally{try{O||null==j.return||j.return()}finally{if(k)throw C}}}}}catch(e){d=!0,b=e}finally{try{g||null==w.return||w.return()}finally{if(d)throw b}}var T=[],M=!0,D=!1,I=void 0;try{for(var L,A=i.getNodes()[Symbol.iterator]();!(M=(L=A.next()).done);M=!0){var R=L.value,G=p.get(R);(!G&&0!=a.length||G&&G.length<a.length)&&(T.push(R),-1==u.indexOf(R)&&u.push(R))}}catch(e){D=!0,I=e}finally{try{M||null==A.return||A.return()}finally{if(D)throw I}}var B=!(0==u.length&&0==s.length&&0==c.length&&0==f.length);if(e){var F=l.a.MACHINE_ERRORS_MESSAGE_TAG;if(o.a.clearMessages(F),B){var U={graphController:t,machineController:n},H=this.getUnreachableNodes();H.length>0&&o.a.addMessage(H,"warning",F,qi,U,!1),h.length>0&&o.a.addMessage({text:I18N.toString("message.error.incomplete"),targets:h},"error",F,la,U,!1),y.length>0&&o.a.addMessage({text:I18N.toString("message.error.empty"),targets:y},"error",F,la,U,!1),v.length>0&&o.a.addMessage({text:I18N.toString("message.error.dupe"),targets:v},"error",F,la,U,!1),T.length>0&&o.a.addMessage({targets:T},"error",F,ta,U,!1)}else o.a.addMessage(I18N.toString("message.error.none"),"success",F,null,null,!1)}return B}},{key:"getUnreachableNodes",value:function(){var e=this.graph,t=this.machineBuilder.getMachine(),n=e.getNodes().slice(),r=[];for(r.push(n[0]),n.splice(0,1);r.length>0;){var o=r.pop(),i=n.indexOf(o);if(i>=0){n.splice(i,1);var a=t.getOutgoingTransitions(o),l=!0,u=!1,s=void 0;try{for(var c,f=a[Symbol.iterator]();!(l=(c=f.next()).done);l=!0){var p=c.value;r.push(p)}}catch(e){u=!0,s=e}finally{try{l||null==f.return||f.return()}finally{if(u)throw s}}}}return n}}])&&ua(t.prototype,n),r&&ua(t,r),e}();function ca(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var fa=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.machineBuilder=t,this.graph=n,this.errorNodes=[],this.errorEdges=[],this.warningNodes=[],this.warningEdges=[]}var t,n,r;return t=e,(n=[{key:"clear",value:function(){this.errorNodes.length=0,this.errorEdges.length=0,this.warningNodes.length=0,this.warningEdges.length=0}},{key:"checkErrors",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=this.machineBuilder.getMachine(),r=this.graph,i=(n.getAlphabet(),this.errorNodes),a=this.errorEdges,u=this.warningNodes,s=this.warningEdges;this.clear();new Map;var c=r.getNodes().slice(),f=r.getStartNode();c.splice(c.indexOf(f),1);var p=[],h=!0,y=!1,v=void 0;try{for(var g,d=r.getEdges()[Symbol.iterator]();!(h=(g=d.next()).done);h=!0){var b=g.value;if(b.isPlaceholder())p.push(b),-1==a.indexOf(b)&&a.push(b);else{b.getSourceNode();var m=b.getDestinationNode(),w=b.getEdgeSymbolsFromLabel(),E=!0,S=!1,_=void 0;try{for(var O,k=w[Symbol.iterator]();!(E=(O=k.next()).done);E=!0){O.value;c.includes(m)&&c.splice(c.indexOf(m),1)}}catch(e){S=!0,_=e}finally{try{E||null==k.return||k.return()}finally{if(S)throw _}}}}}catch(e){y=!0,v=e}finally{try{h||null==d.return||d.return()}finally{if(y)throw v}}var C=!0,N=!1,j=void 0;try{for(var P,x=c[Symbol.iterator]();!(C=(P=x.next()).done);C=!0){var T=P.value;-1==u.indexOf(T)&&u.push(T)}}catch(e){N=!0,j=e}finally{try{C||null==x.return||x.return()}finally{if(N)throw j}}var M=!(0==i.length&&0==a.length&&0==u.length&&0==s.length),D=l.a.MACHINE_ERRORS_MESSAGE_TAG;if(o.a.clearMessages(D),M){var I={graphController:e,machineController:t};c.length>0&&o.a.addMessage(c,"warning",D,qi,I,!1),p.length>0&&o.a.addMessage({text:I18N.toString("message.error.incomplete"),targets:p},"error",D,la,I,!1)}else o.a.addMessage(I18N.toString("message.error.none"),"success",D,null,null,!1);return M}},{key:"getUnreachableNodes",value:function(){var e=this.graph,t=e.getNodes().slice(),n=!0,r=!1,o=void 0;try{for(var i,a=e.getEdges()[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var l=i.value,u=l.label.split(","),s=!0,c=!1,f=void 0;try{for(var p,h=u[Symbol.iterator]();!(s=(p=h.next()).done);s=!0){p.value,l.from;var y=l.to;t.includes(y)&&t.splice(t.indexOf(y),1)}}catch(e){c=!0,f=e}finally{try{s||null==h.return||h.return()}finally{if(c)throw f}}}}catch(e){r=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}return t}}])&&ca(t.prototype,n),r&&ca(t,r),e}();function pa(e){return(pa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ha(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ya(e,t,n){return(ya="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=va(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function va(e){return(va=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ga(e,t){return(ga=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function da(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ba(e,t){if(e.getNodes().length<=0)return t;var n=!0,r=!1,o=void 0;try{for(var i,a=e.getNodes()[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var l=i.value;try{var u=l.getNodeLabel();t.newState(u),l.getNodeAccept()&&t.setFinalState(u,!0)}catch(e){throw e}}}catch(e){r=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}var s=!0,c=!1,f=void 0;try{for(var p,h=e.getEdges()[Symbol.iterator]();!(s=(p=h.next()).done);s=!0){var y=p.value;if(!y.isPlaceholder()){var v=y.getSourceNode(),g=y.getDestinationNode();if(v instanceof Zn&&g instanceof Zn){var d=y.getEdgeSymbolsFromLabel(),b=!0,m=!1,w=void 0;try{for(var E,S=d[Symbol.iterator]();!(b=(E=S.next()).done);b=!0){var _=E.value;try{t.newTransition(v.getNodeLabel(),g.getNodeLabel(),_)}catch(e){throw e}}}catch(e){m=!0,w=e}finally{try{b||null==S.return||S.return()}finally{if(m)throw w}}}}}}catch(e){c=!0,f=e}finally{try{s||null==h.return||h.return()}finally{if(c)throw f}}var O=e.getStartNode().getNodeLabel();return t.setStartState(O),t}var ma=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=va(t).call(this,e))||"object"!==pa(o)&&"function"!=typeof o?da(r):o)._machine=new he,n._machineType="DFA",n._machineValidDFA=!1,n._alphabet=[],n._symbols=[],n._savedGraphHash=0,n._timer=null,n._errorTimer=null,n.machineErrorChecker=new sa(da(da(n)),e),n.tester=null,n.graphController=null,n.machineController=null,n.onGraphChange=n.onGraphChange.bind(da(da(n))),n.onDelayedGraphChange=n.onDelayedGraphChange.bind(da(da(n))),n.onDelayedErrorCheck=n.onDelayedErrorCheck.bind(da(da(n))),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ga(e,t)}(t,zi),n=t,(r=[{key:"initialize",value:function(e){ya(va(t.prototype),"initialize",this).call(this,e),this.tester=e.getCurrentModule().getTestingManager(),this.graphController=e.getGraphController(),this.machineController=e.getMachineController(),this._savedGraphHash=this.graph.getHashCode(!1),this.onGraphChange()}},{key:"destroy",value:function(){this._savedGraphHash=this.graph.getHashCode(!1),this.onGraphChange(),ya(va(t.prototype),"destroy",this).call(this)}},{key:"update",value:function(){var e=this.graph.getHashCode(!1);e!==this._savedGraphHash&&(this._savedGraphHash=e,this.onGraphChange(this.graph))}},{key:"onGraphChange",value:function(e){this.tester&&(this._timer&&(clearTimeout(this._timer),this._timer=null),this._errorTimer&&(clearTimeout(this._errorTimer),this._errorTimer=null),this._timer=setTimeout(this.onDelayedGraphChange,l.a.GRAPH_IMMEDIATE_INTERVAL),this._errorTimer=setTimeout(this.onDelayedErrorCheck,this.tester.isImmediateErrorCheck?2*l.a.GRAPH_IMMEDIATE_INTERVAL:l.a.ERROR_CHECK_INTERVAL))}},{key:"onDelayedGraphChange",value:function(){this._machine.clear();this.toNFA(this._machine);var e=!0,t=!1,n=void 0;try{for(var r,o=this._symbols[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){var i=r.value;this._machine.newSymbol(i)}}catch(e){t=!0,n=e}finally{try{e||null==o.return||o.return()}finally{if(t)throw n}}this._machineValidDFA=this._machine.isValidDFA()}},{key:"onDelayedErrorCheck",value:function(){this.tester.shouldCheckError&&this.machineErrorChecker.checkErrors(!0,this.graphController,this.machineController)}},{key:"formatAlphabetString",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.split(" "),r=new Set,o="",i=0,a=n.length,l=0;l<a;++l)if(1!==(i=(o=n[l].trim()).length)){if(i>1){var u=!0,s=!1,c=void 0;try{for(var f,p=o.split("")[Symbol.iterator]();!(u=(f=p.next()).done);u=!0){var h=f.value;h=h.trim(),r.has(h)||r.add(h)}}catch(e){s=!0,c=e}finally{try{u||null==p.return||p.return()}finally{if(s)throw c}}}}else r.add(o);return 0===r.size?t?null:"ε":Array.from(r).join(" ")}},{key:"setMachineType",value:function(e){if(this._machineType!=e){if(this._machineType=e,"DFA"==e)this.machineErrorChecker=new sa(this,this.graph);else{if("NFA"!=e)throw new Error("Cannot find error checker for machine type '"+e+"'");this.machineErrorChecker=new fa(this,this.graph)}this.onGraphChange()}}},{key:"getMachineType",value:function(){return this._machineType}},{key:"addCustomSymbol",value:function(e){this._symbols.push(e),this.onGraphChange()}},{key:"removeCustomSymbol",value:function(e){this._symbols.splice(this._symbols.indexOf(e),1),this.onGraphChange()}},{key:"renameCustomSymbol",value:function(e,t){var n=this._symbols.indexOf(e);if(n<=0)throw new Error("Trying to rename unknown symbol '"+e+"'");this._symbols[n]=t,this.onGraphChange()}},{key:"isCustomSymbol",value:function(e){return this._symbols.includes(e)}},{key:"getAlphabet",value:function(){var e=this.getMachine();return this._alphabet.length=0,e.getAlphabet(this._alphabet),this._alphabet}},{key:"isValidMachine",value:function(){return"DFA"!=this._machineType||this._machineValidDFA}},{key:"toDFA",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null)||new Ze;if(!(e instanceof Ze))throw new Error("Trying to parse graph mismatched machine type.");return ba(this.graph,e),e}},{key:"toNFA",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null)||new he;if(!(e instanceof he))throw new Error("Trying to parse graph mismatched machine type.");return ba(this.graph,e),e}},{key:"getMachine",value:function(){return this._machine}}])&&ha(n.prototype,r),o&&ha(n,o),t}();function wa(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Ea=function(){function e(t,n,r,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.eventLogger=t,this.controller=n,this.eventName=r,this.postEventName=o||null,this.onEvent=this.onEvent.bind(this),this.controller.on(this.eventName,this.onEvent)}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.controller.removeEventListener(this.eventName,this.onEvent)}},{key:"onEvent",value:function(){var e=this,t={};t.applyUndo=this.applyUndo.bind(this,t),t.applyRedo=this.applyRedo.bind(this,t),t.eventData=this.captureEvent.apply(this,arguments),this.postEventName?this.controller.once(this.postEventName,function(){t.postData=e.capturePostEvent.apply(e,arguments),e.eventLogger.captureEvent(t)}):(t.postData=t.eventData,this.eventLogger.captureEvent(t))}},{key:"captureEvent",value:function(){return{}}},{key:"capturePostEvent",value:function(){return{}}},{key:"applyUndo",value:function(e){}},{key:"applyRedo",value:function(e){}}])&&wa(t.prototype,n),r&&wa(t,r),e}();function Sa(e){return(Sa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Oa(e,t){return!t||"object"!==Sa(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ka(e){return(ka=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ca(e,t){return(Ca=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Na=function(e){function t(e,n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Oa(this,ka(t).call(this,e,n,"nodeInitial"))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ca(e,t)}(t,Ea),n=t,(r=[{key:"captureEvent",value:function(e,t,n){return{graph:e,nodeID:t.getGraphElementID(),prevID:n.getGraphElementID()}}},{key:"applyUndo",value:function(e){var t=this.controller.getGraph(),n=t.getNodeByElementID(e.eventData.prevID);if(!n)throw new Error("Unable to find target in graph");t.setStartNode(n)}},{key:"applyRedo",value:function(e){var t=this.controller.getGraph(),n=t.getNodeByElementID(e.eventData.nodeID);if(!n)throw new Error("Unable to find target in graph");t.setStartNode(n)}}])&&_a(n.prototype,r),o&&_a(n,o),t}();function ja(e){return(ja="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pa(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function xa(e,t){return!t||"object"!==ja(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ta(e){return(Ta=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ma(e,t){return(Ma=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Da=function(e){function t(e,n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),xa(this,Ta(t).call(this,e,n,"nodeMove"))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ma(e,t)}(t,Ea),n=t,(r=[{key:"captureEvent",value:function(e,t,n,r,o,i){return{graph:e,nodeID:t.getGraphElementID(),nextX:n,nextY:r,prevX:o,prevY:i}}},{key:"applyUndo",value:function(e){var t=this.controller.getGraph().getNodeByElementID(e.eventData.nodeID);if(!t)throw new Error("Unable to find target in graph");t.x=e.eventData.prevX,t.y=e.eventData.prevY}},{key:"applyRedo",value:function(e){var t=this.controller.getGraph().getNodeByElementID(e.eventData.nodeID);if(!t)throw new Error("Unable to find target in graph");t.x=e.eventData.nextX,t.y=e.eventData.nextY}}])&&Pa(n.prototype,r),o&&Pa(n,o),t}();function Ia(e){return(Ia="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function La(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Aa(e,t){return!t||"object"!==Ia(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ra(e){return(Ra=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ga(e,t){return(Ga=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ba=function(e){function t(e,n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Aa(this,Ra(t).call(this,e,n,"nodeMoveAll"))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ga(e,t)}(t,Ea),n=t,(r=[{key:"captureEvent",value:function(e,t,n,r){return{graph:e,nodeIDs:t.map(function(e){return e.getGraphElementID()}),dx:n,dy:r}}},{key:"applyUndo",value:function(e){var t=this.controller.getGraph(),n=null,r=!0,o=!1,i=void 0;try{for(var a,l=e.eventData.nodeIDs[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var u=a.value;if(!(n=t.getNodeByElementID(u)))throw new Error("Unable to find target in graph");n.x-=e.eventData.dx,n.y-=e.eventData.dy}}catch(e){o=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw i}}}},{key:"applyRedo",value:function(e){var t=this.controller.getGraph(),n=null,r=!0,o=!1,i=void 0;try{for(var a,l=e.eventData.nodeIDs[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var u=a.value;if(!(n=t.getNodeByElementID(u)))throw new Error("Unable to find target in graph");n.x+=e.eventData.dx,n.y+=e.eventData.dy}}catch(e){o=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw i}}}}])&&La(n.prototype,r),o&&La(n,o),t}();function Fa(e){return(Fa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ua(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ha(e,t){return!t||"object"!==Fa(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function za(e){return(za=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Va(e,t){return(Va=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Qa=function(e){function t(e,n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Ha(this,za(t).call(this,e,n,"edgeMove"))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Va(e,t)}(t,Ea),n=t,(r=[{key:"captureEvent",value:function(e,t,n,r){return{graph:e,edgeID:t.getGraphElementID(),nextQuad:Object.assign({},n),prevQuad:Object.assign({},r)}}},{key:"applyUndo",value:function(e){var t=this.controller.getGraph().getEdgeByElementID(e.eventData.edgeID);if(!t)throw new Error("Unable to find target in graph");t.setQuadratic(e.eventData.prevQuad.radians,e.eventData.prevQuad.length)}},{key:"applyRedo",value:function(e){var t=this.controller.getGraph().getEdgeByElementID(e.eventData.edgeID);if(!t)throw new Error("Unable to find target in graph");t.setQuadratic(e.eventData.nextQuad.radians,e.eventData.nextQuad.length)}}])&&Ua(n.prototype,r),o&&Ua(n,o),t}();function Ka(e){return(Ka="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ya(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Xa(e,t){return!t||"object"!==Ka(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function qa(e){return(qa=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Wa(e,t){return(Wa=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ja=function(e){function t(e,n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Xa(this,qa(t).call(this,e,n,"edgeDestination"))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Wa(e,t)}(t,Ea),n=t,(r=[{key:"captureEvent",value:function(e,t,n,r,o){return{graph:e,edgeID:t.getGraphElementID(),nextDestination:n,prevDestination:r,nextQuad:Object.assign({},t.getQuadratic()),prevQuad:Object.assign({},o)}}},{key:"applyUndo",value:function(e){var t=this.controller.getGraph().getEdgeByElementID(e.eventData.edgeID);if(!t)throw new Error("Unable to find target in graph");var n=e.eventData.prevQuad.radians,r=e.eventData.prevQuad.length;t.changeDestinationNode(e.eventData.prevDestination),t.isSelfLoop()&&(n=-n),t.setQuadratic(n,r)}},{key:"applyRedo",value:function(e){var t=this.controller.getGraph().getEdgeByElementID(e.eventData.edgeID);if(!t)throw new Error("Unable to find target in graph");var n=e.eventData.nextQuad.radians,r=e.eventData.nextQuad.length;t.changeDestinationNode(e.eventData.nextDestination),t.setQuadratic(n,r)}}])&&Ya(n.prototype,r),o&&Ya(n,o),t}();function Za(e){return(Za="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function el(e,t){return!t||"object"!==Za(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function tl(e){return(tl=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function nl(e,t){return(nl=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var rl=function(e){function t(e,n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),el(this,tl(t).call(this,e,n,"edgeLabel"))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&nl(e,t)}(t,Ea),n=t,(r=[{key:"captureEvent",value:function(e,t,n,r){return{graph:e,edgeID:t.getGraphElementID(),nextLabel:n,prevLabel:r}}},{key:"applyUndo",value:function(e){var t=this.controller.getGraph().getEdgeByElementID(e.eventData.edgeID);if(!t)throw new Error("Unable to find target in graph");t.setEdgeLabel(e.eventData.prevLabel)}},{key:"applyRedo",value:function(e){var t=this.controller.getGraph().getEdgeByElementID(e.eventData.edgeID);if(!t)throw new Error("Unable to find target in graph");t.setEdgeLabel(e.eventData.nextLabel)}}])&&$a(n.prototype,r),o&&$a(n,o),t}();function ol(e){return(ol="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function il(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function al(e,t){return!t||"object"!==ol(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ll(e){return(ll=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ul(e,t){return(ul=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var sl=function(e){function t(e,n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),al(this,ll(t).call(this,e,n,"userPostCreateNode"))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ul(e,t)}(t,Ea),n=t,(r=[{key:"captureEvent",value:function(e,t){return{nodeID:t.getGraphElementID(),x:t.x,y:t.y,accept:t.getNodeAccept(),label:t.getNodeLabel(),custom:t.getNodeCustom()}}},{key:"applyUndo",value:function(e){var t=this.controller.getGraph(),n=t.getNodeByElementID(e.eventData.nodeID);if(!n)throw new Error("Unable to find target in graph");t.deleteNode(n)}},{key:"applyRedo",value:function(e){var t=this.controller.getGraph(),n=t.getNodeByElementID(e.eventData.nodeID);n?(n.x=e.postData.x,n.y=e.postData.y):n=t.createNode(e.postData.x,e.postData.y,e.postData.nodeID),n.setNodeLabel(e.postData.label),n.setNodeAccept(e.postData.accept),n.setNodeCustom(e.postData.custom)}}])&&il(n.prototype,r),o&&il(n,o),t}();function cl(e){return(cl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function pl(e,t){return!t||"object"!==cl(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function hl(e){return(hl=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function yl(e,t){return(yl=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var vl=function(e){function t(e,n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),pl(this,hl(t).call(this,e,n,"userToggleNode"))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&yl(e,t)}(t,Ea),n=t,(r=[{key:"captureEvent",value:function(e,t,n){return{nodeID:t.getGraphElementID(),prevAccept:n}}},{key:"applyUndo",value:function(e){var t=this.controller.getGraph().getNodeByElementID(e.eventData.nodeID);if(!t)throw new Error("Unable to find target in graph");t.setNodeAccept(e.eventData.prevAccept)}},{key:"applyRedo",value:function(e){var t=this.controller.getGraph().getNodeByElementID(e.eventData.nodeID);if(!t)throw new Error("Unable to find target in graph");t.setNodeAccept(!e.eventData.prevAccept)}}])&&fl(n.prototype,r),o&&fl(n,o),t}(),gl=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;t?t.clear():t=new Ir;for(var n=e.nodes||[],r=Math.min(n.length||0,e.nodeCount||0),o=e.edges||[],i=Math.min(o.length||0,e.edgeCount||0),a=e.initial||0,l=new Map,u=0;u<r;++u){var s=n[u];if(s){var c=t.createNode(s.x||0,s.y||0,s.id);c.setNodeLabel(s.label||""),c.setNodeAccept(s.accept||!1),c.setNodeCustom(s.custom||!1),l.set(u,c)}}var f=l.get(a);f&&t.setStartNode(f);for(var p=0;p<i;++p){var h=o[p];if(h){var y=l.get(h.from)||null;if(y){var v=l.get(h.to)||null,g=t.createEdge(y,v,h.id),d=h.quad||{};g.setEdgeLabel(h.label||""),g.setQuadratic(d.radians||0,d.length||0)}}}return t},dl=function(e){for(var t=e.getNodes()||[],n=t.length||0,r=e.getEdges()||[],o=r.length||0,i=e.getStartNode(),a=new Array(n),l=new Map,u=0;u<n;++u){var s=t[u];if(s){var c=s.getGraphElementID();l.set(s,u),a[u]={id:c,x:s.x||0,y:s.y||0,label:s.getNodeLabel()||"",accept:s.getNodeAccept()||!1,custom:s.getNodeCustom()||!1}}}for(var f=new Array(o),p=0;p<o;++p){var h=r[p];if(h){var y=h.getGraphElementID(),v=h.getQuadratic()||{},g=h.getSourceNode(),d=h.getDestinationNode(),b=l.has(g)?l.get(g):-1,m=l.has(d)?l.get(d):-1;f[p]={id:y,from:b,to:m,quad:{radians:v.radians||0,length:v.length||0},label:h.getEdgeLabel()||""}}}return{nodeCount:n,nodes:a,edgeCount:o,edges:f,initial:l.get(i)||0,_version:"1.0.0"}},bl=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:NULL;t?t.clear():t=new Ir;for(var n=e.getElementsByTagName("state")||[],r=n.length,o=e.getElementsByTagName("transition")||[],i=o.length,a="0",l=new Map,u=0;u<r;++u){var s=n[u];if(s){var c=s.getAttribute("id");if(c){var f=0,p=s.getElementsByTagName("x");if(p.length>0){var h=p[0];if(h.hasChildNodes()){var y=h.childNodes[0];if(y)try{f=parseFloat(y.nodeValue)||0}catch(e){f=0}}}var v=0,g=s.getElementsByTagName("y");if(g.length>0){var d=g[0];if(d.hasChildNodes()){var b=d.childNodes[0];if(b)try{v=parseFloat(b.nodeValue)||0}catch(e){v=0}}}var m=s.getElementsByTagName("initial").length>0,w=s.getElementsByTagName("final").length>0,E=t.createNode(f,v);E.setNodeLabel(s.getAttribute("name")||""),E.setNodeAccept(w),m&&(a=c),l.set(c,E)}}}var S=l.get(a);S&&t.setStartNode(S);for(var _=t.getBoundingRect(),O=_.minX,k=_.minY,C=_.width,N=_.height,j=t.getNodes(),P=0,x=j.length;P<x;++P)j[P].x-=O+C/2,j[P].y-=k+N/2;for(var T=new Map,M=0;M<i;++M){var D=o[M];if(D){var I=null,L=D.getElementsByTagName("from");if(L.length>0){var A=L[0];if(A.hasChildNodes()){var R=A.childNodes[0];R&&(I=R.nodeValue)}}if(l.has(I)){var G="",B=D.getElementsByTagName("to");if(B.length>0){var F=B[0];if(F.hasChildNodes()){var U=F.childNodes[0];U&&(G=U.nodeValue||"")}}var H="",z=D.getElementsByTagName("read");if(z.length>0){var V=z[0];if(V.hasChildNodes()){var Q=V.childNodes[0];Q&&(H=Q.nodeValue||"")}}var K=I+"\n"+G,Y=void 0;T.has(K)?Y=T.get(K):(Y=[],T.set(K,Y)),Y.push(H)}}}var X=!0,q=!1,W=void 0;try{for(var J,Z=T.keys()[Symbol.iterator]();!(X=(J=Z.next()).done);X=!0){var $=J.value,ee=$.split("\n");if(2===ee.length){var te=T.get($).join(" "),ne=l.get(ee[0]),re=l.get(ee[1]);t.createEdge(ne,re).setEdgeLabel(te)}}}catch(e){q=!0,W=e}finally{try{X||null==Z.return||Z.return()}finally{if(q)throw W}}return t},ml=function(e){var t=e.getNodes()||[],n=t.length||0,r=e.getEdges()||[],o=(r.length,e.getStartNode()),i=(new DOMParser).parseFromString('<?xml version="1.0" encoding="UTF-8" standalone="no"?>\x3c!--Created with flap.js 1.0.0--\x3e<structure></structure>',"application/xml"),a=i.getElementsByTagName("structure")[0],l=i.createElement("type");l.innerHTML="fa",a.appendChild(l);var u=i.createElement("automaton");a.appendChild(u);for(var s=new Map,c=0;c<n;++c){var f=t[c];s.set(f,c);var p=i.createElement("state");p.id=""+c,p.setAttribute("name",f.getNodeLabel()),u.appendChild(p);var h=i.createElement("x");h.innerHTML=""+(f.x||0),p.appendChild(h);var y=i.createElement("y");y.innerHTML=""+(f.y||0),p.appendChild(y),o===f&&p.appendChild(i.createElement("initial")),f.getNodeAccept()&&p.appendChild(i.createElement("final"))}var v=!0,g=!1,d=void 0;try{for(var b,m=r[Symbol.iterator]();!(v=(b=m.next()).done);v=!0){var w=b.value,E=w.getEdgeSymbolsFromLabel(),S=!0,_=!1,O=void 0;try{for(var k,C=E[Symbol.iterator]();!(S=(k=C.next()).done);S=!0){var N=k.value,j=i.createElement("transition");u.appendChild(j);var P=i.createElement("from");P.innerHTML=""+(s.get(w.getSourceNode())||0),j.appendChild(P);var x=i.createElement("to");x.innerHTML=""+(s.get(w.getDestinationNode())||0),j.appendChild(x);var T=i.createElement("read");T.innerHTML=""+(N||""),j.appendChild(T)}}catch(e){_=!0,O=e}finally{try{S||null==C.return||C.return()}finally{if(_)throw O}}}}catch(e){g=!0,d=e}finally{try{v||null==m.return||m.return()}finally{if(g)throw d}}return i};function wl(e){return(wl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function El(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Sl(e,t){return!t||"object"!==wl(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _l(e){return(_l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ol(e,t){return(Ol=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var kl=function(e){function t(e,n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Sl(this,_l(t).call(this,e,n,"userPreDeleteNodes","userPostDeleteNodes"))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ol(e,t)}(t,Ea),n=t,(r=[{key:"captureEvent",value:function(e,t,n,r,o){var i=[],a=!0,l=!1,u=void 0;try{for(var s,c=n[Symbol.iterator]();!(a=(s=c.next()).done);a=!0){var f=s.value;i.push(f.getGraphElementID())}}catch(e){l=!0,u=e}finally{try{a||null==c.return||c.return()}finally{if(l)throw u}}var p=t.x-r,h=t.y-o;return{graphData:dl(e),targets:i,dx:p,dy:h}}},{key:"capturePostEvent",value:function(e,t,n,r,o){return{graphData:dl(e)}}},{key:"applyUndo",value:function(e){var t=this.controller.getGraph();gl(e.eventData.graphData,this.controller.getGraph());var n=!0,r=!1,o=void 0;try{for(var i,a=e.eventData.targets[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var l=i.value,u=t.getNodeByElementID(l);if(!u)throw new Error("Unable to find target in graph");u.x-=e.eventData.dx,u.y-=e.eventData.dy}}catch(e){r=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}}},{key:"applyRedo",value:function(e){gl(e.postData.graphData,this.controller.getGraph())}}])&&El(n.prototype,r),o&&El(n,o),t}();function Cl(e){return(Cl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Nl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function jl(e,t){return!t||"object"!==Cl(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Pl(e){return(Pl=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function xl(e,t){return(xl=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Tl=function(e){function t(e,n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),jl(this,Pl(t).call(this,e,n,"userRenameNode"))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xl(e,t)}(t,Ea),n=t,(r=[{key:"captureEvent",value:function(e,t,n,r,o){return{node:t,nodeID:t.getGraphElementID(),nextLabel:n,prevLabel:r,prevCustom:o}}},{key:"applyUndo",value:function(e){var t=this.controller.getGraph().getNodeByElementID(e.eventData.nodeID);if(!t)throw new Error("Unable to find target in graph");t.setNodeLabel(e.eventData.prevLabel),t.setNodeCustom(e.eventData.prevCustom)}},{key:"applyRedo",value:function(e){var t=this.controller.getGraph().getNodeByElementID(e.eventData.nodeID);if(!t)throw new Error("Unable to find target in graph");t.setNodeLabel(e.eventData.nextLabel),t.setNodeCustom(!0)}}])&&Nl(n.prototype,r),o&&Nl(n,o),t}();function Ml(e){return(Ml="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Dl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Il(e,t){return!t||"object"!==Ml(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ll(e){return(Ll=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Al(e,t){return(Al=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Rl=function(e){function t(e,n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Il(this,Ll(t).call(this,e,n,"userPostCreateEdge"))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Al(e,t)}(t,Ea),n=t,(r=[{key:"captureEvent",value:function(e,t){var n=t.getQuadratic();return{edge:t,edgeID:t.getGraphElementID(),fromID:t.getSourceNode().getGraphElementID(),toID:t.getDestinationNode()?t.getDestinationNode().getGraphElementID():null,label:t.getEdgeLabel(),quad:{radians:n.radians,length:n.length}}}},{key:"applyUndo",value:function(e){var t=this.controller.getGraph(),n=t.getEdgeByElementID(e.eventData.edgeID);if(!n)throw new Error("Unable to find target in graph");t.deleteEdge(n)}},{key:"applyRedo",value:function(e){var t=this.controller.getGraph(),n=t.getEdgeByElementID(e.postData.edgeID),r=t.getNodeByElementID(e.postData.fromID);if(!r)throw new Error("Trying to create a sourceless edge");var o=t.getNodeByElementID(e.postData.toID)||null;n?(n.setSourceNode(r),n.changeDestinationNode(o)):n=t.createEdge(r,o,e.postData.edgeID),n.setEdgeLabel(e.postData.label),n.setQuadratic(e.postData.quad.radians,e.postData.quad.length)}}])&&Dl(n.prototype,r),o&&Dl(n,o),t}();function Gl(e){return(Gl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Bl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Fl(e,t){return!t||"object"!==Gl(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ul(e){return(Ul=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Hl(e,t){return(Hl=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var zl=function(e){function t(e,n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Fl(this,Ul(t).call(this,e,n,"userPreDeleteEdge"))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Hl(e,t)}(t,Ea),n=t,(r=[{key:"captureEvent",value:function(e,t,n,r){return{edge:t,edgeID:t.getGraphElementID(),fromID:t.getSourceNode().getGraphElementID(),toID:n?n.getGraphElementID():null,label:t.getEdgeLabel(),quad:Object.assign({},r)}}},{key:"applyUndo",value:function(e){var t=this.controller.getGraph(),n=t.getEdgeByElementID(e.eventData.edgeID),r=t.getNodeByElementID(e.eventData.fromID);if(!r)throw new Error("Trying to create a sourceless edge");var o=t.getNodeByElementID(e.eventData.toID)||null;n?(n.setSourceNode(r),n.changeDestinationNode(o)):n=t.createEdge(r,o,e.eventData.edgeID),n.setEdgeLabel(e.eventData.label),n.setQuadratic(e.eventData.quad.radians,e.eventData.quad.length)}},{key:"applyRedo",value:function(e){var t=this.controller.getGraph(),n=t.getEdgeByElementID(e.eventData.edgeID);if(!n)throw new Error("Unable to find target in graph");t.deleteEdge(n)}}])&&Bl(n.prototype,r),o&&Bl(n,o),t}();function Vl(e){return(Vl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ql(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Kl(e,t){return!t||"object"!==Vl(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Yl(e){return(Yl=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Xl(e,t){return(Xl=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ql=function(e){function t(e,n,r){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=Kl(this,Yl(t).call(this,e,n,"userPreImportGraph","userPostImportGraph"))).machineController=r,o}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Xl(e,t)}(t,Ea),n=t,(r=[{key:"captureEvent",value:function(e){return{graphName:this.machineController.getMachineName(),graphData:dl(e)}}},{key:"capturePostEvent",value:function(e){return{graphName:this.machineController.getMachineName(),graphData:dl(e)}}},{key:"applyUndo",value:function(e){gl(e.eventData.graphData,this.controller.getGraph()),this.machineController.setMachineName(e.eventData.graphName)}},{key:"applyRedo",value:function(e){gl(e.postData.graphData,this.controller.getGraph()),this.machineController.setMachineName(e.postData.graphName)}}])&&Ql(n.prototype,r),o&&Ql(n,o),t}();function Wl(e){return(Wl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Jl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Zl(e,t){return!t||"object"!==Wl(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function $l(e){return($l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function eu(e,t){return(eu=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var tu=function(e){function t(e,n,r,o){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Zl(this,$l(t).call(this,e,n,r,o))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&eu(e,t)}(t,Ea),n=t,(r=[{key:"captureEvent",value:function(e){return{graphData:dl(e)}}},{key:"capturePostEvent",value:function(e){return{graphData:dl(e)}}},{key:"applyUndo",value:function(e){gl(e.eventData.graphData,this.controller.getGraph())}},{key:"applyRedo",value:function(e){gl(e.postData.graphData,this.controller.getGraph())}}])&&Jl(n.prototype,r),o&&Jl(n,o),t}();function nu(e){return(nu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ru(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ou(e,t){return!t||"object"!==nu(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function iu(e){return(iu=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function au(e,t){return(au=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var lu=function(e){function t(e,n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ou(this,iu(t).call(this,e,n,"userChangeMachine"))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&au(e,t)}(t,Ea),n=t,(r=[{key:"captureEvent",value:function(e,t,n){return{prevType:n,nextType:t}}},{key:"applyUndo",value:function(e){this.controller.setMachineType(e.eventData.prevType)}},{key:"applyRedo",value:function(e){this.controller.setMachineType(e.postData.nextType)}}])&&ru(n.prototype,r),o&&ru(n,o),t}();function uu(e){return(uu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function su(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function cu(e,t){return!t||"object"!==uu(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function fu(e){return(fu=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function pu(e,t){return(pu=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var hu=function(e){function t(e,n,r){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=cu(this,fu(t).call(this,e,n,"userPreConvertMachine","userPostConvertMachine"))).graphController=r,o}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pu(e,t)}(t,Ea),n=t,(r=[{key:"captureEvent",value:function(e,t,n){var r=this.graphController.getGraph();return{graphData:dl(r),prevType:n}}},{key:"capturePostEvent",value:function(e,t,n){var r=this.graphController.getGraph();return{graphData:dl(r),nextType:t}}},{key:"applyUndo",value:function(e){gl(e.eventData.graphData,this.graphController.getGraph()),this.controller.setMachineType(e.eventData.prevType)}},{key:"applyRedo",value:function(e){gl(e.postData.graphData,this.graphController.getGraph()),this.controller.setMachineType(e.postData.nextType)}}])&&su(n.prototype,r),o&&su(n,o),t}();function yu(e){return(yu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function gu(e,t){return!t||"object"!==yu(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function du(e){return(du=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function bu(e,t){return(bu=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var mu=function(e){function t(e,n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),gu(this,du(t).call(this,e,n,"userRenameMachine"))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&bu(e,t)}(t,Ea),n=t,(r=[{key:"captureEvent",value:function(e,t,n){return{prevName:n,nextName:t}}},{key:"applyUndo",value:function(e){this.controller.setMachineName(e.eventData.prevName)}},{key:"applyRedo",value:function(e){this.controller.setMachineName(e.postData.nextName)}}])&&vu(n.prototype,r),o&&vu(n,o),t}();function wu(e){return(wu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Eu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Su(e,t){return!t||"object"!==wu(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _u(e){return(_u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ou(e,t){return(Ou=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ku=function(e){function t(e,n,r){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=Su(this,_u(t).call(this,e,n,"userPreRenameSymbol","userPostRenameSymbol"))).graphController=r,o}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ou(e,t)}(t,Ea),n=t,(r=[{key:"captureEvent",value:function(e,t,n){var r=this.graphController.getGraph();return{graphData:dl(r),symbol:t,prevSymbol:n}}},{key:"capturePostEvent",value:function(e,t,n,r){var o=this.graphController.getGraph(),i=[],a=!0,l=!1,u=void 0;try{for(var s,c=r[Symbol.iterator]();!(a=(s=c.next()).done);a=!0){var f=s.value;i.push(f.getGraphElementID())}}catch(e){l=!0,u=e}finally{try{a||null==c.return||c.return()}finally{if(l)throw u}}return{graphData:dl(o),symbol:t,prevSymbol:n,targets:i}}},{key:"applyUndo",value:function(e){gl(e.eventData.graphData,this.graphController.getGraph())}},{key:"applyRedo",value:function(e){gl(e.postData.graphData,this.graphController.getGraph())}}])&&Eu(n.prototype,r),o&&Eu(n,o),t}();function Cu(e){return(Cu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Nu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ju(e,t){return!t||"object"!==Cu(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Pu(e){return(Pu=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function xu(e,t){return(xu=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Tu=function(e){function t(e,n,r){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=ju(this,Pu(t).call(this,e,n,"userPreDeleteSymbol","userPostDeleteSymbol"))).graphController=r,o}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xu(e,t)}(t,Ea),n=t,(r=[{key:"captureEvent",value:function(e,t){var n=this.graphController.getGraph();return{graphData:dl(n),symbol:t}}},{key:"capturePostEvent",value:function(e,t,n){var r=this.graphController.getGraph(),o=[],i=!0,a=!1,l=void 0;try{for(var u,s=n[Symbol.iterator]();!(i=(u=s.next()).done);i=!0){var c=u.value;o.push(c.getGraphElementID())}}catch(e){a=!0,l=e}finally{try{i||null==s.return||s.return()}finally{if(a)throw l}}return{graphData:dl(r),symbol:t,targets:o}}},{key:"applyUndo",value:function(e){gl(e.eventData.graphData,this.graphController.getGraph())}},{key:"applyRedo",value:function(e){gl(e.postData.graphData,this.graphController.getGraph())}}])&&Nu(n.prototype,r),o&&Nu(n,o),t}();function Mu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Du=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.graphController=null,this.machineController=null,this.eventHandlers=[],this.undoManager=t}var t,n,r;return t=e,(n=[{key:"initialize",value:function(e){this.graphController=e.getGraphController(),this.machineController=e.getMachineController();this.graphController.getGraph();var t=this.undoManager;this.eventHandlers.push(new Da(t,this.graphController)),this.eventHandlers.push(new Ba(t,this.graphController)),this.eventHandlers.push(new Qa(t,this.graphController)),this.eventHandlers.push(new Ja(t,this.graphController)),this.eventHandlers.push(new Na(t,this.graphController)),this.eventHandlers.push(new rl(t,this.graphController)),this.eventHandlers.push(new sl(t,this.graphController)),this.eventHandlers.push(new Tl(t,this.graphController)),this.eventHandlers.push(new vl(t,this.graphController)),this.eventHandlers.push(new kl(t,this.graphController)),this.eventHandlers.push(new Rl(t,this.graphController)),this.eventHandlers.push(new zl(t,this.graphController)),this.eventHandlers.push(new ql(t,this.graphController,this.machineController)),this.eventHandlers.push(new tu(t,this.graphController,"userPreChangeLayout","userPostChangeLayout")),this.eventHandlers.push(new lu(t,this.machineController)),this.eventHandlers.push(new hu(t,this.machineController,this.graphController)),this.eventHandlers.push(new mu(t,this.machineController)),this.eventHandlers.push(new ku(t,this.machineController,this.graphController)),this.eventHandlers.push(new Tu(t,this.machineController,this.graphController))}},{key:"destroy",value:function(){var e=!0,t=!1,n=void 0;try{for(var r,o=this.eventHandlers[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){r.value.destroy()}}catch(e){t=!0,n=e}finally{try{e||null==o.return||o.return()}finally{if(t)throw n}}this.graphController.clearEventListeners()}}])&&Mu(t.prototype,n),r&&Mu(t,r),e}();n(103);function Iu(e){return(Iu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Lu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Au(e){return(Au=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ru(e,t){return(Ru=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Gu(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var Bu=["0","1"],Fu=["ε"];var Uu=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=Au(t).call(this,e))||"object"!==Iu(o)&&"function"!=typeof o?Gu(r):o).parentElement=null,n.inputElement=null,n._timer=null,n._prevValue="",n.state={target:null,callback:null},n.onContextMenu=n.onContextMenu.bind(Gu(Gu(n))),n.onFormat=n.onFormat.bind(Gu(Gu(n))),n.onSubmit=n.onSubmit.bind(Gu(Gu(n))),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ru(e,t)}(t,a.a.Component),n=t,(r=[{key:"openEditor",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(!this.inputElement||!this.parentElement)throw new Error("Trying to open editor that has not yet mounted");this.setState(function(t,n){return{target:e,callback:o}}),this.inputElement.resetValue(e.getEdgeLabel(),function(){n&&t.inputElement.setValue(n),t._prevValue=e.getEdgeLabel(),t.parentElement.focus(),t.inputElement.focus(r)})}},{key:"closeEditor",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.inputElement||!this.parentElement)throw new Error("Trying to open editor that has not yet mounted");if(null!==this.state.target){if(e){var t=this.inputElement.value;this.state.target.setEdgeLabel(t)}else this.state.target.getEdgeLabel()||(this.state.target.setEdgeLabel(null),this.props.graphController.getGraph().deleteEdge(this.state.target));this.setState({target:null}),this.state.callback&&this.state.callback()}this.inputElement.blur()}},{key:"hasFocus",value:function(){return this.inputElement.hasFocus()}},{key:"isEditorOpen",value:function(){return null!==this.state.target}},{key:"onContextMenu",value:function(e){e.preventDefault(),e.stopPropagation()}},{key:"appendSymbol",value:function(e){this.inputElement.appendValue(e," "),this.inputElement.focus(!1)}},{key:"onSubmit",value:function(e,t){e!=t||this.closeEditor(!1)}},{key:"onFormat",value:function(e){return this.props.machineController.getLabelFormatter().call(null,e,!0)}},{key:"render",value:function(){var e=this,t=this.props.inputController.getInputAdapter().getViewport(),n=(this.props.graphController,this.props.machineController),r=this.props.screen,o={visibility:"hidden"},i=this.state.target;if(i){o.visibility="visible";var l=i.getCenterPoint(),u=function(e,t,n){var r=e.getScreenCTM();return{x:t*r.a+r.e,y:n*r.d+r.f}}(r,l.x+t.getOffsetX(),l.y+t.getOffsetY()),s=u.x,c=u.y+-64+-36,f=-this.parentElement.offsetWidth/2,p=-this.parentElement.offsetHeight/2;o.top=c+p+"px",o.left=s+f+"px"}var y=n.getMachineBuilder().getMachine().getAlphabet();return a.a.createElement("div",{className:"bubble",id:"label-editor",ref:function(t){return e.parentElement=t},tabIndex:"0",style:o,onContextMenu:this.onContextMenu,onFocus:function(t){clearTimeout(e._timer)},onBlur:function(t){e._timer=setTimeout(function(){return e.closeEditor(!0)},10)}},a.a.createElement(h,{className:"label-editor-input",ref:function(t){return e.inputElement=t},formatter:this.onFormat,onSubmit:this.onSubmit,captureOnExit:"none"}),a.a.createElement("div",{className:"label-editor-tray"},y&&a.a.createElement("span",{className:"label-editor-tray-used"},y.map(function(t,n){return t.length<1?null:a.a.createElement("button",{key:n,onClick:function(n){return e.appendSymbol(t)}},t)})),a.a.createElement("span",{className:"label-editor-tray-default"},y&&y.length<=1&&Bu.map(function(t,n){return a.a.createElement("button",{key:n,onClick:function(n){return e.appendSymbol(t)}},t)}),Fu.map(function(t,n){return a.a.createElement("button",{key:n,onClick:function(n){return e.appendSymbol(t)}},t)}))))}}])&&Lu(n.prototype,r),o&&Lu(n,o),t}(),Hu=n(7),zu=n(13);function Vu(e){return(Vu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Qu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ku(e,t){return!t||"object"!==Vu(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Yu(e){return(Yu=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Xu(e,t){return(Xu=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var qu=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Ku(this,Yu(t).call(this))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Xu(e,t)}(t,Hu["a"]),n=t,(r=[{key:"fromJSON",value:function(e,t){var n=t.getGraphController(),r=t.getMachineController(),o=r.getMachineBuilder(),i=n.getGraph(),a=("_metadata"in e&&e._metadata,gl(e.graphData,i)),l=e.machineData,u=l.name;u&&r.setMachineName(u);var s=l.type;s&&r.setMachineType(s);var c=l.symbols;if(c){o._symbols.length=0;var f=!0,p=!1,h=void 0;try{for(var y,v=c[Symbol.iterator]();!(f=(y=v.next()).done);f=!0){var g=y.value;o._symbols.push(g)}}catch(e){p=!0,h=e}finally{try{f||null==v.return||v.return()}finally{if(p)throw h}}}var d=l.statePrefix;return d&&(o.getLabeler().prefix=d),a}},{key:"toJSON",value:function(e,t){var n=t.getCurrentModule(),r=(t.getGraphController(),t.getMachineController()),o=r.getMachineBuilder(),i={};return i._metadata={module:n.getModuleName(),version:"0.3.0:"+n.getModuleVersion(),timestamp:(new Date).toString()},i.graphData=e,i.machineData={name:r.getMachineName(),type:r.getMachineType(),symbols:r.getCustomSymbols(),statePrefix:o.getLabeler().prefix},i}},{key:"importFromData",value:function(e,t){this.fromJSON(e,t)}},{key:"exportToData",value:function(e){var t=e.getGraphController().getGraph(),n=dl(t);return this.toJSON(n,e)}},{key:"doesSupportData",value:function(){return!0}},{key:"importFromFile",value:function(e,t){var n=this;return new Promise(function(r,o){var i=e.name;if(!i.endsWith(n.getFileType()))throw new Error("Trying to import invalid file type for '"+n.getFileType()+"': "+i);var a=new FileReader;a.onload=function(e){var l=t.getGraphController(),u=t.getMachineController(),s=e.target.result,c=i.substring(0,i.length-n.getFileType().length-1),f=l.getGraph();l.emit("userPreImportGraph",f);try{var p=JSON.parse(s);n.fromJSON(p,t),l.emit("userImportGraph",f),u&&u.setMachineName(c),r()}catch(e){a.abort(),o(e)}finally{l.emit("userPostImportGraph",f)}},a.onerror=function(e){o(new Error("Unable to import file: "+e.target.error.code))},a.readAsText(e)})}},{key:"exportToFile",value:function(e,t){var n=t.getGraphController().getGraph(),r=dl(n),o=this.toJSON(r,t),i=JSON.stringify(o);Qe.a.downloadText(e+".fsa."+this.getFileType(),i)}},{key:"doesSupportFile",value:function(){return!0}},{key:"canImport",value:function(){return!0}},{key:"getTitle",value:function(){return I18N.toString("file.export.machine.hint")}},{key:"getLabel",value:function(){return I18N.toString("file.export.machine")}},{key:"getFileType",value:function(){return"json"}},{key:"getIconComponentClass",value:function(){return zu.a}}])&&Qu(n.prototype,r),o&&Qu(n,o),t}();function Wu(e){return(Wu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ju(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Zu(e,t){return!t||"object"!==Wu(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function $u(e){return($u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function es(e,t){return(es=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ts=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Zu(this,$u(t).call(this,e))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&es(e,t)}(t,a.a.Component),n=t,(r=[{key:"render",value:function(){return a.a.createElement("svg",{className:"xml-icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 56 56"},a.a.createElement("g",null,a.a.createElement("path",{fill:"#E9E9E0",d:"M36.985,0H7.963C7.155,0,6.5,0.655,6.5,1.926V55c0,0.345,0.655,1,1.463,1h40.074 c0.808,0,1.463-0.655,1.463-1V12.978c0-0.696-0.093-0.92-0.257-1.085L37.607,0.257C37.442,0.093,37.218,0,36.985,0z"}),a.a.createElement("polygon",{fill:"#D9D7CA",points:"37.5,0.151 37.5,12 49.349,12 \t"}),a.a.createElement("path",{fill:"#F29C1F",d:"M48.037,56H7.963C7.155,56,6.5,55.345,6.5,54.537V39h43v15.537C49.5,55.345,48.845,56,48.037,56z"}),a.a.createElement("g",null,a.a.createElement("path",{fill:"#FFFFFF",d:"M19.379,48.105L21.936,53h-1.9l-1.6-3.801h-0.137L16.576,53h-1.9l2.557-4.895l-2.721-5.182h1.873 l1.777,4.102h0.137l1.928-4.102H22.1L19.379,48.105z"}),a.a.createElement("path",{fill:"#FFFFFF",d:"M31.998,42.924h1.668V53h-1.668v-6.932l-2.256,5.605h-1.449l-2.27-5.605V53h-1.668V42.924h1.668 l2.994,6.891L31.998,42.924z"}),a.a.createElement("path",{fill:"#FFFFFF",d:"M37.863,42.924v8.832h4.635V53h-6.303V42.924H37.863z"})),a.a.createElement("path",{fill:"#F29C1F",d:"M15.5,24c-0.256,0-0.512-0.098-0.707-0.293c-0.391-0.391-0.391-1.023,0-1.414l6-6 c0.391-0.391,1.023-0.391,1.414,0s0.391,1.023,0,1.414l-6,6C16.012,23.902,15.756,24,15.5,24z"}),a.a.createElement("path",{fill:"#F29C1F",d:"M21.5,30c-0.256,0-0.512-0.098-0.707-0.293l-6-6c-0.391-0.391-0.391-1.023,0-1.414 s1.023-0.391,1.414,0l6,6c0.391,0.391,0.391,1.023,0,1.414C22.012,29.902,21.756,30,21.5,30z"}),a.a.createElement("path",{fill:"#F29C1F",d:"M33.5,30c-0.256,0-0.512-0.098-0.707-0.293c-0.391-0.391-0.391-1.023,0-1.414l6-6 c0.391-0.391,1.023-0.391,1.414,0s0.391,1.023,0,1.414l-6,6C34.012,29.902,33.756,30,33.5,30z"}),a.a.createElement("path",{fill:"#F29C1F",d:"M39.5,24c-0.256,0-0.512-0.098-0.707-0.293l-6-6c-0.391-0.391-0.391-1.023,0-1.414 s1.023-0.391,1.414,0l6,6c0.391,0.391,0.391,1.023,0,1.414C40.012,23.902,39.756,24,39.5,24z"}),a.a.createElement("path",{fill:"#F29C1F",d:"M24.5,32c-0.11,0-0.223-0.019-0.333-0.058c-0.521-0.184-0.794-0.755-0.61-1.276l6-17 c0.185-0.521,0.753-0.795,1.276-0.61c0.521,0.184,0.794,0.755,0.61,1.276l-6,17C25.298,31.744,24.912,32,24.5,32z"})))}}])&&Ju(n.prototype,r),o&&Ju(n,o),t}();function ns(e){return(ns="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function rs(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function os(e,t){return!t||"object"!==ns(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function is(e){return(is=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function as(e,t){return(as=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ls=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),os(this,is(t).call(this))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&as(e,t)}(t,Hu["a"]),n=t,(r=[{key:"importFromFile",value:function(e,t){var n=this;return new Promise(function(r,o){var i=e.name;if(!i.endsWith(n.getFileType()))throw new Error("Trying to import invalid file type for '"+n.getFileType()+"': "+i);var a=new FileReader;a.onload=function(e){var l=t.getGraphController(),u=t.getMachineController(),s=e.target.result,c=i.substring(0,i.length-n.getFileType().length-1),f=l.getGraph();l.emit("userPreImportGraph",f);try{var p=(new DOMParser).parseFromString(s,"text/xml");bl(p,f),l.emit("userImportGraph",f),u&&u.setMachineName(c),r()}catch(e){a.abort(),o(e)}finally{l.emit("userPostImportGraph",f)}},a.onerror=function(e){o(new Error("Unable to import file: "+e.target.error.code))},a.readAsText(e)})}},{key:"exportToFile",value:function(e,t){var n=t.getGraphController().getGraph(),r=ml(n),o=(new XMLSerializer).serializeToString(r);Qe.a.downloadText(e+"."+this.getFileType(),o)}},{key:"doesSupportFile",value:function(){return!0}},{key:"canImport",value:function(){return!0}},{key:"getTitle",value:function(){return I18N.toString("file.export.jff.hint")}},{key:"getLabel",value:function(){return I18N.toString("file.export.jff")}},{key:"getFileType",value:function(){return"jff"}},{key:"getIconComponentClass",value:function(){return ts}}])&&rs(n.prototype,r),o&&rs(n,o),t}();function us(e){return(us="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ss(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function cs(e,t,n){return(cs="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=fs(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function fs(e){return(fs=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ps(e,t){return(ps=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function hs(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var ys=[Sn,ze,Ln],vs=[new qu,new ls],gs=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=fs(t).call(this,e))||"object"!==us(o)&&"function"!=typeof o?hs(r):o)._refreshRate=60,n._ticks=0,n._inputController=new Sr(hs(hs(n)),e.getInputAdapter()),n._graphController=new Ur(hs(hs(n))),n._machineController=new Yr(hs(hs(n))),n._machineBuilder=new ma(n._graphController.getGraph()),n._eventManager=new Du(e.getUndoManager()),n._testingManager=new at,n}var n,i,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ps(e,t)}(t,r["a"]),n=t,(i=[{key:"initialize",value:function(e){var n=this;cs(fs(t.prototype),"initialize",this).call(this,e),this._inputController.initialize(e),this._graphController.initialize(e),this._machineController.initialize(e),this._machineBuilder.initialize(e),this._eventManager.initialize(e),this._testingManager.initialize(e);this._graphController.on("tryCreateWhileTrash",function(){n._inputController.isTrashMode()&&o.a.addMessage(I18N.toString("message.warning.cannotmodify"),"warning","tryCreateWhileTrash")})}},{key:"destroy",value:function(e){this._testingManager.destroy(),this._eventManager.destroy(),this._machineBuilder.destroy(),this._machineController.destroy(),this._graphController.destroy(),this._inputController.destroy(),cs(fs(t.prototype),"destroy",this).call(this,e)}},{key:"update",value:function(e){this._inputController.update(),--this._ticks<=0&&(this._machineBuilder.update(),this._ticks=this._refreshRate)}},{key:"getGraph",value:function(){return this._graphController.getGraph()}},{key:"getTestingManager",value:function(){return this._testingManager}},{key:"getDefaultGraphLayout",value:function(){return Nr}},{key:"getMachineBuilder",value:function(){return this._machineBuilder}},{key:"getLabelFormatter",value:function(){return this._machineBuilder.formatAlphabetString.bind(this._machineBuilder)}},{key:"getLabelEditor",value:function(){return Uu}},{key:"getRenderer",value:function(e){switch(e){case"graphoverlay":return Ro;case"viewport":return Bi}return null}},{key:"getGraphRenderer",value:function(){return bo}},{key:"getInputController",value:function(){return this._inputController}},{key:"getGraphController",value:function(){return this._graphController}},{key:"getMachineController",value:function(){return this._machineController}},{key:"getDefaultGraphExporter",value:function(){return vs[0]}},{key:"getGraphExporters",value:function(){return vs}},{key:"getModuleVersion",value:function(){return"0.0.1"}},{key:"getDefaultModulePanel",value:function(){return Un}},{key:"getModulePanels",value:function(){return ys}},{key:"getModuleName",value:function(){return"fsa"}},{key:"getLocalizedModuleName",value:function(){return this._machineBuilder.getMachineType()}}])&&ss(n.prototype,i),a&&ss(n,a),t}();t.default=gs}}]);
//# sourceMappingURL=sourcemap/module_fsa.bundle.js.map